function _mergeNamespaces(ns,ts){for(var rs=0;rs<ts.length;rs++){const as=ts[rs];if(typeof as!="string"&&!Array.isArray(as)){for(const os in as)if(os!=="default"&&!(os in ns)){const is=Object.getOwnPropertyDescriptor(as,os);is&&Object.defineProperty(ns,os,is.get?is:{enumerable:!0,get:()=>as[os]})}}}return Object.freeze(Object.defineProperty(ns,Symbol.toStringTag,{value:"Module"}))}const Shape$2=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return ShapeBase$1},get Circle(){return Circle$1},get Ellipse(){return Ellipse$1},get Image(){return ImageShape},get Line(){return Line$2},get Marker(){return Marker$2},get Path(){return Path$1},get Polygon(){return Polygon$1},get Polyline(){return PolyLine},get Rect(){return Rect$2},get Text(){return Text$2}},Symbol.toStringTag,{value:"Module"})),Shape$1=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return ShapeBase},get Circle(){return Circle},get Dom(){return Dom},get Ellipse(){return Ellipse},get Image(){return Image$1},get Line(){return Line$1},get Marker(){return Marker$1},get Path(){return Path},get Polygon(){return Polygon},get Polyline(){return Polyline},get Rect(){return Rect$1},get Text(){return Text$1}},Symbol.toStringTag,{value:"Module"}));(function(){const ts=document.createElement("link").relList;if(ts&&ts.supports&&ts.supports("modulepreload"))return;for(const os of document.querySelectorAll('link[rel="modulepreload"]'))as(os);new MutationObserver(os=>{for(const is of os)if(is.type==="childList")for(const us of is.addedNodes)us.tagName==="LINK"&&us.rel==="modulepreload"&&as(us)}).observe(document,{childList:!0,subtree:!0});function rs(os){const is={};return os.integrity&&(is.integrity=os.integrity),os.referrerPolicy&&(is.referrerPolicy=os.referrerPolicy),os.crossOrigin==="use-credentials"?is.credentials="include":os.crossOrigin==="anonymous"?is.credentials="omit":is.credentials="same-origin",is}function as(os){if(os.ep)return;os.ep=!0;const is=rs(os);fetch(os.href,is)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(ns){return ns&&ns.__esModule&&Object.prototype.hasOwnProperty.call(ns,"default")?ns.default:ns}function getAugmentedNamespace(ns){if(ns.__esModule)return ns;var ts=ns.default;if(typeof ts=="function"){var rs=function as(){return this instanceof as?Reflect.construct(ts,arguments,this.constructor):ts.apply(this,arguments)};rs.prototype=ts.prototype}else rs={};return Object.defineProperty(rs,"__esModule",{value:!0}),Object.keys(ns).forEach(function(as){var os=Object.getOwnPropertyDescriptor(ns,as);Object.defineProperty(rs,as,os.get?os:{enumerable:!0,get:function(){return ns[as]}})}),rs}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react$1={exports:{}},react_production_min$1={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$5=Symbol.for("react.memo"),y$5=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$3(ns){return ns===null||typeof ns!="object"?null:(ns=z$3&&ns[z$3]||ns["@@iterator"],typeof ns=="function"?ns:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$3=Object.assign,D$3={};function E$3(ns,ts,rs){this.props=ns,this.context=ts,this.refs=D$3,this.updater=rs||B$3}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(ns,ts){if(typeof ns!="object"&&typeof ns!="function"&&ns!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ns,ts,"setState")};E$3.prototype.forceUpdate=function(ns){this.updater.enqueueForceUpdate(this,ns,"forceUpdate")};function F$2(){}F$2.prototype=E$3.prototype;function G$3(ns,ts,rs){this.props=ns,this.context=ts,this.refs=D$3,this.updater=rs||B$3}var H$3=G$3.prototype=new F$2;H$3.constructor=G$3;C$3(H$3,E$3.prototype);H$3.isPureReactComponent=!0;var I$3=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$3={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$3(ns,ts,rs){var as,os={},is=null,us=null;if(ts!=null)for(as in ts.ref!==void 0&&(us=ts.ref),ts.key!==void 0&&(is=""+ts.key),ts)J$2.call(ts,as)&&!L$3.hasOwnProperty(as)&&(os[as]=ts[as]);var ls=arguments.length-2;if(ls===1)os.children=rs;else if(1<ls){for(var fs=Array(ls),hs=0;hs<ls;hs++)fs[hs]=arguments[hs+2];os.children=fs}if(ns&&ns.defaultProps)for(as in ls=ns.defaultProps,ls)os[as]===void 0&&(os[as]=ls[as]);return{$$typeof:l$3,type:ns,key:is,ref:us,props:os,_owner:K$3.current}}function N$3(ns,ts){return{$$typeof:l$3,type:ns.type,key:ts,ref:ns.ref,props:ns.props,_owner:ns._owner}}function O$3(ns){return typeof ns=="object"&&ns!==null&&ns.$$typeof===l$3}function escape$1(ns){var ts={"=":"=0",":":"=2"};return"$"+ns.replace(/[=:]/g,function(rs){return ts[rs]})}var P$3=/\/+/g;function Q$3(ns,ts){return typeof ns=="object"&&ns!==null&&ns.key!=null?escape$1(""+ns.key):ts.toString(36)}function R$4(ns,ts,rs,as,os){var is=typeof ns;(is==="undefined"||is==="boolean")&&(ns=null);var us=!1;if(ns===null)us=!0;else switch(is){case"string":case"number":us=!0;break;case"object":switch(ns.$$typeof){case l$3:case n$3:us=!0}}if(us)return us=ns,os=os(us),ns=as===""?"."+Q$3(us,0):as,I$3(os)?(rs="",ns!=null&&(rs=ns.replace(P$3,"$&/")+"/"),R$4(os,ts,rs,"",function(hs){return hs})):os!=null&&(O$3(os)&&(os=N$3(os,rs+(!os.key||us&&us.key===os.key?"":(""+os.key).replace(P$3,"$&/")+"/")+ns)),ts.push(os)),1;if(us=0,as=as===""?".":as+":",I$3(ns))for(var ls=0;ls<ns.length;ls++){is=ns[ls];var fs=as+Q$3(is,ls);us+=R$4(is,ts,rs,fs,os)}else if(fs=A$3(ns),typeof fs=="function")for(ns=fs.call(ns),ls=0;!(is=ns.next()).done;)is=is.value,fs=as+Q$3(is,ls++),us+=R$4(is,ts,rs,fs,os);else if(is==="object")throw ts=String(ns),Error("Objects are not valid as a React child (found: "+(ts==="[object Object]"?"object with keys {"+Object.keys(ns).join(", ")+"}":ts)+"). If you meant to render a collection of children, use an array instead.");return us}function S$3(ns,ts,rs){if(ns==null)return ns;var as=[],os=0;return R$4(ns,as,"","",function(is){return ts.call(rs,is,os++)}),as}function T$4(ns){if(ns._status===-1){var ts=ns._result;ts=ts(),ts.then(function(rs){(ns._status===0||ns._status===-1)&&(ns._status=1,ns._result=rs)},function(rs){(ns._status===0||ns._status===-1)&&(ns._status=2,ns._result=rs)}),ns._status===-1&&(ns._status=0,ns._result=ts)}if(ns._status===1)return ns._result.default;throw ns._result}var U$3={current:null},V$3={transition:null},W$3={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$3};react_production_min$1.Children={map:S$3,forEach:function(ns,ts,rs){S$3(ns,function(){ts.apply(this,arguments)},rs)},count:function(ns){var ts=0;return S$3(ns,function(){ts++}),ts},toArray:function(ns){return S$3(ns,function(ts){return ts})||[]},only:function(ns){if(!O$3(ns))throw Error("React.Children.only expected to receive a single React element child.");return ns}};react_production_min$1.Component=E$3;react_production_min$1.Fragment=p$4;react_production_min$1.Profiler=r$2;react_production_min$1.PureComponent=G$3;react_production_min$1.StrictMode=q$3;react_production_min$1.Suspense=w$2;react_production_min$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min$1.cloneElement=function(ns,ts,rs){if(ns==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ns+".");var as=C$3({},ns.props),os=ns.key,is=ns.ref,us=ns._owner;if(ts!=null){if(ts.ref!==void 0&&(is=ts.ref,us=K$3.current),ts.key!==void 0&&(os=""+ts.key),ns.type&&ns.type.defaultProps)var ls=ns.type.defaultProps;for(fs in ts)J$2.call(ts,fs)&&!L$3.hasOwnProperty(fs)&&(as[fs]=ts[fs]===void 0&&ls!==void 0?ls[fs]:ts[fs])}var fs=arguments.length-2;if(fs===1)as.children=rs;else if(1<fs){ls=Array(fs);for(var hs=0;hs<fs;hs++)ls[hs]=arguments[hs+2];as.children=ls}return{$$typeof:l$3,type:ns.type,key:os,ref:is,props:as,_owner:us}};react_production_min$1.createContext=function(ns){return ns={$$typeof:u$2,_currentValue:ns,_currentValue2:ns,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ns.Provider={$$typeof:t$2,_context:ns},ns.Consumer=ns};react_production_min$1.createElement=M$3;react_production_min$1.createFactory=function(ns){var ts=M$3.bind(null,ns);return ts.type=ns,ts};react_production_min$1.createRef=function(){return{current:null}};react_production_min$1.forwardRef=function(ns){return{$$typeof:v$3,render:ns}};react_production_min$1.isValidElement=O$3;react_production_min$1.lazy=function(ns){return{$$typeof:y$5,_payload:{_status:-1,_result:ns},_init:T$4}};react_production_min$1.memo=function(ns,ts){return{$$typeof:x$5,type:ns,compare:ts===void 0?null:ts}};react_production_min$1.startTransition=function(ns){var ts=V$3.transition;V$3.transition={};try{ns()}finally{V$3.transition=ts}};react_production_min$1.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min$1.useCallback=function(ns,ts){return U$3.current.useCallback(ns,ts)};react_production_min$1.useContext=function(ns){return U$3.current.useContext(ns)};react_production_min$1.useDebugValue=function(){};react_production_min$1.useDeferredValue=function(ns){return U$3.current.useDeferredValue(ns)};react_production_min$1.useEffect=function(ns,ts){return U$3.current.useEffect(ns,ts)};react_production_min$1.useId=function(){return U$3.current.useId()};react_production_min$1.useImperativeHandle=function(ns,ts,rs){return U$3.current.useImperativeHandle(ns,ts,rs)};react_production_min$1.useInsertionEffect=function(ns,ts){return U$3.current.useInsertionEffect(ns,ts)};react_production_min$1.useLayoutEffect=function(ns,ts){return U$3.current.useLayoutEffect(ns,ts)};react_production_min$1.useMemo=function(ns,ts){return U$3.current.useMemo(ns,ts)};react_production_min$1.useReducer=function(ns,ts,rs){return U$3.current.useReducer(ns,ts,rs)};react_production_min$1.useRef=function(ns){return U$3.current.useRef(ns)};react_production_min$1.useState=function(ns){return U$3.current.useState(ns)};react_production_min$1.useSyncExternalStore=function(ns,ts,rs){return U$3.current.useSyncExternalStore(ns,ts,rs)};react_production_min$1.useTransition=function(){return U$3.current.useTransition()};react_production_min$1.version="18.2.0";react$1.exports=react_production_min$1;var reactExports$1=react$1.exports;const React$1=getDefaultExportFromCjs(reactExports$1);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports$1,k$1=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$3=Object.prototype.hasOwnProperty,n$2=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$2(ns,ts,rs){var as,os={},is=null,us=null;rs!==void 0&&(is=""+rs),ts.key!==void 0&&(is=""+ts.key),ts.ref!==void 0&&(us=ts.ref);for(as in ts)m$3.call(ts,as)&&!p$3.hasOwnProperty(as)&&(os[as]=ts[as]);if(ns&&ns.defaultProps)for(as in ts=ns.defaultProps,ts)os[as]===void 0&&(os[as]=ts[as]);return{$$typeof:k$1,type:ns,key:is,ref:us,props:os,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(ns){function ts(Js,Vs){var Zs=Js.length;Js.push(Vs);e:for(;0<Zs;){var Sl=Zs-1>>>1,Il=Js[Sl];if(0<os(Il,Vs))Js[Sl]=Vs,Js[Zs]=Il,Zs=Sl;else break e}}function rs(Js){return Js.length===0?null:Js[0]}function as(Js){if(Js.length===0)return null;var Vs=Js[0],Zs=Js.pop();if(Zs!==Vs){Js[0]=Zs;e:for(var Sl=0,Il=Js.length,Nl=Il>>>1;Sl<Nl;){var Tl=2*(Sl+1)-1,_c=Js[Tl],l0=Tl+1,g0=Js[l0];if(0>os(_c,Zs))l0<Il&&0>os(g0,_c)?(Js[Sl]=g0,Js[l0]=Zs,Sl=l0):(Js[Sl]=_c,Js[Tl]=Zs,Sl=Tl);else if(l0<Il&&0>os(g0,Zs))Js[Sl]=g0,Js[l0]=Zs,Sl=l0;else break e}}return Vs}function os(Js,Vs){var Zs=Js.sortIndex-Vs.sortIndex;return Zs!==0?Zs:Js.id-Vs.id}if(typeof performance=="object"&&typeof performance.now=="function"){var is=performance;ns.unstable_now=function(){return is.now()}}else{var us=Date,ls=us.now();ns.unstable_now=function(){return us.now()-ls}}var fs=[],hs=[],vs=1,gs=null,ys=3,xs=!1,ms=!1,Ss=!1,Ms=typeof setTimeout=="function"?setTimeout:null,$s=typeof clearTimeout=="function"?clearTimeout:null,bs=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Cs(Js){for(var Vs=rs(hs);Vs!==null;){if(Vs.callback===null)as(hs);else if(Vs.startTime<=Js)as(hs),Vs.sortIndex=Vs.expirationTime,ts(fs,Vs);else break;Vs=rs(hs)}}function As(Js){if(Ss=!1,Cs(Js),!ms)if(rs(fs)!==null)ms=!0,qs(Is);else{var Vs=rs(hs);Vs!==null&&_l(As,Vs.startTime-Js)}}function Is(Js,Vs){ms=!1,Ss&&(Ss=!1,$s(Ds),Ds=-1),xs=!0;var Zs=ys;try{for(Cs(Vs),gs=rs(fs);gs!==null&&(!(gs.expirationTime>Vs)||Js&&!js());){var Sl=gs.callback;if(typeof Sl=="function"){gs.callback=null,ys=gs.priorityLevel;var Il=Sl(gs.expirationTime<=Vs);Vs=ns.unstable_now(),typeof Il=="function"?gs.callback=Il:gs===rs(fs)&&as(fs),Cs(Vs)}else as(fs);gs=rs(fs)}if(gs!==null)var Nl=!0;else{var Tl=rs(hs);Tl!==null&&_l(As,Tl.startTime-Vs),Nl=!1}return Nl}finally{gs=null,ys=Zs,xs=!1}}var ks=!1,Ps=null,Ds=-1,Fs=5,Rs=-1;function js(){return!(ns.unstable_now()-Rs<Fs)}function zs(){if(Ps!==null){var Js=ns.unstable_now();Rs=Js;var Vs=!0;try{Vs=Ps(!0,Js)}finally{Vs?Us():(ks=!1,Ps=null)}}else ks=!1}var Us;if(typeof bs=="function")Us=function(){bs(zs)};else if(typeof MessageChannel<"u"){var Ys=new MessageChannel,Ks=Ys.port2;Ys.port1.onmessage=zs,Us=function(){Ks.postMessage(null)}}else Us=function(){Ms(zs,0)};function qs(Js){Ps=Js,ks||(ks=!0,Us())}function _l(Js,Vs){Ds=Ms(function(){Js(ns.unstable_now())},Vs)}ns.unstable_IdlePriority=5,ns.unstable_ImmediatePriority=1,ns.unstable_LowPriority=4,ns.unstable_NormalPriority=3,ns.unstable_Profiling=null,ns.unstable_UserBlockingPriority=2,ns.unstable_cancelCallback=function(Js){Js.callback=null},ns.unstable_continueExecution=function(){ms||xs||(ms=!0,qs(Is))},ns.unstable_forceFrameRate=function(Js){0>Js||125<Js?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Fs=0<Js?Math.floor(1e3/Js):5},ns.unstable_getCurrentPriorityLevel=function(){return ys},ns.unstable_getFirstCallbackNode=function(){return rs(fs)},ns.unstable_next=function(Js){switch(ys){case 1:case 2:case 3:var Vs=3;break;default:Vs=ys}var Zs=ys;ys=Vs;try{return Js()}finally{ys=Zs}},ns.unstable_pauseExecution=function(){},ns.unstable_requestPaint=function(){},ns.unstable_runWithPriority=function(Js,Vs){switch(Js){case 1:case 2:case 3:case 4:case 5:break;default:Js=3}var Zs=ys;ys=Js;try{return Vs()}finally{ys=Zs}},ns.unstable_scheduleCallback=function(Js,Vs,Zs){var Sl=ns.unstable_now();switch(typeof Zs=="object"&&Zs!==null?(Zs=Zs.delay,Zs=typeof Zs=="number"&&0<Zs?Sl+Zs:Sl):Zs=Sl,Js){case 1:var Il=-1;break;case 2:Il=250;break;case 5:Il=1073741823;break;case 4:Il=1e4;break;default:Il=5e3}return Il=Zs+Il,Js={id:vs++,callback:Vs,priorityLevel:Js,startTime:Zs,expirationTime:Il,sortIndex:-1},Zs>Sl?(Js.sortIndex=Zs,ts(hs,Js),rs(fs)===null&&Js===rs(hs)&&(Ss?($s(Ds),Ds=-1):Ss=!0,_l(As,Zs-Sl))):(Js.sortIndex=Il,ts(fs,Js),ms||xs||(ms=!0,qs(Is))),Js},ns.unstable_shouldYield=js,ns.unstable_wrapCallback=function(Js){var Vs=ys;return function(){var Zs=ys;ys=Vs;try{return Js.apply(this,arguments)}finally{ys=Zs}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$2=reactExports$1,ca$1=schedulerExports;function p$2(ns){for(var ts="https://reactjs.org/docs/error-decoder.html?invariant="+ns,rs=1;rs<arguments.length;rs++)ts+="&args[]="+encodeURIComponent(arguments[rs]);return"Minified React error #"+ns+"; visit "+ts+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(ns,ts){ha$1(ns,ts),ha$1(ns+"Capture",ts)}function ha$1(ns,ts){for(ea$1[ns]=ts,ns=0;ns<ts.length;ns++)da$1.add(ts[ns])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$1=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$1={},ma$1={};function oa$1(ns){return ja$1.call(ma$1,ns)?!0:ja$1.call(la$1,ns)?!1:ka$1.test(ns)?ma$1[ns]=!0:(la$1[ns]=!0,!1)}function pa$1(ns,ts,rs,as){if(rs!==null&&rs.type===0)return!1;switch(typeof ts){case"function":case"symbol":return!0;case"boolean":return as?!1:rs!==null?!rs.acceptsBooleans:(ns=ns.toLowerCase().slice(0,5),ns!=="data-"&&ns!=="aria-");default:return!1}}function qa$1(ns,ts,rs,as){if(ts===null||typeof ts>"u"||pa$1(ns,ts,rs,as))return!0;if(as)return!1;if(rs!==null)switch(rs.type){case 3:return!ts;case 4:return ts===!1;case 5:return isNaN(ts);case 6:return isNaN(ts)||1>ts}return!1}function v$2(ns,ts,rs,as,os,is,us){this.acceptsBooleans=ts===2||ts===3||ts===4,this.attributeName=as,this.attributeNamespace=os,this.mustUseProperty=rs,this.propertyName=ns,this.type=ts,this.sanitizeURL=is,this.removeEmptyString=us}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(ns){z$2[ns]=new v$2(ns,0,!1,ns,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(ns){var ts=ns[0];z$2[ts]=new v$2(ts,1,!1,ns[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(ns){z$2[ns]=new v$2(ns,2,!1,ns.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(ns){z$2[ns]=new v$2(ns,2,!1,ns,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(ns){z$2[ns]=new v$2(ns,3,!1,ns.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(ns){z$2[ns]=new v$2(ns,3,!0,ns,null,!1,!1)});["capture","download"].forEach(function(ns){z$2[ns]=new v$2(ns,4,!1,ns,null,!1,!1)});["cols","rows","size","span"].forEach(function(ns){z$2[ns]=new v$2(ns,6,!1,ns,null,!1,!1)});["rowSpan","start"].forEach(function(ns){z$2[ns]=new v$2(ns,5,!1,ns.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(ns){return ns[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(ns){var ts=ns.replace(ra$1,sa$1);z$2[ts]=new v$2(ts,1,!1,ns,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(ns){var ts=ns.replace(ra$1,sa$1);z$2[ts]=new v$2(ts,1,!1,ns,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(ns){var ts=ns.replace(ra$1,sa$1);z$2[ts]=new v$2(ts,1,!1,ns,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(ns){z$2[ns]=new v$2(ns,1,!1,ns.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(ns){z$2[ns]=new v$2(ns,1,!1,ns.toLowerCase(),null,!0,!0)});function ta$1(ns,ts,rs,as){var os=z$2.hasOwnProperty(ts)?z$2[ts]:null;(os!==null?os.type!==0:as||!(2<ts.length)||ts[0]!=="o"&&ts[0]!=="O"||ts[1]!=="n"&&ts[1]!=="N")&&(qa$1(ts,rs,os,as)&&(rs=null),as||os===null?oa$1(ts)&&(rs===null?ns.removeAttribute(ts):ns.setAttribute(ts,""+rs)):os.mustUseProperty?ns[os.propertyName]=rs===null?os.type===3?!1:"":rs:(ts=os.attributeName,as=os.attributeNamespace,rs===null?ns.removeAttribute(ts):(os=os.type,rs=os===3||os===4&&rs===!0?"":""+rs,as?ns.setAttributeNS(as,ts,rs):ns.setAttribute(ts,rs))))}var ua$1=aa$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$1=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka$1(ns){return ns===null||typeof ns!="object"?null:(ns=Ja$1&&ns[Ja$1]||ns["@@iterator"],typeof ns=="function"?ns:null)}var A$2=Object.assign,La$1;function Ma$1(ns){if(La$1===void 0)try{throw Error()}catch(rs){var ts=rs.stack.trim().match(/\n( *(at )?)/);La$1=ts&&ts[1]||""}return`
`+La$1+ns}var Na$1=!1;function Oa$1(ns,ts){if(!ns||Na$1)return"";Na$1=!0;var rs=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(ts)if(ts=function(){throw Error()},Object.defineProperty(ts.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ts,[])}catch(hs){var as=hs}Reflect.construct(ns,[],ts)}else{try{ts.call()}catch(hs){as=hs}ns.call(ts.prototype)}else{try{throw Error()}catch(hs){as=hs}ns()}}catch(hs){if(hs&&as&&typeof hs.stack=="string"){for(var os=hs.stack.split(`
`),is=as.stack.split(`
`),us=os.length-1,ls=is.length-1;1<=us&&0<=ls&&os[us]!==is[ls];)ls--;for(;1<=us&&0<=ls;us--,ls--)if(os[us]!==is[ls]){if(us!==1||ls!==1)do if(us--,ls--,0>ls||os[us]!==is[ls]){var fs=`
`+os[us].replace(" at new "," at ");return ns.displayName&&fs.includes("<anonymous>")&&(fs=fs.replace("<anonymous>",ns.displayName)),fs}while(1<=us&&0<=ls);break}}}finally{Na$1=!1,Error.prepareStackTrace=rs}return(ns=ns?ns.displayName||ns.name:"")?Ma$1(ns):""}function Pa$1(ns){switch(ns.tag){case 5:return Ma$1(ns.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return ns=Oa$1(ns.type,!1),ns;case 11:return ns=Oa$1(ns.type.render,!1),ns;case 1:return ns=Oa$1(ns.type,!0),ns;default:return""}}function Qa$1(ns){if(ns==null)return null;if(typeof ns=="function")return ns.displayName||ns.name||null;if(typeof ns=="string")return ns;switch(ns){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof ns=="object")switch(ns.$$typeof){case Ca$1:return(ns.displayName||"Context")+".Consumer";case Ba$1:return(ns._context.displayName||"Context")+".Provider";case Da$1:var ts=ns.render;return ns=ns.displayName,ns||(ns=ts.displayName||ts.name||"",ns=ns!==""?"ForwardRef("+ns+")":"ForwardRef"),ns;case Ga$1:return ts=ns.displayName||null,ts!==null?ts:Qa$1(ns.type)||"Memo";case Ha$1:ts=ns._payload,ns=ns._init;try{return Qa$1(ns(ts))}catch{}}return null}function Ra$1(ns){var ts=ns.type;switch(ns.tag){case 24:return"Cache";case 9:return(ts.displayName||"Context")+".Consumer";case 10:return(ts._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return ns=ts.render,ns=ns.displayName||ns.name||"",ts.displayName||(ns!==""?"ForwardRef("+ns+")":"ForwardRef");case 7:return"Fragment";case 5:return ts;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(ts);case 8:return ts===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof ts=="function")return ts.displayName||ts.name||null;if(typeof ts=="string")return ts}return null}function Sa$1(ns){switch(typeof ns){case"boolean":case"number":case"string":case"undefined":return ns;case"object":return ns;default:return""}}function Ta$1(ns){var ts=ns.type;return(ns=ns.nodeName)&&ns.toLowerCase()==="input"&&(ts==="checkbox"||ts==="radio")}function Ua$1(ns){var ts=Ta$1(ns)?"checked":"value",rs=Object.getOwnPropertyDescriptor(ns.constructor.prototype,ts),as=""+ns[ts];if(!ns.hasOwnProperty(ts)&&typeof rs<"u"&&typeof rs.get=="function"&&typeof rs.set=="function"){var os=rs.get,is=rs.set;return Object.defineProperty(ns,ts,{configurable:!0,get:function(){return os.call(this)},set:function(us){as=""+us,is.call(this,us)}}),Object.defineProperty(ns,ts,{enumerable:rs.enumerable}),{getValue:function(){return as},setValue:function(us){as=""+us},stopTracking:function(){ns._valueTracker=null,delete ns[ts]}}}}function Va$1(ns){ns._valueTracker||(ns._valueTracker=Ua$1(ns))}function Wa$1(ns){if(!ns)return!1;var ts=ns._valueTracker;if(!ts)return!0;var rs=ts.getValue(),as="";return ns&&(as=Ta$1(ns)?ns.checked?"true":"false":ns.value),ns=as,ns!==rs?(ts.setValue(ns),!0):!1}function Xa$1(ns){if(ns=ns||(typeof document<"u"?document:void 0),typeof ns>"u")return null;try{return ns.activeElement||ns.body}catch{return ns.body}}function Ya$1(ns,ts){var rs=ts.checked;return A$2({},ts,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:rs??ns._wrapperState.initialChecked})}function Za$1(ns,ts){var rs=ts.defaultValue==null?"":ts.defaultValue,as=ts.checked!=null?ts.checked:ts.defaultChecked;rs=Sa$1(ts.value!=null?ts.value:rs),ns._wrapperState={initialChecked:as,initialValue:rs,controlled:ts.type==="checkbox"||ts.type==="radio"?ts.checked!=null:ts.value!=null}}function ab(ns,ts){ts=ts.checked,ts!=null&&ta$1(ns,"checked",ts,!1)}function bb(ns,ts){ab(ns,ts);var rs=Sa$1(ts.value),as=ts.type;if(rs!=null)as==="number"?(rs===0&&ns.value===""||ns.value!=rs)&&(ns.value=""+rs):ns.value!==""+rs&&(ns.value=""+rs);else if(as==="submit"||as==="reset"){ns.removeAttribute("value");return}ts.hasOwnProperty("value")?cb(ns,ts.type,rs):ts.hasOwnProperty("defaultValue")&&cb(ns,ts.type,Sa$1(ts.defaultValue)),ts.checked==null&&ts.defaultChecked!=null&&(ns.defaultChecked=!!ts.defaultChecked)}function db(ns,ts,rs){if(ts.hasOwnProperty("value")||ts.hasOwnProperty("defaultValue")){var as=ts.type;if(!(as!=="submit"&&as!=="reset"||ts.value!==void 0&&ts.value!==null))return;ts=""+ns._wrapperState.initialValue,rs||ts===ns.value||(ns.value=ts),ns.defaultValue=ts}rs=ns.name,rs!==""&&(ns.name=""),ns.defaultChecked=!!ns._wrapperState.initialChecked,rs!==""&&(ns.name=rs)}function cb(ns,ts,rs){(ts!=="number"||Xa$1(ns.ownerDocument)!==ns)&&(rs==null?ns.defaultValue=""+ns._wrapperState.initialValue:ns.defaultValue!==""+rs&&(ns.defaultValue=""+rs))}var eb=Array.isArray;function fb(ns,ts,rs,as){if(ns=ns.options,ts){ts={};for(var os=0;os<rs.length;os++)ts["$"+rs[os]]=!0;for(rs=0;rs<ns.length;rs++)os=ts.hasOwnProperty("$"+ns[rs].value),ns[rs].selected!==os&&(ns[rs].selected=os),os&&as&&(ns[rs].defaultSelected=!0)}else{for(rs=""+Sa$1(rs),ts=null,os=0;os<ns.length;os++){if(ns[os].value===rs){ns[os].selected=!0,as&&(ns[os].defaultSelected=!0);return}ts!==null||ns[os].disabled||(ts=ns[os])}ts!==null&&(ts.selected=!0)}}function gb(ns,ts){if(ts.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$2({},ts,{value:void 0,defaultValue:void 0,children:""+ns._wrapperState.initialValue})}function hb(ns,ts){var rs=ts.value;if(rs==null){if(rs=ts.children,ts=ts.defaultValue,rs!=null){if(ts!=null)throw Error(p$2(92));if(eb(rs)){if(1<rs.length)throw Error(p$2(93));rs=rs[0]}ts=rs}ts==null&&(ts=""),rs=ts}ns._wrapperState={initialValue:Sa$1(rs)}}function ib(ns,ts){var rs=Sa$1(ts.value),as=Sa$1(ts.defaultValue);rs!=null&&(rs=""+rs,rs!==ns.value&&(ns.value=rs),ts.defaultValue==null&&ns.defaultValue!==rs&&(ns.defaultValue=rs)),as!=null&&(ns.defaultValue=""+as)}function jb(ns){var ts=ns.textContent;ts===ns._wrapperState.initialValue&&ts!==""&&ts!==null&&(ns.value=ts)}function kb(ns){switch(ns){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(ns,ts){return ns==null||ns==="http://www.w3.org/1999/xhtml"?kb(ts):ns==="http://www.w3.org/2000/svg"&&ts==="foreignObject"?"http://www.w3.org/1999/xhtml":ns}var mb,nb=function(ns){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(ts,rs,as,os){MSApp.execUnsafeLocalFunction(function(){return ns(ts,rs,as,os)})}:ns}(function(ns,ts){if(ns.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in ns)ns.innerHTML=ts;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+ts.valueOf().toString()+"</svg>",ts=mb.firstChild;ns.firstChild;)ns.removeChild(ns.firstChild);for(;ts.firstChild;)ns.appendChild(ts.firstChild)}});function ob(ns,ts){if(ts){var rs=ns.firstChild;if(rs&&rs===ns.lastChild&&rs.nodeType===3){rs.nodeValue=ts;return}}ns.textContent=ts}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(ns){qb.forEach(function(ts){ts=ts+ns.charAt(0).toUpperCase()+ns.substring(1),pb[ts]=pb[ns]})});function rb(ns,ts,rs){return ts==null||typeof ts=="boolean"||ts===""?"":rs||typeof ts!="number"||ts===0||pb.hasOwnProperty(ns)&&pb[ns]?(""+ts).trim():ts+"px"}function sb(ns,ts){ns=ns.style;for(var rs in ts)if(ts.hasOwnProperty(rs)){var as=rs.indexOf("--")===0,os=rb(rs,ts[rs],as);rs==="float"&&(rs="cssFloat"),as?ns.setProperty(rs,os):ns[rs]=os}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(ns,ts){if(ts){if(tb[ns]&&(ts.children!=null||ts.dangerouslySetInnerHTML!=null))throw Error(p$2(137,ns));if(ts.dangerouslySetInnerHTML!=null){if(ts.children!=null)throw Error(p$2(60));if(typeof ts.dangerouslySetInnerHTML!="object"||!("__html"in ts.dangerouslySetInnerHTML))throw Error(p$2(61))}if(ts.style!=null&&typeof ts.style!="object")throw Error(p$2(62))}}function vb(ns,ts){if(ns.indexOf("-")===-1)return typeof ts.is=="string";switch(ns){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(ns){return ns=ns.target||ns.srcElement||window,ns.correspondingUseElement&&(ns=ns.correspondingUseElement),ns.nodeType===3?ns.parentNode:ns}var yb=null,zb=null,Ab=null;function Bb(ns){if(ns=Cb(ns)){if(typeof yb!="function")throw Error(p$2(280));var ts=ns.stateNode;ts&&(ts=Db(ts),yb(ns.stateNode,ns.type,ts))}}function Eb(ns){zb?Ab?Ab.push(ns):Ab=[ns]:zb=ns}function Fb(){if(zb){var ns=zb,ts=Ab;if(Ab=zb=null,Bb(ns),ts)for(ns=0;ns<ts.length;ns++)Bb(ts[ns])}}function Gb(ns,ts){return ns(ts)}function Hb(){}var Ib=!1;function Jb(ns,ts,rs){if(Ib)return ns(ts,rs);Ib=!0;try{return Gb(ns,ts,rs)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(ns,ts){var rs=ns.stateNode;if(rs===null)return null;var as=Db(rs);if(as===null)return null;rs=as[ts];e:switch(ts){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(as=!as.disabled)||(ns=ns.type,as=!(ns==="button"||ns==="input"||ns==="select"||ns==="textarea")),ns=!as;break e;default:ns=!1}if(ns)return null;if(rs&&typeof rs!="function")throw Error(p$2(231,ts,typeof rs));return rs}var Lb=!1;if(ia$1)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(ns,ts,rs,as,os,is,us,ls,fs){var hs=Array.prototype.slice.call(arguments,3);try{ts.apply(rs,hs)}catch(vs){this.onError(vs)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(ns){Ob=!0,Pb=ns}};function Tb(ns,ts,rs,as,os,is,us,ls,fs){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(ns,ts,rs,as,os,is,us,ls,fs){if(Tb.apply(this,arguments),Ob){if(Ob){var hs=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=hs)}}function Vb(ns){var ts=ns,rs=ns;if(ns.alternate)for(;ts.return;)ts=ts.return;else{ns=ts;do ts=ns,ts.flags&4098&&(rs=ts.return),ns=ts.return;while(ns)}return ts.tag===3?rs:null}function Wb(ns){if(ns.tag===13){var ts=ns.memoizedState;if(ts===null&&(ns=ns.alternate,ns!==null&&(ts=ns.memoizedState)),ts!==null)return ts.dehydrated}return null}function Xb(ns){if(Vb(ns)!==ns)throw Error(p$2(188))}function Yb(ns){var ts=ns.alternate;if(!ts){if(ts=Vb(ns),ts===null)throw Error(p$2(188));return ts!==ns?null:ns}for(var rs=ns,as=ts;;){var os=rs.return;if(os===null)break;var is=os.alternate;if(is===null){if(as=os.return,as!==null){rs=as;continue}break}if(os.child===is.child){for(is=os.child;is;){if(is===rs)return Xb(os),ns;if(is===as)return Xb(os),ts;is=is.sibling}throw Error(p$2(188))}if(rs.return!==as.return)rs=os,as=is;else{for(var us=!1,ls=os.child;ls;){if(ls===rs){us=!0,rs=os,as=is;break}if(ls===as){us=!0,as=os,rs=is;break}ls=ls.sibling}if(!us){for(ls=is.child;ls;){if(ls===rs){us=!0,rs=is,as=os;break}if(ls===as){us=!0,as=is,rs=os;break}ls=ls.sibling}if(!us)throw Error(p$2(189))}}if(rs.alternate!==as)throw Error(p$2(190))}if(rs.tag!==3)throw Error(p$2(188));return rs.stateNode.current===rs?ns:ts}function Zb(ns){return ns=Yb(ns),ns!==null?$b(ns):null}function $b(ns){if(ns.tag===5||ns.tag===6)return ns;for(ns=ns.child;ns!==null;){var ts=$b(ns);if(ts!==null)return ts;ns=ns.sibling}return null}var ac$1=ca$1.unstable_scheduleCallback,bc=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc=ca$1.unstable_requestPaint,B$2=ca$1.unstable_now,ec$1=ca$1.unstable_getCurrentPriorityLevel,fc=ca$1.unstable_ImmediatePriority,gc=ca$1.unstable_UserBlockingPriority,hc=ca$1.unstable_NormalPriority,ic$1=ca$1.unstable_LowPriority,jc=ca$1.unstable_IdlePriority,kc=null,lc=null;function mc(ns){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,ns,void 0,(ns.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc=Math.log,qc=Math.LN2;function nc$1(ns){return ns>>>=0,ns===0?32:31-(pc(ns)/qc|0)|0}var rc$1=64,sc=4194304;function tc$1(ns){switch(ns&-ns){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ns&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return ns&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return ns}}function uc$1(ns,ts){var rs=ns.pendingLanes;if(rs===0)return 0;var as=0,os=ns.suspendedLanes,is=ns.pingedLanes,us=rs&268435455;if(us!==0){var ls=us&~os;ls!==0?as=tc$1(ls):(is&=us,is!==0&&(as=tc$1(is)))}else us=rs&~os,us!==0?as=tc$1(us):is!==0&&(as=tc$1(is));if(as===0)return 0;if(ts!==0&&ts!==as&&!(ts&os)&&(os=as&-as,is=ts&-ts,os>=is||os===16&&(is&4194240)!==0))return ts;if(as&4&&(as|=rs&16),ts=ns.entangledLanes,ts!==0)for(ns=ns.entanglements,ts&=as;0<ts;)rs=31-oc$1(ts),os=1<<rs,as|=ns[rs],ts&=~os;return as}function vc(ns,ts){switch(ns){case 1:case 2:case 4:return ts+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ts+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(ns,ts){for(var rs=ns.suspendedLanes,as=ns.pingedLanes,os=ns.expirationTimes,is=ns.pendingLanes;0<is;){var us=31-oc$1(is),ls=1<<us,fs=os[us];fs===-1?(!(ls&rs)||ls&as)&&(os[us]=vc(ls,ts)):fs<=ts&&(ns.expiredLanes|=ls),is&=~ls}}function xc(ns){return ns=ns.pendingLanes&-1073741825,ns!==0?ns:ns&1073741824?1073741824:0}function yc(){var ns=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),ns}function zc(ns){for(var ts=[],rs=0;31>rs;rs++)ts.push(ns);return ts}function Ac(ns,ts,rs){ns.pendingLanes|=ts,ts!==536870912&&(ns.suspendedLanes=0,ns.pingedLanes=0),ns=ns.eventTimes,ts=31-oc$1(ts),ns[ts]=rs}function Bc(ns,ts){var rs=ns.pendingLanes&~ts;ns.pendingLanes=ts,ns.suspendedLanes=0,ns.pingedLanes=0,ns.expiredLanes&=ts,ns.mutableReadLanes&=ts,ns.entangledLanes&=ts,ts=ns.entanglements;var as=ns.eventTimes;for(ns=ns.expirationTimes;0<rs;){var os=31-oc$1(rs),is=1<<os;ts[os]=0,as[os]=-1,ns[os]=-1,rs&=~is}}function Cc(ns,ts){var rs=ns.entangledLanes|=ts;for(ns=ns.entanglements;rs;){var as=31-oc$1(rs),os=1<<as;os&ts|ns[as]&ts&&(ns[as]|=ts),rs&=~os}}var C$2=0;function Dc(ns){return ns&=-ns,1<ns?4<ns?ns&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(ns,ts){switch(ns){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(ts.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(ts.pointerId)}}function Tc(ns,ts,rs,as,os,is){return ns===null||ns.nativeEvent!==is?(ns={blockedOn:ts,domEventName:rs,eventSystemFlags:as,nativeEvent:is,targetContainers:[os]},ts!==null&&(ts=Cb(ts),ts!==null&&Fc(ts)),ns):(ns.eventSystemFlags|=as,ts=ns.targetContainers,os!==null&&ts.indexOf(os)===-1&&ts.push(os),ns)}function Uc(ns,ts,rs,as,os){switch(ts){case"focusin":return Lc=Tc(Lc,ns,ts,rs,as,os),!0;case"dragenter":return Mc=Tc(Mc,ns,ts,rs,as,os),!0;case"mouseover":return Nc=Tc(Nc,ns,ts,rs,as,os),!0;case"pointerover":var is=os.pointerId;return Oc.set(is,Tc(Oc.get(is)||null,ns,ts,rs,as,os)),!0;case"gotpointercapture":return is=os.pointerId,Pc.set(is,Tc(Pc.get(is)||null,ns,ts,rs,as,os)),!0}return!1}function Vc(ns){var ts=Wc(ns.target);if(ts!==null){var rs=Vb(ts);if(rs!==null){if(ts=rs.tag,ts===13){if(ts=Wb(rs),ts!==null){ns.blockedOn=ts,Ic(ns.priority,function(){Gc(rs)});return}}else if(ts===3&&rs.stateNode.current.memoizedState.isDehydrated){ns.blockedOn=rs.tag===3?rs.stateNode.containerInfo:null;return}}}ns.blockedOn=null}function Xc(ns){if(ns.blockedOn!==null)return!1;for(var ts=ns.targetContainers;0<ts.length;){var rs=Yc(ns.domEventName,ns.eventSystemFlags,ts[0],ns.nativeEvent);if(rs===null){rs=ns.nativeEvent;var as=new rs.constructor(rs.type,rs);wb=as,rs.target.dispatchEvent(as),wb=null}else return ts=Cb(rs),ts!==null&&Fc(ts),ns.blockedOn=rs,!1;ts.shift()}return!0}function Zc(ns,ts,rs){Xc(ns)&&rs.delete(ts)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(ns,ts){ns.blockedOn===ts&&(ns.blockedOn=null,Jc||(Jc=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c)))}function bd(ns){function ts(os){return ad(os,ns)}if(0<Kc.length){ad(Kc[0],ns);for(var rs=1;rs<Kc.length;rs++){var as=Kc[rs];as.blockedOn===ns&&(as.blockedOn=null)}}for(Lc!==null&&ad(Lc,ns),Mc!==null&&ad(Mc,ns),Nc!==null&&ad(Nc,ns),Oc.forEach(ts),Pc.forEach(ts),rs=0;rs<Qc.length;rs++)as=Qc[rs],as.blockedOn===ns&&(as.blockedOn=null);for(;0<Qc.length&&(rs=Qc[0],rs.blockedOn===null);)Vc(rs),rs.blockedOn===null&&Qc.shift()}var cd=ua$1.ReactCurrentBatchConfig,dd=!0;function ed(ns,ts,rs,as){var os=C$2,is=cd.transition;cd.transition=null;try{C$2=1,fd(ns,ts,rs,as)}finally{C$2=os,cd.transition=is}}function gd(ns,ts,rs,as){var os=C$2,is=cd.transition;cd.transition=null;try{C$2=4,fd(ns,ts,rs,as)}finally{C$2=os,cd.transition=is}}function fd(ns,ts,rs,as){if(dd){var os=Yc(ns,ts,rs,as);if(os===null)hd(ns,ts,as,id,rs),Sc(ns,as);else if(Uc(os,ns,ts,rs,as))as.stopPropagation();else if(Sc(ns,as),ts&4&&-1<Rc.indexOf(ns)){for(;os!==null;){var is=Cb(os);if(is!==null&&Ec(is),is=Yc(ns,ts,rs,as),is===null&&hd(ns,ts,as,id,rs),is===os)break;os=is}os!==null&&as.stopPropagation()}else hd(ns,ts,as,null,rs)}}var id=null;function Yc(ns,ts,rs,as){if(id=null,ns=xb(as),ns=Wc(ns),ns!==null)if(ts=Vb(ns),ts===null)ns=null;else if(rs=ts.tag,rs===13){if(ns=Wb(ts),ns!==null)return ns;ns=null}else if(rs===3){if(ts.stateNode.current.memoizedState.isDehydrated)return ts.tag===3?ts.stateNode.containerInfo:null;ns=null}else ts!==ns&&(ns=null);return id=ns,null}function jd(ns){switch(ns){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc:return 1;case gc:return 4;case hc:case ic$1:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var ns,ts=ld,rs=ts.length,as,os="value"in kd?kd.value:kd.textContent,is=os.length;for(ns=0;ns<rs&&ts[ns]===os[ns];ns++);var us=rs-ns;for(as=1;as<=us&&ts[rs-as]===os[is-as];as++);return md=os.slice(ns,1<as?1-as:void 0)}function od(ns){var ts=ns.keyCode;return"charCode"in ns?(ns=ns.charCode,ns===0&&ts===13&&(ns=13)):ns=ts,ns===10&&(ns=13),32<=ns||ns===13?ns:0}function pd(){return!0}function qd(){return!1}function rd(ns){function ts(rs,as,os,is,us){this._reactName=rs,this._targetInst=os,this.type=as,this.nativeEvent=is,this.target=us,this.currentTarget=null;for(var ls in ns)ns.hasOwnProperty(ls)&&(rs=ns[ls],this[ls]=rs?rs(is):is[ls]);return this.isDefaultPrevented=(is.defaultPrevented!=null?is.defaultPrevented:is.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2(ts.prototype,{preventDefault:function(){this.defaultPrevented=!0;var rs=this.nativeEvent;rs&&(rs.preventDefault?rs.preventDefault():typeof rs.returnValue!="unknown"&&(rs.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var rs=this.nativeEvent;rs&&(rs.stopPropagation?rs.stopPropagation():typeof rs.cancelBubble!="unknown"&&(rs.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),ts}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(ns){return ns.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(ns){return ns.relatedTarget===void 0?ns.fromElement===ns.srcElement?ns.toElement:ns.fromElement:ns.relatedTarget},movementX:function(ns){return"movementX"in ns?ns.movementX:(ns!==yd&&(yd&&ns.type==="mousemove"?(wd=ns.screenX-yd.screenX,xd=ns.screenY-yd.screenY):xd=wd=0,yd=ns),wd)},movementY:function(ns){return"movementY"in ns?ns.movementY:xd}}),Bd=rd(Ad),Cd=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$2({},sd,{clipboardData:function(ns){return"clipboardData"in ns?ns.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(ns){var ts=this.nativeEvent;return ts.getModifierState?ts.getModifierState(ns):(ns=Od[ns])?!!ts[ns]:!1}function zd(){return Pd}var Qd=A$2({},ud,{key:function(ns){if(ns.key){var ts=Md[ns.key]||ns.key;if(ts!=="Unidentified")return ts}return ns.type==="keypress"?(ns=od(ns),ns===13?"Enter":String.fromCharCode(ns)):ns.type==="keydown"||ns.type==="keyup"?Nd[ns.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(ns){return ns.type==="keypress"?od(ns):0},keyCode:function(ns){return ns.type==="keydown"||ns.type==="keyup"?ns.keyCode:0},which:function(ns){return ns.type==="keypress"?od(ns):ns.type==="keydown"||ns.type==="keyup"?ns.keyCode:0}}),Rd=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(ns){return"deltaX"in ns?ns.deltaX:"wheelDeltaX"in ns?-ns.wheelDeltaX:0},deltaY:function(ns){return"deltaY"in ns?ns.deltaY:"wheelDeltaY"in ns?-ns.wheelDeltaY:"wheelDelta"in ns?-ns.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia$1&&"CompositionEvent"in window,be$1=null;ia$1&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia$1&&"TextEvent"in window&&!be$1,de$1=ia$1&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe$1=!1;function ge$1(ns,ts){switch(ns){case"keyup":return $d.indexOf(ts.keyCode)!==-1;case"keydown":return ts.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(ns){return ns=ns.detail,typeof ns=="object"&&"data"in ns?ns.data:null}var ie$1=!1;function je$1(ns,ts){switch(ns){case"compositionend":return he$1(ts);case"keypress":return ts.which!==32?null:(fe$1=!0,ee$1);case"textInput":return ns=ts.data,ns===ee$1&&fe$1?null:ns;default:return null}}function ke$1(ns,ts){if(ie$1)return ns==="compositionend"||!ae$1&&ge$1(ns,ts)?(ns=nd(),md=ld=kd=null,ie$1=!1,ns):null;switch(ns){case"paste":return null;case"keypress":if(!(ts.ctrlKey||ts.altKey||ts.metaKey)||ts.ctrlKey&&ts.altKey){if(ts.char&&1<ts.char.length)return ts.char;if(ts.which)return String.fromCharCode(ts.which)}return null;case"compositionend":return de$1&&ts.locale!=="ko"?null:ts.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(ns){var ts=ns&&ns.nodeName&&ns.nodeName.toLowerCase();return ts==="input"?!!le$1[ns.type]:ts==="textarea"}function ne$1(ns,ts,rs,as){Eb(as),ts=oe$1(ts,"onChange"),0<ts.length&&(rs=new td("onChange","change",null,rs,as),ns.push({event:rs,listeners:ts}))}var pe$1=null,qe$1=null;function re$1(ns){se$1(ns,0)}function te$1(ns){var ts=ue$1(ns);if(Wa$1(ts))return ns}function ve$1(ns,ts){if(ns==="change")return ts}var we$1=!1;if(ia$1){var xe$1;if(ia$1){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$1=pe$1=null)}function Be$1(ns){if(ns.propertyName==="value"&&te$1(qe$1)){var ts=[];ne$1(ts,qe$1,ns,xb(ns)),Jb(re$1,ts)}}function Ce$1(ns,ts,rs){ns==="focusin"?(Ae$1(),pe$1=ts,qe$1=rs,pe$1.attachEvent("onpropertychange",Be$1)):ns==="focusout"&&Ae$1()}function De$1(ns){if(ns==="selectionchange"||ns==="keyup"||ns==="keydown")return te$1(qe$1)}function Ee$1(ns,ts){if(ns==="click")return te$1(ts)}function Fe$1(ns,ts){if(ns==="input"||ns==="change")return te$1(ts)}function Ge$1(ns,ts){return ns===ts&&(ns!==0||1/ns===1/ts)||ns!==ns&&ts!==ts}var He$1=typeof Object.is=="function"?Object.is:Ge$1;function Ie$1(ns,ts){if(He$1(ns,ts))return!0;if(typeof ns!="object"||ns===null||typeof ts!="object"||ts===null)return!1;var rs=Object.keys(ns),as=Object.keys(ts);if(rs.length!==as.length)return!1;for(as=0;as<rs.length;as++){var os=rs[as];if(!ja$1.call(ts,os)||!He$1(ns[os],ts[os]))return!1}return!0}function Je$1(ns){for(;ns&&ns.firstChild;)ns=ns.firstChild;return ns}function Ke$1(ns,ts){var rs=Je$1(ns);ns=0;for(var as;rs;){if(rs.nodeType===3){if(as=ns+rs.textContent.length,ns<=ts&&as>=ts)return{node:rs,offset:ts-ns};ns=as}e:{for(;rs;){if(rs.nextSibling){rs=rs.nextSibling;break e}rs=rs.parentNode}rs=void 0}rs=Je$1(rs)}}function Le$1(ns,ts){return ns&&ts?ns===ts?!0:ns&&ns.nodeType===3?!1:ts&&ts.nodeType===3?Le$1(ns,ts.parentNode):"contains"in ns?ns.contains(ts):ns.compareDocumentPosition?!!(ns.compareDocumentPosition(ts)&16):!1:!1}function Me$1(){for(var ns=window,ts=Xa$1();ts instanceof ns.HTMLIFrameElement;){try{var rs=typeof ts.contentWindow.location.href=="string"}catch{rs=!1}if(rs)ns=ts.contentWindow;else break;ts=Xa$1(ns.document)}return ts}function Ne$1(ns){var ts=ns&&ns.nodeName&&ns.nodeName.toLowerCase();return ts&&(ts==="input"&&(ns.type==="text"||ns.type==="search"||ns.type==="tel"||ns.type==="url"||ns.type==="password")||ts==="textarea"||ns.contentEditable==="true")}function Oe$1(ns){var ts=Me$1(),rs=ns.focusedElem,as=ns.selectionRange;if(ts!==rs&&rs&&rs.ownerDocument&&Le$1(rs.ownerDocument.documentElement,rs)){if(as!==null&&Ne$1(rs)){if(ts=as.start,ns=as.end,ns===void 0&&(ns=ts),"selectionStart"in rs)rs.selectionStart=ts,rs.selectionEnd=Math.min(ns,rs.value.length);else if(ns=(ts=rs.ownerDocument||document)&&ts.defaultView||window,ns.getSelection){ns=ns.getSelection();var os=rs.textContent.length,is=Math.min(as.start,os);as=as.end===void 0?is:Math.min(as.end,os),!ns.extend&&is>as&&(os=as,as=is,is=os),os=Ke$1(rs,is);var us=Ke$1(rs,as);os&&us&&(ns.rangeCount!==1||ns.anchorNode!==os.node||ns.anchorOffset!==os.offset||ns.focusNode!==us.node||ns.focusOffset!==us.offset)&&(ts=ts.createRange(),ts.setStart(os.node,os.offset),ns.removeAllRanges(),is>as?(ns.addRange(ts),ns.extend(us.node,us.offset)):(ts.setEnd(us.node,us.offset),ns.addRange(ts)))}}for(ts=[],ns=rs;ns=ns.parentNode;)ns.nodeType===1&&ts.push({element:ns,left:ns.scrollLeft,top:ns.scrollTop});for(typeof rs.focus=="function"&&rs.focus(),rs=0;rs<ts.length;rs++)ns=ts[rs],ns.element.scrollLeft=ns.left,ns.element.scrollTop=ns.top}}var Pe$1=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se$1=null,Te$1=!1;function Ue$1(ns,ts,rs){var as=rs.window===rs?rs.document:rs.nodeType===9?rs:rs.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa$1(as)||(as=Qe$1,"selectionStart"in as&&Ne$1(as)?as={start:as.selectionStart,end:as.selectionEnd}:(as=(as.ownerDocument&&as.ownerDocument.defaultView||window).getSelection(),as={anchorNode:as.anchorNode,anchorOffset:as.anchorOffset,focusNode:as.focusNode,focusOffset:as.focusOffset}),Se$1&&Ie$1(Se$1,as)||(Se$1=as,as=oe$1(Re$1,"onSelect"),0<as.length&&(ts=new td("onSelect","select",null,ts,rs),ns.push({event:ts,listeners:as}),ts.target=Qe$1)))}function Ve$1(ns,ts){var rs={};return rs[ns.toLowerCase()]=ts.toLowerCase(),rs["Webkit"+ns]="webkit"+ts,rs["Moz"+ns]="moz"+ts,rs}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe$1={},Ye$1={};ia$1&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(ns){if(Xe$1[ns])return Xe$1[ns];if(!We$1[ns])return ns;var ts=We$1[ns],rs;for(rs in ts)if(ts.hasOwnProperty(rs)&&rs in Ye$1)return Xe$1[ns]=ts[rs];return ns}var $e$1=Ze$1("animationend"),af=Ze$1("animationiteration"),bf=Ze$1("animationstart"),cf=Ze$1("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(ns,ts){df.set(ns,ts),fa$1(ts,[ns])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(ns,ts,rs){var as=ns.type||"unknown-event";ns.currentTarget=rs,Ub(as,ts,void 0,ns),ns.currentTarget=null}function se$1(ns,ts){ts=(ts&4)!==0;for(var rs=0;rs<ns.length;rs++){var as=ns[rs],os=as.event;as=as.listeners;e:{var is=void 0;if(ts)for(var us=as.length-1;0<=us;us--){var ls=as[us],fs=ls.instance,hs=ls.currentTarget;if(ls=ls.listener,fs!==is&&os.isPropagationStopped())break e;nf(os,ls,hs),is=fs}else for(us=0;us<as.length;us++){if(ls=as[us],fs=ls.instance,hs=ls.currentTarget,ls=ls.listener,fs!==is&&os.isPropagationStopped())break e;nf(os,ls,hs),is=fs}}}if(Qb)throw ns=Rb,Qb=!1,Rb=null,ns}function D$2(ns,ts){var rs=ts[of];rs===void 0&&(rs=ts[of]=new Set);var as=ns+"__bubble";rs.has(as)||(pf(ts,ns,2,!1),rs.add(as))}function qf(ns,ts,rs){var as=0;ts&&(as|=4),pf(rs,ns,as,ts)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(ns){if(!ns[rf]){ns[rf]=!0,da$1.forEach(function(rs){rs!=="selectionchange"&&(mf.has(rs)||qf(rs,!1,ns),qf(rs,!0,ns))});var ts=ns.nodeType===9?ns:ns.ownerDocument;ts===null||ts[rf]||(ts[rf]=!0,qf("selectionchange",!1,ts))}}function pf(ns,ts,rs,as){switch(jd(ts)){case 1:var os=ed;break;case 4:os=gd;break;default:os=fd}rs=os.bind(null,ts,rs,ns),os=void 0,!Lb||ts!=="touchstart"&&ts!=="touchmove"&&ts!=="wheel"||(os=!0),as?os!==void 0?ns.addEventListener(ts,rs,{capture:!0,passive:os}):ns.addEventListener(ts,rs,!0):os!==void 0?ns.addEventListener(ts,rs,{passive:os}):ns.addEventListener(ts,rs,!1)}function hd(ns,ts,rs,as,os){var is=as;if(!(ts&1)&&!(ts&2)&&as!==null)e:for(;;){if(as===null)return;var us=as.tag;if(us===3||us===4){var ls=as.stateNode.containerInfo;if(ls===os||ls.nodeType===8&&ls.parentNode===os)break;if(us===4)for(us=as.return;us!==null;){var fs=us.tag;if((fs===3||fs===4)&&(fs=us.stateNode.containerInfo,fs===os||fs.nodeType===8&&fs.parentNode===os))return;us=us.return}for(;ls!==null;){if(us=Wc(ls),us===null)return;if(fs=us.tag,fs===5||fs===6){as=is=us;continue e}ls=ls.parentNode}}as=as.return}Jb(function(){var hs=is,vs=xb(rs),gs=[];e:{var ys=df.get(ns);if(ys!==void 0){var xs=td,ms=ns;switch(ns){case"keypress":if(od(rs)===0)break e;case"keydown":case"keyup":xs=Rd;break;case"focusin":ms="focus",xs=Fd;break;case"focusout":ms="blur",xs=Fd;break;case"beforeblur":case"afterblur":xs=Fd;break;case"click":if(rs.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xs=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xs=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xs=Vd;break;case $e$1:case af:case bf:xs=Hd;break;case cf:xs=Xd;break;case"scroll":xs=vd;break;case"wheel":xs=Zd;break;case"copy":case"cut":case"paste":xs=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xs=Td}var Ss=(ts&4)!==0,Ms=!Ss&&ns==="scroll",$s=Ss?ys!==null?ys+"Capture":null:ys;Ss=[];for(var bs=hs,Cs;bs!==null;){Cs=bs;var As=Cs.stateNode;if(Cs.tag===5&&As!==null&&(Cs=As,$s!==null&&(As=Kb(bs,$s),As!=null&&Ss.push(tf(bs,As,Cs)))),Ms)break;bs=bs.return}0<Ss.length&&(ys=new xs(ys,ms,null,rs,vs),gs.push({event:ys,listeners:Ss}))}}if(!(ts&7)){e:{if(ys=ns==="mouseover"||ns==="pointerover",xs=ns==="mouseout"||ns==="pointerout",ys&&rs!==wb&&(ms=rs.relatedTarget||rs.fromElement)&&(Wc(ms)||ms[uf]))break e;if((xs||ys)&&(ys=vs.window===vs?vs:(ys=vs.ownerDocument)?ys.defaultView||ys.parentWindow:window,xs?(ms=rs.relatedTarget||rs.toElement,xs=hs,ms=ms?Wc(ms):null,ms!==null&&(Ms=Vb(ms),ms!==Ms||ms.tag!==5&&ms.tag!==6)&&(ms=null)):(xs=null,ms=hs),xs!==ms)){if(Ss=Bd,As="onMouseLeave",$s="onMouseEnter",bs="mouse",(ns==="pointerout"||ns==="pointerover")&&(Ss=Td,As="onPointerLeave",$s="onPointerEnter",bs="pointer"),Ms=xs==null?ys:ue$1(xs),Cs=ms==null?ys:ue$1(ms),ys=new Ss(As,bs+"leave",xs,rs,vs),ys.target=Ms,ys.relatedTarget=Cs,As=null,Wc(vs)===hs&&(Ss=new Ss($s,bs+"enter",ms,rs,vs),Ss.target=Cs,Ss.relatedTarget=Ms,As=Ss),Ms=As,xs&&ms)t:{for(Ss=xs,$s=ms,bs=0,Cs=Ss;Cs;Cs=vf(Cs))bs++;for(Cs=0,As=$s;As;As=vf(As))Cs++;for(;0<bs-Cs;)Ss=vf(Ss),bs--;for(;0<Cs-bs;)$s=vf($s),Cs--;for(;bs--;){if(Ss===$s||$s!==null&&Ss===$s.alternate)break t;Ss=vf(Ss),$s=vf($s)}Ss=null}else Ss=null;xs!==null&&wf(gs,ys,xs,Ss,!1),ms!==null&&Ms!==null&&wf(gs,Ms,ms,Ss,!0)}}e:{if(ys=hs?ue$1(hs):window,xs=ys.nodeName&&ys.nodeName.toLowerCase(),xs==="select"||xs==="input"&&ys.type==="file")var Is=ve$1;else if(me$1(ys))if(we$1)Is=Fe$1;else{Is=De$1;var ks=Ce$1}else(xs=ys.nodeName)&&xs.toLowerCase()==="input"&&(ys.type==="checkbox"||ys.type==="radio")&&(Is=Ee$1);if(Is&&(Is=Is(ns,hs))){ne$1(gs,Is,rs,vs);break e}ks&&ks(ns,ys,hs),ns==="focusout"&&(ks=ys._wrapperState)&&ks.controlled&&ys.type==="number"&&cb(ys,"number",ys.value)}switch(ks=hs?ue$1(hs):window,ns){case"focusin":(me$1(ks)||ks.contentEditable==="true")&&(Qe$1=ks,Re$1=hs,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(gs,rs,vs);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(gs,rs,vs)}var Ps;if(ae$1)e:{switch(ns){case"compositionstart":var Ds="onCompositionStart";break e;case"compositionend":Ds="onCompositionEnd";break e;case"compositionupdate":Ds="onCompositionUpdate";break e}Ds=void 0}else ie$1?ge$1(ns,rs)&&(Ds="onCompositionEnd"):ns==="keydown"&&rs.keyCode===229&&(Ds="onCompositionStart");Ds&&(de$1&&rs.locale!=="ko"&&(ie$1||Ds!=="onCompositionStart"?Ds==="onCompositionEnd"&&ie$1&&(Ps=nd()):(kd=vs,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),ks=oe$1(hs,Ds),0<ks.length&&(Ds=new Ld(Ds,ns,null,rs,vs),gs.push({event:Ds,listeners:ks}),Ps?Ds.data=Ps:(Ps=he$1(rs),Ps!==null&&(Ds.data=Ps)))),(Ps=ce$1?je$1(ns,rs):ke$1(ns,rs))&&(hs=oe$1(hs,"onBeforeInput"),0<hs.length&&(vs=new Ld("onBeforeInput","beforeinput",null,rs,vs),gs.push({event:vs,listeners:hs}),vs.data=Ps))}se$1(gs,ts)})}function tf(ns,ts,rs){return{instance:ns,listener:ts,currentTarget:rs}}function oe$1(ns,ts){for(var rs=ts+"Capture",as=[];ns!==null;){var os=ns,is=os.stateNode;os.tag===5&&is!==null&&(os=is,is=Kb(ns,rs),is!=null&&as.unshift(tf(ns,is,os)),is=Kb(ns,ts),is!=null&&as.push(tf(ns,is,os))),ns=ns.return}return as}function vf(ns){if(ns===null)return null;do ns=ns.return;while(ns&&ns.tag!==5);return ns||null}function wf(ns,ts,rs,as,os){for(var is=ts._reactName,us=[];rs!==null&&rs!==as;){var ls=rs,fs=ls.alternate,hs=ls.stateNode;if(fs!==null&&fs===as)break;ls.tag===5&&hs!==null&&(ls=hs,os?(fs=Kb(rs,is),fs!=null&&us.unshift(tf(rs,fs,ls))):os||(fs=Kb(rs,is),fs!=null&&us.push(tf(rs,fs,ls)))),rs=rs.return}us.length!==0&&ns.push({event:ts,listeners:us})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(ns){return(typeof ns=="string"?ns:""+ns).replace(xf,`
`).replace(yf,"")}function Af(ns,ts,rs){if(ts=zf(ts),zf(ns)!==ts&&rs)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(ns,ts){return ns==="textarea"||ns==="noscript"||typeof ts.children=="string"||typeof ts.children=="number"||typeof ts.dangerouslySetInnerHTML=="object"&&ts.dangerouslySetInnerHTML!==null&&ts.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(ns){return Hf.resolve(null).then(ns).catch(If)}:Ff;function If(ns){setTimeout(function(){throw ns})}function Kf(ns,ts){var rs=ts,as=0;do{var os=rs.nextSibling;if(ns.removeChild(rs),os&&os.nodeType===8)if(rs=os.data,rs==="/$"){if(as===0){ns.removeChild(os),bd(ts);return}as--}else rs!=="$"&&rs!=="$?"&&rs!=="$!"||as++;rs=os}while(rs);bd(ts)}function Lf(ns){for(;ns!=null;ns=ns.nextSibling){var ts=ns.nodeType;if(ts===1||ts===3)break;if(ts===8){if(ts=ns.data,ts==="$"||ts==="$!"||ts==="$?")break;if(ts==="/$")return null}}return ns}function Mf(ns){ns=ns.previousSibling;for(var ts=0;ns;){if(ns.nodeType===8){var rs=ns.data;if(rs==="$"||rs==="$!"||rs==="$?"){if(ts===0)return ns;ts--}else rs==="/$"&&ts++}ns=ns.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(ns){var ts=ns[Of];if(ts)return ts;for(var rs=ns.parentNode;rs;){if(ts=rs[uf]||rs[Of]){if(rs=ts.alternate,ts.child!==null||rs!==null&&rs.child!==null)for(ns=Mf(ns);ns!==null;){if(rs=ns[Of])return rs;ns=Mf(ns)}return ts}ns=rs,rs=ns.parentNode}return null}function Cb(ns){return ns=ns[Of]||ns[uf],!ns||ns.tag!==5&&ns.tag!==6&&ns.tag!==13&&ns.tag!==3?null:ns}function ue$1(ns){if(ns.tag===5||ns.tag===6)return ns.stateNode;throw Error(p$2(33))}function Db(ns){return ns[Pf]||null}var Sf=[],Tf=-1;function Uf(ns){return{current:ns}}function E$2(ns){0>Tf||(ns.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$2(ns,ts){Tf++,Sf[Tf]=ns.current,ns.current=ts}var Vf={},H$2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(ns,ts){var rs=ns.type.contextTypes;if(!rs)return Vf;var as=ns.stateNode;if(as&&as.__reactInternalMemoizedUnmaskedChildContext===ts)return as.__reactInternalMemoizedMaskedChildContext;var os={},is;for(is in rs)os[is]=ts[is];return as&&(ns=ns.stateNode,ns.__reactInternalMemoizedUnmaskedChildContext=ts,ns.__reactInternalMemoizedMaskedChildContext=os),os}function Zf(ns){return ns=ns.childContextTypes,ns!=null}function $f(){E$2(Wf),E$2(H$2)}function ag(ns,ts,rs){if(H$2.current!==Vf)throw Error(p$2(168));G$2(H$2,ts),G$2(Wf,rs)}function bg(ns,ts,rs){var as=ns.stateNode;if(ts=ts.childContextTypes,typeof as.getChildContext!="function")return rs;as=as.getChildContext();for(var os in as)if(!(os in ts))throw Error(p$2(108,Ra$1(ns)||"Unknown",os));return A$2({},rs,as)}function cg(ns){return ns=(ns=ns.stateNode)&&ns.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$2.current,G$2(H$2,ns),G$2(Wf,Wf.current),!0}function dg(ns,ts,rs){var as=ns.stateNode;if(!as)throw Error(p$2(169));rs?(ns=bg(ns,ts,Xf),as.__reactInternalMemoizedMergedChildContext=ns,E$2(Wf),E$2(H$2),G$2(H$2,ns)):E$2(Wf),G$2(Wf,rs)}var eg=null,fg=!1,gg=!1;function hg(ns){eg===null?eg=[ns]:eg.push(ns)}function ig(ns){fg=!0,hg(ns)}function jg(){if(!gg&&eg!==null){gg=!0;var ns=0,ts=C$2;try{var rs=eg;for(C$2=1;ns<rs.length;ns++){var as=rs[ns];do as=as(!0);while(as!==null)}eg=null,fg=!1}catch(os){throw eg!==null&&(eg=eg.slice(ns+1)),ac$1(fc,jg),os}finally{C$2=ts,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(ns,ts){kg[lg++]=ng,kg[lg++]=mg,mg=ns,ng=ts}function ug(ns,ts,rs){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=ns;var as=rg;ns=sg;var os=32-oc$1(as)-1;as&=~(1<<os),rs+=1;var is=32-oc$1(ts)+os;if(30<is){var us=os-os%5;is=(as&(1<<us)-1).toString(32),as>>=us,os-=us,rg=1<<32-oc$1(ts)+os|rs<<os|as,sg=is+ns}else rg=1<<is|rs<<os|as,sg=ns}function vg(ns){ns.return!==null&&(tg(ns,1),ug(ns,1,0))}function wg(ns){for(;ns===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;ns===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$2=!1,zg=null;function Ag(ns,ts){var rs=Bg(5,null,null,0);rs.elementType="DELETED",rs.stateNode=ts,rs.return=ns,ts=ns.deletions,ts===null?(ns.deletions=[rs],ns.flags|=16):ts.push(rs)}function Cg(ns,ts){switch(ns.tag){case 5:var rs=ns.type;return ts=ts.nodeType!==1||rs.toLowerCase()!==ts.nodeName.toLowerCase()?null:ts,ts!==null?(ns.stateNode=ts,xg=ns,yg=Lf(ts.firstChild),!0):!1;case 6:return ts=ns.pendingProps===""||ts.nodeType!==3?null:ts,ts!==null?(ns.stateNode=ts,xg=ns,yg=null,!0):!1;case 13:return ts=ts.nodeType!==8?null:ts,ts!==null?(rs=qg!==null?{id:rg,overflow:sg}:null,ns.memoizedState={dehydrated:ts,treeContext:rs,retryLane:1073741824},rs=Bg(18,null,null,0),rs.stateNode=ts,rs.return=ns,ns.child=rs,xg=ns,yg=null,!0):!1;default:return!1}}function Dg(ns){return(ns.mode&1)!==0&&(ns.flags&128)===0}function Eg(ns){if(I$2){var ts=yg;if(ts){var rs=ts;if(!Cg(ns,ts)){if(Dg(ns))throw Error(p$2(418));ts=Lf(rs.nextSibling);var as=xg;ts&&Cg(ns,ts)?Ag(as,rs):(ns.flags=ns.flags&-4097|2,I$2=!1,xg=ns)}}else{if(Dg(ns))throw Error(p$2(418));ns.flags=ns.flags&-4097|2,I$2=!1,xg=ns}}}function Fg(ns){for(ns=ns.return;ns!==null&&ns.tag!==5&&ns.tag!==3&&ns.tag!==13;)ns=ns.return;xg=ns}function Gg(ns){if(ns!==xg)return!1;if(!I$2)return Fg(ns),I$2=!0,!1;var ts;if((ts=ns.tag!==3)&&!(ts=ns.tag!==5)&&(ts=ns.type,ts=ts!=="head"&&ts!=="body"&&!Ef(ns.type,ns.memoizedProps)),ts&&(ts=yg)){if(Dg(ns))throw Hg(),Error(p$2(418));for(;ts;)Ag(ns,ts),ts=Lf(ts.nextSibling)}if(Fg(ns),ns.tag===13){if(ns=ns.memoizedState,ns=ns!==null?ns.dehydrated:null,!ns)throw Error(p$2(317));e:{for(ns=ns.nextSibling,ts=0;ns;){if(ns.nodeType===8){var rs=ns.data;if(rs==="/$"){if(ts===0){yg=Lf(ns.nextSibling);break e}ts--}else rs!=="$"&&rs!=="$!"&&rs!=="$?"||ts++}ns=ns.nextSibling}yg=null}}else yg=xg?Lf(ns.stateNode.nextSibling):null;return!0}function Hg(){for(var ns=yg;ns;)ns=Lf(ns.nextSibling)}function Ig(){yg=xg=null,I$2=!1}function Jg(ns){zg===null?zg=[ns]:zg.push(ns)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(ns,ts){if(ns&&ns.defaultProps){ts=A$2({},ts),ns=ns.defaultProps;for(var rs in ns)ts[rs]===void 0&&(ts[rs]=ns[rs]);return ts}return ts}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(ns){var ts=Mg.current;E$2(Mg),ns._currentValue=ts}function Sg(ns,ts,rs){for(;ns!==null;){var as=ns.alternate;if((ns.childLanes&ts)!==ts?(ns.childLanes|=ts,as!==null&&(as.childLanes|=ts)):as!==null&&(as.childLanes&ts)!==ts&&(as.childLanes|=ts),ns===rs)break;ns=ns.return}}function Tg(ns,ts){Ng=ns,Pg=Og=null,ns=ns.dependencies,ns!==null&&ns.firstContext!==null&&(ns.lanes&ts&&(Ug=!0),ns.firstContext=null)}function Vg(ns){var ts=ns._currentValue;if(Pg!==ns)if(ns={context:ns,memoizedValue:ts,next:null},Og===null){if(Ng===null)throw Error(p$2(308));Og=ns,Ng.dependencies={lanes:0,firstContext:ns}}else Og=Og.next=ns;return ts}var Wg=null;function Xg(ns){Wg===null?Wg=[ns]:Wg.push(ns)}function Yg(ns,ts,rs,as){var os=ts.interleaved;return os===null?(rs.next=rs,Xg(ts)):(rs.next=os.next,os.next=rs),ts.interleaved=rs,Zg(ns,as)}function Zg(ns,ts){ns.lanes|=ts;var rs=ns.alternate;for(rs!==null&&(rs.lanes|=ts),rs=ns,ns=ns.return;ns!==null;)ns.childLanes|=ts,rs=ns.alternate,rs!==null&&(rs.childLanes|=ts),rs=ns,ns=ns.return;return rs.tag===3?rs.stateNode:null}var $g=!1;function ah(ns){ns.updateQueue={baseState:ns.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(ns,ts){ns=ns.updateQueue,ts.updateQueue===ns&&(ts.updateQueue={baseState:ns.baseState,firstBaseUpdate:ns.firstBaseUpdate,lastBaseUpdate:ns.lastBaseUpdate,shared:ns.shared,effects:ns.effects})}function ch(ns,ts){return{eventTime:ns,lane:ts,tag:0,payload:null,callback:null,next:null}}function dh(ns,ts,rs){var as=ns.updateQueue;if(as===null)return null;if(as=as.shared,K$2&2){var os=as.pending;return os===null?ts.next=ts:(ts.next=os.next,os.next=ts),as.pending=ts,Zg(ns,rs)}return os=as.interleaved,os===null?(ts.next=ts,Xg(as)):(ts.next=os.next,os.next=ts),as.interleaved=ts,Zg(ns,rs)}function eh(ns,ts,rs){if(ts=ts.updateQueue,ts!==null&&(ts=ts.shared,(rs&4194240)!==0)){var as=ts.lanes;as&=ns.pendingLanes,rs|=as,ts.lanes=rs,Cc(ns,rs)}}function fh(ns,ts){var rs=ns.updateQueue,as=ns.alternate;if(as!==null&&(as=as.updateQueue,rs===as)){var os=null,is=null;if(rs=rs.firstBaseUpdate,rs!==null){do{var us={eventTime:rs.eventTime,lane:rs.lane,tag:rs.tag,payload:rs.payload,callback:rs.callback,next:null};is===null?os=is=us:is=is.next=us,rs=rs.next}while(rs!==null);is===null?os=is=ts:is=is.next=ts}else os=is=ts;rs={baseState:as.baseState,firstBaseUpdate:os,lastBaseUpdate:is,shared:as.shared,effects:as.effects},ns.updateQueue=rs;return}ns=rs.lastBaseUpdate,ns===null?rs.firstBaseUpdate=ts:ns.next=ts,rs.lastBaseUpdate=ts}function gh(ns,ts,rs,as){var os=ns.updateQueue;$g=!1;var is=os.firstBaseUpdate,us=os.lastBaseUpdate,ls=os.shared.pending;if(ls!==null){os.shared.pending=null;var fs=ls,hs=fs.next;fs.next=null,us===null?is=hs:us.next=hs,us=fs;var vs=ns.alternate;vs!==null&&(vs=vs.updateQueue,ls=vs.lastBaseUpdate,ls!==us&&(ls===null?vs.firstBaseUpdate=hs:ls.next=hs,vs.lastBaseUpdate=fs))}if(is!==null){var gs=os.baseState;us=0,vs=hs=fs=null,ls=is;do{var ys=ls.lane,xs=ls.eventTime;if((as&ys)===ys){vs!==null&&(vs=vs.next={eventTime:xs,lane:0,tag:ls.tag,payload:ls.payload,callback:ls.callback,next:null});e:{var ms=ns,Ss=ls;switch(ys=ts,xs=rs,Ss.tag){case 1:if(ms=Ss.payload,typeof ms=="function"){gs=ms.call(xs,gs,ys);break e}gs=ms;break e;case 3:ms.flags=ms.flags&-65537|128;case 0:if(ms=Ss.payload,ys=typeof ms=="function"?ms.call(xs,gs,ys):ms,ys==null)break e;gs=A$2({},gs,ys);break e;case 2:$g=!0}}ls.callback!==null&&ls.lane!==0&&(ns.flags|=64,ys=os.effects,ys===null?os.effects=[ls]:ys.push(ls))}else xs={eventTime:xs,lane:ys,tag:ls.tag,payload:ls.payload,callback:ls.callback,next:null},vs===null?(hs=vs=xs,fs=gs):vs=vs.next=xs,us|=ys;if(ls=ls.next,ls===null){if(ls=os.shared.pending,ls===null)break;ys=ls,ls=ys.next,ys.next=null,os.lastBaseUpdate=ys,os.shared.pending=null}}while(!0);if(vs===null&&(fs=gs),os.baseState=fs,os.firstBaseUpdate=hs,os.lastBaseUpdate=vs,ts=os.shared.interleaved,ts!==null){os=ts;do us|=os.lane,os=os.next;while(os!==ts)}else is===null&&(os.shared.lanes=0);hh|=us,ns.lanes=us,ns.memoizedState=gs}}function ih(ns,ts,rs){if(ns=ts.effects,ts.effects=null,ns!==null)for(ts=0;ts<ns.length;ts++){var as=ns[ts],os=as.callback;if(os!==null){if(as.callback=null,as=rs,typeof os!="function")throw Error(p$2(191,os));os.call(as)}}}var jh=new aa$2.Component().refs;function kh(ns,ts,rs,as){ts=ns.memoizedState,rs=rs(as,ts),rs=rs==null?ts:A$2({},ts,rs),ns.memoizedState=rs,ns.lanes===0&&(ns.updateQueue.baseState=rs)}var nh={isMounted:function(ns){return(ns=ns._reactInternals)?Vb(ns)===ns:!1},enqueueSetState:function(ns,ts,rs){ns=ns._reactInternals;var as=L$2(),os=lh(ns),is=ch(as,os);is.payload=ts,rs!=null&&(is.callback=rs),ts=dh(ns,is,os),ts!==null&&(mh(ts,ns,os,as),eh(ts,ns,os))},enqueueReplaceState:function(ns,ts,rs){ns=ns._reactInternals;var as=L$2(),os=lh(ns),is=ch(as,os);is.tag=1,is.payload=ts,rs!=null&&(is.callback=rs),ts=dh(ns,is,os),ts!==null&&(mh(ts,ns,os,as),eh(ts,ns,os))},enqueueForceUpdate:function(ns,ts){ns=ns._reactInternals;var rs=L$2(),as=lh(ns),os=ch(rs,as);os.tag=2,ts!=null&&(os.callback=ts),ts=dh(ns,os,as),ts!==null&&(mh(ts,ns,as,rs),eh(ts,ns,as))}};function oh(ns,ts,rs,as,os,is,us){return ns=ns.stateNode,typeof ns.shouldComponentUpdate=="function"?ns.shouldComponentUpdate(as,is,us):ts.prototype&&ts.prototype.isPureReactComponent?!Ie$1(rs,as)||!Ie$1(os,is):!0}function ph(ns,ts,rs){var as=!1,os=Vf,is=ts.contextType;return typeof is=="object"&&is!==null?is=Vg(is):(os=Zf(ts)?Xf:H$2.current,as=ts.contextTypes,is=(as=as!=null)?Yf(ns,os):Vf),ts=new ts(rs,is),ns.memoizedState=ts.state!==null&&ts.state!==void 0?ts.state:null,ts.updater=nh,ns.stateNode=ts,ts._reactInternals=ns,as&&(ns=ns.stateNode,ns.__reactInternalMemoizedUnmaskedChildContext=os,ns.__reactInternalMemoizedMaskedChildContext=is),ts}function qh(ns,ts,rs,as){ns=ts.state,typeof ts.componentWillReceiveProps=="function"&&ts.componentWillReceiveProps(rs,as),typeof ts.UNSAFE_componentWillReceiveProps=="function"&&ts.UNSAFE_componentWillReceiveProps(rs,as),ts.state!==ns&&nh.enqueueReplaceState(ts,ts.state,null)}function rh(ns,ts,rs,as){var os=ns.stateNode;os.props=rs,os.state=ns.memoizedState,os.refs=jh,ah(ns);var is=ts.contextType;typeof is=="object"&&is!==null?os.context=Vg(is):(is=Zf(ts)?Xf:H$2.current,os.context=Yf(ns,is)),os.state=ns.memoizedState,is=ts.getDerivedStateFromProps,typeof is=="function"&&(kh(ns,ts,is,rs),os.state=ns.memoizedState),typeof ts.getDerivedStateFromProps=="function"||typeof os.getSnapshotBeforeUpdate=="function"||typeof os.UNSAFE_componentWillMount!="function"&&typeof os.componentWillMount!="function"||(ts=os.state,typeof os.componentWillMount=="function"&&os.componentWillMount(),typeof os.UNSAFE_componentWillMount=="function"&&os.UNSAFE_componentWillMount(),ts!==os.state&&nh.enqueueReplaceState(os,os.state,null),gh(ns,rs,os,as),os.state=ns.memoizedState),typeof os.componentDidMount=="function"&&(ns.flags|=4194308)}function sh(ns,ts,rs){if(ns=rs.ref,ns!==null&&typeof ns!="function"&&typeof ns!="object"){if(rs._owner){if(rs=rs._owner,rs){if(rs.tag!==1)throw Error(p$2(309));var as=rs.stateNode}if(!as)throw Error(p$2(147,ns));var os=as,is=""+ns;return ts!==null&&ts.ref!==null&&typeof ts.ref=="function"&&ts.ref._stringRef===is?ts.ref:(ts=function(us){var ls=os.refs;ls===jh&&(ls=os.refs={}),us===null?delete ls[is]:ls[is]=us},ts._stringRef=is,ts)}if(typeof ns!="string")throw Error(p$2(284));if(!rs._owner)throw Error(p$2(290,ns))}return ns}function th(ns,ts){throw ns=Object.prototype.toString.call(ts),Error(p$2(31,ns==="[object Object]"?"object with keys {"+Object.keys(ts).join(", ")+"}":ns))}function uh(ns){var ts=ns._init;return ts(ns._payload)}function vh(ns){function ts($s,bs){if(ns){var Cs=$s.deletions;Cs===null?($s.deletions=[bs],$s.flags|=16):Cs.push(bs)}}function rs($s,bs){if(!ns)return null;for(;bs!==null;)ts($s,bs),bs=bs.sibling;return null}function as($s,bs){for($s=new Map;bs!==null;)bs.key!==null?$s.set(bs.key,bs):$s.set(bs.index,bs),bs=bs.sibling;return $s}function os($s,bs){return $s=wh($s,bs),$s.index=0,$s.sibling=null,$s}function is($s,bs,Cs){return $s.index=Cs,ns?(Cs=$s.alternate,Cs!==null?(Cs=Cs.index,Cs<bs?($s.flags|=2,bs):Cs):($s.flags|=2,bs)):($s.flags|=1048576,bs)}function us($s){return ns&&$s.alternate===null&&($s.flags|=2),$s}function ls($s,bs,Cs,As){return bs===null||bs.tag!==6?(bs=xh(Cs,$s.mode,As),bs.return=$s,bs):(bs=os(bs,Cs),bs.return=$s,bs)}function fs($s,bs,Cs,As){var Is=Cs.type;return Is===ya$1?vs($s,bs,Cs.props.children,As,Cs.key):bs!==null&&(bs.elementType===Is||typeof Is=="object"&&Is!==null&&Is.$$typeof===Ha$1&&uh(Is)===bs.type)?(As=os(bs,Cs.props),As.ref=sh($s,bs,Cs),As.return=$s,As):(As=yh(Cs.type,Cs.key,Cs.props,null,$s.mode,As),As.ref=sh($s,bs,Cs),As.return=$s,As)}function hs($s,bs,Cs,As){return bs===null||bs.tag!==4||bs.stateNode.containerInfo!==Cs.containerInfo||bs.stateNode.implementation!==Cs.implementation?(bs=zh(Cs,$s.mode,As),bs.return=$s,bs):(bs=os(bs,Cs.children||[]),bs.return=$s,bs)}function vs($s,bs,Cs,As,Is){return bs===null||bs.tag!==7?(bs=Ah(Cs,$s.mode,As,Is),bs.return=$s,bs):(bs=os(bs,Cs),bs.return=$s,bs)}function gs($s,bs,Cs){if(typeof bs=="string"&&bs!==""||typeof bs=="number")return bs=xh(""+bs,$s.mode,Cs),bs.return=$s,bs;if(typeof bs=="object"&&bs!==null){switch(bs.$$typeof){case va$1:return Cs=yh(bs.type,bs.key,bs.props,null,$s.mode,Cs),Cs.ref=sh($s,null,bs),Cs.return=$s,Cs;case wa$1:return bs=zh(bs,$s.mode,Cs),bs.return=$s,bs;case Ha$1:var As=bs._init;return gs($s,As(bs._payload),Cs)}if(eb(bs)||Ka$1(bs))return bs=Ah(bs,$s.mode,Cs,null),bs.return=$s,bs;th($s,bs)}return null}function ys($s,bs,Cs,As){var Is=bs!==null?bs.key:null;if(typeof Cs=="string"&&Cs!==""||typeof Cs=="number")return Is!==null?null:ls($s,bs,""+Cs,As);if(typeof Cs=="object"&&Cs!==null){switch(Cs.$$typeof){case va$1:return Cs.key===Is?fs($s,bs,Cs,As):null;case wa$1:return Cs.key===Is?hs($s,bs,Cs,As):null;case Ha$1:return Is=Cs._init,ys($s,bs,Is(Cs._payload),As)}if(eb(Cs)||Ka$1(Cs))return Is!==null?null:vs($s,bs,Cs,As,null);th($s,Cs)}return null}function xs($s,bs,Cs,As,Is){if(typeof As=="string"&&As!==""||typeof As=="number")return $s=$s.get(Cs)||null,ls(bs,$s,""+As,Is);if(typeof As=="object"&&As!==null){switch(As.$$typeof){case va$1:return $s=$s.get(As.key===null?Cs:As.key)||null,fs(bs,$s,As,Is);case wa$1:return $s=$s.get(As.key===null?Cs:As.key)||null,hs(bs,$s,As,Is);case Ha$1:var ks=As._init;return xs($s,bs,Cs,ks(As._payload),Is)}if(eb(As)||Ka$1(As))return $s=$s.get(Cs)||null,vs(bs,$s,As,Is,null);th(bs,As)}return null}function ms($s,bs,Cs,As){for(var Is=null,ks=null,Ps=bs,Ds=bs=0,Fs=null;Ps!==null&&Ds<Cs.length;Ds++){Ps.index>Ds?(Fs=Ps,Ps=null):Fs=Ps.sibling;var Rs=ys($s,Ps,Cs[Ds],As);if(Rs===null){Ps===null&&(Ps=Fs);break}ns&&Ps&&Rs.alternate===null&&ts($s,Ps),bs=is(Rs,bs,Ds),ks===null?Is=Rs:ks.sibling=Rs,ks=Rs,Ps=Fs}if(Ds===Cs.length)return rs($s,Ps),I$2&&tg($s,Ds),Is;if(Ps===null){for(;Ds<Cs.length;Ds++)Ps=gs($s,Cs[Ds],As),Ps!==null&&(bs=is(Ps,bs,Ds),ks===null?Is=Ps:ks.sibling=Ps,ks=Ps);return I$2&&tg($s,Ds),Is}for(Ps=as($s,Ps);Ds<Cs.length;Ds++)Fs=xs(Ps,$s,Ds,Cs[Ds],As),Fs!==null&&(ns&&Fs.alternate!==null&&Ps.delete(Fs.key===null?Ds:Fs.key),bs=is(Fs,bs,Ds),ks===null?Is=Fs:ks.sibling=Fs,ks=Fs);return ns&&Ps.forEach(function(js){return ts($s,js)}),I$2&&tg($s,Ds),Is}function Ss($s,bs,Cs,As){var Is=Ka$1(Cs);if(typeof Is!="function")throw Error(p$2(150));if(Cs=Is.call(Cs),Cs==null)throw Error(p$2(151));for(var ks=Is=null,Ps=bs,Ds=bs=0,Fs=null,Rs=Cs.next();Ps!==null&&!Rs.done;Ds++,Rs=Cs.next()){Ps.index>Ds?(Fs=Ps,Ps=null):Fs=Ps.sibling;var js=ys($s,Ps,Rs.value,As);if(js===null){Ps===null&&(Ps=Fs);break}ns&&Ps&&js.alternate===null&&ts($s,Ps),bs=is(js,bs,Ds),ks===null?Is=js:ks.sibling=js,ks=js,Ps=Fs}if(Rs.done)return rs($s,Ps),I$2&&tg($s,Ds),Is;if(Ps===null){for(;!Rs.done;Ds++,Rs=Cs.next())Rs=gs($s,Rs.value,As),Rs!==null&&(bs=is(Rs,bs,Ds),ks===null?Is=Rs:ks.sibling=Rs,ks=Rs);return I$2&&tg($s,Ds),Is}for(Ps=as($s,Ps);!Rs.done;Ds++,Rs=Cs.next())Rs=xs(Ps,$s,Ds,Rs.value,As),Rs!==null&&(ns&&Rs.alternate!==null&&Ps.delete(Rs.key===null?Ds:Rs.key),bs=is(Rs,bs,Ds),ks===null?Is=Rs:ks.sibling=Rs,ks=Rs);return ns&&Ps.forEach(function(zs){return ts($s,zs)}),I$2&&tg($s,Ds),Is}function Ms($s,bs,Cs,As){if(typeof Cs=="object"&&Cs!==null&&Cs.type===ya$1&&Cs.key===null&&(Cs=Cs.props.children),typeof Cs=="object"&&Cs!==null){switch(Cs.$$typeof){case va$1:e:{for(var Is=Cs.key,ks=bs;ks!==null;){if(ks.key===Is){if(Is=Cs.type,Is===ya$1){if(ks.tag===7){rs($s,ks.sibling),bs=os(ks,Cs.props.children),bs.return=$s,$s=bs;break e}}else if(ks.elementType===Is||typeof Is=="object"&&Is!==null&&Is.$$typeof===Ha$1&&uh(Is)===ks.type){rs($s,ks.sibling),bs=os(ks,Cs.props),bs.ref=sh($s,ks,Cs),bs.return=$s,$s=bs;break e}rs($s,ks);break}else ts($s,ks);ks=ks.sibling}Cs.type===ya$1?(bs=Ah(Cs.props.children,$s.mode,As,Cs.key),bs.return=$s,$s=bs):(As=yh(Cs.type,Cs.key,Cs.props,null,$s.mode,As),As.ref=sh($s,bs,Cs),As.return=$s,$s=As)}return us($s);case wa$1:e:{for(ks=Cs.key;bs!==null;){if(bs.key===ks)if(bs.tag===4&&bs.stateNode.containerInfo===Cs.containerInfo&&bs.stateNode.implementation===Cs.implementation){rs($s,bs.sibling),bs=os(bs,Cs.children||[]),bs.return=$s,$s=bs;break e}else{rs($s,bs);break}else ts($s,bs);bs=bs.sibling}bs=zh(Cs,$s.mode,As),bs.return=$s,$s=bs}return us($s);case Ha$1:return ks=Cs._init,Ms($s,bs,ks(Cs._payload),As)}if(eb(Cs))return ms($s,bs,Cs,As);if(Ka$1(Cs))return Ss($s,bs,Cs,As);th($s,Cs)}return typeof Cs=="string"&&Cs!==""||typeof Cs=="number"?(Cs=""+Cs,bs!==null&&bs.tag===6?(rs($s,bs.sibling),bs=os(bs,Cs),bs.return=$s,$s=bs):(rs($s,bs),bs=xh(Cs,$s.mode,As),bs.return=$s,$s=bs),us($s)):rs($s,bs)}return Ms}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(ns){if(ns===Dh)throw Error(p$2(174));return ns}function Ih(ns,ts){switch(G$2(Gh,ts),G$2(Fh,ns),G$2(Eh,Dh),ns=ts.nodeType,ns){case 9:case 11:ts=(ts=ts.documentElement)?ts.namespaceURI:lb(null,"");break;default:ns=ns===8?ts.parentNode:ts,ts=ns.namespaceURI||null,ns=ns.tagName,ts=lb(ts,ns)}E$2(Eh),G$2(Eh,ts)}function Jh(){E$2(Eh),E$2(Fh),E$2(Gh)}function Kh(ns){Hh(Gh.current);var ts=Hh(Eh.current),rs=lb(ts,ns.type);ts!==rs&&(G$2(Fh,ns),G$2(Eh,rs))}function Lh(ns){Fh.current===ns&&(E$2(Eh),E$2(Fh))}var M$2=Uf(0);function Mh(ns){for(var ts=ns;ts!==null;){if(ts.tag===13){var rs=ts.memoizedState;if(rs!==null&&(rs=rs.dehydrated,rs===null||rs.data==="$?"||rs.data==="$!"))return ts}else if(ts.tag===19&&ts.memoizedProps.revealOrder!==void 0){if(ts.flags&128)return ts}else if(ts.child!==null){ts.child.return=ts,ts=ts.child;continue}if(ts===ns)break;for(;ts.sibling===null;){if(ts.return===null||ts.return===ns)return null;ts=ts.return}ts.sibling.return=ts.return,ts=ts.sibling}return null}var Nh=[];function Oh(){for(var ns=0;ns<Nh.length;ns++)Nh[ns]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua$1.ReactCurrentDispatcher,Qh=ua$1.ReactCurrentBatchConfig,Rh=0,N$2=null,O$2=null,P$2=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$2(){throw Error(p$2(321))}function Wh(ns,ts){if(ts===null)return!1;for(var rs=0;rs<ts.length&&rs<ns.length;rs++)if(!He$1(ns[rs],ts[rs]))return!1;return!0}function Xh(ns,ts,rs,as,os,is){if(Rh=is,N$2=ts,ts.memoizedState=null,ts.updateQueue=null,ts.lanes=0,Ph.current=ns===null||ns.memoizedState===null?Yh:Zh,ns=rs(as,os),Th){is=0;do{if(Th=!1,Uh=0,25<=is)throw Error(p$2(301));is+=1,P$2=O$2=null,ts.updateQueue=null,Ph.current=$h,ns=rs(as,os)}while(Th)}if(Ph.current=ai$1,ts=O$2!==null&&O$2.next!==null,Rh=0,P$2=O$2=N$2=null,Sh=!1,ts)throw Error(p$2(300));return ns}function bi$1(){var ns=Uh!==0;return Uh=0,ns}function ci$1(){var ns={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$2===null?N$2.memoizedState=P$2=ns:P$2=P$2.next=ns,P$2}function di$1(){if(O$2===null){var ns=N$2.alternate;ns=ns!==null?ns.memoizedState:null}else ns=O$2.next;var ts=P$2===null?N$2.memoizedState:P$2.next;if(ts!==null)P$2=ts,O$2=ns;else{if(ns===null)throw Error(p$2(310));O$2=ns,ns={memoizedState:O$2.memoizedState,baseState:O$2.baseState,baseQueue:O$2.baseQueue,queue:O$2.queue,next:null},P$2===null?N$2.memoizedState=P$2=ns:P$2=P$2.next=ns}return P$2}function ei$1(ns,ts){return typeof ts=="function"?ts(ns):ts}function fi$1(ns){var ts=di$1(),rs=ts.queue;if(rs===null)throw Error(p$2(311));rs.lastRenderedReducer=ns;var as=O$2,os=as.baseQueue,is=rs.pending;if(is!==null){if(os!==null){var us=os.next;os.next=is.next,is.next=us}as.baseQueue=os=is,rs.pending=null}if(os!==null){is=os.next,as=as.baseState;var ls=us=null,fs=null,hs=is;do{var vs=hs.lane;if((Rh&vs)===vs)fs!==null&&(fs=fs.next={lane:0,action:hs.action,hasEagerState:hs.hasEagerState,eagerState:hs.eagerState,next:null}),as=hs.hasEagerState?hs.eagerState:ns(as,hs.action);else{var gs={lane:vs,action:hs.action,hasEagerState:hs.hasEagerState,eagerState:hs.eagerState,next:null};fs===null?(ls=fs=gs,us=as):fs=fs.next=gs,N$2.lanes|=vs,hh|=vs}hs=hs.next}while(hs!==null&&hs!==is);fs===null?us=as:fs.next=ls,He$1(as,ts.memoizedState)||(Ug=!0),ts.memoizedState=as,ts.baseState=us,ts.baseQueue=fs,rs.lastRenderedState=as}if(ns=rs.interleaved,ns!==null){os=ns;do is=os.lane,N$2.lanes|=is,hh|=is,os=os.next;while(os!==ns)}else os===null&&(rs.lanes=0);return[ts.memoizedState,rs.dispatch]}function gi$1(ns){var ts=di$1(),rs=ts.queue;if(rs===null)throw Error(p$2(311));rs.lastRenderedReducer=ns;var as=rs.dispatch,os=rs.pending,is=ts.memoizedState;if(os!==null){rs.pending=null;var us=os=os.next;do is=ns(is,us.action),us=us.next;while(us!==os);He$1(is,ts.memoizedState)||(Ug=!0),ts.memoizedState=is,ts.baseQueue===null&&(ts.baseState=is),rs.lastRenderedState=is}return[is,as]}function hi$1(){}function ii$1(ns,ts){var rs=N$2,as=di$1(),os=ts(),is=!He$1(as.memoizedState,os);if(is&&(as.memoizedState=os,Ug=!0),as=as.queue,ji$1(ki$1.bind(null,rs,as,ns),[ns]),as.getSnapshot!==ts||is||P$2!==null&&P$2.memoizedState.tag&1){if(rs.flags|=2048,li$1(9,mi$1.bind(null,rs,as,os,ts),void 0,null),R$3===null)throw Error(p$2(349));Rh&30||ni$1(rs,ts,os)}return os}function ni$1(ns,ts,rs){ns.flags|=16384,ns={getSnapshot:ts,value:rs},ts=N$2.updateQueue,ts===null?(ts={lastEffect:null,stores:null},N$2.updateQueue=ts,ts.stores=[ns]):(rs=ts.stores,rs===null?ts.stores=[ns]:rs.push(ns))}function mi$1(ns,ts,rs,as){ts.value=rs,ts.getSnapshot=as,oi$1(ts)&&pi$2(ns)}function ki$1(ns,ts,rs){return rs(function(){oi$1(ts)&&pi$2(ns)})}function oi$1(ns){var ts=ns.getSnapshot;ns=ns.value;try{var rs=ts();return!He$1(ns,rs)}catch{return!0}}function pi$2(ns){var ts=Zg(ns,1);ts!==null&&mh(ts,ns,1,-1)}function qi$1(ns){var ts=ci$1();return typeof ns=="function"&&(ns=ns()),ts.memoizedState=ts.baseState=ns,ns={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei$1,lastRenderedState:ns},ts.queue=ns,ns=ns.dispatch=ri$1.bind(null,N$2,ns),[ts.memoizedState,ns]}function li$1(ns,ts,rs,as){return ns={tag:ns,create:ts,destroy:rs,deps:as,next:null},ts=N$2.updateQueue,ts===null?(ts={lastEffect:null,stores:null},N$2.updateQueue=ts,ts.lastEffect=ns.next=ns):(rs=ts.lastEffect,rs===null?ts.lastEffect=ns.next=ns:(as=rs.next,rs.next=ns,ns.next=as,ts.lastEffect=ns)),ns}function si$1(){return di$1().memoizedState}function ti$1(ns,ts,rs,as){var os=ci$1();N$2.flags|=ns,os.memoizedState=li$1(1|ts,rs,void 0,as===void 0?null:as)}function ui$1(ns,ts,rs,as){var os=di$1();as=as===void 0?null:as;var is=void 0;if(O$2!==null){var us=O$2.memoizedState;if(is=us.destroy,as!==null&&Wh(as,us.deps)){os.memoizedState=li$1(ts,rs,is,as);return}}N$2.flags|=ns,os.memoizedState=li$1(1|ts,rs,is,as)}function vi$1(ns,ts){return ti$1(8390656,8,ns,ts)}function ji$1(ns,ts){return ui$1(2048,8,ns,ts)}function wi$1(ns,ts){return ui$1(4,2,ns,ts)}function xi$1(ns,ts){return ui$1(4,4,ns,ts)}function yi$1(ns,ts){if(typeof ts=="function")return ns=ns(),ts(ns),function(){ts(null)};if(ts!=null)return ns=ns(),ts.current=ns,function(){ts.current=null}}function zi$1(ns,ts,rs){return rs=rs!=null?rs.concat([ns]):null,ui$1(4,4,yi$1.bind(null,ts,ns),rs)}function Ai$1(){}function Bi$1(ns,ts){var rs=di$1();ts=ts===void 0?null:ts;var as=rs.memoizedState;return as!==null&&ts!==null&&Wh(ts,as[1])?as[0]:(rs.memoizedState=[ns,ts],ns)}function Ci$1(ns,ts){var rs=di$1();ts=ts===void 0?null:ts;var as=rs.memoizedState;return as!==null&&ts!==null&&Wh(ts,as[1])?as[0]:(ns=ns(),rs.memoizedState=[ns,ts],ns)}function Di$1(ns,ts,rs){return Rh&21?(He$1(rs,ts)||(rs=yc(),N$2.lanes|=rs,hh|=rs,ns.baseState=!0),ts):(ns.baseState&&(ns.baseState=!1,Ug=!0),ns.memoizedState=rs)}function Ei$1(ns,ts){var rs=C$2;C$2=rs!==0&&4>rs?rs:4,ns(!0);var as=Qh.transition;Qh.transition={};try{ns(!1),ts()}finally{C$2=rs,Qh.transition=as}}function Fi$1(){return di$1().memoizedState}function Gi$1(ns,ts,rs){var as=lh(ns);if(rs={lane:as,action:rs,hasEagerState:!1,eagerState:null,next:null},Hi$1(ns))Ii$1(ts,rs);else if(rs=Yg(ns,ts,rs,as),rs!==null){var os=L$2();mh(rs,ns,as,os),Ji$1(rs,ts,as)}}function ri$1(ns,ts,rs){var as=lh(ns),os={lane:as,action:rs,hasEagerState:!1,eagerState:null,next:null};if(Hi$1(ns))Ii$1(ts,os);else{var is=ns.alternate;if(ns.lanes===0&&(is===null||is.lanes===0)&&(is=ts.lastRenderedReducer,is!==null))try{var us=ts.lastRenderedState,ls=is(us,rs);if(os.hasEagerState=!0,os.eagerState=ls,He$1(ls,us)){var fs=ts.interleaved;fs===null?(os.next=os,Xg(ts)):(os.next=fs.next,fs.next=os),ts.interleaved=os;return}}catch{}finally{}rs=Yg(ns,ts,os,as),rs!==null&&(os=L$2(),mh(rs,ns,as,os),Ji$1(rs,ts,as))}}function Hi$1(ns){var ts=ns.alternate;return ns===N$2||ts!==null&&ts===N$2}function Ii$1(ns,ts){Th=Sh=!0;var rs=ns.pending;rs===null?ts.next=ts:(ts.next=rs.next,rs.next=ts),ns.pending=ts}function Ji$1(ns,ts,rs){if(rs&4194240){var as=ts.lanes;as&=ns.pendingLanes,rs|=as,ts.lanes=rs,Cc(ns,rs)}}var ai$1={readContext:Vg,useCallback:Q$2,useContext:Q$2,useEffect:Q$2,useImperativeHandle:Q$2,useInsertionEffect:Q$2,useLayoutEffect:Q$2,useMemo:Q$2,useReducer:Q$2,useRef:Q$2,useState:Q$2,useDebugValue:Q$2,useDeferredValue:Q$2,useTransition:Q$2,useMutableSource:Q$2,useSyncExternalStore:Q$2,useId:Q$2,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(ns,ts){return ci$1().memoizedState=[ns,ts===void 0?null:ts],ns},useContext:Vg,useEffect:vi$1,useImperativeHandle:function(ns,ts,rs){return rs=rs!=null?rs.concat([ns]):null,ti$1(4194308,4,yi$1.bind(null,ts,ns),rs)},useLayoutEffect:function(ns,ts){return ti$1(4194308,4,ns,ts)},useInsertionEffect:function(ns,ts){return ti$1(4,2,ns,ts)},useMemo:function(ns,ts){var rs=ci$1();return ts=ts===void 0?null:ts,ns=ns(),rs.memoizedState=[ns,ts],ns},useReducer:function(ns,ts,rs){var as=ci$1();return ts=rs!==void 0?rs(ts):ts,as.memoizedState=as.baseState=ts,ns={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:ts},as.queue=ns,ns=ns.dispatch=Gi$1.bind(null,N$2,ns),[as.memoizedState,ns]},useRef:function(ns){var ts=ci$1();return ns={current:ns},ts.memoizedState=ns},useState:qi$1,useDebugValue:Ai$1,useDeferredValue:function(ns){return ci$1().memoizedState=ns},useTransition:function(){var ns=qi$1(!1),ts=ns[0];return ns=Ei$1.bind(null,ns[1]),ci$1().memoizedState=ns,[ts,ns]},useMutableSource:function(){},useSyncExternalStore:function(ns,ts,rs){var as=N$2,os=ci$1();if(I$2){if(rs===void 0)throw Error(p$2(407));rs=rs()}else{if(rs=ts(),R$3===null)throw Error(p$2(349));Rh&30||ni$1(as,ts,rs)}os.memoizedState=rs;var is={value:rs,getSnapshot:ts};return os.queue=is,vi$1(ki$1.bind(null,as,is,ns),[ns]),as.flags|=2048,li$1(9,mi$1.bind(null,as,is,rs,ts),void 0,null),rs},useId:function(){var ns=ci$1(),ts=R$3.identifierPrefix;if(I$2){var rs=sg,as=rg;rs=(as&~(1<<32-oc$1(as)-1)).toString(32)+rs,ts=":"+ts+"R"+rs,rs=Uh++,0<rs&&(ts+="H"+rs.toString(32)),ts+=":"}else rs=Vh++,ts=":"+ts+"r"+rs.toString(32)+":";return ns.memoizedState=ts},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi$1,useContext:Vg,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:fi$1,useRef:si$1,useState:function(){return fi$1(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(ns){var ts=di$1();return Di$1(ts,O$2.memoizedState,ns)},useTransition:function(){var ns=fi$1(ei$1)[0],ts=di$1().memoizedState;return[ns,ts]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi$1,useContext:Vg,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:gi$1,useRef:si$1,useState:function(){return gi$1(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(ns){var ts=di$1();return O$2===null?ts.memoizedState=ns:Di$1(ts,O$2.memoizedState,ns)},useTransition:function(){var ns=gi$1(ei$1)[0],ts=di$1().memoizedState;return[ns,ts]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1};function Ki$1(ns,ts){try{var rs="",as=ts;do rs+=Pa$1(as),as=as.return;while(as);var os=rs}catch(is){os=`
Error generating stack: `+is.message+`
`+is.stack}return{value:ns,source:ts,stack:os,digest:null}}function Li$1(ns,ts,rs){return{value:ns,source:null,stack:rs??null,digest:ts??null}}function Mi$1(ns,ts){try{console.error(ts.value)}catch(rs){setTimeout(function(){throw rs})}}var Ni$1=typeof WeakMap=="function"?WeakMap:Map;function Oi$1(ns,ts,rs){rs=ch(-1,rs),rs.tag=3,rs.payload={element:null};var as=ts.value;return rs.callback=function(){Pi$1||(Pi$1=!0,Qi$1=as),Mi$1(ns,ts)},rs}function Ri$1(ns,ts,rs){rs=ch(-1,rs),rs.tag=3;var as=ns.type.getDerivedStateFromError;if(typeof as=="function"){var os=ts.value;rs.payload=function(){return as(os)},rs.callback=function(){Mi$1(ns,ts)}}var is=ns.stateNode;return is!==null&&typeof is.componentDidCatch=="function"&&(rs.callback=function(){Mi$1(ns,ts),typeof as!="function"&&(Si$1===null?Si$1=new Set([this]):Si$1.add(this));var us=ts.stack;this.componentDidCatch(ts.value,{componentStack:us!==null?us:""})}),rs}function Ti$1(ns,ts,rs){var as=ns.pingCache;if(as===null){as=ns.pingCache=new Ni$1;var os=new Set;as.set(ts,os)}else os=as.get(ts),os===void 0&&(os=new Set,as.set(ts,os));os.has(rs)||(os.add(rs),ns=Ui$1.bind(null,ns,ts,rs),ts.then(ns,ns))}function Vi$1(ns){do{var ts;if((ts=ns.tag===13)&&(ts=ns.memoizedState,ts=ts!==null?ts.dehydrated!==null:!0),ts)return ns;ns=ns.return}while(ns!==null);return null}function Wi$1(ns,ts,rs,as,os){return ns.mode&1?(ns.flags|=65536,ns.lanes=os,ns):(ns===ts?ns.flags|=65536:(ns.flags|=128,rs.flags|=131072,rs.flags&=-52805,rs.tag===1&&(rs.alternate===null?rs.tag=17:(ts=ch(-1,1),ts.tag=2,dh(rs,ts,1))),rs.lanes|=1),ns)}var Xi$1=ua$1.ReactCurrentOwner,Ug=!1;function Yi$1(ns,ts,rs,as){ts.child=ns===null?Ch(ts,null,rs,as):Bh(ts,ns.child,rs,as)}function Zi$1(ns,ts,rs,as,os){rs=rs.render;var is=ts.ref;return Tg(ts,os),as=Xh(ns,ts,rs,as,is,os),rs=bi$1(),ns!==null&&!Ug?(ts.updateQueue=ns.updateQueue,ts.flags&=-2053,ns.lanes&=~os,$i$1(ns,ts,os)):(I$2&&rs&&vg(ts),ts.flags|=1,Yi$1(ns,ts,as,os),ts.child)}function aj(ns,ts,rs,as,os){if(ns===null){var is=rs.type;return typeof is=="function"&&!bj(is)&&is.defaultProps===void 0&&rs.compare===null&&rs.defaultProps===void 0?(ts.tag=15,ts.type=is,cj(ns,ts,is,as,os)):(ns=yh(rs.type,null,as,ts,ts.mode,os),ns.ref=ts.ref,ns.return=ts,ts.child=ns)}if(is=ns.child,!(ns.lanes&os)){var us=is.memoizedProps;if(rs=rs.compare,rs=rs!==null?rs:Ie$1,rs(us,as)&&ns.ref===ts.ref)return $i$1(ns,ts,os)}return ts.flags|=1,ns=wh(is,as),ns.ref=ts.ref,ns.return=ts,ts.child=ns}function cj(ns,ts,rs,as,os){if(ns!==null){var is=ns.memoizedProps;if(Ie$1(is,as)&&ns.ref===ts.ref)if(Ug=!1,ts.pendingProps=as=is,(ns.lanes&os)!==0)ns.flags&131072&&(Ug=!0);else return ts.lanes=ns.lanes,$i$1(ns,ts,os)}return dj(ns,ts,rs,as,os)}function ej(ns,ts,rs){var as=ts.pendingProps,os=as.children,is=ns!==null?ns.memoizedState:null;if(as.mode==="hidden")if(!(ts.mode&1))ts.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$2(fj,gj),gj|=rs;else{if(!(rs&1073741824))return ns=is!==null?is.baseLanes|rs:rs,ts.lanes=ts.childLanes=1073741824,ts.memoizedState={baseLanes:ns,cachePool:null,transitions:null},ts.updateQueue=null,G$2(fj,gj),gj|=ns,null;ts.memoizedState={baseLanes:0,cachePool:null,transitions:null},as=is!==null?is.baseLanes:rs,G$2(fj,gj),gj|=as}else is!==null?(as=is.baseLanes|rs,ts.memoizedState=null):as=rs,G$2(fj,gj),gj|=as;return Yi$1(ns,ts,os,rs),ts.child}function hj(ns,ts){var rs=ts.ref;(ns===null&&rs!==null||ns!==null&&ns.ref!==rs)&&(ts.flags|=512,ts.flags|=2097152)}function dj(ns,ts,rs,as,os){var is=Zf(rs)?Xf:H$2.current;return is=Yf(ts,is),Tg(ts,os),rs=Xh(ns,ts,rs,as,is,os),as=bi$1(),ns!==null&&!Ug?(ts.updateQueue=ns.updateQueue,ts.flags&=-2053,ns.lanes&=~os,$i$1(ns,ts,os)):(I$2&&as&&vg(ts),ts.flags|=1,Yi$1(ns,ts,rs,os),ts.child)}function ij(ns,ts,rs,as,os){if(Zf(rs)){var is=!0;cg(ts)}else is=!1;if(Tg(ts,os),ts.stateNode===null)jj(ns,ts),ph(ts,rs,as),rh(ts,rs,as,os),as=!0;else if(ns===null){var us=ts.stateNode,ls=ts.memoizedProps;us.props=ls;var fs=us.context,hs=rs.contextType;typeof hs=="object"&&hs!==null?hs=Vg(hs):(hs=Zf(rs)?Xf:H$2.current,hs=Yf(ts,hs));var vs=rs.getDerivedStateFromProps,gs=typeof vs=="function"||typeof us.getSnapshotBeforeUpdate=="function";gs||typeof us.UNSAFE_componentWillReceiveProps!="function"&&typeof us.componentWillReceiveProps!="function"||(ls!==as||fs!==hs)&&qh(ts,us,as,hs),$g=!1;var ys=ts.memoizedState;us.state=ys,gh(ts,as,us,os),fs=ts.memoizedState,ls!==as||ys!==fs||Wf.current||$g?(typeof vs=="function"&&(kh(ts,rs,vs,as),fs=ts.memoizedState),(ls=$g||oh(ts,rs,ls,as,ys,fs,hs))?(gs||typeof us.UNSAFE_componentWillMount!="function"&&typeof us.componentWillMount!="function"||(typeof us.componentWillMount=="function"&&us.componentWillMount(),typeof us.UNSAFE_componentWillMount=="function"&&us.UNSAFE_componentWillMount()),typeof us.componentDidMount=="function"&&(ts.flags|=4194308)):(typeof us.componentDidMount=="function"&&(ts.flags|=4194308),ts.memoizedProps=as,ts.memoizedState=fs),us.props=as,us.state=fs,us.context=hs,as=ls):(typeof us.componentDidMount=="function"&&(ts.flags|=4194308),as=!1)}else{us=ts.stateNode,bh(ns,ts),ls=ts.memoizedProps,hs=ts.type===ts.elementType?ls:Lg(ts.type,ls),us.props=hs,gs=ts.pendingProps,ys=us.context,fs=rs.contextType,typeof fs=="object"&&fs!==null?fs=Vg(fs):(fs=Zf(rs)?Xf:H$2.current,fs=Yf(ts,fs));var xs=rs.getDerivedStateFromProps;(vs=typeof xs=="function"||typeof us.getSnapshotBeforeUpdate=="function")||typeof us.UNSAFE_componentWillReceiveProps!="function"&&typeof us.componentWillReceiveProps!="function"||(ls!==gs||ys!==fs)&&qh(ts,us,as,fs),$g=!1,ys=ts.memoizedState,us.state=ys,gh(ts,as,us,os);var ms=ts.memoizedState;ls!==gs||ys!==ms||Wf.current||$g?(typeof xs=="function"&&(kh(ts,rs,xs,as),ms=ts.memoizedState),(hs=$g||oh(ts,rs,hs,as,ys,ms,fs)||!1)?(vs||typeof us.UNSAFE_componentWillUpdate!="function"&&typeof us.componentWillUpdate!="function"||(typeof us.componentWillUpdate=="function"&&us.componentWillUpdate(as,ms,fs),typeof us.UNSAFE_componentWillUpdate=="function"&&us.UNSAFE_componentWillUpdate(as,ms,fs)),typeof us.componentDidUpdate=="function"&&(ts.flags|=4),typeof us.getSnapshotBeforeUpdate=="function"&&(ts.flags|=1024)):(typeof us.componentDidUpdate!="function"||ls===ns.memoizedProps&&ys===ns.memoizedState||(ts.flags|=4),typeof us.getSnapshotBeforeUpdate!="function"||ls===ns.memoizedProps&&ys===ns.memoizedState||(ts.flags|=1024),ts.memoizedProps=as,ts.memoizedState=ms),us.props=as,us.state=ms,us.context=fs,as=hs):(typeof us.componentDidUpdate!="function"||ls===ns.memoizedProps&&ys===ns.memoizedState||(ts.flags|=4),typeof us.getSnapshotBeforeUpdate!="function"||ls===ns.memoizedProps&&ys===ns.memoizedState||(ts.flags|=1024),as=!1)}return kj(ns,ts,rs,as,is,os)}function kj(ns,ts,rs,as,os,is){hj(ns,ts);var us=(ts.flags&128)!==0;if(!as&&!us)return os&&dg(ts,rs,!1),$i$1(ns,ts,is);as=ts.stateNode,Xi$1.current=ts;var ls=us&&typeof rs.getDerivedStateFromError!="function"?null:as.render();return ts.flags|=1,ns!==null&&us?(ts.child=Bh(ts,ns.child,null,is),ts.child=Bh(ts,null,ls,is)):Yi$1(ns,ts,ls,is),ts.memoizedState=as.state,os&&dg(ts,rs,!0),ts.child}function lj(ns){var ts=ns.stateNode;ts.pendingContext?ag(ns,ts.pendingContext,ts.pendingContext!==ts.context):ts.context&&ag(ns,ts.context,!1),Ih(ns,ts.containerInfo)}function mj(ns,ts,rs,as,os){return Ig(),Jg(os),ts.flags|=256,Yi$1(ns,ts,rs,as),ts.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(ns){return{baseLanes:ns,cachePool:null,transitions:null}}function pj(ns,ts,rs){var as=ts.pendingProps,os=M$2.current,is=!1,us=(ts.flags&128)!==0,ls;if((ls=us)||(ls=ns!==null&&ns.memoizedState===null?!1:(os&2)!==0),ls?(is=!0,ts.flags&=-129):(ns===null||ns.memoizedState!==null)&&(os|=1),G$2(M$2,os&1),ns===null)return Eg(ts),ns=ts.memoizedState,ns!==null&&(ns=ns.dehydrated,ns!==null)?(ts.mode&1?ns.data==="$!"?ts.lanes=8:ts.lanes=1073741824:ts.lanes=1,null):(us=as.children,ns=as.fallback,is?(as=ts.mode,is=ts.child,us={mode:"hidden",children:us},!(as&1)&&is!==null?(is.childLanes=0,is.pendingProps=us):is=qj(us,as,0,null),ns=Ah(ns,as,rs,null),is.return=ts,ns.return=ts,is.sibling=ns,ts.child=is,ts.child.memoizedState=oj(rs),ts.memoizedState=nj,ns):rj(ts,us));if(os=ns.memoizedState,os!==null&&(ls=os.dehydrated,ls!==null))return sj(ns,ts,us,as,ls,os,rs);if(is){is=as.fallback,us=ts.mode,os=ns.child,ls=os.sibling;var fs={mode:"hidden",children:as.children};return!(us&1)&&ts.child!==os?(as=ts.child,as.childLanes=0,as.pendingProps=fs,ts.deletions=null):(as=wh(os,fs),as.subtreeFlags=os.subtreeFlags&14680064),ls!==null?is=wh(ls,is):(is=Ah(is,us,rs,null),is.flags|=2),is.return=ts,as.return=ts,as.sibling=is,ts.child=as,as=is,is=ts.child,us=ns.child.memoizedState,us=us===null?oj(rs):{baseLanes:us.baseLanes|rs,cachePool:null,transitions:us.transitions},is.memoizedState=us,is.childLanes=ns.childLanes&~rs,ts.memoizedState=nj,as}return is=ns.child,ns=is.sibling,as=wh(is,{mode:"visible",children:as.children}),!(ts.mode&1)&&(as.lanes=rs),as.return=ts,as.sibling=null,ns!==null&&(rs=ts.deletions,rs===null?(ts.deletions=[ns],ts.flags|=16):rs.push(ns)),ts.child=as,ts.memoizedState=null,as}function rj(ns,ts){return ts=qj({mode:"visible",children:ts},ns.mode,0,null),ts.return=ns,ns.child=ts}function tj(ns,ts,rs,as){return as!==null&&Jg(as),Bh(ts,ns.child,null,rs),ns=rj(ts,ts.pendingProps.children),ns.flags|=2,ts.memoizedState=null,ns}function sj(ns,ts,rs,as,os,is,us){if(rs)return ts.flags&256?(ts.flags&=-257,as=Li$1(Error(p$2(422))),tj(ns,ts,us,as)):ts.memoizedState!==null?(ts.child=ns.child,ts.flags|=128,null):(is=as.fallback,os=ts.mode,as=qj({mode:"visible",children:as.children},os,0,null),is=Ah(is,os,us,null),is.flags|=2,as.return=ts,is.return=ts,as.sibling=is,ts.child=as,ts.mode&1&&Bh(ts,ns.child,null,us),ts.child.memoizedState=oj(us),ts.memoizedState=nj,is);if(!(ts.mode&1))return tj(ns,ts,us,null);if(os.data==="$!"){if(as=os.nextSibling&&os.nextSibling.dataset,as)var ls=as.dgst;return as=ls,is=Error(p$2(419)),as=Li$1(is,as,void 0),tj(ns,ts,us,as)}if(ls=(us&ns.childLanes)!==0,Ug||ls){if(as=R$3,as!==null){switch(us&-us){case 4:os=2;break;case 16:os=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:os=32;break;case 536870912:os=268435456;break;default:os=0}os=os&(as.suspendedLanes|us)?0:os,os!==0&&os!==is.retryLane&&(is.retryLane=os,Zg(ns,os),mh(as,ns,os,-1))}return uj(),as=Li$1(Error(p$2(421))),tj(ns,ts,us,as)}return os.data==="$?"?(ts.flags|=128,ts.child=ns.child,ts=vj.bind(null,ns),os._reactRetry=ts,null):(ns=is.treeContext,yg=Lf(os.nextSibling),xg=ts,I$2=!0,zg=null,ns!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=ns.id,sg=ns.overflow,qg=ts),ts=rj(ts,as.children),ts.flags|=4096,ts)}function wj(ns,ts,rs){ns.lanes|=ts;var as=ns.alternate;as!==null&&(as.lanes|=ts),Sg(ns.return,ts,rs)}function xj(ns,ts,rs,as,os){var is=ns.memoizedState;is===null?ns.memoizedState={isBackwards:ts,rendering:null,renderingStartTime:0,last:as,tail:rs,tailMode:os}:(is.isBackwards=ts,is.rendering=null,is.renderingStartTime=0,is.last=as,is.tail=rs,is.tailMode=os)}function yj(ns,ts,rs){var as=ts.pendingProps,os=as.revealOrder,is=as.tail;if(Yi$1(ns,ts,as.children,rs),as=M$2.current,as&2)as=as&1|2,ts.flags|=128;else{if(ns!==null&&ns.flags&128)e:for(ns=ts.child;ns!==null;){if(ns.tag===13)ns.memoizedState!==null&&wj(ns,rs,ts);else if(ns.tag===19)wj(ns,rs,ts);else if(ns.child!==null){ns.child.return=ns,ns=ns.child;continue}if(ns===ts)break e;for(;ns.sibling===null;){if(ns.return===null||ns.return===ts)break e;ns=ns.return}ns.sibling.return=ns.return,ns=ns.sibling}as&=1}if(G$2(M$2,as),!(ts.mode&1))ts.memoizedState=null;else switch(os){case"forwards":for(rs=ts.child,os=null;rs!==null;)ns=rs.alternate,ns!==null&&Mh(ns)===null&&(os=rs),rs=rs.sibling;rs=os,rs===null?(os=ts.child,ts.child=null):(os=rs.sibling,rs.sibling=null),xj(ts,!1,os,rs,is);break;case"backwards":for(rs=null,os=ts.child,ts.child=null;os!==null;){if(ns=os.alternate,ns!==null&&Mh(ns)===null){ts.child=os;break}ns=os.sibling,os.sibling=rs,rs=os,os=ns}xj(ts,!0,rs,null,is);break;case"together":xj(ts,!1,null,null,void 0);break;default:ts.memoizedState=null}return ts.child}function jj(ns,ts){!(ts.mode&1)&&ns!==null&&(ns.alternate=null,ts.alternate=null,ts.flags|=2)}function $i$1(ns,ts,rs){if(ns!==null&&(ts.dependencies=ns.dependencies),hh|=ts.lanes,!(rs&ts.childLanes))return null;if(ns!==null&&ts.child!==ns.child)throw Error(p$2(153));if(ts.child!==null){for(ns=ts.child,rs=wh(ns,ns.pendingProps),ts.child=rs,rs.return=ts;ns.sibling!==null;)ns=ns.sibling,rs=rs.sibling=wh(ns,ns.pendingProps),rs.return=ts;rs.sibling=null}return ts.child}function zj(ns,ts,rs){switch(ts.tag){case 3:lj(ts),Ig();break;case 5:Kh(ts);break;case 1:Zf(ts.type)&&cg(ts);break;case 4:Ih(ts,ts.stateNode.containerInfo);break;case 10:var as=ts.type._context,os=ts.memoizedProps.value;G$2(Mg,as._currentValue),as._currentValue=os;break;case 13:if(as=ts.memoizedState,as!==null)return as.dehydrated!==null?(G$2(M$2,M$2.current&1),ts.flags|=128,null):rs&ts.child.childLanes?pj(ns,ts,rs):(G$2(M$2,M$2.current&1),ns=$i$1(ns,ts,rs),ns!==null?ns.sibling:null);G$2(M$2,M$2.current&1);break;case 19:if(as=(rs&ts.childLanes)!==0,ns.flags&128){if(as)return yj(ns,ts,rs);ts.flags|=128}if(os=ts.memoizedState,os!==null&&(os.rendering=null,os.tail=null,os.lastEffect=null),G$2(M$2,M$2.current),as)break;return null;case 22:case 23:return ts.lanes=0,ej(ns,ts,rs)}return $i$1(ns,ts,rs)}var Aj,Bj,Cj,Dj;Aj=function(ns,ts){for(var rs=ts.child;rs!==null;){if(rs.tag===5||rs.tag===6)ns.appendChild(rs.stateNode);else if(rs.tag!==4&&rs.child!==null){rs.child.return=rs,rs=rs.child;continue}if(rs===ts)break;for(;rs.sibling===null;){if(rs.return===null||rs.return===ts)return;rs=rs.return}rs.sibling.return=rs.return,rs=rs.sibling}};Bj=function(){};Cj=function(ns,ts,rs,as){var os=ns.memoizedProps;if(os!==as){ns=ts.stateNode,Hh(Eh.current);var is=null;switch(rs){case"input":os=Ya$1(ns,os),as=Ya$1(ns,as),is=[];break;case"select":os=A$2({},os,{value:void 0}),as=A$2({},as,{value:void 0}),is=[];break;case"textarea":os=gb(ns,os),as=gb(ns,as),is=[];break;default:typeof os.onClick!="function"&&typeof as.onClick=="function"&&(ns.onclick=Bf)}ub(rs,as);var us;rs=null;for(hs in os)if(!as.hasOwnProperty(hs)&&os.hasOwnProperty(hs)&&os[hs]!=null)if(hs==="style"){var ls=os[hs];for(us in ls)ls.hasOwnProperty(us)&&(rs||(rs={}),rs[us]="")}else hs!=="dangerouslySetInnerHTML"&&hs!=="children"&&hs!=="suppressContentEditableWarning"&&hs!=="suppressHydrationWarning"&&hs!=="autoFocus"&&(ea$1.hasOwnProperty(hs)?is||(is=[]):(is=is||[]).push(hs,null));for(hs in as){var fs=as[hs];if(ls=os!=null?os[hs]:void 0,as.hasOwnProperty(hs)&&fs!==ls&&(fs!=null||ls!=null))if(hs==="style")if(ls){for(us in ls)!ls.hasOwnProperty(us)||fs&&fs.hasOwnProperty(us)||(rs||(rs={}),rs[us]="");for(us in fs)fs.hasOwnProperty(us)&&ls[us]!==fs[us]&&(rs||(rs={}),rs[us]=fs[us])}else rs||(is||(is=[]),is.push(hs,rs)),rs=fs;else hs==="dangerouslySetInnerHTML"?(fs=fs?fs.__html:void 0,ls=ls?ls.__html:void 0,fs!=null&&ls!==fs&&(is=is||[]).push(hs,fs)):hs==="children"?typeof fs!="string"&&typeof fs!="number"||(is=is||[]).push(hs,""+fs):hs!=="suppressContentEditableWarning"&&hs!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(hs)?(fs!=null&&hs==="onScroll"&&D$2("scroll",ns),is||ls===fs||(is=[])):(is=is||[]).push(hs,fs))}rs&&(is=is||[]).push("style",rs);var hs=is;(ts.updateQueue=hs)&&(ts.flags|=4)}};Dj=function(ns,ts,rs,as){rs!==as&&(ts.flags|=4)};function Ej(ns,ts){if(!I$2)switch(ns.tailMode){case"hidden":ts=ns.tail;for(var rs=null;ts!==null;)ts.alternate!==null&&(rs=ts),ts=ts.sibling;rs===null?ns.tail=null:rs.sibling=null;break;case"collapsed":rs=ns.tail;for(var as=null;rs!==null;)rs.alternate!==null&&(as=rs),rs=rs.sibling;as===null?ts||ns.tail===null?ns.tail=null:ns.tail.sibling=null:as.sibling=null}}function S$2(ns){var ts=ns.alternate!==null&&ns.alternate.child===ns.child,rs=0,as=0;if(ts)for(var os=ns.child;os!==null;)rs|=os.lanes|os.childLanes,as|=os.subtreeFlags&14680064,as|=os.flags&14680064,os.return=ns,os=os.sibling;else for(os=ns.child;os!==null;)rs|=os.lanes|os.childLanes,as|=os.subtreeFlags,as|=os.flags,os.return=ns,os=os.sibling;return ns.subtreeFlags|=as,ns.childLanes=rs,ts}function Fj(ns,ts,rs){var as=ts.pendingProps;switch(wg(ts),ts.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$2(ts),null;case 1:return Zf(ts.type)&&$f(),S$2(ts),null;case 3:return as=ts.stateNode,Jh(),E$2(Wf),E$2(H$2),Oh(),as.pendingContext&&(as.context=as.pendingContext,as.pendingContext=null),(ns===null||ns.child===null)&&(Gg(ts)?ts.flags|=4:ns===null||ns.memoizedState.isDehydrated&&!(ts.flags&256)||(ts.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(ns,ts),S$2(ts),null;case 5:Lh(ts);var os=Hh(Gh.current);if(rs=ts.type,ns!==null&&ts.stateNode!=null)Cj(ns,ts,rs,as,os),ns.ref!==ts.ref&&(ts.flags|=512,ts.flags|=2097152);else{if(!as){if(ts.stateNode===null)throw Error(p$2(166));return S$2(ts),null}if(ns=Hh(Eh.current),Gg(ts)){as=ts.stateNode,rs=ts.type;var is=ts.memoizedProps;switch(as[Of]=ts,as[Pf]=is,ns=(ts.mode&1)!==0,rs){case"dialog":D$2("cancel",as),D$2("close",as);break;case"iframe":case"object":case"embed":D$2("load",as);break;case"video":case"audio":for(os=0;os<lf.length;os++)D$2(lf[os],as);break;case"source":D$2("error",as);break;case"img":case"image":case"link":D$2("error",as),D$2("load",as);break;case"details":D$2("toggle",as);break;case"input":Za$1(as,is),D$2("invalid",as);break;case"select":as._wrapperState={wasMultiple:!!is.multiple},D$2("invalid",as);break;case"textarea":hb(as,is),D$2("invalid",as)}ub(rs,is),os=null;for(var us in is)if(is.hasOwnProperty(us)){var ls=is[us];us==="children"?typeof ls=="string"?as.textContent!==ls&&(is.suppressHydrationWarning!==!0&&Af(as.textContent,ls,ns),os=["children",ls]):typeof ls=="number"&&as.textContent!==""+ls&&(is.suppressHydrationWarning!==!0&&Af(as.textContent,ls,ns),os=["children",""+ls]):ea$1.hasOwnProperty(us)&&ls!=null&&us==="onScroll"&&D$2("scroll",as)}switch(rs){case"input":Va$1(as),db(as,is,!0);break;case"textarea":Va$1(as),jb(as);break;case"select":case"option":break;default:typeof is.onClick=="function"&&(as.onclick=Bf)}as=os,ts.updateQueue=as,as!==null&&(ts.flags|=4)}else{us=os.nodeType===9?os:os.ownerDocument,ns==="http://www.w3.org/1999/xhtml"&&(ns=kb(rs)),ns==="http://www.w3.org/1999/xhtml"?rs==="script"?(ns=us.createElement("div"),ns.innerHTML="<script><\/script>",ns=ns.removeChild(ns.firstChild)):typeof as.is=="string"?ns=us.createElement(rs,{is:as.is}):(ns=us.createElement(rs),rs==="select"&&(us=ns,as.multiple?us.multiple=!0:as.size&&(us.size=as.size))):ns=us.createElementNS(ns,rs),ns[Of]=ts,ns[Pf]=as,Aj(ns,ts,!1,!1),ts.stateNode=ns;e:{switch(us=vb(rs,as),rs){case"dialog":D$2("cancel",ns),D$2("close",ns),os=as;break;case"iframe":case"object":case"embed":D$2("load",ns),os=as;break;case"video":case"audio":for(os=0;os<lf.length;os++)D$2(lf[os],ns);os=as;break;case"source":D$2("error",ns),os=as;break;case"img":case"image":case"link":D$2("error",ns),D$2("load",ns),os=as;break;case"details":D$2("toggle",ns),os=as;break;case"input":Za$1(ns,as),os=Ya$1(ns,as),D$2("invalid",ns);break;case"option":os=as;break;case"select":ns._wrapperState={wasMultiple:!!as.multiple},os=A$2({},as,{value:void 0}),D$2("invalid",ns);break;case"textarea":hb(ns,as),os=gb(ns,as),D$2("invalid",ns);break;default:os=as}ub(rs,os),ls=os;for(is in ls)if(ls.hasOwnProperty(is)){var fs=ls[is];is==="style"?sb(ns,fs):is==="dangerouslySetInnerHTML"?(fs=fs?fs.__html:void 0,fs!=null&&nb(ns,fs)):is==="children"?typeof fs=="string"?(rs!=="textarea"||fs!=="")&&ob(ns,fs):typeof fs=="number"&&ob(ns,""+fs):is!=="suppressContentEditableWarning"&&is!=="suppressHydrationWarning"&&is!=="autoFocus"&&(ea$1.hasOwnProperty(is)?fs!=null&&is==="onScroll"&&D$2("scroll",ns):fs!=null&&ta$1(ns,is,fs,us))}switch(rs){case"input":Va$1(ns),db(ns,as,!1);break;case"textarea":Va$1(ns),jb(ns);break;case"option":as.value!=null&&ns.setAttribute("value",""+Sa$1(as.value));break;case"select":ns.multiple=!!as.multiple,is=as.value,is!=null?fb(ns,!!as.multiple,is,!1):as.defaultValue!=null&&fb(ns,!!as.multiple,as.defaultValue,!0);break;default:typeof os.onClick=="function"&&(ns.onclick=Bf)}switch(rs){case"button":case"input":case"select":case"textarea":as=!!as.autoFocus;break e;case"img":as=!0;break e;default:as=!1}}as&&(ts.flags|=4)}ts.ref!==null&&(ts.flags|=512,ts.flags|=2097152)}return S$2(ts),null;case 6:if(ns&&ts.stateNode!=null)Dj(ns,ts,ns.memoizedProps,as);else{if(typeof as!="string"&&ts.stateNode===null)throw Error(p$2(166));if(rs=Hh(Gh.current),Hh(Eh.current),Gg(ts)){if(as=ts.stateNode,rs=ts.memoizedProps,as[Of]=ts,(is=as.nodeValue!==rs)&&(ns=xg,ns!==null))switch(ns.tag){case 3:Af(as.nodeValue,rs,(ns.mode&1)!==0);break;case 5:ns.memoizedProps.suppressHydrationWarning!==!0&&Af(as.nodeValue,rs,(ns.mode&1)!==0)}is&&(ts.flags|=4)}else as=(rs.nodeType===9?rs:rs.ownerDocument).createTextNode(as),as[Of]=ts,ts.stateNode=as}return S$2(ts),null;case 13:if(E$2(M$2),as=ts.memoizedState,ns===null||ns.memoizedState!==null&&ns.memoizedState.dehydrated!==null){if(I$2&&yg!==null&&ts.mode&1&&!(ts.flags&128))Hg(),Ig(),ts.flags|=98560,is=!1;else if(is=Gg(ts),as!==null&&as.dehydrated!==null){if(ns===null){if(!is)throw Error(p$2(318));if(is=ts.memoizedState,is=is!==null?is.dehydrated:null,!is)throw Error(p$2(317));is[Of]=ts}else Ig(),!(ts.flags&128)&&(ts.memoizedState=null),ts.flags|=4;S$2(ts),is=!1}else zg!==null&&(Gj(zg),zg=null),is=!0;if(!is)return ts.flags&65536?ts:null}return ts.flags&128?(ts.lanes=rs,ts):(as=as!==null,as!==(ns!==null&&ns.memoizedState!==null)&&as&&(ts.child.flags|=8192,ts.mode&1&&(ns===null||M$2.current&1?T$3===0&&(T$3=3):uj())),ts.updateQueue!==null&&(ts.flags|=4),S$2(ts),null);case 4:return Jh(),Bj(ns,ts),ns===null&&sf(ts.stateNode.containerInfo),S$2(ts),null;case 10:return Rg(ts.type._context),S$2(ts),null;case 17:return Zf(ts.type)&&$f(),S$2(ts),null;case 19:if(E$2(M$2),is=ts.memoizedState,is===null)return S$2(ts),null;if(as=(ts.flags&128)!==0,us=is.rendering,us===null)if(as)Ej(is,!1);else{if(T$3!==0||ns!==null&&ns.flags&128)for(ns=ts.child;ns!==null;){if(us=Mh(ns),us!==null){for(ts.flags|=128,Ej(is,!1),as=us.updateQueue,as!==null&&(ts.updateQueue=as,ts.flags|=4),ts.subtreeFlags=0,as=rs,rs=ts.child;rs!==null;)is=rs,ns=as,is.flags&=14680066,us=is.alternate,us===null?(is.childLanes=0,is.lanes=ns,is.child=null,is.subtreeFlags=0,is.memoizedProps=null,is.memoizedState=null,is.updateQueue=null,is.dependencies=null,is.stateNode=null):(is.childLanes=us.childLanes,is.lanes=us.lanes,is.child=us.child,is.subtreeFlags=0,is.deletions=null,is.memoizedProps=us.memoizedProps,is.memoizedState=us.memoizedState,is.updateQueue=us.updateQueue,is.type=us.type,ns=us.dependencies,is.dependencies=ns===null?null:{lanes:ns.lanes,firstContext:ns.firstContext}),rs=rs.sibling;return G$2(M$2,M$2.current&1|2),ts.child}ns=ns.sibling}is.tail!==null&&B$2()>Hj&&(ts.flags|=128,as=!0,Ej(is,!1),ts.lanes=4194304)}else{if(!as)if(ns=Mh(us),ns!==null){if(ts.flags|=128,as=!0,rs=ns.updateQueue,rs!==null&&(ts.updateQueue=rs,ts.flags|=4),Ej(is,!0),is.tail===null&&is.tailMode==="hidden"&&!us.alternate&&!I$2)return S$2(ts),null}else 2*B$2()-is.renderingStartTime>Hj&&rs!==1073741824&&(ts.flags|=128,as=!0,Ej(is,!1),ts.lanes=4194304);is.isBackwards?(us.sibling=ts.child,ts.child=us):(rs=is.last,rs!==null?rs.sibling=us:ts.child=us,is.last=us)}return is.tail!==null?(ts=is.tail,is.rendering=ts,is.tail=ts.sibling,is.renderingStartTime=B$2(),ts.sibling=null,rs=M$2.current,G$2(M$2,as?rs&1|2:rs&1),ts):(S$2(ts),null);case 22:case 23:return Ij(),as=ts.memoizedState!==null,ns!==null&&ns.memoizedState!==null!==as&&(ts.flags|=8192),as&&ts.mode&1?gj&1073741824&&(S$2(ts),ts.subtreeFlags&6&&(ts.flags|=8192)):S$2(ts),null;case 24:return null;case 25:return null}throw Error(p$2(156,ts.tag))}function Jj(ns,ts){switch(wg(ts),ts.tag){case 1:return Zf(ts.type)&&$f(),ns=ts.flags,ns&65536?(ts.flags=ns&-65537|128,ts):null;case 3:return Jh(),E$2(Wf),E$2(H$2),Oh(),ns=ts.flags,ns&65536&&!(ns&128)?(ts.flags=ns&-65537|128,ts):null;case 5:return Lh(ts),null;case 13:if(E$2(M$2),ns=ts.memoizedState,ns!==null&&ns.dehydrated!==null){if(ts.alternate===null)throw Error(p$2(340));Ig()}return ns=ts.flags,ns&65536?(ts.flags=ns&-65537|128,ts):null;case 19:return E$2(M$2),null;case 4:return Jh(),null;case 10:return Rg(ts.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$2=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Mj(ns,ts){var rs=ns.ref;if(rs!==null)if(typeof rs=="function")try{rs(null)}catch(as){W$2(ns,ts,as)}else rs.current=null}function Nj(ns,ts,rs){try{rs()}catch(as){W$2(ns,ts,as)}}var Oj=!1;function Pj(ns,ts){if(Cf=dd,ns=Me$1(),Ne$1(ns)){if("selectionStart"in ns)var rs={start:ns.selectionStart,end:ns.selectionEnd};else e:{rs=(rs=ns.ownerDocument)&&rs.defaultView||window;var as=rs.getSelection&&rs.getSelection();if(as&&as.rangeCount!==0){rs=as.anchorNode;var os=as.anchorOffset,is=as.focusNode;as=as.focusOffset;try{rs.nodeType,is.nodeType}catch{rs=null;break e}var us=0,ls=-1,fs=-1,hs=0,vs=0,gs=ns,ys=null;t:for(;;){for(var xs;gs!==rs||os!==0&&gs.nodeType!==3||(ls=us+os),gs!==is||as!==0&&gs.nodeType!==3||(fs=us+as),gs.nodeType===3&&(us+=gs.nodeValue.length),(xs=gs.firstChild)!==null;)ys=gs,gs=xs;for(;;){if(gs===ns)break t;if(ys===rs&&++hs===os&&(ls=us),ys===is&&++vs===as&&(fs=us),(xs=gs.nextSibling)!==null)break;gs=ys,ys=gs.parentNode}gs=xs}rs=ls===-1||fs===-1?null:{start:ls,end:fs}}else rs=null}rs=rs||{start:0,end:0}}else rs=null;for(Df={focusedElem:ns,selectionRange:rs},dd=!1,V$2=ts;V$2!==null;)if(ts=V$2,ns=ts.child,(ts.subtreeFlags&1028)!==0&&ns!==null)ns.return=ts,V$2=ns;else for(;V$2!==null;){ts=V$2;try{var ms=ts.alternate;if(ts.flags&1024)switch(ts.tag){case 0:case 11:case 15:break;case 1:if(ms!==null){var Ss=ms.memoizedProps,Ms=ms.memoizedState,$s=ts.stateNode,bs=$s.getSnapshotBeforeUpdate(ts.elementType===ts.type?Ss:Lg(ts.type,Ss),Ms);$s.__reactInternalSnapshotBeforeUpdate=bs}break;case 3:var Cs=ts.stateNode.containerInfo;Cs.nodeType===1?Cs.textContent="":Cs.nodeType===9&&Cs.documentElement&&Cs.removeChild(Cs.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(As){W$2(ts,ts.return,As)}if(ns=ts.sibling,ns!==null){ns.return=ts.return,V$2=ns;break}V$2=ts.return}return ms=Oj,Oj=!1,ms}function Qj(ns,ts,rs){var as=ts.updateQueue;if(as=as!==null?as.lastEffect:null,as!==null){var os=as=as.next;do{if((os.tag&ns)===ns){var is=os.destroy;os.destroy=void 0,is!==void 0&&Nj(ts,rs,is)}os=os.next}while(os!==as)}}function Rj(ns,ts){if(ts=ts.updateQueue,ts=ts!==null?ts.lastEffect:null,ts!==null){var rs=ts=ts.next;do{if((rs.tag&ns)===ns){var as=rs.create;rs.destroy=as()}rs=rs.next}while(rs!==ts)}}function Sj(ns){var ts=ns.ref;if(ts!==null){var rs=ns.stateNode;switch(ns.tag){case 5:ns=rs;break;default:ns=rs}typeof ts=="function"?ts(ns):ts.current=ns}}function Tj(ns){var ts=ns.alternate;ts!==null&&(ns.alternate=null,Tj(ts)),ns.child=null,ns.deletions=null,ns.sibling=null,ns.tag===5&&(ts=ns.stateNode,ts!==null&&(delete ts[Of],delete ts[Pf],delete ts[of],delete ts[Qf],delete ts[Rf])),ns.stateNode=null,ns.return=null,ns.dependencies=null,ns.memoizedProps=null,ns.memoizedState=null,ns.pendingProps=null,ns.stateNode=null,ns.updateQueue=null}function Uj(ns){return ns.tag===5||ns.tag===3||ns.tag===4}function Vj(ns){e:for(;;){for(;ns.sibling===null;){if(ns.return===null||Uj(ns.return))return null;ns=ns.return}for(ns.sibling.return=ns.return,ns=ns.sibling;ns.tag!==5&&ns.tag!==6&&ns.tag!==18;){if(ns.flags&2||ns.child===null||ns.tag===4)continue e;ns.child.return=ns,ns=ns.child}if(!(ns.flags&2))return ns.stateNode}}function Wj(ns,ts,rs){var as=ns.tag;if(as===5||as===6)ns=ns.stateNode,ts?rs.nodeType===8?rs.parentNode.insertBefore(ns,ts):rs.insertBefore(ns,ts):(rs.nodeType===8?(ts=rs.parentNode,ts.insertBefore(ns,rs)):(ts=rs,ts.appendChild(ns)),rs=rs._reactRootContainer,rs!=null||ts.onclick!==null||(ts.onclick=Bf));else if(as!==4&&(ns=ns.child,ns!==null))for(Wj(ns,ts,rs),ns=ns.sibling;ns!==null;)Wj(ns,ts,rs),ns=ns.sibling}function Xj(ns,ts,rs){var as=ns.tag;if(as===5||as===6)ns=ns.stateNode,ts?rs.insertBefore(ns,ts):rs.appendChild(ns);else if(as!==4&&(ns=ns.child,ns!==null))for(Xj(ns,ts,rs),ns=ns.sibling;ns!==null;)Xj(ns,ts,rs),ns=ns.sibling}var X$2=null,Yj=!1;function Zj(ns,ts,rs){for(rs=rs.child;rs!==null;)ak(ns,ts,rs),rs=rs.sibling}function ak(ns,ts,rs){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,rs)}catch{}switch(rs.tag){case 5:U$2||Mj(rs,ts);case 6:var as=X$2,os=Yj;X$2=null,Zj(ns,ts,rs),X$2=as,Yj=os,X$2!==null&&(Yj?(ns=X$2,rs=rs.stateNode,ns.nodeType===8?ns.parentNode.removeChild(rs):ns.removeChild(rs)):X$2.removeChild(rs.stateNode));break;case 18:X$2!==null&&(Yj?(ns=X$2,rs=rs.stateNode,ns.nodeType===8?Kf(ns.parentNode,rs):ns.nodeType===1&&Kf(ns,rs),bd(ns)):Kf(X$2,rs.stateNode));break;case 4:as=X$2,os=Yj,X$2=rs.stateNode.containerInfo,Yj=!0,Zj(ns,ts,rs),X$2=as,Yj=os;break;case 0:case 11:case 14:case 15:if(!U$2&&(as=rs.updateQueue,as!==null&&(as=as.lastEffect,as!==null))){os=as=as.next;do{var is=os,us=is.destroy;is=is.tag,us!==void 0&&(is&2||is&4)&&Nj(rs,ts,us),os=os.next}while(os!==as)}Zj(ns,ts,rs);break;case 1:if(!U$2&&(Mj(rs,ts),as=rs.stateNode,typeof as.componentWillUnmount=="function"))try{as.props=rs.memoizedProps,as.state=rs.memoizedState,as.componentWillUnmount()}catch(ls){W$2(rs,ts,ls)}Zj(ns,ts,rs);break;case 21:Zj(ns,ts,rs);break;case 22:rs.mode&1?(U$2=(as=U$2)||rs.memoizedState!==null,Zj(ns,ts,rs),U$2=as):Zj(ns,ts,rs);break;default:Zj(ns,ts,rs)}}function bk$1(ns){var ts=ns.updateQueue;if(ts!==null){ns.updateQueue=null;var rs=ns.stateNode;rs===null&&(rs=ns.stateNode=new Lj),ts.forEach(function(as){var os=ck.bind(null,ns,as);rs.has(as)||(rs.add(as),as.then(os,os))})}}function dk(ns,ts){var rs=ts.deletions;if(rs!==null)for(var as=0;as<rs.length;as++){var os=rs[as];try{var is=ns,us=ts,ls=us;e:for(;ls!==null;){switch(ls.tag){case 5:X$2=ls.stateNode,Yj=!1;break e;case 3:X$2=ls.stateNode.containerInfo,Yj=!0;break e;case 4:X$2=ls.stateNode.containerInfo,Yj=!0;break e}ls=ls.return}if(X$2===null)throw Error(p$2(160));ak(is,us,os),X$2=null,Yj=!1;var fs=os.alternate;fs!==null&&(fs.return=null),os.return=null}catch(hs){W$2(os,ts,hs)}}if(ts.subtreeFlags&12854)for(ts=ts.child;ts!==null;)ek(ts,ns),ts=ts.sibling}function ek(ns,ts){var rs=ns.alternate,as=ns.flags;switch(ns.tag){case 0:case 11:case 14:case 15:if(dk(ts,ns),fk(ns),as&4){try{Qj(3,ns,ns.return),Rj(3,ns)}catch(Ss){W$2(ns,ns.return,Ss)}try{Qj(5,ns,ns.return)}catch(Ss){W$2(ns,ns.return,Ss)}}break;case 1:dk(ts,ns),fk(ns),as&512&&rs!==null&&Mj(rs,rs.return);break;case 5:if(dk(ts,ns),fk(ns),as&512&&rs!==null&&Mj(rs,rs.return),ns.flags&32){var os=ns.stateNode;try{ob(os,"")}catch(Ss){W$2(ns,ns.return,Ss)}}if(as&4&&(os=ns.stateNode,os!=null)){var is=ns.memoizedProps,us=rs!==null?rs.memoizedProps:is,ls=ns.type,fs=ns.updateQueue;if(ns.updateQueue=null,fs!==null)try{ls==="input"&&is.type==="radio"&&is.name!=null&&ab(os,is),vb(ls,us);var hs=vb(ls,is);for(us=0;us<fs.length;us+=2){var vs=fs[us],gs=fs[us+1];vs==="style"?sb(os,gs):vs==="dangerouslySetInnerHTML"?nb(os,gs):vs==="children"?ob(os,gs):ta$1(os,vs,gs,hs)}switch(ls){case"input":bb(os,is);break;case"textarea":ib(os,is);break;case"select":var ys=os._wrapperState.wasMultiple;os._wrapperState.wasMultiple=!!is.multiple;var xs=is.value;xs!=null?fb(os,!!is.multiple,xs,!1):ys!==!!is.multiple&&(is.defaultValue!=null?fb(os,!!is.multiple,is.defaultValue,!0):fb(os,!!is.multiple,is.multiple?[]:"",!1))}os[Pf]=is}catch(Ss){W$2(ns,ns.return,Ss)}}break;case 6:if(dk(ts,ns),fk(ns),as&4){if(ns.stateNode===null)throw Error(p$2(162));os=ns.stateNode,is=ns.memoizedProps;try{os.nodeValue=is}catch(Ss){W$2(ns,ns.return,Ss)}}break;case 3:if(dk(ts,ns),fk(ns),as&4&&rs!==null&&rs.memoizedState.isDehydrated)try{bd(ts.containerInfo)}catch(Ss){W$2(ns,ns.return,Ss)}break;case 4:dk(ts,ns),fk(ns);break;case 13:dk(ts,ns),fk(ns),os=ns.child,os.flags&8192&&(is=os.memoizedState!==null,os.stateNode.isHidden=is,!is||os.alternate!==null&&os.alternate.memoizedState!==null||(gk=B$2())),as&4&&bk$1(ns);break;case 22:if(vs=rs!==null&&rs.memoizedState!==null,ns.mode&1?(U$2=(hs=U$2)||vs,dk(ts,ns),U$2=hs):dk(ts,ns),fk(ns),as&8192){if(hs=ns.memoizedState!==null,(ns.stateNode.isHidden=hs)&&!vs&&ns.mode&1)for(V$2=ns,vs=ns.child;vs!==null;){for(gs=V$2=vs;V$2!==null;){switch(ys=V$2,xs=ys.child,ys.tag){case 0:case 11:case 14:case 15:Qj(4,ys,ys.return);break;case 1:Mj(ys,ys.return);var ms=ys.stateNode;if(typeof ms.componentWillUnmount=="function"){as=ys,rs=ys.return;try{ts=as,ms.props=ts.memoizedProps,ms.state=ts.memoizedState,ms.componentWillUnmount()}catch(Ss){W$2(as,rs,Ss)}}break;case 5:Mj(ys,ys.return);break;case 22:if(ys.memoizedState!==null){hk(gs);continue}}xs!==null?(xs.return=ys,V$2=xs):hk(gs)}vs=vs.sibling}e:for(vs=null,gs=ns;;){if(gs.tag===5){if(vs===null){vs=gs;try{os=gs.stateNode,hs?(is=os.style,typeof is.setProperty=="function"?is.setProperty("display","none","important"):is.display="none"):(ls=gs.stateNode,fs=gs.memoizedProps.style,us=fs!=null&&fs.hasOwnProperty("display")?fs.display:null,ls.style.display=rb("display",us))}catch(Ss){W$2(ns,ns.return,Ss)}}}else if(gs.tag===6){if(vs===null)try{gs.stateNode.nodeValue=hs?"":gs.memoizedProps}catch(Ss){W$2(ns,ns.return,Ss)}}else if((gs.tag!==22&&gs.tag!==23||gs.memoizedState===null||gs===ns)&&gs.child!==null){gs.child.return=gs,gs=gs.child;continue}if(gs===ns)break e;for(;gs.sibling===null;){if(gs.return===null||gs.return===ns)break e;vs===gs&&(vs=null),gs=gs.return}vs===gs&&(vs=null),gs.sibling.return=gs.return,gs=gs.sibling}}break;case 19:dk(ts,ns),fk(ns),as&4&&bk$1(ns);break;case 21:break;default:dk(ts,ns),fk(ns)}}function fk(ns){var ts=ns.flags;if(ts&2){try{e:{for(var rs=ns.return;rs!==null;){if(Uj(rs)){var as=rs;break e}rs=rs.return}throw Error(p$2(160))}switch(as.tag){case 5:var os=as.stateNode;as.flags&32&&(ob(os,""),as.flags&=-33);var is=Vj(ns);Xj(ns,is,os);break;case 3:case 4:var us=as.stateNode.containerInfo,ls=Vj(ns);Wj(ns,ls,us);break;default:throw Error(p$2(161))}}catch(fs){W$2(ns,ns.return,fs)}ns.flags&=-3}ts&4096&&(ns.flags&=-4097)}function ik(ns,ts,rs){V$2=ns,jk(ns)}function jk(ns,ts,rs){for(var as=(ns.mode&1)!==0;V$2!==null;){var os=V$2,is=os.child;if(os.tag===22&&as){var us=os.memoizedState!==null||Kj;if(!us){var ls=os.alternate,fs=ls!==null&&ls.memoizedState!==null||U$2;ls=Kj;var hs=U$2;if(Kj=us,(U$2=fs)&&!hs)for(V$2=os;V$2!==null;)us=V$2,fs=us.child,us.tag===22&&us.memoizedState!==null?kk(os):fs!==null?(fs.return=us,V$2=fs):kk(os);for(;is!==null;)V$2=is,jk(is),is=is.sibling;V$2=os,Kj=ls,U$2=hs}lk(ns)}else os.subtreeFlags&8772&&is!==null?(is.return=os,V$2=is):lk(ns)}}function lk(ns){for(;V$2!==null;){var ts=V$2;if(ts.flags&8772){var rs=ts.alternate;try{if(ts.flags&8772)switch(ts.tag){case 0:case 11:case 15:U$2||Rj(5,ts);break;case 1:var as=ts.stateNode;if(ts.flags&4&&!U$2)if(rs===null)as.componentDidMount();else{var os=ts.elementType===ts.type?rs.memoizedProps:Lg(ts.type,rs.memoizedProps);as.componentDidUpdate(os,rs.memoizedState,as.__reactInternalSnapshotBeforeUpdate)}var is=ts.updateQueue;is!==null&&ih(ts,is,as);break;case 3:var us=ts.updateQueue;if(us!==null){if(rs=null,ts.child!==null)switch(ts.child.tag){case 5:rs=ts.child.stateNode;break;case 1:rs=ts.child.stateNode}ih(ts,us,rs)}break;case 5:var ls=ts.stateNode;if(rs===null&&ts.flags&4){rs=ls;var fs=ts.memoizedProps;switch(ts.type){case"button":case"input":case"select":case"textarea":fs.autoFocus&&rs.focus();break;case"img":fs.src&&(rs.src=fs.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(ts.memoizedState===null){var hs=ts.alternate;if(hs!==null){var vs=hs.memoizedState;if(vs!==null){var gs=vs.dehydrated;gs!==null&&bd(gs)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U$2||ts.flags&512&&Sj(ts)}catch(ys){W$2(ts,ts.return,ys)}}if(ts===ns){V$2=null;break}if(rs=ts.sibling,rs!==null){rs.return=ts.return,V$2=rs;break}V$2=ts.return}}function hk(ns){for(;V$2!==null;){var ts=V$2;if(ts===ns){V$2=null;break}var rs=ts.sibling;if(rs!==null){rs.return=ts.return,V$2=rs;break}V$2=ts.return}}function kk(ns){for(;V$2!==null;){var ts=V$2;try{switch(ts.tag){case 0:case 11:case 15:var rs=ts.return;try{Rj(4,ts)}catch(fs){W$2(ts,rs,fs)}break;case 1:var as=ts.stateNode;if(typeof as.componentDidMount=="function"){var os=ts.return;try{as.componentDidMount()}catch(fs){W$2(ts,os,fs)}}var is=ts.return;try{Sj(ts)}catch(fs){W$2(ts,is,fs)}break;case 5:var us=ts.return;try{Sj(ts)}catch(fs){W$2(ts,us,fs)}}}catch(fs){W$2(ts,ts.return,fs)}if(ts===ns){V$2=null;break}var ls=ts.sibling;if(ls!==null){ls.return=ts.return,V$2=ls;break}V$2=ts.return}}var mk=Math.ceil,nk=ua$1.ReactCurrentDispatcher,ok=ua$1.ReactCurrentOwner,pk=ua$1.ReactCurrentBatchConfig,K$2=0,R$3=null,Y$2=null,Z$2=0,gj=0,fj=Uf(0),T$3=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi$1=!1,Qi$1=null,Si$1=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$2(){return K$2&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh(ns){return ns.mode&1?K$2&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(ns=C$2,ns!==0||(ns=window.event,ns=ns===void 0?16:jd(ns.type)),ns):1}function mh(ns,ts,rs,as){if(50<zk)throw zk=0,Ak=null,Error(p$2(185));Ac(ns,rs,as),(!(K$2&2)||ns!==R$3)&&(ns===R$3&&(!(K$2&2)&&(rk|=rs),T$3===4&&Dk(ns,Z$2)),Ek(ns,as),rs===1&&K$2===0&&!(ts.mode&1)&&(Hj=B$2()+500,fg&&jg()))}function Ek(ns,ts){var rs=ns.callbackNode;wc(ns,ts);var as=uc$1(ns,ns===R$3?Z$2:0);if(as===0)rs!==null&&bc(rs),ns.callbackNode=null,ns.callbackPriority=0;else if(ts=as&-as,ns.callbackPriority!==ts){if(rs!=null&&bc(rs),ts===1)ns.tag===0?ig(Fk.bind(null,ns)):hg(Fk.bind(null,ns)),Jf(function(){!(K$2&6)&&jg()}),rs=null;else{switch(Dc(as)){case 1:rs=fc;break;case 4:rs=gc;break;case 16:rs=hc;break;case 536870912:rs=jc;break;default:rs=hc}rs=Gk(rs,Hk.bind(null,ns))}ns.callbackPriority=ts,ns.callbackNode=rs}}function Hk(ns,ts){if(Bk=-1,Ck=0,K$2&6)throw Error(p$2(327));var rs=ns.callbackNode;if(Ik()&&ns.callbackNode!==rs)return null;var as=uc$1(ns,ns===R$3?Z$2:0);if(as===0)return null;if(as&30||as&ns.expiredLanes||ts)ts=Jk(ns,as);else{ts=as;var os=K$2;K$2|=2;var is=Kk();(R$3!==ns||Z$2!==ts)&&(vk=null,Hj=B$2()+500,Lk(ns,ts));do try{Mk();break}catch(ls){Nk(ns,ls)}while(!0);Qg(),nk.current=is,K$2=os,Y$2!==null?ts=0:(R$3=null,Z$2=0,ts=T$3)}if(ts!==0){if(ts===2&&(os=xc(ns),os!==0&&(as=os,ts=Ok(ns,os))),ts===1)throw rs=qk,Lk(ns,0),Dk(ns,as),Ek(ns,B$2()),rs;if(ts===6)Dk(ns,as);else{if(os=ns.current.alternate,!(as&30)&&!Pk(os)&&(ts=Jk(ns,as),ts===2&&(is=xc(ns),is!==0&&(as=is,ts=Ok(ns,is))),ts===1))throw rs=qk,Lk(ns,0),Dk(ns,as),Ek(ns,B$2()),rs;switch(ns.finishedWork=os,ns.finishedLanes=as,ts){case 0:case 1:throw Error(p$2(345));case 2:Qk(ns,uk,vk);break;case 3:if(Dk(ns,as),(as&130023424)===as&&(ts=gk+500-B$2(),10<ts)){if(uc$1(ns,0)!==0)break;if(os=ns.suspendedLanes,(os&as)!==as){L$2(),ns.pingedLanes|=ns.suspendedLanes&os;break}ns.timeoutHandle=Ff(Qk.bind(null,ns,uk,vk),ts);break}Qk(ns,uk,vk);break;case 4:if(Dk(ns,as),(as&4194240)===as)break;for(ts=ns.eventTimes,os=-1;0<as;){var us=31-oc$1(as);is=1<<us,us=ts[us],us>os&&(os=us),as&=~is}if(as=os,as=B$2()-as,as=(120>as?120:480>as?480:1080>as?1080:1920>as?1920:3e3>as?3e3:4320>as?4320:1960*mk(as/1960))-as,10<as){ns.timeoutHandle=Ff(Qk.bind(null,ns,uk,vk),as);break}Qk(ns,uk,vk);break;case 5:Qk(ns,uk,vk);break;default:throw Error(p$2(329))}}}return Ek(ns,B$2()),ns.callbackNode===rs?Hk.bind(null,ns):null}function Ok(ns,ts){var rs=tk;return ns.current.memoizedState.isDehydrated&&(Lk(ns,ts).flags|=256),ns=Jk(ns,ts),ns!==2&&(ts=uk,uk=rs,ts!==null&&Gj(ts)),ns}function Gj(ns){uk===null?uk=ns:uk.push.apply(uk,ns)}function Pk(ns){for(var ts=ns;;){if(ts.flags&16384){var rs=ts.updateQueue;if(rs!==null&&(rs=rs.stores,rs!==null))for(var as=0;as<rs.length;as++){var os=rs[as],is=os.getSnapshot;os=os.value;try{if(!He$1(is(),os))return!1}catch{return!1}}}if(rs=ts.child,ts.subtreeFlags&16384&&rs!==null)rs.return=ts,ts=rs;else{if(ts===ns)break;for(;ts.sibling===null;){if(ts.return===null||ts.return===ns)return!0;ts=ts.return}ts.sibling.return=ts.return,ts=ts.sibling}}return!0}function Dk(ns,ts){for(ts&=~sk,ts&=~rk,ns.suspendedLanes|=ts,ns.pingedLanes&=~ts,ns=ns.expirationTimes;0<ts;){var rs=31-oc$1(ts),as=1<<rs;ns[rs]=-1,ts&=~as}}function Fk(ns){if(K$2&6)throw Error(p$2(327));Ik();var ts=uc$1(ns,0);if(!(ts&1))return Ek(ns,B$2()),null;var rs=Jk(ns,ts);if(ns.tag!==0&&rs===2){var as=xc(ns);as!==0&&(ts=as,rs=Ok(ns,as))}if(rs===1)throw rs=qk,Lk(ns,0),Dk(ns,ts),Ek(ns,B$2()),rs;if(rs===6)throw Error(p$2(345));return ns.finishedWork=ns.current.alternate,ns.finishedLanes=ts,Qk(ns,uk,vk),Ek(ns,B$2()),null}function Rk(ns,ts){var rs=K$2;K$2|=1;try{return ns(ts)}finally{K$2=rs,K$2===0&&(Hj=B$2()+500,fg&&jg())}}function Sk(ns){xk!==null&&xk.tag===0&&!(K$2&6)&&Ik();var ts=K$2;K$2|=1;var rs=pk.transition,as=C$2;try{if(pk.transition=null,C$2=1,ns)return ns()}finally{C$2=as,pk.transition=rs,K$2=ts,!(K$2&6)&&jg()}}function Ij(){gj=fj.current,E$2(fj)}function Lk(ns,ts){ns.finishedWork=null,ns.finishedLanes=0;var rs=ns.timeoutHandle;if(rs!==-1&&(ns.timeoutHandle=-1,Gf(rs)),Y$2!==null)for(rs=Y$2.return;rs!==null;){var as=rs;switch(wg(as),as.tag){case 1:as=as.type.childContextTypes,as!=null&&$f();break;case 3:Jh(),E$2(Wf),E$2(H$2),Oh();break;case 5:Lh(as);break;case 4:Jh();break;case 13:E$2(M$2);break;case 19:E$2(M$2);break;case 10:Rg(as.type._context);break;case 22:case 23:Ij()}rs=rs.return}if(R$3=ns,Y$2=ns=wh(ns.current,null),Z$2=gj=ts,T$3=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(ts=0;ts<Wg.length;ts++)if(rs=Wg[ts],as=rs.interleaved,as!==null){rs.interleaved=null;var os=as.next,is=rs.pending;if(is!==null){var us=is.next;is.next=os,as.next=us}rs.pending=as}Wg=null}return ns}function Nk(ns,ts){do{var rs=Y$2;try{if(Qg(),Ph.current=ai$1,Sh){for(var as=N$2.memoizedState;as!==null;){var os=as.queue;os!==null&&(os.pending=null),as=as.next}Sh=!1}if(Rh=0,P$2=O$2=N$2=null,Th=!1,Uh=0,ok.current=null,rs===null||rs.return===null){T$3=1,qk=ts,Y$2=null;break}e:{var is=ns,us=rs.return,ls=rs,fs=ts;if(ts=Z$2,ls.flags|=32768,fs!==null&&typeof fs=="object"&&typeof fs.then=="function"){var hs=fs,vs=ls,gs=vs.tag;if(!(vs.mode&1)&&(gs===0||gs===11||gs===15)){var ys=vs.alternate;ys?(vs.updateQueue=ys.updateQueue,vs.memoizedState=ys.memoizedState,vs.lanes=ys.lanes):(vs.updateQueue=null,vs.memoizedState=null)}var xs=Vi$1(us);if(xs!==null){xs.flags&=-257,Wi$1(xs,us,ls,is,ts),xs.mode&1&&Ti$1(is,hs,ts),ts=xs,fs=hs;var ms=ts.updateQueue;if(ms===null){var Ss=new Set;Ss.add(fs),ts.updateQueue=Ss}else ms.add(fs);break e}else{if(!(ts&1)){Ti$1(is,hs,ts),uj();break e}fs=Error(p$2(426))}}else if(I$2&&ls.mode&1){var Ms=Vi$1(us);if(Ms!==null){!(Ms.flags&65536)&&(Ms.flags|=256),Wi$1(Ms,us,ls,is,ts),Jg(Ki$1(fs,ls));break e}}is=fs=Ki$1(fs,ls),T$3!==4&&(T$3=2),tk===null?tk=[is]:tk.push(is),is=us;do{switch(is.tag){case 3:is.flags|=65536,ts&=-ts,is.lanes|=ts;var $s=Oi$1(is,fs,ts);fh(is,$s);break e;case 1:ls=fs;var bs=is.type,Cs=is.stateNode;if(!(is.flags&128)&&(typeof bs.getDerivedStateFromError=="function"||Cs!==null&&typeof Cs.componentDidCatch=="function"&&(Si$1===null||!Si$1.has(Cs)))){is.flags|=65536,ts&=-ts,is.lanes|=ts;var As=Ri$1(is,ls,ts);fh(is,As);break e}}is=is.return}while(is!==null)}Tk(rs)}catch(Is){ts=Is,Y$2===rs&&rs!==null&&(Y$2=rs=rs.return);continue}break}while(!0)}function Kk(){var ns=nk.current;return nk.current=ai$1,ns===null?ai$1:ns}function uj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),R$3===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$3,Z$2)}function Jk(ns,ts){var rs=K$2;K$2|=2;var as=Kk();(R$3!==ns||Z$2!==ts)&&(vk=null,Lk(ns,ts));do try{Uk();break}catch(os){Nk(ns,os)}while(!0);if(Qg(),K$2=rs,nk.current=as,Y$2!==null)throw Error(p$2(261));return R$3=null,Z$2=0,T$3}function Uk(){for(;Y$2!==null;)Vk(Y$2)}function Mk(){for(;Y$2!==null&&!cc$1();)Vk(Y$2)}function Vk(ns){var ts=Wk(ns.alternate,ns,gj);ns.memoizedProps=ns.pendingProps,ts===null?Tk(ns):Y$2=ts,ok.current=null}function Tk(ns){var ts=ns;do{var rs=ts.alternate;if(ns=ts.return,ts.flags&32768){if(rs=Jj(rs,ts),rs!==null){rs.flags&=32767,Y$2=rs;return}if(ns!==null)ns.flags|=32768,ns.subtreeFlags=0,ns.deletions=null;else{T$3=6,Y$2=null;return}}else if(rs=Fj(rs,ts,gj),rs!==null){Y$2=rs;return}if(ts=ts.sibling,ts!==null){Y$2=ts;return}Y$2=ts=ns}while(ts!==null);T$3===0&&(T$3=5)}function Qk(ns,ts,rs){var as=C$2,os=pk.transition;try{pk.transition=null,C$2=1,Xk(ns,ts,rs,as)}finally{pk.transition=os,C$2=as}return null}function Xk(ns,ts,rs,as){do Ik();while(xk!==null);if(K$2&6)throw Error(p$2(327));rs=ns.finishedWork;var os=ns.finishedLanes;if(rs===null)return null;if(ns.finishedWork=null,ns.finishedLanes=0,rs===ns.current)throw Error(p$2(177));ns.callbackNode=null,ns.callbackPriority=0;var is=rs.lanes|rs.childLanes;if(Bc(ns,is),ns===R$3&&(Y$2=R$3=null,Z$2=0),!(rs.subtreeFlags&2064)&&!(rs.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),is=(rs.flags&15990)!==0,rs.subtreeFlags&15990||is){is=pk.transition,pk.transition=null;var us=C$2;C$2=1;var ls=K$2;K$2|=4,ok.current=null,Pj(ns,rs),ek(rs,ns),Oe$1(Df),dd=!!Cf,Df=Cf=null,ns.current=rs,ik(rs),dc(),K$2=ls,C$2=us,pk.transition=is}else ns.current=rs;if(wk&&(wk=!1,xk=ns,yk=os),is=ns.pendingLanes,is===0&&(Si$1=null),mc(rs.stateNode),Ek(ns,B$2()),ts!==null)for(as=ns.onRecoverableError,rs=0;rs<ts.length;rs++)os=ts[rs],as(os.value,{componentStack:os.stack,digest:os.digest});if(Pi$1)throw Pi$1=!1,ns=Qi$1,Qi$1=null,ns;return yk&1&&ns.tag!==0&&Ik(),is=ns.pendingLanes,is&1?ns===Ak?zk++:(zk=0,Ak=ns):zk=0,jg(),null}function Ik(){if(xk!==null){var ns=Dc(yk),ts=pk.transition,rs=C$2;try{if(pk.transition=null,C$2=16>ns?16:ns,xk===null)var as=!1;else{if(ns=xk,xk=null,yk=0,K$2&6)throw Error(p$2(331));var os=K$2;for(K$2|=4,V$2=ns.current;V$2!==null;){var is=V$2,us=is.child;if(V$2.flags&16){var ls=is.deletions;if(ls!==null){for(var fs=0;fs<ls.length;fs++){var hs=ls[fs];for(V$2=hs;V$2!==null;){var vs=V$2;switch(vs.tag){case 0:case 11:case 15:Qj(8,vs,is)}var gs=vs.child;if(gs!==null)gs.return=vs,V$2=gs;else for(;V$2!==null;){vs=V$2;var ys=vs.sibling,xs=vs.return;if(Tj(vs),vs===hs){V$2=null;break}if(ys!==null){ys.return=xs,V$2=ys;break}V$2=xs}}}var ms=is.alternate;if(ms!==null){var Ss=ms.child;if(Ss!==null){ms.child=null;do{var Ms=Ss.sibling;Ss.sibling=null,Ss=Ms}while(Ss!==null)}}V$2=is}}if(is.subtreeFlags&2064&&us!==null)us.return=is,V$2=us;else e:for(;V$2!==null;){if(is=V$2,is.flags&2048)switch(is.tag){case 0:case 11:case 15:Qj(9,is,is.return)}var $s=is.sibling;if($s!==null){$s.return=is.return,V$2=$s;break e}V$2=is.return}}var bs=ns.current;for(V$2=bs;V$2!==null;){us=V$2;var Cs=us.child;if(us.subtreeFlags&2064&&Cs!==null)Cs.return=us,V$2=Cs;else e:for(us=bs;V$2!==null;){if(ls=V$2,ls.flags&2048)try{switch(ls.tag){case 0:case 11:case 15:Rj(9,ls)}}catch(Is){W$2(ls,ls.return,Is)}if(ls===us){V$2=null;break e}var As=ls.sibling;if(As!==null){As.return=ls.return,V$2=As;break e}V$2=ls.return}}if(K$2=os,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,ns)}catch{}as=!0}return as}finally{C$2=rs,pk.transition=ts}}return!1}function Yk(ns,ts,rs){ts=Ki$1(rs,ts),ts=Oi$1(ns,ts,1),ns=dh(ns,ts,1),ts=L$2(),ns!==null&&(Ac(ns,1,ts),Ek(ns,ts))}function W$2(ns,ts,rs){if(ns.tag===3)Yk(ns,ns,rs);else for(;ts!==null;){if(ts.tag===3){Yk(ts,ns,rs);break}else if(ts.tag===1){var as=ts.stateNode;if(typeof ts.type.getDerivedStateFromError=="function"||typeof as.componentDidCatch=="function"&&(Si$1===null||!Si$1.has(as))){ns=Ki$1(rs,ns),ns=Ri$1(ts,ns,1),ts=dh(ts,ns,1),ns=L$2(),ts!==null&&(Ac(ts,1,ns),Ek(ts,ns));break}}ts=ts.return}}function Ui$1(ns,ts,rs){var as=ns.pingCache;as!==null&&as.delete(ts),ts=L$2(),ns.pingedLanes|=ns.suspendedLanes&rs,R$3===ns&&(Z$2&rs)===rs&&(T$3===4||T$3===3&&(Z$2&130023424)===Z$2&&500>B$2()-gk?Lk(ns,0):sk|=rs),Ek(ns,ts)}function Zk(ns,ts){ts===0&&(ns.mode&1?(ts=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):ts=1);var rs=L$2();ns=Zg(ns,ts),ns!==null&&(Ac(ns,ts,rs),Ek(ns,rs))}function vj(ns){var ts=ns.memoizedState,rs=0;ts!==null&&(rs=ts.retryLane),Zk(ns,rs)}function ck(ns,ts){var rs=0;switch(ns.tag){case 13:var as=ns.stateNode,os=ns.memoizedState;os!==null&&(rs=os.retryLane);break;case 19:as=ns.stateNode;break;default:throw Error(p$2(314))}as!==null&&as.delete(ts),Zk(ns,rs)}var Wk;Wk=function(ns,ts,rs){if(ns!==null)if(ns.memoizedProps!==ts.pendingProps||Wf.current)Ug=!0;else{if(!(ns.lanes&rs)&&!(ts.flags&128))return Ug=!1,zj(ns,ts,rs);Ug=!!(ns.flags&131072)}else Ug=!1,I$2&&ts.flags&1048576&&ug(ts,ng,ts.index);switch(ts.lanes=0,ts.tag){case 2:var as=ts.type;jj(ns,ts),ns=ts.pendingProps;var os=Yf(ts,H$2.current);Tg(ts,rs),os=Xh(null,ts,as,ns,os,rs);var is=bi$1();return ts.flags|=1,typeof os=="object"&&os!==null&&typeof os.render=="function"&&os.$$typeof===void 0?(ts.tag=1,ts.memoizedState=null,ts.updateQueue=null,Zf(as)?(is=!0,cg(ts)):is=!1,ts.memoizedState=os.state!==null&&os.state!==void 0?os.state:null,ah(ts),os.updater=nh,ts.stateNode=os,os._reactInternals=ts,rh(ts,as,ns,rs),ts=kj(null,ts,as,!0,is,rs)):(ts.tag=0,I$2&&is&&vg(ts),Yi$1(null,ts,os,rs),ts=ts.child),ts;case 16:as=ts.elementType;e:{switch(jj(ns,ts),ns=ts.pendingProps,os=as._init,as=os(as._payload),ts.type=as,os=ts.tag=$k(as),ns=Lg(as,ns),os){case 0:ts=dj(null,ts,as,ns,rs);break e;case 1:ts=ij(null,ts,as,ns,rs);break e;case 11:ts=Zi$1(null,ts,as,ns,rs);break e;case 14:ts=aj(null,ts,as,Lg(as.type,ns),rs);break e}throw Error(p$2(306,as,""))}return ts;case 0:return as=ts.type,os=ts.pendingProps,os=ts.elementType===as?os:Lg(as,os),dj(ns,ts,as,os,rs);case 1:return as=ts.type,os=ts.pendingProps,os=ts.elementType===as?os:Lg(as,os),ij(ns,ts,as,os,rs);case 3:e:{if(lj(ts),ns===null)throw Error(p$2(387));as=ts.pendingProps,is=ts.memoizedState,os=is.element,bh(ns,ts),gh(ts,as,null,rs);var us=ts.memoizedState;if(as=us.element,is.isDehydrated)if(is={element:as,isDehydrated:!1,cache:us.cache,pendingSuspenseBoundaries:us.pendingSuspenseBoundaries,transitions:us.transitions},ts.updateQueue.baseState=is,ts.memoizedState=is,ts.flags&256){os=Ki$1(Error(p$2(423)),ts),ts=mj(ns,ts,as,rs,os);break e}else if(as!==os){os=Ki$1(Error(p$2(424)),ts),ts=mj(ns,ts,as,rs,os);break e}else for(yg=Lf(ts.stateNode.containerInfo.firstChild),xg=ts,I$2=!0,zg=null,rs=Ch(ts,null,as,rs),ts.child=rs;rs;)rs.flags=rs.flags&-3|4096,rs=rs.sibling;else{if(Ig(),as===os){ts=$i$1(ns,ts,rs);break e}Yi$1(ns,ts,as,rs)}ts=ts.child}return ts;case 5:return Kh(ts),ns===null&&Eg(ts),as=ts.type,os=ts.pendingProps,is=ns!==null?ns.memoizedProps:null,us=os.children,Ef(as,os)?us=null:is!==null&&Ef(as,is)&&(ts.flags|=32),hj(ns,ts),Yi$1(ns,ts,us,rs),ts.child;case 6:return ns===null&&Eg(ts),null;case 13:return pj(ns,ts,rs);case 4:return Ih(ts,ts.stateNode.containerInfo),as=ts.pendingProps,ns===null?ts.child=Bh(ts,null,as,rs):Yi$1(ns,ts,as,rs),ts.child;case 11:return as=ts.type,os=ts.pendingProps,os=ts.elementType===as?os:Lg(as,os),Zi$1(ns,ts,as,os,rs);case 7:return Yi$1(ns,ts,ts.pendingProps,rs),ts.child;case 8:return Yi$1(ns,ts,ts.pendingProps.children,rs),ts.child;case 12:return Yi$1(ns,ts,ts.pendingProps.children,rs),ts.child;case 10:e:{if(as=ts.type._context,os=ts.pendingProps,is=ts.memoizedProps,us=os.value,G$2(Mg,as._currentValue),as._currentValue=us,is!==null)if(He$1(is.value,us)){if(is.children===os.children&&!Wf.current){ts=$i$1(ns,ts,rs);break e}}else for(is=ts.child,is!==null&&(is.return=ts);is!==null;){var ls=is.dependencies;if(ls!==null){us=is.child;for(var fs=ls.firstContext;fs!==null;){if(fs.context===as){if(is.tag===1){fs=ch(-1,rs&-rs),fs.tag=2;var hs=is.updateQueue;if(hs!==null){hs=hs.shared;var vs=hs.pending;vs===null?fs.next=fs:(fs.next=vs.next,vs.next=fs),hs.pending=fs}}is.lanes|=rs,fs=is.alternate,fs!==null&&(fs.lanes|=rs),Sg(is.return,rs,ts),ls.lanes|=rs;break}fs=fs.next}}else if(is.tag===10)us=is.type===ts.type?null:is.child;else if(is.tag===18){if(us=is.return,us===null)throw Error(p$2(341));us.lanes|=rs,ls=us.alternate,ls!==null&&(ls.lanes|=rs),Sg(us,rs,ts),us=is.sibling}else us=is.child;if(us!==null)us.return=is;else for(us=is;us!==null;){if(us===ts){us=null;break}if(is=us.sibling,is!==null){is.return=us.return,us=is;break}us=us.return}is=us}Yi$1(ns,ts,os.children,rs),ts=ts.child}return ts;case 9:return os=ts.type,as=ts.pendingProps.children,Tg(ts,rs),os=Vg(os),as=as(os),ts.flags|=1,Yi$1(ns,ts,as,rs),ts.child;case 14:return as=ts.type,os=Lg(as,ts.pendingProps),os=Lg(as.type,os),aj(ns,ts,as,os,rs);case 15:return cj(ns,ts,ts.type,ts.pendingProps,rs);case 17:return as=ts.type,os=ts.pendingProps,os=ts.elementType===as?os:Lg(as,os),jj(ns,ts),ts.tag=1,Zf(as)?(ns=!0,cg(ts)):ns=!1,Tg(ts,rs),ph(ts,as,os),rh(ts,as,os,rs),kj(null,ts,as,!0,ns,rs);case 19:return yj(ns,ts,rs);case 22:return ej(ns,ts,rs)}throw Error(p$2(156,ts.tag))};function Gk(ns,ts){return ac$1(ns,ts)}function al(ns,ts,rs,as){this.tag=ns,this.key=rs,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=ts,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=as,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(ns,ts,rs,as){return new al(ns,ts,rs,as)}function bj(ns){return ns=ns.prototype,!(!ns||!ns.isReactComponent)}function $k(ns){if(typeof ns=="function")return bj(ns)?1:0;if(ns!=null){if(ns=ns.$$typeof,ns===Da$1)return 11;if(ns===Ga$1)return 14}return 2}function wh(ns,ts){var rs=ns.alternate;return rs===null?(rs=Bg(ns.tag,ts,ns.key,ns.mode),rs.elementType=ns.elementType,rs.type=ns.type,rs.stateNode=ns.stateNode,rs.alternate=ns,ns.alternate=rs):(rs.pendingProps=ts,rs.type=ns.type,rs.flags=0,rs.subtreeFlags=0,rs.deletions=null),rs.flags=ns.flags&14680064,rs.childLanes=ns.childLanes,rs.lanes=ns.lanes,rs.child=ns.child,rs.memoizedProps=ns.memoizedProps,rs.memoizedState=ns.memoizedState,rs.updateQueue=ns.updateQueue,ts=ns.dependencies,rs.dependencies=ts===null?null:{lanes:ts.lanes,firstContext:ts.firstContext},rs.sibling=ns.sibling,rs.index=ns.index,rs.ref=ns.ref,rs}function yh(ns,ts,rs,as,os,is){var us=2;if(as=ns,typeof ns=="function")bj(ns)&&(us=1);else if(typeof ns=="string")us=5;else e:switch(ns){case ya$1:return Ah(rs.children,os,is,ts);case za$1:us=8,os|=8;break;case Aa$1:return ns=Bg(12,rs,ts,os|2),ns.elementType=Aa$1,ns.lanes=is,ns;case Ea$1:return ns=Bg(13,rs,ts,os),ns.elementType=Ea$1,ns.lanes=is,ns;case Fa$1:return ns=Bg(19,rs,ts,os),ns.elementType=Fa$1,ns.lanes=is,ns;case Ia$1:return qj(rs,os,is,ts);default:if(typeof ns=="object"&&ns!==null)switch(ns.$$typeof){case Ba$1:us=10;break e;case Ca$1:us=9;break e;case Da$1:us=11;break e;case Ga$1:us=14;break e;case Ha$1:us=16,as=null;break e}throw Error(p$2(130,ns==null?ns:typeof ns,""))}return ts=Bg(us,rs,ts,os),ts.elementType=ns,ts.type=as,ts.lanes=is,ts}function Ah(ns,ts,rs,as){return ns=Bg(7,ns,as,ts),ns.lanes=rs,ns}function qj(ns,ts,rs,as){return ns=Bg(22,ns,as,ts),ns.elementType=Ia$1,ns.lanes=rs,ns.stateNode={isHidden:!1},ns}function xh(ns,ts,rs){return ns=Bg(6,ns,null,ts),ns.lanes=rs,ns}function zh(ns,ts,rs){return ts=Bg(4,ns.children!==null?ns.children:[],ns.key,ts),ts.lanes=rs,ts.stateNode={containerInfo:ns.containerInfo,pendingChildren:null,implementation:ns.implementation},ts}function bl(ns,ts,rs,as,os){this.tag=ts,this.containerInfo=ns,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=as,this.onRecoverableError=os,this.mutableSourceEagerHydrationData=null}function cl(ns,ts,rs,as,os,is,us,ls,fs){return ns=new bl(ns,ts,rs,ls,fs),ts===1?(ts=1,is===!0&&(ts|=8)):ts=0,is=Bg(3,null,null,ts),ns.current=is,is.stateNode=ns,is.memoizedState={element:as,isDehydrated:rs,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(is),ns}function dl(ns,ts,rs){var as=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:as==null?null:""+as,children:ns,containerInfo:ts,implementation:rs}}function el(ns){if(!ns)return Vf;ns=ns._reactInternals;e:{if(Vb(ns)!==ns||ns.tag!==1)throw Error(p$2(170));var ts=ns;do{switch(ts.tag){case 3:ts=ts.stateNode.context;break e;case 1:if(Zf(ts.type)){ts=ts.stateNode.__reactInternalMemoizedMergedChildContext;break e}}ts=ts.return}while(ts!==null);throw Error(p$2(171))}if(ns.tag===1){var rs=ns.type;if(Zf(rs))return bg(ns,rs,ts)}return ts}function fl(ns,ts,rs,as,os,is,us,ls,fs){return ns=cl(rs,as,!0,ns,os,is,us,ls,fs),ns.context=el(null),rs=ns.current,as=L$2(),os=lh(rs),is=ch(as,os),is.callback=ts??null,dh(rs,is,os),ns.current.lanes=os,Ac(ns,os,as),Ek(ns,as),ns}function gl$1(ns,ts,rs,as){var os=ts.current,is=L$2(),us=lh(os);return rs=el(rs),ts.context===null?ts.context=rs:ts.pendingContext=rs,ts=ch(is,us),ts.payload={element:ns},as=as===void 0?null:as,as!==null&&(ts.callback=as),ns=dh(os,ts,us),ns!==null&&(mh(ns,os,us,is),eh(ns,os,us)),us}function hl(ns){if(ns=ns.current,!ns.child)return null;switch(ns.child.tag){case 5:return ns.child.stateNode;default:return ns.child.stateNode}}function il(ns,ts){if(ns=ns.memoizedState,ns!==null&&ns.dehydrated!==null){var rs=ns.retryLane;ns.retryLane=rs!==0&&rs<ts?rs:ts}}function jl(ns,ts){il(ns,ts),(ns=ns.alternate)&&il(ns,ts)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(ns){console.error(ns)};function ml(ns){this._internalRoot=ns}nl.prototype.render=ml.prototype.render=function(ns){var ts=this._internalRoot;if(ts===null)throw Error(p$2(409));gl$1(ns,ts,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var ns=this._internalRoot;if(ns!==null){this._internalRoot=null;var ts=ns.containerInfo;Sk(function(){gl$1(null,ns,null,null)}),ts[uf]=null}};function nl(ns){this._internalRoot=ns}nl.prototype.unstable_scheduleHydration=function(ns){if(ns){var ts=Hc();ns={blockedOn:null,target:ns,priority:ts};for(var rs=0;rs<Qc.length&&ts!==0&&ts<Qc[rs].priority;rs++);Qc.splice(rs,0,ns),rs===0&&Vc(ns)}};function ol(ns){return!(!ns||ns.nodeType!==1&&ns.nodeType!==9&&ns.nodeType!==11)}function pl(ns){return!(!ns||ns.nodeType!==1&&ns.nodeType!==9&&ns.nodeType!==11&&(ns.nodeType!==8||ns.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(ns,ts,rs,as,os){if(os){if(typeof as=="function"){var is=as;as=function(){var hs=hl(us);is.call(hs)}}var us=fl(ts,as,ns,0,null,!1,!1,"",ql);return ns._reactRootContainer=us,ns[uf]=us.current,sf(ns.nodeType===8?ns.parentNode:ns),Sk(),us}for(;os=ns.lastChild;)ns.removeChild(os);if(typeof as=="function"){var ls=as;as=function(){var hs=hl(fs);ls.call(hs)}}var fs=cl(ns,0,!1,null,null,!1,!1,"",ql);return ns._reactRootContainer=fs,ns[uf]=fs.current,sf(ns.nodeType===8?ns.parentNode:ns),Sk(function(){gl$1(ts,fs,rs,as)}),fs}function sl(ns,ts,rs,as,os){var is=rs._reactRootContainer;if(is){var us=is;if(typeof os=="function"){var ls=os;os=function(){var fs=hl(us);ls.call(fs)}}gl$1(ts,us,ns,os)}else us=rl(rs,ts,ns,os,as);return hl(us)}Ec=function(ns){switch(ns.tag){case 3:var ts=ns.stateNode;if(ts.current.memoizedState.isDehydrated){var rs=tc$1(ts.pendingLanes);rs!==0&&(Cc(ts,rs|1),Ek(ts,B$2()),!(K$2&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var as=Zg(ns,1);if(as!==null){var os=L$2();mh(as,ns,1,os)}}),jl(ns,1)}};Fc=function(ns){if(ns.tag===13){var ts=Zg(ns,134217728);if(ts!==null){var rs=L$2();mh(ts,ns,134217728,rs)}jl(ns,134217728)}};Gc=function(ns){if(ns.tag===13){var ts=lh(ns),rs=Zg(ns,ts);if(rs!==null){var as=L$2();mh(rs,ns,ts,as)}jl(ns,ts)}};Hc=function(){return C$2};Ic=function(ns,ts){var rs=C$2;try{return C$2=ns,ts()}finally{C$2=rs}};yb=function(ns,ts,rs){switch(ts){case"input":if(bb(ns,rs),ts=rs.name,rs.type==="radio"&&ts!=null){for(rs=ns;rs.parentNode;)rs=rs.parentNode;for(rs=rs.querySelectorAll("input[name="+JSON.stringify(""+ts)+'][type="radio"]'),ts=0;ts<rs.length;ts++){var as=rs[ts];if(as!==ns&&as.form===ns.form){var os=Db(as);if(!os)throw Error(p$2(90));Wa$1(as),bb(as,os)}}}break;case"textarea":ib(ns,rs);break;case"select":ts=rs.value,ts!=null&&fb(ns,!!rs.multiple,ts,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(ns){return ns=Zb(ns),ns===null?null:ns.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(ns,ts){var rs=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(ts))throw Error(p$2(200));return dl(ns,ts,null,rs)};reactDom_production_min.createRoot=function(ns,ts){if(!ol(ns))throw Error(p$2(299));var rs=!1,as="",os=ll;return ts!=null&&(ts.unstable_strictMode===!0&&(rs=!0),ts.identifierPrefix!==void 0&&(as=ts.identifierPrefix),ts.onRecoverableError!==void 0&&(os=ts.onRecoverableError)),ts=cl(ns,1,!1,null,null,rs,!1,as,os),ns[uf]=ts.current,sf(ns.nodeType===8?ns.parentNode:ns),new ml(ts)};reactDom_production_min.findDOMNode=function(ns){if(ns==null)return null;if(ns.nodeType===1)return ns;var ts=ns._reactInternals;if(ts===void 0)throw typeof ns.render=="function"?Error(p$2(188)):(ns=Object.keys(ns).join(","),Error(p$2(268,ns)));return ns=Zb(ts),ns=ns===null?null:ns.stateNode,ns};reactDom_production_min.flushSync=function(ns){return Sk(ns)};reactDom_production_min.hydrate=function(ns,ts,rs){if(!pl(ts))throw Error(p$2(200));return sl(null,ns,ts,!0,rs)};reactDom_production_min.hydrateRoot=function(ns,ts,rs){if(!ol(ns))throw Error(p$2(405));var as=rs!=null&&rs.hydratedSources||null,os=!1,is="",us=ll;if(rs!=null&&(rs.unstable_strictMode===!0&&(os=!0),rs.identifierPrefix!==void 0&&(is=rs.identifierPrefix),rs.onRecoverableError!==void 0&&(us=rs.onRecoverableError)),ts=fl(ts,null,ns,1,rs??null,os,!1,is,us),ns[uf]=ts.current,sf(ns),as)for(ns=0;ns<as.length;ns++)rs=as[ns],os=rs._getVersion,os=os(rs._source),ts.mutableSourceEagerHydrationData==null?ts.mutableSourceEagerHydrationData=[rs,os]:ts.mutableSourceEagerHydrationData.push(rs,os);return new nl(ts)};reactDom_production_min.render=function(ns,ts,rs){if(!pl(ts))throw Error(p$2(200));return sl(null,ns,ts,!1,rs)};reactDom_production_min.unmountComponentAtNode=function(ns){if(!pl(ns))throw Error(p$2(40));return ns._reactRootContainer?(Sk(function(){sl(null,null,ns,!1,function(){ns._reactRootContainer=null,ns[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(ns,ts,rs,as){if(!pl(rs))throw Error(p$2(200));if(ns==null||ns._reactInternals===void 0)throw Error(p$2(38));return sl(ns,ts,rs,!1,as)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(ns){console.error(ns)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$2=reactDomExports;client.createRoot=m$2.createRoot,client.hydrateRoot=m$2.hydrateRoot;var extendStatics=function(ns,ts){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(rs,as){rs.__proto__=as}||function(rs,as){for(var os in as)Object.prototype.hasOwnProperty.call(as,os)&&(rs[os]=as[os])},extendStatics(ns,ts)};function __extends$x(ns,ts){if(typeof ts!="function"&&ts!==null)throw new TypeError("Class extends value "+String(ts)+" is not a constructor or null");extendStatics(ns,ts);function rs(){this.constructor=ns}ns.prototype=ts===null?Object.create(ts):(rs.prototype=ts.prototype,new rs)}var __assign$h=function(){return __assign$h=Object.assign||function(ts){for(var rs,as=1,os=arguments.length;as<os;as++){rs=arguments[as];for(var is in rs)Object.prototype.hasOwnProperty.call(rs,is)&&(ts[is]=rs[is])}return ts},__assign$h.apply(this,arguments)};function __rest$2(ns,ts){var rs={};for(var as in ns)Object.prototype.hasOwnProperty.call(ns,as)&&ts.indexOf(as)<0&&(rs[as]=ns[as]);if(ns!=null&&typeof Object.getOwnPropertySymbols=="function")for(var os=0,as=Object.getOwnPropertySymbols(ns);os<as.length;os++)ts.indexOf(as[os])<0&&Object.prototype.propertyIsEnumerable.call(ns,as[os])&&(rs[as[os]]=ns[as[os]]);return rs}function __decorate(ns,ts,rs,as){var os=arguments.length,is=os<3?ts:as===null?as=Object.getOwnPropertyDescriptor(ts,rs):as,us;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")is=Reflect.decorate(ns,ts,rs,as);else for(var ls=ns.length-1;ls>=0;ls--)(us=ns[ls])&&(is=(os<3?us(is):os>3?us(ts,rs,is):us(ts,rs))||is);return os>3&&is&&Object.defineProperty(ts,rs,is),is}function __param(ns,ts){return function(rs,as){ts(rs,as,ns)}}function __esDecorate(ns,ts,rs,as,os,is){function us($s){if($s!==void 0&&typeof $s!="function")throw new TypeError("Function expected");return $s}for(var ls=as.kind,fs=ls==="getter"?"get":ls==="setter"?"set":"value",hs=!ts&&ns?as.static?ns:ns.prototype:null,vs=ts||(hs?Object.getOwnPropertyDescriptor(hs,as.name):{}),gs,ys=!1,xs=rs.length-1;xs>=0;xs--){var ms={};for(var Ss in as)ms[Ss]=Ss==="access"?{}:as[Ss];for(var Ss in as.access)ms.access[Ss]=as.access[Ss];ms.addInitializer=function($s){if(ys)throw new TypeError("Cannot add initializers after decoration has completed");is.push(us($s||null))};var Ms=(0,rs[xs])(ls==="accessor"?{get:vs.get,set:vs.set}:vs[fs],ms);if(ls==="accessor"){if(Ms===void 0)continue;if(Ms===null||typeof Ms!="object")throw new TypeError("Object expected");(gs=us(Ms.get))&&(vs.get=gs),(gs=us(Ms.set))&&(vs.set=gs),(gs=us(Ms.init))&&os.unshift(gs)}else(gs=us(Ms))&&(ls==="field"?os.unshift(gs):vs[fs]=gs)}hs&&Object.defineProperty(hs,as.name,vs),ys=!0}function __runInitializers(ns,ts,rs){for(var as=arguments.length>2,os=0;os<ts.length;os++)rs=as?ts[os].call(ns,rs):ts[os].call(ns);return as?rs:void 0}function __propKey(ns){return typeof ns=="symbol"?ns:"".concat(ns)}function __setFunctionName(ns,ts,rs){return typeof ts=="symbol"&&(ts=ts.description?"[".concat(ts.description,"]"):""),Object.defineProperty(ns,"name",{configurable:!0,value:rs?"".concat(rs," ",ts):ts})}function __metadata(ns,ts){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(ns,ts)}function __awaiter$2(ns,ts,rs,as){function os(is){return is instanceof rs?is:new rs(function(us){us(is)})}return new(rs||(rs=Promise))(function(is,us){function ls(vs){try{hs(as.next(vs))}catch(gs){us(gs)}}function fs(vs){try{hs(as.throw(vs))}catch(gs){us(gs)}}function hs(vs){vs.done?is(vs.value):os(vs.value).then(ls,fs)}hs((as=as.apply(ns,ts||[])).next())})}function __generator$2(ns,ts){var rs={label:0,sent:function(){if(is[0]&1)throw is[1];return is[1]},trys:[],ops:[]},as,os,is,us;return us={next:ls(0),throw:ls(1),return:ls(2)},typeof Symbol=="function"&&(us[Symbol.iterator]=function(){return this}),us;function ls(hs){return function(vs){return fs([hs,vs])}}function fs(hs){if(as)throw new TypeError("Generator is already executing.");for(;us&&(us=0,hs[0]&&(rs=0)),rs;)try{if(as=1,os&&(is=hs[0]&2?os.return:hs[0]?os.throw||((is=os.return)&&is.call(os),0):os.next)&&!(is=is.call(os,hs[1])).done)return is;switch(os=0,is&&(hs=[hs[0]&2,is.value]),hs[0]){case 0:case 1:is=hs;break;case 4:return rs.label++,{value:hs[1],done:!1};case 5:rs.label++,os=hs[1],hs=[0];continue;case 7:hs=rs.ops.pop(),rs.trys.pop();continue;default:if(is=rs.trys,!(is=is.length>0&&is[is.length-1])&&(hs[0]===6||hs[0]===2)){rs=0;continue}if(hs[0]===3&&(!is||hs[1]>is[0]&&hs[1]<is[3])){rs.label=hs[1];break}if(hs[0]===6&&rs.label<is[1]){rs.label=is[1],is=hs;break}if(is&&rs.label<is[2]){rs.label=is[2],rs.ops.push(hs);break}is[2]&&rs.ops.pop(),rs.trys.pop();continue}hs=ts.call(ns,rs)}catch(vs){hs=[6,vs],os=0}finally{as=is=0}if(hs[0]&5)throw hs[1];return{value:hs[0]?hs[1]:void 0,done:!0}}}var __createBinding$3=Object.create?function(ns,ts,rs,as){as===void 0&&(as=rs);var os=Object.getOwnPropertyDescriptor(ts,rs);(!os||("get"in os?!ts.__esModule:os.writable||os.configurable))&&(os={enumerable:!0,get:function(){return ts[rs]}}),Object.defineProperty(ns,as,os)}:function(ns,ts,rs,as){as===void 0&&(as=rs),ns[as]=ts[rs]};function __exportStar(ns,ts){for(var rs in ns)rs!=="default"&&!Object.prototype.hasOwnProperty.call(ts,rs)&&__createBinding$3(ts,ns,rs)}function __values(ns){var ts=typeof Symbol=="function"&&Symbol.iterator,rs=ts&&ns[ts],as=0;if(rs)return rs.call(ns);if(ns&&typeof ns.length=="number")return{next:function(){return ns&&as>=ns.length&&(ns=void 0),{value:ns&&ns[as++],done:!ns}}};throw new TypeError(ts?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(ns,ts){var rs=typeof Symbol=="function"&&ns[Symbol.iterator];if(!rs)return ns;var as=rs.call(ns),os,is=[],us;try{for(;(ts===void 0||ts-- >0)&&!(os=as.next()).done;)is.push(os.value)}catch(ls){us={error:ls}}finally{try{os&&!os.done&&(rs=as.return)&&rs.call(as)}finally{if(us)throw us.error}}return is}function __spread(){for(var ns=[],ts=0;ts<arguments.length;ts++)ns=ns.concat(__read(arguments[ts]));return ns}function __spreadArrays(){for(var ns=0,ts=0,rs=arguments.length;ts<rs;ts++)ns+=arguments[ts].length;for(var as=Array(ns),os=0,ts=0;ts<rs;ts++)for(var is=arguments[ts],us=0,ls=is.length;us<ls;us++,os++)as[os]=is[us];return as}function __spreadArray$4(ns,ts,rs){if(rs||arguments.length===2)for(var as=0,os=ts.length,is;as<os;as++)(is||!(as in ts))&&(is||(is=Array.prototype.slice.call(ts,0,as)),is[as]=ts[as]);return ns.concat(is||Array.prototype.slice.call(ts))}function __await(ns){return this instanceof __await?(this.v=ns,this):new __await(ns)}function __asyncGenerator(ns,ts,rs){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var as=rs.apply(ns,ts||[]),os,is=[];return os={},us("next"),us("throw"),us("return"),os[Symbol.asyncIterator]=function(){return this},os;function us(ys){as[ys]&&(os[ys]=function(xs){return new Promise(function(ms,Ss){is.push([ys,xs,ms,Ss])>1||ls(ys,xs)})})}function ls(ys,xs){try{fs(as[ys](xs))}catch(ms){gs(is[0][3],ms)}}function fs(ys){ys.value instanceof __await?Promise.resolve(ys.value.v).then(hs,vs):gs(is[0][2],ys)}function hs(ys){ls("next",ys)}function vs(ys){ls("throw",ys)}function gs(ys,xs){ys(xs),is.shift(),is.length&&ls(is[0][0],is[0][1])}}function __asyncDelegator(ns){var ts,rs;return ts={},as("next"),as("throw",function(os){throw os}),as("return"),ts[Symbol.iterator]=function(){return this},ts;function as(os,is){ts[os]=ns[os]?function(us){return(rs=!rs)?{value:__await(ns[os](us)),done:!1}:is?is(us):us}:is}}function __asyncValues(ns){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ts=ns[Symbol.asyncIterator],rs;return ts?ts.call(ns):(ns=typeof __values=="function"?__values(ns):ns[Symbol.iterator](),rs={},as("next"),as("throw"),as("return"),rs[Symbol.asyncIterator]=function(){return this},rs);function as(is){rs[is]=ns[is]&&function(us){return new Promise(function(ls,fs){us=ns[is](us),os(ls,fs,us.done,us.value)})}}function os(is,us,ls,fs){Promise.resolve(fs).then(function(hs){is({value:hs,done:ls})},us)}}function __makeTemplateObject(ns,ts){return Object.defineProperty?Object.defineProperty(ns,"raw",{value:ts}):ns.raw=ts,ns}var __setModuleDefault$3=Object.create?function(ns,ts){Object.defineProperty(ns,"default",{enumerable:!0,value:ts})}:function(ns,ts){ns.default=ts};function __importStar$3(ns){if(ns&&ns.__esModule)return ns;var ts={};if(ns!=null)for(var rs in ns)rs!=="default"&&Object.prototype.hasOwnProperty.call(ns,rs)&&__createBinding$3(ts,ns,rs);return __setModuleDefault$3(ts,ns),ts}function __importDefault$e(ns){return ns&&ns.__esModule?ns:{default:ns}}function __classPrivateFieldGet(ns,ts,rs,as){if(rs==="a"&&!as)throw new TypeError("Private accessor was defined without a getter");if(typeof ts=="function"?ns!==ts||!as:!ts.has(ns))throw new TypeError("Cannot read private member from an object whose class did not declare it");return rs==="m"?as:rs==="a"?as.call(ns):as?as.value:ts.get(ns)}function __classPrivateFieldSet(ns,ts,rs,as,os){if(as==="m")throw new TypeError("Private method is not writable");if(as==="a"&&!os)throw new TypeError("Private accessor was defined without a setter");if(typeof ts=="function"?ns!==ts||!os:!ts.has(ns))throw new TypeError("Cannot write private member to an object whose class did not declare it");return as==="a"?os.call(ns,rs):os?os.value=rs:ts.set(ns,rs),rs}function __classPrivateFieldIn(ns,ts){if(ts===null||typeof ts!="object"&&typeof ts!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof ns=="function"?ts===ns:ns.has(ts)}function __addDisposableResource(ns,ts,rs){if(ts!=null){if(typeof ts!="object"&&typeof ts!="function")throw new TypeError("Object expected.");var as;if(rs){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");as=ts[Symbol.asyncDispose]}if(as===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");as=ts[Symbol.dispose]}if(typeof as!="function")throw new TypeError("Object not disposable.");ns.stack.push({value:ts,dispose:as,async:rs})}else rs&&ns.stack.push({async:!0});return ts}var _SuppressedError=typeof SuppressedError=="function"?SuppressedError:function(ns,ts,rs){var as=new Error(rs);return as.name="SuppressedError",as.error=ns,as.suppressed=ts,as};function __disposeResources(ns){function ts(as){ns.error=ns.hasError?new _SuppressedError(as,ns.error,"An error was suppressed during disposal."):as,ns.hasError=!0}function rs(){for(;ns.stack.length;){var as=ns.stack.pop();try{var os=as.dispose&&as.dispose.call(as.value);if(as.async)return Promise.resolve(os).then(rs,function(is){return ts(is),rs()})}catch(is){ts(is)}}if(ns.hasError)throw ns.error}return rs()}const tslib_es6={__extends:__extends$x,__assign:__assign$h,__rest:__rest$2,__decorate,__param,__metadata,__awaiter:__awaiter$2,__generator:__generator$2,__createBinding:__createBinding$3,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray:__spreadArray$4,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar:__importStar$3,__importDefault:__importDefault$e,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources},tslib_es6$1=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource,get __assign(){return __assign$h},__asyncDelegator,__asyncGenerator,__asyncValues,__await,__awaiter:__awaiter$2,__classPrivateFieldGet,__classPrivateFieldIn,__classPrivateFieldSet,__createBinding:__createBinding$3,__decorate,__disposeResources,__esDecorate,__exportStar,__extends:__extends$x,__generator:__generator$2,__importDefault:__importDefault$e,__importStar:__importStar$3,__makeTemplateObject,__metadata,__param,__propKey,__read,__rest:__rest$2,__runInitializers,__setFunctionName,__spread,__spreadArray:__spreadArray$4,__spreadArrays,__values,default:tslib_es6},Symbol.toStringTag,{value:"Module"}));var isArrayLike$1=function(ns){return ns!==null&&typeof ns!="function"&&isFinite(ns.length)},contains$2=function(ns,ts){return isArrayLike$1(ns)?ns.indexOf(ts)>-1:!1},filter$2=function(ns,ts){if(!isArrayLike$1(ns))return ns;for(var rs=[],as=0;as<ns.length;as++){var os=ns[as];ts(os,as)&&rs.push(os)}return rs},difference$2=function(ns,ts){return ts===void 0&&(ts=[]),filter$2(ns,function(rs){return!contains$2(ts,rs)})},toString$6={}.toString,isType$2=function(ns,ts){return toString$6.call(ns)==="[object "+ts+"]"};const isFunction$2=function(ns){return isType$2(ns,"Function")};var isNil$2=function(ns){return ns==null};const isArray$2=function(ns){return Array.isArray?Array.isArray(ns):isType$2(ns,"Array")},isObject$1=function(ns){var ts=typeof ns;return ns!==null&&ts==="object"||ts==="function"};function each$1(ns,ts){if(ns){var rs;if(isArray$2(ns))for(var as=0,os=ns.length;as<os&&(rs=ts(ns[as],as),rs!==!1);as++);else if(isObject$1(ns)){for(var is in ns)if(ns.hasOwnProperty(is)&&(rs=ts(ns[is],is),rs===!1))break}}}var keys$2=Object.keys?function(ns){return Object.keys(ns)}:function(ns){var ts=[];return each$1(ns,function(rs,as){isFunction$2(ns)&&as==="prototype"||ts.push(as)}),ts};function isMatch$1(ns,ts){var rs=keys$2(ts),as=rs.length;if(isNil$2(ns))return!as;for(var os=0;os<as;os+=1){var is=rs[os];if(ts[is]!==ns[is]||!(is in ns))return!1}return!0}var isObjectLike$6=function(ns){return typeof ns=="object"&&ns!==null},isPlainObject$3=function(ns){if(!isObjectLike$6(ns)||!isType$2(ns,"Object"))return!1;if(Object.getPrototypeOf(ns)===null)return!0;for(var ts=ns;Object.getPrototypeOf(ts)!==null;)ts=Object.getPrototypeOf(ts);return Object.getPrototypeOf(ns)===ts};function find$2(ns,ts){if(!isArray$2(ns))return null;var rs;if(isFunction$2(ts)&&(rs=ts),isPlainObject$3(ts)&&(rs=function(os){return isMatch$1(os,ts)}),rs){for(var as=0;as<ns.length;as+=1)if(rs(ns[as]))return ns[as]}return null}function findIndex$1(ns,ts,rs){rs===void 0&&(rs=0);for(var as=rs;as<ns.length;as++)if(ts(ns[as],as))return as;return-1}var firstValue$2=function(ns,ts){for(var rs=null,as=0;as<ns.length;as++){var os=ns[as],is=os[ts];if(!isNil$2(is)){isArray$2(is)?rs=is[0]:rs=is;break}}return rs},flatten$2=function(ns){if(!isArray$2(ns))return[];for(var ts=[],rs=0;rs<ns.length;rs++)ts=ts.concat(ns[rs]);return ts},flattenDeep$2=function(ns,ts){if(ts===void 0&&(ts=[]),!isArray$2(ns))ts.push(ns);else for(var rs=0;rs<ns.length;rs+=1)flattenDeep$2(ns[rs],ts);return ts};const max$6=function(ns){if(isArray$2(ns))return ns.reduce(function(ts,rs){return Math.max(ts,rs)},ns[0])},min$5=function(ns){if(isArray$2(ns))return ns.reduce(function(ts,rs){return Math.min(ts,rs)},ns[0])};var getRange$2=function(ns){var ts=ns.filter(function(us){return!isNaN(us)});if(!ts.length)return{min:0,max:0};if(isArray$2(ns[0])){for(var rs=[],as=0;as<ns.length;as++)rs=rs.concat(ns[as]);ts=rs}var os=max$6(ts),is=min$5(ts);return{min:is,max:os}},arrPrototype$1=Array.prototype,splice$3=arrPrototype$1.splice,indexOf$4=arrPrototype$1.indexOf,pull$2=function(ns){for(var ts=[],rs=1;rs<arguments.length;rs++)ts[rs-1]=arguments[rs];for(var as=0;as<ts.length;as++)for(var os=ts[as],is=-1;(is=indexOf$4.call(ns,os))>-1;)splice$3.call(ns,is,1);return ns},splice$2=Array.prototype.splice,pullAt$2=function(ts,rs){if(!isArrayLike$1(ts))return[];for(var as=ts?rs.length:0,os=as-1;as--;){var is=void 0,us=rs[as];(as===os||us!==is)&&(is=us,splice$2.call(ts,us,1))}return ts},reduce$2=function(ns,ts,rs){if(!isArray$2(ns)&&!isPlainObject$3(ns))return ns;var as=rs;return each$1(ns,function(os,is){as=ts(as,os,is)}),as},remove$2=function(ns,ts){var rs=[];if(!isArrayLike$1(ns))return rs;for(var as=-1,os=[],is=ns.length;++as<is;){var us=ns[as];ts(us,as,ns)&&(rs.push(us),os.push(as))}return pullAt$2(ns,os),rs};const isString$2=function(ns){return isType$2(ns,"String")};function sortBy$1(ns,ts){var rs;if(isFunction$2(ts))rs=function(os,is){return ts(os)-ts(is)};else{var as=[];isString$2(ts)?as.push(ts):isArray$2(ts)&&(as=ts),rs=function(os,is){for(var us=0;us<as.length;us+=1){var ls=as[us];if(os[ls]>is[ls])return 1;if(os[ls]<is[ls])return-1}return 0}}return ns.sort(rs),ns}function uniq$1(ns,ts){ts===void 0&&(ts=new Map);var rs=[];if(Array.isArray(ns))for(var as=0,os=ns.length;as<os;as++){var is=ns[as];ts.has(is)||(rs.push(is),ts.set(is,!0))}return rs}var union$2=function(){for(var ns=[],ts=0;ts<arguments.length;ts++)ns[ts]=arguments[ts];return uniq$1([].concat.apply([],ns))};const valuesOfKey$1=function(ns,ts){for(var rs=[],as={},os=0;os<ns.length;os++){var is=ns[os],us=is[ts];if(!isNil$2(us)){isArray$2(us)||(us=[us]);for(var ls=0;ls<us.length;ls++){var fs=us[ls];as[fs]||(rs.push(fs),as[fs]=!0)}}}return rs};function head$1(ns){if(isArrayLike$1(ns))return ns[0]}function last$1(ns){if(isArrayLike$1(ns)){var ts=ns;return ts[ts.length-1]}}function startsWith$1(ns,ts){return isArray$2(ns)||isString$2(ns)?ns[0]===ts:!1}function endsWith$1(ns,ts){return isArray$2(ns)||isString$2(ns)?ns[ns.length-1]===ts:!1}var every$2=function(ns,ts){for(var rs=0;rs<ns.length;rs++)if(!ts(ns[rs],rs))return!1;return!0},some$2=function(ns,ts){for(var rs=0;rs<ns.length;rs++)if(ts(ns[rs],rs))return!0;return!1},hasOwnProperty$9=Object.prototype.hasOwnProperty;function groupBy$1(ns,ts){if(!ts||!isArray$2(ns))return{};for(var rs={},as=isFunction$2(ts)?ts:function(ls){return ls[ts]},os,is=0;is<ns.length;is++){var us=ns[is];os=as(us),hasOwnProperty$9.call(rs,os)?rs[os].push(us):rs[os]=[us]}return rs}function groupToMap$1(ns,ts){if(!ts)return{0:ns};if(!isFunction$2(ts)){var rs=isArray$2(ts)?ts:ts.replace(/\s+/g,"").split("*");ts=function(as){for(var os="_",is=0,us=rs.length;is<us;is++)os+=as[rs[is]]&&as[rs[is]].toString();return os}}return groupBy$1(ns,ts)}const group$1=function(ns,ts){if(!ts)return[ns];var rs=groupToMap$1(ns,ts),as=[];for(var os in rs)as.push(rs[os]);return as};function getWrapBehavior$1(ns,ts){return ns["_wrap_"+ts]}function wrapBehavior$1(ns,ts){if(ns["_wrap_"+ts])return ns["_wrap_"+ts];var rs=function(as){ns[ts](as)};return ns["_wrap_"+ts]=rs,rs}var numColorCache$1={};function numberToColor$1(ns){var ts=numColorCache$1[ns];if(!ts){for(var rs=ns.toString(16),as=rs.length;as<6;as++)rs="0"+rs;ts="#"+rs,numColorCache$1[ns]=ts}return ts}function parseRadius$3(ns){var ts=0,rs=0,as=0,os=0;return isArray$2(ns)?ns.length===1?ts=rs=as=os=ns[0]:ns.length===2?(ts=as=ns[0],rs=os=ns[1]):ns.length===3?(ts=ns[0],rs=os=ns[1],as=ns[2]):(ts=ns[0],rs=ns[1],as=ns[2],os=ns[3]):ts=rs=as=os=ns,{r1:ts,r2:rs,r3:as,r4:os}}var clamp$3=function(ns,ts,rs){return ns<ts?ts:ns>rs?rs:ns},fixedBase$2=function(ns,ts){var rs=ts.toString(),as=rs.indexOf(".");if(as===-1)return Math.round(ns);var os=rs.substr(as+1).length;return os>20&&(os=20),parseFloat(ns.toFixed(os))},isNumber$3=function(ns){return isType$2(ns,"Number")},isDecimal$2=function(ns){return isNumber$3(ns)&&ns%1!==0},isEven$2=function(ns){return isNumber$3(ns)&&ns%2===0},isInteger$2=Number.isInteger?Number.isInteger:function(ns){return isNumber$3(ns)&&ns%1===0},isNegative$2=function(ns){return isNumber$3(ns)&&ns<0},PRECISION$1=1e-5;function isNumberEqual$2(ns,ts,rs){return rs===void 0&&(rs=PRECISION$1),Math.abs(ns-ts)<rs}var isOdd$2=function(ns){return isNumber$3(ns)&&ns%2!==0},isPositive$2=function(ns){return isNumber$3(ns)&&ns>0};const maxBy$1=function(ns,ts){if(isArray$2(ns)){for(var rs,as=-1/0,os=0;os<ns.length;os++){var is=ns[os],us=isFunction$2(ts)?ts(is):is[ts];us>as&&(rs=is,as=us)}return rs}},minBy$1=function(ns,ts){if(isArray$2(ns)){for(var rs,as=1/0,os=0;os<ns.length;os++){var is=ns[os],us=isFunction$2(ts)?ts(is):is[ts];us<as&&(rs=is,as=us)}return rs}};var mod$3=function(ns,ts){return(ns%ts+ts)%ts},DEGREE$1=180/Math.PI,toDegree$2=function(ns){return DEGREE$1*ns};const parseInt$2=parseInt;var RADIAN$1=Math.PI/180,toRadian$3=function(ns){return RADIAN$1*ns};const has$1=function(ns,ts){return ns.hasOwnProperty(ts)};var values$2=Object.values?function(ns){return Object.values(ns)}:function(ns){var ts=[];return each$1(ns,function(rs,as){isFunction$2(ns)&&as==="prototype"||ts.push(rs)}),ts};const hasValue$1=function(ns,ts){return contains$2(values$2(ns),ts)},toString$5=function(ns){return isNil$2(ns)?"":ns.toString()};var lowerCase$2=function(ns){return toString$5(ns).toLowerCase()},lowerFirst$2=function(ns){var ts=toString$5(ns);return ts.charAt(0).toLowerCase()+ts.substring(1)};function substitute$3(ns,ts){return!ns||!ts?ns:ns.replace(/\\?\{([^{}]+)\}/g,function(rs,as){return rs.charAt(0)==="\\"?rs.slice(1):ts[as]===void 0?"":ts[as]})}var upperCase$2=function(ns){return toString$5(ns).toUpperCase()},upperFirst$2=function(ns){var ts=toString$5(ns);return ts.charAt(0).toUpperCase()+ts.substring(1)},toString$4={}.toString,getType$2=function(ns){return toString$4.call(ns).replace(/^\[object /,"").replace(/]$/,"")},isArguments$2=function(ns){return isType$2(ns,"Arguments")},isBoolean$2=function(ns){return isType$2(ns,"Boolean")},isDate$2=function(ns){return isType$2(ns,"Date")},isError$2=function(ns){return isType$2(ns,"Error")};function isFinite$2(ns){return isNumber$3(ns)&&isFinite(ns)}var isNull$2=function(ns){return ns===null},objectProto$4=Object.prototype,isPrototype$2=function(ns){var ts=ns&&ns.constructor,rs=typeof ts=="function"&&ts.prototype||objectProto$4;return ns===rs},isRegExp$2=function(ns){return isType$2(ns,"RegExp")},isUndefined$2=function(ns){return ns===void 0},isElement$2=function(ns){return ns instanceof Element||ns instanceof HTMLDocument};function requestAnimationFrame$2(ns){var ts=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(rs){return setTimeout(rs,16)};return ts(ns)}function cancelAnimationFrame$2(ns){var ts=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;ts(ns)}function _mix$1(ns,ts){for(var rs in ts)ts.hasOwnProperty(rs)&&rs!=="constructor"&&ts[rs]!==void 0&&(ns[rs]=ts[rs])}function mix$1(ns,ts,rs,as){return ts&&_mix$1(ns,ts),rs&&_mix$1(ns,rs),as&&_mix$1(ns,as),ns}var augment$2=function(){for(var ns=[],ts=0;ts<arguments.length;ts++)ns[ts]=arguments[ts];for(var rs=ns[0],as=1;as<ns.length;as++){var os=ns[as];isFunction$2(os)&&(os=os.prototype),mix$1(rs.prototype,os)}},clone$b=function(ns){if(typeof ns!="object"||ns===null)return ns;var ts;if(isArray$2(ns)){ts=[];for(var rs=0,as=ns.length;rs<as;rs++)typeof ns[rs]=="object"&&ns[rs]!=null?ts[rs]=clone$b(ns[rs]):ts[rs]=ns[rs]}else{ts={};for(var os in ns)typeof ns[os]=="object"&&ns[os]!=null?ts[os]=clone$b(ns[os]):ts[os]=ns[os]}return ts};function debounce$1(ns,ts,rs){var as;return function(){var os=this,is=arguments,us=function(){as=null,rs||ns.apply(os,is)},ls=rs&&!as;clearTimeout(as),as=setTimeout(us,ts),ls&&ns.apply(os,is)}}const memoize$1=function(ns,ts){if(!isFunction$2(ns))throw new TypeError("Expected a function");var rs=function(){for(var as=[],os=0;os<arguments.length;os++)as[os]=arguments[os];var is=ts?ts.apply(this,as):as[0],us=rs.cache;if(us.has(is))return us.get(is);var ls=ns.apply(this,as);return us.set(is,ls),ls};return rs.cache=new Map,rs};var MAX_MIX_LEVEL$1=5;function _deepMix$1(ns,ts,rs,as){rs=rs||0,as=as||MAX_MIX_LEVEL$1;for(var os in ts)if(ts.hasOwnProperty(os)){var is=ts[os];is!==null&&isPlainObject$3(is)?(isPlainObject$3(ns[os])||(ns[os]={}),rs<as?_deepMix$1(ns[os],is,rs+1,as):ns[os]=ts[os]):isArray$2(is)?(ns[os]=[],ns[os]=ns[os].concat(is)):is!==void 0&&(ns[os]=is)}}var deepMix$2=function(ns){for(var ts=[],rs=1;rs<arguments.length;rs++)ts[rs-1]=arguments[rs];for(var as=0;as<ts.length;as+=1)_deepMix$1(ns,ts[as]);return ns},extend$3=function(ns,ts,rs,as){isFunction$2(ts)||(rs=ts,ts=ns,ns=function(){});var os=Object.create?function(us,ls){return Object.create(us,{constructor:{value:ls}})}:function(us,ls){function fs(){}fs.prototype=us;var hs=new fs;return hs.constructor=ls,hs},is=os(ts.prototype,ns);return ns.prototype=mix$1(is,ns.prototype),ns.superclass=os(ts.prototype,ts),mix$1(is,rs),mix$1(ns,as),ns},indexOf$3=function(ns,ts){if(!isArrayLike$1(ns))return-1;var rs=Array.prototype.indexOf;if(rs)return rs.call(ns,ts);for(var as=-1,os=0;os<ns.length;os++)if(ns[os]===ts){as=os;break}return as},hasOwnProperty$8=Object.prototype.hasOwnProperty;function isEmpty$1(ns){if(isNil$2(ns))return!0;if(isArrayLike$1(ns))return!ns.length;var ts=getType$2(ns);if(ts==="Map"||ts==="Set")return!ns.size;if(isPrototype$2(ns))return!Object.keys(ns).length;for(var rs in ns)if(hasOwnProperty$8.call(ns,rs))return!1;return!0}var isEqual$3=function(ns,ts){if(ns===ts)return!0;if(!ns||!ts||isString$2(ns)||isString$2(ts))return!1;if(isArrayLike$1(ns)||isArrayLike$1(ts)){if(ns.length!==ts.length)return!1;for(var rs=!0,as=0;as<ns.length&&(rs=isEqual$3(ns[as],ts[as]),!!rs);as++);return rs}if(isObjectLike$6(ns)||isObjectLike$6(ts)){var os=Object.keys(ns),is=Object.keys(ts);if(os.length!==is.length)return!1;for(var rs=!0,as=0;as<os.length&&(rs=isEqual$3(ns[os[as]],ts[os[as]]),!!rs);as++);return rs}return!1};const isEqualWith$1=function(ns,ts,rs){return isFunction$2(rs)?!!rs(ns,ts):isEqual$3(ns,ts)};var map$6=function(ns,ts){if(!isArrayLike$1(ns))return ns;for(var rs=[],as=0;as<ns.length;as++){var os=ns[as];rs.push(ts(os,as))}return rs},identity$9=function(ns){return ns};const mapValues$1=function(ns,ts){ts===void 0&&(ts=identity$9);var rs={};return isObject$1(ns)&&!isNil$2(ns)&&Object.keys(ns).forEach(function(as){rs[as]=ts(ns[as],as)}),rs},get$2=function(ns,ts,rs){for(var as=0,os=isString$2(ts)?ts.split("."):ts;ns&&as<os.length;)ns=ns[os[as++]];return ns===void 0||as<os.length?rs:ns},set$b=function(ns,ts,rs){var as=ns,os=isString$2(ts)?ts.split("."):ts;return os.forEach(function(is,us){us<os.length-1?(isObject$1(as[is])||(as[is]=isNumber$3(os[us+1])?[]:{}),as=as[is]):as[is]=rs}),ns};var hasOwnProperty$7=Object.prototype.hasOwnProperty;const pick$1=function(ns,ts){if(ns===null||!isPlainObject$3(ns))return{};var rs={};return each$1(ts,function(as){hasOwnProperty$7.call(ns,as)&&(rs[as]=ns[as])}),rs},omit$1=function(ns,ts){return reduce$2(ns,function(rs,as,os){return ts.includes(os)||(rs[os]=as),rs},{})},throttle$1=function(ns,ts,rs){var as,os,is,us,ls=0;rs||(rs={});var fs=function(){ls=rs.leading===!1?0:Date.now(),as=null,us=ns.apply(os,is),as||(os=is=null)},hs=function(){var vs=Date.now();!ls&&rs.leading===!1&&(ls=vs);var gs=ts-(vs-ls);return os=this,is=arguments,gs<=0||gs>ts?(as&&(clearTimeout(as),as=null),ls=vs,us=ns.apply(os,is),as||(os=is=null)):!as&&rs.trailing!==!1&&(as=setTimeout(fs,gs)),us};return hs.cancel=function(){clearTimeout(as),ls=0,as=os=is=null},hs},toArray$1=function(ns){return isArrayLike$1(ns)?Array.prototype.slice.call(ns):[]};var map$5={};const uniqueId$5=function(ns){return ns=ns||"g",map$5[ns]?map$5[ns]+=1:map$5[ns]=1,ns+map$5[ns]},noop$2=function(){},identity$8=function(ns){return ns};function size$1(ns){return isNil$2(ns)?0:isArrayLike$1(ns)?ns.length:Object.keys(ns).length}var ctx$1;const measureTextWidth=memoize$1(function(ns,ts){ts===void 0&&(ts={});var rs=ts.fontSize,as=ts.fontFamily,os=ts.fontWeight,is=ts.fontStyle,us=ts.fontVariant;return ctx$1||(ctx$1=document.createElement("canvas").getContext("2d")),ctx$1.font=[is,us,os,rs+"px",as].join(" "),ctx$1.measureText(isString$2(ns)?ns:"").width},function(ns,ts){return ts===void 0&&(ts={}),__spreadArrays([ns],values$2(ts)).join("")}),getEllipsisText=function(ns,ts,rs,as){as===void 0&&(as="...");var os=16,is=measureTextWidth(as,rs),us=isString$2(ns)?ns:toString$5(ns),ls=ts,fs=[],hs,vs;if(measureTextWidth(ns,rs)<=ts)return ns;for(;hs=us.substr(0,os),vs=measureTextWidth(hs,rs),!(vs+is>ls&&vs>ls);)if(fs.push(hs),ls-=vs,us=us.substr(os),!us)return fs.join("");for(;hs=us.substr(0,1),vs=measureTextWidth(hs,rs),!(vs+is>ls);)if(fs.push(hs),ls-=vs,us=us.substr(1),!us)return fs.join("");return""+fs.join("")+as};var default_1$2=function(){function ns(){this.map={}}return ns.prototype.has=function(ts){return this.map[ts]!==void 0},ns.prototype.get=function(ts,rs){var as=this.map[ts];return as===void 0?rs:as},ns.prototype.set=function(ts,rs){this.map[ts]=rs},ns.prototype.clear=function(){this.map={}},ns.prototype.delete=function(ts){delete this.map[ts]},ns.prototype.size=function(){return Object.keys(this.map).length},ns}();const esm$2=Object.freeze(Object.defineProperty({__proto__:null,Cache:default_1$2,assign:mix$1,augment:augment$2,clamp:clamp$3,clearAnimationFrame:cancelAnimationFrame$2,clone:clone$b,contains:contains$2,debounce:debounce$1,deepMix:deepMix$2,difference:difference$2,each:each$1,endsWith:endsWith$1,every:every$2,extend:extend$3,filter:filter$2,find:find$2,findIndex:findIndex$1,firstValue:firstValue$2,fixedBase:fixedBase$2,flatten:flatten$2,flattenDeep:flattenDeep$2,forIn:each$1,get:get$2,getEllipsisText,getRange:getRange$2,getType:getType$2,getWrapBehavior:getWrapBehavior$1,group:group$1,groupBy:groupBy$1,groupToMap:groupToMap$1,has:has$1,hasKey:has$1,hasValue:hasValue$1,head:head$1,identity:identity$8,includes:contains$2,indexOf:indexOf$3,isArguments:isArguments$2,isArray:isArray$2,isArrayLike:isArrayLike$1,isBoolean:isBoolean$2,isDate:isDate$2,isDecimal:isDecimal$2,isElement:isElement$2,isEmpty:isEmpty$1,isEqual:isEqual$3,isEqualWith:isEqualWith$1,isError:isError$2,isEven:isEven$2,isFinite:isFinite$2,isFunction:isFunction$2,isInteger:isInteger$2,isMatch:isMatch$1,isNegative:isNegative$2,isNil:isNil$2,isNull:isNull$2,isNumber:isNumber$3,isNumberEqual:isNumberEqual$2,isObject:isObject$1,isObjectLike:isObjectLike$6,isOdd:isOdd$2,isPlainObject:isPlainObject$3,isPositive:isPositive$2,isPrototype:isPrototype$2,isRegExp:isRegExp$2,isString:isString$2,isType:isType$2,isUndefined:isUndefined$2,keys:keys$2,last:last$1,lowerCase:lowerCase$2,lowerFirst:lowerFirst$2,map:map$6,mapValues:mapValues$1,max:max$6,maxBy:maxBy$1,measureTextWidth,memoize:memoize$1,min:min$5,minBy:minBy$1,mix:mix$1,mod:mod$3,noop:noop$2,number2color:numberToColor$1,omit:omit$1,parseRadius:parseRadius$3,pick:pick$1,pull:pull$2,pullAt:pullAt$2,reduce:reduce$2,remove:remove$2,requestAnimationFrame:requestAnimationFrame$2,set:set$b,size:size$1,some:some$2,sortBy:sortBy$1,startsWith:startsWith$1,substitute:substitute$3,throttle:throttle$1,toArray:toArray$1,toDegree:toDegree$2,toInteger:parseInt$2,toRadian:toRadian$3,toString:toString$5,union:union$2,uniq:uniq$1,uniqueId:uniqueId$5,upperCase:upperCase$2,upperFirst:upperFirst$2,values:values$2,valuesOfKey:valuesOfKey$1,wrapBehavior:wrapBehavior$1},Symbol.toStringTag,{value:"Module"})),behaviorOption$1={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(ts){return Object.assign(this,ts),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(ts){var rs=this,as=this.events;this.graph=ts,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&ts.get("canvas").set("draggable",!0),each$1(as,function(os,is){ts.on(is,os)}),document.addEventListener("visibilitychange",function(){rs.keydown=!1})},unbind:function(ts){var rs=this.events,as=ts.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&ts.get("canvas").set("draggable",!1),each$1(rs,function(os,is){ts.off(is,os)}),ts.get("canvas").set("draggable",as)},get:function(ts){return this[ts]},set:function(ts,rs){return this[ts]=rs,this}};var Behavior$1=function(){function ns(){}return ns.registerBehavior=function(ts,rs){if(!rs)throw new Error("please specify handler for this behavior: ".concat(ts));var as=clone$b(behaviorOption$1);Object.assign(as,rs);var os=function(us){var ls=this;Object.assign(this,this.getDefaultCfg(),us);var fs=this.getEvents();this.events=null;var hs={};fs&&(each$1(fs,function(vs,gs){hs[gs]=wrapBehavior$1(ls,vs)}),this.events=hs)};os.prototype=as,ns.types[ts]=os},ns.hasBehavior=function(ts){return!!ns.types[ts]},ns.getBehavior=function(ts){return ns.types[ts]},ns.types={},ns}(),WILDCARD$1="*",EventEmitter=function(){function ns(){this._events={}}return ns.prototype.on=function(ts,rs,as){return this._events[ts]||(this._events[ts]=[]),this._events[ts].push({callback:rs,once:!!as}),this},ns.prototype.once=function(ts,rs){return this.on(ts,rs,!0)},ns.prototype.emit=function(ts){for(var rs=this,as=[],os=1;os<arguments.length;os++)as[os-1]=arguments[os];var is=this._events[ts]||[],us=this._events[WILDCARD$1]||[],ls=function(fs){for(var hs=fs.length,vs=0;vs<hs;vs++)if(fs[vs]){var gs=fs[vs],ys=gs.callback,xs=gs.once;xs&&(fs.splice(vs,1),fs.length===0&&delete rs._events[ts],hs--,vs--),ys.apply(rs,as)}};ls(is),ls(us)},ns.prototype.off=function(ts,rs){if(!ts)this._events={};else if(!rs)delete this._events[ts];else{for(var as=this._events[ts]||[],os=as.length,is=0;is<os;is++)as[is].callback===rs&&(as.splice(is,1),os--,is--);as.length===0&&delete this._events[ts]}return this},ns.prototype.getEvents=function(){return this._events},ns}(),EPSILON$1=1e-6,ARRAY_TYPE=typeof Float32Array<"u"?Float32Array:Array,RANDOM=Math.random;function setMatrixArrayType(ns){ARRAY_TYPE=ns}var degree$4=Math.PI/180;function toRadian$2(ns){return ns*degree$4}function equals$9(ns,ts){return Math.abs(ns-ts)<=EPSILON$1*Math.max(1,Math.abs(ns),Math.abs(ts))}Math.hypot||(Math.hypot=function(){for(var ns=0,ts=arguments.length;ts--;)ns+=arguments[ts]*arguments[ts];return Math.sqrt(ns)});const common=Object.freeze(Object.defineProperty({__proto__:null,get ARRAY_TYPE(){return ARRAY_TYPE},EPSILON:EPSILON$1,RANDOM,equals:equals$9,setMatrixArrayType,toRadian:toRadian$2},Symbol.toStringTag,{value:"Module"}));function create$8(){var ns=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(ns[1]=0,ns[2]=0),ns[0]=1,ns[3]=1,ns}function clone$a(ns){var ts=new ARRAY_TYPE(4);return ts[0]=ns[0],ts[1]=ns[1],ts[2]=ns[2],ts[3]=ns[3],ts}function copy$8(ns,ts){return ns[0]=ts[0],ns[1]=ts[1],ns[2]=ts[2],ns[3]=ts[3],ns}function identity$7(ns){return ns[0]=1,ns[1]=0,ns[2]=0,ns[3]=1,ns}function fromValues$8(ns,ts,rs,as){var os=new ARRAY_TYPE(4);return os[0]=ns,os[1]=ts,os[2]=rs,os[3]=as,os}function set$a(ns,ts,rs,as,os){return ns[0]=ts,ns[1]=rs,ns[2]=as,ns[3]=os,ns}function transpose$2(ns,ts){if(ns===ts){var rs=ts[1];ns[1]=ts[2],ns[2]=rs}else ns[0]=ts[0],ns[1]=ts[2],ns[2]=ts[1],ns[3]=ts[3];return ns}function invert$6(ns,ts){var rs=ts[0],as=ts[1],os=ts[2],is=ts[3],us=rs*is-os*as;return us?(us=1/us,ns[0]=is*us,ns[1]=-as*us,ns[2]=-os*us,ns[3]=rs*us,ns):null}function adjoint$2(ns,ts){var rs=ts[0];return ns[0]=ts[3],ns[1]=-ts[1],ns[2]=-ts[2],ns[3]=rs,ns}function determinant$4(ns){return ns[0]*ns[3]-ns[2]*ns[1]}function multiply$8(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=rs[0],fs=rs[1],hs=rs[2],vs=rs[3];return ns[0]=as*ls+is*fs,ns[1]=os*ls+us*fs,ns[2]=as*hs+is*vs,ns[3]=os*hs+us*vs,ns}function rotate$7(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=Math.sin(rs),fs=Math.cos(rs);return ns[0]=as*fs+is*ls,ns[1]=os*fs+us*ls,ns[2]=as*-ls+is*fs,ns[3]=os*-ls+us*fs,ns}function scale$a(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=rs[0],fs=rs[1];return ns[0]=as*ls,ns[1]=os*ls,ns[2]=is*fs,ns[3]=us*fs,ns}function fromRotation$4(ns,ts){var rs=Math.sin(ts),as=Math.cos(ts);return ns[0]=as,ns[1]=rs,ns[2]=-rs,ns[3]=as,ns}function fromScaling$3(ns,ts){return ns[0]=ts[0],ns[1]=0,ns[2]=0,ns[3]=ts[1],ns}function str$8(ns){return"mat2("+ns[0]+", "+ns[1]+", "+ns[2]+", "+ns[3]+")"}function frob$3(ns){return Math.hypot(ns[0],ns[1],ns[2],ns[3])}function LDU(ns,ts,rs,as){return ns[2]=as[2]/as[0],rs[0]=as[0],rs[1]=as[1],rs[3]=as[3]-ns[2]*rs[1],[ns,ts,rs]}function add$9(ns,ts,rs){return ns[0]=ts[0]+rs[0],ns[1]=ts[1]+rs[1],ns[2]=ts[2]+rs[2],ns[3]=ts[3]+rs[3],ns}function subtract$6(ns,ts,rs){return ns[0]=ts[0]-rs[0],ns[1]=ts[1]-rs[1],ns[2]=ts[2]-rs[2],ns[3]=ts[3]-rs[3],ns}function exactEquals$8(ns,ts){return ns[0]===ts[0]&&ns[1]===ts[1]&&ns[2]===ts[2]&&ns[3]===ts[3]}function equals$8(ns,ts){var rs=ns[0],as=ns[1],os=ns[2],is=ns[3],us=ts[0],ls=ts[1],fs=ts[2],hs=ts[3];return Math.abs(rs-us)<=EPSILON$1*Math.max(1,Math.abs(rs),Math.abs(us))&&Math.abs(as-ls)<=EPSILON$1*Math.max(1,Math.abs(as),Math.abs(ls))&&Math.abs(os-fs)<=EPSILON$1*Math.max(1,Math.abs(os),Math.abs(fs))&&Math.abs(is-hs)<=EPSILON$1*Math.max(1,Math.abs(is),Math.abs(hs))}function multiplyScalar$3(ns,ts,rs){return ns[0]=ts[0]*rs,ns[1]=ts[1]*rs,ns[2]=ts[2]*rs,ns[3]=ts[3]*rs,ns}function multiplyScalarAndAdd$3(ns,ts,rs,as){return ns[0]=ts[0]+rs[0]*as,ns[1]=ts[1]+rs[1]*as,ns[2]=ts[2]+rs[2]*as,ns[3]=ts[3]+rs[3]*as,ns}var mul$8=multiply$8,sub$6=subtract$6;const mat2=Object.freeze(Object.defineProperty({__proto__:null,LDU,add:add$9,adjoint:adjoint$2,clone:clone$a,copy:copy$8,create:create$8,determinant:determinant$4,equals:equals$8,exactEquals:exactEquals$8,frob:frob$3,fromRotation:fromRotation$4,fromScaling:fromScaling$3,fromValues:fromValues$8,identity:identity$7,invert:invert$6,mul:mul$8,multiply:multiply$8,multiplyScalar:multiplyScalar$3,multiplyScalarAndAdd:multiplyScalarAndAdd$3,rotate:rotate$7,scale:scale$a,set:set$a,str:str$8,sub:sub$6,subtract:subtract$6,transpose:transpose$2},Symbol.toStringTag,{value:"Module"}));function create$7(){var ns=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(ns[1]=0,ns[2]=0,ns[4]=0,ns[5]=0),ns[0]=1,ns[3]=1,ns}function clone$9(ns){var ts=new ARRAY_TYPE(6);return ts[0]=ns[0],ts[1]=ns[1],ts[2]=ns[2],ts[3]=ns[3],ts[4]=ns[4],ts[5]=ns[5],ts}function copy$7(ns,ts){return ns[0]=ts[0],ns[1]=ts[1],ns[2]=ts[2],ns[3]=ts[3],ns[4]=ts[4],ns[5]=ts[5],ns}function identity$6(ns){return ns[0]=1,ns[1]=0,ns[2]=0,ns[3]=1,ns[4]=0,ns[5]=0,ns}function fromValues$7(ns,ts,rs,as,os,is){var us=new ARRAY_TYPE(6);return us[0]=ns,us[1]=ts,us[2]=rs,us[3]=as,us[4]=os,us[5]=is,us}function set$9(ns,ts,rs,as,os,is,us){return ns[0]=ts,ns[1]=rs,ns[2]=as,ns[3]=os,ns[4]=is,ns[5]=us,ns}function invert$5(ns,ts){var rs=ts[0],as=ts[1],os=ts[2],is=ts[3],us=ts[4],ls=ts[5],fs=rs*is-as*os;return fs?(fs=1/fs,ns[0]=is*fs,ns[1]=-as*fs,ns[2]=-os*fs,ns[3]=rs*fs,ns[4]=(os*ls-is*us)*fs,ns[5]=(as*us-rs*ls)*fs,ns):null}function determinant$3(ns){return ns[0]*ns[3]-ns[1]*ns[2]}function multiply$7(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=ts[4],fs=ts[5],hs=rs[0],vs=rs[1],gs=rs[2],ys=rs[3],xs=rs[4],ms=rs[5];return ns[0]=as*hs+is*vs,ns[1]=os*hs+us*vs,ns[2]=as*gs+is*ys,ns[3]=os*gs+us*ys,ns[4]=as*xs+is*ms+ls,ns[5]=os*xs+us*ms+fs,ns}function rotate$6(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=ts[4],fs=ts[5],hs=Math.sin(rs),vs=Math.cos(rs);return ns[0]=as*vs+is*hs,ns[1]=os*vs+us*hs,ns[2]=as*-hs+is*vs,ns[3]=os*-hs+us*vs,ns[4]=ls,ns[5]=fs,ns}function scale$9(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=ts[4],fs=ts[5],hs=rs[0],vs=rs[1];return ns[0]=as*hs,ns[1]=os*hs,ns[2]=is*vs,ns[3]=us*vs,ns[4]=ls,ns[5]=fs,ns}function translate$5(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=ts[4],fs=ts[5],hs=rs[0],vs=rs[1];return ns[0]=as,ns[1]=os,ns[2]=is,ns[3]=us,ns[4]=as*hs+is*vs+ls,ns[5]=os*hs+us*vs+fs,ns}function fromRotation$3(ns,ts){var rs=Math.sin(ts),as=Math.cos(ts);return ns[0]=as,ns[1]=rs,ns[2]=-rs,ns[3]=as,ns[4]=0,ns[5]=0,ns}function fromScaling$2(ns,ts){return ns[0]=ts[0],ns[1]=0,ns[2]=0,ns[3]=ts[1],ns[4]=0,ns[5]=0,ns}function fromTranslation$3(ns,ts){return ns[0]=1,ns[1]=0,ns[2]=0,ns[3]=1,ns[4]=ts[0],ns[5]=ts[1],ns}function str$7(ns){return"mat2d("+ns[0]+", "+ns[1]+", "+ns[2]+", "+ns[3]+", "+ns[4]+", "+ns[5]+")"}function frob$2(ns){return Math.hypot(ns[0],ns[1],ns[2],ns[3],ns[4],ns[5],1)}function add$8(ns,ts,rs){return ns[0]=ts[0]+rs[0],ns[1]=ts[1]+rs[1],ns[2]=ts[2]+rs[2],ns[3]=ts[3]+rs[3],ns[4]=ts[4]+rs[4],ns[5]=ts[5]+rs[5],ns}function subtract$5(ns,ts,rs){return ns[0]=ts[0]-rs[0],ns[1]=ts[1]-rs[1],ns[2]=ts[2]-rs[2],ns[3]=ts[3]-rs[3],ns[4]=ts[4]-rs[4],ns[5]=ts[5]-rs[5],ns}function multiplyScalar$2(ns,ts,rs){return ns[0]=ts[0]*rs,ns[1]=ts[1]*rs,ns[2]=ts[2]*rs,ns[3]=ts[3]*rs,ns[4]=ts[4]*rs,ns[5]=ts[5]*rs,ns}function multiplyScalarAndAdd$2(ns,ts,rs,as){return ns[0]=ts[0]+rs[0]*as,ns[1]=ts[1]+rs[1]*as,ns[2]=ts[2]+rs[2]*as,ns[3]=ts[3]+rs[3]*as,ns[4]=ts[4]+rs[4]*as,ns[5]=ts[5]+rs[5]*as,ns}function exactEquals$7(ns,ts){return ns[0]===ts[0]&&ns[1]===ts[1]&&ns[2]===ts[2]&&ns[3]===ts[3]&&ns[4]===ts[4]&&ns[5]===ts[5]}function equals$7(ns,ts){var rs=ns[0],as=ns[1],os=ns[2],is=ns[3],us=ns[4],ls=ns[5],fs=ts[0],hs=ts[1],vs=ts[2],gs=ts[3],ys=ts[4],xs=ts[5];return Math.abs(rs-fs)<=EPSILON$1*Math.max(1,Math.abs(rs),Math.abs(fs))&&Math.abs(as-hs)<=EPSILON$1*Math.max(1,Math.abs(as),Math.abs(hs))&&Math.abs(os-vs)<=EPSILON$1*Math.max(1,Math.abs(os),Math.abs(vs))&&Math.abs(is-gs)<=EPSILON$1*Math.max(1,Math.abs(is),Math.abs(gs))&&Math.abs(us-ys)<=EPSILON$1*Math.max(1,Math.abs(us),Math.abs(ys))&&Math.abs(ls-xs)<=EPSILON$1*Math.max(1,Math.abs(ls),Math.abs(xs))}var mul$7=multiply$7,sub$5=subtract$5;const mat2d=Object.freeze(Object.defineProperty({__proto__:null,add:add$8,clone:clone$9,copy:copy$7,create:create$7,determinant:determinant$3,equals:equals$7,exactEquals:exactEquals$7,frob:frob$2,fromRotation:fromRotation$3,fromScaling:fromScaling$2,fromTranslation:fromTranslation$3,fromValues:fromValues$7,identity:identity$6,invert:invert$5,mul:mul$7,multiply:multiply$7,multiplyScalar:multiplyScalar$2,multiplyScalarAndAdd:multiplyScalarAndAdd$2,rotate:rotate$6,scale:scale$9,set:set$9,str:str$7,sub:sub$5,subtract:subtract$5,translate:translate$5},Symbol.toStringTag,{value:"Module"}));function create$6(){var ns=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(ns[1]=0,ns[2]=0,ns[3]=0,ns[5]=0,ns[6]=0,ns[7]=0),ns[0]=1,ns[4]=1,ns[8]=1,ns}function fromMat4$1(ns,ts){return ns[0]=ts[0],ns[1]=ts[1],ns[2]=ts[2],ns[3]=ts[4],ns[4]=ts[5],ns[5]=ts[6],ns[6]=ts[8],ns[7]=ts[9],ns[8]=ts[10],ns}function clone$8(ns){var ts=new ARRAY_TYPE(9);return ts[0]=ns[0],ts[1]=ns[1],ts[2]=ns[2],ts[3]=ns[3],ts[4]=ns[4],ts[5]=ns[5],ts[6]=ns[6],ts[7]=ns[7],ts[8]=ns[8],ts}function copy$6(ns,ts){return ns[0]=ts[0],ns[1]=ts[1],ns[2]=ts[2],ns[3]=ts[3],ns[4]=ts[4],ns[5]=ts[5],ns[6]=ts[6],ns[7]=ts[7],ns[8]=ts[8],ns}function fromValues$6(ns,ts,rs,as,os,is,us,ls,fs){var hs=new ARRAY_TYPE(9);return hs[0]=ns,hs[1]=ts,hs[2]=rs,hs[3]=as,hs[4]=os,hs[5]=is,hs[6]=us,hs[7]=ls,hs[8]=fs,hs}function set$8(ns,ts,rs,as,os,is,us,ls,fs,hs){return ns[0]=ts,ns[1]=rs,ns[2]=as,ns[3]=os,ns[4]=is,ns[5]=us,ns[6]=ls,ns[7]=fs,ns[8]=hs,ns}function identity$5(ns){return ns[0]=1,ns[1]=0,ns[2]=0,ns[3]=0,ns[4]=1,ns[5]=0,ns[6]=0,ns[7]=0,ns[8]=1,ns}function transpose$1(ns,ts){if(ns===ts){var rs=ts[1],as=ts[2],os=ts[5];ns[1]=ts[3],ns[2]=ts[6],ns[3]=rs,ns[5]=ts[7],ns[6]=as,ns[7]=os}else ns[0]=ts[0],ns[1]=ts[3],ns[2]=ts[6],ns[3]=ts[1],ns[4]=ts[4],ns[5]=ts[7],ns[6]=ts[2],ns[7]=ts[5],ns[8]=ts[8];return ns}function invert$4(ns,ts){var rs=ts[0],as=ts[1],os=ts[2],is=ts[3],us=ts[4],ls=ts[5],fs=ts[6],hs=ts[7],vs=ts[8],gs=vs*us-ls*hs,ys=-vs*is+ls*fs,xs=hs*is-us*fs,ms=rs*gs+as*ys+os*xs;return ms?(ms=1/ms,ns[0]=gs*ms,ns[1]=(-vs*as+os*hs)*ms,ns[2]=(ls*as-os*us)*ms,ns[3]=ys*ms,ns[4]=(vs*rs-os*fs)*ms,ns[5]=(-ls*rs+os*is)*ms,ns[6]=xs*ms,ns[7]=(-hs*rs+as*fs)*ms,ns[8]=(us*rs-as*is)*ms,ns):null}function adjoint$1(ns,ts){var rs=ts[0],as=ts[1],os=ts[2],is=ts[3],us=ts[4],ls=ts[5],fs=ts[6],hs=ts[7],vs=ts[8];return ns[0]=us*vs-ls*hs,ns[1]=os*hs-as*vs,ns[2]=as*ls-os*us,ns[3]=ls*fs-is*vs,ns[4]=rs*vs-os*fs,ns[5]=os*is-rs*ls,ns[6]=is*hs-us*fs,ns[7]=as*fs-rs*hs,ns[8]=rs*us-as*is,ns}function determinant$2(ns){var ts=ns[0],rs=ns[1],as=ns[2],os=ns[3],is=ns[4],us=ns[5],ls=ns[6],fs=ns[7],hs=ns[8];return ts*(hs*is-us*fs)+rs*(-hs*os+us*ls)+as*(fs*os-is*ls)}function multiply$6(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=ts[4],fs=ts[5],hs=ts[6],vs=ts[7],gs=ts[8],ys=rs[0],xs=rs[1],ms=rs[2],Ss=rs[3],Ms=rs[4],$s=rs[5],bs=rs[6],Cs=rs[7],As=rs[8];return ns[0]=ys*as+xs*us+ms*hs,ns[1]=ys*os+xs*ls+ms*vs,ns[2]=ys*is+xs*fs+ms*gs,ns[3]=Ss*as+Ms*us+$s*hs,ns[4]=Ss*os+Ms*ls+$s*vs,ns[5]=Ss*is+Ms*fs+$s*gs,ns[6]=bs*as+Cs*us+As*hs,ns[7]=bs*os+Cs*ls+As*vs,ns[8]=bs*is+Cs*fs+As*gs,ns}function translate$4(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=ts[4],fs=ts[5],hs=ts[6],vs=ts[7],gs=ts[8],ys=rs[0],xs=rs[1];return ns[0]=as,ns[1]=os,ns[2]=is,ns[3]=us,ns[4]=ls,ns[5]=fs,ns[6]=ys*as+xs*us+hs,ns[7]=ys*os+xs*ls+vs,ns[8]=ys*is+xs*fs+gs,ns}function rotate$5(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=ts[4],fs=ts[5],hs=ts[6],vs=ts[7],gs=ts[8],ys=Math.sin(rs),xs=Math.cos(rs);return ns[0]=xs*as+ys*us,ns[1]=xs*os+ys*ls,ns[2]=xs*is+ys*fs,ns[3]=xs*us-ys*as,ns[4]=xs*ls-ys*os,ns[5]=xs*fs-ys*is,ns[6]=hs,ns[7]=vs,ns[8]=gs,ns}function scale$8(ns,ts,rs){var as=rs[0],os=rs[1];return ns[0]=as*ts[0],ns[1]=as*ts[1],ns[2]=as*ts[2],ns[3]=os*ts[3],ns[4]=os*ts[4],ns[5]=os*ts[5],ns[6]=ts[6],ns[7]=ts[7],ns[8]=ts[8],ns}function fromTranslation$2(ns,ts){return ns[0]=1,ns[1]=0,ns[2]=0,ns[3]=0,ns[4]=1,ns[5]=0,ns[6]=ts[0],ns[7]=ts[1],ns[8]=1,ns}function fromRotation$2(ns,ts){var rs=Math.sin(ts),as=Math.cos(ts);return ns[0]=as,ns[1]=rs,ns[2]=0,ns[3]=-rs,ns[4]=as,ns[5]=0,ns[6]=0,ns[7]=0,ns[8]=1,ns}function fromScaling$1(ns,ts){return ns[0]=ts[0],ns[1]=0,ns[2]=0,ns[3]=0,ns[4]=ts[1],ns[5]=0,ns[6]=0,ns[7]=0,ns[8]=1,ns}function fromMat2d(ns,ts){return ns[0]=ts[0],ns[1]=ts[1],ns[2]=0,ns[3]=ts[2],ns[4]=ts[3],ns[5]=0,ns[6]=ts[4],ns[7]=ts[5],ns[8]=1,ns}function fromQuat$1(ns,ts){var rs=ts[0],as=ts[1],os=ts[2],is=ts[3],us=rs+rs,ls=as+as,fs=os+os,hs=rs*us,vs=as*us,gs=as*ls,ys=os*us,xs=os*ls,ms=os*fs,Ss=is*us,Ms=is*ls,$s=is*fs;return ns[0]=1-gs-ms,ns[3]=vs-$s,ns[6]=ys+Ms,ns[1]=vs+$s,ns[4]=1-hs-ms,ns[7]=xs-Ss,ns[2]=ys-Ms,ns[5]=xs+Ss,ns[8]=1-hs-gs,ns}function normalFromMat4(ns,ts){var rs=ts[0],as=ts[1],os=ts[2],is=ts[3],us=ts[4],ls=ts[5],fs=ts[6],hs=ts[7],vs=ts[8],gs=ts[9],ys=ts[10],xs=ts[11],ms=ts[12],Ss=ts[13],Ms=ts[14],$s=ts[15],bs=rs*ls-as*us,Cs=rs*fs-os*us,As=rs*hs-is*us,Is=as*fs-os*ls,ks=as*hs-is*ls,Ps=os*hs-is*fs,Ds=vs*Ss-gs*ms,Fs=vs*Ms-ys*ms,Rs=vs*$s-xs*ms,js=gs*Ms-ys*Ss,zs=gs*$s-xs*Ss,Us=ys*$s-xs*Ms,Ys=bs*Us-Cs*zs+As*js+Is*Rs-ks*Fs+Ps*Ds;return Ys?(Ys=1/Ys,ns[0]=(ls*Us-fs*zs+hs*js)*Ys,ns[1]=(fs*Rs-us*Us-hs*Fs)*Ys,ns[2]=(us*zs-ls*Rs+hs*Ds)*Ys,ns[3]=(os*zs-as*Us-is*js)*Ys,ns[4]=(rs*Us-os*Rs+is*Fs)*Ys,ns[5]=(as*Rs-rs*zs-is*Ds)*Ys,ns[6]=(Ss*Ps-Ms*ks+$s*Is)*Ys,ns[7]=(Ms*As-ms*Ps-$s*Cs)*Ys,ns[8]=(ms*ks-Ss*As+$s*bs)*Ys,ns):null}function projection(ns,ts,rs){return ns[0]=2/ts,ns[1]=0,ns[2]=0,ns[3]=0,ns[4]=-2/rs,ns[5]=0,ns[6]=-1,ns[7]=1,ns[8]=1,ns}function str$6(ns){return"mat3("+ns[0]+", "+ns[1]+", "+ns[2]+", "+ns[3]+", "+ns[4]+", "+ns[5]+", "+ns[6]+", "+ns[7]+", "+ns[8]+")"}function frob$1(ns){return Math.hypot(ns[0],ns[1],ns[2],ns[3],ns[4],ns[5],ns[6],ns[7],ns[8])}function add$7(ns,ts,rs){return ns[0]=ts[0]+rs[0],ns[1]=ts[1]+rs[1],ns[2]=ts[2]+rs[2],ns[3]=ts[3]+rs[3],ns[4]=ts[4]+rs[4],ns[5]=ts[5]+rs[5],ns[6]=ts[6]+rs[6],ns[7]=ts[7]+rs[7],ns[8]=ts[8]+rs[8],ns}function subtract$4(ns,ts,rs){return ns[0]=ts[0]-rs[0],ns[1]=ts[1]-rs[1],ns[2]=ts[2]-rs[2],ns[3]=ts[3]-rs[3],ns[4]=ts[4]-rs[4],ns[5]=ts[5]-rs[5],ns[6]=ts[6]-rs[6],ns[7]=ts[7]-rs[7],ns[8]=ts[8]-rs[8],ns}function multiplyScalar$1(ns,ts,rs){return ns[0]=ts[0]*rs,ns[1]=ts[1]*rs,ns[2]=ts[2]*rs,ns[3]=ts[3]*rs,ns[4]=ts[4]*rs,ns[5]=ts[5]*rs,ns[6]=ts[6]*rs,ns[7]=ts[7]*rs,ns[8]=ts[8]*rs,ns}function multiplyScalarAndAdd$1(ns,ts,rs,as){return ns[0]=ts[0]+rs[0]*as,ns[1]=ts[1]+rs[1]*as,ns[2]=ts[2]+rs[2]*as,ns[3]=ts[3]+rs[3]*as,ns[4]=ts[4]+rs[4]*as,ns[5]=ts[5]+rs[5]*as,ns[6]=ts[6]+rs[6]*as,ns[7]=ts[7]+rs[7]*as,ns[8]=ts[8]+rs[8]*as,ns}function exactEquals$6(ns,ts){return ns[0]===ts[0]&&ns[1]===ts[1]&&ns[2]===ts[2]&&ns[3]===ts[3]&&ns[4]===ts[4]&&ns[5]===ts[5]&&ns[6]===ts[6]&&ns[7]===ts[7]&&ns[8]===ts[8]}function equals$6(ns,ts){var rs=ns[0],as=ns[1],os=ns[2],is=ns[3],us=ns[4],ls=ns[5],fs=ns[6],hs=ns[7],vs=ns[8],gs=ts[0],ys=ts[1],xs=ts[2],ms=ts[3],Ss=ts[4],Ms=ts[5],$s=ts[6],bs=ts[7],Cs=ts[8];return Math.abs(rs-gs)<=EPSILON$1*Math.max(1,Math.abs(rs),Math.abs(gs))&&Math.abs(as-ys)<=EPSILON$1*Math.max(1,Math.abs(as),Math.abs(ys))&&Math.abs(os-xs)<=EPSILON$1*Math.max(1,Math.abs(os),Math.abs(xs))&&Math.abs(is-ms)<=EPSILON$1*Math.max(1,Math.abs(is),Math.abs(ms))&&Math.abs(us-Ss)<=EPSILON$1*Math.max(1,Math.abs(us),Math.abs(Ss))&&Math.abs(ls-Ms)<=EPSILON$1*Math.max(1,Math.abs(ls),Math.abs(Ms))&&Math.abs(fs-$s)<=EPSILON$1*Math.max(1,Math.abs(fs),Math.abs($s))&&Math.abs(hs-bs)<=EPSILON$1*Math.max(1,Math.abs(hs),Math.abs(bs))&&Math.abs(vs-Cs)<=EPSILON$1*Math.max(1,Math.abs(vs),Math.abs(Cs))}var mul$6=multiply$6,sub$4=subtract$4;const mat3=Object.freeze(Object.defineProperty({__proto__:null,add:add$7,adjoint:adjoint$1,clone:clone$8,copy:copy$6,create:create$6,determinant:determinant$2,equals:equals$6,exactEquals:exactEquals$6,frob:frob$1,fromMat2d,fromMat4:fromMat4$1,fromQuat:fromQuat$1,fromRotation:fromRotation$2,fromScaling:fromScaling$1,fromTranslation:fromTranslation$2,fromValues:fromValues$6,identity:identity$5,invert:invert$4,mul:mul$6,multiply:multiply$6,multiplyScalar:multiplyScalar$1,multiplyScalarAndAdd:multiplyScalarAndAdd$1,normalFromMat4,projection,rotate:rotate$5,scale:scale$8,set:set$8,str:str$6,sub:sub$4,subtract:subtract$4,translate:translate$4,transpose:transpose$1},Symbol.toStringTag,{value:"Module"}));function create$5(){var ns=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(ns[1]=0,ns[2]=0,ns[3]=0,ns[4]=0,ns[6]=0,ns[7]=0,ns[8]=0,ns[9]=0,ns[11]=0,ns[12]=0,ns[13]=0,ns[14]=0),ns[0]=1,ns[5]=1,ns[10]=1,ns[15]=1,ns}function clone$7(ns){var ts=new ARRAY_TYPE(16);return ts[0]=ns[0],ts[1]=ns[1],ts[2]=ns[2],ts[3]=ns[3],ts[4]=ns[4],ts[5]=ns[5],ts[6]=ns[6],ts[7]=ns[7],ts[8]=ns[8],ts[9]=ns[9],ts[10]=ns[10],ts[11]=ns[11],ts[12]=ns[12],ts[13]=ns[13],ts[14]=ns[14],ts[15]=ns[15],ts}function copy$5(ns,ts){return ns[0]=ts[0],ns[1]=ts[1],ns[2]=ts[2],ns[3]=ts[3],ns[4]=ts[4],ns[5]=ts[5],ns[6]=ts[6],ns[7]=ts[7],ns[8]=ts[8],ns[9]=ts[9],ns[10]=ts[10],ns[11]=ts[11],ns[12]=ts[12],ns[13]=ts[13],ns[14]=ts[14],ns[15]=ts[15],ns}function fromValues$5(ns,ts,rs,as,os,is,us,ls,fs,hs,vs,gs,ys,xs,ms,Ss){var Ms=new ARRAY_TYPE(16);return Ms[0]=ns,Ms[1]=ts,Ms[2]=rs,Ms[3]=as,Ms[4]=os,Ms[5]=is,Ms[6]=us,Ms[7]=ls,Ms[8]=fs,Ms[9]=hs,Ms[10]=vs,Ms[11]=gs,Ms[12]=ys,Ms[13]=xs,Ms[14]=ms,Ms[15]=Ss,Ms}function set$7(ns,ts,rs,as,os,is,us,ls,fs,hs,vs,gs,ys,xs,ms,Ss,Ms){return ns[0]=ts,ns[1]=rs,ns[2]=as,ns[3]=os,ns[4]=is,ns[5]=us,ns[6]=ls,ns[7]=fs,ns[8]=hs,ns[9]=vs,ns[10]=gs,ns[11]=ys,ns[12]=xs,ns[13]=ms,ns[14]=Ss,ns[15]=Ms,ns}function identity$4(ns){return ns[0]=1,ns[1]=0,ns[2]=0,ns[3]=0,ns[4]=0,ns[5]=1,ns[6]=0,ns[7]=0,ns[8]=0,ns[9]=0,ns[10]=1,ns[11]=0,ns[12]=0,ns[13]=0,ns[14]=0,ns[15]=1,ns}function transpose(ns,ts){if(ns===ts){var rs=ts[1],as=ts[2],os=ts[3],is=ts[6],us=ts[7],ls=ts[11];ns[1]=ts[4],ns[2]=ts[8],ns[3]=ts[12],ns[4]=rs,ns[6]=ts[9],ns[7]=ts[13],ns[8]=as,ns[9]=is,ns[11]=ts[14],ns[12]=os,ns[13]=us,ns[14]=ls}else ns[0]=ts[0],ns[1]=ts[4],ns[2]=ts[8],ns[3]=ts[12],ns[4]=ts[1],ns[5]=ts[5],ns[6]=ts[9],ns[7]=ts[13],ns[8]=ts[2],ns[9]=ts[6],ns[10]=ts[10],ns[11]=ts[14],ns[12]=ts[3],ns[13]=ts[7],ns[14]=ts[11],ns[15]=ts[15];return ns}function invert$3(ns,ts){var rs=ts[0],as=ts[1],os=ts[2],is=ts[3],us=ts[4],ls=ts[5],fs=ts[6],hs=ts[7],vs=ts[8],gs=ts[9],ys=ts[10],xs=ts[11],ms=ts[12],Ss=ts[13],Ms=ts[14],$s=ts[15],bs=rs*ls-as*us,Cs=rs*fs-os*us,As=rs*hs-is*us,Is=as*fs-os*ls,ks=as*hs-is*ls,Ps=os*hs-is*fs,Ds=vs*Ss-gs*ms,Fs=vs*Ms-ys*ms,Rs=vs*$s-xs*ms,js=gs*Ms-ys*Ss,zs=gs*$s-xs*Ss,Us=ys*$s-xs*Ms,Ys=bs*Us-Cs*zs+As*js+Is*Rs-ks*Fs+Ps*Ds;return Ys?(Ys=1/Ys,ns[0]=(ls*Us-fs*zs+hs*js)*Ys,ns[1]=(os*zs-as*Us-is*js)*Ys,ns[2]=(Ss*Ps-Ms*ks+$s*Is)*Ys,ns[3]=(ys*ks-gs*Ps-xs*Is)*Ys,ns[4]=(fs*Rs-us*Us-hs*Fs)*Ys,ns[5]=(rs*Us-os*Rs+is*Fs)*Ys,ns[6]=(Ms*As-ms*Ps-$s*Cs)*Ys,ns[7]=(vs*Ps-ys*As+xs*Cs)*Ys,ns[8]=(us*zs-ls*Rs+hs*Ds)*Ys,ns[9]=(as*Rs-rs*zs-is*Ds)*Ys,ns[10]=(ms*ks-Ss*As+$s*bs)*Ys,ns[11]=(gs*As-vs*ks-xs*bs)*Ys,ns[12]=(ls*Fs-us*js-fs*Ds)*Ys,ns[13]=(rs*js-as*Fs+os*Ds)*Ys,ns[14]=(Ss*Cs-ms*Is-Ms*bs)*Ys,ns[15]=(vs*Is-gs*Cs+ys*bs)*Ys,ns):null}function adjoint(ns,ts){var rs=ts[0],as=ts[1],os=ts[2],is=ts[3],us=ts[4],ls=ts[5],fs=ts[6],hs=ts[7],vs=ts[8],gs=ts[9],ys=ts[10],xs=ts[11],ms=ts[12],Ss=ts[13],Ms=ts[14],$s=ts[15];return ns[0]=ls*(ys*$s-xs*Ms)-gs*(fs*$s-hs*Ms)+Ss*(fs*xs-hs*ys),ns[1]=-(as*(ys*$s-xs*Ms)-gs*(os*$s-is*Ms)+Ss*(os*xs-is*ys)),ns[2]=as*(fs*$s-hs*Ms)-ls*(os*$s-is*Ms)+Ss*(os*hs-is*fs),ns[3]=-(as*(fs*xs-hs*ys)-ls*(os*xs-is*ys)+gs*(os*hs-is*fs)),ns[4]=-(us*(ys*$s-xs*Ms)-vs*(fs*$s-hs*Ms)+ms*(fs*xs-hs*ys)),ns[5]=rs*(ys*$s-xs*Ms)-vs*(os*$s-is*Ms)+ms*(os*xs-is*ys),ns[6]=-(rs*(fs*$s-hs*Ms)-us*(os*$s-is*Ms)+ms*(os*hs-is*fs)),ns[7]=rs*(fs*xs-hs*ys)-us*(os*xs-is*ys)+vs*(os*hs-is*fs),ns[8]=us*(gs*$s-xs*Ss)-vs*(ls*$s-hs*Ss)+ms*(ls*xs-hs*gs),ns[9]=-(rs*(gs*$s-xs*Ss)-vs*(as*$s-is*Ss)+ms*(as*xs-is*gs)),ns[10]=rs*(ls*$s-hs*Ss)-us*(as*$s-is*Ss)+ms*(as*hs-is*ls),ns[11]=-(rs*(ls*xs-hs*gs)-us*(as*xs-is*gs)+vs*(as*hs-is*ls)),ns[12]=-(us*(gs*Ms-ys*Ss)-vs*(ls*Ms-fs*Ss)+ms*(ls*ys-fs*gs)),ns[13]=rs*(gs*Ms-ys*Ss)-vs*(as*Ms-os*Ss)+ms*(as*ys-os*gs),ns[14]=-(rs*(ls*Ms-fs*Ss)-us*(as*Ms-os*Ss)+ms*(as*fs-os*ls)),ns[15]=rs*(ls*ys-fs*gs)-us*(as*ys-os*gs)+vs*(as*fs-os*ls),ns}function determinant$1(ns){var ts=ns[0],rs=ns[1],as=ns[2],os=ns[3],is=ns[4],us=ns[5],ls=ns[6],fs=ns[7],hs=ns[8],vs=ns[9],gs=ns[10],ys=ns[11],xs=ns[12],ms=ns[13],Ss=ns[14],Ms=ns[15],$s=ts*us-rs*is,bs=ts*ls-as*is,Cs=ts*fs-os*is,As=rs*ls-as*us,Is=rs*fs-os*us,ks=as*fs-os*ls,Ps=hs*ms-vs*xs,Ds=hs*Ss-gs*xs,Fs=hs*Ms-ys*xs,Rs=vs*Ss-gs*ms,js=vs*Ms-ys*ms,zs=gs*Ms-ys*Ss;return $s*zs-bs*js+Cs*Rs+As*Fs-Is*Ds+ks*Ps}function multiply$5(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=ts[4],fs=ts[5],hs=ts[6],vs=ts[7],gs=ts[8],ys=ts[9],xs=ts[10],ms=ts[11],Ss=ts[12],Ms=ts[13],$s=ts[14],bs=ts[15],Cs=rs[0],As=rs[1],Is=rs[2],ks=rs[3];return ns[0]=Cs*as+As*ls+Is*gs+ks*Ss,ns[1]=Cs*os+As*fs+Is*ys+ks*Ms,ns[2]=Cs*is+As*hs+Is*xs+ks*$s,ns[3]=Cs*us+As*vs+Is*ms+ks*bs,Cs=rs[4],As=rs[5],Is=rs[6],ks=rs[7],ns[4]=Cs*as+As*ls+Is*gs+ks*Ss,ns[5]=Cs*os+As*fs+Is*ys+ks*Ms,ns[6]=Cs*is+As*hs+Is*xs+ks*$s,ns[7]=Cs*us+As*vs+Is*ms+ks*bs,Cs=rs[8],As=rs[9],Is=rs[10],ks=rs[11],ns[8]=Cs*as+As*ls+Is*gs+ks*Ss,ns[9]=Cs*os+As*fs+Is*ys+ks*Ms,ns[10]=Cs*is+As*hs+Is*xs+ks*$s,ns[11]=Cs*us+As*vs+Is*ms+ks*bs,Cs=rs[12],As=rs[13],Is=rs[14],ks=rs[15],ns[12]=Cs*as+As*ls+Is*gs+ks*Ss,ns[13]=Cs*os+As*fs+Is*ys+ks*Ms,ns[14]=Cs*is+As*hs+Is*xs+ks*$s,ns[15]=Cs*us+As*vs+Is*ms+ks*bs,ns}function translate$3(ns,ts,rs){var as=rs[0],os=rs[1],is=rs[2],us,ls,fs,hs,vs,gs,ys,xs,ms,Ss,Ms,$s;return ts===ns?(ns[12]=ts[0]*as+ts[4]*os+ts[8]*is+ts[12],ns[13]=ts[1]*as+ts[5]*os+ts[9]*is+ts[13],ns[14]=ts[2]*as+ts[6]*os+ts[10]*is+ts[14],ns[15]=ts[3]*as+ts[7]*os+ts[11]*is+ts[15]):(us=ts[0],ls=ts[1],fs=ts[2],hs=ts[3],vs=ts[4],gs=ts[5],ys=ts[6],xs=ts[7],ms=ts[8],Ss=ts[9],Ms=ts[10],$s=ts[11],ns[0]=us,ns[1]=ls,ns[2]=fs,ns[3]=hs,ns[4]=vs,ns[5]=gs,ns[6]=ys,ns[7]=xs,ns[8]=ms,ns[9]=Ss,ns[10]=Ms,ns[11]=$s,ns[12]=us*as+vs*os+ms*is+ts[12],ns[13]=ls*as+gs*os+Ss*is+ts[13],ns[14]=fs*as+ys*os+Ms*is+ts[14],ns[15]=hs*as+xs*os+$s*is+ts[15]),ns}function scale$7(ns,ts,rs){var as=rs[0],os=rs[1],is=rs[2];return ns[0]=ts[0]*as,ns[1]=ts[1]*as,ns[2]=ts[2]*as,ns[3]=ts[3]*as,ns[4]=ts[4]*os,ns[5]=ts[5]*os,ns[6]=ts[6]*os,ns[7]=ts[7]*os,ns[8]=ts[8]*is,ns[9]=ts[9]*is,ns[10]=ts[10]*is,ns[11]=ts[11]*is,ns[12]=ts[12],ns[13]=ts[13],ns[14]=ts[14],ns[15]=ts[15],ns}function rotate$4(ns,ts,rs,as){var os=as[0],is=as[1],us=as[2],ls=Math.hypot(os,is,us),fs,hs,vs,gs,ys,xs,ms,Ss,Ms,$s,bs,Cs,As,Is,ks,Ps,Ds,Fs,Rs,js,zs,Us,Ys,Ks;return ls<EPSILON$1?null:(ls=1/ls,os*=ls,is*=ls,us*=ls,fs=Math.sin(rs),hs=Math.cos(rs),vs=1-hs,gs=ts[0],ys=ts[1],xs=ts[2],ms=ts[3],Ss=ts[4],Ms=ts[5],$s=ts[6],bs=ts[7],Cs=ts[8],As=ts[9],Is=ts[10],ks=ts[11],Ps=os*os*vs+hs,Ds=is*os*vs+us*fs,Fs=us*os*vs-is*fs,Rs=os*is*vs-us*fs,js=is*is*vs+hs,zs=us*is*vs+os*fs,Us=os*us*vs+is*fs,Ys=is*us*vs-os*fs,Ks=us*us*vs+hs,ns[0]=gs*Ps+Ss*Ds+Cs*Fs,ns[1]=ys*Ps+Ms*Ds+As*Fs,ns[2]=xs*Ps+$s*Ds+Is*Fs,ns[3]=ms*Ps+bs*Ds+ks*Fs,ns[4]=gs*Rs+Ss*js+Cs*zs,ns[5]=ys*Rs+Ms*js+As*zs,ns[6]=xs*Rs+$s*js+Is*zs,ns[7]=ms*Rs+bs*js+ks*zs,ns[8]=gs*Us+Ss*Ys+Cs*Ks,ns[9]=ys*Us+Ms*Ys+As*Ks,ns[10]=xs*Us+$s*Ys+Is*Ks,ns[11]=ms*Us+bs*Ys+ks*Ks,ts!==ns&&(ns[12]=ts[12],ns[13]=ts[13],ns[14]=ts[14],ns[15]=ts[15]),ns)}function rotateX$3(ns,ts,rs){var as=Math.sin(rs),os=Math.cos(rs),is=ts[4],us=ts[5],ls=ts[6],fs=ts[7],hs=ts[8],vs=ts[9],gs=ts[10],ys=ts[11];return ts!==ns&&(ns[0]=ts[0],ns[1]=ts[1],ns[2]=ts[2],ns[3]=ts[3],ns[12]=ts[12],ns[13]=ts[13],ns[14]=ts[14],ns[15]=ts[15]),ns[4]=is*os+hs*as,ns[5]=us*os+vs*as,ns[6]=ls*os+gs*as,ns[7]=fs*os+ys*as,ns[8]=hs*os-is*as,ns[9]=vs*os-us*as,ns[10]=gs*os-ls*as,ns[11]=ys*os-fs*as,ns}function rotateY$3(ns,ts,rs){var as=Math.sin(rs),os=Math.cos(rs),is=ts[0],us=ts[1],ls=ts[2],fs=ts[3],hs=ts[8],vs=ts[9],gs=ts[10],ys=ts[11];return ts!==ns&&(ns[4]=ts[4],ns[5]=ts[5],ns[6]=ts[6],ns[7]=ts[7],ns[12]=ts[12],ns[13]=ts[13],ns[14]=ts[14],ns[15]=ts[15]),ns[0]=is*os-hs*as,ns[1]=us*os-vs*as,ns[2]=ls*os-gs*as,ns[3]=fs*os-ys*as,ns[8]=is*as+hs*os,ns[9]=us*as+vs*os,ns[10]=ls*as+gs*os,ns[11]=fs*as+ys*os,ns}function rotateZ$3(ns,ts,rs){var as=Math.sin(rs),os=Math.cos(rs),is=ts[0],us=ts[1],ls=ts[2],fs=ts[3],hs=ts[4],vs=ts[5],gs=ts[6],ys=ts[7];return ts!==ns&&(ns[8]=ts[8],ns[9]=ts[9],ns[10]=ts[10],ns[11]=ts[11],ns[12]=ts[12],ns[13]=ts[13],ns[14]=ts[14],ns[15]=ts[15]),ns[0]=is*os+hs*as,ns[1]=us*os+vs*as,ns[2]=ls*os+gs*as,ns[3]=fs*os+ys*as,ns[4]=hs*os-is*as,ns[5]=vs*os-us*as,ns[6]=gs*os-ls*as,ns[7]=ys*os-fs*as,ns}function fromTranslation$1(ns,ts){return ns[0]=1,ns[1]=0,ns[2]=0,ns[3]=0,ns[4]=0,ns[5]=1,ns[6]=0,ns[7]=0,ns[8]=0,ns[9]=0,ns[10]=1,ns[11]=0,ns[12]=ts[0],ns[13]=ts[1],ns[14]=ts[2],ns[15]=1,ns}function fromScaling(ns,ts){return ns[0]=ts[0],ns[1]=0,ns[2]=0,ns[3]=0,ns[4]=0,ns[5]=ts[1],ns[6]=0,ns[7]=0,ns[8]=0,ns[9]=0,ns[10]=ts[2],ns[11]=0,ns[12]=0,ns[13]=0,ns[14]=0,ns[15]=1,ns}function fromRotation$1(ns,ts,rs){var as=rs[0],os=rs[1],is=rs[2],us=Math.hypot(as,os,is),ls,fs,hs;return us<EPSILON$1?null:(us=1/us,as*=us,os*=us,is*=us,ls=Math.sin(ts),fs=Math.cos(ts),hs=1-fs,ns[0]=as*as*hs+fs,ns[1]=os*as*hs+is*ls,ns[2]=is*as*hs-os*ls,ns[3]=0,ns[4]=as*os*hs-is*ls,ns[5]=os*os*hs+fs,ns[6]=is*os*hs+as*ls,ns[7]=0,ns[8]=as*is*hs+os*ls,ns[9]=os*is*hs-as*ls,ns[10]=is*is*hs+fs,ns[11]=0,ns[12]=0,ns[13]=0,ns[14]=0,ns[15]=1,ns)}function fromXRotation(ns,ts){var rs=Math.sin(ts),as=Math.cos(ts);return ns[0]=1,ns[1]=0,ns[2]=0,ns[3]=0,ns[4]=0,ns[5]=as,ns[6]=rs,ns[7]=0,ns[8]=0,ns[9]=-rs,ns[10]=as,ns[11]=0,ns[12]=0,ns[13]=0,ns[14]=0,ns[15]=1,ns}function fromYRotation(ns,ts){var rs=Math.sin(ts),as=Math.cos(ts);return ns[0]=as,ns[1]=0,ns[2]=-rs,ns[3]=0,ns[4]=0,ns[5]=1,ns[6]=0,ns[7]=0,ns[8]=rs,ns[9]=0,ns[10]=as,ns[11]=0,ns[12]=0,ns[13]=0,ns[14]=0,ns[15]=1,ns}function fromZRotation(ns,ts){var rs=Math.sin(ts),as=Math.cos(ts);return ns[0]=as,ns[1]=rs,ns[2]=0,ns[3]=0,ns[4]=-rs,ns[5]=as,ns[6]=0,ns[7]=0,ns[8]=0,ns[9]=0,ns[10]=1,ns[11]=0,ns[12]=0,ns[13]=0,ns[14]=0,ns[15]=1,ns}function fromRotationTranslation$1(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=as+as,fs=os+os,hs=is+is,vs=as*ls,gs=as*fs,ys=as*hs,xs=os*fs,ms=os*hs,Ss=is*hs,Ms=us*ls,$s=us*fs,bs=us*hs;return ns[0]=1-(xs+Ss),ns[1]=gs+bs,ns[2]=ys-$s,ns[3]=0,ns[4]=gs-bs,ns[5]=1-(vs+Ss),ns[6]=ms+Ms,ns[7]=0,ns[8]=ys+$s,ns[9]=ms-Ms,ns[10]=1-(vs+xs),ns[11]=0,ns[12]=rs[0],ns[13]=rs[1],ns[14]=rs[2],ns[15]=1,ns}function fromQuat2(ns,ts){var rs=new ARRAY_TYPE(3),as=-ts[0],os=-ts[1],is=-ts[2],us=ts[3],ls=ts[4],fs=ts[5],hs=ts[6],vs=ts[7],gs=as*as+os*os+is*is+us*us;return gs>0?(rs[0]=(ls*us+vs*as+fs*is-hs*os)*2/gs,rs[1]=(fs*us+vs*os+hs*as-ls*is)*2/gs,rs[2]=(hs*us+vs*is+ls*os-fs*as)*2/gs):(rs[0]=(ls*us+vs*as+fs*is-hs*os)*2,rs[1]=(fs*us+vs*os+hs*as-ls*is)*2,rs[2]=(hs*us+vs*is+ls*os-fs*as)*2),fromRotationTranslation$1(ns,ts,rs),ns}function getTranslation$1(ns,ts){return ns[0]=ts[12],ns[1]=ts[13],ns[2]=ts[14],ns}function getScaling(ns,ts){var rs=ts[0],as=ts[1],os=ts[2],is=ts[4],us=ts[5],ls=ts[6],fs=ts[8],hs=ts[9],vs=ts[10];return ns[0]=Math.hypot(rs,as,os),ns[1]=Math.hypot(is,us,ls),ns[2]=Math.hypot(fs,hs,vs),ns}function getRotation(ns,ts){var rs=new ARRAY_TYPE(3);getScaling(rs,ts);var as=1/rs[0],os=1/rs[1],is=1/rs[2],us=ts[0]*as,ls=ts[1]*os,fs=ts[2]*is,hs=ts[4]*as,vs=ts[5]*os,gs=ts[6]*is,ys=ts[8]*as,xs=ts[9]*os,ms=ts[10]*is,Ss=us+vs+ms,Ms=0;return Ss>0?(Ms=Math.sqrt(Ss+1)*2,ns[3]=.25*Ms,ns[0]=(gs-xs)/Ms,ns[1]=(ys-fs)/Ms,ns[2]=(ls-hs)/Ms):us>vs&&us>ms?(Ms=Math.sqrt(1+us-vs-ms)*2,ns[3]=(gs-xs)/Ms,ns[0]=.25*Ms,ns[1]=(ls+hs)/Ms,ns[2]=(ys+fs)/Ms):vs>ms?(Ms=Math.sqrt(1+vs-us-ms)*2,ns[3]=(ys-fs)/Ms,ns[0]=(ls+hs)/Ms,ns[1]=.25*Ms,ns[2]=(gs+xs)/Ms):(Ms=Math.sqrt(1+ms-us-vs)*2,ns[3]=(ls-hs)/Ms,ns[0]=(ys+fs)/Ms,ns[1]=(gs+xs)/Ms,ns[2]=.25*Ms),ns}function fromRotationTranslationScale(ns,ts,rs,as){var os=ts[0],is=ts[1],us=ts[2],ls=ts[3],fs=os+os,hs=is+is,vs=us+us,gs=os*fs,ys=os*hs,xs=os*vs,ms=is*hs,Ss=is*vs,Ms=us*vs,$s=ls*fs,bs=ls*hs,Cs=ls*vs,As=as[0],Is=as[1],ks=as[2];return ns[0]=(1-(ms+Ms))*As,ns[1]=(ys+Cs)*As,ns[2]=(xs-bs)*As,ns[3]=0,ns[4]=(ys-Cs)*Is,ns[5]=(1-(gs+Ms))*Is,ns[6]=(Ss+$s)*Is,ns[7]=0,ns[8]=(xs+bs)*ks,ns[9]=(Ss-$s)*ks,ns[10]=(1-(gs+ms))*ks,ns[11]=0,ns[12]=rs[0],ns[13]=rs[1],ns[14]=rs[2],ns[15]=1,ns}function fromRotationTranslationScaleOrigin(ns,ts,rs,as,os){var is=ts[0],us=ts[1],ls=ts[2],fs=ts[3],hs=is+is,vs=us+us,gs=ls+ls,ys=is*hs,xs=is*vs,ms=is*gs,Ss=us*vs,Ms=us*gs,$s=ls*gs,bs=fs*hs,Cs=fs*vs,As=fs*gs,Is=as[0],ks=as[1],Ps=as[2],Ds=os[0],Fs=os[1],Rs=os[2],js=(1-(Ss+$s))*Is,zs=(xs+As)*Is,Us=(ms-Cs)*Is,Ys=(xs-As)*ks,Ks=(1-(ys+$s))*ks,qs=(Ms+bs)*ks,_l=(ms+Cs)*Ps,Js=(Ms-bs)*Ps,Vs=(1-(ys+Ss))*Ps;return ns[0]=js,ns[1]=zs,ns[2]=Us,ns[3]=0,ns[4]=Ys,ns[5]=Ks,ns[6]=qs,ns[7]=0,ns[8]=_l,ns[9]=Js,ns[10]=Vs,ns[11]=0,ns[12]=rs[0]+Ds-(js*Ds+Ys*Fs+_l*Rs),ns[13]=rs[1]+Fs-(zs*Ds+Ks*Fs+Js*Rs),ns[14]=rs[2]+Rs-(Us*Ds+qs*Fs+Vs*Rs),ns[15]=1,ns}function fromQuat(ns,ts){var rs=ts[0],as=ts[1],os=ts[2],is=ts[3],us=rs+rs,ls=as+as,fs=os+os,hs=rs*us,vs=as*us,gs=as*ls,ys=os*us,xs=os*ls,ms=os*fs,Ss=is*us,Ms=is*ls,$s=is*fs;return ns[0]=1-gs-ms,ns[1]=vs+$s,ns[2]=ys-Ms,ns[3]=0,ns[4]=vs-$s,ns[5]=1-hs-ms,ns[6]=xs+Ss,ns[7]=0,ns[8]=ys+Ms,ns[9]=xs-Ss,ns[10]=1-hs-gs,ns[11]=0,ns[12]=0,ns[13]=0,ns[14]=0,ns[15]=1,ns}function frustum(ns,ts,rs,as,os,is,us){var ls=1/(rs-ts),fs=1/(os-as),hs=1/(is-us);return ns[0]=is*2*ls,ns[1]=0,ns[2]=0,ns[3]=0,ns[4]=0,ns[5]=is*2*fs,ns[6]=0,ns[7]=0,ns[8]=(rs+ts)*ls,ns[9]=(os+as)*fs,ns[10]=(us+is)*hs,ns[11]=-1,ns[12]=0,ns[13]=0,ns[14]=us*is*2*hs,ns[15]=0,ns}function perspectiveNO(ns,ts,rs,as,os){var is=1/Math.tan(ts/2),us;return ns[0]=is/rs,ns[1]=0,ns[2]=0,ns[3]=0,ns[4]=0,ns[5]=is,ns[6]=0,ns[7]=0,ns[8]=0,ns[9]=0,ns[11]=-1,ns[12]=0,ns[13]=0,ns[15]=0,os!=null&&os!==1/0?(us=1/(as-os),ns[10]=(os+as)*us,ns[14]=2*os*as*us):(ns[10]=-1,ns[14]=-2*as),ns}var perspective=perspectiveNO;function perspectiveZO(ns,ts,rs,as,os){var is=1/Math.tan(ts/2),us;return ns[0]=is/rs,ns[1]=0,ns[2]=0,ns[3]=0,ns[4]=0,ns[5]=is,ns[6]=0,ns[7]=0,ns[8]=0,ns[9]=0,ns[11]=-1,ns[12]=0,ns[13]=0,ns[15]=0,os!=null&&os!==1/0?(us=1/(as-os),ns[10]=os*us,ns[14]=os*as*us):(ns[10]=-1,ns[14]=-as),ns}function perspectiveFromFieldOfView(ns,ts,rs,as){var os=Math.tan(ts.upDegrees*Math.PI/180),is=Math.tan(ts.downDegrees*Math.PI/180),us=Math.tan(ts.leftDegrees*Math.PI/180),ls=Math.tan(ts.rightDegrees*Math.PI/180),fs=2/(us+ls),hs=2/(os+is);return ns[0]=fs,ns[1]=0,ns[2]=0,ns[3]=0,ns[4]=0,ns[5]=hs,ns[6]=0,ns[7]=0,ns[8]=-((us-ls)*fs*.5),ns[9]=(os-is)*hs*.5,ns[10]=as/(rs-as),ns[11]=-1,ns[12]=0,ns[13]=0,ns[14]=as*rs/(rs-as),ns[15]=0,ns}function orthoNO(ns,ts,rs,as,os,is,us){var ls=1/(ts-rs),fs=1/(as-os),hs=1/(is-us);return ns[0]=-2*ls,ns[1]=0,ns[2]=0,ns[3]=0,ns[4]=0,ns[5]=-2*fs,ns[6]=0,ns[7]=0,ns[8]=0,ns[9]=0,ns[10]=2*hs,ns[11]=0,ns[12]=(ts+rs)*ls,ns[13]=(os+as)*fs,ns[14]=(us+is)*hs,ns[15]=1,ns}var ortho=orthoNO;function orthoZO(ns,ts,rs,as,os,is,us){var ls=1/(ts-rs),fs=1/(as-os),hs=1/(is-us);return ns[0]=-2*ls,ns[1]=0,ns[2]=0,ns[3]=0,ns[4]=0,ns[5]=-2*fs,ns[6]=0,ns[7]=0,ns[8]=0,ns[9]=0,ns[10]=hs,ns[11]=0,ns[12]=(ts+rs)*ls,ns[13]=(os+as)*fs,ns[14]=is*hs,ns[15]=1,ns}function lookAt(ns,ts,rs,as){var os,is,us,ls,fs,hs,vs,gs,ys,xs,ms=ts[0],Ss=ts[1],Ms=ts[2],$s=as[0],bs=as[1],Cs=as[2],As=rs[0],Is=rs[1],ks=rs[2];return Math.abs(ms-As)<EPSILON$1&&Math.abs(Ss-Is)<EPSILON$1&&Math.abs(Ms-ks)<EPSILON$1?identity$4(ns):(vs=ms-As,gs=Ss-Is,ys=Ms-ks,xs=1/Math.hypot(vs,gs,ys),vs*=xs,gs*=xs,ys*=xs,os=bs*ys-Cs*gs,is=Cs*vs-$s*ys,us=$s*gs-bs*vs,xs=Math.hypot(os,is,us),xs?(xs=1/xs,os*=xs,is*=xs,us*=xs):(os=0,is=0,us=0),ls=gs*us-ys*is,fs=ys*os-vs*us,hs=vs*is-gs*os,xs=Math.hypot(ls,fs,hs),xs?(xs=1/xs,ls*=xs,fs*=xs,hs*=xs):(ls=0,fs=0,hs=0),ns[0]=os,ns[1]=ls,ns[2]=vs,ns[3]=0,ns[4]=is,ns[5]=fs,ns[6]=gs,ns[7]=0,ns[8]=us,ns[9]=hs,ns[10]=ys,ns[11]=0,ns[12]=-(os*ms+is*Ss+us*Ms),ns[13]=-(ls*ms+fs*Ss+hs*Ms),ns[14]=-(vs*ms+gs*Ss+ys*Ms),ns[15]=1,ns)}function targetTo(ns,ts,rs,as){var os=ts[0],is=ts[1],us=ts[2],ls=as[0],fs=as[1],hs=as[2],vs=os-rs[0],gs=is-rs[1],ys=us-rs[2],xs=vs*vs+gs*gs+ys*ys;xs>0&&(xs=1/Math.sqrt(xs),vs*=xs,gs*=xs,ys*=xs);var ms=fs*ys-hs*gs,Ss=hs*vs-ls*ys,Ms=ls*gs-fs*vs;return xs=ms*ms+Ss*Ss+Ms*Ms,xs>0&&(xs=1/Math.sqrt(xs),ms*=xs,Ss*=xs,Ms*=xs),ns[0]=ms,ns[1]=Ss,ns[2]=Ms,ns[3]=0,ns[4]=gs*Ms-ys*Ss,ns[5]=ys*ms-vs*Ms,ns[6]=vs*Ss-gs*ms,ns[7]=0,ns[8]=vs,ns[9]=gs,ns[10]=ys,ns[11]=0,ns[12]=os,ns[13]=is,ns[14]=us,ns[15]=1,ns}function str$5(ns){return"mat4("+ns[0]+", "+ns[1]+", "+ns[2]+", "+ns[3]+", "+ns[4]+", "+ns[5]+", "+ns[6]+", "+ns[7]+", "+ns[8]+", "+ns[9]+", "+ns[10]+", "+ns[11]+", "+ns[12]+", "+ns[13]+", "+ns[14]+", "+ns[15]+")"}function frob(ns){return Math.hypot(ns[0],ns[1],ns[2],ns[3],ns[4],ns[5],ns[6],ns[7],ns[8],ns[9],ns[10],ns[11],ns[12],ns[13],ns[14],ns[15])}function add$6(ns,ts,rs){return ns[0]=ts[0]+rs[0],ns[1]=ts[1]+rs[1],ns[2]=ts[2]+rs[2],ns[3]=ts[3]+rs[3],ns[4]=ts[4]+rs[4],ns[5]=ts[5]+rs[5],ns[6]=ts[6]+rs[6],ns[7]=ts[7]+rs[7],ns[8]=ts[8]+rs[8],ns[9]=ts[9]+rs[9],ns[10]=ts[10]+rs[10],ns[11]=ts[11]+rs[11],ns[12]=ts[12]+rs[12],ns[13]=ts[13]+rs[13],ns[14]=ts[14]+rs[14],ns[15]=ts[15]+rs[15],ns}function subtract$3(ns,ts,rs){return ns[0]=ts[0]-rs[0],ns[1]=ts[1]-rs[1],ns[2]=ts[2]-rs[2],ns[3]=ts[3]-rs[3],ns[4]=ts[4]-rs[4],ns[5]=ts[5]-rs[5],ns[6]=ts[6]-rs[6],ns[7]=ts[7]-rs[7],ns[8]=ts[8]-rs[8],ns[9]=ts[9]-rs[9],ns[10]=ts[10]-rs[10],ns[11]=ts[11]-rs[11],ns[12]=ts[12]-rs[12],ns[13]=ts[13]-rs[13],ns[14]=ts[14]-rs[14],ns[15]=ts[15]-rs[15],ns}function multiplyScalar(ns,ts,rs){return ns[0]=ts[0]*rs,ns[1]=ts[1]*rs,ns[2]=ts[2]*rs,ns[3]=ts[3]*rs,ns[4]=ts[4]*rs,ns[5]=ts[5]*rs,ns[6]=ts[6]*rs,ns[7]=ts[7]*rs,ns[8]=ts[8]*rs,ns[9]=ts[9]*rs,ns[10]=ts[10]*rs,ns[11]=ts[11]*rs,ns[12]=ts[12]*rs,ns[13]=ts[13]*rs,ns[14]=ts[14]*rs,ns[15]=ts[15]*rs,ns}function multiplyScalarAndAdd(ns,ts,rs,as){return ns[0]=ts[0]+rs[0]*as,ns[1]=ts[1]+rs[1]*as,ns[2]=ts[2]+rs[2]*as,ns[3]=ts[3]+rs[3]*as,ns[4]=ts[4]+rs[4]*as,ns[5]=ts[5]+rs[5]*as,ns[6]=ts[6]+rs[6]*as,ns[7]=ts[7]+rs[7]*as,ns[8]=ts[8]+rs[8]*as,ns[9]=ts[9]+rs[9]*as,ns[10]=ts[10]+rs[10]*as,ns[11]=ts[11]+rs[11]*as,ns[12]=ts[12]+rs[12]*as,ns[13]=ts[13]+rs[13]*as,ns[14]=ts[14]+rs[14]*as,ns[15]=ts[15]+rs[15]*as,ns}function exactEquals$5(ns,ts){return ns[0]===ts[0]&&ns[1]===ts[1]&&ns[2]===ts[2]&&ns[3]===ts[3]&&ns[4]===ts[4]&&ns[5]===ts[5]&&ns[6]===ts[6]&&ns[7]===ts[7]&&ns[8]===ts[8]&&ns[9]===ts[9]&&ns[10]===ts[10]&&ns[11]===ts[11]&&ns[12]===ts[12]&&ns[13]===ts[13]&&ns[14]===ts[14]&&ns[15]===ts[15]}function equals$5(ns,ts){var rs=ns[0],as=ns[1],os=ns[2],is=ns[3],us=ns[4],ls=ns[5],fs=ns[6],hs=ns[7],vs=ns[8],gs=ns[9],ys=ns[10],xs=ns[11],ms=ns[12],Ss=ns[13],Ms=ns[14],$s=ns[15],bs=ts[0],Cs=ts[1],As=ts[2],Is=ts[3],ks=ts[4],Ps=ts[5],Ds=ts[6],Fs=ts[7],Rs=ts[8],js=ts[9],zs=ts[10],Us=ts[11],Ys=ts[12],Ks=ts[13],qs=ts[14],_l=ts[15];return Math.abs(rs-bs)<=EPSILON$1*Math.max(1,Math.abs(rs),Math.abs(bs))&&Math.abs(as-Cs)<=EPSILON$1*Math.max(1,Math.abs(as),Math.abs(Cs))&&Math.abs(os-As)<=EPSILON$1*Math.max(1,Math.abs(os),Math.abs(As))&&Math.abs(is-Is)<=EPSILON$1*Math.max(1,Math.abs(is),Math.abs(Is))&&Math.abs(us-ks)<=EPSILON$1*Math.max(1,Math.abs(us),Math.abs(ks))&&Math.abs(ls-Ps)<=EPSILON$1*Math.max(1,Math.abs(ls),Math.abs(Ps))&&Math.abs(fs-Ds)<=EPSILON$1*Math.max(1,Math.abs(fs),Math.abs(Ds))&&Math.abs(hs-Fs)<=EPSILON$1*Math.max(1,Math.abs(hs),Math.abs(Fs))&&Math.abs(vs-Rs)<=EPSILON$1*Math.max(1,Math.abs(vs),Math.abs(Rs))&&Math.abs(gs-js)<=EPSILON$1*Math.max(1,Math.abs(gs),Math.abs(js))&&Math.abs(ys-zs)<=EPSILON$1*Math.max(1,Math.abs(ys),Math.abs(zs))&&Math.abs(xs-Us)<=EPSILON$1*Math.max(1,Math.abs(xs),Math.abs(Us))&&Math.abs(ms-Ys)<=EPSILON$1*Math.max(1,Math.abs(ms),Math.abs(Ys))&&Math.abs(Ss-Ks)<=EPSILON$1*Math.max(1,Math.abs(Ss),Math.abs(Ks))&&Math.abs(Ms-qs)<=EPSILON$1*Math.max(1,Math.abs(Ms),Math.abs(qs))&&Math.abs($s-_l)<=EPSILON$1*Math.max(1,Math.abs($s),Math.abs(_l))}var mul$5=multiply$5,sub$3=subtract$3;const mat4=Object.freeze(Object.defineProperty({__proto__:null,add:add$6,adjoint,clone:clone$7,copy:copy$5,create:create$5,determinant:determinant$1,equals:equals$5,exactEquals:exactEquals$5,frob,fromQuat,fromQuat2,fromRotation:fromRotation$1,fromRotationTranslation:fromRotationTranslation$1,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromScaling,fromTranslation:fromTranslation$1,fromValues:fromValues$5,fromXRotation,fromYRotation,fromZRotation,frustum,getRotation,getScaling,getTranslation:getTranslation$1,identity:identity$4,invert:invert$3,lookAt,mul:mul$5,multiply:multiply$5,multiplyScalar,multiplyScalarAndAdd,ortho,orthoNO,orthoZO,perspective,perspectiveFromFieldOfView,perspectiveNO,perspectiveZO,rotate:rotate$4,rotateX:rotateX$3,rotateY:rotateY$3,rotateZ:rotateZ$3,scale:scale$7,set:set$7,str:str$5,sub:sub$3,subtract:subtract$3,targetTo,translate:translate$3,transpose},Symbol.toStringTag,{value:"Module"}));function create$4(){var ns=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(ns[0]=0,ns[1]=0,ns[2]=0),ns}function clone$6(ns){var ts=new ARRAY_TYPE(3);return ts[0]=ns[0],ts[1]=ns[1],ts[2]=ns[2],ts}function length$4(ns){var ts=ns[0],rs=ns[1],as=ns[2];return Math.hypot(ts,rs,as)}function fromValues$4(ns,ts,rs){var as=new ARRAY_TYPE(3);return as[0]=ns,as[1]=ts,as[2]=rs,as}function copy$4(ns,ts){return ns[0]=ts[0],ns[1]=ts[1],ns[2]=ts[2],ns}function set$6(ns,ts,rs,as){return ns[0]=ts,ns[1]=rs,ns[2]=as,ns}function add$5(ns,ts,rs){return ns[0]=ts[0]+rs[0],ns[1]=ts[1]+rs[1],ns[2]=ts[2]+rs[2],ns}function subtract$2(ns,ts,rs){return ns[0]=ts[0]-rs[0],ns[1]=ts[1]-rs[1],ns[2]=ts[2]-rs[2],ns}function multiply$4(ns,ts,rs){return ns[0]=ts[0]*rs[0],ns[1]=ts[1]*rs[1],ns[2]=ts[2]*rs[2],ns}function divide$2(ns,ts,rs){return ns[0]=ts[0]/rs[0],ns[1]=ts[1]/rs[1],ns[2]=ts[2]/rs[2],ns}function ceil$2(ns,ts){return ns[0]=Math.ceil(ts[0]),ns[1]=Math.ceil(ts[1]),ns[2]=Math.ceil(ts[2]),ns}function floor$2(ns,ts){return ns[0]=Math.floor(ts[0]),ns[1]=Math.floor(ts[1]),ns[2]=Math.floor(ts[2]),ns}function min$4(ns,ts,rs){return ns[0]=Math.min(ts[0],rs[0]),ns[1]=Math.min(ts[1],rs[1]),ns[2]=Math.min(ts[2],rs[2]),ns}function max$5(ns,ts,rs){return ns[0]=Math.max(ts[0],rs[0]),ns[1]=Math.max(ts[1],rs[1]),ns[2]=Math.max(ts[2],rs[2]),ns}function round$3(ns,ts){return ns[0]=Math.round(ts[0]),ns[1]=Math.round(ts[1]),ns[2]=Math.round(ts[2]),ns}function scale$6(ns,ts,rs){return ns[0]=ts[0]*rs,ns[1]=ts[1]*rs,ns[2]=ts[2]*rs,ns}function scaleAndAdd$2(ns,ts,rs,as){return ns[0]=ts[0]+rs[0]*as,ns[1]=ts[1]+rs[1]*as,ns[2]=ts[2]+rs[2]*as,ns}function distance$8(ns,ts){var rs=ts[0]-ns[0],as=ts[1]-ns[1],os=ts[2]-ns[2];return Math.hypot(rs,as,os)}function squaredDistance$2(ns,ts){var rs=ts[0]-ns[0],as=ts[1]-ns[1],os=ts[2]-ns[2];return rs*rs+as*as+os*os}function squaredLength$4(ns){var ts=ns[0],rs=ns[1],as=ns[2];return ts*ts+rs*rs+as*as}function negate$2(ns,ts){return ns[0]=-ts[0],ns[1]=-ts[1],ns[2]=-ts[2],ns}function inverse$3(ns,ts){return ns[0]=1/ts[0],ns[1]=1/ts[1],ns[2]=1/ts[2],ns}function normalize$5(ns,ts){var rs=ts[0],as=ts[1],os=ts[2],is=rs*rs+as*as+os*os;return is>0&&(is=1/Math.sqrt(is)),ns[0]=ts[0]*is,ns[1]=ts[1]*is,ns[2]=ts[2]*is,ns}function dot$4(ns,ts){return ns[0]*ts[0]+ns[1]*ts[1]+ns[2]*ts[2]}function cross$4(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=rs[0],ls=rs[1],fs=rs[2];return ns[0]=os*fs-is*ls,ns[1]=is*us-as*fs,ns[2]=as*ls-os*us,ns}function lerp$5(ns,ts,rs,as){var os=ts[0],is=ts[1],us=ts[2];return ns[0]=os+as*(rs[0]-os),ns[1]=is+as*(rs[1]-is),ns[2]=us+as*(rs[2]-us),ns}function hermite(ns,ts,rs,as,os,is){var us=is*is,ls=us*(2*is-3)+1,fs=us*(is-2)+is,hs=us*(is-1),vs=us*(3-2*is);return ns[0]=ts[0]*ls+rs[0]*fs+as[0]*hs+os[0]*vs,ns[1]=ts[1]*ls+rs[1]*fs+as[1]*hs+os[1]*vs,ns[2]=ts[2]*ls+rs[2]*fs+as[2]*hs+os[2]*vs,ns}function bezier(ns,ts,rs,as,os,is){var us=1-is,ls=us*us,fs=is*is,hs=ls*us,vs=3*is*ls,gs=3*fs*us,ys=fs*is;return ns[0]=ts[0]*hs+rs[0]*vs+as[0]*gs+os[0]*ys,ns[1]=ts[1]*hs+rs[1]*vs+as[1]*gs+os[1]*ys,ns[2]=ts[2]*hs+rs[2]*vs+as[2]*gs+os[2]*ys,ns}function random$4(ns,ts){ts=ts||1;var rs=RANDOM()*2*Math.PI,as=RANDOM()*2-1,os=Math.sqrt(1-as*as)*ts;return ns[0]=Math.cos(rs)*os,ns[1]=Math.sin(rs)*os,ns[2]=as*ts,ns}function transformMat4$2(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=rs[3]*as+rs[7]*os+rs[11]*is+rs[15];return us=us||1,ns[0]=(rs[0]*as+rs[4]*os+rs[8]*is+rs[12])/us,ns[1]=(rs[1]*as+rs[5]*os+rs[9]*is+rs[13])/us,ns[2]=(rs[2]*as+rs[6]*os+rs[10]*is+rs[14])/us,ns}function transformMat3$1(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2];return ns[0]=as*rs[0]+os*rs[3]+is*rs[6],ns[1]=as*rs[1]+os*rs[4]+is*rs[7],ns[2]=as*rs[2]+os*rs[5]+is*rs[8],ns}function transformQuat$1(ns,ts,rs){var as=rs[0],os=rs[1],is=rs[2],us=rs[3],ls=ts[0],fs=ts[1],hs=ts[2],vs=os*hs-is*fs,gs=is*ls-as*hs,ys=as*fs-os*ls,xs=os*ys-is*gs,ms=is*vs-as*ys,Ss=as*gs-os*vs,Ms=us*2;return vs*=Ms,gs*=Ms,ys*=Ms,xs*=2,ms*=2,Ss*=2,ns[0]=ls+vs+xs,ns[1]=fs+gs+ms,ns[2]=hs+ys+Ss,ns}function rotateX$2(ns,ts,rs,as){var os=[],is=[];return os[0]=ts[0]-rs[0],os[1]=ts[1]-rs[1],os[2]=ts[2]-rs[2],is[0]=os[0],is[1]=os[1]*Math.cos(as)-os[2]*Math.sin(as),is[2]=os[1]*Math.sin(as)+os[2]*Math.cos(as),ns[0]=is[0]+rs[0],ns[1]=is[1]+rs[1],ns[2]=is[2]+rs[2],ns}function rotateY$2(ns,ts,rs,as){var os=[],is=[];return os[0]=ts[0]-rs[0],os[1]=ts[1]-rs[1],os[2]=ts[2]-rs[2],is[0]=os[2]*Math.sin(as)+os[0]*Math.cos(as),is[1]=os[1],is[2]=os[2]*Math.cos(as)-os[0]*Math.sin(as),ns[0]=is[0]+rs[0],ns[1]=is[1]+rs[1],ns[2]=is[2]+rs[2],ns}function rotateZ$2(ns,ts,rs,as){var os=[],is=[];return os[0]=ts[0]-rs[0],os[1]=ts[1]-rs[1],os[2]=ts[2]-rs[2],is[0]=os[0]*Math.cos(as)-os[1]*Math.sin(as),is[1]=os[0]*Math.sin(as)+os[1]*Math.cos(as),is[2]=os[2],ns[0]=is[0]+rs[0],ns[1]=is[1]+rs[1],ns[2]=is[2]+rs[2],ns}function angle$1(ns,ts){var rs=ns[0],as=ns[1],os=ns[2],is=ts[0],us=ts[1],ls=ts[2],fs=Math.sqrt(rs*rs+as*as+os*os),hs=Math.sqrt(is*is+us*us+ls*ls),vs=fs*hs,gs=vs&&dot$4(ns,ts)/vs;return Math.acos(Math.min(Math.max(gs,-1),1))}function zero$3(ns){return ns[0]=0,ns[1]=0,ns[2]=0,ns}function str$4(ns){return"vec3("+ns[0]+", "+ns[1]+", "+ns[2]+")"}function exactEquals$4(ns,ts){return ns[0]===ts[0]&&ns[1]===ts[1]&&ns[2]===ts[2]}function equals$4(ns,ts){var rs=ns[0],as=ns[1],os=ns[2],is=ts[0],us=ts[1],ls=ts[2];return Math.abs(rs-is)<=EPSILON$1*Math.max(1,Math.abs(rs),Math.abs(is))&&Math.abs(as-us)<=EPSILON$1*Math.max(1,Math.abs(as),Math.abs(us))&&Math.abs(os-ls)<=EPSILON$1*Math.max(1,Math.abs(os),Math.abs(ls))}var sub$2=subtract$2,mul$4=multiply$4,div$2=divide$2,dist$2=distance$8,sqrDist$2=squaredDistance$2,len$4=length$4,sqrLen$4=squaredLength$4,forEach$2=function(){var ns=create$4();return function(ts,rs,as,os,is,us){var ls,fs;for(rs||(rs=3),as||(as=0),os?fs=Math.min(os*rs+as,ts.length):fs=ts.length,ls=as;ls<fs;ls+=rs)ns[0]=ts[ls],ns[1]=ts[ls+1],ns[2]=ts[ls+2],is(ns,ns,us),ts[ls]=ns[0],ts[ls+1]=ns[1],ts[ls+2]=ns[2];return ts}}();const vec3=Object.freeze(Object.defineProperty({__proto__:null,add:add$5,angle:angle$1,bezier,ceil:ceil$2,clone:clone$6,copy:copy$4,create:create$4,cross:cross$4,dist:dist$2,distance:distance$8,div:div$2,divide:divide$2,dot:dot$4,equals:equals$4,exactEquals:exactEquals$4,floor:floor$2,forEach:forEach$2,fromValues:fromValues$4,hermite,inverse:inverse$3,len:len$4,length:length$4,lerp:lerp$5,max:max$5,min:min$4,mul:mul$4,multiply:multiply$4,negate:negate$2,normalize:normalize$5,random:random$4,rotateX:rotateX$2,rotateY:rotateY$2,rotateZ:rotateZ$2,round:round$3,scale:scale$6,scaleAndAdd:scaleAndAdd$2,set:set$6,sqrDist:sqrDist$2,sqrLen:sqrLen$4,squaredDistance:squaredDistance$2,squaredLength:squaredLength$4,str:str$4,sub:sub$2,subtract:subtract$2,transformMat3:transformMat3$1,transformMat4:transformMat4$2,transformQuat:transformQuat$1,zero:zero$3},Symbol.toStringTag,{value:"Module"}));function create$3(){var ns=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(ns[0]=0,ns[1]=0,ns[2]=0,ns[3]=0),ns}function clone$5(ns){var ts=new ARRAY_TYPE(4);return ts[0]=ns[0],ts[1]=ns[1],ts[2]=ns[2],ts[3]=ns[3],ts}function fromValues$3(ns,ts,rs,as){var os=new ARRAY_TYPE(4);return os[0]=ns,os[1]=ts,os[2]=rs,os[3]=as,os}function copy$3(ns,ts){return ns[0]=ts[0],ns[1]=ts[1],ns[2]=ts[2],ns[3]=ts[3],ns}function set$5(ns,ts,rs,as,os){return ns[0]=ts,ns[1]=rs,ns[2]=as,ns[3]=os,ns}function add$4(ns,ts,rs){return ns[0]=ts[0]+rs[0],ns[1]=ts[1]+rs[1],ns[2]=ts[2]+rs[2],ns[3]=ts[3]+rs[3],ns}function subtract$1(ns,ts,rs){return ns[0]=ts[0]-rs[0],ns[1]=ts[1]-rs[1],ns[2]=ts[2]-rs[2],ns[3]=ts[3]-rs[3],ns}function multiply$3(ns,ts,rs){return ns[0]=ts[0]*rs[0],ns[1]=ts[1]*rs[1],ns[2]=ts[2]*rs[2],ns[3]=ts[3]*rs[3],ns}function divide$1(ns,ts,rs){return ns[0]=ts[0]/rs[0],ns[1]=ts[1]/rs[1],ns[2]=ts[2]/rs[2],ns[3]=ts[3]/rs[3],ns}function ceil$1(ns,ts){return ns[0]=Math.ceil(ts[0]),ns[1]=Math.ceil(ts[1]),ns[2]=Math.ceil(ts[2]),ns[3]=Math.ceil(ts[3]),ns}function floor$1(ns,ts){return ns[0]=Math.floor(ts[0]),ns[1]=Math.floor(ts[1]),ns[2]=Math.floor(ts[2]),ns[3]=Math.floor(ts[3]),ns}function min$3(ns,ts,rs){return ns[0]=Math.min(ts[0],rs[0]),ns[1]=Math.min(ts[1],rs[1]),ns[2]=Math.min(ts[2],rs[2]),ns[3]=Math.min(ts[3],rs[3]),ns}function max$4(ns,ts,rs){return ns[0]=Math.max(ts[0],rs[0]),ns[1]=Math.max(ts[1],rs[1]),ns[2]=Math.max(ts[2],rs[2]),ns[3]=Math.max(ts[3],rs[3]),ns}function round$2(ns,ts){return ns[0]=Math.round(ts[0]),ns[1]=Math.round(ts[1]),ns[2]=Math.round(ts[2]),ns[3]=Math.round(ts[3]),ns}function scale$5(ns,ts,rs){return ns[0]=ts[0]*rs,ns[1]=ts[1]*rs,ns[2]=ts[2]*rs,ns[3]=ts[3]*rs,ns}function scaleAndAdd$1(ns,ts,rs,as){return ns[0]=ts[0]+rs[0]*as,ns[1]=ts[1]+rs[1]*as,ns[2]=ts[2]+rs[2]*as,ns[3]=ts[3]+rs[3]*as,ns}function distance$7(ns,ts){var rs=ts[0]-ns[0],as=ts[1]-ns[1],os=ts[2]-ns[2],is=ts[3]-ns[3];return Math.hypot(rs,as,os,is)}function squaredDistance$1(ns,ts){var rs=ts[0]-ns[0],as=ts[1]-ns[1],os=ts[2]-ns[2],is=ts[3]-ns[3];return rs*rs+as*as+os*os+is*is}function length$3(ns){var ts=ns[0],rs=ns[1],as=ns[2],os=ns[3];return Math.hypot(ts,rs,as,os)}function squaredLength$3(ns){var ts=ns[0],rs=ns[1],as=ns[2],os=ns[3];return ts*ts+rs*rs+as*as+os*os}function negate$1(ns,ts){return ns[0]=-ts[0],ns[1]=-ts[1],ns[2]=-ts[2],ns[3]=-ts[3],ns}function inverse$2(ns,ts){return ns[0]=1/ts[0],ns[1]=1/ts[1],ns[2]=1/ts[2],ns[3]=1/ts[3],ns}function normalize$4(ns,ts){var rs=ts[0],as=ts[1],os=ts[2],is=ts[3],us=rs*rs+as*as+os*os+is*is;return us>0&&(us=1/Math.sqrt(us)),ns[0]=rs*us,ns[1]=as*us,ns[2]=os*us,ns[3]=is*us,ns}function dot$3(ns,ts){return ns[0]*ts[0]+ns[1]*ts[1]+ns[2]*ts[2]+ns[3]*ts[3]}function cross$3(ns,ts,rs,as){var os=rs[0]*as[1]-rs[1]*as[0],is=rs[0]*as[2]-rs[2]*as[0],us=rs[0]*as[3]-rs[3]*as[0],ls=rs[1]*as[2]-rs[2]*as[1],fs=rs[1]*as[3]-rs[3]*as[1],hs=rs[2]*as[3]-rs[3]*as[2],vs=ts[0],gs=ts[1],ys=ts[2],xs=ts[3];return ns[0]=gs*hs-ys*fs+xs*ls,ns[1]=-(vs*hs)+ys*us-xs*is,ns[2]=vs*fs-gs*us+xs*os,ns[3]=-(vs*ls)+gs*is-ys*os,ns}function lerp$4(ns,ts,rs,as){var os=ts[0],is=ts[1],us=ts[2],ls=ts[3];return ns[0]=os+as*(rs[0]-os),ns[1]=is+as*(rs[1]-is),ns[2]=us+as*(rs[2]-us),ns[3]=ls+as*(rs[3]-ls),ns}function random$3(ns,ts){ts=ts||1;var rs,as,os,is,us,ls;do rs=RANDOM()*2-1,as=RANDOM()*2-1,us=rs*rs+as*as;while(us>=1);do os=RANDOM()*2-1,is=RANDOM()*2-1,ls=os*os+is*is;while(ls>=1);var fs=Math.sqrt((1-us)/ls);return ns[0]=ts*rs,ns[1]=ts*as,ns[2]=ts*os*fs,ns[3]=ts*is*fs,ns}function transformMat4$1(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3];return ns[0]=rs[0]*as+rs[4]*os+rs[8]*is+rs[12]*us,ns[1]=rs[1]*as+rs[5]*os+rs[9]*is+rs[13]*us,ns[2]=rs[2]*as+rs[6]*os+rs[10]*is+rs[14]*us,ns[3]=rs[3]*as+rs[7]*os+rs[11]*is+rs[15]*us,ns}function transformQuat(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=rs[0],ls=rs[1],fs=rs[2],hs=rs[3],vs=hs*as+ls*is-fs*os,gs=hs*os+fs*as-us*is,ys=hs*is+us*os-ls*as,xs=-us*as-ls*os-fs*is;return ns[0]=vs*hs+xs*-us+gs*-fs-ys*-ls,ns[1]=gs*hs+xs*-ls+ys*-us-vs*-fs,ns[2]=ys*hs+xs*-fs+vs*-ls-gs*-us,ns[3]=ts[3],ns}function zero$2(ns){return ns[0]=0,ns[1]=0,ns[2]=0,ns[3]=0,ns}function str$3(ns){return"vec4("+ns[0]+", "+ns[1]+", "+ns[2]+", "+ns[3]+")"}function exactEquals$3(ns,ts){return ns[0]===ts[0]&&ns[1]===ts[1]&&ns[2]===ts[2]&&ns[3]===ts[3]}function equals$3(ns,ts){var rs=ns[0],as=ns[1],os=ns[2],is=ns[3],us=ts[0],ls=ts[1],fs=ts[2],hs=ts[3];return Math.abs(rs-us)<=EPSILON$1*Math.max(1,Math.abs(rs),Math.abs(us))&&Math.abs(as-ls)<=EPSILON$1*Math.max(1,Math.abs(as),Math.abs(ls))&&Math.abs(os-fs)<=EPSILON$1*Math.max(1,Math.abs(os),Math.abs(fs))&&Math.abs(is-hs)<=EPSILON$1*Math.max(1,Math.abs(is),Math.abs(hs))}var sub$1=subtract$1,mul$3=multiply$3,div$1=divide$1,dist$1=distance$7,sqrDist$1=squaredDistance$1,len$3=length$3,sqrLen$3=squaredLength$3,forEach$1=function(){var ns=create$3();return function(ts,rs,as,os,is,us){var ls,fs;for(rs||(rs=4),as||(as=0),os?fs=Math.min(os*rs+as,ts.length):fs=ts.length,ls=as;ls<fs;ls+=rs)ns[0]=ts[ls],ns[1]=ts[ls+1],ns[2]=ts[ls+2],ns[3]=ts[ls+3],is(ns,ns,us),ts[ls]=ns[0],ts[ls+1]=ns[1],ts[ls+2]=ns[2],ts[ls+3]=ns[3];return ts}}();const vec4=Object.freeze(Object.defineProperty({__proto__:null,add:add$4,ceil:ceil$1,clone:clone$5,copy:copy$3,create:create$3,cross:cross$3,dist:dist$1,distance:distance$7,div:div$1,divide:divide$1,dot:dot$3,equals:equals$3,exactEquals:exactEquals$3,floor:floor$1,forEach:forEach$1,fromValues:fromValues$3,inverse:inverse$2,len:len$3,length:length$3,lerp:lerp$4,max:max$4,min:min$3,mul:mul$3,multiply:multiply$3,negate:negate$1,normalize:normalize$4,random:random$3,round:round$2,scale:scale$5,scaleAndAdd:scaleAndAdd$1,set:set$5,sqrDist:sqrDist$1,sqrLen:sqrLen$3,squaredDistance:squaredDistance$1,squaredLength:squaredLength$3,str:str$3,sub:sub$1,subtract:subtract$1,transformMat4:transformMat4$1,transformQuat,zero:zero$2},Symbol.toStringTag,{value:"Module"}));function create$2(){var ns=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(ns[0]=0,ns[1]=0,ns[2]=0),ns[3]=1,ns}function identity$3(ns){return ns[0]=0,ns[1]=0,ns[2]=0,ns[3]=1,ns}function setAxisAngle(ns,ts,rs){rs=rs*.5;var as=Math.sin(rs);return ns[0]=as*ts[0],ns[1]=as*ts[1],ns[2]=as*ts[2],ns[3]=Math.cos(rs),ns}function getAxisAngle(ns,ts){var rs=Math.acos(ts[3])*2,as=Math.sin(rs/2);return as>EPSILON$1?(ns[0]=ts[0]/as,ns[1]=ts[1]/as,ns[2]=ts[2]/as):(ns[0]=1,ns[1]=0,ns[2]=0),rs}function getAngle$1(ns,ts){var rs=dot$2(ns,ts);return Math.acos(2*rs*rs-1)}function multiply$2(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=rs[0],fs=rs[1],hs=rs[2],vs=rs[3];return ns[0]=as*vs+us*ls+os*hs-is*fs,ns[1]=os*vs+us*fs+is*ls-as*hs,ns[2]=is*vs+us*hs+as*fs-os*ls,ns[3]=us*vs-as*ls-os*fs-is*hs,ns}function rotateX$1(ns,ts,rs){rs*=.5;var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=Math.sin(rs),fs=Math.cos(rs);return ns[0]=as*fs+us*ls,ns[1]=os*fs+is*ls,ns[2]=is*fs-os*ls,ns[3]=us*fs-as*ls,ns}function rotateY$1(ns,ts,rs){rs*=.5;var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=Math.sin(rs),fs=Math.cos(rs);return ns[0]=as*fs-is*ls,ns[1]=os*fs+us*ls,ns[2]=is*fs+as*ls,ns[3]=us*fs-os*ls,ns}function rotateZ$1(ns,ts,rs){rs*=.5;var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=Math.sin(rs),fs=Math.cos(rs);return ns[0]=as*fs+os*ls,ns[1]=os*fs-as*ls,ns[2]=is*fs+us*ls,ns[3]=us*fs-is*ls,ns}function calculateW(ns,ts){var rs=ts[0],as=ts[1],os=ts[2];return ns[0]=rs,ns[1]=as,ns[2]=os,ns[3]=Math.sqrt(Math.abs(1-rs*rs-as*as-os*os)),ns}function exp(ns,ts){var rs=ts[0],as=ts[1],os=ts[2],is=ts[3],us=Math.sqrt(rs*rs+as*as+os*os),ls=Math.exp(is),fs=us>0?ls*Math.sin(us)/us:0;return ns[0]=rs*fs,ns[1]=as*fs,ns[2]=os*fs,ns[3]=ls*Math.cos(us),ns}function ln$1(ns,ts){var rs=ts[0],as=ts[1],os=ts[2],is=ts[3],us=Math.sqrt(rs*rs+as*as+os*os),ls=us>0?Math.atan2(us,is)/us:0;return ns[0]=rs*ls,ns[1]=as*ls,ns[2]=os*ls,ns[3]=.5*Math.log(rs*rs+as*as+os*os+is*is),ns}function pow(ns,ts,rs){return ln$1(ns,ts),scale$4(ns,ns,rs),exp(ns,ns),ns}function slerp(ns,ts,rs,as){var os=ts[0],is=ts[1],us=ts[2],ls=ts[3],fs=rs[0],hs=rs[1],vs=rs[2],gs=rs[3],ys,xs,ms,Ss,Ms;return xs=os*fs+is*hs+us*vs+ls*gs,xs<0&&(xs=-xs,fs=-fs,hs=-hs,vs=-vs,gs=-gs),1-xs>EPSILON$1?(ys=Math.acos(xs),ms=Math.sin(ys),Ss=Math.sin((1-as)*ys)/ms,Ms=Math.sin(as*ys)/ms):(Ss=1-as,Ms=as),ns[0]=Ss*os+Ms*fs,ns[1]=Ss*is+Ms*hs,ns[2]=Ss*us+Ms*vs,ns[3]=Ss*ls+Ms*gs,ns}function random$2(ns){var ts=RANDOM(),rs=RANDOM(),as=RANDOM(),os=Math.sqrt(1-ts),is=Math.sqrt(ts);return ns[0]=os*Math.sin(2*Math.PI*rs),ns[1]=os*Math.cos(2*Math.PI*rs),ns[2]=is*Math.sin(2*Math.PI*as),ns[3]=is*Math.cos(2*Math.PI*as),ns}function invert$2(ns,ts){var rs=ts[0],as=ts[1],os=ts[2],is=ts[3],us=rs*rs+as*as+os*os+is*is,ls=us?1/us:0;return ns[0]=-rs*ls,ns[1]=-as*ls,ns[2]=-os*ls,ns[3]=is*ls,ns}function conjugate$1(ns,ts){return ns[0]=-ts[0],ns[1]=-ts[1],ns[2]=-ts[2],ns[3]=ts[3],ns}function fromMat3(ns,ts){var rs=ts[0]+ts[4]+ts[8],as;if(rs>0)as=Math.sqrt(rs+1),ns[3]=.5*as,as=.5/as,ns[0]=(ts[5]-ts[7])*as,ns[1]=(ts[6]-ts[2])*as,ns[2]=(ts[1]-ts[3])*as;else{var os=0;ts[4]>ts[0]&&(os=1),ts[8]>ts[os*3+os]&&(os=2);var is=(os+1)%3,us=(os+2)%3;as=Math.sqrt(ts[os*3+os]-ts[is*3+is]-ts[us*3+us]+1),ns[os]=.5*as,as=.5/as,ns[3]=(ts[is*3+us]-ts[us*3+is])*as,ns[is]=(ts[is*3+os]+ts[os*3+is])*as,ns[us]=(ts[us*3+os]+ts[os*3+us])*as}return ns}function fromEuler(ns,ts,rs,as){var os=.5*Math.PI/180;ts*=os,rs*=os,as*=os;var is=Math.sin(ts),us=Math.cos(ts),ls=Math.sin(rs),fs=Math.cos(rs),hs=Math.sin(as),vs=Math.cos(as);return ns[0]=is*fs*vs-us*ls*hs,ns[1]=us*ls*vs+is*fs*hs,ns[2]=us*fs*hs-is*ls*vs,ns[3]=us*fs*vs+is*ls*hs,ns}function str$2(ns){return"quat("+ns[0]+", "+ns[1]+", "+ns[2]+", "+ns[3]+")"}var clone$4=clone$5,fromValues$2=fromValues$3,copy$2=copy$3,set$4=set$5,add$3=add$4,mul$2=multiply$2,scale$4=scale$5,dot$2=dot$3,lerp$3=lerp$4,length$2=length$3,len$2=length$2,squaredLength$2=squaredLength$3,sqrLen$2=squaredLength$2,normalize$3=normalize$4,exactEquals$2=exactEquals$3,equals$2=equals$3,rotationTo=function(){var ns=create$4(),ts=fromValues$4(1,0,0),rs=fromValues$4(0,1,0);return function(as,os,is){var us=dot$4(os,is);return us<-.999999?(cross$4(ns,ts,os),len$4(ns)<1e-6&&cross$4(ns,rs,os),normalize$5(ns,ns),setAxisAngle(as,ns,Math.PI),as):us>.999999?(as[0]=0,as[1]=0,as[2]=0,as[3]=1,as):(cross$4(ns,os,is),as[0]=ns[0],as[1]=ns[1],as[2]=ns[2],as[3]=1+us,normalize$3(as,as))}}(),sqlerp=function(){var ns=create$2(),ts=create$2();return function(rs,as,os,is,us,ls){return slerp(ns,as,us,ls),slerp(ts,os,is,ls),slerp(rs,ns,ts,2*ls*(1-ls)),rs}}(),setAxes=function(){var ns=create$6();return function(ts,rs,as,os){return ns[0]=as[0],ns[3]=as[1],ns[6]=as[2],ns[1]=os[0],ns[4]=os[1],ns[7]=os[2],ns[2]=-rs[0],ns[5]=-rs[1],ns[8]=-rs[2],normalize$3(ts,fromMat3(ts,ns))}}();const quat=Object.freeze(Object.defineProperty({__proto__:null,add:add$3,calculateW,clone:clone$4,conjugate:conjugate$1,copy:copy$2,create:create$2,dot:dot$2,equals:equals$2,exactEquals:exactEquals$2,exp,fromEuler,fromMat3,fromValues:fromValues$2,getAngle:getAngle$1,getAxisAngle,identity:identity$3,invert:invert$2,len:len$2,length:length$2,lerp:lerp$3,ln:ln$1,mul:mul$2,multiply:multiply$2,normalize:normalize$3,pow,random:random$2,rotateX:rotateX$1,rotateY:rotateY$1,rotateZ:rotateZ$1,rotationTo,scale:scale$4,set:set$4,setAxes,setAxisAngle,slerp,sqlerp,sqrLen:sqrLen$2,squaredLength:squaredLength$2,str:str$2},Symbol.toStringTag,{value:"Module"}));function create$1(){var ns=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(ns[0]=0,ns[1]=0,ns[2]=0,ns[4]=0,ns[5]=0,ns[6]=0,ns[7]=0),ns[3]=1,ns}function clone$3(ns){var ts=new ARRAY_TYPE(8);return ts[0]=ns[0],ts[1]=ns[1],ts[2]=ns[2],ts[3]=ns[3],ts[4]=ns[4],ts[5]=ns[5],ts[6]=ns[6],ts[7]=ns[7],ts}function fromValues$1(ns,ts,rs,as,os,is,us,ls){var fs=new ARRAY_TYPE(8);return fs[0]=ns,fs[1]=ts,fs[2]=rs,fs[3]=as,fs[4]=os,fs[5]=is,fs[6]=us,fs[7]=ls,fs}function fromRotationTranslationValues(ns,ts,rs,as,os,is,us){var ls=new ARRAY_TYPE(8);ls[0]=ns,ls[1]=ts,ls[2]=rs,ls[3]=as;var fs=os*.5,hs=is*.5,vs=us*.5;return ls[4]=fs*as+hs*rs-vs*ts,ls[5]=hs*as+vs*ns-fs*rs,ls[6]=vs*as+fs*ts-hs*ns,ls[7]=-fs*ns-hs*ts-vs*rs,ls}function fromRotationTranslation(ns,ts,rs){var as=rs[0]*.5,os=rs[1]*.5,is=rs[2]*.5,us=ts[0],ls=ts[1],fs=ts[2],hs=ts[3];return ns[0]=us,ns[1]=ls,ns[2]=fs,ns[3]=hs,ns[4]=as*hs+os*fs-is*ls,ns[5]=os*hs+is*us-as*fs,ns[6]=is*hs+as*ls-os*us,ns[7]=-as*us-os*ls-is*fs,ns}function fromTranslation(ns,ts){return ns[0]=0,ns[1]=0,ns[2]=0,ns[3]=1,ns[4]=ts[0]*.5,ns[5]=ts[1]*.5,ns[6]=ts[2]*.5,ns[7]=0,ns}function fromRotation(ns,ts){return ns[0]=ts[0],ns[1]=ts[1],ns[2]=ts[2],ns[3]=ts[3],ns[4]=0,ns[5]=0,ns[6]=0,ns[7]=0,ns}function fromMat4(ns,ts){var rs=create$2();getRotation(rs,ts);var as=new ARRAY_TYPE(3);return getTranslation$1(as,ts),fromRotationTranslation(ns,rs,as),ns}function copy$1(ns,ts){return ns[0]=ts[0],ns[1]=ts[1],ns[2]=ts[2],ns[3]=ts[3],ns[4]=ts[4],ns[5]=ts[5],ns[6]=ts[6],ns[7]=ts[7],ns}function identity$2(ns){return ns[0]=0,ns[1]=0,ns[2]=0,ns[3]=1,ns[4]=0,ns[5]=0,ns[6]=0,ns[7]=0,ns}function set$3(ns,ts,rs,as,os,is,us,ls,fs){return ns[0]=ts,ns[1]=rs,ns[2]=as,ns[3]=os,ns[4]=is,ns[5]=us,ns[6]=ls,ns[7]=fs,ns}var getReal=copy$2;function getDual(ns,ts){return ns[0]=ts[4],ns[1]=ts[5],ns[2]=ts[6],ns[3]=ts[7],ns}var setReal=copy$2;function setDual(ns,ts){return ns[4]=ts[0],ns[5]=ts[1],ns[6]=ts[2],ns[7]=ts[3],ns}function getTranslation(ns,ts){var rs=ts[4],as=ts[5],os=ts[6],is=ts[7],us=-ts[0],ls=-ts[1],fs=-ts[2],hs=ts[3];return ns[0]=(rs*hs+is*us+as*fs-os*ls)*2,ns[1]=(as*hs+is*ls+os*us-rs*fs)*2,ns[2]=(os*hs+is*fs+rs*ls-as*us)*2,ns}function translate$2(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=rs[0]*.5,fs=rs[1]*.5,hs=rs[2]*.5,vs=ts[4],gs=ts[5],ys=ts[6],xs=ts[7];return ns[0]=as,ns[1]=os,ns[2]=is,ns[3]=us,ns[4]=us*ls+os*hs-is*fs+vs,ns[5]=us*fs+is*ls-as*hs+gs,ns[6]=us*hs+as*fs-os*ls+ys,ns[7]=-as*ls-os*fs-is*hs+xs,ns}function rotateX(ns,ts,rs){var as=-ts[0],os=-ts[1],is=-ts[2],us=ts[3],ls=ts[4],fs=ts[5],hs=ts[6],vs=ts[7],gs=ls*us+vs*as+fs*is-hs*os,ys=fs*us+vs*os+hs*as-ls*is,xs=hs*us+vs*is+ls*os-fs*as,ms=vs*us-ls*as-fs*os-hs*is;return rotateX$1(ns,ts,rs),as=ns[0],os=ns[1],is=ns[2],us=ns[3],ns[4]=gs*us+ms*as+ys*is-xs*os,ns[5]=ys*us+ms*os+xs*as-gs*is,ns[6]=xs*us+ms*is+gs*os-ys*as,ns[7]=ms*us-gs*as-ys*os-xs*is,ns}function rotateY(ns,ts,rs){var as=-ts[0],os=-ts[1],is=-ts[2],us=ts[3],ls=ts[4],fs=ts[5],hs=ts[6],vs=ts[7],gs=ls*us+vs*as+fs*is-hs*os,ys=fs*us+vs*os+hs*as-ls*is,xs=hs*us+vs*is+ls*os-fs*as,ms=vs*us-ls*as-fs*os-hs*is;return rotateY$1(ns,ts,rs),as=ns[0],os=ns[1],is=ns[2],us=ns[3],ns[4]=gs*us+ms*as+ys*is-xs*os,ns[5]=ys*us+ms*os+xs*as-gs*is,ns[6]=xs*us+ms*is+gs*os-ys*as,ns[7]=ms*us-gs*as-ys*os-xs*is,ns}function rotateZ(ns,ts,rs){var as=-ts[0],os=-ts[1],is=-ts[2],us=ts[3],ls=ts[4],fs=ts[5],hs=ts[6],vs=ts[7],gs=ls*us+vs*as+fs*is-hs*os,ys=fs*us+vs*os+hs*as-ls*is,xs=hs*us+vs*is+ls*os-fs*as,ms=vs*us-ls*as-fs*os-hs*is;return rotateZ$1(ns,ts,rs),as=ns[0],os=ns[1],is=ns[2],us=ns[3],ns[4]=gs*us+ms*as+ys*is-xs*os,ns[5]=ys*us+ms*os+xs*as-gs*is,ns[6]=xs*us+ms*is+gs*os-ys*as,ns[7]=ms*us-gs*as-ys*os-xs*is,ns}function rotateByQuatAppend(ns,ts,rs){var as=rs[0],os=rs[1],is=rs[2],us=rs[3],ls=ts[0],fs=ts[1],hs=ts[2],vs=ts[3];return ns[0]=ls*us+vs*as+fs*is-hs*os,ns[1]=fs*us+vs*os+hs*as-ls*is,ns[2]=hs*us+vs*is+ls*os-fs*as,ns[3]=vs*us-ls*as-fs*os-hs*is,ls=ts[4],fs=ts[5],hs=ts[6],vs=ts[7],ns[4]=ls*us+vs*as+fs*is-hs*os,ns[5]=fs*us+vs*os+hs*as-ls*is,ns[6]=hs*us+vs*is+ls*os-fs*as,ns[7]=vs*us-ls*as-fs*os-hs*is,ns}function rotateByQuatPrepend(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=rs[0],fs=rs[1],hs=rs[2],vs=rs[3];return ns[0]=as*vs+us*ls+os*hs-is*fs,ns[1]=os*vs+us*fs+is*ls-as*hs,ns[2]=is*vs+us*hs+as*fs-os*ls,ns[3]=us*vs-as*ls-os*fs-is*hs,ls=rs[4],fs=rs[5],hs=rs[6],vs=rs[7],ns[4]=as*vs+us*ls+os*hs-is*fs,ns[5]=os*vs+us*fs+is*ls-as*hs,ns[6]=is*vs+us*hs+as*fs-os*ls,ns[7]=us*vs-as*ls-os*fs-is*hs,ns}function rotateAroundAxis(ns,ts,rs,as){if(Math.abs(as)<EPSILON$1)return copy$1(ns,ts);var os=Math.hypot(rs[0],rs[1],rs[2]);as=as*.5;var is=Math.sin(as),us=is*rs[0]/os,ls=is*rs[1]/os,fs=is*rs[2]/os,hs=Math.cos(as),vs=ts[0],gs=ts[1],ys=ts[2],xs=ts[3];ns[0]=vs*hs+xs*us+gs*fs-ys*ls,ns[1]=gs*hs+xs*ls+ys*us-vs*fs,ns[2]=ys*hs+xs*fs+vs*ls-gs*us,ns[3]=xs*hs-vs*us-gs*ls-ys*fs;var ms=ts[4],Ss=ts[5],Ms=ts[6],$s=ts[7];return ns[4]=ms*hs+$s*us+Ss*fs-Ms*ls,ns[5]=Ss*hs+$s*ls+Ms*us-ms*fs,ns[6]=Ms*hs+$s*fs+ms*ls-Ss*us,ns[7]=$s*hs-ms*us-Ss*ls-Ms*fs,ns}function add$2(ns,ts,rs){return ns[0]=ts[0]+rs[0],ns[1]=ts[1]+rs[1],ns[2]=ts[2]+rs[2],ns[3]=ts[3]+rs[3],ns[4]=ts[4]+rs[4],ns[5]=ts[5]+rs[5],ns[6]=ts[6]+rs[6],ns[7]=ts[7]+rs[7],ns}function multiply$1(ns,ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=rs[4],fs=rs[5],hs=rs[6],vs=rs[7],gs=ts[4],ys=ts[5],xs=ts[6],ms=ts[7],Ss=rs[0],Ms=rs[1],$s=rs[2],bs=rs[3];return ns[0]=as*bs+us*Ss+os*$s-is*Ms,ns[1]=os*bs+us*Ms+is*Ss-as*$s,ns[2]=is*bs+us*$s+as*Ms-os*Ss,ns[3]=us*bs-as*Ss-os*Ms-is*$s,ns[4]=as*vs+us*ls+os*hs-is*fs+gs*bs+ms*Ss+ys*$s-xs*Ms,ns[5]=os*vs+us*fs+is*ls-as*hs+ys*bs+ms*Ms+xs*Ss-gs*$s,ns[6]=is*vs+us*hs+as*fs-os*ls+xs*bs+ms*$s+gs*Ms-ys*Ss,ns[7]=us*vs-as*ls-os*fs-is*hs+ms*bs-gs*Ss-ys*Ms-xs*$s,ns}var mul$1=multiply$1;function scale$3(ns,ts,rs){return ns[0]=ts[0]*rs,ns[1]=ts[1]*rs,ns[2]=ts[2]*rs,ns[3]=ts[3]*rs,ns[4]=ts[4]*rs,ns[5]=ts[5]*rs,ns[6]=ts[6]*rs,ns[7]=ts[7]*rs,ns}var dot$1=dot$2;function lerp$2(ns,ts,rs,as){var os=1-as;return dot$1(ts,rs)<0&&(as=-as),ns[0]=ts[0]*os+rs[0]*as,ns[1]=ts[1]*os+rs[1]*as,ns[2]=ts[2]*os+rs[2]*as,ns[3]=ts[3]*os+rs[3]*as,ns[4]=ts[4]*os+rs[4]*as,ns[5]=ts[5]*os+rs[5]*as,ns[6]=ts[6]*os+rs[6]*as,ns[7]=ts[7]*os+rs[7]*as,ns}function invert$1(ns,ts){var rs=squaredLength$1(ts);return ns[0]=-ts[0]/rs,ns[1]=-ts[1]/rs,ns[2]=-ts[2]/rs,ns[3]=ts[3]/rs,ns[4]=-ts[4]/rs,ns[5]=-ts[5]/rs,ns[6]=-ts[6]/rs,ns[7]=ts[7]/rs,ns}function conjugate(ns,ts){return ns[0]=-ts[0],ns[1]=-ts[1],ns[2]=-ts[2],ns[3]=ts[3],ns[4]=-ts[4],ns[5]=-ts[5],ns[6]=-ts[6],ns[7]=ts[7],ns}var length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1;function normalize$2(ns,ts){var rs=squaredLength$1(ts);if(rs>0){rs=Math.sqrt(rs);var as=ts[0]/rs,os=ts[1]/rs,is=ts[2]/rs,us=ts[3]/rs,ls=ts[4],fs=ts[5],hs=ts[6],vs=ts[7],gs=as*ls+os*fs+is*hs+us*vs;ns[0]=as,ns[1]=os,ns[2]=is,ns[3]=us,ns[4]=(ls-as*gs)/rs,ns[5]=(fs-os*gs)/rs,ns[6]=(hs-is*gs)/rs,ns[7]=(vs-us*gs)/rs}return ns}function str$1(ns){return"quat2("+ns[0]+", "+ns[1]+", "+ns[2]+", "+ns[3]+", "+ns[4]+", "+ns[5]+", "+ns[6]+", "+ns[7]+")"}function exactEquals$1(ns,ts){return ns[0]===ts[0]&&ns[1]===ts[1]&&ns[2]===ts[2]&&ns[3]===ts[3]&&ns[4]===ts[4]&&ns[5]===ts[5]&&ns[6]===ts[6]&&ns[7]===ts[7]}function equals$1(ns,ts){var rs=ns[0],as=ns[1],os=ns[2],is=ns[3],us=ns[4],ls=ns[5],fs=ns[6],hs=ns[7],vs=ts[0],gs=ts[1],ys=ts[2],xs=ts[3],ms=ts[4],Ss=ts[5],Ms=ts[6],$s=ts[7];return Math.abs(rs-vs)<=EPSILON$1*Math.max(1,Math.abs(rs),Math.abs(vs))&&Math.abs(as-gs)<=EPSILON$1*Math.max(1,Math.abs(as),Math.abs(gs))&&Math.abs(os-ys)<=EPSILON$1*Math.max(1,Math.abs(os),Math.abs(ys))&&Math.abs(is-xs)<=EPSILON$1*Math.max(1,Math.abs(is),Math.abs(xs))&&Math.abs(us-ms)<=EPSILON$1*Math.max(1,Math.abs(us),Math.abs(ms))&&Math.abs(ls-Ss)<=EPSILON$1*Math.max(1,Math.abs(ls),Math.abs(Ss))&&Math.abs(fs-Ms)<=EPSILON$1*Math.max(1,Math.abs(fs),Math.abs(Ms))&&Math.abs(hs-$s)<=EPSILON$1*Math.max(1,Math.abs(hs),Math.abs($s))}const quat2=Object.freeze(Object.defineProperty({__proto__:null,add:add$2,clone:clone$3,conjugate,copy:copy$1,create:create$1,dot:dot$1,equals:equals$1,exactEquals:exactEquals$1,fromMat4,fromRotation,fromRotationTranslation,fromRotationTranslationValues,fromTranslation,fromValues:fromValues$1,getDual,getReal,getTranslation,identity:identity$2,invert:invert$1,len:len$1,length:length$1,lerp:lerp$2,mul:mul$1,multiply:multiply$1,normalize:normalize$2,rotateAroundAxis,rotateByQuatAppend,rotateByQuatPrepend,rotateX,rotateY,rotateZ,scale:scale$3,set:set$3,setDual,setReal,sqrLen:sqrLen$1,squaredLength:squaredLength$1,str:str$1,translate:translate$2},Symbol.toStringTag,{value:"Module"}));function create(){var ns=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(ns[0]=0,ns[1]=0),ns}function clone$2(ns){var ts=new ARRAY_TYPE(2);return ts[0]=ns[0],ts[1]=ns[1],ts}function fromValues(ns,ts){var rs=new ARRAY_TYPE(2);return rs[0]=ns,rs[1]=ts,rs}function copy(ns,ts){return ns[0]=ts[0],ns[1]=ts[1],ns}function set$2(ns,ts,rs){return ns[0]=ts,ns[1]=rs,ns}function add$1(ns,ts,rs){return ns[0]=ts[0]+rs[0],ns[1]=ts[1]+rs[1],ns}function subtract(ns,ts,rs){return ns[0]=ts[0]-rs[0],ns[1]=ts[1]-rs[1],ns}function multiply(ns,ts,rs){return ns[0]=ts[0]*rs[0],ns[1]=ts[1]*rs[1],ns}function divide(ns,ts,rs){return ns[0]=ts[0]/rs[0],ns[1]=ts[1]/rs[1],ns}function ceil(ns,ts){return ns[0]=Math.ceil(ts[0]),ns[1]=Math.ceil(ts[1]),ns}function floor(ns,ts){return ns[0]=Math.floor(ts[0]),ns[1]=Math.floor(ts[1]),ns}function min$2(ns,ts,rs){return ns[0]=Math.min(ts[0],rs[0]),ns[1]=Math.min(ts[1],rs[1]),ns}function max$3(ns,ts,rs){return ns[0]=Math.max(ts[0],rs[0]),ns[1]=Math.max(ts[1],rs[1]),ns}function round$1(ns,ts){return ns[0]=Math.round(ts[0]),ns[1]=Math.round(ts[1]),ns}function scale$2(ns,ts,rs){return ns[0]=ts[0]*rs,ns[1]=ts[1]*rs,ns}function scaleAndAdd(ns,ts,rs,as){return ns[0]=ts[0]+rs[0]*as,ns[1]=ts[1]+rs[1]*as,ns}function distance$6(ns,ts){var rs=ts[0]-ns[0],as=ts[1]-ns[1];return Math.hypot(rs,as)}function squaredDistance(ns,ts){var rs=ts[0]-ns[0],as=ts[1]-ns[1];return rs*rs+as*as}function length(ns){var ts=ns[0],rs=ns[1];return Math.hypot(ts,rs)}function squaredLength(ns){var ts=ns[0],rs=ns[1];return ts*ts+rs*rs}function negate(ns,ts){return ns[0]=-ts[0],ns[1]=-ts[1],ns}function inverse$1(ns,ts){return ns[0]=1/ts[0],ns[1]=1/ts[1],ns}function normalize$1(ns,ts){var rs=ts[0],as=ts[1],os=rs*rs+as*as;return os>0&&(os=1/Math.sqrt(os)),ns[0]=ts[0]*os,ns[1]=ts[1]*os,ns}function dot(ns,ts){return ns[0]*ts[0]+ns[1]*ts[1]}function cross$2(ns,ts,rs){var as=ts[0]*rs[1]-ts[1]*rs[0];return ns[0]=ns[1]=0,ns[2]=as,ns}function lerp$1(ns,ts,rs,as){var os=ts[0],is=ts[1];return ns[0]=os+as*(rs[0]-os),ns[1]=is+as*(rs[1]-is),ns}function random$1(ns,ts){ts=ts||1;var rs=RANDOM()*2*Math.PI;return ns[0]=Math.cos(rs)*ts,ns[1]=Math.sin(rs)*ts,ns}function transformMat2(ns,ts,rs){var as=ts[0],os=ts[1];return ns[0]=rs[0]*as+rs[2]*os,ns[1]=rs[1]*as+rs[3]*os,ns}function transformMat2d(ns,ts,rs){var as=ts[0],os=ts[1];return ns[0]=rs[0]*as+rs[2]*os+rs[4],ns[1]=rs[1]*as+rs[3]*os+rs[5],ns}function transformMat3(ns,ts,rs){var as=ts[0],os=ts[1];return ns[0]=rs[0]*as+rs[3]*os+rs[6],ns[1]=rs[1]*as+rs[4]*os+rs[7],ns}function transformMat4(ns,ts,rs){var as=ts[0],os=ts[1];return ns[0]=rs[0]*as+rs[4]*os+rs[12],ns[1]=rs[1]*as+rs[5]*os+rs[13],ns}function rotate$3(ns,ts,rs,as){var os=ts[0]-rs[0],is=ts[1]-rs[1],us=Math.sin(as),ls=Math.cos(as);return ns[0]=os*ls-is*us+rs[0],ns[1]=os*us+is*ls+rs[1],ns}function angle(ns,ts){var rs=ns[0],as=ns[1],os=ts[0],is=ts[1],us=Math.sqrt(rs*rs+as*as)*Math.sqrt(os*os+is*is),ls=us&&(rs*os+as*is)/us;return Math.acos(Math.min(Math.max(ls,-1),1))}function zero$1(ns){return ns[0]=0,ns[1]=0,ns}function str(ns){return"vec2("+ns[0]+", "+ns[1]+")"}function exactEquals(ns,ts){return ns[0]===ts[0]&&ns[1]===ts[1]}function equals(ns,ts){var rs=ns[0],as=ns[1],os=ts[0],is=ts[1];return Math.abs(rs-os)<=EPSILON$1*Math.max(1,Math.abs(rs),Math.abs(os))&&Math.abs(as-is)<=EPSILON$1*Math.max(1,Math.abs(as),Math.abs(is))}var len=length,sub=subtract,mul=multiply,div=divide,dist=distance$6,sqrDist=squaredDistance,sqrLen=squaredLength,forEach=function(){var ns=create();return function(ts,rs,as,os,is,us){var ls,fs;for(rs||(rs=2),as||(as=0),os?fs=Math.min(os*rs+as,ts.length):fs=ts.length,ls=as;ls<fs;ls+=rs)ns[0]=ts[ls],ns[1]=ts[ls+1],is(ns,ns,us),ts[ls]=ns[0],ts[ls+1]=ns[1];return ts}}();const vec2=Object.freeze(Object.defineProperty({__proto__:null,add:add$1,angle,ceil,clone:clone$2,copy,create,cross:cross$2,dist,distance:distance$6,div,divide,dot,equals,exactEquals,floor,forEach,fromValues,inverse:inverse$1,len,length,lerp:lerp$1,max:max$3,min:min$2,mul,multiply,negate,normalize:normalize$1,random:random$1,rotate:rotate$3,round:round$1,scale:scale$2,scaleAndAdd,set:set$2,sqrDist,sqrLen,squaredDistance,squaredLength,str,sub,subtract,transformMat2,transformMat2d,transformMat3,transformMat4,zero:zero$1},Symbol.toStringTag,{value:"Module"})),esm$1=Object.freeze(Object.defineProperty({__proto__:null,glMatrix:common,mat2,mat2d,mat3,mat4,quat,quat2,vec2,vec3,vec4},Symbol.toStringTag,{value:"Module"}));function leftTranslate$2(ns,ts,rs){var as=[0,0,0,0,0,0,0,0,0];return fromTranslation$2(as,rs),multiply$6(ns,as,ts)}function leftRotate$2(ns,ts,rs){var as=[0,0,0,0,0,0,0,0,0];return fromRotation$2(as,rs),multiply$6(ns,as,ts)}function leftScale$2(ns,ts,rs){var as=[0,0,0,0,0,0,0,0,0];return fromScaling$1(as,rs),multiply$6(ns,as,ts)}function leftMultiply$2(ns,ts,rs){return multiply$6(ns,rs,ts)}function transform$i(ns,ts){for(var rs=ns?[].concat(ns):[1,0,0,0,1,0,0,0,1],as=0,os=ts.length;as<os;as++){var is=ts[as];switch(is[0]){case"t":leftTranslate$2(rs,rs,[is[1],is[2]]);break;case"s":leftScale$2(rs,rs,[is[1],is[2]]);break;case"r":leftRotate$2(rs,rs,is[1]);break;case"m":leftMultiply$2(rs,rs,is[1]);break}}return rs}var adjMatrix$2=function(ts,rs){var as=ts.nodes,os=ts.edges,is=[],us={};if(!as)throw new Error("invalid nodes data!");return as&&as.forEach(function(ls,fs){us[ls.id]=fs;var hs=[];is.push(hs)}),os&&os.forEach(function(ls){var fs=ls.source,hs=ls.target,vs=us[fs],gs=us[hs];!vs&&vs!==0||!gs&&gs!==0||(is[vs][gs]=1,rs||(is[gs][vs]=1))}),is},defaultComparator$2=function(ts,rs){return ts===rs},LinkedListNode$2=function(){function ns(ts,rs){rs===void 0&&(rs=null),this.value=ts,this.next=rs}return ns.prototype.toString=function(ts){return ts?ts(this.value):"".concat(this.value)},ns}(),LinkedList$2=function(){function ns(ts){ts===void 0&&(ts=defaultComparator$2),this.head=null,this.tail=null,this.compare=ts}return ns.prototype.prepend=function(ts){var rs=new LinkedListNode$2(ts,this.head);return this.head=rs,this.tail||(this.tail=rs),this},ns.prototype.append=function(ts){var rs=new LinkedListNode$2(ts);return this.head?(this.tail.next=rs,this.tail=rs,this):(this.head=rs,this.tail=rs,this)},ns.prototype.delete=function(ts){if(!this.head)return null;for(var rs=null;this.head&&this.compare(this.head.value,ts);)rs=this.head,this.head=this.head.next;var as=this.head;if(as!==null)for(;as.next;)this.compare(as.next.value,ts)?(rs=as.next,as.next=as.next.next):as=as.next;return this.compare(this.tail.value,ts)&&(this.tail=as),rs},ns.prototype.find=function(ts){var rs=ts.value,as=rs===void 0?void 0:rs,os=ts.callback,is=os===void 0?void 0:os;if(!this.head)return null;for(var us=this.head;us;){if(is&&is(us.value)||as!==void 0&&this.compare(us.value,as))return us;us=us.next}return null},ns.prototype.deleteTail=function(){var ts=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,ts;for(var rs=this.head;rs.next;)rs.next.next?rs=rs.next:rs.next=null;return this.tail=rs,ts},ns.prototype.deleteHead=function(){if(!this.head)return null;var ts=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),ts},ns.prototype.fromArray=function(ts){var rs=this;return ts.forEach(function(as){return rs.append(as)}),this},ns.prototype.toArray=function(){for(var ts=[],rs=this.head;rs;)ts.push(rs),rs=rs.next;return ts},ns.prototype.reverse=function(){for(var ts=this.head,rs=null,as=null;ts;)as=ts.next,ts.next=rs,rs=ts,ts=as;this.tail=this.head,this.head=rs},ns.prototype.toString=function(ts){return ts===void 0&&(ts=void 0),this.toArray().map(function(rs){return rs.toString(ts)}).toString()},ns}(),Queue$1=function(){function ns(){this.linkedList=new LinkedList$2}return ns.prototype.isEmpty=function(){return!this.linkedList.head},ns.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},ns.prototype.enqueue=function(ts){this.linkedList.append(ts)},ns.prototype.dequeue=function(){var ts=this.linkedList.deleteHead();return ts?ts.value:null},ns.prototype.toString=function(ts){return this.linkedList.toString(ts)},ns}(),getNeighbors$1=function(ts,rs,as){rs===void 0&&(rs=[]);var os=rs.filter(function(fs){return fs.source===ts||fs.target===ts});if(as==="target"){var is=function(hs){return hs.source===ts};return os.filter(is).map(function(fs){return fs.target})}if(as==="source"){var us=function(hs){return hs.target===ts};return os.filter(us).map(function(fs){return fs.source})}var ls=function(hs){return hs.source===ts?hs.target:hs.source};return os.map(ls)},getOutEdgesNodeId$1=function(ts,rs){return rs.filter(function(as){return as.source===ts})},getEdgesByNodeId$1=function(ts,rs){return rs.filter(function(as){return as.source===ts||as.target===ts})},uniqueId$4=function(ts){ts===void 0&&(ts=0);var rs="".concat(Math.random()).split(".")[1].substr(0,5),as="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(ts,"-").concat(rs).concat(as)};function initCallbacks$3(ns){ns===void 0&&(ns={});var ts=ns,rs=function(){},as=function(){var os={};return function(is){var us=is.next,ls=us;return os[ls]?!1:(os[ls]=!0,!0)}}();return ts.allowTraversal=ns.allowTraversal||as,ts.enter=ns.enter||rs,ts.leave=ns.leave||rs,ts}var breadthFirstSearch$1=function(ts,rs,as,os){os===void 0&&(os=!0);var is=initCallbacks$3(as),us=new Queue$1,ls=ts.edges,fs=ls===void 0?[]:ls;us.enqueue(rs);for(var hs="",vs=function(){var ys=us.dequeue();is.enter({current:ys,previous:hs}),getNeighbors$1(ys,fs,os?"target":void 0).forEach(function(xs){is.allowTraversal({previous:hs,current:ys,next:xs})&&us.enqueue(xs)}),is.leave({current:ys,previous:hs}),hs=ys};!us.isEmpty();)vs()},detectConnectedComponents$1=function(ts){for(var rs=ts.nodes,as=rs===void 0?[]:rs,os=ts.edges,is=os===void 0?[]:os,us=[],ls={},fs=[],hs=function xs(ms){fs.push(ms),ls[ms.id]=!0;for(var Ss=getNeighbors$1(ms.id,is),Ms=function(Cs){var As=Ss[Cs];if(!ls[As]){var Is=as.filter(function(ks){return ks.id===As});Is.length>0&&xs(Is[0])}},$s=0;$s<Ss.length;++$s)Ms($s)},vs=0;vs<as.length;vs++){var gs=as[vs];if(!ls[gs.id]){hs(gs);for(var ys=[];fs.length>0;)ys.push(fs.pop());us.push(ys)}}return us},detectStrongConnectComponents$1=function(ts){for(var rs=ts.nodes,as=rs===void 0?[]:rs,os=ts.edges,is=os===void 0?[]:os,us=[],ls={},fs={},hs={},vs=[],gs=0,ys=function Ms($s){fs[$s.id]=gs,hs[$s.id]=gs,gs+=1,us.push($s),ls[$s.id]=!0;for(var bs=getNeighbors$1($s.id,is,"target").filter(function(Ps){return as.map(function(Ds){return Ds.id}).indexOf(Ps)>-1}),Cs=function(Ds){var Fs=bs[Ds];if(!fs[Fs]&&fs[Fs]!==0){var Rs=as.filter(function(js){return js.id===Fs});Rs.length>0&&Ms(Rs[0]),hs[$s.id]=Math.min(hs[$s.id],hs[Fs])}else ls[Fs]&&(hs[$s.id]=Math.min(hs[$s.id],fs[Fs]))},As=0;As<bs.length;As++)Cs(As);if(hs[$s.id]===fs[$s.id]){for(var Is=[];us.length>0;){var ks=us.pop();if(ls[ks.id]=!1,Is.push(ks),ks===$s)break}Is.length>0&&vs.push(Is)}},xs=0,ms=as;xs<ms.length;xs++){var Ss=ms[xs];!fs[Ss.id]&&fs[Ss.id]!==0&&ys(Ss)}return vs};function getConnectedComponents$1(ns,ts){return ts?detectStrongConnectComponents$1(ns):detectConnectedComponents$1(ns)}var degree$3=function(ts){var rs={},as=ts.nodes,os=as===void 0?[]:as,is=ts.edges,us=is===void 0?[]:is;return os.forEach(function(ls){rs[ls.id]={degree:0,inDegree:0,outDegree:0}}),us.forEach(function(ls){rs[ls.source].degree++,rs[ls.source].outDegree++,rs[ls.target].degree++,rs[ls.target].inDegree++}),rs},getInDegree$1=function(ts,rs){var as=degree$3(ts);return as[rs]?degree$3(ts)[rs].inDegree:0},getOutDegree$1=function(ts,rs){var as=degree$3(ts);return as[rs]?degree$3(ts)[rs].outDegree:0};function initCallbacks$2(ns){ns===void 0&&(ns={});var ts=ns,rs=function(){},as=function(){var os={};return function(is){var us=is.next;return os[us]?!1:(os[us]=!0,!0)}}();return ts.allowTraversal=ns.allowTraversal||as,ts.enter=ns.enter||rs,ts.leave=ns.leave||rs,ts}function depthFirstSearchRecursive$1(ns,ts,rs,as,os){os===void 0&&(os=!0),as.enter({current:ts,previous:rs});var is=ns.edges,us=is===void 0?[]:is;getNeighbors$1(ts,us,os?"target":void 0).forEach(function(ls){as.allowTraversal({previous:rs,current:ts,next:ls})&&depthFirstSearchRecursive$1(ns,ls,ts,as,os)}),as.leave({current:ts,previous:rs})}function depthFirstSearch$1(ns,ts,rs,as){as===void 0&&(as=!0),depthFirstSearchRecursive$1(ns,ts,"",initCallbacks$2(rs),as)}var detectDirectedCycle$2=function(ts){var rs=null,as=ts.nodes,os=as===void 0?[]:as,is={},us={},ls={},fs={};os.forEach(function(gs){us[gs.id]=gs});for(var hs={enter:function(ys){var xs=ys.current,ms=ys.previous;if(ls[xs]){rs={};for(var Ss=xs,Ms=ms;Ms!==xs;)rs[Ss]=Ms,Ss=Ms,Ms=is[Ms];rs[Ss]=Ms}else ls[xs]=xs,delete us[xs],is[xs]=ms},leave:function(ys){var xs=ys.current;fs[xs]=xs,delete ls[xs]},allowTraversal:function(ys){var xs=ys.next;return rs?!1:!fs[xs]}};Object.keys(us).length;){var vs=Object.keys(us)[0];depthFirstSearch$1(ts,vs,hs)}return rs},detectAllUndirectedCycle$1=function(ts,rs,as){var os,is;as===void 0&&(as=!0);for(var us=[],ls=getConnectedComponents$1(ts,!1),fs=0,hs=ls;fs<hs.length;fs++){var vs=hs[fs];if(vs.length)for(var gs=vs[0],ys=gs.id,xs=[gs],ms=(os={},os[ys]=gs,os),Ss=(is={},is[ys]=new Set,is);xs.length>0;)for(var Ms=xs.pop(),$s=Ms.id,bs=getNeighbors$1($s,ts.edges),Cs=function(ks){var Ps,Ds=bs[ks],Fs=ts.nodes.find(function(Ks){return Ks.id===Ds});if(Ds===$s)us.push((Ps={},Ps[Ds]=Ms,Ps));else if(!(Ds in Ss))ms[Ds]=Ms,xs.push(Fs),Ss[Ds]=new Set([Ms]);else if(!Ss[$s].has(Fs)){for(var Rs=!0,js=[Fs,Ms],zs=ms[$s];Ss[Ds].size&&!Ss[Ds].has(zs)&&(js.push(zs),zs!==ms[zs.id]);)zs=ms[zs.id];if(js.push(zs),rs&&as?(Rs=!1,js.findIndex(function(Ks){return rs.indexOf(Ks.id)>-1})>-1&&(Rs=!0)):rs&&!as&&js.findIndex(function(Ks){return rs.indexOf(Ks.id)>-1})>-1&&(Rs=!1),Rs){for(var Us={},Ys=1;Ys<js.length;Ys+=1)Us[js[Ys-1].id]=js[Ys];js.length&&(Us[js[js.length-1].id]=js[0]),us.push(Us)}Ss[Ds].add(Ms)}},As=0;As<bs.length;As+=1)Cs(As)}return us},detectAllDirectedCycle$1=function(ts,rs,as){as===void 0&&(as=!0);for(var os=[],is=new Set,us=[],ls=[],fs={},hs={},vs=function(zs){for(var Us=[zs];Us.length>0;){var Ys=Us.pop();is.has(Ys)&&(is.delete(Ys),us[Ys.id].forEach(function(Ks){Us.push(Ks)}),us[Ys.id].clear())}},gs=function js(zs,Us,Ys){var Ks=!1;if(rs&&as===!1&&rs.indexOf(zs.id)>-1)return Ks;os.push(zs),is.add(zs);for(var qs=Ys[zs.id],_l=0;_l<qs.length;_l+=1){var Js=fs[qs[_l]];if(Js===Us){for(var Vs={},Zs=1;Zs<os.length;Zs+=1)Vs[os[Zs-1].id]=os[Zs];os.length&&(Vs[os[os.length-1].id]=os[0]),ls.push(Vs),Ks=!0}else is.has(Js)||js(Js,Us,Ys)&&(Ks=!0)}if(Ks)vs(zs);else for(var _l=0;_l<qs.length;_l+=1){var Js=fs[qs[_l]];us[Js.id].has(zs)||us[Js.id].add(zs)}return os.pop(),Ks},ys=ts.nodes,xs=ys===void 0?[]:ys,ms=0;ms<xs.length;ms+=1){var Ss=xs[ms],Ms=Ss.id;hs[Ms]=ms,fs[ms]=Ss}if(rs&&as)for(var $s=function(zs){var Us=rs[zs];hs[xs[zs].id]=hs[Us],hs[Us]=0,fs[0]=xs.find(function(Ys){return Ys.id===Us}),fs[hs[xs[zs].id]]=xs[zs]},ms=0;ms<rs.length;ms++)$s(ms);for(var bs=function(zs){for(var Us,Ys,Ks=1/0,qs=0;qs<zs.length;qs+=1)for(var _l=zs[qs],Js=0;Js<_l.length;Js++){var Vs=hs[_l[Js].id];Vs<Ks&&(Ks=Vs,Ys=qs)}for(var Zs=zs[Ys],Sl=[],qs=0;qs<Zs.length;qs+=1){var Il=Zs[qs];Sl[Il.id]=[];for(var Nl=0,Tl=getNeighbors$1(Il.id,ts.edges,"target").filter(function(g0){return Zs.map(function(R0){return R0.id}).indexOf(g0)>-1});Nl<Tl.length;Nl++){var _c=Tl[Nl];_c===Il.id&&!(as===!1&&rs.indexOf(Il.id)>-1)?ls.push((Us={},Us[Il.id]=Il,Us)):Sl[Il.id].push(hs[_c])}}return{component:Zs,adjList:Sl,minIdx:Ks}},Cs=0;Cs<xs.length;){var As=xs.filter(function(js){return hs[js.id]>=Cs}),Is=detectStrongConnectComponents$1({nodes:As,edges:ts.edges}).filter(function(js){return js.length>1});if(Is.length===0)break;var ks=bs(Is),Ps=ks.minIdx,Ds=ks.adjList,Fs=ks.component;if(Fs.length>1){Fs.forEach(function(js){us[js.id]=new Set});var Rs=fs[Ps];if(rs&&as&&rs.indexOf(Rs.id)===-1)return ls;gs(Rs,Rs,Ds),Cs=Ps+1}else break}return ls},detectAllCycles$1=function(ts,rs,as,os){return os===void 0&&(os=!0),rs?detectAllDirectedCycle$1(ts,as,os):detectAllUndirectedCycle$1(ts,as,os)},minVertex$1=function(ts,rs,as){for(var os=1/0,is,us=0;us<rs.length;us++){var ls=rs[us].id;!as[ls]&&ts[ls]<=os&&(os=ts[ls],is=rs[us])}return is},dijkstra$3=function(ts,rs,as,os){var is=ts.nodes,us=is===void 0?[]:is,ls=ts.edges,fs=ls===void 0?[]:ls,hs={},vs={},gs={};us.forEach(function(bs,Cs){var As=bs.id;vs[As]=1/0,As===rs&&(vs[As]=0)});for(var ys=us.length,xs=function(Cs){var As=minVertex$1(vs,us,hs),Is=As.id;if(hs[Is]=!0,vs[Is]===1/0)return"continue";var ks=[];as?ks=getOutEdgesNodeId$1(Is,fs):ks=getEdgesByNodeId$1(Is,fs),ks.forEach(function(Ps){var Ds=Ps.target,Fs=Ps.source,Rs=Ds===Is?Fs:Ds,js=os&&Ps[os]?Ps[os]:1;vs[Rs]>vs[As.id]+js?(vs[Rs]=vs[As.id]+js,gs[Rs]=[As.id]):vs[Rs]===vs[As.id]+js&&gs[Rs].push(As.id)})},ms=0;ms<ys;ms++)xs();gs[rs]=[rs];var Ss={};for(var Ms in vs)vs[Ms]!==1/0&&findAllPaths$1(rs,Ms,gs,Ss);var $s={};for(var Ms in Ss)$s[Ms]=Ss[Ms][0];return{length:vs,path:$s,allPath:Ss}};function findAllPaths$1(ns,ts,rs,as){if(ns===ts)return[ns];if(as[ts])return as[ts];for(var os=[],is=0,us=rs[ts];is<us.length;is++){var ls=us[is],fs=findAllPaths$1(ns,ls,rs,as);if(!fs)return;for(var hs=0,vs=fs;hs<vs.length;hs++){var gs=vs[hs];isArray$2(gs)?os.push(__spreadArray$4(__spreadArray$4([],gs,!0),[ts],!1)):os.push([gs,ts])}}return as[ts]=os,as[ts]}var findShortestPath$1=function(ts,rs,as,os,is){var us=dijkstra$3(ts,rs,os,is),ls=us.length,fs=us.path,hs=us.allPath;return{length:ls[as],path:fs[as],allPath:hs[as]}},findAllPath$1=function(ts,rs,as,os){var is;if(rs===as)return[[rs]];var us=ts.edges,ls=us===void 0?[]:us,fs=[rs],hs=(is={},is[rs]=!0,is),vs=[],gs=[],ys=os?getNeighbors$1(rs,ls,"target"):getNeighbors$1(rs,ls);for(vs.push(ys);fs.length>0&&vs.length>0;){var xs=vs[vs.length-1];if(xs.length){var ms=xs.shift();ms&&(fs.push(ms),hs[ms]=!0,ys=os?getNeighbors$1(ms,ls,"target"):getNeighbors$1(ms,ls),vs.push(ys.filter(function($s){return!hs[$s]})))}else{var Ss=fs.pop();hs[Ss]=!1,vs.pop();continue}if(fs[fs.length-1]===as){var Ms=fs.map(function(bs){return bs});gs.push(Ms);var Ss=fs.pop();hs[Ss]=!1,vs.pop()}}return gs},floydWarshall$6=function(ts,rs){for(var as=adjMatrix$2(ts,rs),os=[],is=as.length,us=0;us<is;us+=1){os[us]=[];for(var ls=0;ls<is;ls+=1)us===ls?os[us][ls]=0:as[us][ls]===0||!as[us][ls]?os[us][ls]=1/0:os[us][ls]=as[us][ls]}for(var fs=0;fs<is;fs+=1)for(var us=0;us<is;us+=1)for(var ls=0;ls<is;ls+=1)os[us][ls]>os[us][fs]+os[fs][ls]&&(os[us][ls]=os[us][fs]+os[fs][ls]);return os},labelPropagation$2=function(ts,rs,as,os){rs===void 0&&(rs=!1),as===void 0&&(as="weight"),os===void 0&&(os=1e3);var is=ts.nodes,us=is===void 0?[]:is,ls=ts.edges,fs=ls===void 0?[]:ls,hs={},vs={};us.forEach(function(Cs,As){var Is=uniqueId$4();Cs.clusterId=Is,hs[Is]={id:Is,nodes:[Cs]},vs[Cs.id]={node:Cs,idx:As}});var gs=adjMatrix$2(ts,rs),ys={};gs.forEach(function(Cs,As){var Is=us[As].id;ys[Is]={},Cs.forEach(function(ks,Ps){if(ks){var Ds=us[Ps].id;ys[Is][Ds]=ks}})});for(var xs=0,ms=function(){var As=!1;if(us.forEach(function(Is){var ks={};Object.keys(ys[Is.id]).forEach(function(Ys){var Ks=ys[Is.id][Ys],qs=vs[Ys].node,_l=qs.clusterId;ks[_l]||(ks[_l]=0),ks[_l]+=Ks});var Ps=-1/0,Ds=[];if(Object.keys(ks).forEach(function(Ys){Ps<ks[Ys]?(Ps=ks[Ys],Ds=[Ys]):Ps===ks[Ys]&&Ds.push(Ys)}),!(Ds.length===1&&Ds[0]===Is.clusterId)){var Fs=Ds.indexOf(Is.clusterId);if(Fs>=0&&Ds.splice(Fs,1),Ds&&Ds.length){As=!0;var Rs=hs[Is.clusterId],js=Rs.nodes.indexOf(Is);Rs.nodes.splice(js,1);var zs=Math.floor(Math.random()*Ds.length),Us=hs[Ds[zs]];Us.nodes.push(Is),Is.clusterId=Us.id}}}),!As)return"break";xs++};xs<os;){var Ss=ms();if(Ss==="break")break}Object.keys(hs).forEach(function(Cs){var As=hs[Cs];(!As.nodes||!As.nodes.length)&&delete hs[Cs]});var Ms=[],$s={};fs.forEach(function(Cs){var As=Cs.source,Is=Cs.target,ks=Cs[as]||1,Ps=vs[As].node.clusterId,Ds=vs[Is].node.clusterId,Fs="".concat(Ps,"---").concat(Ds);if($s[Fs])$s[Fs].weight+=ks,$s[Fs].count++;else{var Rs={source:Ps,target:Ds,weight:ks,count:1};$s[Fs]=Rs,Ms.push(Rs)}});var bs=[];return Object.keys(hs).forEach(function(Cs){bs.push(hs[Cs])}),{clusters:bs,clusterEdges:Ms}},Vector$1=function(){function ns(ts){this.arr=ts}return ns.prototype.getArr=function(){return this.arr||[]},ns.prototype.add=function(ts){var rs,as=ts.arr;if(!(!((rs=this.arr)===null||rs===void 0)&&rs.length))return new ns(as);if(!(as!=null&&as.length))return new ns(this.arr);if(this.arr.length===as.length){var os=[];for(var is in this.arr)os[is]=this.arr[is]+as[is];return new ns(os)}},ns.prototype.subtract=function(ts){var rs,as=ts.arr;if(!(!((rs=this.arr)===null||rs===void 0)&&rs.length))return new ns(as);if(!(as!=null&&as.length))return new ns(this.arr);if(this.arr.length===as.length){var os=[];for(var is in this.arr)os[is]=this.arr[is]-as[is];return new ns(os)}},ns.prototype.avg=function(ts){var rs=[];if(ts!==0)for(var as in this.arr)rs[as]=this.arr[as]/ts;return new ns(rs)},ns.prototype.negate=function(){var ts=[];for(var rs in this.arr)ts[rs]=-this.arr[rs];return new ns(ts)},ns.prototype.squareEuclideanDistance=function(ts){var rs,as=ts.arr;if(!(!((rs=this.arr)===null||rs===void 0)&&rs.length)||!(as!=null&&as.length))return 0;if(this.arr.length===as.length){var os=0;for(var is in this.arr)os+=Math.pow(this.arr[is]-ts.arr[is],2);return os}},ns.prototype.euclideanDistance=function(ts){var rs,as=ts.arr;if(!(!((rs=this.arr)===null||rs===void 0)&&rs.length)||!(as!=null&&as.length))return 0;if(this.arr.length===as.length){var os=0;for(var is in this.arr)os+=Math.pow(this.arr[is]-ts.arr[is],2);return Math.sqrt(os)}else console.error("The two vectors are unequal in length.")},ns.prototype.normalize=function(){var ts=[],rs=clone$b(this.arr);rs.sort(function(us,ls){return us-ls});var as=rs[rs.length-1],os=rs[0];for(var is in this.arr)ts[is]=(this.arr[is]-os)/(as-os);return new ns(ts)},ns.prototype.norm2=function(){var ts;if(!(!((ts=this.arr)===null||ts===void 0)&&ts.length))return 0;var rs=0;for(var as in this.arr)rs+=Math.pow(this.arr[as],2);return Math.sqrt(rs)},ns.prototype.dot=function(ts){var rs,as=ts.arr;if(!(!((rs=this.arr)===null||rs===void 0)&&rs.length)||!(as!=null&&as.length))return 0;if(this.arr.length===as.length){var os=0;for(var is in this.arr)os+=this.arr[is]*ts.arr[is];return os}else console.error("The two vectors are unequal in length.")},ns.prototype.equal=function(ts){var rs,as=ts.arr;if(((rs=this.arr)===null||rs===void 0?void 0:rs.length)!==(as==null?void 0:as.length))return!1;for(var os in this.arr)if(this.arr[os]!==as[os])return!1;return!0},ns}(),getAllProperties$1=function(ts,rs){rs===void 0&&(rs=void 0);var as=[];return ts.forEach(function(os){rs===void 0&&as.push(os),os[rs]!==void 0&&as.push(os[rs])}),as},DistanceType$1;(function(ns){ns.EuclideanDistance="euclideanDistance"})(DistanceType$1||(DistanceType$1={}));var getAllKeyValueMap$1=function(ts,rs,as){var os=[];rs!=null&&rs.length?os=rs:(ts.forEach(function(us){os=os.concat(Object.keys(us))}),os=uniq$1(os));var is={};return os.forEach(function(us){var ls=[];ts.forEach(function(fs){fs[us]!==void 0&&fs[us]!==""&&ls.push(fs[us])}),ls.length&&!(as!=null&&as.includes(us))&&(is[us]=uniq$1(ls))}),is},oneHot$1=function(ts,rs,as){var os=getAllKeyValueMap$1(ts,rs,as),is=[];if(!Object.keys(os).length)return is;var us=Object.values(os),ls=us.every(function(fs){return fs.every(function(hs){return typeof hs=="number"})});return ts.forEach(function(fs,hs){var vs=[];Object.keys(os).forEach(function(gs){var ys=fs[gs],xs=os[gs],ms=xs.findIndex(function($s){return ys===$s}),Ss=[];if(ls)Ss.push(ys);else for(var Ms=0;Ms<xs.length;Ms++)Ms===ms?Ss.push(1):Ss.push(0);vs=vs.concat(Ss)}),is[hs]=vs}),is},getDistance$1=function(ts,rs,as,os){as===void 0&&(as=DistanceType$1.EuclideanDistance);var is=0;switch(as){case DistanceType$1.EuclideanDistance:is=new Vector$1(ts).euclideanDistance(new Vector$1(rs));break}return is},getModularity$1=function(ts,rs,as,os){for(var is=rs.length,us=2*os,ls=0,fs=0;fs<is;fs++)for(var hs=ts[fs].clusterId,vs=0;vs<is;vs++){var gs=ts[vs].clusterId;if(hs===gs){var ys=rs[fs][vs]||0,xs=as[fs]||0,ms=as[vs]||0;ls+=ys-xs*ms/us}}return ls*=1/us,ls},getInertialModularity$1=function(ts,rs){ts===void 0&&(ts=[]);for(var as=ts.length,os=new Vector$1([]),is=0;is<as;is++)os=os.add(new Vector$1(rs[is]));var us=os.avg(as);us.normalize();for(var ls=0,is=0;is<as;is++){var fs=new Vector$1(rs[is]),hs=fs.squareEuclideanDistance(us);ls+=hs}var vs=[];ts.forEach(function(){vs.push([])});for(var is=0;is<as;is++){var fs=new Vector$1(rs[is]);ts[is].clusterInertial=0;for(var gs=0;gs<as;gs++){if(is===gs){vs[is][gs]=0;continue}var ys=new Vector$1(rs[gs]);vs[is][gs]=fs.squareEuclideanDistance(ys),ts[is].clusterInertial+=vs[is][gs]}}for(var xs=0,ms=2*as*ls,is=0;is<as;is++)for(var Ss=ts[is].clusterId,gs=0;gs<as;gs++){var Ms=ts[gs].clusterId;if(!(is===gs||Ss!==Ms)){var $s=ts[is].clusterInertial*ts[gs].clusterInertial/Math.pow(ms,2)-vs[is][gs]/ms;xs+=$s}}return Number(xs.toFixed(4))},louvain$2=function(ts,rs,as,os,is,us,ls,fs,hs){rs===void 0&&(rs=!1),as===void 0&&(as="weight"),os===void 0&&(os=1e-4),is===void 0&&(is=!1),us===void 0&&(us=void 0),ls===void 0&&(ls=[]),fs===void 0&&(fs=["id"]),hs===void 0&&(hs=1);var vs=ts.nodes,gs=vs===void 0?[]:vs,ys=ts.edges,xs=ys===void 0?[]:ys,ms=[];if(is){gs.forEach(function(Vs,Zs){Vs.properties=Vs.properties||{},Vs.originIndex=Zs});var Ss=[];gs.every(function(Vs){return Vs.hasOwnProperty("nodeType")})&&(Ss=Array.from(new Set(gs.map(function(Vs){return Vs.nodeType}))),gs.forEach(function(Vs){Vs.properties.nodeType=Ss.findIndex(function(Zs){return Zs===Vs.nodeType})}));var Ms=getAllProperties$1(gs,us);ms=oneHot$1(Ms,ls,fs)}var $s=1,bs={},Cs={};gs.forEach(function(Vs,Zs){var Sl=String($s++);Vs.clusterId=Sl,bs[Sl]={id:Sl,nodes:[Vs]},Cs[Vs.id]={node:Vs,idx:Zs}});var As=adjMatrix$2(ts,rs),Is=[],ks={},Ps=0;As.forEach(function(Vs,Zs){var Sl=0,Il=gs[Zs].id;ks[Il]={},Vs.forEach(function(Nl,Tl){if(Nl){Sl+=Nl;var _c=gs[Tl].id;ks[Il][_c]=Nl,Ps+=Nl}}),Is.push(Sl)}),Ps/=2;for(var Ds=1/0,Fs=1/0,Rs=0,js=[],zs={};;){is&&gs.every(function(Vs){return Vs.hasOwnProperty("properties")})?Ds=getModularity$1(gs,As,Is,Ps)+getInertialModularity$1(gs,ms)*hs:Ds=getModularity$1(gs,As,Is,Ps),Rs===0&&(Fs=Ds,js=gs,zs=bs);var Us=Ds>0&&Ds>Fs&&Ds-Fs<os;if(Ds>Fs&&(js=gs.map(function(Vs){return{node:Vs,clusterId:Vs.clusterId}}),zs=clone$b(bs),Fs=Ds),Us||Rs>100)break;Rs++,Object.keys(bs).forEach(function(Vs){var Zs=0;xs.forEach(function(Sl){var Il=Sl.source,Nl=Sl.target,Tl=Cs[Il].node.clusterId,_c=Cs[Nl].node.clusterId;(Tl===Vs&&_c!==Vs||_c===Vs&&Tl!==Vs)&&(Zs=Zs+(Sl[as]||1))}),bs[Vs].sumTot=Zs}),gs.forEach(function(Vs,Zs){var Sl=bs[Vs.clusterId],Il=0,Nl,Tl=Is[Zs]/(2*Ps),_c=0,l0=Sl.nodes;l0.forEach(function(Lv){var Jv=Cs[Lv.id].idx;_c+=As[Zs][Jv]||0});var g0=_c-Sl.sumTot*Tl,R0=l0.filter(function(Lv){return Lv.id!==Vs.id});R0.forEach(function(Lv,Jv){ms[Lv.originIndex]});var V0=getInertialModularity$1(R0,ms)*hs,U0=ks[Vs.id];if(Object.keys(U0).forEach(function(Lv){var Jv=Cs[Lv].node,Yv=Jv.clusterId;if(Yv!==Vs.clusterId){var Pv=bs[Yv],jv=Pv.nodes;if(!(!jv||!jv.length)){var wp=0;jv.forEach(function(M0){var i0=Cs[M0.id].idx;wp+=As[Zs][i0]||0});var j0=wp-Pv.sumTot*Tl,Ul=jv.concat([Vs]);Ul.forEach(function(M0,i0){ms[M0.originIndex]});var Xs=getInertialModularity$1(Ul,ms)*hs,d0=j0-g0;is&&(d0=j0+Xs-(g0+V0)),d0>Il&&(Il=d0,Nl=Pv)}}}),Il>0){Nl.nodes.push(Vs);var tv=Vs.clusterId;Vs.clusterId=Nl.id;var Os=Sl.nodes.indexOf(Vs);Sl.nodes.splice(Os,1);var ov=0,$v=0;xs.forEach(function(Lv){var Jv=Lv.source,Yv=Lv.target,Pv=Cs[Jv].node.clusterId,jv=Cs[Yv].node.clusterId;(Pv===Nl.id&&jv!==Nl.id||jv===Nl.id&&Pv!==Nl.id)&&(ov=ov+(Lv[as]||1)),(Pv===tv&&jv!==tv||jv===tv&&Pv!==tv)&&($v=$v+(Lv[as]||1))}),Nl.sumTot=ov,Sl.sumTot=$v}})}var Ys={},Ks=0;Object.keys(zs).forEach(function(Vs){var Zs=zs[Vs];if(!Zs.nodes||!Zs.nodes.length){delete zs[Vs];return}var Sl=String(Ks+1);Sl!==Vs&&(Zs.id=Sl,Zs.nodes=Zs.nodes.map(function(Il){return{id:Il.id,clusterId:Sl}}),zs[Sl]=Zs,Ys[Vs]=Sl,delete zs[Vs],Ks++)}),js.forEach(function(Vs){var Zs=Vs.node,Sl=Vs.clusterId;Zs&&(Zs.clusterId=Sl,Zs.clusterId&&Ys[Zs.clusterId]&&(Zs.clusterId=Ys[Zs.clusterId]))});var qs=[],_l={};xs.forEach(function(Vs){var Zs=Vs.source,Sl=Vs.target,Il=Vs[as]||1,Nl=Cs[Zs].node.clusterId,Tl=Cs[Sl].node.clusterId;if(!(!Nl||!Tl)){var _c="".concat(Nl,"---").concat(Tl);if(_l[_c])_l[_c].weight+=Il,_l[_c].count++;else{var l0={source:Nl,target:Tl,weight:Il,count:1};_l[_c]=l0,qs.push(l0)}}});var Js=[];return Object.keys(zs).forEach(function(Vs){Js.push(zs[Vs])}),{clusters:Js,clusterEdges:qs}},iLouvain=function(ts,rs,as,os,is,us,ls,fs){return rs===void 0&&(rs=!1),as===void 0&&(as="weight"),os===void 0&&(os=1e-4),is===void 0&&(is=void 0),us===void 0&&(us=[]),ls===void 0&&(ls=["id"]),fs===void 0&&(fs=1),louvain$2(ts,rs,as,os,!0,is,us,ls,fs)},kCore=function(ts,rs){var as;rs===void 0&&(rs=1);for(var os=clone$b(ts),is=os.nodes,us=is===void 0?[]:is,ls=os.edges,fs=ls===void 0?[]:ls,hs=function(){var ys=degree$3({nodes:us,edges:fs}),xs=Object.keys(ys);xs.sort(function(Ms,$s){var bs,Cs;return((bs=ys[Ms])===null||bs===void 0?void 0:bs.degree)-((Cs=ys[$s])===null||Cs===void 0?void 0:Cs.degree)});var ms=xs[0];if(!us.length||((as=ys[ms])===null||as===void 0?void 0:as.degree)>=rs)return"break";var Ss=us.findIndex(function(Ms){return Ms.id===ms});us.splice(Ss,1),fs=fs.filter(function(Ms){return!(Ms.source===ms||Ms.target===ms)})};;){var vs=hs();if(vs==="break")break}return{nodes:us,edges:fs}},getCentroid=function(ts,rs,as){var os=[];switch(ts){case DistanceType$1.EuclideanDistance:os=rs[as];break;default:os=[];break}return os},kMeans=function(ts,rs,as,os,is,us){rs===void 0&&(rs=3),as===void 0&&(as=void 0),os===void 0&&(os=[]),is===void 0&&(is=["id"]),us===void 0&&(us=DistanceType$1.EuclideanDistance);var ls=ts.nodes,fs=ls===void 0?[]:ls,hs=ts.edges,vs=hs===void 0?[]:hs,gs={clusters:[{id:"0",nodes:fs}],clusterEdges:[]};if(us===DistanceType$1.EuclideanDistance&&!fs.every(function(Sl){return Sl.hasOwnProperty(as)}))return gs;var ys=[],xs=[];if(us===DistanceType$1.EuclideanDistance&&(ys=getAllProperties$1(fs,as),xs=oneHot$1(ys,os,is)),!xs.length)return gs;for(var ms=uniq$1(xs.map(function(Sl){return Sl.join("")})),Ss=Math.min(rs,fs.length,ms.length),Ms=0;Ms<fs.length;Ms++)fs[Ms].originIndex=Ms;for(var $s=[],bs=[],Cs=[],Ms=0;Ms<Ss;Ms++)if(Ms===0){var As=Math.floor(Math.random()*fs.length);switch(us){case DistanceType$1.EuclideanDistance:$s[Ms]=xs[As];break;default:$s[Ms]=[];break}bs.push(As),Cs[Ms]=[fs[As]],fs[As].clusterId=String(Ms)}else{for(var Is=-1/0,ks=0,Ps=function(Nl){if(!bs.includes(Nl)){for(var Tl=0,_c=0;_c<$s.length;_c++){var l0=0;switch(us){case DistanceType$1.EuclideanDistance:l0=getDistance$1(xs[fs[Nl].originIndex],$s[_c],us);break}Tl+=l0}var g0=Tl/$s.length;g0>Is&&!$s.find(function(R0){return isEqual$3(R0,getCentroid(us,xs,fs[Nl].originIndex))})&&(Is=g0,ks=Nl)}},Ds=0;Ds<fs.length;Ds++)Ps(Ds);$s[Ms]=getCentroid(us,xs,ks),bs.push(ks),Cs[Ms]=[fs[ks]],fs[ks].clusterId=String(Ms)}for(var Fs=0;;){for(var Ms=0;Ms<fs.length;Ms++){var Rs=0,js=1/0;if(!(Fs===0&&bs.includes(Ms))){for(var zs=0;zs<$s.length;zs++){var Us=0;switch(us){case DistanceType$1.EuclideanDistance:Us=getDistance$1(xs[Ms],$s[zs],us);break}Us<js&&(js=Us,Rs=zs)}if(fs[Ms].clusterId!==void 0)for(var Ys=Cs[Number(fs[Ms].clusterId)].length-1;Ys>=0;Ys--)Cs[Number(fs[Ms].clusterId)][Ys].id===fs[Ms].id&&Cs[Number(fs[Ms].clusterId)].splice(Ys,1);fs[Ms].clusterId=String(Rs),Cs[Rs].push(fs[Ms])}}for(var Ks=!1,Ms=0;Ms<Cs.length;Ms++){for(var qs=Cs[Ms],_l=new Vector$1([]),zs=0;zs<qs.length;zs++)_l=_l.add(new Vector$1(xs[qs[zs].originIndex]));var Js=_l.avg(qs.length);Js.equal(new Vector$1($s[Ms]))||(Ks=!0,$s[Ms]=Js.getArr())}if(Fs++,fs.every(function(Sl){return Sl.clusterId!==void 0})&&Ks||Fs>=1e3)break}var Vs=[],Zs={};return vs.forEach(function(Sl){var Il,Nl,Tl=Sl.source,_c=Sl.target,l0=(Il=fs.find(function(U0){return U0.id===Tl}))===null||Il===void 0?void 0:Il.clusterId,g0=(Nl=fs.find(function(U0){return U0.id===_c}))===null||Nl===void 0?void 0:Nl.clusterId,R0="".concat(l0,"---").concat(g0);if(Zs[R0])Zs[R0].count++;else{var V0={source:l0,target:g0,count:1};Zs[R0]=V0,Vs.push(V0)}}),{clusters:Cs,clusterEdges:Vs}},cosineSimilarity=function(ts,rs){var as=new Vector$1(rs),os=as.norm2(),is=new Vector$1(ts),us=is.norm2(),ls=as.dot(is),fs=os*us,hs=fs?ls/fs:0;return hs},nodesCosineSimilarity=function(ts,rs,as,os,is){ts===void 0&&(ts=[]),as===void 0&&(as=void 0),os===void 0&&(os=[]),is===void 0&&(is=[]);var us=clone$b(ts.filter(function(ys){return ys.id!==rs.id})),ls=ts.findIndex(function(ys){return ys.id===rs.id}),fs=getAllProperties$1(ts,as),hs=oneHot$1(fs,os,is),vs=hs[ls],gs=[];return us.forEach(function(ys,xs){if(ys.id!==rs.id){var ms=hs[xs],Ss=cosineSimilarity(ms,vs);gs.push(Ss),ys.cosineSimilarity=Ss}}),us.sort(function(ys,xs){return xs.cosineSimilarity-ys.cosineSimilarity}),{allCosineSimilarity:gs,similarNodes:us}},UnionFind$1=function(){function ns(ts){this.count=ts.length,this.parent={};for(var rs=0,as=ts;rs<as.length;rs++){var os=as[rs];this.parent[os]=os}}return ns.prototype.find=function(ts){for(;this.parent[ts]!==ts;)ts=this.parent[ts];return ts},ns.prototype.union=function(ts,rs){var as=this.find(ts),os=this.find(rs);as!==os&&(as<os?(this.parent[rs]!==rs&&this.union(this.parent[rs],ts),this.parent[rs]=this.parent[ts]):(this.parent[ts]!==ts&&this.union(this.parent[ts],rs),this.parent[ts]=this.parent[rs]))},ns.prototype.connected=function(ts,rs){return this.find(ts)===this.find(rs)},ns}(),defaultCompare$1=function(ts,rs){return ts-rs},MinBinaryHeap$1=function(){function ns(ts){ts===void 0&&(ts=defaultCompare$1),this.compareFn=ts,this.list=[]}return ns.prototype.getLeft=function(ts){return 2*ts+1},ns.prototype.getRight=function(ts){return 2*ts+2},ns.prototype.getParent=function(ts){return ts===0?null:Math.floor((ts-1)/2)},ns.prototype.isEmpty=function(){return this.list.length<=0},ns.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},ns.prototype.delMin=function(){var ts=this.top(),rs=this.list.pop();return this.list.length>0&&(this.list[0]=rs,this.moveDown(0)),ts},ns.prototype.insert=function(ts){if(ts!==null){this.list.push(ts);var rs=this.list.length-1;return this.moveUp(rs),!0}return!1},ns.prototype.moveUp=function(ts){for(var rs=this.getParent(ts);ts&&ts>0&&this.compareFn(this.list[rs],this.list[ts])>0;){var as=this.list[rs];this.list[rs]=this.list[ts],this.list[ts]=as,ts=rs,rs=this.getParent(ts)}},ns.prototype.moveDown=function(ts){var rs,as=ts,os=this.getLeft(ts),is=this.getRight(ts),us=this.list.length;os!==null&&os<us&&this.compareFn(this.list[as],this.list[os])>0?as=os:is!==null&&is<us&&this.compareFn(this.list[as],this.list[is])>0&&(as=is),ts!==as&&(rs=[this.list[as],this.list[ts]],this.list[ts]=rs[0],this.list[as]=rs[1],this.moveDown(as))},ns}(),primMST$1=function(ts,rs){var as=[],os=ts.nodes,is=os===void 0?[]:os,us=ts.edges,ls=us===void 0?[]:us;if(is.length===0)return as;var fs=is[0],hs=new Set;hs.add(fs);var vs=function(Ms,$s){return rs?Ms.weight-$s.weight:0},gs=new MinBinaryHeap$1(vs);for(getEdgesByNodeId$1(fs.id,ls).forEach(function(Ss){gs.insert(Ss)});!gs.isEmpty();){var ys=gs.delMin(),xs=ys.source,ms=ys.target;hs.has(xs)&&hs.has(ms)||(as.push(ys),hs.has(xs)||(hs.add(xs),getEdgesByNodeId$1(xs,ls).forEach(function(Ss){gs.insert(Ss)})),hs.has(ms)||(hs.add(ms),getEdgesByNodeId$1(ms,ls).forEach(function(Ss){gs.insert(Ss)})))}return as},kruskalMST$1=function(ts,rs){var as=[],os=ts.nodes,is=os===void 0?[]:os,us=ts.edges,ls=us===void 0?[]:us;if(is.length===0)return as;var fs=ls.map(function(xs){return xs});rs&&fs.sort(function(xs,ms){return xs.weight-ms.weight});for(var hs=new UnionFind$1(is.map(function(xs){return xs.id}));fs.length>0;){var vs=fs.shift(),gs=vs.source,ys=vs.target;hs.connected(gs,ys)||(as.push(vs),hs.union(gs,ys))}return as},minimumSpanningTree$1=function(ts,rs,as){var os={prim:primMST$1,kruskal:kruskalMST$1};return as?os[as](ts,rs):kruskalMST$1(ts,rs)},pageRank$2=function(ts,rs,as){typeof rs!="number"&&(rs=1e-6),typeof as!="number"&&(as=.85);for(var os=1,is=0,us=1e3,ls=ts.nodes,fs=ls===void 0?[]:ls,hs=ts.edges,vs=hs===void 0?[]:hs,gs=fs.length,ys,xs={},ms={},Ss=0;Ss<gs;++Ss){var Ms=fs[Ss],$s=Ms.id;xs[$s]=1/gs,ms[$s]=1/gs}for(var bs=degree$3(ts);us>0&&os>rs;){is=0;for(var Ss=0;Ss<gs;++Ss){var Ms=fs[Ss],$s=Ms.id;if(ys=0,bs[Ms.id].inDegree===0)xs[$s]=0;else{for(var Cs=getNeighbors$1($s,vs,"source"),As=0;As<Cs.length;++As){var Is=Cs[As],ks=bs[Is].outDegree;ks>0&&(ys+=ms[Is]/ks)}xs[$s]=as*ys,is+=xs[$s]}}is=(1-is)/gs,os=0;for(var Ss=0;Ss<gs;++Ss){var Ms=fs[Ss],$s=Ms.id;ys=xs[$s]+is,os+=Math.abs(ys-ms[$s]),ms[$s]=ys}us-=1}return ms},VACANT_EDGE_ID$1=-1,VACANT_NODE_ID$1=-1,VACANT_EDGE_LABEL$1="-1",VACANT_NODE_LABEL$1="-1",VACANT_GRAPH_ID$1=-1,Edge$3=function(){function ns(ts,rs,as,os){ts===void 0&&(ts=VACANT_EDGE_ID$1),rs===void 0&&(rs=VACANT_NODE_ID$1),as===void 0&&(as=VACANT_NODE_ID$1),os===void 0&&(os=VACANT_EDGE_LABEL$1),this.id=ts,this.from=rs,this.to=as,this.label=os}return ns}(),Node$3=function(){function ns(ts,rs){ts===void 0&&(ts=VACANT_NODE_ID$1),rs===void 0&&(rs=VACANT_NODE_LABEL$1),this.id=ts,this.label=rs,this.edges=[],this.edgeMap={}}return ns.prototype.addEdge=function(ts){this.edges.push(ts),this.edgeMap[ts.id]=ts},ns}(),Graph$4=function(){function ns(ts,rs,as){ts===void 0&&(ts=VACANT_NODE_ID$1),rs===void 0&&(rs=!0),as===void 0&&(as=!1),this.id=ts,this.edgeIdAutoIncrease=rs,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=as}return ns.prototype.getNodeNum=function(){return this.nodes.length},ns.prototype.addNode=function(ts,rs){if(!this.nodeMap[ts]){var as=new Node$3(ts,rs);this.nodes.push(as),this.nodeMap[ts]=as,this.nodeLabelMap[rs]||(this.nodeLabelMap[rs]=[]),this.nodeLabelMap[rs].push(ts)}},ns.prototype.addEdge=function(ts,rs,as,os){if((this.edgeIdAutoIncrease||ts===void 0)&&(ts=this.counter++),!(this.nodeMap[rs]&&this.nodeMap[as]&&this.nodeMap[as].edgeMap[ts])){var is=new Edge$3(ts,rs,as,os);if(this.edges.push(is),this.edgeMap[ts]=is,this.nodeMap[rs].addEdge(is),this.edgeLabelMap[os]||(this.edgeLabelMap[os]=[]),this.edgeLabelMap[os].push(is),!this.directed){var us=new Edge$3(ts,as,rs,os);this.nodeMap[as].addEdge(us),this.edgeLabelMap[os].push(us)}}},ns}(),DFSedge$1=function(){function ns(ts,rs,as,os,is){this.fromNode=ts,this.toNode=rs,this.nodeEdgeNodeLabel={nodeLabel1:as||VACANT_NODE_LABEL$1,edgeLabel:os||VACANT_EDGE_LABEL$1,nodeLabel2:is||VACANT_NODE_LABEL$1}}return ns.prototype.equalTo=function(ts){return this.fromNode===ts.formNode&&this.toNode===ts.toNode&&this.nodeEdgeNodeLabel===ts.nodeEdgeNodeLabel},ns.prototype.notEqualTo=function(ts){return!this.equalTo(ts)},ns}(),DFScode$1=function(){function ns(){this.rmpath=[],this.dfsEdgeList=[]}return ns.prototype.equalTo=function(ts){var rs=this.dfsEdgeList.length,as=ts.length;if(rs!==as)return!1;for(var os=0;os<rs;os++)if(this.dfsEdgeList[os]!==ts[os])return!1;return!0},ns.prototype.notEqualTo=function(ts){return!this.equalTo(ts)},ns.prototype.pushBack=function(ts,rs,as,os,is){return this.dfsEdgeList.push(new DFSedge$1(ts,rs,as,os,is)),this.dfsEdgeList},ns.prototype.toGraph=function(ts,rs){ts===void 0&&(ts=VACANT_GRAPH_ID$1),rs===void 0&&(rs=!1);var as=new Graph$4(ts,!0,rs);return this.dfsEdgeList.forEach(function(os){var is=os.fromNode,us=os.toNode,ls=os.nodeEdgeNodeLabel,fs=ls.nodeLabel1,hs=ls.edgeLabel,vs=ls.nodeLabel2;fs!==VACANT_NODE_LABEL$1&&as.addNode(is,fs),vs!==VACANT_NODE_LABEL$1&&as.addNode(us,vs),fs!==VACANT_NODE_LABEL$1&&vs!==fs&&as.addEdge(void 0,is,us,hs)}),as},ns.prototype.buildRmpath=function(){this.rmpath=[];for(var ts=void 0,rs=this.dfsEdgeList.length,as=rs-1;as>=0;as--){var os=this.dfsEdgeList[as],is=os.fromNode,us=os.toNode;is<us&&(ts===void 0||us===ts)&&(this.rmpath.push(as),ts=is)}return this.rmpath},ns.prototype.getNodeNum=function(){var ts={};return this.dfsEdgeList.forEach(function(rs){ts[rs.fromNode]||(ts[rs.fromNode]=!0),ts[rs.toNode]||(ts[rs.toNode]=!0)}),Object.keys(ts).length},ns}(),History$1=function(){function ns(ts){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!ts){for(;ts;){var rs=ts.edge;this.edges.push(rs),this.nodesUsed[rs.from]=1,this.nodesUsed[rs.to]=1,this.edgesUsed[rs.id]=1,ts=ts.preNode}this.edges=this.edges.reverse()}}return ns.prototype.hasNode=function(ts){return this.nodesUsed[ts.id]===1},ns.prototype.hasEdge=function(ts){return this.edgesUsed[ts.id]===1},ns}(),GSpan$1=function(){function ns(ts){var rs=ts.graphs,as=ts.minSupport,os=as===void 0?2:as,is=ts.minNodeNum,us=is===void 0?1:is,ls=ts.maxNodeNum,fs=ls===void 0?4:ls,hs=ts.top,vs=hs===void 0?10:hs,gs=ts.directed,ys=gs===void 0?!1:gs,xs=ts.verbose,ms=xs===void 0?!1:xs;this.graphs=rs,this.dfsCode=new DFScode$1,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=os,this.top=vs,this.directed=ys,this.counter=0,this.maxNodeNum=fs,this.minNodeNum=us,this.verbose=ms,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return ns.prototype.findForwardRootEdges=function(ts,rs){var as=this,os=[],is=ts.nodeMap;return rs.edges.forEach(function(us){(as.directed||rs.label<=is[us.to].label)&&os.push(us)}),os},ns.prototype.findBackwardEdge=function(ts,rs,as,os){if(!this.directed&&rs===as)return null;for(var is=ts.nodeMap,us=is[as.to],ls=us.edges,fs=ls.length,hs=0;hs<fs;hs++){var vs=ls[hs];if(!(os.hasEdge(vs)||vs.to!==rs.from)){if(this.directed){if(is[rs.from].label<is[as.to].label||is[rs.from].label===is[as.to].label&&rs.label<=vs.label)return vs}else if(rs.label<vs.label||rs.label===vs.label&&is[rs.to].label<=is[as.to].label)return vs}}return null},ns.prototype.findForwardPureEdges=function(ts,rs,as,os){for(var is=[],us=rs.to,ls=ts.nodeMap[us].edges,fs=ls.length,hs=0;hs<fs;hs++){var vs=ls[hs],gs=ts.nodeMap[vs.to];as<=gs.label&&!os.hasNode(gs)&&is.push(vs)}return is},ns.prototype.findForwardRmpathEdges=function(ts,rs,as,os){for(var is=[],us=ts.nodeMap,ls=us[rs.to].label,fs=us[rs.from],hs=fs.edges,vs=hs.length,gs=0;gs<vs;gs++){var ys=hs[gs],xs=us[ys.to].label;rs.to===ys.to||as>xs||os.hasNode(us[ys.to])||(rs.label<ys.label||rs.label===ys.label&&ls<=xs)&&is.push(ys)}return is},ns.prototype.getSupport=function(ts){var rs={};return ts.forEach(function(as){rs[as.graphId]||(rs[as.graphId]=!0)}),Object.keys(rs).length},ns.prototype.findMinLabel=function(ts){var rs=void 0;return Object.keys(ts).forEach(function(as){var os=ts[as],is=os.nodeLabel1,us=os.edgeLabel,ls=os.nodeLabel2;if(!rs){rs={nodeLabel1:is,edgeLabel:us,nodeLabel2:ls};return}(is<rs.nodeLabel1||is===rs.nodeLabel1&&us<rs.edgeLabel||is===rs.nodeLabel1&&us===rs.edgeLabel&&ls<rs.nodeLabel2)&&(rs={nodeLabel1:is,edgeLabel:us,nodeLabel2:ls})}),rs},ns.prototype.isMin=function(){var ts=this,rs=this.dfsCode;if(this.verbose&&console.log("isMin checking",rs),rs.dfsEdgeList.length===1)return!0;var as=this.directed,os=rs.toGraph(VACANT_GRAPH_ID$1,as),is=os.nodeMap,us=new DFScode$1,ls={};os.nodes.forEach(function(gs){var ys=ts.findForwardRootEdges(os,gs);ys.forEach(function(xs){var ms=is[xs.to],Ss="".concat(gs.label,"-").concat(xs.label,"-").concat(ms.label);ls[Ss]||(ls[Ss]={projected:[],nodeLabel1:gs.label,edgeLabel:xs.label,nodeLabel2:ms.label});var Ms={graphId:os.id,edge:xs,preNode:null};ls[Ss].projected.push(Ms)})});var fs=this.findMinLabel(ls);if(fs){us.dfsEdgeList.push(new DFSedge$1(0,1,fs.nodeLabel1,fs.edgeLabel,fs.nodeLabel2));var hs=function gs(ys){for(var xs=us.buildRmpath(),ms=us.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,Ss=us.dfsEdgeList[xs[0]].toNode,Ms={},$s=!1,bs=0,Cs=as?-1:0,As=function(_l){if($s)return"break";ys.forEach(function(Js){var Vs=new History$1(Js),Zs=ts.findBackwardEdge(os,Vs.edges[xs[_l]],Vs.edges[xs[0]],Vs);Zs&&(Ms[Zs.label]||(Ms[Zs.label]={projected:[],edgeLabel:Zs.label}),Ms[Zs.label].projected.push({graphId:os.id,edge:Ms,preNode:Js}),bs=us.dfsEdgeList[xs[_l]].fromNode,$s=!0)})},Is=xs.length-1;Is>Cs;Is--){var ks=As(Is);if(ks==="break")break}if($s){var Ps=ts.findMinLabel(Ms);us.dfsEdgeList.push(new DFSedge$1(Ss,bs,VACANT_NODE_LABEL$1,Ps.edgeLabel,VACANT_NODE_LABEL$1));var Ds=us.dfsEdgeList.length-1;return ts.dfsCode.dfsEdgeList[Ds]!==us.dfsEdgeList[Ds]?!1:gs(Ms[Ps.edgeLabel].projected)}var Fs={};$s=!1;var Rs=0;ys.forEach(function(qs){var _l=new History$1(qs),Js=ts.findForwardPureEdges(os,_l.edges[xs[0]],ms,_l);Js.length>0&&($s=!0,Rs=Ss,Js.forEach(function(Vs){var Zs="".concat(Vs.label,"-").concat(is[Vs.to].label);Fs[Zs]||(Fs[Zs]={projected:[],edgeLabel:Vs.label,nodeLabel2:is[Vs.to].label}),Fs[Zs].projected.push({graphId:os.id,edge:Vs,preNode:qs})}))});for(var js=xs.length,zs=function(_l){if($s)return"break";var Js=xs[_l];ys.forEach(function(Vs){var Zs=new History$1(Vs),Sl=ts.findForwardRmpathEdges(os,Zs.edges[Js],ms,Zs);Sl.length>0&&($s=!0,Rs=us.dfsEdgeList[Js].fromNode,Sl.forEach(function(Il){var Nl="".concat(Il.label,"-").concat(is[Il.to].label);Fs[Nl]||(Fs[Nl]={projected:[],edgeLabel:Il.label,nodeLabel2:is[Il.to].label}),Fs[Nl].projected.push({graphId:os.id,edge:Il,preNode:Vs})}))})},Is=0;Is<js;Is++){var Us=zs(Is);if(Us==="break")break}if(!$s)return!0;var Ys=ts.findMinLabel(Fs);us.dfsEdgeList.push(new DFSedge$1(Rs,Ss+1,VACANT_NODE_LABEL$1,Ys.edgeLabel,Ys.nodeLabel2));var Ks=us.dfsEdgeList.length-1;return rs.dfsEdgeList[Ks]!==us.dfsEdgeList[Ks]?!1:gs(Fs["".concat(Ys.edgeLabel,"-").concat(Ys.nodeLabel2)].projected)},vs="".concat(fs.nodeLabel1,"-").concat(fs.edgeLabel,"-").concat(fs.nodeLabel2);return hs(ls[vs].projected)}},ns.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var ts=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(clone$b(ts))}},ns.prototype.subGraphMining=function(ts){var rs=this,as=this.getSupport(ts);if(!(as<this.minSupport)&&this.isMin()){this.report();var os=this.dfsCode.getNodeNum(),is=this.dfsCode.buildRmpath(),us=this.dfsCode.dfsEdgeList[is[0]].toNode,ls=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,fs={},hs={};ts.forEach(function(vs){for(var gs=rs.graphs[vs.graphId],ys=gs.nodeMap,xs=new History$1(vs),ms=is.length-1;ms>=0;ms--){var Ss=rs.findBackwardEdge(gs,xs.edges[is[ms]],xs.edges[is[0]],xs);if(Ss){var Ms="".concat(rs.dfsCode.dfsEdgeList[is[ms]].fromNode,"-").concat(Ss.label);hs[Ms]||(hs[Ms]={projected:[],toNodeId:rs.dfsCode.dfsEdgeList[is[ms]].fromNode,edgeLabel:Ss.label}),hs[Ms].projected.push({graphId:vs.graphId,edge:Ss,preNode:vs})}}if(!(os>=rs.maxNodeNum)){var $s=rs.findForwardPureEdges(gs,xs.edges[is[0]],ls,xs);$s.forEach(function(Cs){var As="".concat(us,"-").concat(Cs.label,"-").concat(ys[Cs.to].label);fs[As]||(fs[As]={projected:[],fromNodeId:us,edgeLabel:Cs.label,nodeLabel2:ys[Cs.to].label}),fs[As].projected.push({graphId:vs.graphId,edge:Cs,preNode:vs})});for(var bs=function(As){var Is=rs.findForwardRmpathEdges(gs,xs.edges[is[As]],ls,xs);Is.forEach(function(ks){var Ps="".concat(rs.dfsCode.dfsEdgeList[is[As]].fromNode,"-").concat(ks.label,"-").concat(ys[ks.to].label);fs[Ps]||(fs[Ps]={projected:[],fromNodeId:rs.dfsCode.dfsEdgeList[is[As]].fromNode,edgeLabel:ks.label,nodeLabel2:ys[ks.to].label}),fs[Ps].projected.push({graphId:vs.graphId,edge:ks,preNode:vs})})},ms=0;ms<is.length;ms++)bs(ms)}}),Object.keys(hs).forEach(function(vs){var gs=hs[vs],ys=gs.toNodeId,xs=gs.edgeLabel;rs.dfsCode.dfsEdgeList.push(new DFSedge$1(us,ys,"-1",xs,"-1")),rs.subGraphMining(hs[vs].projected),rs.dfsCode.dfsEdgeList.pop()}),Object.keys(fs).forEach(function(vs){var gs=fs[vs],ys=gs.fromNodeId,xs=gs.edgeLabel,ms=gs.nodeLabel2;rs.dfsCode.dfsEdgeList.push(new DFSedge$1(ys,us+1,VACANT_NODE_LABEL$1,xs,ms)),rs.subGraphMining(fs[vs].projected),rs.dfsCode.dfsEdgeList.pop()})}},ns.prototype.generate1EdgeFrequentSubGraphs=function(){var ts=this.graphs,rs=this.directed,as=this.minSupport,os=this.frequentSize1Subgraphs,is={},us={},ls={};return Object.keys(ts).forEach(function(fs){var hs=ts[fs],vs=hs.nodeMap;hs.nodes.forEach(function(gs,ys){var xs=gs.label,ms="".concat(fs,"-").concat(xs);if(!ls[ms]){var Ss=is[xs]||0;Ss++,is[xs]=Ss}ls[ms]={graphKey:fs,label:xs},gs.edges.forEach(function(Ms){var $s=xs,bs=vs[Ms.to].label;if(!rs&&$s>bs){var Cs=bs;bs=$s,$s=Cs}var As=Ms.label,Is="".concat($s,"-").concat(As,"-").concat(bs);if(!us[Is]){var ks=us[Is]||0;ks++,us[Is]=ks}})})}),Object.keys(is).forEach(function(fs){var hs=is[fs];if(!(hs<as)){var vs={nodes:[],edges:[]};vs.nodes.push({id:"0",label:fs}),os.push(vs)}}),os},ns.prototype.run=function(){var ts=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var rs=this.graphs;this.directed;var as={};Object.keys(rs).forEach(function(os){var is=rs[os],us=is.nodeMap;is.nodes.forEach(function(ls){var fs=ts.findForwardRootEdges(is,ls);fs.forEach(function(hs){var vs=us[hs.to],gs="".concat(ls.label,"-").concat(hs.label,"-").concat(vs.label);as[gs]||(as[gs]={projected:[],nodeLabel1:ls.label,edgeLabel:hs.label,nodeLabel2:vs.label});var ys={graphId:os,edge:hs,preNode:null};as[gs].projected.push(ys)})})}),Object.keys(as).forEach(function(os){var is=as[os],us=is.projected,ls=is.nodeLabel1,fs=is.edgeLabel,hs=is.nodeLabel2;ts.dfsCode.dfsEdgeList.push(new DFSedge$1(0,1,ls,fs,hs)),ts.subGraphMining(us),ts.dfsCode.dfsEdgeList.pop()})}},ns}(),formatGraphs$1=function(ts,rs,as,os){var is={};return Object.keys(ts).forEach(function(us,ls){var fs=ts[us],hs=new Graph$4(ls,!0,rs),vs={};fs.nodes.forEach(function(gs,ys){hs.addNode(ys,gs[as]),vs[gs.id]=ys}),fs.edges.forEach(function(gs,ys){var xs=vs[gs.source],ms=vs[gs.target];hs.addEdge(-1,xs,ms,gs[os])}),hs&&hs.getNodeNum()&&(is[hs.id]=hs)}),is},toGraphDatas$1=function(ts,rs,as){var os=[];return ts.forEach(function(is){var us={nodes:[],edges:[]};is.nodes.forEach(function(ls){var fs;us.nodes.push((fs={id:"".concat(ls.id)},fs[rs]=ls.label,fs))}),is.edges.forEach(function(ls){var fs;us.edges.push((fs={source:"".concat(ls.from),target:"".concat(ls.to)},fs[as]=ls.label,fs))}),os.push(us)}),os},DEFAULT_LABEL_NAME$1="cluster",gSpan$2=function(ts){var rs=ts.graphs,as=ts.directed,os=as===void 0?!1:as,is=ts.nodeLabelProp,us=is===void 0?DEFAULT_LABEL_NAME$1:is,ls=ts.edgeLabelProp,fs=ls===void 0?DEFAULT_LABEL_NAME$1:ls,hs=formatGraphs$1(rs,os,us,fs),vs=ts.minSupport,gs=ts.maxNodeNum,ys=ts.minNodeNum,xs=ts.verbose,ms=ts.top,Ss={graphs:hs,minSupport:vs,maxNodeNum:gs,minNodeNum:ys,top:ms,verbose:xs,directed:os},Ms=new GSpan$1(Ss);Ms.run();var $s=toGraphDatas$1(Ms.frequentSubgraphs,us,fs);return $s},findKNeighborUnits$1=function(ts,rs,as,os){as===void 0&&(as="cluster"),os===void 0&&(os=2);var is=[],us=ts.nodes;return rs.forEach(function(ls,fs){is.push(findKNeighborUnit$1(us,ls,fs,as,os))}),is},findKNeighborUnit$1=function(ts,rs,as,os,is){var us=[as],ls=[],fs={};return rs.forEach(function(hs,vs){if(hs<=is&&as!==vs){us.push(vs),ls.push(ts[vs]);var gs=ts[vs][os];fs[gs]?(fs[gs].count++,fs[gs].dists.push(hs)):fs[gs]={count:1,dists:[hs]}}}),Object.keys(fs).forEach(function(hs){fs[hs].dists=fs[hs].dists.sort(function(vs,gs){return vs-gs})}),{nodeIdx:as,nodeId:ts[as].id,nodeIdxs:us,neighbors:ls,neighborNum:us.length-1,nodeLabelCountMap:fs}},findNodePairsRandomly$1=function(ts,rs,as,os,is){var us=Math.ceil(as/rs),ls={},fs=0;return os.forEach(function(hs,vs){for(var gs=0,ys=0,xs=hs.nodeIdxs,ms=hs.neighborNum-1;gs<us;){for(var Ss=xs[1+Math.floor(Math.random()*ms)],Ms=0;(ls["".concat(vs,"-").concat(Ss)]||ls["".concat(Ss,"-").concat(vs)])&&(Ss=Math.floor(Math.random()*rs),Ms++,!(Ms>2*rs)););if(Ms<2*rs&&(ls["".concat(vs,"-").concat(Ss)]={start:vs,end:Ss,distance:is[vs][Ss]},gs++,fs++,fs>=as))return ls;if(ys++,ys>2*rs)break}if(gs<us){var $s=us-gs;us=(us+$s)/(rs-vs-1)}}),ls},getIntersectNeighborInducedGraph$1=function(ts,rs,as,os){var is=as.nodes;return os||(os={}),Object.keys(ts).forEach(function(us){var ls,fs;if(!(os&&os[us])){os[us]={nodes:[],edges:[]};var hs=ts[us],vs=(ls=rs[hs.start])===null||ls===void 0?void 0:ls.nodeIdxs,gs=(fs=rs[hs.end])===null||fs===void 0?void 0:fs.nodeIdxs;if(!(!vs||!gs)){var ys=new Set(gs),xs=vs.filter(function(bs){return ys.has(bs)});if(!(!xs||!xs.length)){for(var ms={},Ss=xs.length,Ms=0;Ms<Ss;Ms++){var $s=is[xs[Ms]];os[us].nodes.push($s),ms[$s.id]=!0}as.edges.forEach(function(bs){ms[bs.source]&&ms[bs.target]&&os[us].edges.push(bs)})}}}}),os},getMatchedCount$1=function(ts,rs,as,os){var is,us,ls={};ts.nodes.forEach(function(hs){ls[hs.id]=hs});var fs=0;return!(!((is=rs==null?void 0:rs.edges)===null||is===void 0)&&is.length)||((us=rs==null?void 0:rs.nodes)===null||us===void 0?void 0:us.length)<2?0:(ts.edges.forEach(function(hs){var vs=ls[hs.source][as],gs=ls[hs.target][as],ys=rs==null?void 0:rs.nodes[0][as],xs=rs==null?void 0:rs.nodes[1][as],ms=rs==null?void 0:rs.edges[0][os];hs[os]===ms&&(vs===ys&&gs===xs||vs===xs&&gs===ys)&&fs++}),fs)},findRepresentStructure$1=function(ts,rs,as){for(var os=1/0,is=0,us=function(hs){var vs=ts[hs],gs=Object.keys(vs).sort(function(bs,Cs){return vs[bs]-vs[Cs]}),ys=10,xs=[];gs.forEach(function(bs,Cs){xs[Cs%ys]||(xs[Cs%ys]={graphs:[],totalCount:0,aveCount:0}),xs[Cs%ys].graphs.push(bs),xs[Cs%ys].totalCount+=vs[bs]});var ms=0,Ss=[];xs.forEach(function(bs){var Cs=bs.totalCount/bs.graphs.length;bs.aveCount=Cs,Ss.push(Cs);var As=0,Is=bs.length;bs.graphs.forEach(function(ks,Ps){var Ds=vs[ks];bs.graphs.forEach(function(Fs,Rs){Ps!==Rs&&(As+=Math.abs(Ds-vs[Fs]))})}),As/=Is*(Is-1)/2,ms+=As}),ms/=xs.length;var Ms=0;Ss.forEach(function(bs,Cs){Ss.forEach(function(As,Is){Cs!==Is&&(Ms+=Math.abs(bs-As))}),Ms/=Ss.length*(Ss.length-1)/2});var $s=Ms-ms;os<$s&&(os=$s,is=hs)},ls=0;ls<rs;ls++)us(ls);return{structure:as[is],structureCountMap:ts[is]}},getNodeMaps$1=function(ts,rs){var as={},os={};return ts.forEach(function(is,us){as[is.id]={idx:us,node:is,degree:0,inDegree:0,outDegree:0};var ls=is[rs];os[ls]||(os[ls]=[]),os[ls].push(is)}),{nodeMap:as,nodeLabelMap:os}},getEdgeMaps$1=function(ts,rs,as){var os={},is={};return ts.forEach(function(us,ls){os["".concat(uniqueId$4)]={idx:ls,edge:us};var fs=us[rs];is[fs]||(is[fs]=[]),is[fs].push(us);var hs=as[us.source];hs&&(hs.degree++,hs.outDegree++);var vs=as[us.target];vs&&(vs.degree++,vs.inDegree++)}),{edgeMap:os,edgeLabelMap:is}},getSpmMap$1=function(ts,rs,as){var os=rs.length,is={};return rs.forEach(function(us,ls){for(var fs=as?0:ls+1,hs=ts[ls].id,vs=fs;vs<os;vs++)if(ls!==vs){var gs=ts[vs].id,ys=us[vs];is["".concat(hs,"-").concat(gs)]=ys,as||(is["".concat(gs,"-").concat(hs)]=ys)}}),is},getNDSDist$1=function(ts,rs,as,os,is,us,ls,fs,hs,vs,gs){var ys,xs="".concat(rs.id,"-").concat(as.id);if(vs&&vs[xs])return vs[xs];var ms=gs?gs[xs]:void 0;if(!ms){var Ss=(ys={},ys[xs]={start:os[rs.id].idx,end:os[as.id].idx,distance:is},ys);gs=getIntersectNeighborInducedGraph$1(Ss,us,ts,gs),ms=gs[xs]}return getMatchedCount$1(ms,ls,fs,hs)},stashPatternNodeLabelDegreeMap$1=function(ts,rs,as,os){var is,us,ls,fs=(is=ts[rs])===null||is===void 0?void 0:is.degree,hs=(us=ts[rs])===null||us===void 0?void 0:us.inDegree,vs=(ls=ts[rs])===null||ls===void 0?void 0:ls.outDegree;return ts[rs]===void 0&&(fs=1/0,hs=1/0,vs=1/0,os[rs].forEach(function(gs){var ys=as[gs.id].degree;fs>ys&&(fs=ys);var xs=as[gs.id].inDegree;hs>xs&&(hs=xs);var ms=as[gs.id].outDegree;vs>ms&&(vs=ms)}),ts[rs]={degree:fs,inDegree:hs,outDegree:vs}),{minPatternNodeLabelDegree:fs,minPatternNodeLabelInDegree:hs,minPatternNodeLabelOutDegree:vs}},GADDI$1=function(ts,rs,as,os,is,us,ls){var fs;if(as===void 0&&(as=!1),us===void 0&&(us="cluster"),ls===void 0&&(ls="cluster"),!(!ts||!ts.nodes)){var hs=ts.nodes.length;if(hs){var vs=floydWarshall$6(ts,as),gs=floydWarshall$6(rs,as),ys=getSpmMap$1(ts.nodes,vs,as),xs=getSpmMap$1(rs.nodes,gs,as),ms=getNodeMaps$1(ts.nodes,us),Ss=ms.nodeMap,Ms=ms.nodeLabelMap,$s=getNodeMaps$1(rs.nodes,us),bs=$s.nodeMap,Cs=$s.nodeLabelMap;getEdgeMaps$1(ts.edges,ls,Ss);var As=getEdgeMaps$1(rs.edges,ls,bs).edgeLabelMap,Is=[];gs==null||gs.forEach(function(j0){Is=Is.concat(j0)}),is||(is=Math.max.apply(Math,__spreadArray$4(__spreadArray$4([],Is,!1),[2],!1))),os||(os=is);var ks=findKNeighborUnits$1(ts,vs,us,os),Ps=findKNeighborUnits$1(rs,gs,us,os),Ds=Math.min(100,hs*(hs-1)/2),Fs=findNodePairsRandomly$1(os,hs,Ds,ks,vs),Rs=getIntersectNeighborInducedGraph$1(Fs,ks,ts),js=10,zs=1,Us=1,Ys=4,Ks={graphs:Rs,nodeLabelProp:us,edgeLabelProp:ls,minSupport:zs,minNodeNum:Us,maxNodeNum:Ys,directed:as},qs=gSpan$2(Ks).slice(0,js),_l=qs.length,Js=[];qs.forEach(function(j0,Ul){Js[Ul]={},Object.keys(Rs).forEach(function(Xs){var d0=Rs[Xs],M0=getMatchedCount$1(d0,j0,us,ls);Js[Ul][Xs]=M0})});var Vs=findRepresentStructure$1(Js,_l,qs),Zs=Vs.structure,Sl=Vs.structureCountMap,Il=rs.nodes[0],Nl=[],Tl=(fs=rs.nodes[0])===null||fs===void 0?void 0:fs[us],_c=-1/0;rs.nodes.forEach(function(j0){var Ul=j0[us],Xs=Ms[Ul];(Xs==null?void 0:Xs.length)>_c&&(_c=Xs.length,Nl=Xs,Tl=Ul,Il=j0)});var l0={},g0={},R0={},V0={},U0={},tv={};Object.keys(Cs).forEach(function(j0,Ul){U0[j0]=[],as&&(tv[j0]=[]);var Xs=Cs[j0],d0={};Xs.forEach(function(B0){var G0=xs["".concat(Il.id,"-").concat(B0.id)];if(G0&&U0[j0].push(G0),d0["".concat(Il.id,"-").concat(B0.id)]={start:0,end:bs[B0.id].idx,distance:G0},as){var rv=xs["".concat(B0.id,"-").concat(Il.id)];rv&&tv[j0].push(rv)}}),U0[j0]=U0[j0].sort(function(B0,G0){return B0-G0}),as&&(tv[j0]=tv[j0].sort(function(B0,G0){return B0-G0})),g0=getIntersectNeighborInducedGraph$1(d0,Ps,rs,g0);var M0=[];if(Object.keys(d0).forEach(function(B0){if(R0[B0]){M0.push(R0[B0]);return}var G0=g0[B0];R0[B0]=getMatchedCount$1(G0,Zs,us,ls),M0.push(R0[B0])}),M0=M0.sort(function(B0,G0){return G0-B0}),V0["".concat(Il.id,"-").concat(j0)]=M0,j0!==Tl)for(var i0=(Nl==null?void 0:Nl.length)||0,k0=function(G0){var rv=Nl[G0],xv=ks[Ss[rv.id].idx],qv=xv.nodeLabelCountMap[j0],Ev=Cs[j0].length;if(!qv||qv.count<Ev)return Nl.splice(G0,1),"continue";for(var Kv=!1,Xv=0;Xv<Ev;Xv++)if(qv.dists[Xv]>U0[j0][Xv]){Kv=!0;break}if(Kv)return Nl.splice(G0,1),"continue";var ap={};xv.neighbors.forEach(function(zv){var yp=ys["".concat(rv.id,"-").concat(zv.id)];ap["".concat(rv.id,"-").concat(zv.id)]={start:Ss[rv.id].idx,end:Ss[zv.id].idx,distance:yp}}),Rs=getIntersectNeighborInducedGraph$1(ap,ks,ts,Rs);var tp=[];Object.keys(ap).forEach(function(zv){if(Sl[zv]){tp.push(Sl[zv]);return}var yp=Rs[zv];Sl[zv]=getMatchedCount$1(yp,Zs,us,ls),tp.push(Sl[zv])}),tp=tp.sort(function(zv,yp){return yp-zv});for(var Lp=!1,Xv=0;Xv<Ev;Xv++)if(tp[Xv]<M0[Xv]){Lp=!0;break}if(Lp)return Nl.splice(G0,1),"continue"},P0=i0-1;P0>=0;P0--)k0(P0)});var Os=[];Nl==null||Nl.forEach(function(j0){for(var Ul=Ss[j0.id].idx,Xs=findKNeighborUnit$1(ts.nodes,vs[Ul],Ul,us,is),d0=Xs.neighbors,M0=d0.length,i0=!1,k0=M0-1;k0>=0;k0--){if(d0.length+1<rs.nodes.length){i0=!0;return}var P0=d0[k0],B0=P0[us];if(!Cs[B0]||!Cs[B0].length){d0.splice(k0,1);continue}if(!U0[B0]||!U0[B0].length){d0.splice(k0,1);continue}var G0="".concat(j0.id,"-").concat(P0.id),rv=ys[G0],xv=U0[B0].length-1,qv=U0[B0][xv];if(rv>qv){d0.splice(k0,1);continue}if(as){var Ev="".concat(P0.id,"-").concat(j0.id),Kv=ys[Ev];xv=tv[B0].length-1;var Xv=tv[B0][xv];if(Kv>Xv){d0.splice(k0,1);continue}}var ap=Sl[G0]?Sl[G0]:getNDSDist$1(ts,j0,P0,Ss,rv,ks,Zs,us,ls,Sl,Rs),tp="".concat(Il.id,"-").concat(B0),Lp=V0[tp][V0[tp].length-1];if(ap<Lp){d0.splice(k0,1);continue}var zv=stashPatternNodeLabelDegreeMap$1(l0,B0,bs,Cs),yp=zv.minPatternNodeLabelDegree;if(zv.minPatternNodeLabelInDegree,zv.minPatternNodeLabelOutDegree,Ss[P0.id].degree<yp){d0.splice(k0,1);continue}}i0||Os.push({nodes:[j0].concat(d0)})});var ov=dijkstra$3(rs,Il.id,!1).length,$v={};as?(Object.keys(ov).forEach(function(j0){var Ul=bs[j0].node[us];$v[Ul]?$v[Ul].push(ov[j0]):$v[Ul]=[ov[j0]]}),Object.keys($v).forEach(function(j0){$v[j0].sort(function(Ul,Xs){return Ul-Xs})})):$v=U0;for(var Lv=Os.length,Jv=function(Ul){var Xs=Os[Ul],d0=Xs.nodes[0],M0={},i0={};Xs.nodes.forEach(function(lv,rp){i0[lv.id]={idx:rp,node:lv,degree:0,inDegree:0,outDegree:0};var nv=lv[us];M0[nv]?M0[nv]++:M0[nv]=1});var k0=[],P0={};ts.edges.forEach(function(lv){i0[lv.source]&&i0[lv.target]&&(k0.push(lv),P0[lv[ls]]?P0[lv[ls]]++:P0[lv[ls]]=1,i0[lv.source].degree++,i0[lv.target].degree++,i0[lv.source].outDegree++,i0[lv.target].inDegree++)});for(var B0=Object.keys(As).length,G0=!1,rv=0;rv<B0;rv++){var xv=Object.keys(As)[rv];if(!P0[xv]||P0[xv]<As[xv].length){G0=!0;break}}if(G0)return Os.splice(Ul,1),"continue";var qv=k0.length;if(qv<rs.edges.length)return Os.splice(Ul,1),"break";for(var Ev=!1,Kv=function(rp){var nv=k0[rp],fp=nv[ls],Tp=As[fp];if(!Tp||!Tp.length)return P0[fp]--,Tp&&P0[fp]<Tp.length?(Ev=!0,"break"):(k0.splice(rp,1),i0[nv.source].degree--,i0[nv.target].degree--,i0[nv.source].outDegree--,i0[nv.target].inDegree--,"continue");var r2=i0[nv.source].node[us],v1=i0[nv.target].node[us],p1=!1;if(Tp.forEach(function(j1){var n2=bs[j1.source].node,yv=bs[j1.target].node;n2[us]===r2&&yv[us]===v1&&(p1=!0),!as&&n2[us]===v1&&yv[us]===r2&&(p1=!0)}),!p1)return P0[fp]--,Tp&&P0[fp]<Tp.length?(Ev=!0,"break"):(k0.splice(rp,1),i0[nv.source].degree--,i0[nv.target].degree--,i0[nv.source].outDegree--,i0[nv.target].inDegree--,"continue")},rv=qv-1;rv>=0;rv--){var Xv=Kv(rv);if(Xv==="break")break}if(Ev)return Os.splice(Ul,1),"continue";Xs.edges=k0;var ap=dijkstra$3(Xs,Xs.nodes[0].id,!1).length;if(Object.keys(ap).reverse().forEach(function(lv){if(!(lv===Xs.nodes[0].id||Ev)){if(ap[lv]===1/0){var rp=i0[lv].node[us];if(M0[rp]--,M0[rp]<Cs[rp].length){Ev=!0;return}var nv=Xs.nodes.indexOf(i0[lv].node);Xs.nodes.splice(nv,1),i0[lv]=void 0;return}var fp=Ss[lv].node[us];if(!$v[fp]||!$v[fp].length||ap[lv]>$v[fp][$v[fp].length-1]){var rp=i0[lv].node[us];if(M0[rp]--,M0[rp]<Cs[rp].length){Ev=!0;return}var nv=Xs.nodes.indexOf(i0[lv].node);Xs.nodes.splice(nv,1),i0[lv]=void 0}}}),Ev)return Os.splice(Ul,1),"continue";for(var tp=!0,Lp=0;tp&&!Ev;){tp=!1;var zv=as?i0[d0.id].degree<bs[Il.id].degree||i0[d0.id].inDegree<bs[Il.id].inDegree||i0[d0.id].outDegree<bs[Il.id].outDegree:i0[d0.id].degree<bs[Il.id].degree;if(zv){Ev=!0;break}if(M0[d0[us]]<Cs[d0[us]].length){Ev=!0;break}for(var yp=Xs.nodes.length,c1=yp-1;c1>=0;c1--){var $p=Xs.nodes[c1],d1=i0[$p.id].degree,A2=i0[$p.id].inDegree,I2=i0[$p.id].outDegree,Cp=$p[us],A1=stashPatternNodeLabelDegreeMap$1(l0,Cp,bs,Cs),g2=A1.minPatternNodeLabelDegree,om=A1.minPatternNodeLabelInDegree,k2=A1.minPatternNodeLabelOutDegree,sm=as?d1<g2||A2<om||I2<k2:d1<g2;if(sm){if(M0[$p[us]]--,M0[$p[us]]<Cs[$p[us]].length){Ev=!0;break}Xs.nodes.splice(c1,1),i0[$p.id]=void 0,tp=!0}}if(Ev||!tp&&Lp!==0)break;qv=k0.length;for(var s1=qv-1;s1>=0;s1--){var Z0=k0[s1];if(!i0[Z0.source]||!i0[Z0.target]){k0.splice(s1,1);var h1=Z0[ls];if(P0[h1]--,i0[Z0.source]&&(i0[Z0.source].degree--,i0[Z0.source].outDegree--),i0[Z0.target]&&(i0[Z0.target].degree--,i0[Z0.target].inDegree--),As[h1]&&P0[h1]<As[h1].length){Ev=!0;break}tp=!0}}Lp++}if(Ev||Ev||Xs.nodes.length<rs.nodes.length||k0.length<rs.edges.length)return Os.splice(Ul,1),"continue"},Yv=Lv-1;Yv>=0;Yv--){var Pv=Jv(Yv);if(Pv==="break")break}for(var jv=Os.length,wp=function(Ul){var Xs=Os[Ul],d0={};Xs.edges.forEach(function(k0){var P0="".concat(k0.source,"-").concat(k0.target,"-").concat(k0.label);d0[P0]?d0[P0]++:d0[P0]=1});for(var M0=function(P0){var B0=Os[P0],G0={};B0.edges.forEach(function(xv){var qv="".concat(xv.source,"-").concat(xv.target,"-").concat(xv.label);G0[qv]?G0[qv]++:G0[qv]=1});var rv=!0;Object.keys(G0).length!==Object.keys(d0).length?rv=!1:Object.keys(d0).forEach(function(xv){G0[xv]!==d0[xv]&&(rv=!1)}),rv&&Os.splice(P0,1)},i0=jv-1;i0>Ul;i0--)M0(i0);jv=Os.length},Yv=0;Yv<=jv-1;Yv++)wp(Yv);return Os}}},Stack$1=function(){function ns(ts){ts===void 0&&(ts=10),this.linkedList=new LinkedList$2,this.maxStep=ts}return Object.defineProperty(ns.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),ns.prototype.isEmpty=function(){return!this.linkedList.head},ns.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},ns.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},ns.prototype.push=function(ts){this.linkedList.prepend(ts),this.length>this.maxStep&&this.linkedList.deleteTail()},ns.prototype.pop=function(){var ts=this.linkedList.deleteHead();return ts?ts.value:null},ns.prototype.toArray=function(){return this.linkedList.toArray().map(function(ts){return ts.value})},ns.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},ns}(),detectDirectedCycle$1=detectDirectedCycle$2;const index$5={getAdjMatrix:adjMatrix$2,breadthFirstSearch:breadthFirstSearch$1,connectedComponent:getConnectedComponents$1,getDegree:degree$3,getInDegree:getInDegree$1,getOutDegree:getOutDegree$1,detectCycle:detectDirectedCycle$2,detectDirectedCycle:detectDirectedCycle$1,detectAllCycles:detectAllCycles$1,detectAllDirectedCycle:detectAllDirectedCycle$1,detectAllUndirectedCycle:detectAllUndirectedCycle$1,depthFirstSearch:depthFirstSearch$1,dijkstra:dijkstra$3,findAllPath:findAllPath$1,findShortestPath:findShortestPath$1,floydWarshall:floydWarshall$6,labelPropagation:labelPropagation$2,louvain:louvain$2,iLouvain,kCore,kMeans,cosineSimilarity,nodesCosineSimilarity,minimumSpanningTree:minimumSpanningTree$1,pageRank:pageRank$2,getNeighbors:getNeighbors$1,Stack:Stack$1,GADDI:GADDI$1},AlgorithmSync=Object.freeze(Object.defineProperty({__proto__:null,GADDI:GADDI$1,Stack:Stack$1,breadthFirstSearch:breadthFirstSearch$1,connectedComponent:getConnectedComponents$1,cosineSimilarity,default:index$5,depthFirstSearch:depthFirstSearch$1,detectAllCycles:detectAllCycles$1,detectAllDirectedCycle:detectAllDirectedCycle$1,detectAllUndirectedCycle:detectAllUndirectedCycle$1,detectCycle:detectDirectedCycle$2,detectDirectedCycle:detectDirectedCycle$1,dijkstra:dijkstra$3,findAllPath:findAllPath$1,findShortestPath:findShortestPath$1,floydWarshall:floydWarshall$6,getAdjMatrix:adjMatrix$2,getDegree:degree$3,getInDegree:getInDegree$1,getNeighbors:getNeighbors$1,getOutDegree:getOutDegree$1,iLouvain,kCore,kMeans,labelPropagation:labelPropagation$2,louvain:louvain$2,minimumSpanningTree:minimumSpanningTree$1,nodesCosineSimilarity,pageRank:pageRank$2},Symbol.toStringTag,{value:"Module"}));var transform$h=transform$i,compare$1=function(ts){return function(rs,as){return rs[ts]-as[ts]}},isBetween$2=function(ts,rs,as){return ts>=rs&&ts<=as},getLineIntersect$2=function(ts,rs,as,os){var is=1e-4,us={x:as.x-ts.x,y:as.y-ts.y},ls={x:rs.x-ts.x,y:rs.y-ts.y},fs={x:os.x-as.x,y:os.y-as.y},hs=ls.x*fs.y-ls.y*fs.x,vs=hs*hs,gs=1/hs,ys=ls.x*ls.x+ls.y*ls.y,xs=fs.x*fs.x+fs.y*fs.y;if(vs>is*ys*xs){var ms=(us.x*fs.y-us.y*fs.x)*gs,Ss=(us.x*ls.y-us.y*ls.x)*gs;return!isBetween$2(ms,0,1)||!isBetween$2(Ss,0,1)?null:{x:ts.x+ms*ls.x,y:ts.y+ms*ls.y}}return null},getRectIntersectByPoint$1=function(ts,rs){var as=ts.x,os=ts.y,is=ts.width,us=ts.height,ls=as+is/2,fs=os+us/2,hs=[],vs={x:ls,y:fs};hs.push({x:as,y:os}),hs.push({x:as+is,y:os}),hs.push({x:as+is,y:os+us}),hs.push({x:as,y:os+us}),hs.push({x:as,y:os});for(var gs=null,ys=1;ys<hs.length&&(gs=getLineIntersect$2(hs[ys-1],hs[ys],vs,rs),!gs);ys++);return gs},getCircleIntersectByPoint$1=function(ts,rs){var as=ts.x,os=ts.y,is=ts.r,us=rs.x,ls=rs.y,fs=us-as,hs=ls-os;if(fs*fs+hs*hs<is*is)return null;var vs=Math.atan(hs/fs);return{x:as+Math.abs(is*Math.cos(vs))*Math.sign(fs),y:os+Math.abs(is*Math.sin(vs))*Math.sign(hs)}},getEllipseIntersectByPoint$1=function(ts,rs){var as=ts.rx,os=ts.ry,is=ts.x,us=ts.y,ls=rs.x-is,fs=rs.y-us,hs=Math.atan2(fs/os,ls/as);return hs<0&&(hs+=2*Math.PI),{x:is+as*Math.cos(hs),y:us+os*Math.sin(hs)}},applyMatrix$2=function(ts,rs,as){as===void 0&&(as=1);var os=[ts.x,ts.y,as];return(!rs||isNaN(rs[0]))&&(rs=[1,0,0,0,1,0,0,0,1]),transformMat3$1(os,os,rs),{x:os[0],y:os[1]}},invertMatrix$1=function(ts,rs,as){as===void 0&&(as=1),(!rs||isNaN(rs[0]))&&(rs=[1,0,0,0,1,0,0,0,1]);var os=invert$4([1,0,0,0,1,0,0,0,1],rs);os||(os=[1,0,0,0,1,0,0,0,1]);var is=[ts.x,ts.y,as];return transformMat3$1(is,is,os),{x:is[0],y:is[1]}},getCircleCenterByPoints$1=function(ts,rs,as){var os=ts.x-rs.x,is=ts.y-rs.y,us=ts.x-as.x,ls=ts.y-as.y,fs=(ts.x*ts.x-rs.x*rs.x-rs.y*rs.y+ts.y*ts.y)/2,hs=(ts.x*ts.x-as.x*as.x-as.y*as.y+ts.y*ts.y)/2,vs=is*us-os*ls;return{x:-(ls*fs-is*hs)/vs,y:-(os*hs-us*fs)/vs}},distance$5=function(ts,rs){var as=ts.x-rs.x,os=ts.y-rs.y;return Math.sqrt(as*as+os*os)},scaleMatrix$1=function(ts,rs){var as=[];return ts.forEach(function(os){var is=[];os.forEach(function(us){is.push(us*rs)}),as.push(is)}),as},floydWarshall$5=function(ts){for(var rs=[],as=ts.length,os=0;os<as;os+=1){rs[os]=[];for(var is=0;is<as;is+=1)os===is?rs[os][is]=0:ts[os][is]===0||!ts[os][is]?rs[os][is]=1/0:rs[os][is]=ts[os][is]}for(var us=0;us<as;us+=1)for(var os=0;os<as;os+=1)for(var is=0;is<as;is+=1)rs[os][is]>rs[os][us]+rs[us][is]&&(rs[os][is]=rs[os][us]+rs[us][is]);return rs},getAdjMatrix$1=function(ts,rs){var as=ts.nodes,os=ts.edges,is=[],us={};if(!as)throw new Error("invalid nodes data!");return as&&as.forEach(function(ls,fs){us[ls.id]=fs;var hs=[];is.push(hs)}),os&&os.forEach(function(ls){var fs=ls.source,hs=ls.target,vs=us[fs],gs=us[hs];is[vs][gs]=1,rs||(is[gs][vs]=1)}),is},translate$1=function(ts,rs){ts.translate(rs.x,rs.y)},move$1=function(ts,rs,as,os){os===void 0&&(os={duration:500});var is=ts.getMatrix();is||(is=[1,0,0,0,1,0,0,0,1]);var us=ts.getCanvasBBox(),ls=rs.x-us.minX,fs=rs.y-us.minY;if(as){var hs=ls*is[0],vs=fs*is[4],gs=0,ys=0,xs=0,ms=0;ts.animate(function(Ms){return xs=hs*Ms,ms=vs*Ms,is=transform$h(is,[["t",xs-gs,ms-ys]]),gs=xs,ys=ms,{matrix:is}},os)}else{var Ss=transform$h(is,[["t",ls,fs]]);ts.setMatrix(Ss)}},scale$1=function(ts,rs){var as=ts.getMatrix();as||(as=[1,0,0,0,1,0,0,0,1]);var os=rs;isArray$2(rs)||(os=[rs,rs]),isArray$2(rs)&&rs.length===1&&(os=[rs[0],rs[0]]),as=transform$h(as,[["s",os[0],os[1]]]),ts.setMatrix(as)},rotate$2=function(ts,rs){var as=ts.getMatrix();as||(as=[1,0,0,0,1,0,0,0,1]),as=transform$h(as,[["r",rs]]),ts.setMatrix(as)},getDegree$1=function(ts,rs,as){for(var os=[],is=0;is<ts;is++)os[is]=0;return as.forEach(function(us){us.source&&(os[rs[us.source]]+=1),us.target&&(os[rs[us.target]]+=1)}),os};function onSegment$3(ns,ts,rs){return(rs[0]-ns[0])*(ts[1]-ns[1])===(ts[0]-ns[0])*(rs[1]-ns[1])&&Math.min(ns[0],ts[0])<=rs[0]&&rs[0]<=Math.max(ns[0],ts[0])&&Math.min(ns[1],ts[1])<=rs[1]&&rs[1]<=Math.max(ns[1],ts[1])}var isPointInPolygon$2=function(ts,rs,as){var os=!1,is=ts.length,us=1e-6;function ls(gs){return Math.abs(gs)<us?0:gs<0?-1:1}if(is<=2)return!1;for(var fs=0;fs<is;fs++){var hs=ts[fs],vs=ts[(fs+1)%is];if(onSegment$3(hs,vs,[rs,as]))return!0;ls(hs[1]-as)>0!=ls(vs[1]-as)>0&&ls(rs-(as-hs[1])*(hs[0]-vs[0])/(hs[1]-vs[1])-hs[0])<0&&(os=!os)}return os},intersectBBox$2=function(ts,rs){return!(rs.minX>ts.maxX||rs.maxX<ts.minX||rs.minY>ts.maxY||rs.maxY<ts.minY)},lineIntersectPolygon$2=function(ts,rs){var as=!1;return each$1(ts,function(os){if(getLineIntersect$2(os.from,os.to,rs.from,rs.to))return as=!0,!1}),as},isPolygonsIntersect$3=function(ts,rs){var as=function(ys){var xs=ys.map(function(Ss){return Ss[0]}),ms=ys.map(function(Ss){return Ss[1]});return{minX:Math.min.apply(null,xs),maxX:Math.max.apply(null,xs),minY:Math.min.apply(null,ms),maxY:Math.max.apply(null,ms)}},os=function(ys){for(var xs=[],ms=ys.length,Ss=0;Ss<ms-1;Ss++){var Ms=ys[Ss],$s=ys[Ss+1];xs.push({from:{x:Ms[0],y:Ms[1]},to:{x:$s[0],y:$s[1]}})}if(xs.length>1){var bs=ys[0],Cs=ys[ms-1];xs.push({from:{x:Cs[0],y:Cs[1]},to:{x:bs[0],y:bs[1]}})}return xs};if(ts.length<2||rs.length<2)return!1;var is=as(ts),us=as(rs);if(!intersectBBox$2(is,us))return!1;var ls=!1;if(each$1(rs,function(gs){if(isPointInPolygon$2(ts,gs[0],gs[1]))return ls=!0,!1}),ls||(each$1(ts,function(gs){if(isPointInPolygon$2(rs,gs[0],gs[1]))return ls=!0,!1}),ls))return!0;var fs=os(ts),hs=os(rs),vs=!1;return each$1(hs,function(gs){if(lineIntersectPolygon$2(fs,gs))return vs=!0,!1}),vs},Line$3=function(){function ns(ts,rs,as,os){this.x1=ts,this.y1=rs,this.x2=as,this.y2=os}return ns.prototype.getBBox=function(){var ts=Math.min(this.x1,this.x2),rs=Math.min(this.y1,this.y2),as=Math.max(this.x1,this.x2),os=Math.max(this.y1,this.y2),is={x:ts,y:rs,minX:ts,minY:rs,maxX:as,maxY:os,width:as-ts,height:os-rs};return is},ns}(),getBBoxBoundLine$1=function(ts,rs){var as={top:[ts.minX,ts.minY,ts.maxX,ts.minY],left:[ts.minX,ts.minY,ts.minX,ts.maxY],bottom:[ts.minX,ts.maxY,ts.maxX,ts.maxY],right:[ts.maxX,ts.minY,ts.maxX,ts.maxY]};return as[rs]},fractionAlongLineA$1=function(ts,rs){var as=(rs.x2-rs.x1)*(ts.y1-rs.y1)-(rs.y2-rs.y1)*(ts.x1-rs.x1),os=(ts.x2-ts.x1)*(ts.y1-rs.y1)-(ts.y2-ts.y1)*(ts.x1-rs.x1),is=(rs.y2-rs.y1)*(ts.x2-ts.x1)-(rs.x2-rs.x1)*(ts.y2-ts.y1);if(is){var us=as/is,ls=os/is;if(us>=0&&us<=1&&ls>=0&&ls<=1)return us}return Number.POSITIVE_INFINITY},itemIntersectByLine$1=function(ts,rs){for(var as=["top","left","bottom","right"],os=ts.getBBox(),is=0,us=[],ls=0;ls<4;ls++){var fs=getBBoxBoundLine$1(os,as[ls]),hs=fs[0],vs=fs[1],gs=fs[2],ys=fs[3];us[ls]=getLineIntersect$2({x:rs.x1,y:rs.y1},{x:rs.x2,y:rs.y2},{x:hs,y:vs},{x:gs,y:ys}),us[ls]&&(is+=1)}return[us,is]},fractionToLine$1=function(ts,rs){for(var as=["top","left","bottom","right"],os=ts.getBBox(),is=Number.POSITIVE_INFINITY,us=0,ls=0;ls<4;ls++){var fs=getBBoxBoundLine$1(os,as[ls]),hs=fs[0],vs=fs[1],gs=fs[2],ys=fs[3],xs=fractionAlongLineA$1(rs,new Line$3(hs,vs,gs,ys));xs=Math.abs(xs-.5),xs>=0&&xs<=1&&(us+=1,is=xs<is?xs:is)}return us===0?-1:is},getPointsCenter$1=function(ts){var rs=0,as=0;if(ts.length>0){for(var os=0,is=ts;os<is.length;os++){var us=is[os];rs+=us.x,as+=us.y}rs/=ts.length,as/=ts.length}return{x:rs,y:as}},squareDist$1=function(ts,rs){return Math.pow(ts.x-rs.x,2)+Math.pow(ts.y-rs.y,2)},pointLineSquareDist$1=function(ts,rs){var as=rs.x1,os=rs.y1,is=rs.x2-as,us=rs.y2-os,ls=ts.x-as,fs=ts.y-os,hs=ls*is+fs*us,vs;hs<=0?vs=0:(ls=is-ls,fs=us-fs,hs=ls*is+fs*us,hs<=0?vs=0:vs=hs*hs/(is*is+us*us));var gs=ls*ls+fs*fs-vs;return gs<0&&(gs=0),gs},isPointsOverlap$1=function(ts,rs,as){return as===void 0&&(as=.001),Math.pow(ts.x-rs.x,2)+Math.pow(ts.y-rs.y,2)<Math.pow(as,2)},pointRectSquareDist$1=function(ts,rs){var as=ts.x<rs.x,os=ts.x>rs.x+rs.width,is=ts.y>rs.y+rs.height,us=ts.y<rs.y,ls=as||os||is||us;if(!ls)return 0;if(is&&!as&&!os)return Math.pow(rs.y+rs.height-ts.y,2);if(us&&!as&&!os)return Math.pow(ts.y-rs.y,2);if(as&&!is&&!us)return Math.pow(rs.x-ts.x,2);if(os&&!is&&!us)return Math.pow(rs.x+rs.width-ts.x,2);var fs=Math.min(Math.abs(rs.x-ts.x),Math.abs(rs.x+rs.width-ts.x)),hs=Math.min(Math.abs(rs.y-ts.y),Math.abs(rs.y+rs.height-ts.y));return fs*fs+hs*hs},pointLineDistance$1=function(ts,rs){var as=ts[0],os=ts[1],is=ts[2],us=ts[3],ls=rs.x,fs=rs.y,hs=[is-as,us-os];if(exactEquals(hs,[0,0]))return NaN;var vs=[-hs[1],hs[0]];normalize$1(vs,vs);var gs=[ls-as,fs-os];return Math.abs(dot(gs,vs))},lerp=function(ts,rs,as){return ts+(rs-ts)*as},lerpArray=function(ts,rs,as){for(var os=Math.min(ts.length,rs.length),is=new Array(os),us=0;us<os;us++)is[us]=lerp(ts[us],rs[us],as);return is};const MathUtil$1=Object.freeze(Object.defineProperty({__proto__:null,Line:Line$3,applyMatrix:applyMatrix$2,compare:compare$1,distance:distance$5,floydWarshall:floydWarshall$5,fractionToLine:fractionToLine$1,getAdjMatrix:getAdjMatrix$1,getBBoxBoundLine:getBBoxBoundLine$1,getCircleCenterByPoints:getCircleCenterByPoints$1,getCircleIntersectByPoint:getCircleIntersectByPoint$1,getDegree:getDegree$1,getEllipseIntersectByPoint:getEllipseIntersectByPoint$1,getLineIntersect:getLineIntersect$2,getPointsCenter:getPointsCenter$1,getRectIntersectByPoint:getRectIntersectByPoint$1,intersectBBox:intersectBBox$2,invertMatrix:invertMatrix$1,isPointInPolygon:isPointInPolygon$2,isPointsOverlap:isPointsOverlap$1,isPolygonsIntersect:isPolygonsIntersect$3,itemIntersectByLine:itemIntersectByLine$1,lerp,lerpArray,move:move$1,pointLineDistance:pointLineDistance$1,pointLineSquareDist:pointLineSquareDist$1,pointRectSquareDist:pointRectSquareDist$1,rotate:rotate$2,scale:scale$1,scaleMatrix:scaleMatrix$1,squareDist:squareDist$1,translate:translate$1},Symbol.toStringTag,{value:"Module"}));var subjectColor$2="rgb(95, 149, 255)",backColor$2="rgb(255, 255, 255)",textColor$2="rgb(0, 0, 0)",activeFill$1="rgb(247, 250, 255)",nodeMainFill$1="rgb(239, 244, 255)",comboFill$1="rgb(253, 253, 253)",disabledFill$1="rgb(250, 250, 250)",edgeMainStroke$1="rgb(224, 224, 224)",edgeInactiveStroke$1="rgb(234, 234, 234)",edgeDisablesStroke$1="rgb(245, 245, 245)",inactiveStroke$1="rgb(191, 213, 255)",highlightStroke$1="#4572d9",highlightFill$1="rgb(223, 234, 255)",colorSet$2={mainStroke:subjectColor$2,mainFill:nodeMainFill$1,activeStroke:subjectColor$2,activeFill:activeFill$1,inactiveStroke:inactiveStroke$1,inactiveFill:activeFill$1,selectedStroke:subjectColor$2,selectedFill:backColor$2,highlightStroke:highlightStroke$1,highlightFill:highlightFill$1,disableStroke:edgeMainStroke$1,disableFill:disabledFill$1,edgeMainStroke:edgeMainStroke$1,edgeActiveStroke:subjectColor$2,edgeInactiveStroke:edgeInactiveStroke$1,edgeSelectedStroke:subjectColor$2,edgeHighlightStroke:subjectColor$2,edgeDisableStroke:edgeDisablesStroke$1,comboMainStroke:edgeMainStroke$1,comboMainFill:comboFill$1,comboActiveStroke:subjectColor$2,comboActiveFill:activeFill$1,comboInactiveStroke:edgeMainStroke$1,comboInactiveFill:comboFill$1,comboSelectedStroke:subjectColor$2,comboSelectedFill:comboFill$1,comboHighlightStroke:highlightStroke$1,comboHighlightFill:comboFill$1,comboDisableStroke:edgeInactiveStroke$1,comboDisableFill:disabledFill$1};const Global$2={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:colorSet$2.mainStroke,fill:nodeMainFill$1},size:20,color:colorSet$2.mainStroke,linkPoints:{size:8,lineWidth:1,fill:colorSet$2.activeFill,stroke:colorSet$2.activeStroke}},nodeStateStyles:{active:{fill:colorSet$2.activeFill,stroke:colorSet$2.activeStroke,lineWidth:2,shadowColor:colorSet$2.mainStroke,shadowBlur:10},selected:{fill:colorSet$2.selectedFill,stroke:colorSet$2.selectedStroke,lineWidth:4,shadowColor:colorSet$2.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:colorSet$2.highlightFill,stroke:colorSet$2.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:colorSet$2.inactiveFill,stroke:colorSet$2.inactiveStroke,lineWidth:1},disable:{fill:colorSet$2.disableFill,stroke:colorSet$2.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:textColor$2,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:colorSet$2.edgeMainStroke,lineAppendWidth:2},color:colorSet$2.edgeMainStroke},edgeStateStyles:{active:{stroke:colorSet$2.edgeActiveStroke,lineWidth:1},selected:{stroke:colorSet$2.edgeSelectedStroke,lineWidth:2,shadowColor:colorSet$2.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:colorSet$2.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:colorSet$2.edgeInactiveStroke,lineWidth:1},disable:{stroke:colorSet$2.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:textColor$2,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:colorSet$2.comboMainFill,lineWidth:1,stroke:colorSet$2.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:colorSet$2.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:colorSet$2.comboActiveStroke,lineWidth:1,fill:colorSet$2.comboActiveFill},selected:{stroke:colorSet$2.comboSelectedStroke,lineWidth:2,fill:colorSet$2.comboSelectedFill,shadowColor:colorSet$2.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:colorSet$2.comboHighlightStroke,lineWidth:2,fill:colorSet$2.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:colorSet$2.comboInactiveStroke,fill:colorSet$2.comboInactiveFill,lineWidth:1},disable:{stroke:colorSet$2.comboDisableStroke,fill:colorSet$2.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window<"u"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},letterAspectRatio$1={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875};var PI$2=Math.PI,sin$2=Math.sin,cos$2=Math.cos,SELF_LINK_SIN$1=sin$2(PI$2/8),SELF_LINK_COS$1=cos$2(PI$2/8),getBBox$4=function(ts,rs){var as=ts.getBBox(),os={x:as.minX,y:as.minY},is={x:as.maxX,y:as.maxY};if(rs){var us=rs.getMatrix();us||(us=[1,0,0,0,1,0,0,0,1]),os=applyMatrix$2(os,us),is=applyMatrix$2(is,us)}var ls=os.x,fs=os.y,hs=is.x,vs=is.y;return{x:ls,y:fs,minX:ls,minY:fs,maxX:hs,maxY:vs,width:hs-ls,height:vs-fs}},getLoopCfgs$1=function(ts){var rs=ts.sourceNode||ts.targetNode,as=rs.get("group"),os=as.getMatrix();os||(os=[1,0,0,0,1,0,0,0,1]);var is=rs.getKeyShape(),us=is.getBBox(),ls=ts.loopCfg||{},fs=ls.dist||Math.max(us.width,us.height)*2,hs=ls.position||Global$2.defaultLoopPosition,vs=[(us.minX+us.maxX)/2+os[6],(us.minY+us.maxY)/2+os[7]],gs=[ts.startPoint.x,ts.startPoint.y],ys=[ts.endPoint.x,ts.endPoint.y],xs=us.height/2,ms=us.width/2,Ss=xs,Ms=xs,$s=Ss*SELF_LINK_SIN$1,bs=Ss*SELF_LINK_COS$1,Cs=Ms*SELF_LINK_SIN$1,As=Ms*SELF_LINK_COS$1,Is=is.get("type"),ks=Math.min(xs/2,ms/2),Ps=Math.min(xs,ms),Ds=ls!=null&&ls.pointPadding?Math.min(Ps,ls==null?void 0:ls.pointPadding):ks;if(gs[0]===ys[0]&&gs[1]===ys[1]){switch(hs){case"top":Is==="circle"?(gs=[vs[0]-$s,vs[1]-bs],ys=[vs[0]+Cs,vs[1]-As]):(gs=[vs[0]-Ds,vs[1]-xs],ys=[vs[0]+Ds,vs[1]-xs]);break;case"top-right":Ss=xs,Ms=ms,Is==="circle"?($s=Ss*SELF_LINK_SIN$1,bs=Ss*SELF_LINK_COS$1,Cs=Ms*SELF_LINK_SIN$1,As=Ms*SELF_LINK_COS$1,gs=[vs[0]+$s,vs[1]-bs],ys=[vs[0]+As,vs[1]-Cs]):(gs=[vs[0]+ms-Ds,vs[1]-xs],ys=[vs[0]+ms,vs[1]-xs+Ds]);break;case"right":Ss=ms,Ms=ms,Is==="circle"?($s=Ss*SELF_LINK_SIN$1,bs=Ss*SELF_LINK_COS$1,Cs=Ms*SELF_LINK_SIN$1,As=Ms*SELF_LINK_COS$1,gs=[vs[0]+bs,vs[1]-$s],ys=[vs[0]+As,vs[1]+Cs]):(gs=[vs[0]+ms,vs[1]-Ds],ys=[vs[0]+ms,vs[1]+Ds]);break;case"bottom-right":Ss=ms,Ms=xs,Is==="circle"?($s=Ss*SELF_LINK_SIN$1,bs=Ss*SELF_LINK_COS$1,Cs=Ms*SELF_LINK_SIN$1,As=Ms*SELF_LINK_COS$1,gs=[vs[0]+bs,vs[1]+$s],ys=[vs[0]+Cs,vs[1]+As]):(gs=[vs[0]+ms,vs[1]+xs-Ds],ys=[vs[0]+ms-Ds,vs[1]+xs]);break;case"bottom":Ss=xs,Ms=xs,Is==="circle"?($s=Ss*SELF_LINK_SIN$1,bs=Ss*SELF_LINK_COS$1,Cs=Ms*SELF_LINK_SIN$1,As=Ms*SELF_LINK_COS$1,gs=[vs[0]+$s,vs[1]+bs],ys=[vs[0]-Cs,vs[1]+As]):(gs=[vs[0]-Ds,vs[1]+xs],ys=[vs[0]+Ds,vs[1]+xs]);break;case"bottom-left":Ss=xs,Ms=ms,Is==="circle"?($s=Ss*SELF_LINK_SIN$1,bs=Ss*SELF_LINK_COS$1,Cs=Ms*SELF_LINK_SIN$1,As=Ms*SELF_LINK_COS$1,gs=[vs[0]-$s,vs[1]+bs],ys=[vs[0]-As,vs[1]+Cs]):(gs=[vs[0]-ms,vs[1]+xs-Ds],ys=[vs[0]-ms+Ds,vs[1]+xs]);break;case"left":Ss=ms,Ms=ms,Is==="circle"?($s=Ss*SELF_LINK_SIN$1,bs=Ss*SELF_LINK_COS$1,Cs=Ms*SELF_LINK_SIN$1,As=Ms*SELF_LINK_COS$1,gs=[vs[0]-bs,vs[1]+$s],ys=[vs[0]-As,vs[1]-Cs]):(gs=[vs[0]-ms,vs[1]-Ds],ys=[vs[0]-ms,vs[1]+Ds]);break;case"top-left":Ss=ms,Ms=xs,Is==="circle"?($s=Ss*SELF_LINK_SIN$1,bs=Ss*SELF_LINK_COS$1,Cs=Ms*SELF_LINK_SIN$1,As=Ms*SELF_LINK_COS$1,gs=[vs[0]-bs,vs[1]-$s],ys=[vs[0]-Cs,vs[1]-As]):(gs=[vs[0]-ms+Ds,vs[1]-xs],ys=[vs[0]-ms,vs[1]-xs+Ds]);break;default:Ss=ms,Ms=ms,$s=Ss*SELF_LINK_SIN$1,bs=Ss*SELF_LINK_COS$1,Cs=Ms*SELF_LINK_SIN$1,As=Ms*SELF_LINK_COS$1,gs=[vs[0]-$s,vs[1]-bs],ys=[vs[0]+Cs,vs[1]-As]}if(ls.clockwise===!1){var Fs=[gs[0],gs[1]];gs=[ys[0],ys[1]],ys=[Fs[0],Fs[1]]}}var Rs=[gs[0]-vs[0],gs[1]-vs[1]],js=(Ss+fs)/Ss,zs=(Ms+fs)/Ms;ls.clockwise===!1&&(js=(Ms+fs)/Ms,zs=(Ss+fs)/Ss);var Us=scale$2([0,0],Rs,js),Ys=[vs[0]+Us[0],vs[1]+Us[1]],Ks=[ys[0]-vs[0],ys[1]-vs[1]],qs=scale$2([0,0],Ks,zs),_l=[vs[0]+qs[0],vs[1]+qs[1]];return ts.startPoint={x:gs[0],y:gs[1]},ts.endPoint={x:ys[0],y:ys[1]},ts.controlPoints=[{x:Ys[0],y:Ys[1]},{x:_l[0],y:_l[1]}],ts},getLabelPosition$1=function(ts,rs,as,os,is){var us=1e-4,ls=[],fs=ts==null?void 0:ts.getPoint(rs);if(!fs)return{x:0,y:0,angle:0};if(rs<us)ls=ts.getStartTangent().reverse();else if(rs>1-us)ls=ts.getEndTangent();else{var hs=ts==null?void 0:ts.getPoint(rs+us);ls.push([fs.x,fs.y]),ls.push([hs.x,hs.y])}var vs=Math.atan2(ls[1][1]-ls[0][1],ls[1][0]-ls[0][0]);if(vs<0&&(vs+=PI$2*2),as&&(fs.x+=cos$2(vs)*as,fs.y+=sin$2(vs)*as),os){var gs=vs-PI$2/2;vs>1/2*PI$2&&vs<3*1/2*PI$2&&(gs-=PI$2),fs.x+=cos$2(gs)*os,fs.y+=sin$2(gs)*os}var ys={x:fs.x,y:fs.y,angle:vs};return is?(vs>.5*PI$2&&vs<1.5*PI$2&&(vs-=PI$2),__assign$h({rotate:vs},ys)):ys},traverse$1=function ns(ts,rs,as,os){if(os(ts,rs,as)===!1)return!1;if(ts&&ts.children){for(var is=ts.children.length-1;is>=0;is--)if(!ns(ts.children[is],ts,is,os))return!1}return!0},traverseUp$1=function ns(ts,rs,as,os){if(ts&&ts.children){for(var is=ts.children.length-1;is>=0;is--)if(!ns(ts.children[is],ts,is,os))return}return os(ts,rs,as)!==!1},traverseTree$3=function(ts,rs){typeof rs=="function"&&traverse$1(ts,null,-1,rs)},traverseTreeUp$1=function(ts,rs){typeof rs=="function"&&traverseUp$1(ts,null,-1,rs)},getLetterWidth$1=function(ts,rs){return rs*(letterAspectRatio$1[ts]||1)},getTextSize$2=function(ts,rs){var as=0,os=new RegExp("[一-龥]+");return ts.split("").forEach(function(is){os.test(is)?as+=rs:as+=getLetterWidth$1(is,rs)}),[as,rs]},truncateLabelByLength=function(ts,rs){return typeof rs!="number"||rs<=0||rs>=ts.length?ts:ts.substring(0,rs)+"..."},plainCombosToTrees$1=function(ts,rs){var as=[],os={},is={};ts.forEach(function(fs){is[fs.id]=fs}),ts.forEach(function(fs,hs){var vs=clone$b(fs);vs.itemType="combo",vs.children=void 0,vs.parentId===vs.id?(console.warn("The parentId for combo ".concat(vs.id," can not be the same as the combo's id")),delete vs.parentId):vs.parentId&&!is[vs.parentId]&&(console.warn("The parent combo for combo ".concat(vs.id," does not exist!")),delete vs.parentId);var gs=os[vs.id];if(gs){if(vs.children=gs.children,os[vs.id]=vs,gs=vs,!gs.parentId){as.push(gs);return}var ys=os[gs.parentId];if(ys)ys.children?ys.children.push(vs):ys.children=[vs];else{var xs={id:gs.parentId,children:[gs]};os[gs.parentId]=xs,os[vs.id]=vs}return}if(isString$2(fs.parentId)){var ms=os[fs.parentId];if(ms)ms.children?ms.children.push(vs):ms.children=[vs],os[vs.id]=vs;else{var Ss={id:fs.parentId,children:[vs]};os[Ss.id]=Ss,os[vs.id]=vs}}else as.push(vs),os[vs.id]=vs});var us={};(rs||[]).forEach(function(fs){us[fs.id]=fs;var hs=os[fs.comboId];if(hs){var vs={id:fs.id,comboId:fs.comboId};hs.children?hs.children.push(vs):hs.children=[vs],vs.itemType="node",os[fs.id]=vs}});var ls=0;return as.forEach(function(fs){fs.depth=ls+10,traverseTree$3(fs,function(hs){var vs,gs=os[hs.id].itemType;gs==="node"?vs=os[hs.comboId]:vs=os[hs.parentId],vs&&gs==="node"?hs.depth=ls+1:hs.depth=ls+10,ls<hs.depth&&(ls=hs.depth);var ys=us[hs.id];return ys&&(ys.depth=hs.depth),!0})}),as},reconstructTree$1=function(ts,rs,as){var os,is=ts,us,ls={root:{children:ts}},fs=!1,hs="root";(ts||[]).forEach(function(ms){if(!fs){if(ms.id===rs){us=ms,ms.itemType==="combo"?us.parentId=as:us.comboId=as,fs=!0;return}traverseTree$3(ms,function(Ss){var Ms;return ls[Ss.id]={children:(Ss==null?void 0:Ss.children)||[]},is=(Ms=ls[Ss.parentId||Ss.comboId||"root"])===null||Ms===void 0?void 0:Ms.children,Ss&&(Ss.removed||rs===Ss.id)&&is?(hs=Ss.parentId||Ss.comboId||"root",us=Ss,Ss.itemType==="combo"?us.parentId=as:us.comboId=as,fs=!0,!1):!0})}}),is=(os=ls[hs])===null||os===void 0?void 0:os.children;var vs=is?is.indexOf(us):-1;if(vs>-1&&is.splice(vs,1),fs||(us={id:rs,itemType:"node",comboId:as},ls[rs]={children:void 0}),rs){var gs=!1;if(as){var ys=0;(ts||[]).forEach(function(ms){gs||traverseTree$3(ms,function(Ss){return as===Ss.id?(gs=!0,Ss.children?Ss.children.push(us):Ss.children=[us],ys=Ss.depth,us.itemType==="node"?us.depth=ys+2:us.depth=ys+1,!1):!0})})}else(!as||!gs)&&us.itemType!=="node"&&ts.push(us);var xs=us.depth;traverseTree$3(us,function(ms){return ms.itemType==="node"?xs+=2:xs+=1,ms.depth=xs,!0})}return ts},getComboBBox$1=function(ts,rs,as){var os={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!ts||ts.length===0){var is=as==null?void 0:as.getModel(),us=is||{},ls=us.x,fs=us.y,hs=us.fixSize,vs=us.collapsed,gs=us.fixCollapseSize,ys=vs?gs:hs,xs=isArray$2(ys)?ys:[ys,ys],ms=xs[0],Ss=xs[1],Ms=[ms/2,Ss/2];return{minX:ls-Ms[0],minY:fs-Ms[1],maxX:ls+Ms[0],maxY:fs+Ms[1],x:ls,y:fs,width:ms,height:Ss}}return ts.forEach(function($s){var bs=rs.findById($s.id);if(!(!bs||!bs.isVisible())){bs.set("bboxCanvasCache",void 0);var Cs=bs.getCanvasBBox();Cs.x&&os.minX>Cs.minX&&(os.minX=Cs.minX),Cs.y&&os.minY>Cs.minY&&(os.minY=Cs.minY),Cs.x&&os.maxX<Cs.maxX&&(os.maxX=Cs.maxX),Cs.y&&os.maxY<Cs.maxY&&(os.maxY=Cs.maxY)}}),os.x=(os.minX+os.maxX)/2,os.y=(os.minY+os.maxY)/2,os.width=os.maxX-os.minX,os.height=os.maxY-os.minY,os.centerX=(os.minX+os.maxX)/2,os.centerY=(os.minY+os.maxY)/2,(as==null?void 0:as.getKeyShape().get("type"))==="circle"&&(os.width=Math.hypot(os.height,os.width),os.height=os.width),Object.keys(os).forEach(function($s){(os[$s]===1/0||os[$s]===-1/0)&&(os[$s]=void 0)}),os},shouldRefreshEdge$1=function(ts){var rs=isNumber$3(ts.x)||isNumber$3(ts.y)||ts.type||ts.anchorPoints||ts.size;return ts.style&&(rs=rs||isNumber$3(ts.style.r)||isNumber$3(ts.style.width)||isNumber$3(ts.style.height)||isNumber$3(ts.style.rx)||isNumber$3(ts.style.ry)),rs},cloneBesidesImg=function(ts){var rs={};return Object.keys(ts).forEach(function(as){var os=ts[as];if(!(as==="img"&&!isString$2(os)))if(isObject$1(os)&&!isArray$2(os)){var is={};Object.keys(os).forEach(function(us){var ls=os[us];us==="img"&&!isString$2(ls)||(is[us]=clone$b(ls))}),rs[as]=is}else rs[as]=clone$b(os)}),rs},getAnimateCfgWithCallback=function(ts){var rs=ts.animateCfg,as=ts.callback,os;if(!rs)os={duration:500,callback:as};else if(os=clone$b(rs),rs.callback){var is=rs.callback;os.callback=function(){as(),is()}}else os.callback=as;return os};const GraphicUtil$1=Object.freeze(Object.defineProperty({__proto__:null,cloneBesidesImg,getAnimateCfgWithCallback,getBBox:getBBox$4,getComboBBox:getComboBBox$1,getLabelPosition:getLabelPosition$1,getLetterWidth:getLetterWidth$1,getLoopCfgs:getLoopCfgs$1,getTextSize:getTextSize$2,plainCombosToTrees:plainCombosToTrees$1,reconstructTree:reconstructTree$1,shouldRefreshEdge:shouldRefreshEdge$1,traverseTree:traverseTree$3,traverseTreeUp:traverseTreeUp$1,truncateLabelByLength},Symbol.toStringTag,{value:"Module"}));var dataValidation=function(ts){if(!ts)return console.error("G6 Error Tips: the data must be defined"),!1;var rs=ts.nodes,as=ts.edges,os=ts.combos,is=os===void 0?[]:os;if(!rs&&!as){var us=!0;return traverseTree$3(ts,function(ys){return isString$2(ys.id)?!0:(us=!1,!1)}),us}var ls=(rs||[]).find(function(ys){return!isString$2(ys.id)});if(ls)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(ls.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var fs=(rs||[]).map(function(ys){return ys.id}),hs=is==null?void 0:is.map(function(ys){return ys.id}),vs=__spreadArray$4(__spreadArray$4([],fs,!0),hs,!0),gs=(as||[]).find(function(ys){return!vs.includes(ys.source)||!vs.includes(ys.target)});return gs?(console.warn("G6 Warning Tips: The source %c".concat(gs.source,"%c or the target %c").concat(gs.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},singleDataValidation=function(ts,rs){if(ts==="node"||ts==="combo"){if(rs.id&&!isString$2(rs.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(rs.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(ts==="edge"&&(!rs.source||!rs.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},ModeController$1=function(){function ns(ts){this.graph=ts,this.destroyed=!1,this.modes=ts.get("modes")||{default:[]},this.formatModes(),this.mode=ts.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return ns.prototype.formatModes=function(){var ts=this.modes;each$1(ts,function(rs){each$1(rs,function(as,os){isString$2(as)&&(rs[os]={type:as})})})},ns.prototype.setBehaviors=function(ts){var rs=this.graph,as=this.modes[ts],os=[],is;each$1(as||[],function(us){var ls=Behavior$1.getBehavior(us.type||us);ls&&(is=new ls(us),is&&(is.bind(rs),os.push(is)))}),this.currentBehaves=os},ns.mergeBehaviors=function(ts,rs){return each$1(rs,function(as){ts.indexOf(as)<0&&(isString$2(as)&&(as={type:as}),ts.push(as))}),ts},ns.filterBehaviors=function(ts,rs){var as=[];return ts.forEach(function(os){var is="";isString$2(os)?is=os:is=os.type,rs.indexOf(is)<0&&as.push(os)}),as},ns.prototype.setMode=function(ts){var rs=this,as=rs.modes,os=rs.graph,is=ts,us=as[is];us&&(os.emit("beforemodechange",{mode:ts}),each$1(this.currentBehaves,function(ls){ls.delegate&&ls.delegate.remove(),ls.unbind(os)}),this.setBehaviors(is),os.emit("aftermodechange",{mode:ts}),this.mode=ts)},ns.prototype.getMode=function(){return this.mode},ns.prototype.manipulateBehaviors=function(ts,rs,as){var os=this,is;if(isArray$2(ts)?is=ts:is=[ts],isArray$2(rs))return each$1(rs,function(ls){os.modes[ls]?as?os.modes[ls]=ns.mergeBehaviors(os.modes[ls]||[],is):os.modes[ls]=ns.filterBehaviors(os.modes[ls]||[],is):as&&(os.modes[ls]=is)}),this;var us=rs;return rs||(us=this.mode),this.modes[us]||as&&(this.modes[us]=is),as?this.modes[us]=ns.mergeBehaviors(this.modes[us]||[],is):this.modes[us]=ns.filterBehaviors(this.modes[us]||[],is),this.formatModes(),this.setMode(this.mode),this},ns.prototype.updateBehavior=function(ts,rs,as){isString$2(ts)&&(ts={type:ts});var os=[];if(!as||as===this.mode||as==="default"){if(os=this.currentBehaves,!os||!os.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var is=os.length,us=0;us<is;us++){var ls=os[us];if(ls.type===ts.type)return ls.updateCfg(rs),this;us===is-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(os=this.modes[as],!os||!os.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var fs=os.length,us=0;us<fs;us++){var ls=os[us];if(ls.type===ts.type||ls===ts.type)return ls===ts.type&&(ls={type:ls}),Object.assign(ls,rs),os[us]=ls,this;us===fs-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},ns.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},ns}(),SPACES$1=`	
\v\f\r   ᠎             　\u2028\u2029`,PATH_COMMAND$1=new RegExp("([a-z])["+SPACES$1+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+SPACES$1+"]*,?["+SPACES$1+"]*)+)","ig"),PATH_VALUES$1=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+SPACES$1+"]*,?["+SPACES$1+"]*","ig"),parsePathString$2=function(ns){if(!ns)return null;if(isArray$2(ns))return ns;var ts={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},rs=[];return String(ns).replace(PATH_COMMAND$1,function(as,os,is){var us=[],ls=os.toLowerCase();if(is.replace(PATH_VALUES$1,function(fs,hs){hs&&us.push(+hs)}),ls==="m"&&us.length>2&&(rs.push([os].concat(us.splice(0,2))),ls="l",os=os==="m"?"l":"L"),ls==="o"&&us.length===1&&rs.push([os,us[0]]),ls==="r")rs.push([os].concat(us));else for(;us.length>=ts[ls]&&(rs.push([os].concat(us.splice(0,ts[ls]))),!!ts[ls]););return ns}),rs},catmullRomToBezier=function(ns,ts){for(var rs=[],as=0,os=ns.length;os-2*!ts>as;as+=2){var is=[{x:+ns[as-2],y:+ns[as-1]},{x:+ns[as],y:+ns[as+1]},{x:+ns[as+2],y:+ns[as+3]},{x:+ns[as+4],y:+ns[as+5]}];ts?as?os-4===as?is[3]={x:+ns[0],y:+ns[1]}:os-2===as&&(is[2]={x:+ns[0],y:+ns[1]},is[3]={x:+ns[2],y:+ns[3]}):is[0]={x:+ns[os-2],y:+ns[os-1]}:os-4===as?is[3]=is[2]:as||(is[0]={x:+ns[as],y:+ns[as+1]}),rs.push(["C",(-is[0].x+6*is[1].x+is[2].x)/6,(-is[0].y+6*is[1].y+is[2].y)/6,(is[1].x+6*is[2].x-is[3].x)/6,(is[1].y+6*is[2].y-is[3].y)/6,is[2].x,is[2].y])}return rs},ellipsePath=function(ns,ts,rs,as,os){var is=[];if(os===null&&as===null&&(as=rs),ns=+ns,ts=+ts,rs=+rs,as=+as,os!==null){var us=Math.PI/180,ls=ns+rs*Math.cos(-as*us),fs=ns+rs*Math.cos(-os*us),hs=ts+rs*Math.sin(-as*us),vs=ts+rs*Math.sin(-os*us);is=[["M",ls,hs],["A",rs,rs,0,+(os-as>180),0,fs,vs]]}else is=[["M",ns,ts],["m",0,-as],["a",rs,as,0,1,1,0,2*as],["a",rs,as,0,1,1,0,-2*as],["z"]];return is},pathToAbsolute$1=function(ns){if(ns=parsePathString$2(ns),!ns||!ns.length)return[["M",0,0]];var ts=[],rs=0,as=0,os=0,is=0,us=0,ls,fs;ns[0][0]==="M"&&(rs=+ns[0][1],as=+ns[0][2],os=rs,is=as,us++,ts[0]=["M",rs,as]);for(var hs=ns.length===3&&ns[0][0]==="M"&&ns[1][0].toUpperCase()==="R"&&ns[2][0].toUpperCase()==="Z",vs=void 0,gs=void 0,ys=us,xs=ns.length;ys<xs;ys++){if(ts.push(vs=[]),gs=ns[ys],ls=gs[0],ls!==ls.toUpperCase())switch(vs[0]=ls.toUpperCase(),vs[0]){case"A":vs[1]=gs[1],vs[2]=gs[2],vs[3]=gs[3],vs[4]=gs[4],vs[5]=gs[5],vs[6]=+gs[6]+rs,vs[7]=+gs[7]+as;break;case"V":vs[1]=+gs[1]+as;break;case"H":vs[1]=+gs[1]+rs;break;case"R":fs=[rs,as].concat(gs.slice(1));for(var ms=2,Ss=fs.length;ms<Ss;ms++)fs[ms]=+fs[ms]+rs,fs[++ms]=+fs[ms]+as;ts.pop(),ts=ts.concat(catmullRomToBezier(fs,hs));break;case"O":ts.pop(),fs=ellipsePath(rs,as,gs[1],gs[2]),fs.push(fs[0]),ts=ts.concat(fs);break;case"U":ts.pop(),ts=ts.concat(ellipsePath(rs,as,gs[1],gs[2],gs[3])),vs=["U"].concat(ts[ts.length-1].slice(-2));break;case"M":os=+gs[1]+rs,is=+gs[2]+as;break;default:for(var ms=1,Ss=gs.length;ms<Ss;ms++)vs[ms]=+gs[ms]+(ms%2?rs:as)}else if(ls==="R")fs=[rs,as].concat(gs.slice(1)),ts.pop(),ts=ts.concat(catmullRomToBezier(fs,hs)),vs=["R"].concat(gs.slice(-2));else if(ls==="O")ts.pop(),fs=ellipsePath(rs,as,gs[1],gs[2]),fs.push(fs[0]),ts=ts.concat(fs);else if(ls==="U")ts.pop(),ts=ts.concat(ellipsePath(rs,as,gs[1],gs[2],gs[3])),vs=["U"].concat(ts[ts.length-1].slice(-2));else for(var Ms=0,$s=gs.length;Ms<$s;Ms++)vs[Ms]=gs[Ms];if(ls=ls.toUpperCase(),ls!=="O")switch(vs[0]){case"Z":rs=+os,as=+is;break;case"H":rs=vs[1];break;case"V":as=vs[1];break;case"M":os=vs[vs.length-2],is=vs[vs.length-1];break;default:rs=vs[vs.length-2],as=vs[vs.length-1]}}return ts},l2c=function(ns,ts,rs,as){return[ns,ts,rs,as,rs,as]},q2c=function(ns,ts,rs,as,os,is){var us=.3333333333333333,ls=2/3;return[us*ns+ls*rs,us*ts+ls*as,us*os+ls*rs,us*is+ls*as,os,is]},a2c=function(ns,ts,rs,as,os,is,us,ls,fs,hs){rs===as&&(rs+=1);var vs=Math.PI*120/180,gs=Math.PI/180*(+os||0),ys=[],xs,ms,Ss,Ms,$s,bs=function(g0,R0,V0){var U0=g0*Math.cos(V0)-R0*Math.sin(V0),tv=g0*Math.sin(V0)+R0*Math.cos(V0);return{x:U0,y:tv}};if(hs)ms=hs[0],Ss=hs[1],Ms=hs[2],$s=hs[3];else{xs=bs(ns,ts,-gs),ns=xs.x,ts=xs.y,xs=bs(ls,fs,-gs),ls=xs.x,fs=xs.y,ns===ls&&ts===fs&&(ls+=1,fs+=1);var Cs=(ns-ls)/2,As=(ts-fs)/2,Is=Cs*Cs/(rs*rs)+As*As/(as*as);Is>1&&(Is=Math.sqrt(Is),rs=Is*rs,as=Is*as);var ks=rs*rs,Ps=as*as,Ds=(is===us?-1:1)*Math.sqrt(Math.abs((ks*Ps-ks*As*As-Ps*Cs*Cs)/(ks*As*As+Ps*Cs*Cs)));Ms=Ds*rs*As/as+(ns+ls)/2,$s=Ds*-as*Cs/rs+(ts+fs)/2,ms=Math.asin(((ts-$s)/as).toFixed(9)),Ss=Math.asin(((fs-$s)/as).toFixed(9)),ms=ns<Ms?Math.PI-ms:ms,Ss=ls<Ms?Math.PI-Ss:Ss,ms<0&&(ms=Math.PI*2+ms),Ss<0&&(Ss=Math.PI*2+Ss),us&&ms>Ss&&(ms=ms-Math.PI*2),!us&&Ss>ms&&(Ss=Ss-Math.PI*2)}var Fs=Ss-ms;if(Math.abs(Fs)>vs){var Rs=Ss,js=ls,zs=fs;Ss=ms+vs*(us&&Ss>ms?1:-1),ls=Ms+rs*Math.cos(Ss),fs=$s+as*Math.sin(Ss),ys=a2c(ls,fs,rs,as,os,0,us,js,zs,[Ss,Rs,Ms,$s])}Fs=Ss-ms;var Us=Math.cos(ms),Ys=Math.sin(ms),Ks=Math.cos(Ss),qs=Math.sin(Ss),_l=Math.tan(Fs/4),Js=4/3*rs*_l,Vs=4/3*as*_l,Zs=[ns,ts],Sl=[ns+Js*Ys,ts-Vs*Us],Il=[ls+Js*qs,fs-Vs*Ks],Nl=[ls,fs];if(Sl[0]=2*Zs[0]-Sl[0],Sl[1]=2*Zs[1]-Sl[1],hs)return[Sl,Il,Nl].concat(ys);ys=[Sl,Il,Nl].concat(ys).join().split(",");for(var Tl=[],_c=0,l0=ys.length;_c<l0;_c++)Tl[_c]=_c%2?bs(ys[_c-1],ys[_c],gs).y:bs(ys[_c],ys[_c+1],gs).x;return Tl},pathToCurve=function(ns,ts){var rs=pathToAbsolute$1(ns),as=ts&&pathToAbsolute$1(ts),os={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},is={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},us=[],ls=[],fs="",hs="",vs,gs=function(Cs,As,Is){var ks,Ps;if(!Cs)return["C",As.x,As.y,As.x,As.y,As.x,As.y];switch(!(Cs[0]in{T:1,Q:1})&&(As.qx=As.qy=null),Cs[0]){case"M":As.X=Cs[1],As.Y=Cs[2];break;case"A":Cs=["C"].concat(a2c.apply(0,[As.x,As.y].concat(Cs.slice(1))));break;case"S":Is==="C"||Is==="S"?(ks=As.x*2-As.bx,Ps=As.y*2-As.by):(ks=As.x,Ps=As.y),Cs=["C",ks,Ps].concat(Cs.slice(1));break;case"T":Is==="Q"||Is==="T"?(As.qx=As.x*2-As.qx,As.qy=As.y*2-As.qy):(As.qx=As.x,As.qy=As.y),Cs=["C"].concat(q2c(As.x,As.y,As.qx,As.qy,Cs[1],Cs[2]));break;case"Q":As.qx=Cs[1],As.qy=Cs[2],Cs=["C"].concat(q2c(As.x,As.y,Cs[1],Cs[2],Cs[3],Cs[4]));break;case"L":Cs=["C"].concat(l2c(As.x,As.y,Cs[1],Cs[2]));break;case"H":Cs=["C"].concat(l2c(As.x,As.y,Cs[1],As.y));break;case"V":Cs=["C"].concat(l2c(As.x,As.y,As.x,Cs[1]));break;case"Z":Cs=["C"].concat(l2c(As.x,As.y,As.X,As.Y));break}return Cs},ys=function(Cs,As){if(Cs[As].length>7){Cs[As].shift();for(var Is=Cs[As];Is.length;)us[As]="A",as&&(ls[As]="A"),Cs.splice(As++,0,["C"].concat(Is.splice(0,6)));Cs.splice(As,1),vs=Math.max(rs.length,as&&as.length||0)}},xs=function(Cs,As,Is,ks,Ps){Cs&&As&&Cs[Ps][0]==="M"&&As[Ps][0]!=="M"&&(As.splice(Ps,0,["M",ks.x,ks.y]),Is.bx=0,Is.by=0,Is.x=Cs[Ps][1],Is.y=Cs[Ps][2],vs=Math.max(rs.length,as&&as.length||0))};vs=Math.max(rs.length,as&&as.length||0);for(var ms=0;ms<vs;ms++){rs[ms]&&(fs=rs[ms][0]),fs!=="C"&&(us[ms]=fs,ms&&(hs=us[ms-1])),rs[ms]=gs(rs[ms],os,hs),us[ms]!=="A"&&fs==="C"&&(us[ms]="C"),ys(rs,ms),as&&(as[ms]&&(fs=as[ms][0]),fs!=="C"&&(ls[ms]=fs,ms&&(hs=ls[ms-1])),as[ms]=gs(as[ms],is,hs),ls[ms]!=="A"&&fs==="C"&&(ls[ms]="C"),ys(as,ms)),xs(rs,as,os,is,ms),xs(as,rs,is,os,ms);var Ss=rs[ms],Ms=as&&as[ms],$s=Ss.length,bs=as&&Ms.length;os.x=Ss[$s-2],os.y=Ss[$s-1],os.bx=parseFloat(Ss[$s-4])||os.x,os.by=parseFloat(Ss[$s-3])||os.y,is.bx=as&&(parseFloat(Ms[bs-4])||is.x),is.by=as&&(parseFloat(Ms[bs-3])||is.y),is.x=as&&Ms[bs-2],is.y=as&&Ms[bs-1]}return as?[rs,as]:rs},p2s=/,?([a-z]),?/gi,parsePathArray=function(ns){return ns.join(",").replace(p2s,"$1")},base3=function(ns,ts,rs,as,os){var is=-3*ts+9*rs-9*as+3*os,us=ns*is+6*ts-12*rs+6*as;return ns*us-3*ts+3*rs},bezlen=function(ns,ts,rs,as,os,is,us,ls,fs){fs===null&&(fs=1),fs=fs>1?1:fs<0?0:fs;for(var hs=fs/2,vs=12,gs=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ys=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],xs=0,ms=0;ms<vs;ms++){var Ss=hs*gs[ms]+hs,Ms=base3(Ss,ns,rs,os,us),$s=base3(Ss,ts,as,is,ls),bs=Ms*Ms+$s*$s;xs+=ys[ms]*Math.sqrt(bs)}return hs*xs},curveDim=function(ns,ts,rs,as,os,is,us,ls){for(var fs=[],hs=[[],[]],vs,gs,ys,xs,ms=0;ms<2;++ms){if(ms===0?(gs=6*ns-12*rs+6*os,vs=-3*ns+9*rs-9*os+3*us,ys=3*rs-3*ns):(gs=6*ts-12*as+6*is,vs=-3*ts+9*as-9*is+3*ls,ys=3*as-3*ts),Math.abs(vs)<1e-12){if(Math.abs(gs)<1e-12)continue;xs=-ys/gs,xs>0&&xs<1&&fs.push(xs);continue}var Ss=gs*gs-4*ys*vs,Ms=Math.sqrt(Ss);if(!(Ss<0)){var $s=(-gs+Ms)/(2*vs);$s>0&&$s<1&&fs.push($s);var bs=(-gs-Ms)/(2*vs);bs>0&&bs<1&&fs.push(bs)}}for(var Cs=fs.length,As=Cs,Is;Cs--;)xs=fs[Cs],Is=1-xs,hs[0][Cs]=Is*Is*Is*ns+3*Is*Is*xs*rs+3*Is*xs*xs*os+xs*xs*xs*us,hs[1][Cs]=Is*Is*Is*ts+3*Is*Is*xs*as+3*Is*xs*xs*is+xs*xs*xs*ls;return hs[0][As]=ns,hs[1][As]=ts,hs[0][As+1]=us,hs[1][As+1]=ls,hs[0].length=hs[1].length=As+2,{min:{x:Math.min.apply(0,hs[0]),y:Math.min.apply(0,hs[1])},max:{x:Math.max.apply(0,hs[0]),y:Math.max.apply(0,hs[1])}}},intersect=function(ns,ts,rs,as,os,is,us,ls){if(!(Math.max(ns,rs)<Math.min(os,us)||Math.min(ns,rs)>Math.max(os,us)||Math.max(ts,as)<Math.min(is,ls)||Math.min(ts,as)>Math.max(is,ls))){var fs=(ns*as-ts*rs)*(os-us)-(ns-rs)*(os*ls-is*us),hs=(ns*as-ts*rs)*(is-ls)-(ts-as)*(os*ls-is*us),vs=(ns-rs)*(is-ls)-(ts-as)*(os-us);if(vs){var gs=fs/vs,ys=hs/vs,xs=+gs.toFixed(2),ms=+ys.toFixed(2);if(!(xs<+Math.min(ns,rs).toFixed(2)||xs>+Math.max(ns,rs).toFixed(2)||xs<+Math.min(os,us).toFixed(2)||xs>+Math.max(os,us).toFixed(2)||ms<+Math.min(ts,as).toFixed(2)||ms>+Math.max(ts,as).toFixed(2)||ms<+Math.min(is,ls).toFixed(2)||ms>+Math.max(is,ls).toFixed(2)))return{x:gs,y:ys}}}},isPointInsideBBox=function(ns,ts,rs){return ts>=ns.x&&ts<=ns.x+ns.width&&rs>=ns.y&&rs<=ns.y+ns.height},rectPath=function(ns,ts,rs,as,os){if(os)return[["M",+ns+ +os,ts],["l",rs-os*2,0],["a",os,os,0,0,1,os,os],["l",0,as-os*2],["a",os,os,0,0,1,-os,os],["l",os*2-rs,0],["a",os,os,0,0,1,-os,-os],["l",0,os*2-as],["a",os,os,0,0,1,os,-os],["z"]];var is=[["M",ns,ts],["l",rs,0],["l",0,as],["l",-rs,0],["z"]];return is.parsePathArray=parsePathArray,is},box=function(ns,ts,rs,as){return ns===null&&(ns=ts=rs=as=0),ts===null&&(ts=ns.y,rs=ns.width,as=ns.height,ns=ns.x),{x:ns,y:ts,width:rs,w:rs,height:as,h:as,x2:ns+rs,y2:ts+as,cx:ns+rs/2,cy:ts+as/2,r1:Math.min(rs,as)/2,r2:Math.max(rs,as)/2,r0:Math.sqrt(rs*rs+as*as)/2,path:rectPath(ns,ts,rs,as),vb:[ns,ts,rs,as].join(" ")}},isBBoxIntersect=function(ns,ts){return ns=box(ns),ts=box(ts),isPointInsideBBox(ts,ns.x,ns.y)||isPointInsideBBox(ts,ns.x2,ns.y)||isPointInsideBBox(ts,ns.x,ns.y2)||isPointInsideBBox(ts,ns.x2,ns.y2)||isPointInsideBBox(ns,ts.x,ts.y)||isPointInsideBBox(ns,ts.x2,ts.y)||isPointInsideBBox(ns,ts.x,ts.y2)||isPointInsideBBox(ns,ts.x2,ts.y2)||(ns.x<ts.x2&&ns.x>ts.x||ts.x<ns.x2&&ts.x>ns.x)&&(ns.y<ts.y2&&ns.y>ts.y||ts.y<ns.y2&&ts.y>ns.y)},bezierBBox=function(ns,ts,rs,as,os,is,us,ls){isArray$2(ns)||(ns=[ns,ts,rs,as,os,is,us,ls]);var fs=curveDim.apply(null,ns);return box(fs.min.x,fs.min.y,fs.max.x-fs.min.x,fs.max.y-fs.min.y)},findDotsAtSegment=function(ns,ts,rs,as,os,is,us,ls,fs){var hs=1-fs,vs=Math.pow(hs,3),gs=Math.pow(hs,2),ys=fs*fs,xs=ys*fs,ms=vs*ns+gs*3*fs*rs+hs*3*fs*fs*os+xs*us,Ss=vs*ts+gs*3*fs*as+hs*3*fs*fs*is+xs*ls,Ms=ns+2*fs*(rs-ns)+ys*(os-2*rs+ns),$s=ts+2*fs*(as-ts)+ys*(is-2*as+ts),bs=rs+2*fs*(os-rs)+ys*(us-2*os+rs),Cs=as+2*fs*(is-as)+ys*(ls-2*is+as),As=hs*ns+fs*rs,Is=hs*ts+fs*as,ks=hs*os+fs*us,Ps=hs*is+fs*ls,Ds=90-Math.atan2(Ms-bs,$s-Cs)*180/Math.PI;return{x:ms,y:Ss,m:{x:Ms,y:$s},n:{x:bs,y:Cs},start:{x:As,y:Is},end:{x:ks,y:Ps},alpha:Ds}},interHelper=function(ns,ts,rs){var as=bezierBBox(ns),os=bezierBBox(ts);if(!isBBoxIntersect(as,os))return rs?0:[];for(var is=bezlen.apply(0,ns),us=bezlen.apply(0,ts),ls=~~(is/8),fs=~~(us/8),hs=[],vs=[],gs={},ys=rs?0:[],xs=0;xs<ls+1;xs++){var ms=findDotsAtSegment.apply(0,ns.concat(xs/ls));hs.push({x:ms.x,y:ms.y,t:xs/ls})}for(var xs=0;xs<fs+1;xs++){var ms=findDotsAtSegment.apply(0,ts.concat(xs/fs));vs.push({x:ms.x,y:ms.y,t:xs/fs})}for(var xs=0;xs<ls;xs++)for(var Ss=0;Ss<fs;Ss++){var Ms=hs[xs],$s=hs[xs+1],bs=vs[Ss],Cs=vs[Ss+1],As=Math.abs($s.x-Ms.x)<.001?"y":"x",Is=Math.abs(Cs.x-bs.x)<.001?"y":"x",ks=intersect(Ms.x,Ms.y,$s.x,$s.y,bs.x,bs.y,Cs.x,Cs.y);if(ks){if(gs[ks.x.toFixed(4)]===ks.y.toFixed(4))continue;gs[ks.x.toFixed(4)]=ks.y.toFixed(4);var Ps=Ms.t+Math.abs((ks[As]-Ms[As])/($s[As]-Ms[As]))*($s.t-Ms.t),Ds=bs.t+Math.abs((ks[Is]-bs[Is])/(Cs[Is]-bs[Is]))*(Cs.t-bs.t);Ps>=0&&Ps<=1&&Ds>=0&&Ds<=1&&(rs?ys+=1:ys.push({x:ks.x,y:ks.y,t1:Ps,t2:Ds}))}}return ys},interPathHelper=function(ns,ts,rs){ns=pathToCurve(ns),ts=pathToCurve(ts);for(var as,os,is,us,ls,fs,hs,vs,gs,ys,xs=rs?0:[],ms=0,Ss=ns.length;ms<Ss;ms++){var Ms=ns[ms];if(Ms[0]==="M")as=ls=Ms[1],os=fs=Ms[2];else{Ms[0]==="C"?(gs=[as,os].concat(Ms.slice(1)),as=gs[6],os=gs[7]):(gs=[as,os,as,os,ls,fs,ls,fs],as=ls,os=fs);for(var $s=0,bs=ts.length;$s<bs;$s++){var Cs=ts[$s];if(Cs[0]==="M")is=hs=Cs[1],us=vs=Cs[2];else{Cs[0]==="C"?(ys=[is,us].concat(Cs.slice(1)),is=ys[6],us=ys[7]):(ys=[is,us,is,us,hs,vs,hs,vs],is=hs,us=vs);var As=interHelper(gs,ys,rs);if(rs)xs+=As;else{for(var Is=0,ks=As.length;Is<ks;Is++)As[Is].segment1=ms,As[Is].segment2=$s,As[Is].bez1=gs,As[Is].bez2=ys;xs=xs.concat(As)}}}}}return xs},intersection=function(ns,ts){return interPathHelper(ns,ts)};function decasteljau(ns,ts){var rs=[],as=[];function os(is,us){if(is.length===1)rs.push(is[0]),as.push(is[0]);else{for(var ls=[],fs=0;fs<is.length-1;fs++)fs===0&&rs.push(is[0]),fs===is.length-2&&as.push(is[fs+1]),ls[fs]=[(1-us)*is[fs][0]+us*is[fs+1][0],(1-us)*is[fs][1]+us*is[fs+1][1]];os(ls,us)}}return ns.length&&os(ns,ts),{left:rs,right:as.reverse()}}function splitCurve(ns,ts,rs){var as=[[ns[1],ns[2]]];rs=rs||2;var os=[];ts[0]==="A"?(as.push(ts[6]),as.push(ts[7])):ts[0]==="C"?(as.push([ts[1],ts[2]]),as.push([ts[3],ts[4]]),as.push([ts[5],ts[6]])):ts[0]==="S"||ts[0]==="Q"?(as.push([ts[1],ts[2]]),as.push([ts[3],ts[4]])):as.push([ts[1],ts[2]]);for(var is=as,us=1/rs,ls=0;ls<rs-1;ls++){var fs=us/(1-us*ls),hs=decasteljau(is,fs);os.push(hs.left),is=hs.right}os.push(is);var vs=os.map(function(gs){var ys=[];return gs.length===4&&(ys.push("C"),ys=ys.concat(gs[2])),gs.length>=3&&(gs.length===3&&ys.push("Q"),ys=ys.concat(gs[1])),gs.length===2&&ys.push("L"),ys=ys.concat(gs[gs.length-1]),ys});return vs}var splitSegment=function(ns,ts,rs){if(rs===1)return[[].concat(ns)];var as=[];if(ts[0]==="L"||ts[0]==="C"||ts[0]==="Q")as=as.concat(splitCurve(ns,ts,rs));else{var os=[].concat(ns);os[0]==="M"&&(os[0]="L");for(var is=0;is<=rs-1;is++)as.push(os)}return as},fillPath=function(ns,ts){if(ns.length===1)return ns;var rs=ns.length-1,as=ts.length-1,os=rs/as,is=[];if(ns.length===1&&ns[0][0]==="M"){for(var us=0;us<as-rs;us++)ns.push(ns[0]);return ns}for(var us=0;us<as;us++){var ls=Math.floor(os*us);is[ls]=(is[ls]||0)+1}var fs=is.reduce(function(hs,vs,gs){return gs===rs?hs.concat(ns[rs]):hs.concat(splitSegment(ns[gs],ns[gs+1],vs))},[]);return fs.unshift(ns[0]),(ts[as]==="Z"||ts[as]==="z")&&fs.push("Z"),fs},isEqual$2=function(ns,ts){if(ns.length!==ts.length)return!1;var rs=!0;return each$1(ns,function(as,os){if(as!==ts[os])return rs=!1,!1}),rs};function getMinDiff(ns,ts,rs){var as=null,os=rs;return ts<os&&(os=ts,as="add"),ns<os&&(os=ns,as="del"),{type:as,min:os}}var levenshteinDistance=function(ns,ts){var rs=ns.length,as=ts.length,os,is,us=0;if(rs===0||as===0)return null;for(var ls=[],fs=0;fs<=rs;fs++)ls[fs]=[],ls[fs][0]={min:fs};for(var hs=0;hs<=as;hs++)ls[0][hs]={min:hs};for(var fs=1;fs<=rs;fs++){os=ns[fs-1];for(var hs=1;hs<=as;hs++){is=ts[hs-1],isEqual$2(os,is)?us=0:us=1;var vs=ls[fs-1][hs].min+1,gs=ls[fs][hs-1].min+1,ys=ls[fs-1][hs-1].min+us;ls[fs][hs]=getMinDiff(vs,gs,ys)}}return ls},fillPathByDiff=function(ns,ts){var rs=levenshteinDistance(ns,ts),as=ns.length,os=ts.length,is=[],us=1,ls=1;if(rs[as][os].min!==as){for(var fs=1;fs<=as;fs++){var hs=rs[fs][fs].min;ls=fs;for(var vs=us;vs<=os;vs++)rs[fs][vs].min<hs&&(hs=rs[fs][vs].min,ls=vs);us=ls,rs[fs][us].type&&is.push({index:fs-1,type:rs[fs][us].type})}for(var fs=is.length-1;fs>=0;fs--)us=is[fs].index,is[fs].type==="add"?ns.splice(us,0,[].concat(ns[us])):ns.splice(us,1)}as=ns.length;var gs=os-as;if(as<os)for(var fs=0;fs<gs;fs++)ns[as-1][0]==="z"||ns[as-1][0]==="Z"?ns.splice(as-2,0,ns[as-2]):ns.push(ns[as-1]),as+=1;return ns};function _splitPoints(ns,ts,rs){for(var as=[].concat(ns),os,is=1/(rs+1),us=_getSegmentPoints(ts)[0],ls=1;ls<=rs;ls++)is*=ls,os=Math.floor(ns.length*is),os===0?as.unshift([us[0]*is+ns[os][0]*(1-is),us[1]*is+ns[os][1]*(1-is)]):as.splice(os,0,[us[0]*is+ns[os][0]*(1-is),us[1]*is+ns[os][1]*(1-is)]);return as}function _getSegmentPoints(ns){var ts=[];switch(ns[0]){case"M":ts.push([ns[1],ns[2]]);break;case"L":ts.push([ns[1],ns[2]]);break;case"A":ts.push([ns[6],ns[7]]);break;case"Q":ts.push([ns[3],ns[4]]),ts.push([ns[1],ns[2]]);break;case"T":ts.push([ns[1],ns[2]]);break;case"C":ts.push([ns[5],ns[6]]),ts.push([ns[1],ns[2]]),ts.push([ns[3],ns[4]]);break;case"S":ts.push([ns[3],ns[4]]),ts.push([ns[1],ns[2]]);break;case"H":ts.push([ns[1],ns[1]]);break;case"V":ts.push([ns[1],ns[1]]);break}return ts}var formatPath=function(ns,ts){if(ns.length<=1)return ns;for(var rs,as=0;as<ts.length;as++)if(ns[as][0]!==ts[as][0])switch(rs=_getSegmentPoints(ns[as]),ts[as][0]){case"M":ns[as]=["M"].concat(rs[0]);break;case"L":ns[as]=["L"].concat(rs[0]);break;case"A":ns[as]=[].concat(ts[as]),ns[as][6]=rs[0][0],ns[as][7]=rs[0][1];break;case"Q":if(rs.length<2)if(as>0)rs=_splitPoints(rs,ns[as-1],1);else{ns[as]=ts[as];break}ns[as]=["Q"].concat(rs.reduce(function(os,is){return os.concat(is)},[]));break;case"T":ns[as]=["T"].concat(rs[0]);break;case"C":if(rs.length<3)if(as>0)rs=_splitPoints(rs,ns[as-1],2);else{ns[as]=ts[as];break}ns[as]=["C"].concat(rs.reduce(function(os,is){return os.concat(is)},[]));break;case"S":if(rs.length<2)if(as>0)rs=_splitPoints(rs,ns[as-1],1);else{ns[as]=ts[as];break}ns[as]=["S"].concat(rs.reduce(function(os,is){return os.concat(is)},[]));break;default:ns[as]=ts[as]}return ns};const PathUtil$3=Object.freeze(Object.defineProperty({__proto__:null,catmullRomToBezier,fillPath,fillPathByDiff,formatPath,intersection,parsePathArray,parsePathString:parsePathString$2,pathToAbsolute:pathToAbsolute$1,pathToCurve,rectPath},Symbol.toStringTag,{value:"Module"}));var GraphEvent=function(){function ns(ts,rs){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=ts,this.name=ts,this.originalEvent=rs,this.timeStamp=rs.timeStamp}return ns.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},ns.prototype.stopPropagation=function(){this.propagationStopped=!0},ns.prototype.toString=function(){var ts=this.type;return"[Event (type="+ts+")]"},ns.prototype.save=function(){},ns.prototype.restore=function(){},ns}();function removeFromArray(ns,ts){var rs=ns.indexOf(ts);rs!==-1&&ns.splice(rs,1)}var isBrowser=typeof window<"u"&&typeof window.document<"u";function isParent(ns,ts){if(ns.isCanvas())return!0;for(var rs=ts.getParent(),as=!1;rs;){if(rs===ns){as=!0;break}rs=rs.getParent()}return as}function isAllowCapture(ns){return ns.cfg.visible&&ns.cfg.capture}var Base$1=function(ns){__extends$x(ts,ns);function ts(rs){var as=ns.call(this)||this;as.destroyed=!1;var os=as.getDefaultCfg();return as.cfg=mix$1(os,rs),as}return ts.prototype.getDefaultCfg=function(){return{}},ts.prototype.get=function(rs){return this.cfg[rs]},ts.prototype.set=function(rs,as){this.cfg[rs]=as},ts.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},ts}(EventEmitter),__spreadArray$3=function(ns,ts,rs){if(rs||arguments.length===2)for(var as=0,os=ts.length,is;as<os;as++)(is||!(as in ts))&&(is||(is=Array.prototype.slice.call(ts,0,as)),is[as]=ts[as]);return ns.concat(is||Array.prototype.slice.call(ts))},BrowserInfo=function(){function ns(ts,rs,as){this.name=ts,this.version=rs,this.os=as,this.type="browser"}return ns}(),NodeInfo=function(){function ns(ts){this.version=ts,this.type="node",this.name="node",this.os=process.platform}return ns}(),SearchBotDeviceInfo=function(){function ns(ts,rs,as,os){this.name=ts,this.version=rs,this.os=as,this.bot=os,this.type="bot-device"}return ns}(),BotInfo=function(){function ns(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return ns}(),ReactNativeInfo=function(){function ns(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return ns}(),SEARCHBOX_UA_REGEX=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,SEARCHBOT_OS_REGEX=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,REQUIRED_VERSION_PARTS=3,userAgentRules=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",SEARCHBOX_UA_REGEX]],operatingSystemRules=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function detect(ns){return ns?parseUserAgent(ns):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ReactNativeInfo:typeof navigator<"u"?parseUserAgent(navigator.userAgent):getNodeVersion()}function matchUserAgent(ns){return ns!==""&&userAgentRules.reduce(function(ts,rs){var as=rs[0],os=rs[1];if(ts)return ts;var is=os.exec(ns);return!!is&&[as,is]},!1)}function parseUserAgent(ns){var ts=matchUserAgent(ns);if(!ts)return null;var rs=ts[0],as=ts[1];if(rs==="searchbot")return new BotInfo;var os=as[1]&&as[1].split(".").join("_").split("_").slice(0,3);os?os.length<REQUIRED_VERSION_PARTS&&(os=__spreadArray$3(__spreadArray$3([],os,!0),createVersionParts(REQUIRED_VERSION_PARTS-os.length),!0)):os=[];var is=os.join("."),us=detectOS(ns),ls=SEARCHBOT_OS_REGEX.exec(ns);return ls&&ls[1]?new SearchBotDeviceInfo(rs,is,us,ls[1]):new BrowserInfo(rs,is,us)}function detectOS(ns){for(var ts=0,rs=operatingSystemRules.length;ts<rs;ts++){var as=operatingSystemRules[ts],os=as[0],is=as[1],us=is.exec(ns);if(us)return os}return null}function getNodeVersion(){var ns=typeof process<"u"&&process.version;return ns?new NodeInfo(process.version.slice(1)):null}function createVersionParts(ns){for(var ts=[],rs=0;rs<ns;rs++)ts.push("0");return ts}function multiplyMatrix(ns,ts){var rs=[],as=ns[0],os=ns[1],is=ns[2],us=ns[3],ls=ns[4],fs=ns[5],hs=ns[6],vs=ns[7],gs=ns[8],ys=ts[0],xs=ts[1],ms=ts[2],Ss=ts[3],Ms=ts[4],$s=ts[5],bs=ts[6],Cs=ts[7],As=ts[8];return rs[0]=ys*as+xs*us+ms*hs,rs[1]=ys*os+xs*ls+ms*vs,rs[2]=ys*is+xs*fs+ms*gs,rs[3]=Ss*as+Ms*us+$s*hs,rs[4]=Ss*os+Ms*ls+$s*vs,rs[5]=Ss*is+Ms*fs+$s*gs,rs[6]=bs*as+Cs*us+As*hs,rs[7]=bs*os+Cs*ls+As*vs,rs[8]=bs*is+Cs*fs+As*gs,rs}function multiplyVec2(ns,ts){var rs=[],as=ts[0],os=ts[1];return rs[0]=ns[0]*as+ns[3]*os+ns[6],rs[1]=ns[1]*as+ns[4]*os+ns[7],rs}function invert(ns){var ts=[],rs=ns[0],as=ns[1],os=ns[2],is=ns[3],us=ns[4],ls=ns[5],fs=ns[6],hs=ns[7],vs=ns[8],gs=vs*us-ls*hs,ys=-vs*is+ls*fs,xs=hs*is-us*fs,ms=rs*gs+as*ys+os*xs;return ms?(ms=1/ms,ts[0]=gs*ms,ts[1]=(-vs*as+os*hs)*ms,ts[2]=(ls*as-os*us)*ms,ts[3]=ys*ms,ts[4]=(vs*rs-os*fs)*ms,ts[5]=(-ls*rs+os*is)*ms,ts[6]=xs*ms,ts[7]=(-hs*rs+as*fs)*ms,ts[8]=(us*rs-as*is)*ms,ts):null}var transform$g=transform$i,MATRIX="matrix",CLONE_CFGS=["zIndex","capture","visible","type"],RESERVED_PORPS=["repeat"],DELEGATION_SPLIT=":",WILDCARD="*";function _cloneArrayAttr(ns){for(var ts=[],rs=0;rs<ns.length;rs++)isArray$2(ns[rs])?ts.push([].concat(ns[rs])):ts.push(ns[rs]);return ts}function getFormatFromAttrs(ns,ts){var rs={},as=ts.attrs;for(var os in ns)rs[os]=as[os];return rs}function getFormatToAttrs(ns,ts){var rs={},as=ts.attr();return each$1(ns,function(os,is){RESERVED_PORPS.indexOf(is)===-1&&!isEqual$3(as[is],os)&&(rs[is]=os)}),rs}function checkExistedAttrs(ns,ts){if(ts.onFrame)return ns;var rs=ts.startTime,as=ts.delay,os=ts.duration,is=Object.prototype.hasOwnProperty;return each$1(ns,function(us){rs+as<us.startTime+us.delay+us.duration&&os>us.delay&&each$1(ts.toAttrs,function(ls,fs){is.call(us.toAttrs,fs)&&(delete us.toAttrs[fs],delete us.fromAttrs[fs])})}),ns}var Element$1=function(ns){__extends$x(ts,ns);function ts(rs){var as=ns.call(this,rs)||this;as.attrs={};var os=as.getDefaultAttrs();return mix$1(os,rs.attrs),as.attrs=os,as.initAttrs(os),as.initAnimate(),as}return ts.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},ts.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},ts.prototype.onCanvasChange=function(rs){},ts.prototype.initAttrs=function(rs){},ts.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},ts.prototype.isGroup=function(){return!1},ts.prototype.getParent=function(){return this.get("parent")},ts.prototype.getCanvas=function(){return this.get("canvas")},ts.prototype.attr=function(){for(var rs,as=[],os=0;os<arguments.length;os++)as[os]=arguments[os];var is=as[0],us=as[1];if(!is)return this.attrs;if(isObject$1(is)){for(var ls in is)this.setAttr(ls,is[ls]);return this.afterAttrsChange(is),this}return as.length===2?(this.setAttr(is,us),this.afterAttrsChange((rs={},rs[is]=us,rs)),this):this.attrs[is]},ts.prototype.isClipped=function(rs,as){var os=this.getClip();return os&&!os.isHit(rs,as)},ts.prototype.setAttr=function(rs,as){var os=this.attrs[rs];os!==as&&(this.attrs[rs]=as,this.onAttrChange(rs,as,os))},ts.prototype.onAttrChange=function(rs,as,os){rs==="matrix"&&this.set("totalMatrix",null)},ts.prototype.afterAttrsChange=function(rs){if(this.cfg.isClipShape){var as=this.cfg.applyTo;as&&as.onCanvasChange("clip")}else this.onCanvasChange("attr")},ts.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},ts.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},ts.prototype.setZIndex=function(rs){this.set("zIndex",rs);var as=this.getParent();return as&&as.sort(),this},ts.prototype.toFront=function(){var rs=this.getParent();if(rs){var as=rs.getChildren();this.get("el");var os=as.indexOf(this);as.splice(os,1),as.push(this),this.onCanvasChange("zIndex")}},ts.prototype.toBack=function(){var rs=this.getParent();if(rs){var as=rs.getChildren();this.get("el");var os=as.indexOf(this);as.splice(os,1),as.unshift(this),this.onCanvasChange("zIndex")}},ts.prototype.remove=function(rs){rs===void 0&&(rs=!0);var as=this.getParent();as?(removeFromArray(as.getChildren(),this),as.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),rs&&this.destroy()},ts.prototype.resetMatrix=function(){this.attr(MATRIX,this.getDefaultMatrix()),this.onCanvasChange("matrix")},ts.prototype.getMatrix=function(){return this.attr(MATRIX)},ts.prototype.setMatrix=function(rs){this.attr(MATRIX,rs),this.onCanvasChange("matrix")},ts.prototype.getTotalMatrix=function(){var rs=this.cfg.totalMatrix;if(!rs){var as=this.attr("matrix"),os=this.cfg.parentMatrix;os&&as?rs=multiplyMatrix(os,as):rs=as||os,this.set("totalMatrix",rs)}return rs},ts.prototype.applyMatrix=function(rs){var as=this.attr("matrix"),os=null;rs&&as?os=multiplyMatrix(rs,as):os=as||rs,this.set("totalMatrix",os),this.set("parentMatrix",rs)},ts.prototype.getDefaultMatrix=function(){return null},ts.prototype.applyToMatrix=function(rs){var as=this.attr("matrix");return as?multiplyVec2(as,rs):rs},ts.prototype.invertFromMatrix=function(rs){var as=this.attr("matrix");if(as){var os=invert(as);if(os)return multiplyVec2(os,rs)}return rs},ts.prototype.setClip=function(rs){var as=this.getCanvas(),os=null;if(rs){var is=this.getShapeBase(),us=upperFirst$2(rs.type),ls=is[us];ls&&(os=new ls({type:rs.type,isClipShape:!0,applyTo:this,attrs:rs.attrs,canvas:as}))}return this.set("clipShape",os),this.onCanvasChange("clip"),os},ts.prototype.getClip=function(){var rs=this.cfg.clipShape;return rs||null},ts.prototype.clone=function(){var rs=this,as=this.attrs,os={};each$1(as,function(ls,fs){isArray$2(as[fs])?os[fs]=_cloneArrayAttr(as[fs]):os[fs]=as[fs]});var is=this.constructor,us=new is({attrs:os});return each$1(CLONE_CFGS,function(ls){us.set(ls,rs.get(ls))}),us},ts.prototype.destroy=function(){var rs=this.destroyed;rs||(this.attrs={},ns.prototype.destroy.call(this))},ts.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},ts.prototype.animate=function(){for(var rs=[],as=0;as<arguments.length;as++)rs[as]=arguments[as];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var os=this.get("timeline");os||(os=this.get("canvas").get("timeline"),this.set("timeline",os));var is=this.get("animations")||[];os.timer||os.initTimer();var us=rs[0],ls=rs[1],fs=rs[2],hs=fs===void 0?"easeLinear":fs,vs=rs[3],gs=vs===void 0?noop$2:vs,ys=rs[4],xs=ys===void 0?0:ys,ms,Ss,Ms,$s,bs;isFunction$2(us)?(ms=us,us={}):isObject$1(us)&&us.onFrame&&(ms=us.onFrame,Ss=us.repeat),isObject$1(ls)?(bs=ls,ls=bs.duration,hs=bs.easing||"easeLinear",xs=bs.delay||0,Ss=bs.repeat||Ss||!1,gs=bs.callback||noop$2,Ms=bs.pauseCallback||noop$2,$s=bs.resumeCallback||noop$2):(isNumber$3(gs)&&(xs=gs,gs=null),isFunction$2(hs)?(gs=hs,hs="easeLinear"):hs=hs||"easeLinear");var Cs=getFormatToAttrs(us,this),As={fromAttrs:getFormatFromAttrs(Cs,this),toAttrs:Cs,duration:ls,easing:hs,repeat:Ss,callback:gs,pauseCallback:Ms,resumeCallback:$s,delay:xs,startTime:os.getTime(),id:uniqueId$5(),onFrame:ms,pathFormatted:!1};is.length>0?is=checkExistedAttrs(is,As):os.addAnimator(this),is.push(As),this.set("animations",is),this.set("_pause",{isPaused:!1})}},ts.prototype.stopAnimate=function(rs){var as=this;rs===void 0&&(rs=!0);var os=this.get("animations");each$1(os,function(is){rs&&(is.onFrame?as.attr(is.onFrame(1)):as.attr(is.toAttrs)),is.callback&&is.callback()}),this.set("animating",!1),this.set("animations",[])},ts.prototype.pauseAnimate=function(){var rs=this.get("timeline"),as=this.get("animations"),os=rs.getTime();return each$1(as,function(is){is._paused=!0,is._pauseTime=os,is.pauseCallback&&is.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:os}),this},ts.prototype.resumeAnimate=function(){var rs=this.get("timeline"),as=rs.getTime(),os=this.get("animations"),is=this.get("_pause").pauseTime;return each$1(os,function(us){us.startTime=us.startTime+(as-is),us._paused=!1,us._pauseTime=null,us.resumeCallback&&us.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",os),this},ts.prototype.emitDelegation=function(rs,as){var os=this,is=as.propagationPath;this.getEvents();var us;rs==="mouseenter"?us=as.fromShape:rs==="mouseleave"&&(us=as.toShape);for(var ls=function(gs){var ys=is[gs],xs=ys.get("name");if(xs){if((ys.isGroup()||ys.isCanvas&&ys.isCanvas())&&us&&isParent(ys,us))return"break";isArray$2(xs)?each$1(xs,function(ms){os.emitDelegateEvent(ys,ms,as)}):fs.emitDelegateEvent(ys,xs,as)}},fs=this,hs=0;hs<is.length;hs++){var vs=ls(hs);if(vs==="break")break}},ts.prototype.emitDelegateEvent=function(rs,as,os){var is=this.getEvents(),us=as+DELEGATION_SPLIT+os.type;(is[us]||is[WILDCARD])&&(os.name=us,os.currentTarget=rs,os.delegateTarget=this,os.delegateObject=rs.get("delegateObject"),this.emit(us,os))},ts.prototype.translate=function(rs,as){rs===void 0&&(rs=0),as===void 0&&(as=0);var os=this.getMatrix(),is=transform$g(os,[["t",rs,as]]);return this.setMatrix(is),this},ts.prototype.move=function(rs,as){var os=this.attr("x")||0,is=this.attr("y")||0;return this.translate(rs-os,as-is),this},ts.prototype.moveTo=function(rs,as){return this.move(rs,as)},ts.prototype.scale=function(rs,as){var os=this.getMatrix(),is=transform$g(os,[["s",rs,as||rs]]);return this.setMatrix(is),this},ts.prototype.rotate=function(rs){var as=this.getMatrix(),os=transform$g(as,[["r",rs]]);return this.setMatrix(os),this},ts.prototype.rotateAtStart=function(rs){var as=this.attr(),os=as.x,is=as.y,us=this.getMatrix(),ls=transform$g(us,[["t",-os,-is],["r",rs],["t",os,is]]);return this.setMatrix(ls),this},ts.prototype.rotateAtPoint=function(rs,as,os){var is=this.getMatrix(),us=transform$g(is,[["t",-rs,-as],["r",os],["t",rs,as]]);return this.setMatrix(us),this},ts}(Base$1),SHAPE_MAP={},INDEX="_INDEX";function setCanvas(ns,ts){if(ns.set("canvas",ts),ns.isGroup()){var rs=ns.get("children");rs.length&&rs.forEach(function(as){setCanvas(as,ts)})}}function setTimeline(ns,ts){if(ns.set("timeline",ts),ns.isGroup()){var rs=ns.get("children");rs.length&&rs.forEach(function(as){setTimeline(as,ts)})}}function removeChild(ns,ts,rs){rs===void 0&&(rs=!0),rs?ts.destroy():(ts.set("parent",null),ts.set("canvas",null)),removeFromArray(ns.getChildren(),ts)}function getComparer(ns){return function(ts,rs){var as=ns(ts,rs);return as===0?ts[INDEX]-rs[INDEX]:as}}var Container$1=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.isCanvas=function(){return!1},ts.prototype.getBBox=function(){var rs=1/0,as=-1/0,os=1/0,is=-1/0,us=this.getChildren().filter(function(fs){return fs.get("visible")&&(!fs.isGroup()||fs.isGroup()&&fs.getChildren().length>0)});us.length>0?each$1(us,function(fs){var hs=fs.getBBox(),vs=hs.minX,gs=hs.maxX,ys=hs.minY,xs=hs.maxY;vs<rs&&(rs=vs),gs>as&&(as=gs),ys<os&&(os=ys),xs>is&&(is=xs)}):(rs=0,as=0,os=0,is=0);var ls={x:rs,y:os,minX:rs,minY:os,maxX:as,maxY:is,width:as-rs,height:is-os};return ls},ts.prototype.getCanvasBBox=function(){var rs=1/0,as=-1/0,os=1/0,is=-1/0,us=this.getChildren().filter(function(fs){return fs.get("visible")&&(!fs.isGroup()||fs.isGroup()&&fs.getChildren().length>0)});us.length>0?each$1(us,function(fs){var hs=fs.getCanvasBBox(),vs=hs.minX,gs=hs.maxX,ys=hs.minY,xs=hs.maxY;vs<rs&&(rs=vs),gs>as&&(as=gs),ys<os&&(os=ys),xs>is&&(is=xs)}):(rs=0,as=0,os=0,is=0);var ls={x:rs,y:os,minX:rs,minY:os,maxX:as,maxY:is,width:as-rs,height:is-os};return ls},ts.prototype.getDefaultCfg=function(){var rs=ns.prototype.getDefaultCfg.call(this);return rs.children=[],rs},ts.prototype.onAttrChange=function(rs,as,os){if(ns.prototype.onAttrChange.call(this,rs,as,os),rs==="matrix"){var is=this.getTotalMatrix();this._applyChildrenMarix(is)}},ts.prototype.applyMatrix=function(rs){var as=this.getTotalMatrix();ns.prototype.applyMatrix.call(this,rs);var os=this.getTotalMatrix();os!==as&&this._applyChildrenMarix(os)},ts.prototype._applyChildrenMarix=function(rs){var as=this.getChildren();each$1(as,function(os){os.applyMatrix(rs)})},ts.prototype.addShape=function(){for(var rs=[],as=0;as<arguments.length;as++)rs[as]=arguments[as];var os=rs[0],is=rs[1];isObject$1(os)?is=os:is.type=os;var us=SHAPE_MAP[is.type];us||(us=upperFirst$2(is.type),SHAPE_MAP[is.type]=us);var ls=this.getShapeBase(),fs=new ls[us](is);return this.add(fs),fs},ts.prototype.addGroup=function(){for(var rs=[],as=0;as<arguments.length;as++)rs[as]=arguments[as];var os=rs[0],is=rs[1],us;if(isFunction$2(os))is?us=new os(is):us=new os({parent:this});else{var ls=os||{},fs=this.getGroupBase();us=new fs(ls)}return this.add(us),us},ts.prototype.getCanvas=function(){var rs;return this.isCanvas()?rs=this:rs=this.get("canvas"),rs},ts.prototype.getShape=function(rs,as,os){if(!isAllowCapture(this))return null;var is=this.getChildren(),us;if(this.isCanvas())us=this._findShape(is,rs,as,os);else{var ls=[rs,as,1];ls=this.invertFromMatrix(ls),this.isClipped(ls[0],ls[1])||(us=this._findShape(is,ls[0],ls[1],os))}return us},ts.prototype._findShape=function(rs,as,os,is){for(var us=null,ls=rs.length-1;ls>=0;ls--){var fs=rs[ls];if(isAllowCapture(fs)&&(fs.isGroup()?us=fs.getShape(as,os,is):fs.isHit(as,os)&&(us=fs)),us)break}return us},ts.prototype.add=function(rs){var as=this.getCanvas(),os=this.getChildren(),is=this.get("timeline"),us=rs.getParent();us&&removeChild(us,rs,!1),rs.set("parent",this),as&&setCanvas(rs,as),is&&setTimeline(rs,is),os.push(rs),rs.onCanvasChange("add"),this._applyElementMatrix(rs)},ts.prototype._applyElementMatrix=function(rs){var as=this.getTotalMatrix();as&&rs.applyMatrix(as)},ts.prototype.getChildren=function(){return this.get("children")},ts.prototype.sort=function(){var rs=this.getChildren();each$1(rs,function(as,os){return as[INDEX]=os,as}),rs.sort(getComparer(function(as,os){return as.get("zIndex")-os.get("zIndex")})),this.onCanvasChange("sort")},ts.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var rs=this.getChildren(),as=rs.length-1;as>=0;as--)rs[as].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},ts.prototype.destroy=function(){this.get("destroyed")||(this.clear(),ns.prototype.destroy.call(this))},ts.prototype.getFirst=function(){return this.getChildByIndex(0)},ts.prototype.getLast=function(){var rs=this.getChildren();return this.getChildByIndex(rs.length-1)},ts.prototype.getChildByIndex=function(rs){var as=this.getChildren();return as[rs]},ts.prototype.getCount=function(){var rs=this.getChildren();return rs.length},ts.prototype.contain=function(rs){var as=this.getChildren();return as.indexOf(rs)>-1},ts.prototype.removeChild=function(rs,as){as===void 0&&(as=!0),this.contain(rs)&&rs.remove(as)},ts.prototype.findAll=function(rs){var as=[],os=this.getChildren();return each$1(os,function(is){rs(is)&&as.push(is),is.isGroup()&&(as=as.concat(is.findAll(rs)))}),as},ts.prototype.find=function(rs){var as=null,os=this.getChildren();return each$1(os,function(is){if(rs(is)?as=is:is.isGroup()&&(as=is.find(rs)),as)return!1}),as},ts.prototype.findById=function(rs){return this.find(function(as){return as.get("id")===rs})},ts.prototype.findByClassName=function(rs){return this.find(function(as){return as.get("className")===rs})},ts.prototype.findAllByName=function(rs){return this.findAll(function(as){return as.get("name")===rs})},ts}(Element$1),frame=0,timeout=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(ns){setTimeout(ns,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer$1.prototype={constructor:Timer,restart:function(ns,ts,rs){if(typeof ns!="function")throw new TypeError("callback is not a function");rs=(rs==null?now():+rs)+(ts==null?0:+ts),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=ns,this._time=rs,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer$1(ns,ts,rs){var as=new Timer;return as.restart(ns,ts,rs),as}function timerFlush(){now(),++frame;for(var ns=taskHead,ts;ns;)(ts=clockNow-ns._time)>=0&&ns._call.call(null,ts),ns=ns._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var ns=clock.now(),ts=ns-clockLast;ts>pokeDelay&&(clockSkew-=ts,clockLast=ns)}function nap(){for(var ns,ts=taskHead,rs,as=1/0;ts;)ts._call?(as>ts._time&&(as=ts._time),ns=ts,ts=ts._next):(rs=ts._next,ts._next=null,ts=ns?ns._next=rs:taskHead=rs);taskTail=ns,sleep(as)}function sleep(ns){if(!frame){timeout&&(timeout=clearTimeout(timeout));var ts=ns-clockNow;ts>24?(ns<1/0&&(timeout=setTimeout(wake,ns-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function define(ns,ts,rs){ns.prototype=ts.prototype=rs,rs.constructor=ns}function extend$2(ns,ts){var rs=Object.create(ns.prototype);for(var as in ts)rs[as]=ts[as];return rs}function Color$1(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color$1,color$2,{copy(ns){return Object.assign(new this.constructor,this,ns)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$2(ns){var ts,rs;return ns=(ns+"").trim().toLowerCase(),(ts=reHex.exec(ns))?(rs=ts[1].length,ts=parseInt(ts[1],16),rs===6?rgbn(ts):rs===3?new Rgb(ts>>8&15|ts>>4&240,ts>>4&15|ts&240,(ts&15)<<4|ts&15,1):rs===8?rgba(ts>>24&255,ts>>16&255,ts>>8&255,(ts&255)/255):rs===4?rgba(ts>>12&15|ts>>8&240,ts>>8&15|ts>>4&240,ts>>4&15|ts&240,((ts&15)<<4|ts&15)/255):null):(ts=reRgbInteger.exec(ns))?new Rgb(ts[1],ts[2],ts[3],1):(ts=reRgbPercent.exec(ns))?new Rgb(ts[1]*255/100,ts[2]*255/100,ts[3]*255/100,1):(ts=reRgbaInteger.exec(ns))?rgba(ts[1],ts[2],ts[3],ts[4]):(ts=reRgbaPercent.exec(ns))?rgba(ts[1]*255/100,ts[2]*255/100,ts[3]*255/100,ts[4]):(ts=reHslPercent.exec(ns))?hsla(ts[1],ts[2]/100,ts[3]/100,1):(ts=reHslaPercent.exec(ns))?hsla(ts[1],ts[2]/100,ts[3]/100,ts[4]):named.hasOwnProperty(ns)?rgbn(named[ns]):ns==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(ns){return new Rgb(ns>>16&255,ns>>8&255,ns&255,1)}function rgba(ns,ts,rs,as){return as<=0&&(ns=ts=rs=NaN),new Rgb(ns,ts,rs,as)}function rgbConvert(ns){return ns instanceof Color$1||(ns=color$2(ns)),ns?(ns=ns.rgb(),new Rgb(ns.r,ns.g,ns.b,ns.opacity)):new Rgb}function rgb$1(ns,ts,rs,as){return arguments.length===1?rgbConvert(ns):new Rgb(ns,ts,rs,as??1)}function Rgb(ns,ts,rs,as){this.r=+ns,this.g=+ts,this.b=+rs,this.opacity=+as}define(Rgb,rgb$1,extend$2(Color$1,{brighter(ns){return ns=ns==null?brighter:Math.pow(brighter,ns),new Rgb(this.r*ns,this.g*ns,this.b*ns,this.opacity)},darker(ns){return ns=ns==null?darker:Math.pow(darker,ns),new Rgb(this.r*ns,this.g*ns,this.b*ns,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const ns=clampa(this.opacity);return`${ns===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${ns===1?")":`, ${ns})`}`}function clampa(ns){return isNaN(ns)?1:Math.max(0,Math.min(1,ns))}function clampi(ns){return Math.max(0,Math.min(255,Math.round(ns)||0))}function hex(ns){return ns=clampi(ns),(ns<16?"0":"")+ns.toString(16)}function hsla(ns,ts,rs,as){return as<=0?ns=ts=rs=NaN:rs<=0||rs>=1?ns=ts=NaN:ts<=0&&(ns=NaN),new Hsl(ns,ts,rs,as)}function hslConvert(ns){if(ns instanceof Hsl)return new Hsl(ns.h,ns.s,ns.l,ns.opacity);if(ns instanceof Color$1||(ns=color$2(ns)),!ns)return new Hsl;if(ns instanceof Hsl)return ns;ns=ns.rgb();var ts=ns.r/255,rs=ns.g/255,as=ns.b/255,os=Math.min(ts,rs,as),is=Math.max(ts,rs,as),us=NaN,ls=is-os,fs=(is+os)/2;return ls?(ts===is?us=(rs-as)/ls+(rs<as)*6:rs===is?us=(as-ts)/ls+2:us=(ts-rs)/ls+4,ls/=fs<.5?is+os:2-is-os,us*=60):ls=fs>0&&fs<1?0:us,new Hsl(us,ls,fs,ns.opacity)}function hsl(ns,ts,rs,as){return arguments.length===1?hslConvert(ns):new Hsl(ns,ts,rs,as??1)}function Hsl(ns,ts,rs,as){this.h=+ns,this.s=+ts,this.l=+rs,this.opacity=+as}define(Hsl,hsl,extend$2(Color$1,{brighter(ns){return ns=ns==null?brighter:Math.pow(brighter,ns),new Hsl(this.h,this.s,this.l*ns,this.opacity)},darker(ns){return ns=ns==null?darker:Math.pow(darker,ns),new Hsl(this.h,this.s,this.l*ns,this.opacity)},rgb(){var ns=this.h%360+(this.h<0)*360,ts=isNaN(ns)||isNaN(this.s)?0:this.s,rs=this.l,as=rs+(rs<.5?rs:1-rs)*ts,os=2*rs-as;return new Rgb(hsl2rgb(ns>=240?ns-240:ns+120,os,as),hsl2rgb(ns,os,as),hsl2rgb(ns<120?ns+240:ns-120,os,as),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const ns=clampa(this.opacity);return`${ns===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${ns===1?")":`, ${ns})`}`}}));function clamph(ns){return ns=(ns||0)%360,ns<0?ns+360:ns}function clampt(ns){return Math.max(0,Math.min(1,ns||0))}function hsl2rgb(ns,ts,rs){return(ns<60?ts+(rs-ts)*ns/60:ns<180?rs:ns<240?ts+(rs-ts)*(240-ns)/60:ts)*255}const constant$2=ns=>()=>ns;function linear$2(ns,ts){return function(rs){return ns+rs*ts}}function exponential(ns,ts,rs){return ns=Math.pow(ns,rs),ts=Math.pow(ts,rs)-ns,rs=1/rs,function(as){return Math.pow(ns+as*ts,rs)}}function gamma(ns){return(ns=+ns)==1?nogamma:function(ts,rs){return rs-ts?exponential(ts,rs,ns):constant$2(isNaN(ts)?rs:ts)}}function nogamma(ns,ts){var rs=ts-ns;return rs?linear$2(ns,rs):constant$2(isNaN(ns)?ts:ns)}const rgb=function ns(ts){var rs=gamma(ts);function as(os,is){var us=rs((os=rgb$1(os)).r,(is=rgb$1(is)).r),ls=rs(os.g,is.g),fs=rs(os.b,is.b),hs=nogamma(os.opacity,is.opacity);return function(vs){return os.r=us(vs),os.g=ls(vs),os.b=fs(vs),os.opacity=hs(vs),os+""}}return as.gamma=ns,as}(1);function numberArray(ns,ts){ts||(ts=[]);var rs=ns?Math.min(ts.length,ns.length):0,as=ts.slice(),os;return function(is){for(os=0;os<rs;++os)as[os]=ns[os]*(1-is)+ts[os]*is;return as}}function isNumberArray(ns){return ArrayBuffer.isView(ns)&&!(ns instanceof DataView)}function interpolateArray(ns,ts){return(isNumberArray(ts)?numberArray:genericArray)(ns,ts)}function genericArray(ns,ts){var rs=ts?ts.length:0,as=ns?Math.min(rs,ns.length):0,os=new Array(as),is=new Array(rs),us;for(us=0;us<as;++us)os[us]=interpolate(ns[us],ts[us]);for(;us<rs;++us)is[us]=ts[us];return function(ls){for(us=0;us<as;++us)is[us]=os[us](ls);return is}}function date(ns,ts){var rs=new Date;return ns=+ns,ts=+ts,function(as){return rs.setTime(ns*(1-as)+ts*as),rs}}function number$1(ns,ts){return ns=+ns,ts=+ts,function(rs){return ns*(1-rs)+ts*rs}}function object$1(ns,ts){var rs={},as={},os;(ns===null||typeof ns!="object")&&(ns={}),(ts===null||typeof ts!="object")&&(ts={});for(os in ts)os in ns?rs[os]=interpolate(ns[os],ts[os]):as[os]=ts[os];return function(is){for(os in rs)as[os]=rs[os](is);return as}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(ns){return function(){return ns}}function one(ns){return function(ts){return ns(ts)+""}}function string$1(ns,ts){var rs=reA.lastIndex=reB.lastIndex=0,as,os,is,us=-1,ls=[],fs=[];for(ns=ns+"",ts=ts+"";(as=reA.exec(ns))&&(os=reB.exec(ts));)(is=os.index)>rs&&(is=ts.slice(rs,is),ls[us]?ls[us]+=is:ls[++us]=is),(as=as[0])===(os=os[0])?ls[us]?ls[us]+=os:ls[++us]=os:(ls[++us]=null,fs.push({i:us,x:number$1(as,os)})),rs=reB.lastIndex;return rs<ts.length&&(is=ts.slice(rs),ls[us]?ls[us]+=is:ls[++us]=is),ls.length<2?fs[0]?one(fs[0].x):zero(ts):(ts=fs.length,function(hs){for(var vs=0,gs;vs<ts;++vs)ls[(gs=fs[vs]).i]=gs.x(hs);return ls.join("")})}function interpolate(ns,ts){var rs=typeof ts,as;return ts==null||rs==="boolean"?constant$2(ts):(rs==="number"?number$1:rs==="string"?(as=color$2(ts))?(ts=as,rgb):string$1:ts instanceof color$2?rgb:ts instanceof Date?date:isNumberArray(ts)?numberArray:Array.isArray(ts)?genericArray:typeof ts.valueOf!="function"&&typeof ts.toString!="function"||isNaN(ts)?object$1:number$1)(ns,ts)}function linear$1(ns){return+ns}function quadIn(ns){return ns*ns}function quadOut(ns){return ns*(2-ns)}function quadInOut(ns){return((ns*=2)<=1?ns*ns:--ns*(2-ns)+1)/2}function cubicIn(ns){return ns*ns*ns}function cubicOut(ns){return--ns*ns*ns+1}function cubicInOut(ns){return((ns*=2)<=1?ns*ns*ns:(ns-=2)*ns*ns+2)/2}var exponent=3,polyIn=function ns(ts){ts=+ts;function rs(as){return Math.pow(as,ts)}return rs.exponent=ns,rs}(exponent),polyOut=function ns(ts){ts=+ts;function rs(as){return 1-Math.pow(1-as,ts)}return rs.exponent=ns,rs}(exponent),polyInOut=function ns(ts){ts=+ts;function rs(as){return((as*=2)<=1?Math.pow(as,ts):2-Math.pow(2-as,ts))/2}return rs.exponent=ns,rs}(exponent),pi$1=Math.PI,halfPi=pi$1/2;function sinIn(ns){return+ns==1?1:1-Math.cos(ns*halfPi)}function sinOut(ns){return Math.sin(ns*halfPi)}function sinInOut(ns){return(1-Math.cos(pi$1*ns))/2}function tpmt(ns){return(Math.pow(2,-10*ns)-.0009765625)*1.0009775171065494}function expIn(ns){return tpmt(1-+ns)}function expOut(ns){return 1-tpmt(ns)}function expInOut(ns){return((ns*=2)<=1?tpmt(1-ns):2-tpmt(ns-1))/2}function circleIn(ns){return 1-Math.sqrt(1-ns*ns)}function circleOut(ns){return Math.sqrt(1- --ns*ns)}function circleInOut(ns){return((ns*=2)<=1?1-Math.sqrt(1-ns*ns):Math.sqrt(1-(ns-=2)*ns)+1)/2}var b1=4/11,b2=6/11,b3=8/11,b4=3/4,b5=9/11,b6=10/11,b7=15/16,b8=21/22,b9=63/64,b0=1/b1/b1;function bounceIn(ns){return 1-bounceOut(1-ns)}function bounceOut(ns){return(ns=+ns)<b1?b0*ns*ns:ns<b3?b0*(ns-=b2)*ns+b4:ns<b6?b0*(ns-=b5)*ns+b7:b0*(ns-=b8)*ns+b9}function bounceInOut(ns){return((ns*=2)<=1?1-bounceOut(1-ns):bounceOut(ns-1)+1)/2}var overshoot=1.70158,backIn=function ns(ts){ts=+ts;function rs(as){return(as=+as)*as*(ts*(as-1)+as)}return rs.overshoot=ns,rs}(overshoot),backOut=function ns(ts){ts=+ts;function rs(as){return--as*as*((as+1)*ts+as)+1}return rs.overshoot=ns,rs}(overshoot),backInOut=function ns(ts){ts=+ts;function rs(as){return((as*=2)<1?as*as*((ts+1)*as-ts):(as-=2)*as*((ts+1)*as+ts)+2)/2}return rs.overshoot=ns,rs}(overshoot),tau=2*Math.PI,amplitude=1,period=.3,elasticIn=function ns(ts,rs){var as=Math.asin(1/(ts=Math.max(1,ts)))*(rs/=tau);function os(is){return ts*tpmt(- --is)*Math.sin((as-is)/rs)}return os.amplitude=function(is){return ns(is,rs*tau)},os.period=function(is){return ns(ts,is)},os}(amplitude,period),elasticOut=function ns(ts,rs){var as=Math.asin(1/(ts=Math.max(1,ts)))*(rs/=tau);function os(is){return 1-ts*tpmt(is=+is)*Math.sin((is+as)/rs)}return os.amplitude=function(is){return ns(is,rs*tau)},os.period=function(is){return ns(ts,is)},os}(amplitude,period),elasticInOut=function ns(ts,rs){var as=Math.asin(1/(ts=Math.max(1,ts)))*(rs/=tau);function os(is){return((is=is*2-1)<0?ts*tpmt(-is)*Math.sin((as-is)/rs):2-ts*tpmt(is)*Math.sin((as+is)/rs))/2}return os.amplitude=function(is){return ns(is,rs*tau)},os.period=function(is){return ns(ts,is)},os}(amplitude,period);const d3Ease=Object.freeze(Object.defineProperty({__proto__:null,easeBack:backInOut,easeBackIn:backIn,easeBackInOut:backInOut,easeBackOut:backOut,easeBounce:bounceOut,easeBounceIn:bounceIn,easeBounceInOut:bounceInOut,easeBounceOut:bounceOut,easeCircle:circleInOut,easeCircleIn:circleIn,easeCircleInOut:circleInOut,easeCircleOut:circleOut,easeCubic:cubicInOut,easeCubicIn:cubicIn,easeCubicInOut:cubicInOut,easeCubicOut:cubicOut,easeElastic:elasticOut,easeElasticIn:elasticIn,easeElasticInOut:elasticInOut,easeElasticOut:elasticOut,easeExp:expInOut,easeExpIn:expIn,easeExpInOut:expInOut,easeExpOut:expOut,easeLinear:linear$1,easePoly:polyInOut,easePolyIn:polyIn,easePolyInOut:polyInOut,easePolyOut:polyOut,easeQuad:quadInOut,easeQuadIn:quadIn,easeQuadInOut:quadInOut,easeQuadOut:quadOut,easeSin:sinInOut,easeSinIn:sinIn,easeSinInOut:sinInOut,easeSinOut:sinOut},Symbol.toStringTag,{value:"Module"}));var EASING_MAP={};function getEasing(ns){return EASING_MAP[ns.toLowerCase()]||d3Ease[ns]}var isColorProp=function(ns){return["fill","stroke","fillStyle","strokeStyle"].includes(ns)},isGradientColor$1=function(ns){return/^[r,R,L,l]{1}[\s]*\(/.test(ns)},IDENTITY_MATRIX=[1,0,0,0,1,0,0,0,1];function _update(ns,ts,rs){var as={},os=ts.fromAttrs,is=ts.toAttrs;if(!ns.destroyed){var us;for(var ls in is)if(!isEqual$3(os[ls],is[ls]))if(ls==="path"){var fs=is[ls],hs=os[ls];fs.length>hs.length?(fs=parsePathString$2(is[ls]),hs=parsePathString$2(os[ls]),hs=fillPathByDiff(hs,fs),hs=formatPath(hs,fs),ts.fromAttrs.path=hs,ts.toAttrs.path=fs):ts.pathFormatted||(fs=parsePathString$2(is[ls]),hs=parsePathString$2(os[ls]),hs=formatPath(hs,fs),ts.fromAttrs.path=hs,ts.toAttrs.path=fs,ts.pathFormatted=!0),as[ls]=[];for(var vs=0;vs<fs.length;vs++){for(var gs=fs[vs],ys=hs[vs],xs=[],ms=0;ms<gs.length;ms++)isNumber$3(gs[ms])&&ys&&isNumber$3(ys[ms])?(us=interpolate(ys[ms],gs[ms]),xs.push(us(rs))):xs.push(gs[ms]);as[ls].push(xs)}}else if(ls==="matrix"){var Ss=interpolateArray(os[ls]||IDENTITY_MATRIX,is[ls]||IDENTITY_MATRIX),Ms=Ss(rs);as[ls]=Ms}else isColorProp(ls)&&isGradientColor$1(is[ls])?as[ls]=is[ls]:isFunction$2(is[ls])||(us=interpolate(os[ls],is[ls]),as[ls]=us(rs));ns.attr(as)}}function update(ns,ts,rs){var as=ts.startTime,os=ts.delay;if(rs<as+os||ts._paused)return!1;var is,us=ts.duration,ls=ts.easing,fs=getEasing(ls);if(rs=rs-as-ts.delay,ts.repeat)is=rs%us/us,is=fs(is);else if(is=rs/us,is<1)is=fs(is);else return ts.onFrame?ns.attr(ts.onFrame(1)):ns.attr(ts.toAttrs),!0;if(ts.onFrame){var hs=ts.onFrame(is);ns.attr(hs)}else _update(ns,ts,is);return!1}var Timeline=function(){function ns(ts){this.animators=[],this.current=0,this.timer=null,this.canvas=ts}return ns.prototype.initTimer=function(){var ts=this,rs=!1,as,os,is;this.timer=timer$1(function(us){if(ts.current=us,ts.animators.length>0){for(var ls=ts.animators.length-1;ls>=0;ls--){if(as=ts.animators[ls],as.destroyed){ts.removeAnimator(ls);continue}if(!as.isAnimatePaused()){os=as.get("animations");for(var fs=os.length-1;fs>=0;fs--)is=os[fs],rs=update(as,is,us),rs&&(os.splice(fs,1),rs=!1,is.callback&&is.callback())}os.length===0&&ts.removeAnimator(ls)}var hs=ts.canvas.get("autoDraw");hs||ts.canvas.draw()}})},ns.prototype.addAnimator=function(ts){this.animators.push(ts)},ns.prototype.removeAnimator=function(ts){this.animators.splice(ts,1)},ns.prototype.isAnimating=function(){return!!this.animators.length},ns.prototype.stop=function(){this.timer&&this.timer.stop()},ns.prototype.stopAllAnimations=function(ts){ts===void 0&&(ts=!0),this.animators.forEach(function(rs){rs.stopAnimate(ts)}),this.animators=[],this.canvas.draw()},ns.prototype.getTime=function(){return this.current},ns}(),CLICK_OFFSET=40,LEFT_BTN_CODE=0,EVENTS=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function emitTargetEvent(ns,ts,rs){rs.name=ts,rs.target=ns,rs.currentTarget=ns,rs.delegateTarget=ns,ns.emit(ts,rs)}function bubbleEvent(ns,ts,rs){if(rs.bubbles){var as=void 0,os=!1;if(ts==="mouseenter"?(as=rs.fromShape,os=!0):ts==="mouseleave"&&(os=!0,as=rs.toShape),ns.isCanvas()&&os)return;if(as&&isParent(ns,as)){rs.bubbles=!1;return}rs.name=ts,rs.currentTarget=ns,rs.delegateTarget=ns,ns.emit(ts,rs)}}var EventController$3=function(){function ns(ts){var rs=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(as){var os=as.type;rs._triggerEvent(os,as)},this._onDocumentMove=function(as){var os=rs.canvas,is=os.get("el");if(is!==as.target&&(rs.dragging||rs.currentShape)){var us=rs._getPointInfo(as);rs.dragging&&rs._emitEvent("drag",as,us,rs.draggingShape)}},this._onDocumentMouseUp=function(as){var os=rs.canvas,is=os.get("el");if(is!==as.target&&rs.dragging){var us=rs._getPointInfo(as);rs.draggingShape&&rs._emitEvent("drop",as,us,null),rs._emitEvent("dragend",as,us,rs.draggingShape),rs._afterDrag(rs.draggingShape,us,as)}},this.canvas=ts.canvas}return ns.prototype.init=function(){this._bindEvents()},ns.prototype._bindEvents=function(){var ts=this,rs=this.canvas.get("el");each$1(EVENTS,function(as){rs.addEventListener(as,ts._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},ns.prototype._clearEvents=function(){var ts=this,rs=this.canvas.get("el");each$1(EVENTS,function(as){rs.removeEventListener(as,ts._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},ns.prototype._getEventObj=function(ts,rs,as,os,is,us){var ls=new GraphEvent(ts,rs);return ls.fromShape=is,ls.toShape=us,ls.x=as.x,ls.y=as.y,ls.clientX=as.clientX,ls.clientY=as.clientY,ls.propagationPath.push(os),ls},ns.prototype._getShape=function(ts,rs){return this.canvas.getShape(ts.x,ts.y,rs)},ns.prototype._getPointInfo=function(ts){var rs=this.canvas,as=rs.getClientByEvent(ts),os=rs.getPointByEvent(ts);return{x:os.x,y:os.y,clientX:as.x,clientY:as.y}},ns.prototype._triggerEvent=function(ts,rs){var as=this._getPointInfo(rs),os=this._getShape(as,rs),is=this["_on"+ts],us=!1;if(is)is.call(this,as,os,rs);else{var ls=this.currentShape;ts==="mouseenter"||ts==="dragenter"||ts==="mouseover"?(this._emitEvent(ts,rs,as,null,null,os),os&&this._emitEvent(ts,rs,as,os,null,os),ts==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",rs,as,null)):ts==="mouseleave"||ts==="dragleave"||ts==="mouseout"?(us=!0,ls&&this._emitEvent(ts,rs,as,ls,ls,null),this._emitEvent(ts,rs,as,null,ls,null),ts==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",rs,as,null)):this._emitEvent(ts,rs,as,os,null,null)}if(us||(this.currentShape=os),os&&!os.get("destroyed")){var fs=this.canvas,hs=fs.get("el");hs.style.cursor=os.attr("cursor")||fs.get("cursor")}},ns.prototype._onmousedown=function(ts,rs,as){as.button===LEFT_BTN_CODE&&(this.mousedownShape=rs,this.mousedownPoint=ts,this.mousedownTimeStamp=as.timeStamp),this._emitEvent("mousedown",as,ts,rs,null,null)},ns.prototype._emitMouseoverEvents=function(ts,rs,as,os){var is=this.canvas.get("el");as!==os&&(as&&(this._emitEvent("mouseout",ts,rs,as,as,os),this._emitEvent("mouseleave",ts,rs,as,as,os),(!os||os.get("destroyed"))&&(is.style.cursor=this.canvas.get("cursor"))),os&&(this._emitEvent("mouseover",ts,rs,os,as,os),this._emitEvent("mouseenter",ts,rs,os,as,os)))},ns.prototype._emitDragoverEvents=function(ts,rs,as,os,is){os?(os!==as&&(as&&this._emitEvent("dragleave",ts,rs,as,as,os),this._emitEvent("dragenter",ts,rs,os,as,os)),is||this._emitEvent("dragover",ts,rs,os)):as&&this._emitEvent("dragleave",ts,rs,as,as,os),is&&this._emitEvent("dragover",ts,rs,os)},ns.prototype._afterDrag=function(ts,rs,as){ts&&(ts.set("capture",!0),this.draggingShape=null),this.dragging=!1;var os=this._getShape(rs,as);os!==ts&&this._emitMouseoverEvents(as,rs,ts,os),this.currentShape=os},ns.prototype._onmouseup=function(ts,rs,as){if(as.button===LEFT_BTN_CODE){var os=this.draggingShape;this.dragging?(os&&this._emitEvent("drop",as,ts,rs),this._emitEvent("dragend",as,ts,os),this._afterDrag(os,ts,as)):(this._emitEvent("mouseup",as,ts,rs),rs===this.mousedownShape&&this._emitEvent("click",as,ts,rs),this.mousedownShape=null,this.mousedownPoint=null)}},ns.prototype._ondragover=function(ts,rs,as){as.preventDefault();var os=this.currentShape;this._emitDragoverEvents(as,ts,os,rs,!0)},ns.prototype._onmousemove=function(ts,rs,as){var os=this.canvas,is=this.currentShape,us=this.draggingShape;if(this.dragging)us&&this._emitDragoverEvents(as,ts,is,rs,!1),this._emitEvent("drag",as,ts,us);else{var ls=this.mousedownPoint;if(ls){var fs=this.mousedownShape,hs=as.timeStamp,vs=hs-this.mousedownTimeStamp,gs=ls.clientX-ts.clientX,ys=ls.clientY-ts.clientY,xs=gs*gs+ys*ys;vs>120||xs>CLICK_OFFSET?fs&&fs.get("draggable")?(us=this.mousedownShape,us.set("capture",!1),this.draggingShape=us,this.dragging=!0,this._emitEvent("dragstart",as,ts,us),this.mousedownShape=null,this.mousedownPoint=null):!fs&&os.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",as,ts,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(as,ts,is,rs),this._emitEvent("mousemove",as,ts,rs)):(this._emitMouseoverEvents(as,ts,is,rs),this._emitEvent("mousemove",as,ts,rs))}else this._emitMouseoverEvents(as,ts,is,rs),this._emitEvent("mousemove",as,ts,rs)}},ns.prototype._emitEvent=function(ts,rs,as,os,is,us){var ls=this._getEventObj(ts,rs,as,os,is,us);if(os){ls.shape=os,emitTargetEvent(os,ts,ls);for(var fs=os.getParent();fs;)fs.emitDelegation(ts,ls),ls.propagationStopped||bubbleEvent(fs,ts,ls),ls.propagationPath.push(fs),fs=fs.getParent()}else{var hs=this.canvas;emitTargetEvent(hs,ts,ls)}},ns.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},ns}(),PX_SUFFIX="px",browser=detect(),isFirefox=browser&&browser.name==="firefox",Canvas$2=function(ns){__extends$x(ts,ns);function ts(rs){var as=ns.call(this,rs)||this;return as.initContainer(),as.initDom(),as.initEvents(),as.initTimeline(),as}return ts.prototype.getDefaultCfg=function(){var rs=ns.prototype.getDefaultCfg.call(this);return rs.cursor="default",rs.supportCSSTransform=!1,rs},ts.prototype.initContainer=function(){var rs=this.get("container");isString$2(rs)&&(rs=document.getElementById(rs),this.set("container",rs))},ts.prototype.initDom=function(){var rs=this.createDom();this.set("el",rs);var as=this.get("container");as.appendChild(rs),this.setDOMSize(this.get("width"),this.get("height"))},ts.prototype.initEvents=function(){var rs=new EventController$3({canvas:this});rs.init(),this.set("eventController",rs)},ts.prototype.initTimeline=function(){var rs=new Timeline(this);this.set("timeline",rs)},ts.prototype.setDOMSize=function(rs,as){var os=this.get("el");isBrowser&&(os.style.width=rs+PX_SUFFIX,os.style.height=as+PX_SUFFIX)},ts.prototype.changeSize=function(rs,as){this.setDOMSize(rs,as),this.set("width",rs),this.set("height",as),this.onCanvasChange("changeSize")},ts.prototype.getRenderer=function(){return this.get("renderer")},ts.prototype.getCursor=function(){return this.get("cursor")},ts.prototype.setCursor=function(rs){this.set("cursor",rs);var as=this.get("el");isBrowser&&as&&(as.style.cursor=rs)},ts.prototype.getPointByEvent=function(rs){var as=this.get("supportCSSTransform");if(as){if(isFirefox&&!isNil$2(rs.layerX)&&rs.layerX!==rs.offsetX)return{x:rs.layerX,y:rs.layerY};if(!isNil$2(rs.offsetX))return{x:rs.offsetX,y:rs.offsetY}}var os=this.getClientByEvent(rs),is=os.x,us=os.y;return this.getPointByClient(is,us)},ts.prototype.getClientByEvent=function(rs){var as=rs;return rs.touches&&(rs.type==="touchend"?as=rs.changedTouches[0]:as=rs.touches[0]),{x:as.clientX,y:as.clientY}},ts.prototype.getPointByClient=function(rs,as){var os=this.get("el"),is=os.getBoundingClientRect();return{x:rs-is.left,y:as-is.top}},ts.prototype.getClientByPoint=function(rs,as){var os=this.get("el"),is=os.getBoundingClientRect();return{x:rs+is.left,y:as+is.top}},ts.prototype.draw=function(){},ts.prototype.removeDom=function(){var rs=this.get("el");rs.parentNode.removeChild(rs)},ts.prototype.clearEvents=function(){var rs=this.get("eventController");rs.destroy()},ts.prototype.isCanvas=function(){return!0},ts.prototype.getParent=function(){return null},ts.prototype.destroy=function(){var rs=this.get("timeline");this.get("destroyed")||(this.clear(),rs&&rs.stop(),this.clearEvents(),this.removeDom(),ns.prototype.destroy.call(this))},ts}(Container$1),AbstractGroup=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.isGroup=function(){return!0},ts.prototype.isEntityGroup=function(){return!1},ts.prototype.clone=function(){for(var rs=ns.prototype.clone.call(this),as=this.getChildren(),os=0;os<as.length;os++){var is=as[os];rs.add(is.clone())}return rs},ts}(Container$1),AbstractShape=function(ns){__extends$x(ts,ns);function ts(rs){return ns.call(this,rs)||this}return ts.prototype._isInBBox=function(rs,as){var os=this.getBBox();return os.minX<=rs&&os.maxX>=rs&&os.minY<=as&&os.maxY>=as},ts.prototype.afterAttrsChange=function(rs){ns.prototype.afterAttrsChange.call(this,rs),this.clearCacheBBox()},ts.prototype.getBBox=function(){var rs=this.cfg.bbox;return rs||(rs=this.calculateBBox(),this.set("bbox",rs)),rs},ts.prototype.getCanvasBBox=function(){var rs=this.cfg.canvasBBox;return rs||(rs=this.calculateCanvasBBox(),this.set("canvasBBox",rs)),rs},ts.prototype.applyMatrix=function(rs){ns.prototype.applyMatrix.call(this,rs),this.set("canvasBBox",null)},ts.prototype.calculateCanvasBBox=function(){var rs=this.getBBox(),as=this.getTotalMatrix(),os=rs.minX,is=rs.minY,us=rs.maxX,ls=rs.maxY;if(as){var fs=multiplyVec2(as,[rs.minX,rs.minY]),hs=multiplyVec2(as,[rs.maxX,rs.minY]),vs=multiplyVec2(as,[rs.minX,rs.maxY]),gs=multiplyVec2(as,[rs.maxX,rs.maxY]);os=Math.min(fs[0],hs[0],vs[0],gs[0]),us=Math.max(fs[0],hs[0],vs[0],gs[0]),is=Math.min(fs[1],hs[1],vs[1],gs[1]),ls=Math.max(fs[1],hs[1],vs[1],gs[1])}var ys=this.attrs;if(ys.shadowColor){var xs=ys.shadowBlur,ms=xs===void 0?0:xs,Ss=ys.shadowOffsetX,Ms=Ss===void 0?0:Ss,$s=ys.shadowOffsetY,bs=$s===void 0?0:$s,Cs=os-ms+Ms,As=us+ms+Ms,Is=is-ms+bs,ks=ls+ms+bs;os=Math.min(os,Cs),us=Math.max(us,As),is=Math.min(is,Is),ls=Math.max(ls,ks)}return{x:os,y:is,minX:os,minY:is,maxX:us,maxY:ls,width:us-os,height:ls-is}},ts.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},ts.prototype.isClipShape=function(){return this.get("isClipShape")},ts.prototype.isInShape=function(rs,as){return!1},ts.prototype.isOnlyHitBox=function(){return!1},ts.prototype.isHit=function(rs,as){var os=this.get("startArrowShape"),is=this.get("endArrowShape"),us=[rs,as,1];us=this.invertFromMatrix(us);var ls=us[0],fs=us[1],hs=this._isInBBox(ls,fs);return this.isOnlyHitBox()?hs:!!(hs&&!this.isClipped(ls,fs)&&(this.isInShape(ls,fs)||os&&os.isHit(ls,fs)||is&&is.isHit(ls,fs)))},ts}(Element$1),cache$2=new Map;function register(ns,ts){cache$2.set(ns,ts)}function getMethod(ns){return cache$2.get(ns)}function rect(ns){var ts=ns.attr(),rs=ts.x,as=ts.y,os=ts.width,is=ts.height;return{x:rs,y:as,width:os,height:is}}function circle(ns){var ts=ns.attr(),rs=ts.x,as=ts.y,os=ts.r;return{x:rs-os,y:as-os,width:os*2,height:os*2}}function distance$4(ns,ts,rs,as){var os=ns-rs,is=ts-as;return Math.sqrt(os*os+is*is)}function isNumberEqual$1(ns,ts){return Math.abs(ns-ts)<.001}function getBBoxByArray(ns,ts){var rs=min$5(ns),as=min$5(ts),os=max$6(ns),is=max$6(ts);return{x:rs,y:as,width:os-rs,height:is-as}}function piMod(ns){return(ns+Math.PI*2)%(Math.PI*2)}const LineUtil={box:function(ns,ts,rs,as){return getBBoxByArray([ns,rs],[ts,as])},length:function(ns,ts,rs,as){return distance$4(ns,ts,rs,as)},pointAt:function(ns,ts,rs,as,os){return{x:(1-os)*ns+os*rs,y:(1-os)*ts+os*as}},pointDistance:function(ns,ts,rs,as,os,is){var us=(rs-ns)*(os-ns)+(as-ts)*(is-ts);if(us<0)return distance$4(ns,ts,os,is);var ls=(rs-ns)*(rs-ns)+(as-ts)*(as-ts);return us>ls?distance$4(rs,as,os,is):this.pointToLine(ns,ts,rs,as,os,is)},pointToLine:function(ns,ts,rs,as,os,is){var us=[rs-ns,as-ts];if(exactEquals(us,[0,0]))return Math.sqrt((os-ns)*(os-ns)+(is-ts)*(is-ts));var ls=[-us[1],us[0]];normalize$1(ls,ls);var fs=[os-ns,is-ts];return Math.abs(dot(fs,ls))},tangentAngle:function(ns,ts,rs,as){return Math.atan2(as-ts,rs-ns)}};var EPSILON=1e-4;function nearestPoint(ns,ts,rs,as,os,is){var us,ls=1/0,fs=[rs,as],hs=20;is&&is>200&&(hs=is/10);for(var vs=1/hs,gs=vs/10,ys=0;ys<=hs;ys++){var xs=ys*vs,ms=[os.apply(null,ns.concat([xs])),os.apply(null,ts.concat([xs]))],Ss=distance$4(fs[0],fs[1],ms[0],ms[1]);Ss<ls&&(us=xs,ls=Ss)}if(us===0)return{x:ns[0],y:ts[0]};if(us===1){var Ms=ns.length;return{x:ns[Ms-1],y:ts[Ms-1]}}ls=1/0;for(var ys=0;ys<32&&!(gs<EPSILON);ys++){var $s=us-gs,bs=us+gs,ms=[os.apply(null,ns.concat([$s])),os.apply(null,ts.concat([$s]))],Ss=distance$4(fs[0],fs[1],ms[0],ms[1]);if($s>=0&&Ss<ls)us=$s,ls=Ss;else{var Cs=[os.apply(null,ns.concat([bs])),os.apply(null,ts.concat([bs]))],As=distance$4(fs[0],fs[1],Cs[0],Cs[1]);bs<=1&&As<ls?(us=bs,ls=As):gs*=.5}}return{x:os.apply(null,ns.concat([us])),y:os.apply(null,ts.concat([us]))}}function snapLength(ns,ts){for(var rs=0,as=ns.length,os=0;os<as;os++){var is=ns[os],us=ts[os],ls=ns[(os+1)%as],fs=ts[(os+1)%as];rs+=distance$4(is,us,ls,fs)}return rs/2}function quadraticAt(ns,ts,rs,as){var os=1-as;return os*os*ns+2*as*os*ts+as*as*rs}function extrema$1(ns,ts,rs){var as=ns+rs-2*ts;if(isNumberEqual$1(as,0))return[.5];var os=(ns-ts)/as;return os<=1&&os>=0?[os]:[]}function derivativeAt$1(ns,ts,rs,as){return 2*(1-as)*(ts-ns)+2*as*(rs-ts)}function divideQuadratic(ns,ts,rs,as,os,is,us){var ls=quadraticAt(ns,rs,os,us),fs=quadraticAt(ts,as,is,us),hs=LineUtil.pointAt(ns,ts,rs,as,us),vs=LineUtil.pointAt(rs,as,os,is,us);return[[ns,ts,hs.x,hs.y,ls,fs],[ls,fs,vs.x,vs.y,os,is]]}function quadraticLength(ns,ts,rs,as,os,is,us){if(us===0)return(distance$4(ns,ts,rs,as)+distance$4(rs,as,os,is)+distance$4(ns,ts,os,is))/2;var ls=divideQuadratic(ns,ts,rs,as,os,is,.5),fs=ls[0],hs=ls[1];return fs.push(us-1),hs.push(us-1),quadraticLength.apply(null,fs)+quadraticLength.apply(null,hs)}const QuadUtil={box:function(ns,ts,rs,as,os,is){var us=extrema$1(ns,rs,os)[0],ls=extrema$1(ts,as,is)[0],fs=[ns,os],hs=[ts,is];return us!==void 0&&fs.push(quadraticAt(ns,rs,os,us)),ls!==void 0&&hs.push(quadraticAt(ts,as,is,ls)),getBBoxByArray(fs,hs)},length:function(ns,ts,rs,as,os,is){return quadraticLength(ns,ts,rs,as,os,is,3)},nearestPoint:function(ns,ts,rs,as,os,is,us,ls){return nearestPoint([ns,rs,os],[ts,as,is],us,ls,quadraticAt)},pointDistance:function(ns,ts,rs,as,os,is,us,ls){var fs=this.nearestPoint(ns,ts,rs,as,os,is,us,ls);return distance$4(fs.x,fs.y,us,ls)},interpolationAt:quadraticAt,pointAt:function(ns,ts,rs,as,os,is,us){return{x:quadraticAt(ns,rs,os,us),y:quadraticAt(ts,as,is,us)}},divide:function(ns,ts,rs,as,os,is,us){return divideQuadratic(ns,ts,rs,as,os,is,us)},tangentAngle:function(ns,ts,rs,as,os,is,us){var ls=derivativeAt$1(ns,rs,os,us),fs=derivativeAt$1(ts,as,is,us),hs=Math.atan2(fs,ls);return piMod(hs)}};function cubicAt(ns,ts,rs,as,os){var is=1-os;return is*is*is*ns+3*ts*os*is*is+3*rs*os*os*is+as*os*os*os}function derivativeAt(ns,ts,rs,as,os){var is=1-os;return 3*(is*is*(ts-ns)+2*is*os*(rs-ts)+os*os*(as-rs))}function extrema(ns,ts,rs,as){var os=-3*ns+9*ts-9*rs+3*as,is=6*ns-12*ts+6*rs,us=3*ts-3*ns,ls=[],fs,hs,vs;if(isNumberEqual$1(os,0))isNumberEqual$1(is,0)||(fs=-us/is,fs>=0&&fs<=1&&ls.push(fs));else{var gs=is*is-4*os*us;isNumberEqual$1(gs,0)?ls.push(-is/(2*os)):gs>0&&(vs=Math.sqrt(gs),fs=(-is+vs)/(2*os),hs=(-is-vs)/(2*os),fs>=0&&fs<=1&&ls.push(fs),hs>=0&&hs<=1&&ls.push(hs))}return ls}function divideCubic(ns,ts,rs,as,os,is,us,ls,fs){var hs=cubicAt(ns,rs,os,us,fs),vs=cubicAt(ts,as,is,ls,fs),gs=LineUtil.pointAt(ns,ts,rs,as,fs),ys=LineUtil.pointAt(rs,as,os,is,fs),xs=LineUtil.pointAt(os,is,us,ls,fs),ms=LineUtil.pointAt(gs.x,gs.y,ys.x,ys.y,fs),Ss=LineUtil.pointAt(ys.x,ys.y,xs.x,xs.y,fs);return[[ns,ts,gs.x,gs.y,ms.x,ms.y,hs,vs],[hs,vs,Ss.x,Ss.y,xs.x,xs.y,us,ls]]}function cubicLength(ns,ts,rs,as,os,is,us,ls,fs){if(fs===0)return snapLength([ns,rs,os,us],[ts,as,is,ls]);var hs=divideCubic(ns,ts,rs,as,os,is,us,ls,.5),vs=hs[0],gs=hs[1];return vs.push(fs-1),gs.push(fs-1),cubicLength.apply(null,vs)+cubicLength.apply(null,gs)}const CubicUtil={extrema,box:function(ns,ts,rs,as,os,is,us,ls){for(var fs=[ns,us],hs=[ts,ls],vs=extrema(ns,rs,os,us),gs=extrema(ts,as,is,ls),ys=0;ys<vs.length;ys++)fs.push(cubicAt(ns,rs,os,us,vs[ys]));for(var ys=0;ys<gs.length;ys++)hs.push(cubicAt(ts,as,is,ls,gs[ys]));return getBBoxByArray(fs,hs)},length:function(ns,ts,rs,as,os,is,us,ls){return cubicLength(ns,ts,rs,as,os,is,us,ls,3)},nearestPoint:function(ns,ts,rs,as,os,is,us,ls,fs,hs,vs){return nearestPoint([ns,rs,os,us],[ts,as,is,ls],fs,hs,cubicAt,vs)},pointDistance:function(ns,ts,rs,as,os,is,us,ls,fs,hs,vs){var gs=this.nearestPoint(ns,ts,rs,as,os,is,us,ls,fs,hs,vs);return distance$4(gs.x,gs.y,fs,hs)},interpolationAt:cubicAt,pointAt:function(ns,ts,rs,as,os,is,us,ls,fs){return{x:cubicAt(ns,rs,os,us,fs),y:cubicAt(ts,as,is,ls,fs)}},divide:function(ns,ts,rs,as,os,is,us,ls,fs){return divideCubic(ns,ts,rs,as,os,is,us,ls,fs)},tangentAngle:function(ns,ts,rs,as,os,is,us,ls,fs){var hs=derivativeAt(ns,rs,os,us,fs),vs=derivativeAt(ts,as,is,ls,fs);return piMod(Math.atan2(vs,hs))}};function copysign(ns,ts){var rs=Math.abs(ns);return ts>0?rs:rs*-1}const ellipse$1={box:function(ns,ts,rs,as){return{x:ns-rs,y:ts-as,width:rs*2,height:as*2}},length:function(ns,ts,rs,as){return Math.PI*(3*(rs+as)-Math.sqrt((3*rs+as)*(rs+3*as)))},nearestPoint:function(ns,ts,rs,as,os,is){var us=rs,ls=as;if(us===0||ls===0)return{x:ns,y:ts};for(var fs=os-ns,hs=is-ts,vs=Math.abs(fs),gs=Math.abs(hs),ys=us*us,xs=ls*ls,ms=Math.PI/4,Ss,Ms,$s=0;$s<4;$s++){Ss=us*Math.cos(ms),Ms=ls*Math.sin(ms);var bs=(ys-xs)*Math.pow(Math.cos(ms),3)/us,Cs=(xs-ys)*Math.pow(Math.sin(ms),3)/ls,As=Ss-bs,Is=Ms-Cs,ks=vs-bs,Ps=gs-Cs,Ds=Math.hypot(Is,As),Fs=Math.hypot(Ps,ks),Rs=Ds*Math.asin((As*Ps-Is*ks)/(Ds*Fs)),js=Rs/Math.sqrt(ys+xs-Ss*Ss-Ms*Ms);ms+=js,ms=Math.min(Math.PI/2,Math.max(0,ms))}return{x:ns+copysign(Ss,fs),y:ts+copysign(Ms,hs)}},pointDistance:function(ns,ts,rs,as,os,is){var us=this.nearestPoint(ns,ts,rs,as,os,is);return distance$4(us.x,us.y,os,is)},pointAt:function(ns,ts,rs,as,os){var is=2*Math.PI*os;return{x:ns+rs*Math.cos(is),y:ts+as*Math.sin(is)}},tangentAngle:function(ns,ts,rs,as,os){var is=2*Math.PI*os,us=Math.atan2(as*Math.cos(is),-rs*Math.sin(is));return piMod(us)}};function derivativeXAt(ns,ts,rs,as,os,is,us,ls){return-1*rs*Math.cos(os)*Math.sin(ls)-as*Math.sin(os)*Math.cos(ls)}function derivativeYAt(ns,ts,rs,as,os,is,us,ls){return-1*rs*Math.sin(os)*Math.sin(ls)+as*Math.cos(os)*Math.cos(ls)}function xExtrema(ns,ts,rs){return Math.atan(-ts/ns*Math.tan(rs))}function yExtrema(ns,ts,rs){return Math.atan(ts/(ns*Math.tan(rs)))}function xAt(ns,ts,rs,as,os,is){return rs*Math.cos(os)*Math.cos(is)-as*Math.sin(os)*Math.sin(is)+ns}function yAt(ns,ts,rs,as,os,is){return rs*Math.sin(os)*Math.cos(is)+as*Math.cos(os)*Math.sin(is)+ts}function getAngle(ns,ts,rs,as){var os=Math.atan2(as*ns,rs*ts);return(os+Math.PI*2)%(Math.PI*2)}function getPoint(ns,ts,rs){return{x:ns*Math.cos(rs),y:ts*Math.sin(rs)}}function rotate$1(ns,ts,rs){var as=Math.cos(rs),os=Math.sin(rs);return[ns*as-ts*os,ns*os+ts*as]}const EllipseArcUtil={box:function(ns,ts,rs,as,os,is,us){for(var ls=xExtrema(rs,as,os),fs=1/0,hs=-1/0,vs=[is,us],gs=-Math.PI*2;gs<=Math.PI*2;gs+=Math.PI){var ys=ls+gs;is<us?is<ys&&ys<us&&vs.push(ys):us<ys&&ys<is&&vs.push(ys)}for(var gs=0;gs<vs.length;gs++){var xs=xAt(ns,ts,rs,as,os,vs[gs]);xs<fs&&(fs=xs),xs>hs&&(hs=xs)}for(var ms=yExtrema(rs,as,os),Ss=1/0,Ms=-1/0,$s=[is,us],gs=-Math.PI*2;gs<=Math.PI*2;gs+=Math.PI){var bs=ms+gs;is<us?is<bs&&bs<us&&$s.push(bs):us<bs&&bs<is&&$s.push(bs)}for(var gs=0;gs<$s.length;gs++){var Cs=yAt(ns,ts,rs,as,os,$s[gs]);Cs<Ss&&(Ss=Cs),Cs>Ms&&(Ms=Cs)}return{x:fs,y:Ss,width:hs-fs,height:Ms-Ss}},length:function(ns,ts,rs,as,os,is,us){},nearestPoint:function(ns,ts,rs,as,os,is,us,ls,fs){var hs=rotate$1(ls-ns,fs-ts,-os),vs=hs[0],gs=hs[1],ys=ellipse$1.nearestPoint(0,0,rs,as,vs,gs),xs=getAngle(rs,as,ys.x,ys.y);xs<is?ys=getPoint(rs,as,is):xs>us&&(ys=getPoint(rs,as,us));var ms=rotate$1(ys.x,ys.y,os);return{x:ms[0]+ns,y:ms[1]+ts}},pointDistance:function(ns,ts,rs,as,os,is,us,ls,fs){var hs=this.nearestPoint(ns,ts,rs,as,ls,fs);return distance$4(hs.x,hs.y,ls,fs)},pointAt:function(ns,ts,rs,as,os,is,us,ls){var fs=(us-is)*ls+is;return{x:xAt(ns,ts,rs,as,os,fs),y:yAt(ns,ts,rs,as,os,fs)}},tangentAngle:function(ns,ts,rs,as,os,is,us,ls){var fs=(us-is)*ls+is,hs=derivativeXAt(ns,ts,rs,as,os,is,us,fs),vs=derivativeYAt(ns,ts,rs,as,os,is,us,fs);return piMod(Math.atan2(vs,hs))}};function analyzePoints(ns){for(var ts=0,rs=[],as=0;as<ns.length-1;as++){var os=ns[as],is=ns[as+1],us=distance$4(os[0],os[1],is[0],is[1]),ls={from:os,to:is,length:us};rs.push(ls),ts+=us}return{segments:rs,totalLength:ts}}function lengthOfSegment(ns){if(ns.length<2)return 0;for(var ts=0,rs=0;rs<ns.length-1;rs++){var as=ns[rs],os=ns[rs+1];ts+=distance$4(as[0],as[1],os[0],os[1])}return ts}function pointAtSegments(ns,ts){if(ts>1||ts<0||ns.length<2)return null;var rs=analyzePoints(ns),as=rs.segments,os=rs.totalLength;if(os===0)return{x:ns[0][0],y:ns[0][1]};for(var is=0,us=null,ls=0;ls<as.length;ls++){var fs=as[ls],hs=fs.from,vs=fs.to,gs=fs.length/os;if(ts>=is&&ts<=is+gs){var ys=(ts-is)/gs;us=LineUtil.pointAt(hs[0],hs[1],vs[0],vs[1],ys);break}is+=gs}return us}function angleAtSegments(ns,ts){if(ts>1||ts<0||ns.length<2)return 0;for(var rs=analyzePoints(ns),as=rs.segments,os=rs.totalLength,is=0,us=0,ls=0;ls<as.length;ls++){var fs=as[ls],hs=fs.from,vs=fs.to,gs=fs.length/os;if(ts>=is&&ts<=is+gs){us=Math.atan2(vs[1]-hs[1],vs[0]-hs[0]);break}is+=gs}return us}function distanceAtSegment(ns,ts,rs){for(var as=1/0,os=0;os<ns.length-1;os++){var is=ns[os],us=ns[os+1],ls=LineUtil.pointDistance(is[0],is[1],us[0],us[1],ts,rs);ls<as&&(as=ls)}return as}const PolylineUtil={box:function(ns){for(var ts=[],rs=[],as=0;as<ns.length;as++){var os=ns[as];ts.push(os[0]),rs.push(os[1])}return getBBoxByArray(ts,rs)},length:function(ns){return lengthOfSegment(ns)},pointAt:function(ns,ts){return pointAtSegments(ns,ts)},pointDistance:function(ns,ts,rs){return distanceAtSegment(ns,ts,rs)},tangentAngle:function(ns,ts){return angleAtSegments(ns,ts)}};function mergeBBox$1(ns,ts){return!ns||!ts?ns||ts:{minX:Math.min(ns.minX,ts.minX),minY:Math.min(ns.minY,ts.minY),maxX:Math.max(ns.maxX,ts.maxX),maxY:Math.max(ns.maxY,ts.maxY)}}function mergeArrowBBox(ns,ts){var rs=ns.get("startArrowShape"),as=ns.get("endArrowShape"),os=null,is=null;return rs&&(os=rs.getCanvasBBox(),ts=mergeBBox$1(ts,os)),as&&(is=as.getCanvasBBox(),ts=mergeBBox$1(ts,is)),ts}function polyline(ns){for(var ts=ns.attr(),rs=ts.points,as=[],os=[],is=0;is<rs.length;is++){var us=rs[is];as.push(us[0]),os.push(us[1])}var ls=getBBoxByArray(as,os),fs=ls.x,hs=ls.y,vs=ls.width,gs=ls.height,ys={minX:fs,minY:hs,maxX:fs+vs,maxY:hs+gs};return ys=mergeArrowBBox(ns,ys),{x:ys.minX,y:ys.minY,width:ys.maxX-ys.minX,height:ys.maxY-ys.minY}}function polygon(ns){for(var ts=ns.attr(),rs=ts.points,as=[],os=[],is=0;is<rs.length;is++){var us=rs[is];as.push(us[0]),os.push(us[1])}return getBBoxByArray(as,os)}var offScreenCtx=null;function getOffScreenContext(){if(!offScreenCtx){var ns=document.createElement("canvas");ns.width=1,ns.height=1,offScreenCtx=ns.getContext("2d")}return offScreenCtx}function getTextHeight(ns,ts,rs){var as=1;if(isString$2(ns)&&(as=ns.split(`
`).length),as>1){var os=getLineSpaceing(ts,rs);return ts*as+os*(as-1)}return ts}function getLineSpaceing(ns,ts){return ts?ts-ns:ns*.14}function getTextWidth(ns,ts){var rs=getOffScreenContext(),as=0;if(isNil$2(ns)||ns==="")return as;if(rs.save(),rs.font=ts,isString$2(ns)&&ns.includes(`
`)){var os=ns.split(`
`);each$1(os,function(is){var us=rs.measureText(is).width;as<us&&(as=us)})}else as=rs.measureText(ns).width;return rs.restore(),as}function assembleFont(ns){var ts=ns.fontSize,rs=ns.fontFamily,as=ns.fontWeight,os=ns.fontStyle,is=ns.fontVariant;return[os,is,as,ts+"px",rs].join(" ").trim()}function text(ns){var ts=ns.attr(),rs=ts.x,as=ts.y,os=ts.text,is=ts.fontSize,us=ts.lineHeight,ls=ts.font;ls||(ls=assembleFont(ts));var fs=getTextWidth(os,ls),hs;if(!fs)hs={x:rs,y:as,width:0,height:0};else{var vs=ts.textAlign,gs=ts.textBaseline,ys=getTextHeight(os,is,us),xs={x:rs,y:as-ys};vs&&(vs==="end"||vs==="right"?xs.x-=fs:vs==="center"&&(xs.x-=fs/2)),gs&&(gs==="top"?xs.y+=ys:gs==="middle"&&(xs.y+=ys/2)),hs={x:xs.x,y:xs.y,width:fs,height:ys}}return hs}var regexTags=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,regexDot=/[^\s\,]+/ig;function parsePath(ns){var ts=ns||[];if(isArray$2(ts))return ts;if(isString$2(ts))return ts=ts.match(regexTags),each$1(ts,function(rs,as){if(rs=rs.match(regexDot),rs[0].length>1){var os=rs[0].charAt(0);rs.splice(1,0,rs[0].substr(1)),rs[0]=os}each$1(rs,function(is,us){isNaN(is)||(rs[us]=+is)}),ts[as]=rs}),ts}function smoothBezier(ns,ts,rs,as){var os=[],is=!!as,us,ls,fs,hs,vs,gs,ys;if(is){fs=as[0],hs=as[1];for(var xs=0,ms=ns.length;xs<ms;xs+=1){var Ss=ns[xs];fs=min$2([0,0],fs,Ss),hs=max$3([0,0],hs,Ss)}}for(var xs=0,Ms=ns.length;xs<Ms;xs+=1){var Ss=ns[xs];if(xs===0&&!rs)ys=Ss;else if(xs===Ms-1&&!rs)gs=Ss,os.push(ys),os.push(gs);else{var $s=[xs?xs-1:Ms-1,xs-1][rs?0:1];us=ns[$s],ls=ns[rs?(xs+1)%Ms:xs+1];var bs=[0,0];bs=sub(bs,ls,us),bs=scale$2(bs,bs,ts);var Cs=distance$6(Ss,us),As=distance$6(Ss,ls),Is=Cs+As;Is!==0&&(Cs/=Is,As/=Is);var ks=scale$2([0,0],bs,-Cs),Ps=scale$2([0,0],bs,As);gs=add$1([0,0],Ss,ks),vs=add$1([0,0],Ss,Ps),vs=min$2([0,0],vs,max$3([0,0],ls,Ss)),vs=max$3([0,0],vs,min$2([0,0],ls,Ss)),ks=sub([0,0],vs,Ss),ks=scale$2([0,0],ks,-Cs/As),gs=add$1([0,0],Ss,ks),gs=min$2([0,0],gs,max$3([0,0],us,Ss)),gs=max$3([0,0],gs,min$2([0,0],us,Ss)),Ps=sub([0,0],Ss,gs),Ps=scale$2([0,0],Ps,As/Cs),vs=add$1([0,0],Ss,Ps),is&&(gs=max$3([0,0],gs,fs),gs=min$2([0,0],gs,hs),vs=max$3([0,0],vs,fs),vs=min$2([0,0],vs,hs)),os.push(ys),os.push(gs),ys=vs}}return rs&&os.push(os.shift()),os}function catmullRom2Bezier(ns,ts,rs){ts===void 0&&(ts=!1),rs===void 0&&(rs=[[0,0],[1,1]]);for(var as=!!ts,os=[],is=0,us=ns.length;is<us;is+=2)os.push([ns[is],ns[is+1]]);for(var ls=smoothBezier(os,.4,as,rs),fs=os.length,hs=[],vs,gs,ys,is=0;is<fs-1;is+=1)vs=ls[is*2],gs=ls[is*2+1],ys=os[is+1],hs.push(["C",vs[0],vs[1],gs[0],gs[1],ys[0],ys[1]]);return as&&(vs=ls[fs],gs=ls[fs+1],ys=os[0],hs.push(["C",vs[0],vs[1],gs[0],gs[1],ys[0],ys[1]])),hs}var SPACES=`	
\v\f\r   ᠎             　\u2028\u2029`,PATH_COMMAND=new RegExp("([a-z])["+SPACES+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+SPACES+"]*,?["+SPACES+"]*)+)","ig"),PATH_VALUES=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+SPACES+"]*,?["+SPACES+"]*","ig");function parsePathString$1(ns){if(!ns)return null;if(isArray$2(ns))return ns;var ts={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},rs=[];return String(ns).replace(PATH_COMMAND,function(as,os,is){var us=[],ls=os.toLowerCase();if(is.replace(PATH_VALUES,function(fs,hs){hs&&us.push(+hs)}),ls==="m"&&us.length>2&&(rs.push([os].concat(us.splice(0,2))),ls="l",os=os==="m"?"l":"L"),ls==="o"&&us.length===1&&rs.push([os,us[0]]),ls==="r")rs.push([os].concat(us));else for(;us.length>=ts[ls]&&(rs.push([os].concat(us.splice(0,ts[ls]))),!!ts[ls]););return""}),rs}var REGEX_MD=/[a-z]/;function toSymmetry$1(ns,ts){return[ts[0]+(ts[0]-ns[0]),ts[1]+(ts[1]-ns[1])]}function pathToAbsolute(ns){var ts=parsePathString$1(ns);if(!ts||!ts.length)return[["M",0,0]];for(var rs=!1,as=0;as<ts.length;as++){var os=ts[as][0];if(REGEX_MD.test(os)||["V","H","T","S"].indexOf(os)>=0){rs=!0;break}}if(!rs)return ts;var is=[],us=0,ls=0,fs=0,hs=0,vs=0,gs=ts[0];(gs[0]==="M"||gs[0]==="m")&&(us=+gs[1],ls=+gs[2],fs=us,hs=ls,vs++,is[0]=["M",us,ls]);for(var as=vs,ys=ts.length;as<ys;as++){var xs=ts[as],ms=is[as-1],Ss=[],os=xs[0],Ms=os.toUpperCase();if(os!==Ms)switch(Ss[0]=Ms,Ms){case"A":Ss[1]=xs[1],Ss[2]=xs[2],Ss[3]=xs[3],Ss[4]=xs[4],Ss[5]=xs[5],Ss[6]=+xs[6]+us,Ss[7]=+xs[7]+ls;break;case"V":Ss[1]=+xs[1]+ls;break;case"H":Ss[1]=+xs[1]+us;break;case"M":fs=+xs[1]+us,hs=+xs[2]+ls,Ss[1]=fs,Ss[2]=hs;break;default:for(var $s=1,bs=xs.length;$s<bs;$s++)Ss[$s]=+xs[$s]+($s%2?us:ls)}else Ss=ts[as];switch(Ms){case"Z":us=+fs,ls=+hs;break;case"H":us=Ss[1],Ss=["L",us,ls];break;case"V":ls=Ss[1],Ss=["L",us,ls];break;case"T":us=Ss[1],ls=Ss[2];var Cs=toSymmetry$1([ms[1],ms[2]],[ms[3],ms[4]]);Ss=["Q",Cs[0],Cs[1],us,ls];break;case"S":us=Ss[Ss.length-2],ls=Ss[Ss.length-1];var As=ms.length,Is=toSymmetry$1([ms[As-4],ms[As-3]],[ms[As-2],ms[As-1]]);Ss=["C",Is[0],Is[1],Ss[1],Ss[2],us,ls];break;case"M":fs=Ss[Ss.length-2],hs=Ss[Ss.length-1];break;default:us=Ss[Ss.length-2],ls=Ss[Ss.length-1]}is.push(Ss)}return is}function vMag$1(ns){return Math.sqrt(ns[0]*ns[0]+ns[1]*ns[1])}function vRatio$1(ns,ts){return vMag$1(ns)*vMag$1(ts)?(ns[0]*ts[0]+ns[1]*ts[1])/(vMag$1(ns)*vMag$1(ts)):1}function vAngle$1(ns,ts){return(ns[0]*ts[1]<ns[1]*ts[0]?-1:1)*Math.acos(vRatio$1(ns,ts))}function isSamePoint$1(ns,ts){return ns[0]===ts[0]&&ns[1]===ts[1]}function getArcParams$1(ns,ts){var rs=ts[1],as=ts[2],os=mod$3(toRadian$3(ts[3]),Math.PI*2),is=ts[4],us=ts[5],ls=ns[0],fs=ns[1],hs=ts[6],vs=ts[7],gs=Math.cos(os)*(ls-hs)/2+Math.sin(os)*(fs-vs)/2,ys=-1*Math.sin(os)*(ls-hs)/2+Math.cos(os)*(fs-vs)/2,xs=gs*gs/(rs*rs)+ys*ys/(as*as);xs>1&&(rs*=Math.sqrt(xs),as*=Math.sqrt(xs));var ms=rs*rs*(ys*ys)+as*as*(gs*gs),Ss=ms?Math.sqrt((rs*rs*(as*as)-ms)/ms):1;is===us&&(Ss*=-1),isNaN(Ss)&&(Ss=0);var Ms=as?Ss*rs*ys/as:0,$s=rs?Ss*-as*gs/rs:0,bs=(ls+hs)/2+Math.cos(os)*Ms-Math.sin(os)*$s,Cs=(fs+vs)/2+Math.sin(os)*Ms+Math.cos(os)*$s,As=[(gs-Ms)/rs,(ys-$s)/as],Is=[(-1*gs-Ms)/rs,(-1*ys-$s)/as],ks=vAngle$1([1,0],As),Ps=vAngle$1(As,Is);return vRatio$1(As,Is)<=-1&&(Ps=Math.PI),vRatio$1(As,Is)>=1&&(Ps=0),us===0&&Ps>0&&(Ps=Ps-2*Math.PI),us===1&&Ps<0&&(Ps=Ps+2*Math.PI),{cx:bs,cy:Cs,rx:isSamePoint$1(ns,[hs,vs])?0:rs,ry:isSamePoint$1(ns,[hs,vs])?0:as,startAngle:ks,endAngle:ks+Ps,xRotation:os,arcFlag:is,sweepFlag:us}}function toSymmetry(ns,ts){return[ts[0]+(ts[0]-ns[0]),ts[1]+(ts[1]-ns[1])]}function getSegments(ns){ns=parsePath(ns);for(var ts=[],rs=null,as=null,os=null,is=0,us=ns.length,ls=0;ls<us;ls++){var fs=ns[ls];as=ns[ls+1];var hs=fs[0],vs={command:hs,prePoint:rs,params:fs,startTangent:null,endTangent:null};switch(hs){case"M":os=[fs[1],fs[2]],is=ls;break;case"A":var gs=getArcParams$1(rs,fs);vs.arcParams=gs;break}if(hs==="Z")rs=os,as=ns[is+1];else{var ys=fs.length;rs=[fs[ys-2],fs[ys-1]]}as&&as[0]==="Z"&&(as=ns[is],ts[is]&&(ts[is].prePoint=rs)),vs.currentPoint=rs,ts[is]&&isSamePoint$1(rs,ts[is].currentPoint)&&(ts[is].prePoint=vs.prePoint);var xs=as?[as[as.length-2],as[as.length-1]]:null;vs.nextPoint=xs;var ms=vs.prePoint;if(["L","H","V"].includes(hs))vs.startTangent=[ms[0]-rs[0],ms[1]-rs[1]],vs.endTangent=[rs[0]-ms[0],rs[1]-ms[1]];else if(hs==="Q"){var Ss=[fs[1],fs[2]];vs.startTangent=[ms[0]-Ss[0],ms[1]-Ss[1]],vs.endTangent=[rs[0]-Ss[0],rs[1]-Ss[1]]}else if(hs==="T"){var Ms=ts[ls-1],Ss=toSymmetry(Ms.currentPoint,ms);Ms.command==="Q"?(vs.command="Q",vs.startTangent=[ms[0]-Ss[0],ms[1]-Ss[1]],vs.endTangent=[rs[0]-Ss[0],rs[1]-Ss[1]]):(vs.command="TL",vs.startTangent=[ms[0]-rs[0],ms[1]-rs[1]],vs.endTangent=[rs[0]-ms[0],rs[1]-ms[1]])}else if(hs==="C"){var $s=[fs[1],fs[2]],bs=[fs[3],fs[4]];vs.startTangent=[ms[0]-$s[0],ms[1]-$s[1]],vs.endTangent=[rs[0]-bs[0],rs[1]-bs[1]],vs.startTangent[0]===0&&vs.startTangent[1]===0&&(vs.startTangent=[$s[0]-bs[0],$s[1]-bs[1]]),vs.endTangent[0]===0&&vs.endTangent[1]===0&&(vs.endTangent=[bs[0]-$s[0],bs[1]-$s[1]])}else if(hs==="S"){var Ms=ts[ls-1],$s=toSymmetry(Ms.currentPoint,ms),bs=[fs[1],fs[2]];Ms.command==="C"?(vs.command="C",vs.startTangent=[ms[0]-$s[0],ms[1]-$s[1]],vs.endTangent=[rs[0]-bs[0],rs[1]-bs[1]]):(vs.command="SQ",vs.startTangent=[ms[0]-bs[0],ms[1]-bs[1]],vs.endTangent=[rs[0]-bs[0],rs[1]-bs[1]])}else if(hs==="A"){var Cs=.001,As=vs.arcParams||{},Is=As.cx,ks=Is===void 0?0:Is,Ps=As.cy,Ds=Ps===void 0?0:Ps,Fs=As.rx,Rs=Fs===void 0?0:Fs,js=As.ry,zs=js===void 0?0:js,Us=As.sweepFlag,Ys=Us===void 0?0:Us,Ks=As.startAngle,qs=Ks===void 0?0:Ks,_l=As.endAngle,Js=_l===void 0?0:_l;Ys===0&&(Cs*=-1);var Vs=Rs*Math.cos(qs-Cs)+ks,Zs=zs*Math.sin(qs-Cs)+Ds;vs.startTangent=[Vs-os[0],Zs-os[1]];var Sl=Rs*Math.cos(qs+Js+Cs)+ks,Il=zs*Math.sin(qs+Js-Cs)+Ds;vs.endTangent=[ms[0]-Sl,ms[1]-Il]}ts.push(vs)}return ts}function getPathBox(ns,ts){for(var rs=[],as=[],os=[],is=0;is<ns.length;is++){var us=ns[is],ls=us.currentPoint,fs=us.params,hs=us.prePoint,vs=void 0;switch(us.command){case"Q":vs=QuadUtil.box(hs[0],hs[1],fs[1],fs[2],fs[3],fs[4]);break;case"C":vs=CubicUtil.box(hs[0],hs[1],fs[1],fs[2],fs[3],fs[4],fs[5],fs[6]);break;case"A":var gs=us.arcParams;vs=EllipseArcUtil.box(gs.cx,gs.cy,gs.rx,gs.ry,gs.xRotation,gs.startAngle,gs.endAngle);break;default:rs.push(ls[0]),as.push(ls[1]);break}vs&&(us.box=vs,rs.push(vs.x,vs.x+vs.width),as.push(vs.y,vs.y+vs.height)),ts&&(us.command==="L"||us.command==="M")&&us.prePoint&&us.nextPoint&&os.push(us)}rs=rs.filter(function($s){return!Number.isNaN($s)&&$s!==1/0&&$s!==-1/0}),as=as.filter(function($s){return!Number.isNaN($s)&&$s!==1/0&&$s!==-1/0});var ys=min$5(rs),xs=min$5(as),ms=max$6(rs),Ss=max$6(as);if(os.length===0)return{x:ys,y:xs,width:ms-ys,height:Ss-xs};for(var is=0;is<os.length;is++){var us=os[is],ls=us.currentPoint,Ms=void 0;ls[0]===ys?(Ms=getExtraFromSegmentWithAngle(us,ts),ys=ys-Ms.xExtra):ls[0]===ms&&(Ms=getExtraFromSegmentWithAngle(us,ts),ms=ms+Ms.xExtra),ls[1]===xs?(Ms=getExtraFromSegmentWithAngle(us,ts),xs=xs-Ms.yExtra):ls[1]===Ss&&(Ms=getExtraFromSegmentWithAngle(us,ts),Ss=Ss+Ms.yExtra)}return{x:ys,y:xs,width:ms-ys,height:Ss-xs}}function getExtraFromSegmentWithAngle(ns,ts){var rs=ns.prePoint,as=ns.currentPoint,os=ns.nextPoint,is=Math.pow(as[0]-rs[0],2)+Math.pow(as[1]-rs[1],2),us=Math.pow(as[0]-os[0],2)+Math.pow(as[1]-os[1],2),ls=Math.pow(rs[0]-os[0],2)+Math.pow(rs[1]-os[1],2),fs=Math.acos((is+us-ls)/(2*Math.sqrt(is)*Math.sqrt(us)));if(!fs||Math.sin(fs)===0||isNumberEqual$2(fs,0))return{xExtra:0,yExtra:0};var hs=Math.abs(Math.atan2(os[1]-as[1],os[0]-as[0])),vs=Math.abs(Math.atan2(os[0]-as[0],os[1]-as[1]));hs=hs>Math.PI/2?Math.PI-hs:hs,vs=vs>Math.PI/2?Math.PI-vs:vs;var gs={xExtra:Math.cos(fs/2-hs)*(ts/2*(1/Math.sin(fs/2)))-ts/2||0,yExtra:Math.cos(vs-fs/2)*(ts/2*(1/Math.sin(fs/2)))-ts/2||0};return gs}function path(ns){var ts=ns.attr(),rs=ts.path,as=ts.stroke,os=as?ts.lineWidth:0,is=ns.get("segments")||getSegments(rs),us=getPathBox(is,os),ls=us.x,fs=us.y,hs=us.width,vs=us.height,gs={minX:ls,minY:fs,maxX:ls+hs,maxY:fs+vs};return gs=mergeArrowBBox(ns,gs),{x:gs.minX,y:gs.minY,width:gs.maxX-gs.minX,height:gs.maxY-gs.minY}}function line(ns){var ts=ns.attr(),rs=ts.x1,as=ts.y1,os=ts.x2,is=ts.y2,us=Math.min(rs,os),ls=Math.max(rs,os),fs=Math.min(as,is),hs=Math.max(as,is),vs={minX:us,maxX:ls,minY:fs,maxY:hs};return vs=mergeArrowBBox(ns,vs),{x:vs.minX,y:vs.minY,width:vs.maxX-vs.minX,height:vs.maxY-vs.minY}}function ellipse(ns){var ts=ns.attr(),rs=ts.x,as=ts.y,os=ts.rx,is=ts.ry;return{x:rs-os,y:as-is,width:os*2,height:is*2}}register("rect",rect);register("image",rect);register("circle",circle);register("marker",circle);register("polyline",polyline);register("polygon",polygon);register("text",text);register("path",path);register("line",line);register("ellipse",ellipse);var G6GraphEvent$1=function(ns){__extends$x(ts,ns);function ts(rs,as){var os=ns.call(this,rs,as)||this;return os.item=as.item,os.canvasX=as.canvasX,os.canvasY=as.canvasY,os.wheelDelta=as.wheelDelta,os.detail=as.detail,os}return ts}(GraphEvent),uniqueId$3=function(ts){return"".concat(ts,"-").concat(Math.random()).concat(Date.now())},formatPadding$1=function(ts){if(isArray$2(ts))switch(ts.length){case 4:return ts;case 3:return ts.push(ts[1]),ts;case 2:return ts.concat(ts);case 1:return[ts[0],ts[0],ts[0],ts[0]];default:return[0,0,0,0]}if(isNumber$3(ts))return[ts,ts,ts,ts];if(isString$2(ts)){var rs=parseInt(ts,10);return[rs,rs,rs,rs]}return[0,0,0,0]},cloneEvent$3=function(ts){var rs=new G6GraphEvent$1(ts.type,ts);return rs.clientX=ts.clientX,rs.clientY=ts.clientY,rs.x=ts.x,rs.y=ts.y,rs.target=ts.target,rs.currentTarget=ts.currentTarget,rs.bubbles=!0,rs.item=ts.item,rs},isViewportChanged$2=function(ts){if(!ts)return!1;for(var rs=9,as=[1,0,0,0,1,0,0,0,1],os=0;os<rs;os++)if(ts[os]!==as[os])return!0;return!1},isNaN$3=function(ts){return Number.isNaN(Number(ts))},calculationItemsBBox$2=function(ts){for(var rs=1/0,as=-1/0,os=1/0,is=-1/0,us=0;us<ts.length;us++){var ls=ts[us],fs=ls.getBBox(),hs=fs.minX,vs=fs.minY,gs=fs.maxX,ys=fs.maxY;hs<rs&&(rs=hs),vs<os&&(os=vs),gs>as&&(as=gs),ys>is&&(is=ys)}var xs=Math.floor(rs),ms=Math.floor(os),Ss=Math.ceil(as)-Math.floor(rs),Ms=Math.ceil(is)-Math.floor(os);return{x:xs,y:ms,width:Ss,height:Ms,minX:rs,minY:os,maxX:as,maxY:is}},processParallelEdges$1=function(ts,rs,as,os,is){rs===void 0&&(rs=15),as===void 0&&(as="quadratic"),os===void 0&&(os=void 0),is===void 0&&(is=void 0);for(var us=ts.length,ls=rs*2,fs=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],hs={},vs=[],gs={},ys=0;ys<us;ys++){var xs=ts[ys],ms=xs.source,Ss=xs.target,Ms="".concat(ms,"-").concat(Ss);if(!vs[ys]){hs[Ms]||(hs[Ms]=[]),vs[ys]=!0,hs[Ms].push(xs);for(var $s=0;$s<us;$s++)if(ys!==$s){var bs=ts[$s],Cs=bs.source,As=bs.target;vs[$s]||(ms===As&&Ss===Cs?(hs[Ms].push(bs),vs[$s]=!0,gs["".concat(Cs,"|").concat(As,"|").concat(hs[Ms].length-1)]=!0):ms===Cs&&Ss===As&&(hs[Ms].push(bs),vs[$s]=!0))}}}for(var Is in hs)for(var ks=hs[Is],Ps=ks.length,Ds=0;Ds<Ps;Ds++){var Fs=ks[Ds];if(Fs.source===Fs.target){is&&(Fs.type=is),Fs.loopCfg={position:fs[Ds%8],dist:Math.floor(Ds/8)*20+50};continue}if(Ps===1&&os&&Fs.source!==Fs.target){Fs.type=os;continue}Fs.type=as;var Rs=(Ds%2===0?1:-1)*(gs["".concat(Fs.source,"|").concat(Fs.target,"|").concat(Ds)]?-1:1);Ps%2===1?Fs.curveOffset=Rs*Math.ceil(Ds/2)*ls:Fs.curveOffset=Rs*(Math.floor(Ds/2)*ls+rs)}return ts};const BaseUtil$1=Object.freeze(Object.defineProperty({__proto__:null,calculationItemsBBox:calculationItemsBBox$2,cloneEvent:cloneEvent$3,formatPadding:formatPadding$1,isNaN:isNaN$3,isViewportChanged:isViewportChanged$2,processParallelEdges:processParallelEdges$1,uniqueId:uniqueId$3},Symbol.toStringTag,{value:"Module"}));var ext={};const require$$0$6=getAugmentedNamespace(esm$1);Object.defineProperty(ext,"__esModule",{value:!0});var gl_matrix_1=require$$0$6;function leftTranslate$1(ns,ts,rs){var as=[0,0,0,0,0,0,0,0,0];return gl_matrix_1.mat3.fromTranslation(as,rs),gl_matrix_1.mat3.multiply(ns,as,ts)}ext.leftTranslate=leftTranslate$1;function leftRotate$1(ns,ts,rs){var as=[0,0,0,0,0,0,0,0,0];return gl_matrix_1.mat3.fromRotation(as,rs),gl_matrix_1.mat3.multiply(ns,as,ts)}ext.leftRotate=leftRotate$1;function leftScale$1(ns,ts,rs){var as=[0,0,0,0,0,0,0,0,0];return gl_matrix_1.mat3.fromScaling(as,rs),gl_matrix_1.mat3.multiply(ns,as,ts)}ext.leftScale=leftScale$1;function leftMultiply$1(ns,ts,rs){return gl_matrix_1.mat3.multiply(ns,rs,ts)}function transform$f(ns,ts){for(var rs=ns?[].concat(ns):[1,0,0,0,1,0,0,0,1],as=0,os=ts.length;as<os;as++){var is=ts[as];switch(is[0]){case"t":leftTranslate$1(rs,rs,[is[1],is[2]]);break;case"s":leftScale$1(rs,rs,[is[1],is[2]]);break;case"r":leftRotate$1(rs,rs,is[1]);break;case"m":leftMultiply$1(rs,rs,is[1]);break}}return rs}var transform_1=ext.transform=transform$f;function direction$1(ns,ts){return ns[0]*ts[1]-ts[0]*ns[1]}ext.direction=direction$1;function angleTo$1(ns,ts,rs){var as=gl_matrix_1.vec2.angle(ns,ts),os=direction$1(ns,ts)>=0;return rs?os?Math.PI*2-as:as:os?as:Math.PI*2-as}ext.angleTo=angleTo$1;function vertical$1(ns,ts,rs){return rs?(ns[0]=ts[1],ns[1]=-1*ts[0]):(ns[0]=-1*ts[1],ns[1]=ts[0]),ns}ext.vertical=vertical$1;var ViewController$1=function(){function ns(ts){this.destroyed=!1,this.graph=ts,this.destroyed=!1}return ns.prototype.getViewCenter=function(){var ts=this.getFormatPadding(),rs=this.graph,as=this.graph.get("width"),os=rs.get("height");return{x:(as-ts[1]-ts[3])/2+ts[3],y:(os-ts[0]-ts[2])/2+ts[0]}},ns.prototype.fitCenter=function(ts,rs){var as=this.graph,os=as.get("group"),is,us=as.getNodes();if(us.length>as.get("optimizeThreshold")){var ls=1/0,fs=1/0,hs=-1/0,vs=-1/0;us.forEach(function(As){var Is=As.getModel(),ks=Is.x,Ps=Is.y;ls>ks&&(ls=ks),fs>Ps&&(fs=Ps),hs<ks&&(hs=ks),vs<Ps&&(vs=Ps)});var gs=os.getMatrix()||[1,0,0,0,1,0,0,0,1],ys=applyMatrix$2({x:ls,y:fs},gs),xs=ys.x,ms=ys.y,Ss=applyMatrix$2({x:hs,y:vs},gs),Ms=Ss.x,$s=Ss.y;is={minX:xs,maxX:Ms,minY:ms,maxY:$s,width:Ms-xs,height:$s-ms,x:xs,y:ms}}else is=os.getCanvasBBox();if(!(is.width===0||is.height===0)){var bs=this.getViewCenter(),Cs={x:is.x+is.width/2,y:is.y+is.height/2};as.translate(bs.x-Cs.x,bs.y-Cs.y,ts,rs)}},ns.prototype.animatedFitView=function(ts,rs,as,os,is,us,ls,fs){var hs=this.graph;as=as||{duration:500,easing:"easeCubic"};var vs=[1,0,0,0,1,0,0,0,1],gs=os.x+is.x-us.x-os.minX,ys=os.y+is.y-us.y-os.minY;if(!(isNaN$3(gs)||isNaN$3(ys))){var xs=transform_1(vs,[["t",gs,ys]]);if(!fs){var ms=getAnimateCfgWithCallback({animateCfg:as,callback:function(){hs.emit("viewportchange",{action:"translate",matrix:xs})}});ts.animate(function(As){return{matrix:lerpArray(rs,xs,As)}},ms);return}var Ss=hs.get("minZoom"),Ms=hs.get("maxZoom"),$s=ls;Ss&&ls<Ss?($s=Ss,console.warn("fitview failed, ratio out of range, ratio: %f",ls,"graph minzoom has been used instead")):Ms&&ls>Ms&&($s=Ms,console.warn("fitview failed, ratio out of range, ratio: %f",ls,"graph maxzoom has been used instead"));var bs=transform_1(xs,[["t",-is.x,-is.y],["s",$s,$s],["t",is.x,is.y]]),Cs=getAnimateCfgWithCallback({animateCfg:as,callback:function(){ts.setMatrix(bs),hs.emit("viewportchange",{action:"translate",matrix:xs}),hs.emit("viewportchange",{action:"zoom",matrix:bs})}});ts.stopAnimate(),ts.setMatrix(rs),ts.animate(function(As){return{matrix:lerpArray(rs,bs,As)}},Cs)}},ns.prototype.fitView=function(ts,rs){var as=this.graph,os=this.getFormatPadding(),is=as.get("width"),us=as.get("height"),ls=as.get("group"),fs=ls.getMatrix()||[1,0,0,0,1,0,0,0,1];ls.resetMatrix();var hs,vs=as.getNodes();if(vs.length>as.get("optimizeThreshold")){var gs=1/0,ys=1/0,xs=-1/0,ms=-1/0;vs.forEach(function(ks){var Ps=ks.getModel(),Ds=Ps.x,Fs=Ps.y;gs>Ds&&(gs=Ds),ys>Fs&&(ys=Fs),xs<Ds&&(xs=Ds),ms<Fs&&(ms=Fs)}),hs={minX:gs,maxX:xs,minY:ys,maxY:ms,width:xs-gs,height:ms-ys,x:gs,y:ys}}else hs=ls.getCanvasBBox();if(!(hs.width===0||hs.height===0)){var Ss=this.getViewCenter(),Ms={x:hs.x+hs.width/2,y:hs.y+hs.height/2},$s=(is-os[1]-os[3])/hs.width,bs=(us-os[0]-os[2])/hs.height,Cs=$s;if($s>bs&&(Cs=bs),ts)this.animatedFitView(ls,fs,rs,hs,Ss,Ms,Cs,!0);else{var As=Ss.x-Ms.x,Is=Ss.y-Ms.y;if(isNaN$3(As)||isNaN$3(Is))return;as.translate(As,Is),as.zoom(Cs,Ss)||console.warn("zoom failed, ratio out of range, ratio: %f",Cs)}}},ns.prototype.fitViewByRules=function(ts,rs,as){var os=ts.onlyOutOfViewPort,is=os===void 0?!1:os,us=ts.direction,ls=us===void 0?"both":us,fs=ts.ratioRule,hs=fs===void 0?"min":fs,vs=this.graph,gs=this.getFormatPadding(),ys=vs.get("width"),xs=vs.get("height"),ms=vs.get("group"),Ss=ms.getMatrix()||[1,0,0,0,1,0,0,0,1];ms.resetMatrix();var Ms,$s=vs.getNodes();if($s.length>vs.get("optimizeThreshold")){var bs=1/0,Cs=1/0,As=-1/0,Is=-1/0;$s.forEach(function(Ys){var Ks=Ys.getModel(),qs=Ks.x,_l=Ks.y;bs>qs&&(bs=qs),Cs>_l&&(Cs=_l),As<qs&&(As=qs),Is<_l&&(Is=_l)}),Ms={minX:bs,maxX:As,minY:Cs,maxY:Is,width:As-bs,height:Is-Cs,x:bs,y:Cs}}else Ms=ms.getCanvasBBox();if(!(Ms.width===0||Ms.height===0)){var ks=this.getViewCenter(),Ps={x:Ms.x+Ms.width/2,y:Ms.y+Ms.height/2},Ds=(ys-gs[1]-gs[3])/Ms.width,Fs=(xs-gs[0]-gs[2])/Ms.height,Rs;if(ls==="x"?Rs=Ds:ls==="y"?Rs=Fs:Rs=hs==="max"?Math.max(Ds,Fs):Math.min(Ds,Fs),is&&(Rs=Rs<1?Rs:1),rs)this.animatedFitView(ms,Ss,as,Ms,ks,Ps,Rs,!0);else{var js=vs.getZoom(),zs=js*Rs,Us=vs.get("minZoom");zs<Us&&(zs=Us,console.warn("fitview failed, ratio out of range, ratio: %f",Rs,"graph minzoom has been used instead")),vs.translate(ks.x-Ps.x,ks.y-Ps.y),vs.zoomTo(zs,ks)}}},ns.prototype.getFormatPadding=function(){var ts=this.graph.get("fitViewPadding");return formatPadding$1(ts)},ns.prototype.focusPoint=function(ts,rs,as){var os=this,is=this.getViewCenter(),us=this.getPointByCanvas(is.x,is.y),ls=this.graph.get("group").getMatrix();if(ls||(ls=[1,0,0,0,1,0,0,0,1]),rs){var fs=(us.x-ts.x)*ls[0],hs=(us.y-ts.y)*ls[4],vs=0,gs=0,ys=0,xs=0;this.graph.get("canvas").animate(function(ms){ys=fs*ms,xs=hs*ms,os.graph.translate(ys-vs,xs-gs),vs=ys,gs=xs},__assign$h({},as))}else this.graph.translate((us.x-ts.x)*ls[0],(us.y-ts.y)*ls[4])},ns.prototype.getPointByCanvas=function(ts,rs){var as=this.graph.get("group").getMatrix();as||(as=[1,0,0,0,1,0,0,0,1]);var os=invertMatrix$1({x:ts,y:rs},as);return os},ns.prototype.getPointByClient=function(ts,rs){var as=this.graph.get("canvas"),os=as.getPointByClient(ts,rs);return this.getPointByCanvas(os.x,os.y)},ns.prototype.getClientByPoint=function(ts,rs){var as=this.graph.get("canvas"),os=this.getCanvasByPoint(ts,rs),is=as.getClientByPoint(os.x,os.y);return{x:is.x,y:is.y}},ns.prototype.getCanvasByPoint=function(ts,rs){var as=this.graph.get("group").getMatrix();return as||(as=[1,0,0,0,1,0,0,0,1]),applyMatrix$2({x:ts,y:rs},as)},ns.prototype.focus=function(ts,rs,as){if(isString$2(ts)&&(ts=this.graph.findById(ts)),ts){var os=0,is=0;if(ts.getType&&ts.getType()==="edge"){var us=ts.getSource().get("group").getMatrix(),ls=ts.getTarget().get("group").getMatrix();us&&ls?(os=(us[6]+ls[6])/2,is=(us[7]+ls[7])/2):(us||ls)&&(os=us?us[6]:ls[6],is=us?us[7]:ls[7])}else{var fs=ts.get("group"),hs=fs.getMatrix();hs||(hs=[1,0,0,0,1,0,0,0,1]),os=hs[6],is=hs[7]}this.focusPoint({x:os,y:is},rs,as)}},ns.prototype.focusItems=function(ts,rs,as,os){if(ts.length){var is=this.graph,us=this.getFormatPadding(),ls=is.get("width"),fs=is.get("height"),hs=is.get("group"),vs=hs.getMatrix()||[1,0,0,0,1,0,0,0,1];hs.resetMatrix();for(var gs={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},ys=0,xs=ts;ys<xs.length;ys++){var ms=xs[ys],Ss=ms.getBBox();Ss.minX<gs.minX&&(gs.minX=Ss.minX),Ss.minY<gs.minY&&(gs.minY=Ss.minY),Ss.maxX>gs.maxX&&(gs.maxX=Ss.maxX),Ss.maxY>gs.maxY&&(gs.maxY=Ss.maxY)}if(gs.x=gs.minX,gs.y=gs.minY,gs.width=gs.maxX-gs.minX,gs.height=gs.maxY-gs.minY,!(gs.width===0||gs.height===0)){var Ms=this.getViewCenter(),$s={x:gs.x+gs.width/2,y:gs.y+gs.height/2},bs=(ls-us[1]-us[3])/gs.width,Cs=(fs-us[0]-us[2])/gs.height,As=bs;bs>Cs&&(As=Cs),as?this.animatedFitView(hs,vs,os,gs,Ms,$s,As,rs):(is.translate(Ms.x-$s.x,Ms.y-$s.y),rs&&!is.zoom(As,Ms)&&console.warn("zoom failed, ratio out of range, ratio: %f",As))}}},ns.prototype.changeSize=function(ts,rs){var as=this.graph;if(!isNumber$3(ts)||!isNumber$3(rs))throw Error("invalid canvas width & height, please make sure width & height type is number");as.set({width:ts,height:rs});var os=as.get("canvas");os.changeSize(ts,rs);var is=as.get("plugins");is.forEach(function(us){us.get("gridContainer")&&us.positionInit()})},ns.prototype.destroy=function(){this.graph=null,this.destroyed=!1},ns}();function _typeof$d(ns){"@babel/helpers - typeof";return _typeof$d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ts){return typeof ts}:function(ts){return ts&&typeof Symbol=="function"&&ts.constructor===Symbol&&ts!==Symbol.prototype?"symbol":typeof ts},_typeof$d(ns)}function looseJSONParse$1(ns){if(typeof ns!="string")return ns;var ts=function(Ps){if(typeof Ps!="string")return Ps;try{return JSON.parse(Ps.trim())}catch{return Ps.trim()}},rs=ts(ns);if(typeof rs!="string")return rs;for(var as=function(Ps){return Ps[Ps.length-1]},os=ns.trim(),is=[],us=[],ls=function(){for(var Ps=[],Ds=0;Ds<arguments.length;Ds++)Ps[Ds]=arguments[Ds];return Ps.some(function(Fs){return as(us)===Fs})},fs=function(){return as(is)},hs=null,vs=0,gs="";vs<os.length;){var ys=os[vs],xs=ls('"',"'");if(!xs&&!ys.trim()){vs+=1;continue}var ms=os[vs-1]==="\\",Ss=ls("}"),Ms=ls("]"),$s=ls(","),bs=fs();if(xs)if(as(us)===ys&&!ms){us.pop();var Cs=ts(gs);bs.push(Cs),hs=Cs,gs=""}else gs+=ys;else if(Ms&&ys===",")gs&&(bs.push(ts(gs)),gs="");else if(Ss&&ys===":")us.push(","),gs&&(bs.push(gs),gs="");else if($s&&ys===",")gs&&(bs.push(ts(gs)),gs=""),us.pop();else if(ys==="}"&&(Ss||$s)){gs&&(bs.push(ts(gs)),gs=""),$s&&us.pop();for(var As={},Is=1;Is<bs.length;Is+=2)As[bs[Is-1]]=bs[Is];is.pop(),is.length&&as(is).push(As),us.pop(),hs=As}else ys==="]"&&Ms?(gs&&(bs.push(ts(gs)),gs=""),is.pop(),is.length&&as(is).push(bs),us.pop(),hs=bs):ys==="{"?(is.push([]),us.push("}")):ys==="["?(is.push([]),us.push("]")):ys==='"'?us.push('"'):ys==="'"?us.push("'"):gs+=ys;vs+=1}return hs||gs}var keyConvert$1=function(ts){return ts.split("-").reduce(function(rs,as){return rs+as.charAt(0).toUpperCase()+as.slice(1)})},xmlDataRenderer$1=function(ts){return function(rs){for(var as=ts.length,os=[],is=0,us="";is<as;)if(ts[is]==="{"&&ts[is+1]==="{")os.push(us),us="",is+=2;else if(ts[is]==="}"&&ts[is+1]==="}"){if(os.length){var ls=os.pop();us=get$2(rs,us,ls.endsWith("=")?'"{'.concat(us,'}"'):us),os.push(ls+us)}is+=2,us=""}else us+=ts[is],is+=1;return os.push(us),os.map(function(fs,hs){return os[hs-1]&&os[hs-1].endsWith("=")?'"{'.concat(fs,'}"'):fs}).join("")}};function parseXML$1(ns,ts){var rs={},as=ns.getAttributeNames&&ns.getAttributeNames()||[],os=ns.children&&Array.from(ns.children).map(function(ls){return parseXML$1(ls,ts)}),is={},us=ns.tagName?ns.tagName.toLowerCase():"group";return us==="text"&&(rs.text=ns.innerText),is.type=us,us==="img"&&(is.type="image"),Array.from(as).forEach(function(ls){var fs=keyConvert$1(ls),hs=ns.getAttribute(ls);try{if(fs==="style"||fs==="attrs"){var vs=looseJSONParse$1(hs);rs=__assign$h(__assign$h({},rs),vs)}else is[fs]=looseJSONParse$1(hs)}catch(gs){if(fs==="style")throw gs;is[fs]=hs}}),is.attrs=rs,ts&&ts.style&&is.name&&_typeof$d(ts.style[is.name])==="object"&&(is.attrs=__assign$h(__assign$h({},is.attrs),ts.style[is.name])),ts&&ts.style&&is.keyshape&&(is.attrs=__assign$h(__assign$h({},is.attrs),ts.style)),os.length&&(is.children=os),is}function getBBox$3(ns,ts,rs){var as=ns.attrs,os=as===void 0?{}:as,is={x:ts.x||0,y:ts.y||0,width:rs.width||0,height:rs.height||0},us,ls;switch(ns.type){case"maker":case"circle":os.r&&(ls=2*os.r,us=2*os.r);break;case"text":os.text&&(ls=getTextSize$2(os.text,os.fontSize||12)[0],us=16,is.y+=us,is.height=us,is.width=ls,ns.attrs=__assign$h({fontSize:12,fill:"#000"},os));break;default:os.width&&(ls=os.width),os.height&&(us=os.height)}return us>=0&&(is.height=us),ls>=0&&(is.width=ls),os.marginTop&&(is.y+=os.marginTop),os.marginLeft&&(is.x+=os.marginLeft),is}function generateTarget$1(ns,ts){var rs;ts===void 0&&(ts={x:0,y:0});var as=__assign$h({x:0,y:0,width:0,height:0},ts);if(!((rs=ns.children)===null||rs===void 0)&&rs.length){var os=ns.attrs,is=os===void 0?{}:os,us=is.marginTop,ls=__assign$h({},ts);us&&(ls.y+=us);for(var fs=0;fs<ns.children.length;fs++){ns.children[fs].attrs.key="".concat(is.key||"root"," -").concat(fs," ");var hs=generateTarget$1(ns.children[fs],ls);if(hs.bbox){var vs=hs.bbox;hs.attrs.next==="inline"?ls.x+=hs.bbox.width:ls.y+=hs.bbox.height,vs.width+vs.x>as.width&&(as.width=vs.width+vs.x),vs.height+vs.y>as.height&&(as.height=vs.height+vs.y)}}}return ns.bbox=getBBox$3(ns,ts,as),ns.attrs=__assign$h(__assign$h({},ns.attrs),ns.bbox),ns}function compareTwoTarget$1(ns,ts){var rs,as,os,is,us=(ns||{}).type,ls=((ts==null?void 0:ts.attrs)||{}).key;if(ls&&ns&&(ns.attrs.key=ls),!ns&&ts)return{action:"delete",val:ts,type:us,key:ls};if(ns&&!ts)return{action:"add",val:ns,type:us};if(!ns&&!ts)return{action:"same",type:us};var fs=[];if(((rs=ns.children)===null||rs===void 0?void 0:rs.length)>0||((as=ts.children)===null||as===void 0?void 0:as.length)>0)for(var hs=Math.max((os=ns.children)===null||os===void 0?void 0:os.length,(is=ts.children)===null||is===void 0?void 0:is.length),vs=ts.children||[],gs=ns.children||[],ys=0;ys<hs;ys+=1)fs.push(compareTwoTarget$1(gs[ys],vs[ys]));var xs=Object.keys(ts.attrs),ms=Object.keys(ns.attrs);return ts.type!==ns.type?{action:"restructure",nowTarget:ns,formerTarget:ts,key:ls,children:fs}:xs.filter(function(Ss){return Ss!=="children"}).some(function(Ss){return ns.attrs[Ss]!==ts.attrs[Ss]||!ms.includes(Ss)})?{action:"change",val:ns,children:fs,type:us,key:ls}:{action:"same",children:fs,type:us,key:ls}}function createNodeFromXML$1(ns){var ts={},rs=function(os){var is=typeof ns=="function"?ns(os):ns,us=xmlDataRenderer$1(is)(os),ls=document.createElement("div");ls.innerHTML=us;var fs=ls.children[0],hs=generateTarget$1(parseXML$1(fs,os));return ls.remove(),hs};return{draw:function(os,is){var us=rs(os),ls=is,fs=function hs(vs){var gs=vs.attrs,ys=gs===void 0?{}:gs,xs=vs.bbox,ms=vs.type,Ss=vs.children,Ms=__rest$2(vs,["attrs","bbox","type","children"]);if(vs.type!=="group"){var $s=is.addShape(vs.type,__assign$h({attrs:ys,origin:{bbox:xs,type:ms,children:Ss}},Ms));vs.keyshape&&(ls=$s)}vs.children&&vs.children.forEach(function(bs){return hs(bs)})};return fs(us),ts[os.id]=[us],ls},update:function(os,is){ts[os.id]||(ts[os.id]=[]);var us=is.getContainer(),ls=us.get("children"),fs=rs(os),hs=ts[os.id].pop(),vs=compareTwoTarget$1(fs,hs),gs=function ms(Ss){var Ms;Ss.type!=="group"&&us.addShape(Ss.type,{attrs:Ss.attrs}),!((Ms=Ss.children)===null||Ms===void 0)&&Ms.length&&Ss.children.map(function($s){return ms($s)})},ys=function ms(Ss){var Ms,$s=ls.find(function(bs){return bs.attrs.key===Ss.attrs.key});$s&&us.removeChild($s),!((Ms=Ss.children)===null||Ms===void 0)&&Ms.length&&Ss.children.map(function(bs){return ms(bs)})},xs=function ms(Ss){var Ms=Ss.key;if(Ss.type!=="group"){var $s=ls.find(function(Cs){return Cs.attrs.key===Ms});switch(Ss.action){case"change":if($s){var bs=Ss.val.keyshape?is.getOriginStyle():{};$s.attr(__assign$h(__assign$h({},bs),Ss.val.attrs))}break;case"add":gs(Ss.val);break;case"delete":ys(Ss.val);break;case"restructure":ys(Ss.formerTarget),gs(Ss.nowTarget);break}}Ss.children&&Ss.children.forEach(function(Cs){return ms(Cs)})};xs(vs),ts[os.id].push(fs)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var cache$1={};function ucfirst$1(ns){return cache$1[ns]||(cache$1[ns]=upperFirst$2(ns)),cache$1[ns]}var ShapeFactoryBase$1={defaultShapeType:"defaultType",className:null,getShape:function(ts){var rs=this,as=rs[ts]||rs[rs.defaultShapeType]||rs["simple-circle"];return as},draw:function(ts,rs,as){var os=this.getShape(ts);as.shapeMap={};var is=os.draw(rs,as);return os.afterDraw&&os.afterDraw(rs,as,is),is},baseUpdate:function(ts,rs,as,os){var is,us,ls=this.getShape(ts);ls.update&&(ls.mergeStyle=(is=ls.getOptions)===null||is===void 0?void 0:is.call(ls,rs,os),(us=ls.update)===null||us===void 0||us.call(ls,rs,as,os)),ls.afterUpdate&&ls.afterUpdate(rs,as)},setState:function(ts,rs,as,os){var is=this.getShape(ts);is.setState(rs,as,os)},shouldUpdate:function(ts){var rs=this.getShape(ts);return!!rs.update},getControlPoints:function(ts,rs){var as=this.getShape(ts);return as.getControlPoints(rs)},getAnchorPoints:function(ts,rs){var as=this.getShape(ts);return as.getAnchorPoints(rs)}},ShapeFramework$1={options:{},draw:function(ts,rs){return this.drawShape(ts,rs)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(ts){return ts.controlPoints},getAnchorPoints:function(ts){var rs=this.options.anchorPoints,as=ts.anchorPoints||rs;return as}},Shape$3=function(){function ns(){}return ns.registerFactory=function(ts,rs){var as=ucfirst$1(ts),os=ShapeFactoryBase$1,is=__assign$h(__assign$h({},os),rs);return ns[as]=is,is.className=as,is},ns.getFactory=function(ts){var rs=ucfirst$1(ts);return ns[rs]},ns.registerNode=function(ts,rs,as){var os=ns.Node,is;if(typeof rs=="string"||typeof rs=="function"){var us=createNodeFromXML$1(rs);is=__assign$h(__assign$h({},os.getShape("single-node")),us)}else if(rs.jsx){var ls=rs.jsx,us=createNodeFromXML$1(ls);is=__assign$h(__assign$h(__assign$h({},os.getShape("single-node")),us),rs)}else{os.getShape(as);var fs=as?os.getShape(as):ShapeFramework$1;is=__assign$h(__assign$h({},fs),rs)}return is.type=ts,is.itemType="node",os[ts]=is,is},ns.registerEdge=function(ts,rs,as){var os=ns.Edge,is=as?os.getShape(as):ShapeFramework$1,us=__assign$h(__assign$h({},is),rs);return us.type=ts,us.itemType="edge",os[ts]=us,us},ns.registerCombo=function(ts,rs,as){var os=ns.Combo,is=as?os.getShape(as):ShapeFramework$1,us=__assign$h(__assign$h({},is),rs);return us.type=ts,us.itemType="combo",os[ts]=us,us},ns}();Shape$3.registerFactory("node",{defaultShapeType:"circle"});Shape$3.registerFactory("edge",{defaultShapeType:"line"});Shape$3.registerFactory("combo",{defaultShapeType:"circle"});var CACHE_BBOX$5="bboxCache",CACHE_CANVAS_BBOX$3="bboxCanvasCache",ItemBase$1=function(){function ns(ts){this._cfg={},this.destroyed=!1,this.optimize=!1;var rs={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(rs,this.getDefaultCfg(),ts);var as=this.get("model"),os=as.id,is=this.get("type");typeof os>"u"?os=uniqueId$3(is):typeof os!="string"&&(os=String(os)),this.get("model").id=os,this.set("id",os);var us=ts.group;us&&(us.set("item",this),us.set("id",os)),this.init(),this.draw();var ls=as.shape||as.type||(is==="edge"?"line":"circle"),fs=this.get("shapeFactory");if(fs&&fs[ls]){var hs=fs[ls].options;if(hs&&hs.stateStyles){var vs=this.get("styles")||as.stateStyles;vs=deepMix$2({},hs.stateStyles,vs),this.set("styles",vs)}}}return ns.prototype.calculateBBox=function(){var ts=this.get("keyShape"),rs=this.get("group"),as=getBBox$4(ts,rs);return as.x=as.minX,as.y=as.minY,as.width=as.maxX-as.minX,as.height=as.maxY-as.minY,as.centerX=(as.minX+as.maxX)/2,as.centerY=(as.minY+as.maxY)/2,as},ns.prototype.calculateCanvasBBox=function(){var ts=this.get("keyShape"),rs=this.get("group"),as=getBBox$4(ts,rs);return as.x=as.minX,as.y=as.minY,as.width=as.maxX-as.minX,as.height=as.maxY-as.minY,as.centerX=(as.minX+as.maxX)/2,as.centerY=(as.minY+as.maxY)/2,as},ns.prototype.drawInner=function(){var ts=this,rs=ts.get("shapeFactory"),as=ts.get("group"),os=ts.get("model");as.clear();var is=os.visible;if(is!==void 0&&!is&&ts.changeVisibility(is),!!rs){ts.updatePosition(os);var us=ts.getShapeCfg(os),ls=us.type,fs=rs.draw(ls,us,as);fs&&(ts.set("keyShape",fs),fs.set("isKeyShape",!0),fs.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",ls),this.restoreStates(rs,ls)}},ns.prototype.setOriginStyle=function(){var ts=this.get("group"),rs=ts.get("children"),as=this.getKeyShape(),os=this,is=as.get("name");if(this.get("originStyle")){var xs=this.get("originStyle");is&&!xs[is]&&(xs[is]={});for(var ms=this.getCurrentStatesStyle(),Ss=function($s){var bs=rs[$s],Cs=bs.get("name"),As=bs.attr();if(Cs&&Cs!==is){var Is=ms[Cs];xs[Cs]||(xs[Cs]={}),Is?Object.keys(As).forEach(function(Ds){var Fs=As[Ds];Fs!==Is[Ds]&&(xs[Cs][Ds]=Fs)}):xs[Cs]=bs.get("type")!=="image"?clone$b(As):os.getShapeStyleByName(Cs)}else{var ks=bs.attr(),Ps={};Object.keys(ms).forEach(function(Ds){var Fs=ms[Ds];(Ds===is||!isPlainObject$3(Fs))&&(Ps[Ds]=Fs)}),Object.keys(ks).forEach(function(Ds){var Fs=ks[Ds];Ps[Ds]!==Fs&&(is?xs[is][Ds]=Fs:xs[Ds]=Fs)})}},ls=0;ls<rs.length;ls++)Ss(ls);delete xs.path,delete xs.matrix,delete xs.x,delete xs.y,xs[is]&&(delete xs[is].x,delete xs[is].y,delete xs[is].matrix,delete xs[is].path),os.set("originStyle",xs)}else{for(var us={},ls=0;ls<rs.length;ls++){var fs=rs[ls],hs=fs.get("type"),vs=fs.get("name");if(vs&&vs!==is)us[vs]=hs!=="image"?clone$b(fs.attr()):os.getShapeStyleByName(vs),hs==="text"&&us[vs]&&(delete us[vs].x,delete us[vs].y,delete us[vs].matrix);else{var gs=os.getShapeStyleByName();if(delete gs.path,delete gs.matrix,!is)Object.assign(us,gs);else if(vs)us[is]=gs;else{var ys=uniqueId$3("shape");fs.set("name",ys),ts.shapeMap[ys]=fs,us[ys]=hs!=="image"?clone$b(fs.attr()):os.getShapeStyleByName(vs)}}}os.set("originStyle",us)}},ns.prototype.restoreStates=function(ts,rs){var as=this,os=as.get("states");each$1(os,function(is){ts.setState(rs,is,!0,as)})},ns.prototype.init=function(){var ts=Shape$3.getFactory(this.get("type"));this.set("shapeFactory",ts)},ns.prototype.get=function(ts){return this._cfg[ts]},ns.prototype.set=function(ts,rs){isPlainObject$3(ts)?this._cfg=__assign$h(__assign$h({},this._cfg),ts):this._cfg[ts]=rs},ns.prototype.getDefaultCfg=function(){return{}},ns.prototype.clearCache=function(){this.set(CACHE_BBOX$5,null),this.set(CACHE_CANVAS_BBOX$3,null)},ns.prototype.beforeDraw=function(){},ns.prototype.afterDraw=function(){},ns.prototype.afterUpdate=function(){},ns.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},ns.prototype.getShapeStyleByName=function(ts){var rs=this.get("group"),as;if(ts?as=rs.shapeMap[ts]||rs.find(function(is){return is.get("name")===ts}):as=this.getKeyShape(),as){var os={};return each$1(as.attr(),function(is,us){(us!=="img"||isString$2(is))&&(os[us]=is)}),os}return{}},ns.prototype.getShapeCfg=function(ts,rs){var as=this.get("styles");if(as){var os=ts;return os.style=__assign$h(__assign$h({},as),ts.style),os}return ts},ns.prototype.getStateStyle=function(ts){var rs=this.get("styles"),as=rs&&rs[ts];return as},ns.prototype.getOriginStyle=function(){return this.get("originStyle")},ns.prototype.getCurrentStatesStyle=function(){var ts=this,rs={},as=ts.getStates();return!as||!as.length?this.get("originStyle"):(each$1(ts.getStates(),function(os){rs=Object.assign(rs,ts.getStateStyle(os))}),rs)},ns.prototype.setState=function(ts,rs){var as=this.get("states"),os=this.get("shapeFactory"),is=ts,us=ts;isString$2(rs)&&(is="".concat(ts,":").concat(rs),us="".concat(ts,":"));var ls=as;if(isBoolean$2(rs)){var fs=as.indexOf(us);if(rs){if(fs>-1)return;as.push(is)}else fs>-1&&as.splice(fs,1)}else if(isString$2(rs)){var hs=as.filter(function(ys){return ys.includes(us)});hs.length>0&&this.clearStates(hs),ls=ls.filter(function(ys){return!ys.includes(us)}),ls.push(is),this.set("states",ls)}if(os){var vs=this.get("model"),gs=vs.type;os.setState(gs,ts,rs,this)}},ns.prototype.clearStates=function(ts){var rs=this,as=rs.getStates(),os=rs.get("shapeFactory"),is=rs.get("model"),us=is.type;ts||(ts=as),isString$2(ts)&&(ts=[ts]);var ls=as.filter(function(fs){return ts.indexOf(fs)===-1});rs.set("states",ls),ts.forEach(function(fs){os.setState(us,fs,!1,rs)})},ns.prototype.setOptimize=function(ts){this.optimize=ts},ns.prototype.getContainer=function(){return this.get("group")},ns.prototype.getKeyShape=function(){return this.get("keyShape")},ns.prototype.getModel=function(){return this.get("model")},ns.prototype.getType=function(){return this.get("type")},ns.prototype.getID=function(){return this.get("id")},ns.prototype.isItem=function(){return!0},ns.prototype.getStates=function(){return this.get("states")},ns.prototype.hasState=function(ts){var rs=this.getStates();return rs.indexOf(ts)>=0},ns.prototype.refresh=function(ts){var rs=this.get("model");this.updatePosition(rs),this.updateShape(ts),this.afterUpdate(),this.clearCache()},ns.prototype.getUpdateType=function(ts){},ns.prototype.update=function(ts,rs){rs===void 0&&(rs=void 0);var as=this.get("model");if(rs==="move")this.updatePosition(ts);else{var os=as.visible,is=ts.visible;os!==is&&is!==void 0&&this.changeVisibility(is);var us={x:as.x,y:as.y};ts.x=isNaN(+ts.x)?as.x:+ts.x,ts.y=isNaN(+ts.y)?as.y:+ts.y;var ls=this.get("styles");if(ts.stateStyles){var fs=ts.stateStyles;mix$1(ls,fs),delete ts.stateStyles}Object.assign(as,ts),(us.x!==ts.x||us.y!==ts.y)&&this.updatePosition(ts),this.updateShape(rs)}this.afterUpdate(),this.clearCache()},ns.prototype.updateShape=function(ts){var rs=this.get("shapeFactory"),as=this.get("model"),os=as.type;if(rs.shouldUpdate(os)&&os===this.get("currentShape")){var is=this.getShapeCfg(as,ts);rs.baseUpdate(os,is,this,ts),ts!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(rs,os)},ns.prototype.updatePosition=function(ts){var rs=this.get("model"),as=isNaN(+ts.x)?+rs.x:+ts.x,os=isNaN(+ts.y)?+rs.y:+ts.y,is=this.get("group");if(isNaN(as)||isNaN(os))return!1;rs.x=as,rs.y=os;var us=is.getMatrix();return us&&us[6]===as&&us[7]===os?!1:(is.resetMatrix(),translate$1(is,{x:as,y:os}),this.clearCache(),!0)},ns.prototype.getBBox=function(){var ts=this.get(CACHE_BBOX$5);return ts||(ts=this.calculateBBox(),this.set(CACHE_BBOX$5,ts)),ts},ns.prototype.getCanvasBBox=function(){var ts=this.get(CACHE_CANVAS_BBOX$3);return ts||(ts=this.calculateCanvasBBox(),this.set(CACHE_CANVAS_BBOX$3,ts)),ts},ns.prototype.toFront=function(){var ts=this.get("group");ts.toFront()},ns.prototype.toBack=function(){var ts=this.get("group");ts.toBack()},ns.prototype.show=function(){this.changeVisibility(!0)},ns.prototype.hide=function(){this.changeVisibility(!1)},ns.prototype.changeVisibility=function(ts){var rs=this.get("group");ts?rs.show():rs.hide(),this.set("visible",ts)},ns.prototype.isVisible=function(){return this.get("visible")},ns.prototype.enableCapture=function(ts){var rs=this.get("group");rs&&rs.set("capture",ts)},ns.prototype.destroy=function(){if(!this.destroyed){var ts=this.get("animate"),rs=this.get("group");ts&&rs.stopAnimate(),rs.shapeMap={},this.clearCache(),rs.remove(),this._cfg=null,this.destroyed=!0}},ns}(),END_MAP$1={source:"start",target:"end"},ITEM_NAME_SUFFIX$1="Node",POINT_NAME_SUFFIX$1="Point",ANCHOR_NAME_SUFFIX$1="Anchor",Edge$2=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},ts.prototype.setEnd=function(rs,as){var os=END_MAP$1[rs]+POINT_NAME_SUFFIX$1,is=rs+ITEM_NAME_SUFFIX$1,us=this.get(is);us&&!us.destroyed&&us.removeEdge(this),isPlainObject$3(as)?(this.set(os,as),this.set(is,null)):as&&(as.addEdge(this),this.set(is,as),this.set(os,null))},ts.prototype.getLinkPoint=function(rs,as,os){var is=END_MAP$1[rs]+POINT_NAME_SUFFIX$1,us=rs+ITEM_NAME_SUFFIX$1,ls=this.get(is);if(!ls){var fs=this.get(us),hs=rs+ANCHOR_NAME_SUFFIX$1,vs=this.getPrePoint(rs,os),gs=as[hs];isNil$2(gs)||(ls=fs.getLinkPointByAnchor(gs)),ls=ls||fs.getLinkPoint(vs),isNil$2(ls.index)||this.set("".concat(rs,"AnchorIndex"),ls.index)}return ls},ts.prototype.getPrePoint=function(rs,as){if(as&&as.length){var os=rs==="source"?0:as.length-1;return as[os]}var is=rs==="source"?"target":"source";return this.getEndPoint(is)},ts.prototype.getEndPoint=function(rs){var as=rs+ITEM_NAME_SUFFIX$1,os=END_MAP$1[rs]+POINT_NAME_SUFFIX$1,is=this.get(as);return is&&!is.destroyed?is.get("model"):this.get(os)},ts.prototype.getControlPointsByCenter=function(rs){var as=this.getEndPoint("source"),os=this.getEndPoint("target"),is=this.get("shapeFactory"),us=rs.type;return is.getControlPoints(us,{startPoint:as,endPoint:os})},ts.prototype.getEndCenter=function(rs){var as=rs+ITEM_NAME_SUFFIX$1,os=END_MAP$1[rs]+POINT_NAME_SUFFIX$1,is=this.get(as);if(is){var us=is.getBBox();return{x:us.centerX,y:us.centerY}}return this.get(os)},ts.prototype.init=function(){ns.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},ts.prototype.getShapeCfg=function(rs,as){var os=this,is=os.get("linkCenter"),us=as!=null&&as.includes("move")?rs:ns.prototype.getShapeCfg.call(this,rs);if(is)us.startPoint=os.getEndCenter("source"),us.endPoint=os.getEndCenter("target");else{var ls=us.controlPoints||os.getControlPointsByCenter(us);us.startPoint=os.getLinkPoint("source",rs,ls),us.endPoint=os.getLinkPoint("target",rs,ls)}return us.sourceNode=os.get("sourceNode"),us.targetNode=os.get("targetNode"),us},ts.prototype.getModel=function(){var rs=this.get("model"),as=this.get("source".concat(ITEM_NAME_SUFFIX$1)),os=this.get("target".concat(ITEM_NAME_SUFFIX$1));return as?delete rs["source".concat(ITEM_NAME_SUFFIX$1)]:rs.source=this.get("start".concat(POINT_NAME_SUFFIX$1)),os?delete rs["target".concat(ITEM_NAME_SUFFIX$1)]:rs.target=this.get("end".concat(POINT_NAME_SUFFIX$1)),!isString$2(rs.source)&&!isPlainObject$3(rs.source)&&(rs.source=rs.source.getID()),!isString$2(rs.target)&&!isPlainObject$3(rs.target)&&(rs.target=rs.target.getID()),rs},ts.prototype.setSource=function(rs){this.setEnd("source",rs),this.set("source",rs)},ts.prototype.setTarget=function(rs){this.setEnd("target",rs),this.set("target",rs)},ts.prototype.getSource=function(){return this.get("source")},ts.prototype.getTarget=function(){return this.get("target")},ts.prototype.updatePosition=function(){return!1},ts.prototype.update=function(rs,as){as===void 0&&(as=void 0);var os=this.get("model"),is=os.visible,us=rs.visible;is!==us&&us!==void 0&&this.changeVisibility(us);var ls=this.get("source"),fs=this.get("target");if(!(!ls||ls.destroyed||!fs||fs.destroyed)){var hs=this.get("styles");if(rs.stateStyles){var vs=rs.stateStyles;mix$1(hs,vs),delete rs.stateStyles}Object.assign(os,rs),this.updateShape(as),this.afterUpdate(),this.clearCache()}},ts.prototype.destroy=function(){var rs=this.get("source".concat(ITEM_NAME_SUFFIX$1)),as=this.get("target".concat(ITEM_NAME_SUFFIX$1));rs&&!rs.destroyed&&rs.removeEdge(this),as&&!as.destroyed&&as.removeEdge(this),ns.prototype.destroy.call(this)},ts}(ItemBase$1),CACHE_ANCHOR_POINTS$3="anchorPointsCache",CACHE_BBOX$4="bboxCache",Node$2=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getNearestPoint=function(rs,as){for(var os=0,is=rs[0],us=distance$5(rs[0],as),ls=0;ls<rs.length;ls++){var fs=rs[ls],hs=distance$5(fs,as);hs<us&&(is=fs,us=hs,os=ls)}return is.anchorIndex=os,is},ts.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},ts.prototype.getEdges=function(){return this.get("edges")},ts.prototype.getInEdges=function(){var rs=this;return this.get("edges").filter(function(as){return as.get("target")===rs})},ts.prototype.getOutEdges=function(){var rs=this;return this.get("edges").filter(function(as){return as.get("source")===rs})},ts.prototype.getNeighbors=function(rs){var as=this,os=this.get("edges");if(rs==="target"){var is=function(hs){return hs.getSource()===as};return os.filter(is).map(function(fs){return fs.getTarget()})}if(rs==="source"){var us=function(hs){return hs.getTarget()===as};return os.filter(us).map(function(fs){return fs.getSource()})}var ls=function(hs){return hs.getSource()===as?hs.getTarget():hs.getSource()};return os.map(ls)},ts.prototype.getLinkPointByAnchor=function(rs){var as=this.getAnchorPoints();return as[rs]},ts.prototype.getLinkPoint=function(rs){var as=this.get("keyShape"),os=as.get("type"),is=this.get("type"),us,ls,fs=this.getBBox();is==="combo"?(us=fs.centerX||(fs.maxX+fs.minX)/2,ls=fs.centerY||(fs.maxY+fs.minY)/2):(us=fs.centerX,ls=fs.centerY);var hs=this.getAnchorPoints(),vs;switch(os){case"circle":vs=getCircleIntersectByPoint$1({x:us,y:ls,r:fs.width/2},rs);break;case"ellipse":vs=getEllipseIntersectByPoint$1({x:us,y:ls,rx:fs.width/2,ry:fs.height/2},rs);break;default:vs=getRectIntersectByPoint$1(fs,rs)}var gs=vs;return hs.length&&(gs||(gs=rs),gs=this.getNearestPoint(hs,gs)),gs||(gs={x:us,y:ls}),gs},ts.prototype.getAnchorPoints=function(){var rs=this.get(CACHE_ANCHOR_POINTS$3);if(!rs){rs=[];var as=this.get("shapeFactory"),os=this.getBBox(),is=this.get("model"),us=this.getShapeCfg(is),ls=is.type,fs=as.getAnchorPoints(ls,us)||[];each$1(fs,function(hs,vs){var gs={x:os.minX+hs[0]*os.width,y:os.minY+hs[1]*os.height,anchorIndex:vs};rs.push(gs)}),this.set(CACHE_ANCHOR_POINTS$3,rs)}return rs},ts.prototype.addEdge=function(rs){this.get("edges").push(rs)},ts.prototype.lock=function(){this.set("locked",!0)},ts.prototype.unlock=function(){this.set("locked",!1)},ts.prototype.hasLocked=function(){return this.get("locked")},ts.prototype.removeEdge=function(rs){var as=this.getEdges(),os=as.indexOf(rs);os>-1&&as.splice(os,1)},ts.prototype.clearCache=function(){this.set(CACHE_BBOX$4,null),this.set(CACHE_ANCHOR_POINTS$3,null)},ts.prototype.getUpdateType=function(rs){var as,os,is,us,ls;if(rs){var fs=!isNil$2(rs.x),hs=!isNil$2(rs.y),vs=Object.keys(rs);if(vs.length===1&&(fs||hs)||vs.length===2&&fs&&hs)return"move";if(isNumber$3(rs.x)||isNumber$3(rs.y)||rs.type||rs.anchorPoints||rs.size||rs!=null&&rs.style&&(!((as=rs==null?void 0:rs.style)===null||as===void 0)&&as.r||!((os=rs==null?void 0:rs.style)===null||os===void 0)&&os.width||!((is=rs==null?void 0:rs.style)===null||is===void 0)&&is.height||!((us=rs==null?void 0:rs.style)===null||us===void 0)&&us.rx||!((ls=rs==null?void 0:rs.style)===null||ls===void 0)&&ls.ry))return"bbox|label";var gs=vs.includes("label")||vs.includes("labelCfg");return gs?"style|label":"style"}},ts.prototype.setState=function(rs,as){var os=this;if(this.optimize){ns.prototype.setState.call(this,rs,as);return}this.runWithBBoxAffected(function(){return ns.prototype.setState.call(os,rs,as)})},ts.prototype.clearStates=function(rs){var as=this;if(this.optimize){ns.prototype.clearStates.call(this,rs);return}this.runWithBBoxAffected(function(){return ns.prototype.clearStates.call(as,rs)})},ts.prototype.runWithBBoxAffected=function(rs){var as=["r","width","height","rx","ry","lineWidth"],os=this.getKeyShape().attr(),is={};Object.keys(this.getKeyShape().attr()).forEach(function(hs){as.includes(hs)&&(is[hs]=os[hs])}),rs();for(var us=this.getKeyShape().attr(),ls=0;ls<as.length;ls++){var fs=as[ls];if(us[fs]!==is[fs]){this.clearCache(),this.getEdges().forEach(function(hs){return hs.refresh()});break}}},ts}(ItemBase$1),CACHE_BBOX$3="bboxCache",CACHE_CANVAS_BBOX$2="bboxCanvasCache",CACHE_SIZE$1="sizeCache",CACHE_ANCHOR_POINTS$2="anchorPointsCache",Combo$1=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},ts.prototype.getShapeCfg=function(rs){var as=this.get("styles"),os=this.get("bbox");if(as&&os){var is=rs,us=isNumber$3(rs.size)?[rs.size,rs.size]:rs.size,ls=isNumber$3(rs.fixSize)?[rs.fixSize,rs.fixSize]:rs.fixSize,fs=us||ls||Global$2.defaultCombo.size,hs={r:(Math.max(os.width,os.height)||Math.max(fs[0],fs[1]))/2,width:os.width||fs[0],height:os.height||fs[1]};is.style=__assign$h(__assign$h(__assign$h({},as),rs.style),hs);var vs=rs.padding||Global$2.defaultCombo.padding;return isNumber$3(vs)?(hs.r+=vs,hs.width+=vs*2,hs.height+=vs*2):(hs.r=hs.r+Math.max.apply(Math,vs),hs.width+=vs[1]+vs[3]||vs[1]*2,hs.height+=vs[0]+vs[2]||vs[0]*2),this.set(CACHE_SIZE$1,hs),is}return rs},ts.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var rs=this.get("keyShape"),as=this.get("group"),os=this.get(CACHE_BBOX$3)||{},is=os.x,us=os.x,ls=this.get(CACHE_SIZE$1),fs=getBBox$4(rs,as);if(fs.centerX=(fs.minX+fs.maxX)/2,fs.centerY=(fs.minY+fs.maxY)/2,ls){ls.width=Math.max(ls.width,fs.width),ls.height=Math.max(ls.height,fs.height),this.set(CACHE_SIZE$1,ls);var hs=rs.get("type");hs==="circle"?(fs.width=ls.r*2,fs.height=ls.r*2):(fs.width=ls.width,fs.height=ls.height),fs.minX=fs.centerX-fs.width/2,fs.minY=fs.centerY-fs.height/2,fs.maxX=fs.centerX+fs.width/2,fs.maxY=fs.centerY+fs.height/2}else fs.width=fs.maxX-fs.minX,fs.height=fs.maxY-fs.minY,fs.centerX=(fs.minX+fs.maxX)/2,fs.centerY=(fs.minY+fs.maxY)/2;return fs.x=fs.minX,fs.y=fs.minY,(fs.x!==is||fs.y!==us)&&this.set(CACHE_ANCHOR_POINTS$2,null),fs}},ts.prototype.getChildren=function(){var rs=this;return{nodes:rs.getNodes(),combos:rs.getCombos()}},ts.prototype.getNodes=function(){var rs=this;return rs.get("nodes")},ts.prototype.getCombos=function(){var rs=this;return rs.get("combos")},ts.prototype.addChild=function(rs){var as=this,os=rs.getType();switch(os){case"node":as.addNode(rs);break;case"combo":as.addCombo(rs);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},ts.prototype.addCombo=function(rs){var as=this;return as.get("combos").push(rs),!0},ts.prototype.addNode=function(rs){var as=this;return as.get("nodes").push(rs),!0},ts.prototype.removeChild=function(rs){var as=this,os=rs.getType();switch(os){case"node":as.removeNode(rs);break;case"combo":as.removeCombo(rs);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},ts.prototype.removeCombo=function(rs){if(rs){var as=this.getCombos(),os=as.indexOf(rs);return os>-1?(as.splice(os,1),!0):!1}},ts.prototype.removeNode=function(rs){if(rs){var as=this.getNodes(),os=as.indexOf(rs);return os>-1?(as.splice(os,1),!0):!1}},ts.prototype.getUpdateType=function(rs){},ts.prototype.getBBox=function(){this.set(CACHE_CANVAS_BBOX$2,null);var rs=this.calculateCanvasBBox();return rs},ts.prototype.clearCache=function(){this.set(CACHE_BBOX$3,null),this.set(CACHE_CANVAS_BBOX$2,null),this.set(CACHE_ANCHOR_POINTS$2,null)},ts.prototype.destroy=function(){if(!this.destroyed){var rs=this.get("animate"),as=this.get("group");rs&&as.stopAnimate(),as.shapeMap={},this.clearCache(),this.set(CACHE_SIZE$1,null),this.set("bbox",null),as.remove(),this._cfg=null,this.destroyed=!0}},ts}(Node$2),NODE$3="node",EDGE$1="edge",VEDGE$1="vedge",COMBO$1="combo",CFG_PREFIX$1="default",MAPPER_SUFFIX$1="Mapper",STATE_SUFFIX$1="stateStyles",ItemController$1=function(){function ns(ts){var rs=this;this.edgeToBeUpdateMap={},this.throttleRefresh=throttle$1(function(as){var os=rs.graph;if(!(!os||os.get("destroyed"))){var is=rs.edgeToBeUpdateMap;if(is){var us=Object.values(is);us.length&&(us.forEach(function(ls){var fs=ls.edge;if(!(!fs||fs.destroyed)){var hs=fs.getSource(),vs=fs.getTarget();!hs||hs.destroyed||!vs||vs.destroyed||fs.refresh(ls.updateType)}}),rs.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=ts,this.destroyed=!1}return ns.prototype.addItem=function(ts,rs){var as=this.graph,os=ts===VEDGE$1?EDGE$1:ts,is=as.get("".concat(os,"Group"))||as.get("group"),us=upperFirst$2(os),ls=null,fs=as.get(os+upperFirst$2(STATE_SUFFIX$1))||{},hs=as.get(CFG_PREFIX$1+us);rs[STATE_SUFFIX$1]&&(fs=rs[STATE_SUFFIX$1]),hs&&each$1(hs,function(ks,Ps){isObject$1(ks)&&!isArray$2(ks)?rs[Ps]=deepMix$2({},ks,rs[Ps]):isArray$2(ks)?rs[Ps]=rs[Ps]||clone$b(hs[Ps]):rs[Ps]=rs[Ps]||hs[Ps]});var vs=as.get(os+MAPPER_SUFFIX$1);if(vs){var gs=vs(rs);gs[STATE_SUFFIX$1]&&(fs=gs[STATE_SUFFIX$1],delete gs[STATE_SUFFIX$1]),each$1(gs,function(ks,Ps){isObject$1(ks)&&!isArray$2(ks)?rs[Ps]=deepMix$2({},rs[Ps],ks):rs[Ps]=gs[Ps]||rs[Ps]})}if(as.emit("beforeadditem",{type:ts,model:rs}),ts===EDGE$1||ts===VEDGE$1){var ys=void 0,xs=void 0;if(ys=rs.source,xs=rs.target,ys&&isString$2(ys)&&(ys=as.findById(ys)),xs&&isString$2(xs)&&(xs=as.findById(xs)),!ys||!xs){console.warn("The source or target node of edge ".concat(rs.id," does not exist!"));return}ys.getType&&ys.getType()==="combo"&&(rs.isComboEdge=!0),xs.getType&&xs.getType()==="combo"&&(rs.isComboEdge=!0),ls=new Edge$2({model:rs,source:ys,target:xs,styles:fs,linkCenter:as.get("linkCenter"),group:is.addGroup()})}else if(ts===NODE$3)ls=new Node$2({model:rs,styles:fs,group:is.addGroup()});else if(ts===COMBO$1){var ms=rs.children,Ss=getComboBBox$1(ms,as),Ms=void 0,$s=void 0;if(isNaN(Ss.x)?isNaN(rs.x)&&(Ms=Math.random()*100):Ms=Ss.x,isNaN(Ss.y)?isNaN(rs.y)&&($s=Math.random()*100):$s=Ss.y,isNaN(rs.x)||isNaN(rs.y))rs.x=Ms,rs.y=$s;else{var bs=rs.x-Ms,Cs=rs.y-$s;this.updateComboSucceeds(rs.id,bs,Cs,ms)}var As=is.addGroup();As.setZIndex(rs.depth),ls=new Combo$1({model:rs,styles:fs,animate:as.get("animate"),bbox:rs.collapsed?getComboBBox$1([],as):Ss,group:As}),!rs.collapsed&&ls.getKeyShape().get("type")==="circle"&&(Ss.width=Math.hypot(Ss.height,Ss.width),Ss.height=Ss.width,ls.set("bbox",Ss),ls.refresh());var Is=ls.getModel();(ms||[]).forEach(function(ks){var Ps=as.findById(ks.id);ls.addChild(Ps),ks.depth=Is.depth+2})}if(ls)return ls.setOptimize(as.getNodes().length>as.get("optimizeThreshold")),as.get("".concat(ts,"s")).push(ls),as.get("itemMap")[ls.get("id")]=ls,as.emit("afteradditem",{item:ls,model:rs}),ls},ns.prototype.updateItem=function(ts,rs){var as=this,os,is,us=this.graph;if(isString$2(ts)&&(ts=us.findById(ts)),!(!ts||ts.destroyed)){var ls="";ts.getType&&(ls=ts.getType());var fs=us.get(ls+MAPPER_SUFFIX$1),hs=ts.getModel(),vs=hs.x,gs=hs.y,ys=ts.getUpdateType(rs);if(fs){var xs=deepMix$2({},hs,rs),ms=fs(xs),Ss=deepMix$2({},hs,ms,rs);ms[STATE_SUFFIX$1]&&(ts.set("styles",Ss[STATE_SUFFIX$1]),delete Ss[STATE_SUFFIX$1]),each$1(Ss,function(Rs,js){rs[js]=Rs})}else each$1(rs,function(Rs,js){hs[js]&&isObject$1(Rs)&&!isArray$2(Rs)&&(rs[js]=__assign$h(__assign$h({},hs[js]),rs[js]))});if(us.emit("beforeupdateitem",{item:ts,cfg:rs}),ls===EDGE$1){if(rs.source){var Ms=rs.source;isString$2(Ms)&&(Ms=us.findById(Ms)),ts.setSource(Ms)}if(rs.target){var $s=rs.target;isString$2($s)&&($s=us.findById($s)),ts.setTarget($s)}ts.update(rs)}else if(ls===NODE$3){ts.update(rs,ys);var bs=ts.getEdges();ys==="move"?each$1(bs,function(Rs){as.edgeToBeUpdateMap[Rs.getID()]={edge:Rs,updateType:ys},as.throttleRefresh()}):ys!=null&&ys.includes("bbox")&&each$1(bs,function(Rs){Rs.refresh(ys)})}else if(ls===COMBO$1){if(ts.update(rs,ys),!isNaN(rs.x)||!isNaN(rs.y)){var Cs=rs.x-vs||0,As=rs.y-gs||0;this.updateComboSucceeds(hs.id,Cs,As)}var Is=ts.getEdges(),ks=(ys==null?void 0:ys.includes("bbox"))||ys==="move";if(ks&&ls===COMBO$1){var Ps=ts.get("shapeFactory"),Ds=hs.type||"circle",Fs=hs.animate===void 0||rs.animate===void 0?(is=(os=Ps[Ds])===null||os===void 0?void 0:os.options)===null||is===void 0?void 0:is.animate:hs.animate||rs.animate;Fs?setTimeout(function(){if(!(!ts||ts.destroyed)){var Rs=ts.getKeyShape();!Rs||Rs.destroyed||each$1(Is,function(js){js&&!js.destroyed&&js.refresh()})}},201):each$1(Is,function(Rs){Rs.refresh()})}}ts.setOptimize(us.getNodes().length>us.get("optimizeThreshold")),us.emit("afterupdateitem",{item:ts,cfg:rs})}},ns.prototype.updateCombo=function(ts,rs,as){var os=this,is,us,ls=this.graph;if(isString$2(ts)&&(ts=ls.findById(ts)),!(!ts||ts.destroyed)){var fs=ts.getModel(),hs=getComboBBox$1(rs,ls,ts),vs=hs.x,gs=hs.y;ts.set("bbox",hs);var ys=vs,xs=gs;as?(ys=isNaN(fs.x)?vs:fs.x,xs=isNaN(fs.y)?gs:fs.y):(ys=isNaN(vs)?fs.x:vs,xs=isNaN(gs)?fs.y:gs),ts.update({x:ys,y:xs});var ms=ts.get("shapeFactory"),Ss=fs.type||"circle",Ms=fs.animate===void 0?(us=(is=ms[Ss])===null||is===void 0?void 0:is.options)===null||us===void 0?void 0:us.animate:fs.animate;Ms?setTimeout(function(){if(!(!ts||ts.destroyed)){var $s=ts.getKeyShape();!$s||$s.destroyed||(ts.getShapeCfg(fs),os.updateComboEdges(ts))}},201):this.updateComboEdges(ts)}},ns.prototype.updateComboEdges=function(ts){for(var rs,as,os=ts.getEdges()||[],is=0;is<os.length;is++){var us=os[is];!(us!=null&&us.destroyed)&&!(!((rs=us==null?void 0:us.getSource())===null||rs===void 0)&&rs.destroyed)&&!(!((as=us==null?void 0:us.getTarget())===null||as===void 0)&&as.destroyed)&&us.refresh()}},ns.prototype.collapseCombo=function(ts,rs){rs===void 0&&(rs=!0);var as=this.graph;isString$2(ts)&&(ts=as.findById(ts));var os=ts.getChildren();os.nodes.forEach(function(is){as.hideItem(is,rs)}),os.combos.forEach(function(is){as.hideItem(is,rs)})},ns.prototype.updateComboSucceeds=function(ts,rs,as,os){var is=this;os===void 0&&(os=[]);var us=this.graph;if(!(!rs&&!as)){var ls=os;if(!(ls!=null&&ls.length)){var fs=us.get("comboTrees");fs==null||fs.forEach(function(hs){traverseTree$3(hs,function(vs){return vs.id===ts?(ls=vs.children,!1):!0})})}ls==null||ls.forEach(function(hs){var vs=us.findById(hs.id);if(vs){var gs=vs.getModel();is.updateItem(hs.id,{x:(gs.x||0)+rs,y:(gs.y||0)+as})}})}},ns.prototype.expandCombo=function(ts,rs){rs===void 0&&(rs=!0);var as=this.graph;isString$2(ts)&&(ts=as.findById(ts));var os=ts.getChildren(),is=new Set;os.nodes.forEach(function(us){as.showItem(us,rs),us.getEdges().forEach(function(ls){return is.add(ls)})}),os.combos.forEach(function(us){us.getModel().collapsed?us.show():as.showItem(us,rs),us.getEdges().forEach(function(ls){return is.add(ls)})}),is.forEach(function(us){return us.refresh()})},ns.prototype.removeItem=function(ts){var rs=this,as=this.graph;if(isString$2(ts)&&(ts=as.findById(ts)),!(!ts||ts.destroyed)){var os=clone$b(ts.getModel()),is="";ts.getType&&(is=ts.getType()),as.emit("beforeremoveitem",{item:os,type:is});var us=as.get("".concat(is,"s")),ls=us.indexOf(ts);if(ls>-1&&us.splice(ls,1),is===EDGE$1){var fs=as.get("v".concat(is,"s")),hs=fs.indexOf(ts);hs>-1&&fs.splice(hs,1)}var vs=ts.get("id"),gs=as.get("itemMap");delete gs[vs];var ys=as.get("comboTrees"),xs=ts.get("id");if(is===NODE$3){var ms=ts.getModel().comboId;if(ys&&ms){var Ss=ys,Ms=!1;ys.forEach(function(ks){Ms||traverseTree$3(ks,function(Ps){if(Ps.id===xs&&Ss){var Ds=Ss.indexOf(Ps);return Ss.splice(Ds,1),Ms=!0,!1}return Ss=Ps.children,!0})})}for(var $s=ts.getEdges(),bs=$s.length-1;bs>=0;bs--)as.removeItem($s[bs],!1);ms&&as.updateCombo(ms)}else if(is===COMBO$1){var Cs=ts.getModel().parentId,As,Is=!1;(ys||[]).forEach(function(Ps){Is||traverseTree$3(Ps,function(Ds){return Ds.id===xs?(As=Ds,Is=!0,!1):!0})}),As.removed=!0,As&&As.children&&As.children.forEach(function(Ps){rs.removeItem(Ps.id)});for(var $s=ts.getEdges(),bs=$s.length;bs>=0;bs--)as.removeItem($s[bs],!1);Cs&&as.updateCombo(Cs)}ts.destroy(),as.emit("afterremoveitem",{item:os,type:is})}},ns.prototype.setItemState=function(ts,rs,as){var os=this.graph,is=rs;isString$2(as)&&(is="".concat(rs,":").concat(as)),!(ts.hasState(is)===as&&as||isString$2(as)&&ts.hasState(is))&&(os.emit("beforeitemstatechange",{item:ts,state:is,enabled:as}),ts.setState(rs,as),os.autoPaint(),os.emit("afteritemstatechange",{item:ts,state:is,enabled:as}))},ns.prototype.priorityState=function(ts,rs){var as=this.graph,os=ts;isString$2(ts)&&(os=as.findById(ts)),this.setItemState(os,rs,!1),this.setItemState(os,rs,!0)},ns.prototype.clearItemStates=function(ts,rs){var as=this.graph;isString$2(ts)&&(ts=as.findById(ts)),as.emit("beforeitemstatesclear",{item:ts,states:rs}),ts.clearStates(rs),as.emit("afteritemstatesclear",{item:ts,states:rs})},ns.prototype.refreshItem=function(ts){var rs=this.graph;isString$2(ts)&&(ts=rs.findById(ts)),rs.emit("beforeitemrefresh",{item:ts}),ts.refresh(),rs.emit("afteritemrefresh",{item:ts})},ns.prototype.addCombos=function(ts,rs){var as=this,os=this.graph;(ts||[]).forEach(function(us){traverseTreeUp$1(us,function(ls){var fs;return rs.forEach(function(hs){hs.id===ls.id&&(hs.children=ls.children,hs.depth=ls.depth,fs=hs)}),fs&&as.addItem("combo",fs),!0})});var is=os.get("comboGroup");is&&is.sort()},ns.prototype.changeItemVisibility=function(ts,rs){var as=this,os=this.graph;if(isString$2(ts)&&(ts=os.findById(ts)),!ts){console.warn("The item to be shown or hidden does not exist!");return}if(os.emit("beforeitemvisibilitychange",{item:ts,visible:rs}),ts.changeVisibility(rs),ts.getType&&ts.getType()===NODE$3){var is=ts.getEdges();each$1(is,function(vs){rs&&!(vs.get("source").isVisible()&&vs.get("target").isVisible())||as.changeItemVisibility(vs,rs)})}else if(ts.getType&&ts.getType()===COMBO$1){var us=os.get("comboTrees"),ls=ts.get("id"),fs=[],hs=!1;(us||[]).forEach(function(gs){hs||!gs.children||gs.children.length===0||traverseTree$3(gs,function(ys){return ys.id===ls?(fs=ys.children,hs=!0,!1):!0})}),fs&&(!rs||rs&&!ts.getModel().collapsed)&&fs.forEach(function(gs){var ys=os.findById(gs.id);as.changeItemVisibility(ys,rs)});var is=ts.getEdges();each$1(is,function(gs){rs&&!(gs.get("source").isVisible()&&gs.get("target").isVisible())||as.changeItemVisibility(gs,rs)})}return os.emit("afteritemvisibilitychange",{item:ts,visible:rs}),ts},ns.prototype.destroy=function(){this.graph=null,this.destroyed=!0},ns}(),StateController$1=function(){function ns(ts){this.graph=ts,this.destroyed=!1}return ns.prototype.updateState=function(ts,rs,as){var os=this.graph.get("states"),is=rs;isString$2(as)&&(is="".concat(rs,":").concat(as)),os[is]||(os[is]=[]),as?os[is].push(ts):os[is]=os[is].filter(function(us){return us!==ts}),this.graph.set("states",os),this.graph.emit("graphstatechange",{states:os})},ns.prototype.updateStates=function(ts,rs,as){var os=this.graph.get("states"),is=isString$2(rs)?[rs]:rs;is.forEach(function(us){var ls=us;os[ls]||(os[ls]=[]),isString$2(as)&&(ls="".concat(us,":").concat(as)),as?os[ls].push(ts):os[ls]=os[ls].filter(function(fs){return fs!==ts})}),this.graph.set("states",os),this.graph.emit("graphstatechange",{states:rs})},ns.prototype.destroy=function(){this.graph=null,this.destroyed=!0},ns}(),substitute$2=function(ts,rs){return!ts||!rs?ts:ts.replace(/\\?\{([^{}]+)\}/g,function(as,os){if(as.charAt(0)==="\\")return as.slice(1);var is=rs[os];return is===0&&(is="0"),is||""})},getSpline$1=function(ts){var rs=[];if(ts.length<2)throw new Error("point length must largn than 2, now it's ".concat(ts.length));for(var as=0,os=ts;as<os.length;as++){var is=os[as],us=is.x,ls=is.y;rs.push(us),rs.push(ls)}var fs=catmullRom2Bezier(rs);return fs.unshift(["M",ts[0].x,ts[0].y]),fs},getControlPoint$1=function(ts,rs,as,os){as===void 0&&(as=0),os===void 0&&(os=0);var is={x:(1-as)*ts.x+as*rs.x,y:(1-as)*ts.y+as*rs.y},us=[0,0];normalize$1(us,[rs.x-ts.x,rs.y-ts.y]),(!us||!us[0]&&!us[1])&&(us=[0,0]);var ls=[-us[1]*os,us[0]*os];return is.x+=ls[0],is.y+=ls[1],is},pointsToPolygon$1=function(ts,rs){var as=ts.length;if(!as)return"";for(var os="",is="",us=0;us<as;us++){var ls=ts[us];us===0?is="M{x} {y}":is="L{x} {y}",os+=substitute$2(is,ls)}return rs&&(os+="Z"),os},pathToPoints$2=function(ts){var rs=[];return ts.forEach(function(as){var os=as[0];if(os!=="A")for(var is=1;is<as.length;is=is+2)rs.push([as[is],as[is+1]]);else{var us=as.length;rs.push([as[us-2],as[us-1]])}}),rs},getClosedSpline$1=function(ts){if(ts.length<2)throw new Error("point length must largn than 2, now it's ".concat(ts.length));var rs=ts[0],as=ts[1],os=ts[ts.length-1],is=ts[ts.length-2];ts.unshift(os),ts.unshift(is),ts.push(rs),ts.push(as);for(var us=[],ls=1;ls<ts.length-2;ls+=1){var fs=ts[ls-1].x,hs=ts[ls-1].y,vs=ts[ls].x,gs=ts[ls].y,ys=ts[ls+1].x,xs=ts[ls+1].y,ms=ls!==ts.length-2?ts[ls+2].x:ys,Ss=ls!==ts.length-2?ts[ls+2].y:xs,Ms=vs+(ys-fs)/6,$s=gs+(xs-hs)/6,bs=ys-(ms-vs)/6,Cs=xs-(Ss-gs)/6;us.push(["C",Ms,$s,bs,Cs,ys,xs])}return us.unshift(["M",os.x,os.y]),us},vecScaleTo$1=function(ts,rs){return scale$2([0,0],normalize$1([0,0],ts),rs)},unitNormal$1=function(ts,rs){var as=[ts[1]-rs[1],rs[0]-ts[0]],os=Math.sqrt(as[0]*as[0]+as[1]*as[1]);if(os===0)throw new Error("p0 should not be equal to p1");return[as[0]/os,as[1]/os]},vecFrom$1=function(ts,rs){return[rs[0]-ts[0],rs[1]-ts[1]]};function roundedHull$1(ns,ts){var rs=function(gs){var ys=[gs[0][0],gs[0][1]-ts],xs=[gs[0][0],gs[0][1]+ts];return"M ".concat(ys," A ").concat(ts,",").concat(ts,",0,0,0,").concat(xs," A ").concat(ts,",").concat(ts,",0,0,0,").concat(ys)},as=function(gs){var ys=scale$2([0,0],unitNormal$1(gs[0],gs[1]),ts),xs=scale$2([0,0],ys,-1),ms=add$1([0,0],gs[0],ys),Ss=add$1([0,0],gs[1],ys),Ms=add$1([0,0],gs[1],xs),$s=add$1([0,0],gs[0],xs);return"M ".concat(ms," L ").concat(Ss," A ").concat([ts,ts,"0,0,0",Ms].join(",")," L ").concat($s," A ").concat([ts,ts,"0,0,0",ms].join(","))};if(!ns||ns.length<1)return"";if(ns.length===1)return rs(ns);if(ns.length===2)return as(ns);for(var os=new Array(ns.length),is=0;is<os.length;++is){var us=is===0?ns[ns.length-1]:ns[is-1],ls=ns[is],fs=scale$2([0,0],unitNormal$1(us,ls),ts);os[is]=[add$1([0,0],us,fs),add$1([0,0],ls,fs)]}var hs="A ".concat([ts,ts,"0,0,0,"].join(","));return os=os.map(function(vs,gs){var ys="";return gs===0&&(ys="M ".concat(os[os.length-1][1]," ")),ys+="".concat(hs+vs[0]," L ").concat(vs[1]),ys}),os.join(" ")}function paddedHull$1(ns,ts){var rs=ns.length,as=function(vs){var gs=[vs[0][0],vs[0][1]-ts],ys=[vs[0][0],vs[0][1]+ts];return"M ".concat(gs," A ").concat([ts,ts,"0,0,0",ys].join(",")," A ").concat([ts,ts,"0,0,0",gs].join(","))},os=function(vs){var gs=vecFrom$1(vs[0],vs[1]),ys=vecScaleTo$1(gs,ts),xs=add$1([0,0],vs[0],scale$2([0,0],ys,-1)),ms=add$1([0,0],vs[1],ys),Ss=1.2*ts,Ms=vecScaleTo$1(normalize$1([0,0],gs),Ss),$s=scale$2([0,0],Ms,-1),bs=add$1([0,0],xs,$s),Cs=add$1([0,0],ms,$s),As=add$1([0,0],xs,Ms);return"M ".concat(xs," C ").concat([bs,Cs,ms].join(",")," S ").concat([As,xs].join(",")," Z")};if(!ns||rs<1)return"";if(rs===1)return as(ns);if(rs===2)return os(ns);for(var is=ns.map(function(hs,vs){var gs=ns[(vs+1)%rs];return{p:hs,v:normalize$1([0,0],vecFrom$1(hs,gs))}}),us=0;us<is.length;++us){var ls=us>0?us-1:rs-1,fs=normalize$1([0,0],add$1([0,0],is[ls].v,scale$2([0,0],is[us].v,-1)));is[us].p=add$1([0,0],is[us].p,scale$2([0,0],fs,ts))}return is.map(function(hs){var vs=hs.p;return{x:vs[0],y:vs[1]}})}var getStarPath=function(ts,rs){for(var as=[],os=0;os<5;os++){var is=Math.cos((18+72*os)/180*Math.PI)*ts,us=Math.sin((18+72*os)/180*Math.PI)*ts,ls=Math.cos((54+72*os)/180*Math.PI)*rs,fs=Math.sin((54+72*os)/180*Math.PI)*rs;os===0?as.push(["M",is,-us]):as.push(["L",is,-us]),as.push(["L",ls,-fs])}return as.push(["Z"]),as};const PathUtil$2=Object.freeze(Object.defineProperty({__proto__:null,getClosedSpline:getClosedSpline$1,getControlPoint:getControlPoint$1,getSpline:getSpline$1,getStarPath,paddedHull:paddedHull$1,pathToPoints:pathToPoints$2,pointsToPolygon:pointsToPolygon$1,roundedHull:roundedHull$1},Symbol.toStringTag,{value:"Module"}));var cross$1=function(ts,rs,as){return(ts.y-as.y)*(rs.x-as.x)-(ts.x-as.x)*(rs.y-as.y)},genConvexHull$1=function(ts){var rs=ts.map(function(gs){return{x:gs.getModel().x,y:gs.getModel().y}});rs.sort(function(gs,ys){return gs.x===ys.x?gs.y-ys.y:gs.x-ys.x});for(var as={},os=rs.length-1;os>=0;os--){var is=rs[os],us=is.x,ls=is.y;as["".concat(us,"-").concat(ls)]&&rs.splice(os,1),as["".concat(us,"-").concat(ls)]=!0}if(rs.length===1)return rs;for(var fs=[],os=0;os<rs.length;os++){for(;fs.length>=2&&cross$1(fs[fs.length-2],fs[fs.length-1],rs[os])<=0;)fs.pop();fs.push(rs[os])}for(var hs=[],os=rs.length-1;os>=0;os--){for(;hs.length>=2&&cross$1(hs[hs.length-2],hs[hs.length-1],rs[os])<=0;)hs.pop();hs.push(rs[os])}hs.pop(),fs.pop();var vs=fs.concat(hs);return vs},defaultOps$1={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function MarchingSquares$1(ns,ts,rs){var as=!1,os=function(fs,hs){return ts.cells[fs+hs*ts.width]},is=function(fs,hs){var vs=0;return os(fs-1,hs-1)>=rs&&(vs+=1),os(fs,hs-1)>rs&&(vs+=2),os(fs-1,hs)>rs&&(vs+=4),os(fs,hs)>rs&&(vs+=8),vs},us=function(fs,hs){for(var vs=fs,gs=hs,ys,xs,ms=0;ms<ts.width*ts.height;ms++){if(ys=vs,xs=gs,ns.findIndex(function(Ms){return Ms.x===vs&&Ms.y===gs})>-1){if(!(ns[0].x!==vs||ns[0].y!==gs))return!0}else ns.push({x:vs,y:gs});var Ss=is(vs,gs);switch(Ss){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:vs++;break;case 12:case 14:case 4:vs--;break;case 6:ys===0&&(xs===-1?vs-=1:vs+=1);break;case 1:case 13:case 5:gs--;break;case 9:ys===1&&(xs===0?gs-=1:gs+=1);break;case 10:case 8:case 11:gs++;break;default:return console.warn("Marching squares invalid state: ".concat(Ss)),!0}}};this.march=function(){for(var ls=0;ls<ts.width&&!as;ls+=1)for(var fs=0;fs<ts.height&&!as;fs+=1)os(ls,fs)>rs&&is(ls,fs)!==15&&(as=us(ls,fs));return as}}var initGridCells$1=function(ts,rs,as){var os=Math.ceil(ts/as),is=Math.ceil(rs/as),us=new Float32Array(Math.max(0,os*is)).fill(0);return{cells:us,width:os,height:is}},pickBestNeighbor$1=function(ts,rs,as){var os=null,is=Number.POSITIVE_INFINITY;return rs.forEach(function(us){var ls={x:ts.getModel().x,y:ts.getModel().y},fs={x:us.getModel().x,y:us.getModel().y},hs=squareDist$1(ls,fs),vs=new Line$3(ls.x,ls.y,fs.x,fs.y),gs=as.reduce(function(ys,xs){return fractionToLine$1(xs,vs)>0?ys+1:ys},0);hs*Math.pow(gs+1,2)<is&&(os=us,is=hs*Math.pow(gs+1,2))}),os},getIntersectItem$1=function(ts,rs){var as=Number.POSITIVE_INFINITY,os=null;return ts.forEach(function(is){var us=fractionToLine$1(is,rs);us>=0&&us<as&&(os=is,as=us)}),os},computeRoute$1=function(ts,rs,as,os){var is=[],us=[];us.push(ts);for(var ls=!0,fs=0,hs=function(xs,ms){var Ss=!1;return ms.forEach(function(Ms){Ss||(isPointsOverlap$1(xs,{x:Ms.x1,y:Ms.y1})||isPointsOverlap$1(xs,{x:Ms.x2,y:Ms.y2}))&&(Ss=!0)}),Ss},vs=function(xs,ms){for(var Ss=0,Ms=ms;Ss<Ms.length;Ss++){var $s=Ms[Ss],bs=$s.getBBox(),Cs=[[bs.x,bs.y],[bs.x+bs.width,bs.y],[bs.x,bs.y+bs.height],[bs.x+bs.width,bs.y+bs.height]];if(isPointInPolygon$2(Cs,xs.x,xs.y))return!0}return!1};ls&&fs<as;){ls=!1;for(var gs=function(){var xs=us.pop(),ms=getIntersectItem$1(rs,xs);if(ms){var Ss=itemIntersectByLine$1(ms,xs),Ms=Ss[0],$s=Ss[1];if($s===2){var bs=function(As){for(var Is=os,ks=rerouteLine$1(ms,Is,Ms,As),Ps=hs(ks,us)||hs(ks,is),Ds=vs(ks,rs);!Ps&&Ds&&Is>=1;)Is/=1.5,ks=rerouteLine$1(ms,Is,Ms,As),Ps=hs(ks,us)||hs(ks,is),Ds=vs(ks,rs);ks&&!Ps&&(!As||!Ds)&&(us.push(new Line$3(xs.x1,xs.y1,ks.x,ks.y)),us.push(new Line$3(ks.x,ks.y,xs.x2,xs.y2)),ls=!0)};bs(!0),ls||bs(!1)}}ls||is.push(xs),fs+=1};!ls&&us.length;)gs()}for(;us.length;)is.push(us.pop());return is};function getRoute$1(ns,ts,rs,as,os){var is=pickBestNeighbor$1(ns,rs,ts);if(is===null)return[];var us=function(gs){for(var ys=[];gs.length>0;){var xs=gs.pop();if(gs.length===0){ys.push(xs);break}var ms=gs.pop(),Ss=new Line$3(xs.x1,xs.y1,ms.x2,ms.y2),Ms=getIntersectItem$1(ts,Ss);Ms?(ys.push(xs),gs.push(ms)):gs.push(Ss)}return ys},ls=new Line$3(ns.getModel().x,ns.getModel().y,is.getModel().x,is.getModel().y),fs=computeRoute$1(ls,ts,as,os),hs=us(fs);return hs}var genBubbleSet$1=function(ts,rs,as){var os=Object.assign(defaultOps$1,as),is=getPointsCenter$1(ts.map(function(bs){return{x:bs.getModel().x,y:bs.getModel().y}}));ts=ts.sort(function(bs,Cs){return squareDist$1({x:bs.getModel().x,y:bs.getModel().y},is)-squareDist$1({x:Cs.getModel().x,y:Cs.getModel().y},is)});var us=[],ls=[];ts.forEach(function(bs){var Cs=getRoute$1(bs,rs,us,os.maxRoutingIterations,os.morphBuffer);Cs.forEach(function(As){ls.push(As)}),us.push(bs)});for(var fs=getActiveRregion$1(ts,ls,os.nodeR0),hs=initGridCells$1(fs.width,fs.height,os.pixelGroupSize),vs=[],gs=[],ys=0;ys<os.maxMarchingIterations;ys++)if(fillPotentialArea$1(ts,rs,ls,fs,hs,os),vs=[],gs=[],!!new MarchingSquares$1(vs,hs,os.threshold).march()){var xs=vs.map(function(bs){return{x:Math.round(bs.x*os.pixelGroupSize+fs.minX),y:Math.round(bs.y*os.pixelGroupSize+fs.minY)}});if(xs){var ms=xs.length;if(os.skip>1)for(ms=Math.floor(xs.length/os.skip);ms<3&&os.skip>1;)os.skip-=1,ms=Math.floor(xs.length/os.skip);for(var Ss=0,Ms=0;Ms<ms;Ms+=1,Ss+=os.skip)gs.push({x:xs[Ss].x,y:xs[Ss].y})}var $s=function(){for(var Cs=0,As=ts;Cs<As.length;Cs++){var Is=As[Cs],ks=gs.map(function(Ps){return[Ps.x,Ps.y]});if(!isPointInPolygon$2(ks,Is.getBBox().centerX,Is.getBBox().centerY))return!1}return!0};if(gs&&$s())return gs;if(os.threshold*=.9,ys<=os.maxMarchingIterations*.5)os.memberInfluenceFactor*=1.2,os.edgeInfluenceFactor*=1.2;else if(os.nonMemberInfluenceFactor!==0&&rs.length>0)os.nonMemberInfluenceFactor*=.8;else break}return gs};function getActiveRregion$1(ns,ts,rs){var as={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},os=[];ns.forEach(function(fs){os.push(fs.getBBox())}),ts.forEach(function(fs){os.push(fs.getBBox())});for(var is=0,us=os;is<us.length;is++){var ls=us[is];as.minX=(ls.minX<as.minX?ls.minX:as.minX)-rs,as.minY=(ls.minY<as.minY?ls.minY:as.minY)-rs,as.maxX=(ls.maxX>as.maxX?ls.maxX:as.maxX)+rs,as.maxY=(ls.maxY>as.maxY?ls.maxY:as.maxY)+rs}return as.width=as.maxX-as.minX,as.height=as.maxY-as.minY,as.x=as.minX,as.y=as.minY,as}function fillPotentialArea$1(ns,ts,rs,as,os,is){function us(xs,ms){var Ss=Math.floor((xs-ms)/is.pixelGroupSize);return Ss<0?0:Ss}function ls(xs,ms){return xs*is.pixelGroupSize+ms}var fs=(is.nodeR0-is.nodeR1)*(is.nodeR0-is.nodeR1),hs=(is.edgeR0-is.edgeR1)*(is.edgeR0-is.edgeR1),vs=function(ms,Ss){var Ms=Math.min(us(ms.minX,Ss+as.minX),os.width),$s=Math.min(us(ms.minY,Ss+as.minY),os.height),bs=Math.min(us(ms.maxX,-Ss+as.minX),os.width),Cs=Math.min(us(ms.maxY,-Ss+as.minY),os.height);return[Ms,$s,bs,Cs]},gs=function(ms,Ss){for(var Ms=ms.getBBox(),$s=vs(Ms,is.nodeR1),bs=$s[0],Cs=$s[1],As=$s[2],Is=$s[3],ks=Cs;ks<Is;ks+=1)for(var Ps=bs;Ps<As;Ps+=1)if(!(Ss<0&&os[Ps+ks*os.width]<=0)){var Ds=ls(Ps,as.minX),Fs=ls(ks,as.minY),Rs=pointRectSquareDist$1({x:Ds,y:Fs},{x:Ms.minX,y:Ms.minY,width:Ms.width,height:Ms.height});if(Rs<Math.pow(is.nodeR1,2)){var js=Math.sqrt(Rs)-is.nodeR1;os.cells[Ps+ks*os.width]+=Ss*js*js}}},ys=function(ms,Ss){for(var Ms=ms.getBBox(),$s=vs(Ms,is.edgeR1),bs=$s[0],Cs=$s[1],As=$s[2],Is=$s[3],ks=Cs;ks<Is;ks+=1)for(var Ps=bs;Ps<As;Ps+=1)if(!(Ss<0&&os.cells[Ps+ks*os.width]<=0)){var Ds=ls(Ps,as.minX),Fs=ls(ks,as.minY),Rs=pointLineSquareDist$1({x:Ds,y:Fs},ms);if(Rs<Math.pow(is.edgeR1,2)){var js=Math.sqrt(Rs)-is.edgeR1;os.cells[Ps+ks*os.width]+=Ss*js*js}}};is.nodeInfluenceFactor&&ns.forEach(function(xs){gs(xs,is.nodeInfluenceFactor/fs)}),is.edgeInfluenceFactor&&rs.forEach(function(xs){ys(xs,is.edgeInfluenceFactor/hs)}),is.negativeNodeInfluenceFactor&&ts.forEach(function(xs){gs(xs,is.negativeNodeInfluenceFactor/fs)})}function rerouteLine$1(ns,ts,rs,as){var os=ns.getBBox(),is=rs[0],us=rs[1],ls=rs[2],fs=rs[3],hs={topLeft:{x:os.minX-ts,y:os.minY-ts},topRight:{x:os.maxX+ts,y:os.minY-ts},bottomLeft:{x:os.minX-ts,y:os.maxY+ts},bottomRight:{x:os.maxX+ts,y:os.maxY+ts}},vs=os.height*os.width;function gs(ms,Ss){return os.width*((ms.y-os.minY+(Ss.y-os.minY))*.5)}if(us){if(is)return as?hs.topLeft:hs.bottomRight;if(ls)return as?hs.bottomLeft:hs.topRight;var ys=gs(us,fs);return ys<vs*.5?us.y>fs.y?as?hs.topLeft:hs.bottomRight:as?hs.topRight:hs.bottomLeft:us.y<fs.y?as?hs.bottomLeft:hs.topRight:as?hs.bottomRight:hs.topLeft}if(fs){if(is)return as?hs.topRight:hs.bottomLeft;if(ls)return as?hs.bottomRight:hs.topLeft}var xs=gs(is,ls);return xs<vs*.5?is.x>ls.x?as?hs.topLeft:hs.bottomRight:as?hs.bottomLeft:hs.topRight:is.x<ls.x?as?hs.topRight:hs.bottomLeft:as?hs.bottomRight:hs.topLeft}var Hull$1=function(){function ns(ts,rs){this.cfg=deepMix$2(this.getDefaultCfg(),rs),this.graph=ts,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(as){return isString$2(as)?ts.findById(as):as}),this.nonMembers=this.cfg.nonMembers.map(function(as){return isString$2(as)?ts.findById(as):as}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return ns.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},ns.prototype.setPadding=function(){var ts=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+ts:10+ts,this.cfg.bubbleCfg={nodeR0:this.padding-ts,nodeR1:this.padding-ts,morphBuffer:this.padding-ts}},ns.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},ns.prototype.calcPath=function(ts,rs){var as,os,is;switch(this.type){case"round-convex":as=genConvexHull$1(ts),is=roundedHull$1(as.map(function(us){return[us.x,us.y]}),this.padding),os=parsePathString$1(is);break;case"smooth-convex":as=genConvexHull$1(ts),as.length===2?(is=roundedHull$1(as.map(function(us){return[us.x,us.y]}),this.padding),os=parsePathString$1(is)):as.length>2&&(is=paddedHull$1(as.map(function(us){return[us.x,us.y]}),this.padding),os=getClosedSpline$1(is));break;case"bubble":as=genBubbleSet$1(ts,rs,this.cfg.bubbleCfg),os=as.length>=2&&getClosedSpline$1(as);break}return os},ns.prototype.render=function(){this.group.addShape("path",{attrs:__assign$h({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},ns.prototype.addMember=function(ts){if(ts){isString$2(ts)&&(ts=this.graph.findById(ts)),this.members.push(ts);var rs=this.nonMembers.indexOf(ts);return rs>-1&&this.nonMembers.splice(rs,1),this.updateData(this.members,this.nonMembers),!0}},ns.prototype.addNonMember=function(ts){if(ts){isString$2(ts)&&(ts=this.graph.findById(ts)),this.nonMembers.push(ts);var rs=this.members.indexOf(ts);return rs>-1&&this.members.splice(rs,1),this.updateData(this.members,this.nonMembers),!0}},ns.prototype.removeMember=function(ts){if(ts){isString$2(ts)&&(ts=this.graph.findById(ts));var rs=this.members.indexOf(ts);return rs>-1?(this.members.splice(rs,1),this.updateData(this.members,this.nonMembers),!0):!1}},ns.prototype.removeNonMember=function(ts){if(ts){isString$2(ts)&&(ts=this.graph.findById(ts));var rs=this.nonMembers.indexOf(ts);return rs>-1?(this.nonMembers.splice(rs,1),this.updateData(this.members,this.nonMembers),!0):!1}},ns.prototype.updateData=function(ts,rs){var as=this;this.group.findById(this.id).remove(),ts&&(this.members=ts.map(function(os){return isString$2(os)?as.graph.findById(os):os})),rs&&(this.nonMembers=rs.map(function(os){return isString$2(os)?as.graph.findById(os):os})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},ns.prototype.updateStyle=function(ts){var rs=this.group.findById(this.id);rs.attr(__assign$h({},ts))},ns.prototype.updateCfg=function(ts){var rs=this;this.cfg=deepMix$2(this.cfg,ts),this.id=this.cfg.id,this.group=this.cfg.group,ts.members&&(this.members=this.cfg.members.map(function(as){return isString$2(as)?rs.graph.findById(as):as})),ts.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(as){return isString$2(as)?rs.graph.findById(as):as})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},ns.prototype.contain=function(ts){var rs=this,as;isString$2(ts)?as=this.graph.findById(ts):as=ts;var os,is=as.getKeyShape();if(as.get("type")==="path")os=pathToPoints$2(is.attr("path"));else{var us=is.getCanvasBBox();os=[[us.minX,us.minY],[us.maxX,us.minY],[us.maxX,us.maxY],[us.minX,us.maxY]]}return os=os.map(function(ls){var fs=rs.graph.getPointByCanvas(ls[0],ls[1]);return[fs.x,fs.y]}),isPolygonsIntersect$3(os,pathToPoints$2(this.path))},ns.prototype.destroy=function(){this.group.remove(),this.cfg=null},ns}(),transform$e=transform$i,NODE$2="node",AbstractGraph$1=function(ns){__extends$x(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.sortCombos=debounce$1(function(){var os=as.get("comboSorted");if(!(!as||as.destroyed||os)){as.set("comboSorted",!0);var is=[],us={},ls=as.get("comboTrees");(ls||[]).forEach(function(hs){traverseTree$3(hs,function(vs){return is[vs.depth]?is[vs.depth].push(vs.id):is[vs.depth]=[vs.id],us[vs.id]=vs.depth,!0})});var fs=as.getEdges().concat(as.get("vedges"));(fs||[]).forEach(function(hs){var vs=hs.getModel(),gs=us[vs.source]||0,ys=us[vs.target]||0,xs=Math.max(gs,ys);is[xs]?is[xs].push(vs.id):is[xs]=[vs.id]}),is.forEach(function(hs){if(!(!hs||!hs.length))for(var vs=hs.length-1;vs>=0;vs--){var gs=as.findById(hs[vs]);gs&&gs.toFront()}})}},500,!1),as.cfg=deepMix$2(as.getDefaultCfg(),rs),as.init(),as.animating=!1,as.destroyed=!1,as.cfg.enabledStack&&(as.undoStack=new Stack$1(as.cfg.maxStep),as.redoStack=new Stack$1(as.cfg.maxStep)),as}return ts.prototype.init=function(){this.initCanvas();var rs=new ViewController$1(this),as=new ModeController$1(this),os=new ItemController$1(this),is=new StateController$1(this);this.set({viewController:rs,modeController:as,itemController:os,stateController:is}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},ts.prototype.initGroups=function(){var rs=this.get("canvas");if(rs){var as=rs.get("el"),os=(as||{}).id,is=os===void 0?"g6":os,us=rs.addGroup({id:"".concat(is,"-root"),className:Global$2.rootContainerClassName});if(this.get("groupByTypes")){var ls=us.addGroup({id:"".concat(is,"-edge"),className:Global$2.edgeContainerClassName}),fs=us.addGroup({id:"".concat(is,"-node"),className:Global$2.nodeContainerClassName}),hs=us.addGroup({id:"".concat(is,"-combo"),className:Global$2.comboContainerClassName});hs.toBack(),this.set({nodeGroup:fs,edgeGroup:ls,comboGroup:hs})}var vs=us.addGroup({id:"".concat(is,"-delegate"),className:Global$2.delegateContainerClassName});this.set({delegateGroup:vs}),this.set("group",us)}},ts.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},ts.prototype.set=function(rs,as){return isPlainObject$3(rs)?this.cfg=__assign$h(__assign$h({},this.cfg),rs):this.cfg[rs]=as,rs==="enabledStack"&&as&&!this.undoStack&&!this.redoStack&&(this.undoStack=new Stack$1(this.cfg.maxStep),this.redoStack=new Stack$1(this.cfg.maxStep)),this},ts.prototype.get=function(rs){var as;return(as=this.cfg)===null||as===void 0?void 0:as[rs]},ts.prototype.getGroup=function(){return this.get("group")},ts.prototype.getContainer=function(){return this.get("container")},ts.prototype.getMinZoom=function(){return this.get("minZoom")},ts.prototype.setMinZoom=function(rs){return this.set("minZoom",rs)},ts.prototype.getMaxZoom=function(){return this.get("maxZoom")},ts.prototype.setMaxZoom=function(rs){return this.set("maxZoom",rs)},ts.prototype.getWidth=function(){return this.get("width")},ts.prototype.getHeight=function(){return this.get("height")},ts.prototype.clearItemStates=function(rs,as){isString$2(rs)&&(rs=this.findById(rs));var os=this.get("itemController");as||(as=rs.get("states")),os.clearItemStates(rs,as);var is=this.get("stateController");is.updateStates(rs,as,!1)},ts.prototype.node=function(rs){typeof rs=="function"&&this.set("nodeMapper",rs)},ts.prototype.edge=function(rs){typeof rs=="function"&&this.set("edgeMapper",rs)},ts.prototype.combo=function(rs){typeof rs=="function"&&this.set("comboMapper",rs)},ts.prototype.findById=function(rs){return this.get("itemMap")[rs]},ts.prototype.find=function(rs,as){var os,is=this.get("".concat(rs,"s"));return each$1(is,function(us,ls){if(as(us,ls))return os=us,os}),os},ts.prototype.findAll=function(rs,as){var os=[];return each$1(this.get("".concat(rs,"s")),function(is,us){as(is,us)&&os.push(is)}),os},ts.prototype.findAllByState=function(rs,as,os){return os?this.findAll(rs,function(is){return is.hasState(as)&&os(is)}):this.findAll(rs,function(is){return is.hasState(as)})},ts.prototype.translate=function(rs,as,os,is){var us=this,ls=this.get("group"),fs=clone$b(ls.getMatrix());if(fs||(fs=[1,0,0,0,1,0,0,0,1]),os){var hs=getAnimateCfgWithCallback({animateCfg:is,callback:function(){return us.emit("viewportchange",{action:"translate",matrix:ls.getMatrix()})}});move$1(ls,{x:ls.getCanvasBBox().x+rs,y:ls.getCanvasBBox().y+as},os,hs||{duration:500,easing:"easeCubic"})}else fs=transform$e(fs,[["t",rs,as]]),ls.setMatrix(fs),this.emit("viewportchange",{action:"translate",matrix:fs}),this.autoPaint()},ts.prototype.moveTo=function(rs,as,os,is){var us=this.get("group");move$1(us,{x:rs,y:as},os,is||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:us.getMatrix()})},ts.prototype.fitView=function(rs,as,os,is){rs&&this.set("fitViewPadding",rs);var us=this.get("viewController");as?us.fitViewByRules(as,os,is):us.fitView(os,is),this.autoPaint()},ts.prototype.fitCenter=function(rs,as){var os=this.get("viewController");os.fitCenter(rs,as),this.autoPaint()},ts.prototype.addBehaviors=function(rs,as){var os=this.get("modeController");return os.manipulateBehaviors(rs,as,!0),this},ts.prototype.removeBehaviors=function(rs,as){var os=this.get("modeController");return os.manipulateBehaviors(rs,as,!1),this},ts.prototype.updateBehavior=function(rs,as,os){var is=this.get("modeController");return is.updateBehavior(rs,as,os),this},ts.prototype.zoom=function(rs,as,os,is){var us=this,ls=this.get("group"),fs=clone$b(ls.getMatrix())||[1,0,0,0,1,0,0,0,1],hs=this.get("minZoom"),vs=this.get("maxZoom"),gs=this.getZoom()||1,ys=gs*rs,xs=rs,ms=!1;if(hs&&ys<hs?(xs=hs/gs,ms=!0):vs&&ys>vs&&(xs=vs/gs,ms=!0),as?fs=transform$e(fs,[["t",-as.x,-as.y],["s",xs,xs],["t",as.x,as.y]]):fs=transform$e(fs,[["s",xs,xs]]),os){var Ss=clone$b(ls.getMatrix());Ss||(Ss=[1,0,0,0,1,0,0,0,1]);var Ms=Ss[0],$s=Ms*xs,bs=getAnimateCfgWithCallback({animateCfg:is,callback:function(){return us.emit("viewportchange",{action:"zoom",matrix:ls.getMatrix()})}});ls.animate(function(Cs){if(Cs===1)Ss=fs;else{var As=lerp(Ms,$s,Cs)/Ss[0];as?Ss=transform$e(Ss,[["t",-as.x,-as.y],["s",As,As],["t",as.x,as.y]]):Ss=transform$e(Ss,[["s",As,As]])}return{matrix:Ss}},bs)}else ls.setMatrix(fs),this.emit("viewportchange",{action:"zoom",matrix:fs}),this.autoPaint();return!ms},ts.prototype.zoomTo=function(rs,as,os,is){var us=rs/this.getZoom();return this.zoom(us,as,os,is)},ts.prototype.focusItem=function(rs,as,os){var is=this.get("viewController"),us=!1;as?us=!0:as===void 0&&(us=this.get("animate"));var ls={};os?ls=os:os===void 0&&(ls=this.get("animateCfg")),is.focus(rs,us,ls),this.autoPaint()},ts.prototype.focusItems=function(rs,as,os,is){var us=this.get("viewController");us.focusItems(rs,as,os,is)},ts.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},ts.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},ts.prototype.getPointByClient=function(rs,as){var os=this.get("viewController");return os.getPointByClient(rs,as)},ts.prototype.getClientByPoint=function(rs,as){var os=this.get("viewController");return os.getClientByPoint(rs,as)},ts.prototype.getPointByCanvas=function(rs,as){var os=this.get("viewController");return os.getPointByCanvas(rs,as)},ts.prototype.getCanvasByPoint=function(rs,as){var os=this.get("viewController");return os.getCanvasByPoint(rs,as)},ts.prototype.getGraphCenterPoint=function(){var rs=this.get("group").getCanvasBBox();return{x:(rs.minX+rs.maxX)/2,y:(rs.minY+rs.maxY)/2}},ts.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},ts.prototype.showItem=function(rs,as){as===void 0&&(as=!0);var os=this.get("itemController"),is=os.changeItemVisibility(rs,!0);if(as&&this.get("enabledStack")){var us=is.getID(),ls=is.getType(),fs={},hs={};switch(ls){case"node":fs.nodes=[{id:us,visible:!1}],hs.nodes=[{id:us,visible:!0}];break;case"edge":fs.nodes=[{id:us,visible:!1}],hs.edges=[{id:us,visible:!0}];break;case"combo":fs.nodes=[{id:us,visible:!1}],hs.combos=[{id:us,visible:!0}];break}this.pushStack("visible",{before:fs,after:hs})}},ts.prototype.hideItem=function(rs,as){as===void 0&&(as=!0);var os=this.get("itemController"),is=os.changeItemVisibility(rs,!1);if(as&&this.get("enabledStack")){var us=is.getID(),ls=is.getType(),fs={},hs={};switch(ls){case"node":fs.nodes=[{id:us,visible:!0}],hs.nodes=[{id:us,visible:!1}];break;case"edge":fs.nodes=[{id:us,visible:!0}],hs.edges=[{id:us,visible:!1}];break;case"combo":fs.nodes=[{id:us,visible:!0}],hs.combos=[{id:us,visible:!1}];break}this.pushStack("visible",{before:fs,after:hs})}},ts.prototype.refreshItem=function(rs){var as=this.get("itemController");as.refreshItem(rs)},ts.prototype.setAutoPaint=function(rs){var as=this;as.set("autoPaint",rs);var os=as.get("canvas");os.set("autoDraw",rs)},ts.prototype.remove=function(rs,as){as===void 0&&(as=!0),this.removeItem(rs,as)},ts.prototype.removeItem=function(rs,as){as===void 0&&(as=!0);var os=rs;if(isString$2(rs)&&(os=this.findById(rs)),!os&&isString$2(rs))console.warn("The item ".concat(rs," to be removed does not exist!"));else if(os){var is="";if(os.getType&&(is=os.getType()),as&&this.get("enabledStack")){var us=__assign$h(__assign$h({},os.getModel()),{itemType:is}),ls={};switch(is){case"node":{ls.nodes=[us],ls.edges=[];for(var fs=os.getEdges(),hs=fs.length-1;hs>=0;hs--)ls.edges.push(__assign$h(__assign$h({},fs[hs].getModel()),{itemType:"edge"}));break}case"edge":ls.edges=[us];break;case"combo":ls.combos=[us];break}this.pushStack("delete",{before:ls,after:{}})}if(is==="node"){var vs=os.getModel();vs.comboId&&this.updateComboTree(os,void 0,!1)}var gs=this.get("itemController");if(gs.removeItem(os),is==="combo"){var ys=reconstructTree$1(this.get("comboTrees"));this.set("comboTrees",ys)}}},ts.prototype.innerAddItem=function(rs,as,os){if(!singleDataValidation(rs,as))return!1;if(as.id&&this.findById(as.id)){console.warn("This item exists already. Be sure the id %c".concat(as.id,"%c is unique."),"font-size: 20px; color: red;","");return}var is,us=this.get("comboTrees")||[];if(rs==="combo"){var ls=this.get("itemMap"),fs=!1;if(us.forEach(function(ms){fs||traverseTreeUp$1(ms,function(Ss){if(as.parentId===Ss.id){fs=!0;var Ms=__assign$h({id:as.id,depth:Ss.depth+2},as);Ss.children?Ss.children.push(Ms):Ss.children=[Ms],as.depth=Ms.depth,is=os.addItem(rs,as)}var $s=ls[Ss.id];return fs&&$s&&$s.getType&&$s.getType()==="combo"&&os.updateCombo($s,Ss.children),!0})}),!fs){var hs=__assign$h({id:as.id,depth:0},as);as.depth=hs.depth,us.push(hs),is=os.addItem(rs,as)}this.set("comboTrees",us),as.collapsed&&(this.collapseCombo(is,!1),this.updateCombo(is))}else if(rs==="node"&&isString$2(as.comboId)&&us){var vs=this.findById(as.comboId);vs&&vs.getType&&vs.getType()!=="combo"&&console.warn("'".concat(as.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),is=os.addItem(rs,as);var gs=this.get("itemMap"),ys=!1,xs=!1;us.forEach(function(ms){xs||ys||traverseTreeUp$1(ms,function(Ss){if(Ss.id===as.id)return xs=!0,!1;if(as.comboId===Ss.id&&!xs){ys=!0;var Ms=clone$b(as);Ms.itemType="node",Ss.children?Ss.children.push(Ms):Ss.children=[Ms],Ms.depth=Ss.depth+1}return ys&&gs[Ss.id].getType&&gs[Ss.id].getType()==="combo"&&os.updateCombo(gs[Ss.id],Ss.children),!0})})}else is=os.addItem(rs,as);if(rs==="node"&&as.comboId||rs==="combo"&&as.parentId){var vs=this.findById(as.comboId||as.parentId);vs&&vs.getType&&vs.getType()==="combo"&&vs.addChild(is)}return is},ts.prototype.addItem=function(rs,as,os,is){os===void 0&&(os=!0),is===void 0&&(is=!0);var us=this.get("comboSorted");this.set("comboSorted",us&&!is);var ls=this.get("itemController"),fs=this.innerAddItem(rs,as,ls);if(fs===!1||fs===!0)return fs;var hs=this.get("combos");if(hs&&hs.length>0&&this.sortCombos(),this.autoPaint(),os&&this.get("enabledStack")){var vs=__assign$h(__assign$h({},fs.getModel()),{itemType:rs}),gs={};switch(rs){case"node":gs.nodes=[vs];break;case"edge":gs.edges=[vs];break;case"combo":gs.combos=[vs];break}this.pushStack("add",{before:{},after:gs})}return fs},ts.prototype.addItems=function(rs,as,os){rs===void 0&&(rs=[]),as===void 0&&(as=!0),os===void 0&&(os=!0);var is=this.get("comboSorted");this.set("comboSorted",is&&!os);for(var us=this.get("itemController"),ls=[],fs=0;fs<rs.length;fs++){var hs=rs[fs];hs.type!=="edge"&&hs.type!=="vedge"?ls.push(this.innerAddItem(hs.type,hs.model,us)):ls.push(void 0)}for(var fs=0;fs<rs.length;fs++){var hs=rs[fs];(hs.type==="edge"||hs.type==="vedge")&&(ls[fs]=this.innerAddItem(hs.type,hs.model,us))}if(os){var vs=this.get("combos");vs&&vs.length>0&&this.sortCombos()}if(this.autoPaint(),as&&this.get("enabledStack")){for(var gs={nodes:[],edges:[],combos:[]},fs=0;fs<rs.length;fs++){var ys=rs[fs].type,xs=ls[fs];if(xs&&xs!==!0){var ms=__assign$h(__assign$h({},xs.getModel()),{itemType:ys});switch(ys){case"node":gs.nodes.push(ms);break;case"edge":gs.edges.push(ms);break;case"combo":gs.combos.push(ms);break}}}this.pushStack("addItems",{before:{},after:gs})}return ls},ts.prototype.add=function(rs,as,os,is){return os===void 0&&(os=!0),is===void 0&&(is=!0),this.addItem(rs,as,os,is)},ts.prototype.updateItem=function(rs,as,os){var is=this;os===void 0&&(os=!0);var us=this.get("itemController"),ls;isString$2(rs)?ls=this.findById(rs):ls=rs;var fs=os&&this.get("enabledStack"),hs;fs&&(hs=clone$b(ls.getModel()));var vs="";ls.getType&&(vs=ls.getType());var gs=__spreadArray$4([],ls.getStates(),!0);if(vs==="combo"&&each$1(gs,function(Ss){return is.setItemState(ls,Ss,!1)}),us.updateItem(ls,as),vs==="combo"&&each$1(gs,function(Ss){return is.setItemState(ls,Ss,!0)}),fs){var ys={nodes:[],edges:[],combos:[]},xs={nodes:[],edges:[],combos:[]},ms=__assign$h({id:hs.id},as);switch(vs){case"node":ys.nodes.push(hs),xs.nodes.push(ms);break;case"edge":ys.edges.push(hs),xs.edges.push(ms);break;case"combo":ys.combos.push(hs),xs.combos.push(ms);break}this.pushStack("update",{before:ys,after:xs})}},ts.prototype.update=function(rs,as,os){os===void 0&&(os=!0),this.updateItem(rs,as,os)},ts.prototype.setItemState=function(rs,as,os){isString$2(rs)&&(rs=this.findById(rs));var is=this.get("itemController");is.setItemState(rs,as,os);var us=this.get("stateController");us.updateState(rs,as,os)},ts.prototype.priorityState=function(rs,as){var os=this.get("itemController");os.priorityState(rs,as)},ts.prototype.data=function(rs){dataValidation(rs),this.set("data",rs)},ts.prototype.render=function(){var rs=this;this.set("comboSorted",!1);var as=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!as)throw new Error("data must be defined first");var os=as.nodes,is=os===void 0?[]:os,us=as.edges,ls=us===void 0?[]:us,fs=as.combos,hs=fs===void 0?[]:fs;if(this.clear(!0),this.emit("beforerender"),rs.addItems(is.map(function(Ms){return{type:"node",model:Ms}}),!1,!1),(hs==null?void 0:hs.length)!==0){var vs=plainCombosToTrees$1(hs,is);this.set("comboTrees",vs),rs.addCombos(hs)}rs.addItems(ls.map(function(Ms){return{type:"edge",model:Ms}}),!1,!1);var gs=rs.get("animate");(rs.get("fitView")||rs.get("fitCenter"))&&rs.set("animate",!1);var ys=rs.get("layoutController");if(ys){if(ys.layout(xs),this.destroyed)return}else xs();function xs(){(rs.get("comboTrees")||[]).forEach(function(Ms){traverseTreeUp$1(Ms,function($s){var bs=rs.findById($s.id);return bs.getType()==="combo"&&$s.collapsed&&(rs.collapseCombo($s.id,!1),rs.updateCombo(bs)),!0})}),rs.get("fitView")?rs.fitView():rs.get("fitCenter")&&rs.fitCenter(),rs.autoPaint(),rs.emit("afterrender"),(rs.get("fitView")||rs.get("fitCenter"))&&rs.set("animate",gs),setTimeout(function(){var Ms;(Ms=rs.getCombos())===null||Ms===void 0||Ms.forEach(function($s){$s.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(hs&&hs.length!==0)this.sortCombos();else if(as.nodes&&as.edges&&as.nodes.length<as.edges.length){var ms=this.getNodes();ms.forEach(function(Ms){Ms.toFront()})}else{var Ss=this.getEdges();Ss.forEach(function(Ms){Ms.toBack()})}},ts.prototype.read=function(rs){this.data(rs),this.render()},ts.prototype.diffItems=function(rs,as,os){var is=this,us,ls=this.get("itemMap");each$1(os,function(fs){if(us=ls[fs.id],us){if(is.get("animate")&&rs===NODE$2){var hs=us.getContainer().getMatrix();hs||(hs=[1,0,0,0,1,0,0,0,1]),us.set("originAttrs",{x:hs[6],y:hs[7]})}is.updateItem(us,fs,!1)}else us=is.addItem(rs,fs,!1);us&&as["".concat(rs,"s")].push(us)})},ts.prototype.changeData=function(rs,as){var os=this,is;as===void 0&&(as=!0);var us=this,ls=rs||us.get("data");if(!dataValidation(ls))return this;this.emit("beforechangedata"),as&&this.get("enabledStack")&&this.pushStack("changedata",{before:us.save(),after:ls}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(As){return us.clearItemStates(As)}),this.getEdges().map(function(As){return us.clearItemStates(As)});var fs=this.get("canvas"),hs=fs.get("localRefresh");fs.set("localRefresh",!1),us.get("data")||(us.data(ls),us.render());var vs=this.get("itemMap"),gs={nodes:[],edges:[]},ys=ls.combos;if(ys){var xs=plainCombosToTrees$1(ys,ls.nodes);this.set("comboTrees",xs)}else this.set("comboTrees",[]);this.diffItems("node",gs,ls.nodes),each$1(vs,function(As,Is){vs[Is].getModel().depth=0,!(As.getType&&As.getType()==="edge")&&(As.getType&&As.getType()==="combo"?(delete vs[Is],As.destroy()):gs.nodes.indexOf(As)<0&&(delete vs[Is],us.remove(As,!1)))});for(var ms=this.getCombos(),Ss=ms.length,Ms=Ss-1;Ms>=0;Ms--)ms[Ms].destroyed&&ms.splice(Ms,1);ys&&(us.addCombos(ys),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",gs,ls.edges),each$1(vs,function(As,Is){As.getType&&(As.getType()==="node"||As.getType()==="combo")||gs.edges.indexOf(As)<0&&(delete vs[Is],us.remove(As,!1))}),(this.get("comboTrees")||[]).forEach(function(As){traverseTreeUp$1(As,function(Is){var ks=os.findById(Is.id);return ks.getType()==="combo"&&Is.collapsed&&os.collapseCombo(Is.id,!1),!0})}),this.set({nodes:gs.nodes,edges:gs.edges});var $s=(this.get("layout")||{}).relayoutAtChangeData,bs=$s===void 0?!0:$s,Cs=this.get("layoutController");return bs&&Cs&&(Cs.changeData(function(){setTimeout(function(){var As;(As=us.getCombos())===null||As===void 0||As.forEach(function(Is){Is.set("animate",!0)})},0)}),us.get("animate")&&!Cs.getLayoutType()?(us.positionsAnimate(),(is=us.getCombos())===null||is===void 0||is.forEach(function(As){return As.set("animate",!0)})):us.autoPaint()),setTimeout(function(){fs.set("localRefresh",hs)},16),this.set("data",ls),this.emit("afterchangedata"),this},ts.prototype.addCombos=function(rs){var as=this,os=as.get("comboTrees"),is=this.get("itemController");is.addCombos(os,rs)},ts.prototype.createCombo=function(rs,as,os){var is=this;os===void 0&&(os=!0);var us=this.get("itemController");this.set("comboSorted",!1);var ls="",fs;if(rs){if(isString$2(rs))ls=rs,fs={id:rs};else{if(ls=rs.id,!ls){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}fs=rs}var hs=os&&this.get("enabledStack"),vs={nodes:[],combos:[]};hs&&as.forEach(function($s){var bs=is.findById($s),Cs=bs.getType();if(!(Cs!=="node"&&Cs!=="combo")){var As=bs.getModel();vs["".concat(Cs,"s")].push({id:$s,parentId:Cs==="node"?As.comboId:As.parentId})}});var gs=this.get("comboTrees"),ys=new Set(as),xs=new Map;gs&&(gs.forEach(function($s){traverseTreeUp$1($s,function(bs,Cs,As){if(ys.has(bs.id)){if(Cs){var Is=is.findById(Cs.id),ks=is.findById(bs.id);Cs.children.splice(As,1),Is.removeChild(ks),us.updateCombo(Is,Cs.children)}bs.itemType==="combo"&&xs.set(bs.id,bs)}return!0})}),gs=gs.filter(function($s){return!ys.has($s.id)}),this.set("comboTrees",gs));var ms={nodes:[],combos:[]},Ss=as.map(function($s){var bs=is.findById($s),Cs=bs.getModel(),As="";bs.getType&&(As=bs.getType());var Is=xs.get($s)||{id:bs.getID(),itemType:As};return As==="combo"?(Is.parentId=ls,Cs.parentId=ls):As==="node"&&(Is.comboId=ls,Cs.comboId=ls),hs&&ms["".concat(As,"s")].push({id:Cs.id,parentId:ls}),Is});fs.children=Ss,this.addItem("combo",fs,!1),this.set("comboSorted",!1),gs&&(gs.forEach(function($s){traverseTree$3($s,function(bs){return bs.id===ls?(bs.itemType="combo",bs.children=Ss,!1):!0})}),this.sortCombos()),hs&&(ms.combos.push(fs),this.pushStack("createCombo",{before:vs,after:ms}));var Ms=this.findById(ls);!Ms.getModel().parentId&&Ms.getChildren().combos.length&&this.updateComboTree(Ms,void 0,!1),setTimeout(function(){Ms.set("animate",!0)},0)}},ts.prototype.uncombo=function(rs,as){var os=this,is,us;as===void 0&&(as=!0);var ls=this,fs=rs;if(isString$2(rs)&&(fs=this.findById(rs)),!fs||fs.getType&&fs.getType()!=="combo"){console.warn("The item is not a combo!");return}var hs=fs.getModel(),vs=fs.getModel().parentId,gs=ls.get("comboTrees");gs||(gs=[]);var ys=this.get("itemMap"),xs=fs.get("id"),ms,Ss=[],Ms=this.get("combos"),$s=this.findById(vs),bs=as&&this.get("enabledStack"),Cs={};if(bs&&(Cs=clone$b(hs),Cs.children=[]),gs.forEach(function(Ps){ms||traverseTreeUp$1(Ps,function(Ds){var Fs;if(Ds.id===xs){ms=Ds;var Rs=fs.getEdges().map(function(Us){return Us.getID()});Rs.forEach(function(Us){os.removeItem(Us,!1)});var js=Ms.indexOf(fs);Ms.splice(js,1),delete ys[xs];var zs=clone$b(fs.getModel());fs.destroy(),os.emit("afterremoveitem",{item:zs,type:"combo"})}if(vs&&ms&&Ds.id===vs){$s.removeCombo(fs),Ss=Ds.children;var js=Ss.indexOf(ms);return js!==-1&&Ss.splice(js,1),(Fs=ms.children)===null||Fs===void 0||Fs.forEach(function(Ys){var Ks=os.findById(Ys.id),qs=Ks.getModel();Ks.getType&&Ks.getType()==="combo"?(Ys.parentId=vs,delete Ys.comboId,qs.parentId=vs,delete qs.comboId):Ks.getType&&Ks.getType()==="node"&&(Ys.comboId=vs,qs.comboId=vs),$s.addChild(Ks),Ss.push(Ys)}),os.updateCombo($s),!1}return!0})}),!vs&&ms){var As=gs.indexOf(ms);gs.splice(As,1),(is=ms.children)===null||is===void 0||is.forEach(function(Ps){Ps.parentId=void 0;var Ds=os.findById(Ps.id).getModel();delete Ds.parentId,delete Ds.comboId,Ps.itemType!=="node"&&gs.push(Ps)})}if(bs){var Is={nodes:[],combos:[]},ks={nodes:[],combos:[]};(us=ms.children)===null||us===void 0||us.forEach(function(Ps){var Ds=os.findById(Ps.id),Fs=Ds.getType();Fs!=="node"&&Fs!=="combo"||(Is["".concat(Fs,"s")].push({id:Ps.id,parentId:xs}),ks["".concat(Fs,"s")].push({id:Ps.id,parentId:vs}))}),Is.combos.push(Cs),this.pushStack("uncombo",{before:Is,after:ks})}},ts.prototype.updateCombos=function(rs){var as=this;rs===void 0&&(rs=!1);var os=this,is=this.get("comboTrees"),us=os.get("itemController"),ls=os.get("itemMap");(is||[]).forEach(function(fs){traverseTreeUp$1(fs,function(hs){var vs;if(!hs)return!0;var gs=ls[hs.id];if(((vs=gs==null?void 0:gs.getType)===null||vs===void 0?void 0:vs.call(gs))==="combo"){var ys=__spreadArray$4([],gs.getStates(),!0);each$1(ys,function(xs){return as.setItemState(gs,xs,!1)}),us.updateCombo(gs,hs.children,rs),each$1(ys,function(xs){return as.setItemState(gs,xs,!0)})}return!0})}),os.sortCombos()},ts.prototype.updateCombo=function(rs){var as=this,os=this,is=rs,us;if(isString$2(rs)&&(is=this.findById(rs)),!is||is.getType&&is.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}us=is.get("id");var ls=this.get("comboTrees"),fs=os.get("itemController"),hs=os.get("itemMap");(ls||[]).forEach(function(vs){traverseTreeUp$1(vs,function(gs){if(!gs)return!0;var ys=hs[gs.id];if(us===gs.id&&ys&&ys.getType&&ys.getType()==="combo"){var xs=__spreadArray$4([],ys.getStates(),!0);each$1(xs,function(ms){ys.getStateStyle(ms)&&as.setItemState(ys,ms,!1)}),fs.updateCombo(ys,gs.children),each$1(xs,function(ms){ys.getStateStyle(ms)&&as.setItemState(ys,ms,!0)}),us&&(us=gs.parentId)}return!0})})},ts.prototype.updateComboTree=function(rs,as,os){os===void 0&&(os=!0);var is=this;this.set("comboSorted",!1);var us;isString$2(rs)?us=is.findById(rs):us=rs;var ls=us.getModel(),fs=ls.comboId||ls.parentId,hs="";if(us.getType&&(hs=us.getType()),as&&hs==="combo"){var vs=this.get("comboTrees"),gs=!0,ys;if((vs||[]).forEach(function(bs){ys||traverseTree$3(bs,function(Cs){if(!ys)return Cs.id===us.getID()&&(ys=Cs),!0})}),traverseTree$3(ys,function(bs){return bs.id===as?(gs=!1,!1):!0}),!gs){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(os&&this.get("enabledStack")){var xs={},ms={};hs==="combo"?(xs.combos=[{id:ls.id,parentId:ls.parentId}],ms.combos=[{id:ls.id,parentId:as}]):hs==="node"&&(xs.nodes=[{id:ls.id,parentId:ls.comboId}],ms.nodes=[{id:ls.id,parentId:as}]),this.pushStack("updateComboTree",{before:xs,after:ms})}if(ls.parentId||ls.comboId){var Ss=this.findById(ls.parentId||ls.comboId);Ss&&Ss.removeChild(us)}if(hs==="combo"?ls.parentId=as:hs==="node"&&(ls.comboId=as),as){var Ms=this.findById(as);Ms&&Ms.addChild(us)}if(fs){var Ms=this.findById(fs);Ms&&Ms.removeChild(us)}var $s=reconstructTree$1(this.get("comboTrees"),ls.id,as);this.set("comboTrees",$s),this.updateCombos()},ts.prototype.save=function(){var rs=[],as=[],os=[];return each$1(this.get("nodes"),function(is){rs.push(is.getModel())}),each$1(this.get("edges"),function(is){as.push(is.getModel())}),each$1(this.get("combos"),function(is){os.push(is.getModel())}),{nodes:rs,edges:as,combos:os}},ts.prototype.changeSize=function(rs,as){var os=this.get("viewController");return os.changeSize(rs,as),this},ts.prototype.refresh=function(){var rs=this;if(rs.emit("beforegraphrefresh"),rs.get("animate"))rs.positionsAnimate();else{var as=rs.get("nodes"),os=rs.get("edges"),is=rs.get("edges");each$1(as,function(us){us.refresh()}),each$1(os,function(us){us.refresh()}),each$1(is,function(us){us.refresh()})}rs.emit("aftergraphrefresh"),rs.autoPaint()},ts.prototype.getNodes=function(){return this.get("nodes")},ts.prototype.getEdges=function(){return this.get("edges")},ts.prototype.getCombos=function(){return this.get("combos")},ts.prototype.getComboChildren=function(rs){if(isString$2(rs)&&(rs=this.findById(rs)),!rs||rs.getType&&rs.getType()!=="combo"){console.warn("The combo does not exist!");return}return rs.getChildren()},ts.prototype.positionsAnimate=function(rs){var as=this;as.emit("beforeanimate");var os=as.get("animateCfg"),is=os.onFrame,us=rs?as.getNodes().concat(as.getCombos()):as.getNodes(),ls=us.map(function(hs){var vs=hs.getModel();return{id:vs.id,x:vs.x,y:vs.y}});as.stopAnimate();var fs=as.get("canvas");as.animating=!0,setTimeout(function(){fs.animate(function(hs){each$1(ls,function(vs){var gs=as.findById(vs.id);if(!(!gs||gs.destroyed)){var ys=gs.get("originAttrs"),xs=gs.get("model"),ms=gs.getContainer().getMatrix();if(ys==null&&(ms&&(ys={x:ms[6],y:ms[7]}),gs.set("originAttrs",ys||0)),is){var Ss=is(gs,hs,vs,ys||{x:0,y:0});gs.set("model",Object.assign(xs,Ss))}else ys?(xs.x=ys.x+(vs.x-ys.x)*hs,xs.y=ys.y+(vs.y-ys.y)*hs):(xs.x=vs.x,xs.y=vs.y)}}),as.refreshPositions(rs)},{duration:os.duration,easing:os.easing,callback:function(){each$1(us,function(vs){vs.set("originAttrs",null)}),os.callback&&os.callback(),as.emit("afteranimate"),as.animating=!1}})},0)},ts.prototype.refreshPositions=function(rs){var as=this;as.emit("beforegraphrefreshposition");var os=as.get("nodes"),is=as.get("edges"),us=as.get("vedges"),ls=as.get("combos"),fs,hs={},vs=function(ys){each$1(ys,function(xs){fs=xs.getModel();var ms=xs.get("originAttrs");if(!(ms&&fs.x===ms.x&&fs.y===ms.y)){var Ss=xs.updatePosition({x:fs.x,y:fs.y});hs[fs.id]=Ss,fs.comboId&&(hs[fs.comboId]=hs[fs.comboId]||Ss),fs.parentId&&(hs[fs.parentId]=hs[fs.parentId]||Ss)}})};vs(ls),vs(os),ls&&ls.length!==0&&(rs&&vs(ls),as.updateCombos()),each$1(is,function(gs){var ys=gs.getSource().getModel(),xs=gs.getTarget();if(!isPlainObject$3(xs)){var ms=xs.getModel();(hs[ys.id]||hs[ms.id]||gs.getModel().isComboEdge)&&gs.refresh()}}),each$1(us,function(gs){gs.refresh()}),as.emit("aftergraphrefreshposition"),as.autoPaint()},ts.prototype.stopAnimate=function(){var rs=this.get("canvas"),as=rs.cfg.timeline;as&&as.stopAllAnimations()},ts.prototype.isAnimating=function(){return this.animating},ts.prototype.getZoom=function(){var rs=this.get("group").getMatrix();return rs?rs[0]:1},ts.prototype.getCurrentMode=function(){var rs=this.get("modeController");return rs.getMode()},ts.prototype.setMode=function(rs){var as=this.get("modeController");return as.setMode(rs),this},ts.prototype.clear=function(rs){var as;return rs===void 0&&(rs=!1),(as=this.get("canvas"))===null||as===void 0||as.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),rs||this.emit("afterrender"),this},ts.prototype.updateLayout=function(rs,as,os,is){var us=this;rs===void 0&&(rs={}),is===void 0&&(is=!0);var ls=this.get("layoutController");if(isString$2(rs)&&(rs={type:rs}),as){var fs=os;fs||(as==="begin"?fs={x:0,y:0}:fs={x:this.getWidth()/2,y:this.getHeight()/2}),fs=this.getPointByCanvas(fs.x,fs.y);var hs=["force","gForce","fruchterman","force2"];hs.includes(rs.type)||!rs.type&&hs.includes(ls==null?void 0:ls.layoutType)?rs.center=[fs.x,fs.y]:this.once("afterlayout",function(ys){var xs=us.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];fs.x=fs.x*xs[0]+xs[6],fs.y=fs.y*xs[0]+xs[7];var ms=us.getGroup().getCanvasBBox(),Ss=ms.minX,Ms=ms.maxX,$s=ms.minY,bs=ms.maxY,Cs={x:(Ss+Ms)/2,y:($s+bs)/2};as==="begin"&&(Cs.x=Ss,Cs.y=$s),us.translate(fs.x-Cs.x,fs.y-Cs.y)})}var vs=__assign$h({},this.get("layout")),gs={};Object.assign(gs,vs,rs),rs.pipes&&!rs.type?delete gs.type:!rs.pipes&&gs.type&&delete gs.pipes,this.set("layout",gs),ls&&(ls.isLayoutTypeSame(gs)&&gs.gpuEnabled===vs.gpuEnabled?ls.updateLayoutCfg(gs):ls.changeLayout(gs),is&&this.get("enabledStack")&&this.pushStack("layout",{before:vs,after:gs}))},ts.prototype.destroyLayout=function(){var rs=this.get("layoutController");rs==null||rs.destroyLayout()},ts.prototype.layout=function(){var rs,as=this.get("layoutController"),os=this.get("layout");if(!(!os||!as)){if(os.workerEnabled){as.layout();return}!((rs=as.layoutMethods)===null||rs===void 0)&&rs.length?as.relayout(!0):as.layout()}},ts.prototype.collapseCombo=function(rs,as){var os=this;if(as===void 0&&(as=!0),!this.destroyed){if(isString$2(rs)&&(rs=this.findById(rs)),!rs){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"collapse",item:rs});var is=rs.getModel(),us=this.get("itemController");us.collapseCombo(rs,as),is.collapsed=!0;var ls=this.getEdges().concat(this.get("vedges")),fs=[],hs=this.get("comboTrees"),vs=!1;(hs||[]).forEach(function(ys){vs||traverseTree$3(ys,function(xs){if(vs&&xs.depth<=is.depth)return!1;if(is.id===xs.id&&(vs=!0),vs){var ms=os.findById(xs.id);ms&&ms.getType&&ms.getType()==="combo"&&(fs=fs.concat(ms.getNodes()),fs=fs.concat(ms.getCombos()))}return!0})});var gs={};ls.forEach(function(ys){var xs=ys.getModel(),ms=xs.isVEdge,Ss=xs.size,Ms=Ss===void 0?1:Ss;if(!(ys.isVisible()&&!ms)){var $s=ys.getSource(),bs=ys.getTarget(),Cs=null,As;if($s.getModel().id===is.id||fs.includes($s)&&!fs.includes(bs)?(Cs=bs,As=!1):(bs.getModel().id===is.id||!fs.includes($s)&&fs.includes(bs))&&(Cs=$s,As=!0),Cs){if(ms){os.removeItem(ys,!1);return}for(var Is=Cs.getModel();!Cs.isVisible();){var ks=Is.parentId,Ps=Is.comboId,Ds=ks||Ps;if(Cs=os.findById(Ds),!Cs||!Ds)return;Is=Cs.getModel()}var Fs=Is.id,Rs=As?{source:Fs,target:is.id,size:Ms,isVEdge:!0}:{source:is.id,target:Fs,size:Ms,isVEdge:!0},js="".concat(Rs.source,"-").concat(Rs.target);if(gs[js]){gs[js].size+=Ms;return}gs[js]=Rs}}}),this.addItems(Object.values(gs).map(function(ys){return{type:"vedge",model:ys}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:rs})}},ts.prototype.expandCombo=function(rs,as){var os=this;if(as===void 0&&(as=!0),isString$2(rs)&&(rs=this.findById(rs)),!rs||rs.getType&&rs.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:rs});var is=rs.getModel(),us=this.get("itemController");us.expandCombo(rs,as),is.collapsed=!1;var ls=this.getEdges().concat(this.get("vedges")),fs=[],hs=this.get("comboTrees"),vs=!1;(hs||[]).forEach(function(ys){vs||traverseTree$3(ys,function(xs){if(vs&&xs.depth<=is.depth)return!1;if(is.id===xs.id&&(vs=!0),vs){var ms=os.findById(xs.id);ms&&ms.getType&&ms.getType()==="combo"&&(fs=fs.concat(ms.getNodes()),fs=fs.concat(ms.getCombos()))}return!0})});var gs={};ls.forEach(function(ys){if(!(ys.isVisible()&&!ys.getModel().isVEdge)){var xs=ys.getSource(),ms=ys.getTarget(),Ss=xs.get("id"),Ms=ms.get("id"),$s=null,bs;if(Ss===is.id||fs.includes(xs)&&!fs.includes(ms)?($s=ms,bs=!1):Ms===is.id||!fs.includes(xs)&&fs.includes(ms)?($s=xs,bs=!0):fs.includes(xs)&&fs.includes(ms)&&xs.isVisible()&&ms.isVisible()&&ys.show(),$s){var Cs=ys.getModel(),As=Cs.isVEdge,Is=Cs.size,ks=Is===void 0?1:Is;if(As){os.removeItem(ys,!1);return}for(var Ps=$s.getModel();!$s.isVisible();){var Ds=Ps.parentId,Fs=Ps.comboId,Rs=Ds||Fs;if($s=os.findById(Rs),!$s||!Rs)return;Ps=$s.getModel()}for(var js=Ps.id,zs=bs?ms:xs,Us=zs.getModel();!zs.isVisible();){var Ys=Us.parentId,Ks=Us.comboId,qs=Ys||Ks;if(zs=os.findById(qs),!zs||!qs)return;if(Us.comboId===is.id||Us.parentId===is.id)break;Us=zs.getModel()}var _l=Us.id;if(js){var Js=bs?{source:js,target:_l,isVEdge:!0,size:ks}:{source:_l,target:js,isVEdge:!0,size:ks},Vs="".concat(Js.source,"-").concat(Js.target);if(gs[Vs]){gs[Vs].size+=ks;return}gs[Vs]=Js}}}}),this.addItems(Object.values(gs).map(function(ys){return{type:"vedge",model:ys}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:rs})},ts.prototype.collapseExpandCombo=function(rs,as){if(as===void 0&&(as=!0),isString$2(rs)&&(rs=this.findById(rs)),!(!rs||rs.getType&&rs.getType()!=="combo")){for(var os=rs.getModel(),is=this.findById(os.parentId);is;){var us=is.getModel();if(us.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),is=void 0;return}is=this.findById(us.parentId)}var ls=os.collapsed;ls?this.expandCombo(rs,as):this.collapseCombo(rs,as),this.updateCombo(rs)}},ts.prototype.getNeighbors=function(rs,as){var os=rs;return isString$2(rs)&&(os=this.findById(rs)),os.getNeighbors(as)},ts.prototype.getNodeDegree=function(rs,as,os){as===void 0&&(as=void 0),os===void 0&&(os=!1);var is=rs;isString$2(rs)&&(is=this.findById(rs));var us=this.get("degrees");(!us||os)&&(us=degree$3(this.save()),this.set("degrees",us));var ls=us[is.getID()],fs=0;if(!ls)return 0;switch(as){case"in":fs=ls.inDegree;break;case"out":fs=ls.outDegree;break;case"all":fs=ls;break;default:fs=ls.degree;break}return fs},ts.prototype.getUndoStack=function(){return this.undoStack},ts.prototype.getRedoStack=function(){return this.redoStack},ts.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},ts.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},ts.prototype.pushStack=function(rs,as,os){if(rs===void 0&&(rs="update"),os===void 0&&(os="undo"),!this.get("enabledStack")){console.warn("请先启用 undo & redo 功能，在实例化 Graph 时候配置 enabledStack: true !");return}var is=as?clone$b(as):{before:{},after:clone$b(this.save())};os==="redo"?this.redoStack.push({action:rs,data:is}):this.undoStack.push({action:rs,data:is}),this.emit("stackchange",{action:rs,stackType:os,undoStack:this.undoStack,redoStack:this.redoStack})},ts.prototype.getAdjMatrix=function(rs,as){rs===void 0&&(rs=!0),as===void 0&&(as=this.get("directed"));var os=this.get("adjMatrix");return(!os||!rs)&&(os=adjMatrix$2(this.save(),as),this.set("adjMatrix",os)),os},ts.prototype.getShortestPathMatrix=function(rs,as){rs===void 0&&(rs=!0),as===void 0&&(as=this.get("directed"));var os=this.get("adjMatrix"),is=this.get("shortestPathMatrix");return(!os||!rs)&&(os=adjMatrix$2(this.save(),as),this.set("adjMatrix",os)),(!is||!rs)&&(is=floydWarshall$6(this.save(),as),this.set("shortestPathMatrix",is)),is},ts.prototype.on=function(rs,as,os){return ns.prototype.on.call(this,rs,as,os)},ts.prototype.destroy=function(){var rs,as,os,is,us;this.emit("beforedestroy"),this.clear(),this.clearStack(),(rs=this.get("itemController"))===null||rs===void 0||rs.destroy(),(as=this.get("modeController"))===null||as===void 0||as.destroy(),(os=this.get("viewController"))===null||os===void 0||os.destroy(),(is=this.get("stateController"))===null||is===void 0||is.destroy(),(us=this.get("canvas"))===null||us===void 0||us.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},ts.prototype.createHull=function(rs){if(!rs.members||rs.members.length<1){console.warn("Create hull failed! The members is empty.");return}var as=this.get("hullGroup"),os=this.get("hullMap");if(os||(os={},this.set("hullMap",os)),(!as||as.get("destroyed"))&&(as=this.get("group").addGroup({id:"hullGroup"}),as.toBack(),this.set("hullGroup",as)),os[rs.id])return console.warn("Existed hull id."),os[rs.id];var is=as.addGroup({id:"".concat(rs.id,"-container")}),us=new Hull$1(this,__assign$h(__assign$h({},rs),{group:is})),ls=us.id;return os[ls]=us,us},ts.prototype.getHulls=function(){return this.get("hullMap")},ts.prototype.getHullById=function(rs){return this.get("hullMap")[rs]},ts.prototype.removeHull=function(rs){var as,os;isString$2(rs)?os=this.getHullById(rs):os=rs,(as=this.get("hullMap"))===null||as===void 0||delete as[os.id],os.destroy()},ts.prototype.removeHulls=function(){var rs=this.getHulls();!rs||!Object.keys(rs).length||(Object.keys(rs).forEach(function(as){var os=rs[as];os.destroy()}),this.set("hullMap",{}))},ts}(EventEmitter);function _typeof$c(ns){"@babel/helpers - typeof";return _typeof$c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ts){return typeof ts}:function(ts){return ts&&typeof Symbol=="function"&&ts.constructor===Symbol&&ts!==Symbol.prototype?"symbol":typeof ts},_typeof$c(ns)}var transform$d=transform$i,CLS_SHAPE_SUFFIX$1="-shape",CLS_LABEL_SUFFIX$1="-label",ARROWS$2=["startArrow","endArrow"],SHAPE_DEFAULT_ATTRS$1={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},PATH_SHAPE_DEFAULT_ATTRS$1={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},SHAPES_DEFAULT_ATTRS$1={edge:PATH_SHAPE_DEFAULT_ATTRS$1,node:SHAPE_DEFAULT_ATTRS$1,combo:SHAPE_DEFAULT_ATTRS$1},CLS_LABEL_BG_SUFFIX$1="-label-bg",shapeBase$1={options:{labelCfg:{style:{fontFamily:Global$2.windowFontFamily}},descriptionCfg:{style:{fontFamily:Global$2.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(ts){return{}},getOptions:function(ts,rs){return rs==="move"||rs!=null&&rs.includes("bbox")?ts:deepMix$2({},this.options,this.getCustomConfig(ts)||{},ts)},draw:function(ts,rs){rs.shapeMap={},this.mergeStyle=this.getOptions(ts);var as=this.drawShape(ts,rs);if(as.set("className",this.itemType+CLS_SHAPE_SUFFIX$1),rs.shapeMap[this.itemType+CLS_SHAPE_SUFFIX$1]=as,ts.label){var os=this.drawLabel(ts,rs);os.set("className",this.itemType+CLS_LABEL_SUFFIX$1),rs.shapeMap[this.itemType+CLS_LABEL_SUFFIX$1]=os}return as},afterDraw:function(ts,rs,as){},drawShape:function(ts,rs){return null},drawLabel:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)||{}).labelCfg,os=as||{},is=this.getLabelStyle(ts,os,rs),us=is.rotate;delete is.rotate;var ls=rs.addShape("text",{attrs:is,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(rs.shapeMap["text-shape"]=ls,!isNaN(us)&&us!==""){var fs=ls.getBBox(),hs=[1,0,0,0,1,0,0,0,1];if(is.rotateCenter)switch(is.rotateCenter){case"center":hs=transform$d(hs,[["t",-fs.width/2,-fs.height/2],["r",us],["t",fs.width/2,fs.height/2]]);break;case"lefttop":hs=transform$d(hs,[["t",-is.x,-is.y],["r",us],["t",is.x,is.y]]);break;case"leftcenter":hs=transform$d(hs,[["t",-is.x,-is.y-fs.height/2],["r",us],["t",is.x,is.y+fs.height/2]]);break;default:hs=transform$d(hs,[["t",-fs.width/2,-fs.height/2],["r",us],["t",fs.width/2,fs.height/2]]);break}else hs=transform$d(hs,[["t",-is.x,-is.y-fs.height/2],["r",us],["t",is.x,is.y+fs.height/2]]);ls.setMatrix(hs)}if(is.background){var vs=this.drawLabelBg(ts,rs,ls),gs=this.itemType+CLS_LABEL_BG_SUFFIX$1;vs.set("classname",gs),rs.shapeMap[gs]=vs,ls.toFront()}return ls},drawLabelBg:function(ts,rs,as){var os=this.options.labelCfg,is=mix$1({},os,ts.labelCfg),us=this.getLabelBgStyleByPosition(as,is),ls=rs.addShape("rect",{name:"text-bg-shape",attrs:us,labelRelated:!0});return rs.shapeMap["text-bg-shape"]=ls,ls},getLabelStyleByPosition:function(ts,rs,as){return{text:ts.label}},getLabelBgStyleByPosition:function(ts,rs){return{}},getLabelStyle:function(ts,rs,as){var os=this.getLabelStyleByPosition(ts,rs,as),is="".concat(this.itemType,"Label"),us=Global$2[is]?Global$2[is].style:null;return __assign$h(__assign$h(__assign$h({},us),os),rs.style)},getShapeStyle:function(ts){return ts.style},update:function(ts,rs,as){this.updateShapeStyle(ts,rs,as),this.updateLabel(ts,rs,as)},updateShapeStyle:function(ts,rs,as){var os,is=rs.getContainer(),us=rs.getKeyShape(),ls=mix$1({},us.attr(),ts.style),fs=function(gs){var ys,xs=ls[gs];if(isPlainObject$3(xs)){var ms=((os=is.shapeMap)===null||os===void 0?void 0:os[gs])||is.find(function(Ss){return Ss.get("name")===gs});ms==null||ms.attr(xs)}else us.attr((ys={},ys[gs]=xs,ys))};for(var hs in ls)fs(hs)},updateLabel:function(ts,rs,as){var os,is,us=rs.getContainer(),ls=(this.mergeStyle||this.getOptions({},as)||{}).labelCfg,fs=ls===void 0?{}:ls,hs=this.itemType+CLS_LABEL_SUFFIX$1,vs=us.shapeMap[hs]||us.find(function(As){return As.get("className")===hs}),gs=this.itemType+CLS_LABEL_BG_SUFFIX$1,ys=us.shapeMap[gs]||us.find(function(As){return As.get("className")===gs});if(vs&&ts.label===void 0&&(us.removeChild(vs),delete us.shapeMap[hs],ys&&(us.removeChild(ys),delete us.shapeMap[gs])),ts.label||ts.label==="")if(vs){(!as||as==="bbox|label"||this.itemType==="edge"&&as!=="style")&&(fs=deepMix$2(fs,ts.labelCfg));var ms=this.getLabelStyleByPosition(ts,fs,us),Ss=(os=ts.labelCfg)===null||os===void 0?void 0:os.style,Ms=__assign$h(__assign$h({},ms),Ss),$s=Ms.rotate;if(delete Ms.rotate,!isNaN($s)&&$s!==""){var bs=[1,0,0,0,1,0,0,0,1];bs=transform$d(bs,[["t",-Ms.x,-Ms.y],["r",$s],["t",Ms.x,Ms.y]]),Ms.matrix=bs,vs.attr(Ms)}else((is=vs.getMatrix())===null||is===void 0?void 0:is[4])!==1&&vs.resetMatrix(),vs.attr(Ms);if(!ys)Ms.background&&(ys=this.drawLabelBg(ts,us,vs),ys.set("classname",gs),us.shapeMap[gs]=ys,vs.toFront());else if(Ms.background){var Cs=this.getLabelBgStyleByPosition(vs,fs);ys.attr(Cs)}else us.removeChild(ys)}else{var xs=this.drawLabel(ts,us);xs.set("className",hs),us.shapeMap[hs]=xs}},afterUpdate:function(ts,rs){},setState:function(ts,rs,as){var os,is,us,ls=as.get("keyShape");if(!(!ls||ls.destroyed)){var fs=as.getType(),hs=isBoolean$2(rs)?ts:"".concat(ts,":").concat(rs),vs=this.getStateStyle(hs,as),gs=as.getStateStyle(hs);if(!(!gs&&!vs)){var ys=mix$1({},gs||vs),xs=as.getContainer(),ms={x:1,y:1,cx:1,cy:1,matrix:1};if(fs==="combo"&&(ms.r=1,ms.width=1,ms.height=1),rs){var Ss=function(qs){var _l,Js=ys[qs];if(isPlainObject$3(Js)&&!ARROWS$2.includes(qs)){var Vs=((us=xs.shapeMap)===null||us===void 0?void 0:us[qs])||xs.find(function(Zs){return Zs.get("name")===qs});Vs==null||Vs.attr(Js)}else ls.attr((_l={},_l[qs]=Js,_l))};for(var Ms in ys)Ss(Ms)}else{var $s=cloneBesidesImg(as.getCurrentStatesStyle()),bs=as.getModel(),Cs=mix$1({},bs.style,cloneBesidesImg(as.getOriginStyle())),As=ls.get("name"),Is=ls.attr(),ks={};Object.keys(Is).forEach(function(Ks){if(Ks!=="img"){var qs=Is[Ks];qs&&_typeof$c(qs)==="object"?ks[Ks]=clone$b(qs):ks[Ks]=qs}});var Ps={},Ds=function(qs){var _l=ys[qs];if(isPlainObject$3(_l)&&!ARROWS$2.includes(qs)){var Js=xs.shapeMap[qs]||xs.find(function(Sl){return Sl.get("name")===qs});if(Js){var Vs=cloneBesidesImg(Js.attr());each$1(_l,function(Sl,Il){if(qs===As&&ks[Il]&&!ms[Il]){delete ks[Il];var Nl=Cs[qs][Il]||SHAPES_DEFAULT_ATTRS$1[fs][Il];ls.attr(Il,Nl)}else if(Vs[Il]||Vs[Il]===0){delete Vs[Il];var Tl=Cs[qs][Il]||SHAPES_DEFAULT_ATTRS$1[fs][Il];Js.attr(Il,Tl)}}),Ps[qs]=Vs}}else if(ks[qs]&&!ms[qs]){delete ks[qs];var Zs=Cs[qs]||(Cs[As]?Cs[As][qs]:void 0)||SHAPES_DEFAULT_ATTRS$1[fs][qs];ls.attr(qs,Zs)}};for(var Fs in ys)Ds(Fs);As?Ps[As]=ks:mix$1(Ps,ks);for(var Ms in $s)if(!ms[Ms]){var Rs=$s[Ms];(!isPlainObject$3(Rs)||ARROWS$2.includes(Ms))&&(As?(mix$1(Cs[As],(is={},is[Ms]=Rs,is)),delete Cs[Ms]):mix$1(Cs,(os={},os[Ms]=Rs,os)),delete $s[Ms])}var js={};deepMix$2(js,Cs,Ps,$s);var zs=!1,Us=function(qs){var _l,Js,Vs=js[qs];if(isPlainObject$3(Vs)&&!ARROWS$2.includes(qs)){var Zs=xs.shapeMap[qs]||xs.find(function(Il){return Il.get("name")===qs});Zs&&((Zs.get("type")==="text"||Zs.get("labelRelated"))&&(delete Vs.x,delete Vs.y,delete Vs.matrix),qs===As&&(fs==="combo"&&(delete Vs.r,delete Vs.width,delete Vs.height),zs=!0),Zs.attr(Vs))}else if(!zs){var Sl=Vs||SHAPES_DEFAULT_ATTRS$1[fs][qs];fs==="combo"?As||ls.attr((_l={},_l[qs]=Sl,_l)):ls.attr((Js={},Js[qs]=Sl,Js))}};for(var Ys in js)Us(Ys)}}}},getStateStyle:function(ts,rs){var as=rs.getModel(),os=rs.getType(),is=this.getOptions(as),us=is.stateStyles,ls=is.style,fs=ls===void 0?{}:ls,hs=as.stateStyles?as.stateStyles[ts]:us&&us[ts];return os==="combo"?clone$b(hs):mix$1({},fs,hs)},getControlPoints:function(ts){return ts.controlPoints},getAnchorPoints:function(ts){var rs,as,os=(ts==null?void 0:ts.anchorPoints)||((rs=this.getCustomConfig(ts))===null||rs===void 0?void 0:rs.anchorPoints)||((as=this.options)===null||as===void 0?void 0:as.anchorPoints);return os}},singleNode$1={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Global$2.nodeLabel.offset,getSize:function(ts){var rs,as=((rs=this.mergeStyle)===null||rs===void 0?void 0:rs.size)||ts.size||this.getOptions({}).size||Global$2.defaultNode.size;return isArray$2(as)&&as.length===1&&(as=[as[0],as[0]]),isArray$2(as)||(as=[as,as]),as},getLabelStyleByPosition:function(ts,rs){var as=rs.maxLength,os=ts.label;as&&(os=truncateLabelByLength(os,as));var is=rs.position||this.labelPosition;if(is==="center")return{x:0,y:0,text:os,textBaseline:"middle",textAlign:"center"};var us=rs.offset;isNil$2(us)&&(us=this.offset);var ls=this.getSize(ts),fs;switch(is){case"top":fs={x:0,y:-ls[1]/2-us,textBaseline:"bottom",textAlign:"center"};break;case"bottom":fs={x:0,y:ls[1]/2+us,textBaseline:"top",textAlign:"center"};break;case"left":fs={x:-ls[0]/2-us,y:0,textBaseline:"middle",textAlign:"right"};break;default:fs={x:ls[0]/2+us,y:0,textBaseline:"middle",textAlign:"left"};break}return fs.text=os,fs},getLabelBgStyleByPosition:function(ts,rs){var as;if(!ts)return{};var os=(as=rs.style)===null||as===void 0?void 0:as.background;if(!os)return{};var is=ts.getBBox(),us=formatPadding$1(os.padding),ls=is.width+us[1]+us[3],fs=is.height+us[0]+us[2];return __assign$h(__assign$h({x:is.minX-us[3],y:is.minY-us[0]},os),{width:ls,height:fs})},drawShape:function(ts,rs){var as=this.shapeType,os=this.getShapeStyle(ts),is=rs.addShape(as,{attrs:os,draggable:!0,name:"node-shape"});return rs.shapeMap["node-shape"]=is,is},updateLinkPoints:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).linkPoints,os=rs.shapeMap["link-point-left"]||rs.find(function(js){return js.get("className")==="link-point-left"}),is=rs.shapeMap["link-point-right"]||rs.find(function(js){return js.get("className")==="link-point-right"}),us=rs.shapeMap["link-point-top"]||rs.find(function(js){return js.get("className")==="link-point-top"}),ls=rs.shapeMap["link-point-bottom"]||rs.find(function(js){return js.get("className")==="link-point-bottom"}),fs;os&&(fs=os.attr()),is&&!fs&&(fs=is.attr()),us&&!fs&&(fs=us.attr()),ls&&!fs&&(fs=ls.attr()),fs||(fs=as);var hs=mix$1({},fs,ts.linkPoints),vs=hs.fill,gs=hs.stroke,ys=hs.lineWidth,xs=hs.size/2;xs||(xs=hs.r);var ms=ts.linkPoints?ts.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},Ss=ms.left,Ms=ms.right,$s=ms.top,bs=ms.bottom,Cs=this.getSize(ts),As=Cs[0],Is=Cs[1],ks={r:xs,fill:vs,stroke:gs,lineWidth:ys};if(os)!Ss&&Ss!==void 0?(os.remove(),delete rs.shapeMap["link-point-left"]):os.attr(__assign$h(__assign$h({},ks),{x:-As/2,y:0}));else if(Ss){var Ps="link-point-left";rs.shapeMap[Ps]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},ks),{x:-As/2,y:0}),className:Ps,name:Ps,isAnchorPoint:!0})}if(is)!Ms&&Ms!==void 0&&(is.remove(),delete rs.shapeMap["link-point-right"]),is.attr(__assign$h(__assign$h({},ks),{x:As/2,y:0}));else if(Ms){var Ds="link-point-right";rs.shapeMap[Ds]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},ks),{x:As/2,y:0}),className:Ds,name:Ds,isAnchorPoint:!0})}if(us)!$s&&$s!==void 0&&(us.remove(),delete rs.shapeMap["link-point-top"]),us.attr(__assign$h(__assign$h({},ks),{x:0,y:-Is/2}));else if($s){var Fs="link-point-top";rs.shapeMap[Fs]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},ks),{x:0,y:-Is/2}),className:Fs,name:Fs,isAnchorPoint:!0})}if(ls)!bs&&bs!==void 0?(ls.remove(),delete rs.shapeMap["link-point-bottom"]):ls.attr(__assign$h(__assign$h({},ks),{x:0,y:Is/2}));else if(bs){var Rs="link-point-bottom";rs.shapeMap[Rs]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},ks),{x:0,y:Is/2}),className:Rs,name:Rs,isAnchorPoint:!0})}},updateShape:function(ts,rs,as,os,is){var us=rs.get("keyShape");us.attr(__assign$h({},as)),this.updateLabel(ts,rs,is),os&&this.updateIcon(ts,rs)},updateIcon:function(ts,rs){var as=this,os=rs.getContainer(),is=(this.mergeStyle||this.getOptions(ts)).icon,us=ts.icon?ts.icon:{show:void 0,text:void 0},ls=us.show,fs=us.text,hs=os.shapeMap["".concat(this.type,"-icon")]||os.find(function($s){return $s.get("name")==="".concat(as.type,"-icon")});if(hs)if(ls||ls===void 0){var vs=mix$1({},hs.attr(),is),gs=vs.width,ys=gs===void 0?20:gs,xs=vs.height,ms=xs===void 0?20:xs;(vs.fontFamily==="iconfont"||vs.hasOwnProperty("text"))&&(ys=0,ms=0),hs.attr(__assign$h(__assign$h({},vs),{x:-ys/2,y:-ms/2}))}else hs.remove(),delete os.shapeMap["".concat(this.type,"-icon")];else if(ls){var Ss="".concat(this.type,"-icon");if(fs)os.shapeMap[Ss]=os.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},is),className:Ss,name:Ss});else{var ys=is.width,ms=is.height;os.shapeMap[Ss]=os.addShape("image",{attrs:__assign$h(__assign$h({},is),{x:-ys/2,y:-ms/2}),className:Ss,name:Ss})}var Ms=os.shapeMap["node-label"]||os.find(function($s){return $s.get("name")==="node-label"});Ms&&Ms.toFront()}}},singleNodeDef$1=__assign$h(__assign$h({},shapeBase$1),singleNode$1);Shape$3.registerNode("single-node",singleNodeDef$1);var CLS_SHAPE$1="edge-shape";function revertAlign$1(ns){var ts=ns;return ns==="start"?ts="end":ns==="end"&&(ts="start"),ts}var singleEdge$1={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Global$2.defaultEdge.size,style:{x:0,y:0,stroke:Global$2.defaultEdge.style.stroke,lineAppendWidth:Global$2.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Global$2.edgeLabel.style.fill,fontSize:Global$2.edgeLabel.style.fontSize,fontFamily:Global$2.windowFontFamily}},stateStyles:__assign$h({},Global$2.edgeStateStyles)},getPath:function(ts){var rs=[];return each$1(ts,function(as,os){os===0?rs.push(["M",as.x,as.y]):rs.push(["L",as.x,as.y])}),rs},getShapeStyle:function(ts){var rs=this.options.style,as={stroke:ts.color},os=mix$1({},rs,as,ts.style),is=ts.size||Global$2.defaultEdge.size;ts=this.getPathPoints(ts);var us=ts.startPoint,ls=ts.endPoint,fs=this.getControlPoints(ts),hs=[us];fs&&(hs=hs.concat(fs)),hs.push(ls);var vs=this.getPath(hs),gs=mix$1({},Global$2.defaultEdge.style,{stroke:Global$2.defaultEdge.color,lineWidth:is,path:vs},os);return gs},updateShapeStyle:function(ts,rs,as){var os,is=rs.getContainer(),us=((os=rs.getKeyShape)===null||os===void 0?void 0:os.call(rs))||is.shapeMap["edge-shape"],ls=ts.size;ts=this.getPathPoints(ts);var fs=ts.startPoint,hs=ts.endPoint,vs=this.getControlPoints(ts),gs=[fs];vs&&(gs=gs.concat(vs)),gs.push(hs);var ys=us.attr(),xs=ts.style||{};xs.stroke===void 0&&(xs.stroke=ts.color);var ms=ts.sourceNode,Ss=ts.targetNode,Ms={radius:xs.radius};vs||(Ms={source:ms,target:Ss,offset:xs.offset,radius:xs.radius});var $s=this.getPath(gs,Ms),bs={};as==="move"?bs={path:$s}:(ys.endArrow&&xs.endArrow===!1&&(ts.style.endArrow={path:""}),ys.startArrow&&xs.startArrow===!1&&(ts.style.startArrow={path:""}),bs=__assign$h({},ts.style),bs.lineWidth===void 0&&(bs.lineWdith=(isNumber$3(ls)?ls:ls==null?void 0:ls[0])||ys.lineWidth),bs.path===void 0&&(bs.path=$s),bs.stroke===void 0&&(bs.stroke=ys.stroke||ts.color)),us&&us.attr(bs)},getLabelStyleByPosition:function(ts,rs,as){var os=rs.position||this.labelPosition,is={},us=as==null?void 0:as.shapeMap[CLS_SHAPE$1],ls;os==="start"?ls=0:os==="end"?ls=1:ls=.5;var fs=rs.refX||this.refX,hs=rs.refY||this.refY;if(ts.startPoint.x===ts.endPoint.x&&ts.startPoint.y===ts.endPoint.y)return is.x=ts.startPoint.x+fs,is.y=ts.startPoint.y+hs,is.text=ts.label,is;var vs;isNil$2(rs.autoRotate)?vs=this.labelAutoRotate:vs=rs.autoRotate;var gs=getLabelPosition$1(us,ls,fs,hs,vs);return is.x=gs.x,is.y=gs.y,is.rotate=gs.rotate,is.textAlign=this._getTextAlign(os,gs.angle),is.text=ts.label,is},getLabelBgStyleByPosition:function(ts,rs){if(!ts)return{};var as=ts.getBBox(),os=rs.style&&rs.style.background;if(!os)return{};var is=os.padding,us=as.width+is[1]+is[3],ls=as.height+is[0]+is[2],fs=__assign$h(__assign$h({},os),{width:us,height:ls,x:as.minX-is[3],y:as.minY-is[0],matrix:[1,0,0,0,1,0,0,0,1]}),hs;return isNil$2(rs.autoRotate)?hs=this.labelAutoRotate:hs=rs.autoRotate,hs&&(fs.matrix=ts.attr("matrix")||[1,0,0,0,1,0,0,0,1]),fs},_getTextAlign:function(ts,rs){var as="center";return rs?(rs=rs%(Math.PI*2),ts!=="center"&&(rs>=0&&rs<=Math.PI/2||rs>=3/2*Math.PI&&rs<2*Math.PI?as=ts:as=revertAlign$1(ts)),as):ts},getControlPoints:function(ts){return ts.controlPoints},getPathPoints:function(ts){return ts},drawShape:function(ts,rs){var as=this.getShapeStyle(ts),os=rs.addShape("path",{className:CLS_SHAPE$1,name:CLS_SHAPE$1,attrs:as});return rs.shapeMap[CLS_SHAPE$1]=os,os},drawLabel:function(ts,rs){var as=this.options.labelCfg,os=deepMix$2({},as,ts.labelCfg),is=this.getLabelStyle(ts,os,rs),us=is.rotate;delete is.rotate;var ls=rs.addShape("text",{attrs:is,name:"text-shape",labelRelated:!0,draggable:!0});if(rs.shapeMap["text-shape"]=ls,!isNaN(us)&&us!==""&&ls.rotateAtStart(us),is.background){var fs=this.drawLabelBg(ts,rs,ls,is,us),hs=this.itemType+CLS_LABEL_BG_SUFFIX$1;fs.set("classname",hs),rs.shapeMap[hs]=fs,ls.toFront()}return ls},drawLabelBg:function(ts,rs,as,os,is){var us=this.options.labelCfg,ls=deepMix$2({},us,ts.labelCfg),fs=this.getLabelBgStyleByPosition(as,ls),hs=rs.addShape("rect",{name:"text-bg-shape",attrs:fs,labelRelated:!0});return rs.shapeMap["text-bg-shape"]=hs,hs}},singleEdgeDef$1=__assign$h(__assign$h({},shapeBase$1),singleEdge$1);Shape$3.registerEdge("single-edge",singleEdgeDef$1);Shape$3.registerEdge("line",{getControlPoints:function(){}},"single-edge");Shape$3.registerEdge("spline",{getPath:function(ts){var rs=getSpline$1(ts);return rs}},"single-edge");Shape$3.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(ts){var rs=ts.startPoint,as=ts.endPoint,os={x:(rs.x+as.x)/2,y:(rs.y+as.y)/2},is,us;if(ts.controlPoints!==void 0){if(us=ts.controlPoints[0],is=getCircleCenterByPoints$1(rs,us,as),rs.x<=as.x&&rs.y>as.y?this.clockwise=is.x>us.x?0:1:rs.x<=as.x&&rs.y<as.y?this.clockwise=is.x>us.x?1:0:rs.x>as.x&&rs.y<=as.y?this.clockwise=is.y<us.y?0:1:this.clockwise=is.y<us.y?1:0,(us.x-rs.x)/(us.y-rs.y)===(as.x-rs.x)/(as.y-rs.y))return[]}else{ts.curveOffset===void 0&&(ts.curveOffset=this.curveOffset),isArray$2(ts.curveOffset)&&(ts.curveOffset=ts.curveOffset[0]),ts.curveOffset<0?this.clockwise=0:this.clockwise=1;var ls={x:as.x-rs.x,y:as.y-rs.y},fs=Math.atan2(ls.y,ls.x);us={x:ts.curveOffset*Math.cos(-Math.PI/2+fs)+os.x,y:ts.curveOffset*Math.sin(-Math.PI/2+fs)+os.y},is=getCircleCenterByPoints$1(rs,us,as)}var hs=distance$5(rs,is),vs=[{x:hs,y:hs}];return vs},getPath:function(ts){var rs=[];return rs.push(["M",ts[0].x,ts[0].y]),ts.length===2?rs.push(["L",ts[1].x,ts[1].y]):rs.push(["A",ts[1].x,ts[1].y,0,0,this.clockwise,ts[2].x,ts[2].y]),rs}},"single-edge");Shape$3.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(ts){var rs=ts.controlPoints;if(!rs||!rs.length){var as=ts.startPoint,os=ts.endPoint;ts.curveOffset===void 0&&(ts.curveOffset=this.curveOffset),ts.curvePosition===void 0&&(ts.curvePosition=this.curvePosition),isArray$2(ts.curveOffset)&&(ts.curveOffset=ts.curveOffset[0]),isArray$2(ts.curvePosition)&&(ts.curvePosition=ts.curveOffset[0]);var is=getControlPoint$1(as,os,ts.curvePosition,ts.curveOffset);rs=[is]}return rs},getPath:function(ts){var rs=[];return rs.push(["M",ts[0].x,ts[0].y]),rs.push(["Q",ts[1].x,ts[1].y,ts[2].x,ts[2].y]),rs}},"single-edge");Shape$3.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(ts){var rs=ts.controlPoints;if(ts.curveOffset===void 0&&(ts.curveOffset=this.curveOffset),ts.curvePosition===void 0&&(ts.curvePosition=this.curvePosition),isNumber$3(ts.curveOffset)&&(ts.curveOffset=[ts.curveOffset,-ts.curveOffset]),isNumber$3(ts.curvePosition)&&(ts.curvePosition=[ts.curvePosition,1-ts.curvePosition]),!rs||!rs.length||rs.length<2){var as=ts.startPoint,os=ts.endPoint,is=getControlPoint$1(as,os,ts.curvePosition[0],ts.curveOffset[0]),us=getControlPoint$1(as,os,ts.curvePosition[1],ts.curveOffset[1]);rs=[is,us]}return rs},getPath:function(ts){var rs=[];return rs.push(["M",ts[0].x,ts[0].y]),rs.push(["C",ts[1].x,ts[1].y,ts[2].x,ts[2].y,ts[3].x,ts[3].y]),rs}},"single-edge");Shape$3.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(ts){var rs=ts.startPoint,as=ts.endPoint;ts.curvePosition===void 0&&(ts.curvePosition=this.curvePosition),ts.curveOffset===void 0&&(ts.curveOffset=this.curveOffset),ts.minCurveOffset===void 0&&(ts.minCurveOffset=this.minCurveOffset),isNumber$3(ts.curveOffset)&&(ts.curveOffset=[ts.curveOffset,-ts.curveOffset]),isNumber$3(ts.minCurveOffset)&&(ts.minCurveOffset=[ts.minCurveOffset,-ts.minCurveOffset]),isNumber$3(ts.curvePosition)&&(ts.curvePosition=[ts.curvePosition,1-ts.curvePosition]);var os=as.y-rs.y,is=[0,0];ts.curveOffset?is=ts.curveOffset:Math.abs(os)<Math.abs(ts.minCurveOffset[0])&&(is=ts.minCurveOffset);var us={x:rs.x,y:rs.y+os*this.curvePosition[0]+is[0]},ls={x:as.x,y:as.y-os*this.curvePosition[1]+is[1]};return[us,ls]}},"cubic");Shape$3.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(ts){var rs=ts.startPoint,as=ts.endPoint;ts.curvePosition===void 0&&(ts.curvePosition=this.curvePosition),ts.curveOffset===void 0&&(ts.curveOffset=this.curveOffset),ts.minCurveOffset===void 0&&(ts.minCurveOffset=this.minCurveOffset),isNumber$3(ts.curveOffset)&&(ts.curveOffset=[ts.curveOffset,-ts.curveOffset]),isNumber$3(ts.minCurveOffset)&&(ts.minCurveOffset=[ts.minCurveOffset,-ts.minCurveOffset]),isNumber$3(ts.curvePosition)&&(ts.curvePosition=[ts.curvePosition,1-ts.curvePosition]);var os=as.x-rs.x,is=[0,0];ts.curveOffset?is=ts.curveOffset:Math.abs(os)<Math.abs(ts.minCurveOffset[0])&&(is=ts.minCurveOffset);var us={x:rs.x+os*this.curvePosition[0]+is[0],y:rs.y},ls={x:as.x-os*this.curvePosition[1]+is[1],y:as.y},fs=[us,ls];return fs}},"cubic");Shape$3.registerEdge("loop",{getPathPoints:function(ts){return getLoopCfgs$1(ts)},getControlPoints:function(ts){return ts.controlPoints},afterDraw:function(ts){ts.controlPoints=void 0},afterUpdate:function(ts){ts.controlPoints=void 0}},"cubic");var singleCombo$1={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Global$2.comboLabel.refX,refY:Global$2.comboLabel.refY,options:{style:{stroke:Global$2.defaultCombo.style.stroke,fill:Global$2.defaultCombo.style.fill,lineWidth:Global$2.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Global$2.comboLabel.style.fill,fontSize:Global$2.comboLabel.style.fontSize,fontFamily:Global$2.windowFontFamily}},stateStyles:__assign$h({},Global$2.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(ts){var rs=clone$b(ts.size||this.options.size||Global$2.defaultCombo.size);return isArray$2(rs)&&rs.length===1&&(rs=[rs[0],rs[0]]),isArray$2(rs)||(rs=[rs,rs]),rs},getLabelStyleByPosition:function(ts,rs){var as=rs.position||this.labelPosition,os=ts.style,is=ts.padding||this.options.padding;isArray$2(is)&&(is=Math.max.apply(Math,is));var us=rs.refX,ls=rs.refY;isNil$2(us)&&(us=this.refX),isNil$2(ls)&&(ls=this.refY);var fs=this.getSize(ts),hs=Math.max(os.r,fs[0]/2)||fs[0]/2,vs=hs+is,gs;switch(as){case"top":gs={x:0,y:-vs-ls,textBaseline:"bottom",textAlign:"center"};break;case"bottom":gs={x:0,y:vs+ls,textBaseline:"bottom",textAlign:"center"};break;case"left":gs={x:-vs+us,y:0,textAlign:"left"};break;case"center":gs={x:0,y:0,text:ts.label,textAlign:"center"};break;default:gs={x:vs+us,y:0,textAlign:"right"};break}return gs.text=ts.label,gs},drawShape:function(ts,rs){var as=this.shapeType,os=this.getShapeStyle(ts),is=rs.addShape(as,{attrs:os,draggable:!0,name:"combo-shape"});return is},updateCollapsedIcon:function(ts,rs,as){var os=ts.collapsed,is=ts.collapsedSubstituteIcon,us=is===void 0?{}:is,ls=Object.assign({},this.options.collapsedSubstituteIcon,us),fs=ls.show,hs=ls.img,vs=ls.width,gs=ls.height,ys=rs.getContainer(),xs=ys.find(function($s){return $s.get("name")==="combo-collapsed-substitute-icon"}),ms=xs&&!xs.destroyed,Ss=rs.get("keyShape");if(os&&fs){if(ms)xs.show();else{var Ms={width:vs||as.r*2||as.width,height:gs||as.r*2||as.height};xs=ys.addShape("image",{attrs:__assign$h({img:hs,x:-Ms.width/2,y:-Ms.height/2},Ms),name:"combo-collapsed-substitute-icon",draggable:!0})}Ss.hide()}else ms&&(xs.hide(),Ss.show())},updateShape:function(ts,rs,as){var os=this,is=rs.get("keyShape"),us=rs.get("animate"),ls=us&&(ts.animate===void 0?this.options.animate:ts.animate);ls&&is.animate?(ts.collapsed||this.updateCollapsedIcon(ts,rs,as),is.animate(as,{duration:200,easing:"easeLinear",callback:function(){ts.collapsed&&os.updateCollapsedIcon(ts,rs,as)}})):(is.attr(__assign$h({},as)),this.updateCollapsedIcon(ts,rs,as)),this.updateLabel(ts,rs)}},singleComboDef$1=__assign$h(__assign$h({},shapeBase$1),singleCombo$1);Shape$3.registerCombo("single-combo",singleComboDef$1);Shape$3.registerCombo("circle",{options:{size:[Global$2.defaultCombo.size[0],Global$2.defaultCombo.size[0]],padding:Math.max.apply(Math,Global$2.defaultCombo.padding),animate:!0,style:{stroke:Global$2.defaultCombo.style.stroke,fill:Global$2.defaultCombo.style.fill,lineWidth:Global$2.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Global$2.comboLabel.style.fill,fontSize:Global$2.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:__assign$h({},Global$2.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(ts,rs){var as=this.getShapeStyle(ts);delete as.height,delete as.width;var os=rs.addShape("circle",{attrs:as,className:"circle-combo",name:"circle-combo",draggable:!0});return os},getShapeStyle:function(ts){var rs=this.options.style,as=ts.padding||this.options.padding;isArray$2(as)&&(as=Math.max.apply(Math,as));var os={stroke:ts.color},is=mix$1({},rs,os,ts.style),us=ts.collapsed&&ts.fixCollapseSize?ts.fixCollapseSize:ts.fixSize,ls;if(us)ls=isNumber$3(us)?us/2:us[0]/2;else{var fs=this.getSize(ts);!isNumber$3(is.r)||isNaN(is.r)?ls=fs[0]/2||Global$2.defaultCombo.style.r:ls=Math.max(is.r,fs[0]/2)||fs[0]/2}is.r=ls+as;var hs=__assign$h({x:0,y:0},is);return ts.style?ts.style.r=ls:ts.style={r:ls},hs},update:function(ts,rs){var as=this.getSize(ts),os=ts.padding||this.options.padding;isArray$2(os)&&(os=Math.max.apply(Math,os));var is=clone$b(ts.style),us=ts.collapsed&&ts.fixCollapseSize?ts.fixCollapseSize:ts.fixSize,ls;us?ls=isNumber$3(us)?us/2:us[0]/2:ls=Math.max(is.r,as[0]/2)||as[0]/2,is.r=ls+os;var fs=rs.get("sizeCache");fs&&(fs.r=is.r);var hs={stroke:ts.color},vs=rs.get("keyShape"),gs=mix$1({},vs.attr(),hs,is);ts.style?ts.style.r=ls:ts.style={r:ls},this.updateShape(ts,rs,gs,!0)}},"single-combo");Shape$3.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Global$2.defaultCombo.style.stroke,fill:Global$2.defaultCombo.style.fill,lineWidth:Global$2.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Global$2.comboLabel.style.fill,fontSize:Global$2.comboLabel.style.fontSize,fontFamily:Global$2.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:__assign$h({},Global$2.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(ts,rs){var as=this.getShapeStyle(ts),os=rs.addShape("rect",{attrs:as,className:"rect-combo",name:"rect-combo",draggable:!0});return os},getLabelStyleByPosition:function(ts,rs){var as=rs.position||this.labelPosition,os=ts.style,is=ts.padding||this.options.padding;isNumber$3(is)&&(is=[is,is,is,is]);var us=rs.refX,ls=rs.refY;isNil$2(us)&&(us=this.refX),isNil$2(ls)&&(ls=this.refY);var fs=-os.width/2-is[3],hs=os.width/2+is[1],vs=-os.height/2-is[0],gs=os.height/2+is[2],ys;switch(as){case"top":ys={x:fs+us,y:vs+ls,textBaseline:"top",textAlign:"left"};break;case"bottom":ys={x:0,y:gs+ls,textBaseline:"top",textAlign:"center"};break;case"left":ys={x:fs+ls,y:0,textAlign:"left"};break;case"center":ys={x:0,y:0,text:ts.label,textAlign:"center"};break;case"top-center":ys={x:0,y:vs+ls,textBaseline:"top",textAlign:"center"};break;default:ys={x:hs+us,y:0,textAlign:"right"};break}return ys.text=ts.label,ys},getShapeStyle:function(ts){var rs=this.options.style,as=ts.padding||this.options.padding;isNumber$3(as)&&(as=[as,as,as,as]);var os={stroke:ts.color},is=mix$1({},rs,os,ts.style),us=this.getSize(ts),ls,fs,hs=ts.collapsed&&ts.fixCollapseSize?ts.fixCollapseSize:ts.fixSize;hs?isNumber$3(hs)?(ls=hs,fs=hs):(ls=hs[0],fs=hs[1]):(!isNumber$3(is.width)||isNaN(is.width)?ls=us[0]||Global$2.defaultCombo.style.width:ls=Math.max(is.width,us[0])||us[0],!isNumber$3(is.height)||isNaN(is.height)?fs=us[1]||Global$2.defaultCombo.style.height:fs=Math.max(is.height,us[1])||us[1]);var vs=-ls/2-as[3],gs=-fs/2-as[0];is.width=ls+as[1]+as[3],is.height=fs+as[0]+as[2];var ys=__assign$h({x:vs,y:gs},is);return ts.style?(ts.style.width=ls,ts.style.height=fs):ts.style={width:ls,height:fs},ys},update:function(ts,rs){var as=this.getSize(ts),os=ts.padding||this.options.padding;isNumber$3(os)&&(os=[os,os,os,os]);var is=clone$b(ts.style),us,ls,fs=ts.collapsed&&ts.fixCollapseSize?ts.fixCollapseSize:ts.fixSize;fs?isNumber$3(fs)?(us=fs,ls=fs):(us=fs[0],ls=fs[1]):(us=Math.max(is.width,as[0])||as[0],ls=Math.max(is.height,as[1])||as[1]),is.width=us+os[1]+os[3],is.height=ls+os[0]+os[2];var hs=rs.get("sizeCache");hs&&(hs.width=is.width,hs.height=is.height),is.x=-us/2-os[3],is.y=-ls/2-os[0];var vs={stroke:ts.color},gs=rs.get("keyShape"),ys=mix$1({},gs.attr(),vs,is);ts.style?(ts.style.width=us,ts.style.height=ls):ts.style={width:us,height:ls},this.updateShape(ts,rs,ys,!1)}},"single-combo");Shape$3.registerNode("simple-circle",{options:{size:Global$2.defaultNode.size,style:{x:0,y:0,stroke:Global$2.defaultNode.style.stroke,fill:Global$2.defaultNode.style.fill,lineWidth:Global$2.defaultNode.style.lineWidth},labelCfg:{style:{fill:Global$2.nodeLabel.style.fill,fontSize:Global$2.nodeLabel.style.fontSize,fontFamily:Global$2.windowFontFamily}},stateStyles:__assign$h({},Global$2.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(ts,rs){var as=this.getShapeStyle(ts),os="".concat(this.type,"-keyShape"),is=rs.addShape("circle",{attrs:as,className:"".concat(this.type,"-keyShape"),name:os,draggable:!0});return rs.shapeMap[os]=is,is},getShapeStyle:function(ts){var rs=(this.mergeStyle||this.getOptions(ts)).style,as={stroke:ts.color},os=deepMix$2({},rs,as),is=this.getSize(ts),us=is[0]/2,ls=__assign$h({x:0,y:0,r:us},os);return ls},update:function(ts,rs,as){var os=this.getSize(ts),is={stroke:ts.color,r:os[0]/2},us=rs.get("keyShape"),ls=deepMix$2({},us.attr(),is,ts.style);this.updateShape(ts,rs,ls,!0,as)}},"single-node");Shape$3.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Global$2.defaultNode.style.stroke,fill:Global$2.defaultNode.style.fill,lineWidth:Global$2.defaultNode.style.lineWidth},labelCfg:{style:{fill:Global$2.nodeLabel.style.fill,fontSize:Global$2.nodeLabel.style.fontSize,fontFamily:Global$2.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:__assign$h({},Global$2.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(ts,rs){var as=this.getShapeStyle(ts),os=rs.addShape("rect",{attrs:as,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return os},getShapeStyle:function(ts){var rs=(this.mergeStyle||this.getOptions(ts)).style,as={stroke:ts.color},os=mix$1({},rs,as),is=this.getSize(ts),us=os.width||is[0],ls=os.height||is[1],fs=__assign$h({x:-us/2,y:-ls/2,width:us,height:ls},os);return fs},update:function(ts,rs,as){rs.getContainer();var os=(this.mergeStyle||this.getOptions(ts)).style,is=this.getSize(ts),us=rs.get("keyShape");ts.size||(is[0]=us.attr("width")||os.width,is[1]=us.attr("height")||os.height);var ls={stroke:ts.color,x:-is[0]/2,y:-is[1]/2,width:is[0],height:is[1]},fs=mix$1({},os,us.attr(),ls);fs=mix$1(fs,ts.style),this.updateShape(ts,rs,fs,!1,as)}},"single-node");Shape$3.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:Global$2.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(ts,rs){var as=this.shapeType,os=this.getShapeStyle(ts);delete os.fill;var is=rs.addShape(as,{attrs:os,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(ts,is),is},drawClip:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).clipCfg;if(as.show){var os=as.type,is=as.x,us=as.y,ls=as.style;if(os==="circle"){var fs=as.r;rs.setClip({type:"circle",attrs:__assign$h({r:fs,x:is,y:us},ls)})}else if(os==="rect"){var hs=as.width,vs=as.height,gs=is-hs/2,ys=us-vs/2;rs.setClip({type:"rect",attrs:__assign$h({x:gs,y:ys,width:hs,height:vs},ls)})}else if(os==="ellipse"){var xs=as.rx,ms=as.ry;rs.setClip({type:"ellipse",attrs:__assign$h({x:is,y:us,rx:xs,ry:ms},ls)})}else if(os==="polygon"){var Ss=as.points;rs.setClip({type:"polygon",attrs:__assign$h({points:Ss},ls)})}else if(os==="path"){var Ms=as.path;rs.setClip({type:"path",attrs:__assign$h({path:Ms},ls)})}}},getShapeStyle:function(ts){var rs=this.mergeStyle||this.getOptions(ts),as=rs.style,os=rs.img,is=this.getSize(ts),us=is[0],ls=is[1];as&&(us=as.width||is[0],ls=as.height||is[1]);var fs=__assign$h({x:-us/2,y:-ls/2,width:us,height:ls,img:os},as);return fs},updateShapeStyle:function(ts,rs){var as=rs.getContainer(),os="".concat(this.itemType,"-shape"),is=as.shapeMap[os]||as.find(function(ls){return ls.get("className")===os})||rs.getKeyShape(),us=this.getShapeStyle(ts);is&&!is.destroyed&&is.attr(us)}},"single-node");const Arrow$2={triangle:function(ts,rs,as){ts===void 0&&(ts=10),rs===void 0&&(rs=15),as===void 0&&(as=0);var os=as*2,is="M ".concat(os,",0 L ").concat(os+rs,",-").concat(ts/2," L ").concat(os+rs,",").concat(ts/2," Z");return is},vee:function(ts,rs,as){ts===void 0&&(ts=15),rs===void 0&&(rs=20),as===void 0&&(as=0);var os=as*2,is="M ".concat(os,",0 L ").concat(os+rs,",-").concat(ts/2,`
        L `).concat(os+2*rs/3,",0 L ").concat(os+rs,",").concat(ts/2," Z");return is},circle:function(ts,rs){ts===void 0&&(ts=5),rs===void 0&&(rs=0);var as=rs*2,os="M ".concat(as,`, 0
            a `).concat(ts,",").concat(ts," 0 1,0 ").concat(ts*2,`,0
            a `).concat(ts,",").concat(ts," 0 1,0 ").concat(-ts*2,",0");return os},rect:function(ts,rs,as){ts===void 0&&(ts=10),rs===void 0&&(rs=10),as===void 0&&(as=0);var os=as*2,is="M ".concat(os,",").concat(-ts/2,` 
        L `).concat(os+rs,",").concat(-ts/2,` 
        L `).concat(os+rs,",").concat(ts/2,` 
        L `).concat(os,",").concat(ts/2," Z");return is},diamond:function(ts,rs,as){ts===void 0&&(ts=15),rs===void 0&&(rs=15),as===void 0&&(as=0);var os=as*2,is="M ".concat(os,`,0 
        L `).concat(os+rs/2,",").concat(-ts/2,` 
        L `).concat(os+rs,`,0 
        L `).concat(os+rs/2,",").concat(ts/2," Z");return is},triangleRect:function(ts,rs,as,os,is,us){ts===void 0&&(ts=15),rs===void 0&&(rs=15),as===void 0&&(as=15),os===void 0&&(os=3),is===void 0&&(is=5),us===void 0&&(us=0);var ls=us*2,fs=ls+rs+is,hs="M ".concat(ls,",0 L ").concat(ls+rs,",-").concat(ts/2," L ").concat(ls+rs,",").concat(ts/2,` Z
            M `).concat(fs,", -").concat(as/2,`
            L `).concat(fs+os," -").concat(as/2,`
            L `).concat(fs+os," ").concat(as/2,`
            L `).concat(fs," ").concat(as/2,`
            Z`);return hs}},Marker$3={collapse:function(ts,rs,as){return[["M",ts-as,rs],["a",as,as,0,1,0,as*2,0],["a",as,as,0,1,0,-as*2,0],["M",ts-as+4,rs],["L",ts+as-4,rs]]},expand:function(ts,rs,as){return[["M",ts-as,rs],["a",as,as,0,1,0,as*2,0],["a",as,as,0,1,0,-as*2,0],["M",ts-as+4,rs],["L",ts-as+2*as-4,rs],["M",ts-as+as,rs-as+4],["L",ts,rs+as-4]]},upTriangle:function(ts,rs,as){var os=as*Math.cos(Math.PI/6),is=as*Math.sin(Math.PI/6);return[["M",ts-os,rs+is],["L",ts+os,rs+is],["L",ts,rs-as],["Z"]]},downTriangle:function(ts,rs,as){var os=as*Math.cos(Math.PI/6),is=as*Math.sin(Math.PI/6);return[["M",ts-os,rs-is],["L",ts+os,rs-is],["L",ts,rs+as],["Z"]]}};var defaultSubjectColors$1=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"];const ColorUtil$1=Object.freeze(Object.defineProperty({__proto__:null,defaultSubjectColors:defaultSubjectColors$1},Symbol.toStringTag,{value:"Module"}));var isForce=function(ts){return ts==="force"||ts==="g6force"||ts==="gForce"||ts==="force2"};const LayoutUtil$1=Object.freeze(Object.defineProperty({__proto__:null,isForce},Symbol.toStringTag,{value:"Module"}));var transform$c=transform$i,Util$1=__assign$h(__assign$h(__assign$h(__assign$h(__assign$h(__assign$h(__assign$h({},BaseUtil$1),GraphicUtil$1),PathUtil$2),MathUtil$1),ColorUtil$1),LayoutUtil$1),{transform:transform$c,mat3}),LayoutController$2=function(){function ns(ts){this.graph=ts,this.layoutCfg=ts.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return ns.prototype.initLayout=function(){},ns.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},ns.prototype.getLayoutCfgType=function(ts){var rs=ts.type;if(rs)return rs;var as=ts.pipes;return Array.isArray(as)?as.map(function(os){return(os==null?void 0:os.type)||""}):null},ns.prototype.isLayoutTypeSame=function(ts){var rs=this.getLayoutCfgType(ts),as=Array.isArray(this.layoutType),os=Array.isArray(rs);return as&&os?this.layoutType.every(function(is,us){return is===rs[us]}):Array.isArray(rs)||Array.isArray(this.layoutType)?!1:(ts==null?void 0:ts.type)===this.layoutType},ns.prototype.refreshLayout=function(){var ts=this,rs=ts.graph,as=ts.layoutType,os=ts.layoutCfg,is=os===void 0?{}:os;if(rs){var us=is.animate,ls=us===void 0&&(as==="force"||as==="force2"),fs=isForce(as)&&(us||ls);rs.get("animate")&&!fs?rs.positionsAnimate(as==="comboCombined"):rs.refreshPositions(as==="comboCombined")}},ns.prototype.changeLayout=function(ts){var rs=ts.disableTriggerLayout,as=__rest$2(ts,["disableTriggerLayout"]);this.layoutCfg=as,this.layoutType=as.type||this.layoutType,!rs&&this.layout()},ns.prototype.changeData=function(ts){this.layout(ts)},ns.prototype.destoryLayoutMethods=function(){var ts=this.layoutMethods,rs=[];return ts==null||ts.forEach(function(as){var os,is=(os=as.getType)===null||os===void 0?void 0:os.call(as);is&&rs.push(is),as.destroy()}),this.layoutMethods=[],rs},ns.prototype.destroyLayout=function(){this.destoryLayoutMethods();var ts=this.graph;ts&&!ts.get("destroyed")&&ts.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},ns.prototype.setDataFromGraph=function(){for(var ts,rs=[],as=[],os=[],is=[],us=[],ls=[],fs=[],hs=this.graph.getNodes(),vs=this.graph.getEdges(),gs=this.graph.getCombos(),ys=hs.length,xs=0;xs<ys;xs++){var ms=hs[xs];if(!(!ms||ms.destroyed)){var Ss=ms.getModel();if(!ms.isVisible()){as.push(Ss);continue}rs.push(Ss)}}for(var Ms=vs.length,xs=0;xs<Ms;xs++){var $s=vs[xs];if(!(!$s||$s.destroyed)){var Ss=$s.getModel();if(!$s.isVisible()){is.push(Ss);continue}Ss.isComboEdge?us.push(Ss):os.push(Ss)}}for(var bs=gs.length,xs=0;xs<bs;xs++){var Cs=gs[xs];if(!Cs.destroyed){var Ss=Cs.getModel();if(!Cs.isVisible()){fs.push(Ss);continue}ls.push(Ss)}}return{nodes:rs,hiddenNodes:as,edges:os,hiddenEdges:is,combos:ls,hiddenCombos:fs,comboEdges:us,vedges:(ts=this.graph.get("vedges"))===null||ts===void 0?void 0:ts.map(function(As){return As.getModel()})}},ns.prototype.relayout=function(ts){var rs=this,as=this,os=as.graph,is=as.layoutMethods,us=as.layoutCfg;if(!(!os||os.get("destroyed"))){var ls=Promise.resolve();if(ts){this.data=this.setDataFromGraph();var fs=this.data.nodes;if(!fs)return!1;ls=this.initPositions(us.center,fs)}os.emit("beforelayout"),is==null||is.forEach(function(hs,vs){var gs=us[vs]||us;ls=ls.then(function(){var ys,xs=rs.execLayoutMethod(gs,vs);return vs===is.length-1&&((ys=us.onAllLayoutEnd)===null||ys===void 0||ys.call(us)),xs})})}},ns.prototype.filterLayoutData=function(ts,rs){var as=ts.nodes,os=ts.edges,is=__rest$2(ts,["nodes","edges"]);if(!as)return ts;var us,ls;isFunction$2(rs==null?void 0:rs.nodesFilter)?us=rs.nodesFilter:us=function(){return!0};var fs=as.filter(us);if(isFunction$2(rs==null?void 0:rs.edgesFilter))ls=rs.edgesFilter;else{var hs=fs.reduce(function(vs,gs){return vs[gs.id]=!0,vs},{});ls=function(gs){return hs[gs.source]&&hs[gs.target]}}return __assign$h({nodes:fs,edges:os.filter(ls)},is)},ns.prototype.getLayoutBBox=function(ts){var rs=this.graph,as=groupBy$1(rs.getNodes(),function(us){return us.getModel().layoutOrder}),os=Object.values(as).map(function(us){var ls=calculationItemsBBox$2(us);return ls.size=[ls.width,ls.height],ls}),is=Object.values(groupBy$1(ts,"layoutOrder"));return{groupNodes:is,layoutNodes:os}},ns.prototype.layoutAnimate=function(){},ns.prototype.moveToZero=function(){var ts=this.graph,rs=ts.get("data"),as=rs.nodes;if(!(as[0].x===void 0||as[0].x===null||isNaN$3(as[0].x))){for(var os=[0,0],is=as.length,us=0;us<is;us++){var ls=as[us];os[0]+=ls.x,os[1]+=ls.y}os[0]/=as.length,os[1]/=as.length;for(var us=0;us<is;us++){var ls=as[us];ls.x-=os[0],ls.y-=os[1]}}},ns.prototype.initPositions=function(ts,rs){var as;return __awaiter$2(this,void 0,void 0,function(){var os,is,us;return __generator$2(this,function(ls){return os=this.graph,rs!=null&&rs.length?(is=rs.filter(function(fs){return isNaN$3(fs.x)||isNaN$3(fs.y)}),us=is?is.length:0,us?[2,(as=this.initWithPreset)===null||as===void 0?void 0:as.call(this,function(){},function(){var fs=os.get("width")*.85,hs=os.get("height")*.85,vs=Math.ceil(Math.sqrt(us)*(fs/hs)),gs=Math.ceil(us/vs),ys=fs/(vs-1),xs=hs/(gs-1);(!isFinite(ys)||!ys)&&(ys=0),(!isFinite(xs)||!ys)&&(xs=0);for(var ms=ts[0]-fs/2,Ss=ts[1]-hs/2,Ms=0;Ms<us;Ms++){var $s=is[Ms];isNaN$3(+$s.x)&&($s.x=Ms%vs*ys+ms),isNaN$3(+$s.y)&&($s.y=Math.floor(Ms/vs)*xs+Ss)}})]:[2]):[2,Promise.resolve()]})})},ns.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},ns}(),EventController$2=function(){function ns(ts){this.graph=ts,this.destroyed=!1,this.initEvents()}return ns}(),registerNode=Shape$3.registerNode,registerEdge=Shape$3.registerEdge,registerCombo=Shape$3.registerCombo,registerBehavior=Behavior$1.registerBehavior,BaseGlobal$1=Global$2;Global$2.version,Shape$3.registerNode,Shape$3.registerEdge,Shape$3.registerCombo,Behavior$1.registerBehavior;var asyncIndex$1={},workers={},createWorker$1={},constant$1={};Object.defineProperty(constant$1,"__esModule",{value:!0});constant$1.MESSAGE=constant$1.ALGORITHM=void 0;var ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};constant$1.ALGORITHM=ALGORITHM;var MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};constant$1.MESSAGE=MESSAGE;var index_worker={},algorithm$1={},adjacentMatrix={};Object.defineProperty(adjacentMatrix,"__esModule",{value:!0});adjacentMatrix.default=void 0;var adjMatrix$1=function(ts,rs){var as=ts.nodes,os=ts.edges,is=[],us={};if(!as)throw new Error("invalid nodes data!");return as&&as.forEach(function(ls,fs){us[ls.id]=fs;var hs=[];is.push(hs)}),os&&os.forEach(function(ls){var fs=ls.source,hs=ls.target,vs=us[fs],gs=us[hs];!vs&&vs!==0||!gs&&gs!==0||(is[vs][gs]=1,rs||(is[gs][vs]=1))}),is},_default$k=adjMatrix$1;adjacentMatrix.default=_default$k;var bfs={},queue={},linkedList={};Object.defineProperty(linkedList,"__esModule",{value:!0});linkedList.default=linkedList.LinkedListNode=void 0;var defaultComparator$1=function(ts,rs){return ts===rs},LinkedListNode$1=function(){function ns(ts,rs){rs===void 0&&(rs=null),this.value=ts,this.next=rs}return ns.prototype.toString=function(ts){return ts?ts(this.value):"".concat(this.value)},ns}();linkedList.LinkedListNode=LinkedListNode$1;var LinkedList$1=function(){function ns(ts){ts===void 0&&(ts=defaultComparator$1),this.head=null,this.tail=null,this.compare=ts}return ns.prototype.prepend=function(ts){var rs=new LinkedListNode$1(ts,this.head);return this.head=rs,this.tail||(this.tail=rs),this},ns.prototype.append=function(ts){var rs=new LinkedListNode$1(ts);return this.head?(this.tail.next=rs,this.tail=rs,this):(this.head=rs,this.tail=rs,this)},ns.prototype.delete=function(ts){if(!this.head)return null;for(var rs=null;this.head&&this.compare(this.head.value,ts);)rs=this.head,this.head=this.head.next;var as=this.head;if(as!==null)for(;as.next;)this.compare(as.next.value,ts)?(rs=as.next,as.next=as.next.next):as=as.next;return this.compare(this.tail.value,ts)&&(this.tail=as),rs},ns.prototype.find=function(ts){var rs=ts.value,as=rs===void 0?void 0:rs,os=ts.callback,is=os===void 0?void 0:os;if(!this.head)return null;for(var us=this.head;us;){if(is&&is(us.value)||as!==void 0&&this.compare(us.value,as))return us;us=us.next}return null},ns.prototype.deleteTail=function(){var ts=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,ts;for(var rs=this.head;rs.next;)rs.next.next?rs=rs.next:rs.next=null;return this.tail=rs,ts},ns.prototype.deleteHead=function(){if(!this.head)return null;var ts=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),ts},ns.prototype.fromArray=function(ts){var rs=this;return ts.forEach(function(as){return rs.append(as)}),this},ns.prototype.toArray=function(){for(var ts=[],rs=this.head;rs;)ts.push(rs),rs=rs.next;return ts},ns.prototype.reverse=function(){for(var ts=this.head,rs=null,as=null;ts;)as=ts.next,ts.next=rs,rs=ts,ts=as;this.tail=this.head,this.head=rs},ns.prototype.toString=function(ts){return ts===void 0&&(ts=void 0),this.toArray().map(function(rs){return rs.toString(ts)}).toString()},ns}(),_default$j=LinkedList$1;linkedList.default=_default$j;Object.defineProperty(queue,"__esModule",{value:!0});queue.default=void 0;var _linkedList=_interopRequireDefault$c(linkedList);function _interopRequireDefault$c(ns){return ns&&ns.__esModule?ns:{default:ns}}var Queue=function(){function ns(){this.linkedList=new _linkedList.default}return ns.prototype.isEmpty=function(){return!this.linkedList.head},ns.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},ns.prototype.enqueue=function(ts){this.linkedList.append(ts)},ns.prototype.dequeue=function(){var ts=this.linkedList.deleteHead();return ts?ts.value:null},ns.prototype.toString=function(ts){return this.linkedList.toString(ts)},ns}(),_default$i=Queue;queue.default=_default$i;var util$3={};Object.defineProperty(util$3,"__esModule",{value:!0});util$3.uniqueId=util$3.getOutEdgesNodeId=util$3.getNeighbors=util$3.getEdgesByNodeId=void 0;var getNeighbors=function(ts,rs,as){rs===void 0&&(rs=[]);var os=rs.filter(function(fs){return fs.source===ts||fs.target===ts});if(as==="target"){var is=function(hs){return hs.source===ts};return os.filter(is).map(function(fs){return fs.target})}if(as==="source"){var us=function(hs){return hs.target===ts};return os.filter(us).map(function(fs){return fs.source})}var ls=function(hs){return hs.source===ts?hs.target:hs.source};return os.map(ls)};util$3.getNeighbors=getNeighbors;var getOutEdgesNodeId=function(ts,rs){return rs.filter(function(as){return as.source===ts})};util$3.getOutEdgesNodeId=getOutEdgesNodeId;var getEdgesByNodeId=function(ts,rs){return rs.filter(function(as){return as.source===ts||as.target===ts})};util$3.getEdgesByNodeId=getEdgesByNodeId;var uniqueId$2=function(ts){ts===void 0&&(ts=0);var rs="".concat(Math.random()).split(".")[1].substr(0,5),as="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(ts,"-").concat(rs).concat(as)};util$3.uniqueId=uniqueId$2;Object.defineProperty(bfs,"__esModule",{value:!0});bfs.default=void 0;var _queue=_interopRequireDefault$b(queue),_util$d=util$3;function _interopRequireDefault$b(ns){return ns&&ns.__esModule?ns:{default:ns}}function initCallbacks$1(ns){ns===void 0&&(ns={});var ts=ns,rs=function(){},as=function(){var os={};return function(is){var us=is.next,ls=us;return os[ls]?!1:(os[ls]=!0,!0)}}();return ts.allowTraversal=ns.allowTraversal||as,ts.enter=ns.enter||rs,ts.leave=ns.leave||rs,ts}var breadthFirstSearch=function(ts,rs,as,os){os===void 0&&(os=!0);var is=initCallbacks$1(as),us=new _queue.default,ls=ts.edges,fs=ls===void 0?[]:ls;us.enqueue(rs);for(var hs="",vs=function(){var ys=us.dequeue();is.enter({current:ys,previous:hs}),(0,_util$d.getNeighbors)(ys,fs,os?"target":void 0).forEach(function(xs){is.allowTraversal({previous:hs,current:ys,next:xs})&&us.enqueue(xs)}),is.leave({current:ys,previous:hs}),hs=ys};!us.isEmpty();)vs()},_default$h=breadthFirstSearch;bfs.default=_default$h;var connectedComponent={};Object.defineProperty(connectedComponent,"__esModule",{value:!0});connectedComponent.default=getConnectedComponents;connectedComponent.detectStrongConnectComponents=connectedComponent.detectConnectedComponents=void 0;var _util$c=util$3,detectConnectedComponents=function(ts){for(var rs=ts.nodes,as=rs===void 0?[]:rs,os=ts.edges,is=os===void 0?[]:os,us=[],ls={},fs=[],hs=function xs(ms){fs.push(ms),ls[ms.id]=!0;for(var Ss=(0,_util$c.getNeighbors)(ms.id,is),Ms=function(Cs){var As=Ss[Cs];if(!ls[As]){var Is=as.filter(function(ks){return ks.id===As});Is.length>0&&xs(Is[0])}},$s=0;$s<Ss.length;++$s)Ms($s)},vs=0;vs<as.length;vs++){var gs=as[vs];if(!ls[gs.id]){hs(gs);for(var ys=[];fs.length>0;)ys.push(fs.pop());us.push(ys)}}return us};connectedComponent.detectConnectedComponents=detectConnectedComponents;var detectStrongConnectComponents=function(ts){for(var rs=ts.nodes,as=rs===void 0?[]:rs,os=ts.edges,is=os===void 0?[]:os,us=[],ls={},fs={},hs={},vs=[],gs=0,ys=function Ms($s){fs[$s.id]=gs,hs[$s.id]=gs,gs+=1,us.push($s),ls[$s.id]=!0;for(var bs=(0,_util$c.getNeighbors)($s.id,is,"target").filter(function(Ps){return as.map(function(Ds){return Ds.id}).indexOf(Ps)>-1}),Cs=function(Ds){var Fs=bs[Ds];if(!fs[Fs]&&fs[Fs]!==0){var Rs=as.filter(function(js){return js.id===Fs});Rs.length>0&&Ms(Rs[0]),hs[$s.id]=Math.min(hs[$s.id],hs[Fs])}else ls[Fs]&&(hs[$s.id]=Math.min(hs[$s.id],fs[Fs]))},As=0;As<bs.length;As++)Cs(As);if(hs[$s.id]===fs[$s.id]){for(var Is=[];us.length>0;){var ks=us.pop();if(ls[ks.id]=!1,Is.push(ks),ks===$s)break}Is.length>0&&vs.push(Is)}},xs=0,ms=as;xs<ms.length;xs++){var Ss=ms[xs];!fs[Ss.id]&&fs[Ss.id]!==0&&ys(Ss)}return vs};connectedComponent.detectStrongConnectComponents=detectStrongConnectComponents;function getConnectedComponents(ns,ts){return ts?detectStrongConnectComponents(ns):detectConnectedComponents(ns)}var degree$2={};Object.defineProperty(degree$2,"__esModule",{value:!0});degree$2.getOutDegree=degree$2.getInDegree=degree$2.default=void 0;var degree$1=function(ts){var rs={},as=ts.nodes,os=as===void 0?[]:as,is=ts.edges,us=is===void 0?[]:is;return os.forEach(function(ls){rs[ls.id]={degree:0,inDegree:0,outDegree:0}}),us.forEach(function(ls){rs[ls.source].degree++,rs[ls.source].outDegree++,rs[ls.target].degree++,rs[ls.target].inDegree++}),rs},_default$g=degree$1;degree$2.default=_default$g;var getInDegree=function(ts,rs){var as=degree$1(ts);return as[rs]?degree$1(ts)[rs].inDegree:0};degree$2.getInDegree=getInDegree;var getOutDegree=function(ts,rs){var as=degree$1(ts);return as[rs]?degree$1(ts)[rs].outDegree:0};degree$2.getOutDegree=getOutDegree;var detectCycle={},dfs$2={};Object.defineProperty(dfs$2,"__esModule",{value:!0});dfs$2.default=depthFirstSearch;var _util$b=util$3;function initCallbacks(ns){ns===void 0&&(ns={});var ts=ns,rs=function(){},as=function(){var os={};return function(is){var us=is.next;return os[us]?!1:(os[us]=!0,!0)}}();return ts.allowTraversal=ns.allowTraversal||as,ts.enter=ns.enter||rs,ts.leave=ns.leave||rs,ts}function depthFirstSearchRecursive(ns,ts,rs,as,os){os===void 0&&(os=!0),as.enter({current:ts,previous:rs});var is=ns.edges,us=is===void 0?[]:is;(0,_util$b.getNeighbors)(ts,us,os?"target":void 0).forEach(function(ls){as.allowTraversal({previous:rs,current:ts,next:ls})&&depthFirstSearchRecursive(ns,ls,ts,as,os)}),as.leave({current:ts,previous:rs})}function depthFirstSearch(ns,ts,rs,as){as===void 0&&(as=!0),depthFirstSearchRecursive(ns,ts,"",initCallbacks(rs),as)}function _typeof$b(ns){"@babel/helpers - typeof";return _typeof$b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ts){return typeof ts}:function(ts){return ts&&typeof Symbol=="function"&&ts.constructor===Symbol&&ts!==Symbol.prototype?"symbol":typeof ts},_typeof$b(ns)}Object.defineProperty(detectCycle,"__esModule",{value:!0});detectCycle.detectAllUndirectedCycle=detectCycle.detectAllDirectedCycle=detectCycle.detectAllCycles=detectCycle.default=void 0;var _dfs=_interopRequireDefault$a(dfs$2),_connectedComponent=_interopRequireWildcard$1(connectedComponent),_util$a=util$3;function _getRequireWildcardCache$1(ns){if(typeof WeakMap!="function")return null;var ts=new WeakMap,rs=new WeakMap;return(_getRequireWildcardCache$1=function(os){return os?rs:ts})(ns)}function _interopRequireWildcard$1(ns,ts){if(!ts&&ns&&ns.__esModule)return ns;if(ns===null||_typeof$b(ns)!=="object"&&typeof ns!="function")return{default:ns};var rs=_getRequireWildcardCache$1(ts);if(rs&&rs.has(ns))return rs.get(ns);var as={},os=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var is in ns)if(is!=="default"&&Object.prototype.hasOwnProperty.call(ns,is)){var us=os?Object.getOwnPropertyDescriptor(ns,is):null;us&&(us.get||us.set)?Object.defineProperty(as,is,us):as[is]=ns[is]}return as.default=ns,rs&&rs.set(ns,as),as}function _interopRequireDefault$a(ns){return ns&&ns.__esModule?ns:{default:ns}}var detectDirectedCycle=function(ts){var rs=null,as=ts.nodes,os=as===void 0?[]:as,is={},us={},ls={},fs={};os.forEach(function(gs){us[gs.id]=gs});for(var hs={enter:function(ys){var xs=ys.current,ms=ys.previous;if(ls[xs]){rs={};for(var Ss=xs,Ms=ms;Ms!==xs;)rs[Ss]=Ms,Ss=Ms,Ms=is[Ms];rs[Ss]=Ms}else ls[xs]=xs,delete us[xs],is[xs]=ms},leave:function(ys){var xs=ys.current;fs[xs]=xs,delete ls[xs]},allowTraversal:function(ys){var xs=ys.next;return rs?!1:!fs[xs]}};Object.keys(us).length;){var vs=Object.keys(us)[0];(0,_dfs.default)(ts,vs,hs)}return rs},detectAllUndirectedCycle=function(ts,rs,as){var os,is;as===void 0&&(as=!0);for(var us=[],ls=(0,_connectedComponent.default)(ts,!1),fs=0,hs=ls;fs<hs.length;fs++){var vs=hs[fs];if(vs.length)for(var gs=vs[0],ys=gs.id,xs=[gs],ms=(os={},os[ys]=gs,os),Ss=(is={},is[ys]=new Set,is);xs.length>0;)for(var Ms=xs.pop(),$s=Ms.id,bs=(0,_util$a.getNeighbors)($s,ts.edges),Cs=function(ks){var Ps,Ds=bs[ks],Fs=ts.nodes.find(function(Ks){return Ks.id===Ds});if(Ds===$s)us.push((Ps={},Ps[Ds]=Ms,Ps));else if(!(Ds in Ss))ms[Ds]=Ms,xs.push(Fs),Ss[Ds]=new Set([Ms]);else if(!Ss[$s].has(Fs)){for(var Rs=!0,js=[Fs,Ms],zs=ms[$s];Ss[Ds].size&&!Ss[Ds].has(zs)&&(js.push(zs),zs!==ms[zs.id]);)zs=ms[zs.id];if(js.push(zs),rs&&as?(Rs=!1,js.findIndex(function(Ks){return rs.indexOf(Ks.id)>-1})>-1&&(Rs=!0)):rs&&!as&&js.findIndex(function(Ks){return rs.indexOf(Ks.id)>-1})>-1&&(Rs=!1),Rs){for(var Us={},Ys=1;Ys<js.length;Ys+=1)Us[js[Ys-1].id]=js[Ys];js.length&&(Us[js[js.length-1].id]=js[0]),us.push(Us)}Ss[Ds].add(Ms)}},As=0;As<bs.length;As+=1)Cs(As)}return us};detectCycle.detectAllUndirectedCycle=detectAllUndirectedCycle;var detectAllDirectedCycle=function(ts,rs,as){as===void 0&&(as=!0);for(var os=[],is=new Set,us=[],ls=[],fs={},hs={},vs=function(zs){for(var Us=[zs];Us.length>0;){var Ys=Us.pop();is.has(Ys)&&(is.delete(Ys),us[Ys.id].forEach(function(Ks){Us.push(Ks)}),us[Ys.id].clear())}},gs=function js(zs,Us,Ys){var Ks=!1;if(rs&&as===!1&&rs.indexOf(zs.id)>-1)return Ks;os.push(zs),is.add(zs);for(var qs=Ys[zs.id],_l=0;_l<qs.length;_l+=1){var Js=fs[qs[_l]];if(Js===Us){for(var Vs={},Zs=1;Zs<os.length;Zs+=1)Vs[os[Zs-1].id]=os[Zs];os.length&&(Vs[os[os.length-1].id]=os[0]),ls.push(Vs),Ks=!0}else is.has(Js)||js(Js,Us,Ys)&&(Ks=!0)}if(Ks)vs(zs);else for(var _l=0;_l<qs.length;_l+=1){var Js=fs[qs[_l]];us[Js.id].has(zs)||us[Js.id].add(zs)}return os.pop(),Ks},ys=ts.nodes,xs=ys===void 0?[]:ys,ms=0;ms<xs.length;ms+=1){var Ss=xs[ms],Ms=Ss.id;hs[Ms]=ms,fs[ms]=Ss}if(rs&&as)for(var $s=function(zs){var Us=rs[zs];hs[xs[zs].id]=hs[Us],hs[Us]=0,fs[0]=xs.find(function(Ys){return Ys.id===Us}),fs[hs[xs[zs].id]]=xs[zs]},ms=0;ms<rs.length;ms++)$s(ms);for(var bs=function(zs){for(var Us,Ys,Ks=1/0,qs=0;qs<zs.length;qs+=1)for(var _l=zs[qs],Js=0;Js<_l.length;Js++){var Vs=hs[_l[Js].id];Vs<Ks&&(Ks=Vs,Ys=qs)}for(var Zs=zs[Ys],Sl=[],qs=0;qs<Zs.length;qs+=1){var Il=Zs[qs];Sl[Il.id]=[];for(var Nl=0,Tl=(0,_util$a.getNeighbors)(Il.id,ts.edges,"target").filter(function(g0){return Zs.map(function(R0){return R0.id}).indexOf(g0)>-1});Nl<Tl.length;Nl++){var _c=Tl[Nl];_c===Il.id&&!(as===!1&&rs.indexOf(Il.id)>-1)?ls.push((Us={},Us[Il.id]=Il,Us)):Sl[Il.id].push(hs[_c])}}return{component:Zs,adjList:Sl,minIdx:Ks}},Cs=0;Cs<xs.length;){var As=xs.filter(function(js){return hs[js.id]>=Cs}),Is=(0,_connectedComponent.detectStrongConnectComponents)({nodes:As,edges:ts.edges}).filter(function(js){return js.length>1});if(Is.length===0)break;var ks=bs(Is),Ps=ks.minIdx,Ds=ks.adjList,Fs=ks.component;if(Fs.length>1){Fs.forEach(function(js){us[js.id]=new Set});var Rs=fs[Ps];if(rs&&as&&rs.indexOf(Rs.id)===-1)return ls;gs(Rs,Rs,Ds),Cs=Ps+1}else break}return ls};detectCycle.detectAllDirectedCycle=detectAllDirectedCycle;var detectAllCycles=function(ts,rs,as,os){return os===void 0&&(os=!0),rs?detectAllDirectedCycle(ts,as,os):detectAllUndirectedCycle(ts,as,os)};detectCycle.detectAllCycles=detectAllCycles;var _default$f=detectDirectedCycle;detectCycle.default=_default$f;var dijkstra$2={};const require$$0$5=getAugmentedNamespace(tslib_es6$1),require$$0$4=getAugmentedNamespace(esm$2);Object.defineProperty(dijkstra$2,"__esModule",{value:!0});dijkstra$2.default=void 0;var _tslib$1=require$$0$5,_util$9=require$$0$4,_util2=util$3,minVertex=function(ts,rs,as){for(var os=1/0,is,us=0;us<rs.length;us++){var ls=rs[us].id;!as[ls]&&ts[ls]<=os&&(os=ts[ls],is=rs[us])}return is},dijkstra$1=function(ts,rs,as,os){var is=ts.nodes,us=is===void 0?[]:is,ls=ts.edges,fs=ls===void 0?[]:ls,hs={},vs={},gs={};us.forEach(function(bs,Cs){var As=bs.id;vs[As]=1/0,As===rs&&(vs[As]=0)});for(var ys=us.length,xs=function(Cs){var As=minVertex(vs,us,hs),Is=As.id;if(hs[Is]=!0,vs[Is]===1/0)return"continue";var ks=[];as?ks=(0,_util2.getOutEdgesNodeId)(Is,fs):ks=(0,_util2.getEdgesByNodeId)(Is,fs),ks.forEach(function(Ps){var Ds=Ps.target,Fs=Ps.source,Rs=Ds===Is?Fs:Ds,js=os&&Ps[os]?Ps[os]:1;vs[Rs]>vs[As.id]+js?(vs[Rs]=vs[As.id]+js,gs[Rs]=[As.id]):vs[Rs]===vs[As.id]+js&&gs[Rs].push(As.id)})},ms=0;ms<ys;ms++)xs();gs[rs]=[rs];var Ss={};for(var Ms in vs)vs[Ms]!==1/0&&findAllPaths(rs,Ms,gs,Ss);var $s={};for(var Ms in Ss)$s[Ms]=Ss[Ms][0];return{length:vs,path:$s,allPath:Ss}},_default$e=dijkstra$1;dijkstra$2.default=_default$e;function findAllPaths(ns,ts,rs,as){if(ns===ts)return[ns];if(as[ts])return as[ts];for(var os=[],is=0,us=rs[ts];is<us.length;is++){var ls=us[is],fs=findAllPaths(ns,ls,rs,as);if(!fs)return;for(var hs=0,vs=fs;hs<vs.length;hs++){var gs=vs[hs];(0,_util$9.isArray)(gs)?os.push((0,_tslib$1.__spreadArray)((0,_tslib$1.__spreadArray)([],gs,!0),[ts],!1)):os.push([gs,ts])}}return as[ts]=os,as[ts]}var findPath$1={};Object.defineProperty(findPath$1,"__esModule",{value:!0});findPath$1.findShortestPath=findPath$1.findAllPath=void 0;var _dijkstra$1=_interopRequireDefault$9(dijkstra$2),_util$8=util$3;function _interopRequireDefault$9(ns){return ns&&ns.__esModule?ns:{default:ns}}var findShortestPath=function(ts,rs,as,os,is){var us=(0,_dijkstra$1.default)(ts,rs,os,is),ls=us.length,fs=us.path,hs=us.allPath;return{length:ls[as],path:fs[as],allPath:hs[as]}};findPath$1.findShortestPath=findShortestPath;var findAllPath=function(ts,rs,as,os){var is;if(rs===as)return[[rs]];var us=ts.edges,ls=us===void 0?[]:us,fs=[rs],hs=(is={},is[rs]=!0,is),vs=[],gs=[],ys=os?(0,_util$8.getNeighbors)(rs,ls,"target"):(0,_util$8.getNeighbors)(rs,ls);for(vs.push(ys);fs.length>0&&vs.length>0;){var xs=vs[vs.length-1];if(xs.length){var ms=xs.shift();ms&&(fs.push(ms),hs[ms]=!0,ys=os?(0,_util$8.getNeighbors)(ms,ls,"target"):(0,_util$8.getNeighbors)(ms,ls),vs.push(ys.filter(function($s){return!hs[$s]})))}else{var Ss=fs.pop();hs[Ss]=!1,vs.pop();continue}if(fs[fs.length-1]===as){var Ms=fs.map(function(bs){return bs});gs.push(Ms);var Ss=fs.pop();hs[Ss]=!1,vs.pop()}}return gs};findPath$1.findAllPath=findAllPath;var floydWarshall$4={};Object.defineProperty(floydWarshall$4,"__esModule",{value:!0});floydWarshall$4.default=void 0;var _adjacentMatrix$2=_interopRequireDefault$8(adjacentMatrix);function _interopRequireDefault$8(ns){return ns&&ns.__esModule?ns:{default:ns}}var floydWarshall$3=function(ts,rs){for(var as=(0,_adjacentMatrix$2.default)(ts,rs),os=[],is=as.length,us=0;us<is;us+=1){os[us]=[];for(var ls=0;ls<is;ls+=1)us===ls?os[us][ls]=0:as[us][ls]===0||!as[us][ls]?os[us][ls]=1/0:os[us][ls]=as[us][ls]}for(var fs=0;fs<is;fs+=1)for(var us=0;us<is;us+=1)for(var ls=0;ls<is;ls+=1)os[us][ls]>os[us][fs]+os[fs][ls]&&(os[us][ls]=os[us][fs]+os[fs][ls]);return os},_default$d=floydWarshall$3;floydWarshall$4.default=_default$d;var labelPropagation$1={};Object.defineProperty(labelPropagation$1,"__esModule",{value:!0});labelPropagation$1.default=void 0;var _adjacentMatrix$1=_interopRequireDefault$7(adjacentMatrix),_util$7=util$3;function _interopRequireDefault$7(ns){return ns&&ns.__esModule?ns:{default:ns}}var labelPropagation=function(ts,rs,as,os){rs===void 0&&(rs=!1),as===void 0&&(as="weight"),os===void 0&&(os=1e3);var is=ts.nodes,us=is===void 0?[]:is,ls=ts.edges,fs=ls===void 0?[]:ls,hs={},vs={};us.forEach(function(Cs,As){var Is=(0,_util$7.uniqueId)();Cs.clusterId=Is,hs[Is]={id:Is,nodes:[Cs]},vs[Cs.id]={node:Cs,idx:As}});var gs=(0,_adjacentMatrix$1.default)(ts,rs),ys={};gs.forEach(function(Cs,As){var Is=us[As].id;ys[Is]={},Cs.forEach(function(ks,Ps){if(ks){var Ds=us[Ps].id;ys[Is][Ds]=ks}})});for(var xs=0,ms=function(){var As=!1;if(us.forEach(function(Is){var ks={};Object.keys(ys[Is.id]).forEach(function(Ys){var Ks=ys[Is.id][Ys],qs=vs[Ys].node,_l=qs.clusterId;ks[_l]||(ks[_l]=0),ks[_l]+=Ks});var Ps=-1/0,Ds=[];if(Object.keys(ks).forEach(function(Ys){Ps<ks[Ys]?(Ps=ks[Ys],Ds=[Ys]):Ps===ks[Ys]&&Ds.push(Ys)}),!(Ds.length===1&&Ds[0]===Is.clusterId)){var Fs=Ds.indexOf(Is.clusterId);if(Fs>=0&&Ds.splice(Fs,1),Ds&&Ds.length){As=!0;var Rs=hs[Is.clusterId],js=Rs.nodes.indexOf(Is);Rs.nodes.splice(js,1);var zs=Math.floor(Math.random()*Ds.length),Us=hs[Ds[zs]];Us.nodes.push(Is),Is.clusterId=Us.id}}}),!As)return"break";xs++};xs<os;){var Ss=ms();if(Ss==="break")break}Object.keys(hs).forEach(function(Cs){var As=hs[Cs];(!As.nodes||!As.nodes.length)&&delete hs[Cs]});var Ms=[],$s={};fs.forEach(function(Cs){var As=Cs.source,Is=Cs.target,ks=Cs[as]||1,Ps=vs[As].node.clusterId,Ds=vs[Is].node.clusterId,Fs="".concat(Ps,"---").concat(Ds);if($s[Fs])$s[Fs].weight+=ks,$s[Fs].count++;else{var Rs={source:Ps,target:Ds,weight:ks,count:1};$s[Fs]=Rs,Ms.push(Rs)}});var bs=[];return Object.keys(hs).forEach(function(Cs){bs.push(hs[Cs])}),{clusters:bs,clusterEdges:Ms}},_default$c=labelPropagation;labelPropagation$1.default=_default$c;var louvain$1={},vector={};Object.defineProperty(vector,"__esModule",{value:!0});vector.default=void 0;var _util$6=require$$0$4,Vector=function(){function ns(ts){this.arr=ts}return ns.prototype.getArr=function(){return this.arr||[]},ns.prototype.add=function(ts){var rs,as=ts.arr;if(!(!((rs=this.arr)===null||rs===void 0)&&rs.length))return new ns(as);if(!(as!=null&&as.length))return new ns(this.arr);if(this.arr.length===as.length){var os=[];for(var is in this.arr)os[is]=this.arr[is]+as[is];return new ns(os)}},ns.prototype.subtract=function(ts){var rs,as=ts.arr;if(!(!((rs=this.arr)===null||rs===void 0)&&rs.length))return new ns(as);if(!(as!=null&&as.length))return new ns(this.arr);if(this.arr.length===as.length){var os=[];for(var is in this.arr)os[is]=this.arr[is]-as[is];return new ns(os)}},ns.prototype.avg=function(ts){var rs=[];if(ts!==0)for(var as in this.arr)rs[as]=this.arr[as]/ts;return new ns(rs)},ns.prototype.negate=function(){var ts=[];for(var rs in this.arr)ts[rs]=-this.arr[rs];return new ns(ts)},ns.prototype.squareEuclideanDistance=function(ts){var rs,as=ts.arr;if(!(!((rs=this.arr)===null||rs===void 0)&&rs.length)||!(as!=null&&as.length))return 0;if(this.arr.length===as.length){var os=0;for(var is in this.arr)os+=Math.pow(this.arr[is]-ts.arr[is],2);return os}},ns.prototype.euclideanDistance=function(ts){var rs,as=ts.arr;if(!(!((rs=this.arr)===null||rs===void 0)&&rs.length)||!(as!=null&&as.length))return 0;if(this.arr.length===as.length){var os=0;for(var is in this.arr)os+=Math.pow(this.arr[is]-ts.arr[is],2);return Math.sqrt(os)}else console.error("The two vectors are unequal in length.")},ns.prototype.normalize=function(){var ts=[],rs=(0,_util$6.clone)(this.arr);rs.sort(function(us,ls){return us-ls});var as=rs[rs.length-1],os=rs[0];for(var is in this.arr)ts[is]=(this.arr[is]-os)/(as-os);return new ns(ts)},ns.prototype.norm2=function(){var ts;if(!(!((ts=this.arr)===null||ts===void 0)&&ts.length))return 0;var rs=0;for(var as in this.arr)rs+=Math.pow(this.arr[as],2);return Math.sqrt(rs)},ns.prototype.dot=function(ts){var rs,as=ts.arr;if(!(!((rs=this.arr)===null||rs===void 0)&&rs.length)||!(as!=null&&as.length))return 0;if(this.arr.length===as.length){var os=0;for(var is in this.arr)os+=this.arr[is]*ts.arr[is];return os}else console.error("The two vectors are unequal in length.")},ns.prototype.equal=function(ts){var rs,as=ts.arr;if(((rs=this.arr)===null||rs===void 0?void 0:rs.length)!==(as==null?void 0:as.length))return!1;for(var os in this.arr)if(this.arr[os]!==as[os])return!1;return!0},ns}(),_default$b=Vector;vector.default=_default$b;var nodeProperties={},time={};Object.defineProperty(time,"__esModule",{value:!0});time.secondReg=time.dateReg=void 0;var secondReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;time.secondReg=secondReg;var dateReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;time.dateReg=dateReg;Object.defineProperty(nodeProperties,"__esModule",{value:!0});nodeProperties.getPropertyWeight=nodeProperties.getAllSortProperties=nodeProperties.getAllProperties=nodeProperties.default=void 0;var _time=time,getAllSortProperties=function(ts,rs){ts===void 0&&(ts=[]),rs===void 0&&(rs=100);var as={};ts.forEach(function(is){is.properties&&Object.keys(is.properties).forEach(function(us){if(us==="id"||!"".concat(is.properties[us]).match(_time.secondReg)&&!"".concat(is.properties[us]).match(_time.dateReg)&&isNaN(Number(is.properties[us]))){as.hasOwnProperty(us)&&delete as[us];return}as.hasOwnProperty(us)?as[us]+=1:as[us]=1})});var os=Object.keys(as).sort(function(is,us){return as[us]-as[is]});return os.length<rs?os:os.slice(0,rs)};nodeProperties.getAllSortProperties=getAllSortProperties;var processProperty=function(ts,rs){return rs.map(function(as){return ts.hasOwnProperty(as)?ts[as]:0})},getPropertyWeight=function(ts){for(var rs=getAllSortProperties(ts),as=[],os=0;os<ts.length;os++)as[os]=processProperty(ts[os].properties,rs);return as};nodeProperties.getPropertyWeight=getPropertyWeight;var getAllProperties=function(ts,rs){rs===void 0&&(rs=void 0);var as=[];return ts.forEach(function(os){rs===void 0&&as.push(os),os[rs]!==void 0&&as.push(os[rs])}),as};nodeProperties.getAllProperties=getAllProperties;var _default$a={getAllSortProperties,getPropertyWeight,getAllProperties};nodeProperties.default=_default$a;var dataPreprocessing={},types$1={};Object.defineProperty(types$1,"__esModule",{value:!0});types$1.DistanceType=void 0;var DistanceType;types$1.DistanceType=DistanceType;(function(ns){ns.EuclideanDistance="euclideanDistance"})(DistanceType||(types$1.DistanceType=DistanceType={}));Object.defineProperty(dataPreprocessing,"__esModule",{value:!0});dataPreprocessing.oneHot=dataPreprocessing.getDistance=dataPreprocessing.getAllKeyValueMap=dataPreprocessing.default=void 0;var _util$5=require$$0$4,_types=types$1,_vector$1=_interopRequireDefault$6(vector);function _interopRequireDefault$6(ns){return ns&&ns.__esModule?ns:{default:ns}}var getAllKeyValueMap=function(ts,rs,as){var os=[];rs!=null&&rs.length?os=rs:(ts.forEach(function(us){os=os.concat(Object.keys(us))}),os=(0,_util$5.uniq)(os));var is={};return os.forEach(function(us){var ls=[];ts.forEach(function(fs){fs[us]!==void 0&&fs[us]!==""&&ls.push(fs[us])}),ls.length&&!(as!=null&&as.includes(us))&&(is[us]=(0,_util$5.uniq)(ls))}),is};dataPreprocessing.getAllKeyValueMap=getAllKeyValueMap;var oneHot=function(ts,rs,as){var os=getAllKeyValueMap(ts,rs,as),is=[];if(!Object.keys(os).length)return is;var us=Object.values(os),ls=us.every(function(fs){return fs.every(function(hs){return typeof hs=="number"})});return ts.forEach(function(fs,hs){var vs=[];Object.keys(os).forEach(function(gs){var ys=fs[gs],xs=os[gs],ms=xs.findIndex(function($s){return ys===$s}),Ss=[];if(ls)Ss.push(ys);else for(var Ms=0;Ms<xs.length;Ms++)Ms===ms?Ss.push(1):Ss.push(0);vs=vs.concat(Ss)}),is[hs]=vs}),is};dataPreprocessing.oneHot=oneHot;var getDistance=function(ts,rs,as,os){as===void 0&&(as=_types.DistanceType.EuclideanDistance);var is=0;switch(as){case _types.DistanceType.EuclideanDistance:is=new _vector$1.default(ts).euclideanDistance(new _vector$1.default(rs));break}return is};dataPreprocessing.getDistance=getDistance;var _default$9={getAllKeyValueMap,oneHot,getDistance};dataPreprocessing.default=_default$9;Object.defineProperty(louvain$1,"__esModule",{value:!0});louvain$1.default=void 0;var _util$4=require$$0$4,_adjacentMatrix=_interopRequireDefault$5(adjacentMatrix),_vector=_interopRequireDefault$5(vector),_nodeProperties=nodeProperties,_dataPreprocessing=dataPreprocessing;function _interopRequireDefault$5(ns){return ns&&ns.__esModule?ns:{default:ns}}var getModularity=function(ts,rs,as,os){for(var is=rs.length,us=2*os,ls=0,fs=0;fs<is;fs++)for(var hs=ts[fs].clusterId,vs=0;vs<is;vs++){var gs=ts[vs].clusterId;if(hs===gs){var ys=rs[fs][vs]||0,xs=as[fs]||0,ms=as[vs]||0;ls+=ys-xs*ms/us}}return ls*=1/us,ls},getInertialModularity=function(ts,rs){ts===void 0&&(ts=[]);for(var as=ts.length,os=new _vector.default([]),is=0;is<as;is++)os=os.add(new _vector.default(rs[is]));var us=os.avg(as);us.normalize();for(var ls=0,is=0;is<as;is++){var fs=new _vector.default(rs[is]),hs=fs.squareEuclideanDistance(us);ls+=hs}var vs=[];ts.forEach(function(){vs.push([])});for(var is=0;is<as;is++){var fs=new _vector.default(rs[is]);ts[is].clusterInertial=0;for(var gs=0;gs<as;gs++){if(is===gs){vs[is][gs]=0;continue}var ys=new _vector.default(rs[gs]);vs[is][gs]=fs.squareEuclideanDistance(ys),ts[is].clusterInertial+=vs[is][gs]}}for(var xs=0,ms=2*as*ls,is=0;is<as;is++)for(var Ss=ts[is].clusterId,gs=0;gs<as;gs++){var Ms=ts[gs].clusterId;if(!(is===gs||Ss!==Ms)){var $s=ts[is].clusterInertial*ts[gs].clusterInertial/Math.pow(ms,2)-vs[is][gs]/ms;xs+=$s}}return Number(xs.toFixed(4))},louvain=function(ts,rs,as,os,is,us,ls,fs,hs){rs===void 0&&(rs=!1),as===void 0&&(as="weight"),os===void 0&&(os=1e-4),is===void 0&&(is=!1),us===void 0&&(us=void 0),ls===void 0&&(ls=[]),fs===void 0&&(fs=["id"]),hs===void 0&&(hs=1);var vs=ts.nodes,gs=vs===void 0?[]:vs,ys=ts.edges,xs=ys===void 0?[]:ys,ms=[];if(is){gs.forEach(function(Vs,Zs){Vs.properties=Vs.properties||{},Vs.originIndex=Zs});var Ss=[];gs.every(function(Vs){return Vs.hasOwnProperty("nodeType")})&&(Ss=Array.from(new Set(gs.map(function(Vs){return Vs.nodeType}))),gs.forEach(function(Vs){Vs.properties.nodeType=Ss.findIndex(function(Zs){return Zs===Vs.nodeType})}));var Ms=(0,_nodeProperties.getAllProperties)(gs,us);ms=(0,_dataPreprocessing.oneHot)(Ms,ls,fs)}var $s=1,bs={},Cs={};gs.forEach(function(Vs,Zs){var Sl=String($s++);Vs.clusterId=Sl,bs[Sl]={id:Sl,nodes:[Vs]},Cs[Vs.id]={node:Vs,idx:Zs}});var As=(0,_adjacentMatrix.default)(ts,rs),Is=[],ks={},Ps=0;As.forEach(function(Vs,Zs){var Sl=0,Il=gs[Zs].id;ks[Il]={},Vs.forEach(function(Nl,Tl){if(Nl){Sl+=Nl;var _c=gs[Tl].id;ks[Il][_c]=Nl,Ps+=Nl}}),Is.push(Sl)}),Ps/=2;for(var Ds=1/0,Fs=1/0,Rs=0,js=[],zs={};;){is&&gs.every(function(Vs){return Vs.hasOwnProperty("properties")})?Ds=getModularity(gs,As,Is,Ps)+getInertialModularity(gs,ms)*hs:Ds=getModularity(gs,As,Is,Ps),Rs===0&&(Fs=Ds,js=gs,zs=bs);var Us=Ds>0&&Ds>Fs&&Ds-Fs<os;if(Ds>Fs&&(js=gs.map(function(Vs){return{node:Vs,clusterId:Vs.clusterId}}),zs=(0,_util$4.clone)(bs),Fs=Ds),Us||Rs>100)break;Rs++,Object.keys(bs).forEach(function(Vs){var Zs=0;xs.forEach(function(Sl){var Il=Sl.source,Nl=Sl.target,Tl=Cs[Il].node.clusterId,_c=Cs[Nl].node.clusterId;(Tl===Vs&&_c!==Vs||_c===Vs&&Tl!==Vs)&&(Zs=Zs+(Sl[as]||1))}),bs[Vs].sumTot=Zs}),gs.forEach(function(Vs,Zs){var Sl=bs[Vs.clusterId],Il=0,Nl,Tl=Is[Zs]/(2*Ps),_c=0,l0=Sl.nodes;l0.forEach(function(Lv){var Jv=Cs[Lv.id].idx;_c+=As[Zs][Jv]||0});var g0=_c-Sl.sumTot*Tl,R0=l0.filter(function(Lv){return Lv.id!==Vs.id});R0.forEach(function(Lv,Jv){ms[Lv.originIndex]});var V0=getInertialModularity(R0,ms)*hs,U0=ks[Vs.id];if(Object.keys(U0).forEach(function(Lv){var Jv=Cs[Lv].node,Yv=Jv.clusterId;if(Yv!==Vs.clusterId){var Pv=bs[Yv],jv=Pv.nodes;if(!(!jv||!jv.length)){var wp=0;jv.forEach(function(M0){var i0=Cs[M0.id].idx;wp+=As[Zs][i0]||0});var j0=wp-Pv.sumTot*Tl,Ul=jv.concat([Vs]);Ul.forEach(function(M0,i0){ms[M0.originIndex]});var Xs=getInertialModularity(Ul,ms)*hs,d0=j0-g0;is&&(d0=j0+Xs-(g0+V0)),d0>Il&&(Il=d0,Nl=Pv)}}}),Il>0){Nl.nodes.push(Vs);var tv=Vs.clusterId;Vs.clusterId=Nl.id;var Os=Sl.nodes.indexOf(Vs);Sl.nodes.splice(Os,1);var ov=0,$v=0;xs.forEach(function(Lv){var Jv=Lv.source,Yv=Lv.target,Pv=Cs[Jv].node.clusterId,jv=Cs[Yv].node.clusterId;(Pv===Nl.id&&jv!==Nl.id||jv===Nl.id&&Pv!==Nl.id)&&(ov=ov+(Lv[as]||1)),(Pv===tv&&jv!==tv||jv===tv&&Pv!==tv)&&($v=$v+(Lv[as]||1))}),Nl.sumTot=ov,Sl.sumTot=$v}})}var Ys={},Ks=0;Object.keys(zs).forEach(function(Vs){var Zs=zs[Vs];if(!Zs.nodes||!Zs.nodes.length){delete zs[Vs];return}var Sl=String(Ks+1);Sl!==Vs&&(Zs.id=Sl,Zs.nodes=Zs.nodes.map(function(Il){return{id:Il.id,clusterId:Sl}}),zs[Sl]=Zs,Ys[Vs]=Sl,delete zs[Vs],Ks++)}),js.forEach(function(Vs){var Zs=Vs.node,Sl=Vs.clusterId;Zs&&(Zs.clusterId=Sl,Zs.clusterId&&Ys[Zs.clusterId]&&(Zs.clusterId=Ys[Zs.clusterId]))});var qs=[],_l={};xs.forEach(function(Vs){var Zs=Vs.source,Sl=Vs.target,Il=Vs[as]||1,Nl=Cs[Zs].node.clusterId,Tl=Cs[Sl].node.clusterId;if(!(!Nl||!Tl)){var _c="".concat(Nl,"---").concat(Tl);if(_l[_c])_l[_c].weight+=Il,_l[_c].count++;else{var l0={source:Nl,target:Tl,weight:Il,count:1};_l[_c]=l0,qs.push(l0)}}});var Js=[];return Object.keys(zs).forEach(function(Vs){Js.push(zs[Vs])}),{clusters:Js,clusterEdges:qs}},_default$8=louvain;louvain$1.default=_default$8;var mts={},unionFind={};Object.defineProperty(unionFind,"__esModule",{value:!0});unionFind.default=void 0;var UnionFind=function(){function ns(ts){this.count=ts.length,this.parent={};for(var rs=0,as=ts;rs<as.length;rs++){var os=as[rs];this.parent[os]=os}}return ns.prototype.find=function(ts){for(;this.parent[ts]!==ts;)ts=this.parent[ts];return ts},ns.prototype.union=function(ts,rs){var as=this.find(ts),os=this.find(rs);as!==os&&(as<os?(this.parent[rs]!==rs&&this.union(this.parent[rs],ts),this.parent[rs]=this.parent[ts]):(this.parent[ts]!==ts&&this.union(this.parent[ts],rs),this.parent[ts]=this.parent[rs]))},ns.prototype.connected=function(ts,rs){return this.find(ts)===this.find(rs)},ns}(),_default$7=UnionFind;unionFind.default=_default$7;var binaryHeap={};Object.defineProperty(binaryHeap,"__esModule",{value:!0});binaryHeap.default=void 0;var defaultCompare=function(ts,rs){return ts-rs},MinBinaryHeap=function(){function ns(ts){ts===void 0&&(ts=defaultCompare),this.compareFn=ts,this.list=[]}return ns.prototype.getLeft=function(ts){return 2*ts+1},ns.prototype.getRight=function(ts){return 2*ts+2},ns.prototype.getParent=function(ts){return ts===0?null:Math.floor((ts-1)/2)},ns.prototype.isEmpty=function(){return this.list.length<=0},ns.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},ns.prototype.delMin=function(){var ts=this.top(),rs=this.list.pop();return this.list.length>0&&(this.list[0]=rs,this.moveDown(0)),ts},ns.prototype.insert=function(ts){if(ts!==null){this.list.push(ts);var rs=this.list.length-1;return this.moveUp(rs),!0}return!1},ns.prototype.moveUp=function(ts){for(var rs=this.getParent(ts);ts&&ts>0&&this.compareFn(this.list[rs],this.list[ts])>0;){var as=this.list[rs];this.list[rs]=this.list[ts],this.list[ts]=as,ts=rs,rs=this.getParent(ts)}},ns.prototype.moveDown=function(ts){var rs,as=ts,os=this.getLeft(ts),is=this.getRight(ts),us=this.list.length;os!==null&&os<us&&this.compareFn(this.list[as],this.list[os])>0?as=os:is!==null&&is<us&&this.compareFn(this.list[as],this.list[is])>0&&(as=is),ts!==as&&(rs=[this.list[as],this.list[ts]],this.list[ts]=rs[0],this.list[as]=rs[1],this.moveDown(as))},ns}(),_default$6=MinBinaryHeap;binaryHeap.default=_default$6;Object.defineProperty(mts,"__esModule",{value:!0});mts.default=void 0;var _unionFind=_interopRequireDefault$4(unionFind),_binaryHeap=_interopRequireDefault$4(binaryHeap),_util$3=util$3;function _interopRequireDefault$4(ns){return ns&&ns.__esModule?ns:{default:ns}}var primMST=function(ts,rs){var as=[],os=ts.nodes,is=os===void 0?[]:os,us=ts.edges,ls=us===void 0?[]:us;if(is.length===0)return as;var fs=is[0],hs=new Set;hs.add(fs);var vs=function(Ms,$s){return rs?Ms.weight-$s.weight:0},gs=new _binaryHeap.default(vs);for((0,_util$3.getEdgesByNodeId)(fs.id,ls).forEach(function(Ss){gs.insert(Ss)});!gs.isEmpty();){var ys=gs.delMin(),xs=ys.source,ms=ys.target;hs.has(xs)&&hs.has(ms)||(as.push(ys),hs.has(xs)||(hs.add(xs),(0,_util$3.getEdgesByNodeId)(xs,ls).forEach(function(Ss){gs.insert(Ss)})),hs.has(ms)||(hs.add(ms),(0,_util$3.getEdgesByNodeId)(ms,ls).forEach(function(Ss){gs.insert(Ss)})))}return as},kruskalMST=function(ts,rs){var as=[],os=ts.nodes,is=os===void 0?[]:os,us=ts.edges,ls=us===void 0?[]:us;if(is.length===0)return as;var fs=ls.map(function(xs){return xs});rs&&fs.sort(function(xs,ms){return xs.weight-ms.weight});for(var hs=new _unionFind.default(is.map(function(xs){return xs.id}));fs.length>0;){var vs=fs.shift(),gs=vs.source,ys=vs.target;hs.connected(gs,ys)||(as.push(vs),hs.union(gs,ys))}return as},minimumSpanningTree=function(ts,rs,as){var os={prim:primMST,kruskal:kruskalMST};return as?os[as](ts,rs):kruskalMST(ts,rs)},_default$5=minimumSpanningTree;mts.default=_default$5;var pageRank$1={};Object.defineProperty(pageRank$1,"__esModule",{value:!0});pageRank$1.default=void 0;var _degree=_interopRequireDefault$3(degree$2),_util$2=util$3;function _interopRequireDefault$3(ns){return ns&&ns.__esModule?ns:{default:ns}}var pageRank=function(ts,rs,as){typeof rs!="number"&&(rs=1e-6),typeof as!="number"&&(as=.85);for(var os=1,is=0,us=1e3,ls=ts.nodes,fs=ls===void 0?[]:ls,hs=ts.edges,vs=hs===void 0?[]:hs,gs=fs.length,ys,xs={},ms={},Ss=0;Ss<gs;++Ss){var Ms=fs[Ss],$s=Ms.id;xs[$s]=1/gs,ms[$s]=1/gs}for(var bs=(0,_degree.default)(ts);us>0&&os>rs;){is=0;for(var Ss=0;Ss<gs;++Ss){var Ms=fs[Ss],$s=Ms.id;if(ys=0,bs[Ms.id].inDegree===0)xs[$s]=0;else{for(var Cs=(0,_util$2.getNeighbors)($s,vs,"source"),As=0;As<Cs.length;++As){var Is=Cs[As],ks=bs[Is].outDegree;ks>0&&(ys+=ms[Is]/ks)}xs[$s]=as*ys,is+=xs[$s]}}is=(1-is)/gs,os=0;for(var Ss=0;Ss<gs;++Ss){var Ms=fs[Ss],$s=Ms.id;ys=xs[$s]+is,os+=Math.abs(ys-ms[$s]),ms[$s]=ys}us-=1}return ms},_default$4=pageRank;pageRank$1.default=_default$4;var gaddi={},gSpan$1={},struct={};Object.defineProperty(struct,"__esModule",{value:!0});struct.VACANT_NODE_LABEL=struct.VACANT_NODE_ID=struct.VACANT_GRAPH_ID=struct.VACANT_EDGE_LABEL=struct.VACANT_EDGE_ID=struct.Node=struct.Graph=struct.Edge=struct.AUTO_EDGE_ID=void 0;var VACANT_EDGE_ID=-1;struct.VACANT_EDGE_ID=VACANT_EDGE_ID;var VACANT_NODE_ID=-1;struct.VACANT_NODE_ID=VACANT_NODE_ID;var VACANT_EDGE_LABEL="-1";struct.VACANT_EDGE_LABEL=VACANT_EDGE_LABEL;var VACANT_NODE_LABEL="-1";struct.VACANT_NODE_LABEL=VACANT_NODE_LABEL;var VACANT_GRAPH_ID=-1;struct.VACANT_GRAPH_ID=VACANT_GRAPH_ID;var AUTO_EDGE_ID="-1";struct.AUTO_EDGE_ID=AUTO_EDGE_ID;var Edge$1=function(){function ns(ts,rs,as,os){ts===void 0&&(ts=VACANT_EDGE_ID),rs===void 0&&(rs=VACANT_NODE_ID),as===void 0&&(as=VACANT_NODE_ID),os===void 0&&(os=VACANT_EDGE_LABEL),this.id=ts,this.from=rs,this.to=as,this.label=os}return ns}();struct.Edge=Edge$1;var Node$1=function(){function ns(ts,rs){ts===void 0&&(ts=VACANT_NODE_ID),rs===void 0&&(rs=VACANT_NODE_LABEL),this.id=ts,this.label=rs,this.edges=[],this.edgeMap={}}return ns.prototype.addEdge=function(ts){this.edges.push(ts),this.edgeMap[ts.id]=ts},ns}();struct.Node=Node$1;var Graph$3=function(){function ns(ts,rs,as){ts===void 0&&(ts=VACANT_NODE_ID),rs===void 0&&(rs=!0),as===void 0&&(as=!1),this.id=ts,this.edgeIdAutoIncrease=rs,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=as}return ns.prototype.getNodeNum=function(){return this.nodes.length},ns.prototype.addNode=function(ts,rs){if(!this.nodeMap[ts]){var as=new Node$1(ts,rs);this.nodes.push(as),this.nodeMap[ts]=as,this.nodeLabelMap[rs]||(this.nodeLabelMap[rs]=[]),this.nodeLabelMap[rs].push(ts)}},ns.prototype.addEdge=function(ts,rs,as,os){if((this.edgeIdAutoIncrease||ts===void 0)&&(ts=this.counter++),!(this.nodeMap[rs]&&this.nodeMap[as]&&this.nodeMap[as].edgeMap[ts])){var is=new Edge$1(ts,rs,as,os);if(this.edges.push(is),this.edgeMap[ts]=is,this.nodeMap[rs].addEdge(is),this.edgeLabelMap[os]||(this.edgeLabelMap[os]=[]),this.edgeLabelMap[os].push(is),!this.directed){var us=new Edge$1(ts,as,rs,os);this.nodeMap[as].addEdge(us),this.edgeLabelMap[os].push(us)}}},ns}();struct.Graph=Graph$3;Object.defineProperty(gSpan$1,"__esModule",{value:!0});gSpan$1.default=void 0;var _util$1=require$$0$4,_struct=struct,DFSedge=function(){function ns(ts,rs,as,os,is){this.fromNode=ts,this.toNode=rs,this.nodeEdgeNodeLabel={nodeLabel1:as||_struct.VACANT_NODE_LABEL,edgeLabel:os||_struct.VACANT_EDGE_LABEL,nodeLabel2:is||_struct.VACANT_NODE_LABEL}}return ns.prototype.equalTo=function(ts){return this.fromNode===ts.formNode&&this.toNode===ts.toNode&&this.nodeEdgeNodeLabel===ts.nodeEdgeNodeLabel},ns.prototype.notEqualTo=function(ts){return!this.equalTo(ts)},ns}(),DFScode=function(){function ns(){this.rmpath=[],this.dfsEdgeList=[]}return ns.prototype.equalTo=function(ts){var rs=this.dfsEdgeList.length,as=ts.length;if(rs!==as)return!1;for(var os=0;os<rs;os++)if(this.dfsEdgeList[os]!==ts[os])return!1;return!0},ns.prototype.notEqualTo=function(ts){return!this.equalTo(ts)},ns.prototype.pushBack=function(ts,rs,as,os,is){return this.dfsEdgeList.push(new DFSedge(ts,rs,as,os,is)),this.dfsEdgeList},ns.prototype.toGraph=function(ts,rs){ts===void 0&&(ts=_struct.VACANT_GRAPH_ID),rs===void 0&&(rs=!1);var as=new _struct.Graph(ts,!0,rs);return this.dfsEdgeList.forEach(function(os){var is=os.fromNode,us=os.toNode,ls=os.nodeEdgeNodeLabel,fs=ls.nodeLabel1,hs=ls.edgeLabel,vs=ls.nodeLabel2;fs!==_struct.VACANT_NODE_LABEL&&as.addNode(is,fs),vs!==_struct.VACANT_NODE_LABEL&&as.addNode(us,vs),fs!==_struct.VACANT_NODE_LABEL&&vs!==fs&&as.addEdge(void 0,is,us,hs)}),as},ns.prototype.buildRmpath=function(){this.rmpath=[];for(var ts=void 0,rs=this.dfsEdgeList.length,as=rs-1;as>=0;as--){var os=this.dfsEdgeList[as],is=os.fromNode,us=os.toNode;is<us&&(ts===void 0||us===ts)&&(this.rmpath.push(as),ts=is)}return this.rmpath},ns.prototype.getNodeNum=function(){var ts={};return this.dfsEdgeList.forEach(function(rs){ts[rs.fromNode]||(ts[rs.fromNode]=!0),ts[rs.toNode]||(ts[rs.toNode]=!0)}),Object.keys(ts).length},ns}(),History=function(){function ns(ts){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!ts){for(;ts;){var rs=ts.edge;this.edges.push(rs),this.nodesUsed[rs.from]=1,this.nodesUsed[rs.to]=1,this.edgesUsed[rs.id]=1,ts=ts.preNode}this.edges=this.edges.reverse()}}return ns.prototype.hasNode=function(ts){return this.nodesUsed[ts.id]===1},ns.prototype.hasEdge=function(ts){return this.edgesUsed[ts.id]===1},ns}(),GSpan=function(){function ns(ts){var rs=ts.graphs,as=ts.minSupport,os=as===void 0?2:as,is=ts.minNodeNum,us=is===void 0?1:is,ls=ts.maxNodeNum,fs=ls===void 0?4:ls,hs=ts.top,vs=hs===void 0?10:hs,gs=ts.directed,ys=gs===void 0?!1:gs,xs=ts.verbose,ms=xs===void 0?!1:xs;this.graphs=rs,this.dfsCode=new DFScode,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=os,this.top=vs,this.directed=ys,this.counter=0,this.maxNodeNum=fs,this.minNodeNum=us,this.verbose=ms,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return ns.prototype.findForwardRootEdges=function(ts,rs){var as=this,os=[],is=ts.nodeMap;return rs.edges.forEach(function(us){(as.directed||rs.label<=is[us.to].label)&&os.push(us)}),os},ns.prototype.findBackwardEdge=function(ts,rs,as,os){if(!this.directed&&rs===as)return null;for(var is=ts.nodeMap,us=is[as.to],ls=us.edges,fs=ls.length,hs=0;hs<fs;hs++){var vs=ls[hs];if(!(os.hasEdge(vs)||vs.to!==rs.from)){if(this.directed){if(is[rs.from].label<is[as.to].label||is[rs.from].label===is[as.to].label&&rs.label<=vs.label)return vs}else if(rs.label<vs.label||rs.label===vs.label&&is[rs.to].label<=is[as.to].label)return vs}}return null},ns.prototype.findForwardPureEdges=function(ts,rs,as,os){for(var is=[],us=rs.to,ls=ts.nodeMap[us].edges,fs=ls.length,hs=0;hs<fs;hs++){var vs=ls[hs],gs=ts.nodeMap[vs.to];as<=gs.label&&!os.hasNode(gs)&&is.push(vs)}return is},ns.prototype.findForwardRmpathEdges=function(ts,rs,as,os){for(var is=[],us=ts.nodeMap,ls=us[rs.to].label,fs=us[rs.from],hs=fs.edges,vs=hs.length,gs=0;gs<vs;gs++){var ys=hs[gs],xs=us[ys.to].label;rs.to===ys.to||as>xs||os.hasNode(us[ys.to])||(rs.label<ys.label||rs.label===ys.label&&ls<=xs)&&is.push(ys)}return is},ns.prototype.getSupport=function(ts){var rs={};return ts.forEach(function(as){rs[as.graphId]||(rs[as.graphId]=!0)}),Object.keys(rs).length},ns.prototype.findMinLabel=function(ts){var rs=void 0;return Object.keys(ts).forEach(function(as){var os=ts[as],is=os.nodeLabel1,us=os.edgeLabel,ls=os.nodeLabel2;if(!rs){rs={nodeLabel1:is,edgeLabel:us,nodeLabel2:ls};return}(is<rs.nodeLabel1||is===rs.nodeLabel1&&us<rs.edgeLabel||is===rs.nodeLabel1&&us===rs.edgeLabel&&ls<rs.nodeLabel2)&&(rs={nodeLabel1:is,edgeLabel:us,nodeLabel2:ls})}),rs},ns.prototype.isMin=function(){var ts=this,rs=this.dfsCode;if(this.verbose&&console.log("isMin checking",rs),rs.dfsEdgeList.length===1)return!0;var as=this.directed,os=rs.toGraph(_struct.VACANT_GRAPH_ID,as),is=os.nodeMap,us=new DFScode,ls={};os.nodes.forEach(function(gs){var ys=ts.findForwardRootEdges(os,gs);ys.forEach(function(xs){var ms=is[xs.to],Ss="".concat(gs.label,"-").concat(xs.label,"-").concat(ms.label);ls[Ss]||(ls[Ss]={projected:[],nodeLabel1:gs.label,edgeLabel:xs.label,nodeLabel2:ms.label});var Ms={graphId:os.id,edge:xs,preNode:null};ls[Ss].projected.push(Ms)})});var fs=this.findMinLabel(ls);if(fs){us.dfsEdgeList.push(new DFSedge(0,1,fs.nodeLabel1,fs.edgeLabel,fs.nodeLabel2));var hs=function gs(ys){for(var xs=us.buildRmpath(),ms=us.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,Ss=us.dfsEdgeList[xs[0]].toNode,Ms={},$s=!1,bs=0,Cs=as?-1:0,As=function(_l){if($s)return"break";ys.forEach(function(Js){var Vs=new History(Js),Zs=ts.findBackwardEdge(os,Vs.edges[xs[_l]],Vs.edges[xs[0]],Vs);Zs&&(Ms[Zs.label]||(Ms[Zs.label]={projected:[],edgeLabel:Zs.label}),Ms[Zs.label].projected.push({graphId:os.id,edge:Ms,preNode:Js}),bs=us.dfsEdgeList[xs[_l]].fromNode,$s=!0)})},Is=xs.length-1;Is>Cs;Is--){var ks=As(Is);if(ks==="break")break}if($s){var Ps=ts.findMinLabel(Ms);us.dfsEdgeList.push(new DFSedge(Ss,bs,_struct.VACANT_NODE_LABEL,Ps.edgeLabel,_struct.VACANT_NODE_LABEL));var Ds=us.dfsEdgeList.length-1;return ts.dfsCode.dfsEdgeList[Ds]!==us.dfsEdgeList[Ds]?!1:gs(Ms[Ps.edgeLabel].projected)}var Fs={};$s=!1;var Rs=0;ys.forEach(function(qs){var _l=new History(qs),Js=ts.findForwardPureEdges(os,_l.edges[xs[0]],ms,_l);Js.length>0&&($s=!0,Rs=Ss,Js.forEach(function(Vs){var Zs="".concat(Vs.label,"-").concat(is[Vs.to].label);Fs[Zs]||(Fs[Zs]={projected:[],edgeLabel:Vs.label,nodeLabel2:is[Vs.to].label}),Fs[Zs].projected.push({graphId:os.id,edge:Vs,preNode:qs})}))});for(var js=xs.length,zs=function(_l){if($s)return"break";var Js=xs[_l];ys.forEach(function(Vs){var Zs=new History(Vs),Sl=ts.findForwardRmpathEdges(os,Zs.edges[Js],ms,Zs);Sl.length>0&&($s=!0,Rs=us.dfsEdgeList[Js].fromNode,Sl.forEach(function(Il){var Nl="".concat(Il.label,"-").concat(is[Il.to].label);Fs[Nl]||(Fs[Nl]={projected:[],edgeLabel:Il.label,nodeLabel2:is[Il.to].label}),Fs[Nl].projected.push({graphId:os.id,edge:Il,preNode:Vs})}))})},Is=0;Is<js;Is++){var Us=zs(Is);if(Us==="break")break}if(!$s)return!0;var Ys=ts.findMinLabel(Fs);us.dfsEdgeList.push(new DFSedge(Rs,Ss+1,_struct.VACANT_NODE_LABEL,Ys.edgeLabel,Ys.nodeLabel2));var Ks=us.dfsEdgeList.length-1;return rs.dfsEdgeList[Ks]!==us.dfsEdgeList[Ks]?!1:gs(Fs["".concat(Ys.edgeLabel,"-").concat(Ys.nodeLabel2)].projected)},vs="".concat(fs.nodeLabel1,"-").concat(fs.edgeLabel,"-").concat(fs.nodeLabel2);return hs(ls[vs].projected)}},ns.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var ts=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,_util$1.clone)(ts))}},ns.prototype.subGraphMining=function(ts){var rs=this,as=this.getSupport(ts);if(!(as<this.minSupport)&&this.isMin()){this.report();var os=this.dfsCode.getNodeNum(),is=this.dfsCode.buildRmpath(),us=this.dfsCode.dfsEdgeList[is[0]].toNode,ls=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,fs={},hs={};ts.forEach(function(vs){for(var gs=rs.graphs[vs.graphId],ys=gs.nodeMap,xs=new History(vs),ms=is.length-1;ms>=0;ms--){var Ss=rs.findBackwardEdge(gs,xs.edges[is[ms]],xs.edges[is[0]],xs);if(Ss){var Ms="".concat(rs.dfsCode.dfsEdgeList[is[ms]].fromNode,"-").concat(Ss.label);hs[Ms]||(hs[Ms]={projected:[],toNodeId:rs.dfsCode.dfsEdgeList[is[ms]].fromNode,edgeLabel:Ss.label}),hs[Ms].projected.push({graphId:vs.graphId,edge:Ss,preNode:vs})}}if(!(os>=rs.maxNodeNum)){var $s=rs.findForwardPureEdges(gs,xs.edges[is[0]],ls,xs);$s.forEach(function(Cs){var As="".concat(us,"-").concat(Cs.label,"-").concat(ys[Cs.to].label);fs[As]||(fs[As]={projected:[],fromNodeId:us,edgeLabel:Cs.label,nodeLabel2:ys[Cs.to].label}),fs[As].projected.push({graphId:vs.graphId,edge:Cs,preNode:vs})});for(var bs=function(As){var Is=rs.findForwardRmpathEdges(gs,xs.edges[is[As]],ls,xs);Is.forEach(function(ks){var Ps="".concat(rs.dfsCode.dfsEdgeList[is[As]].fromNode,"-").concat(ks.label,"-").concat(ys[ks.to].label);fs[Ps]||(fs[Ps]={projected:[],fromNodeId:rs.dfsCode.dfsEdgeList[is[As]].fromNode,edgeLabel:ks.label,nodeLabel2:ys[ks.to].label}),fs[Ps].projected.push({graphId:vs.graphId,edge:ks,preNode:vs})})},ms=0;ms<is.length;ms++)bs(ms)}}),Object.keys(hs).forEach(function(vs){var gs=hs[vs],ys=gs.toNodeId,xs=gs.edgeLabel;rs.dfsCode.dfsEdgeList.push(new DFSedge(us,ys,"-1",xs,"-1")),rs.subGraphMining(hs[vs].projected),rs.dfsCode.dfsEdgeList.pop()}),Object.keys(fs).forEach(function(vs){var gs=fs[vs],ys=gs.fromNodeId,xs=gs.edgeLabel,ms=gs.nodeLabel2;rs.dfsCode.dfsEdgeList.push(new DFSedge(ys,us+1,_struct.VACANT_NODE_LABEL,xs,ms)),rs.subGraphMining(fs[vs].projected),rs.dfsCode.dfsEdgeList.pop()})}},ns.prototype.generate1EdgeFrequentSubGraphs=function(){var ts=this.graphs,rs=this.directed,as=this.minSupport,os=this.frequentSize1Subgraphs,is={},us={},ls={};return Object.keys(ts).forEach(function(fs){var hs=ts[fs],vs=hs.nodeMap;hs.nodes.forEach(function(gs,ys){var xs=gs.label,ms="".concat(fs,"-").concat(xs);if(!ls[ms]){var Ss=is[xs]||0;Ss++,is[xs]=Ss}ls[ms]={graphKey:fs,label:xs},gs.edges.forEach(function(Ms){var $s=xs,bs=vs[Ms.to].label;if(!rs&&$s>bs){var Cs=bs;bs=$s,$s=Cs}var As=Ms.label,Is="".concat($s,"-").concat(As,"-").concat(bs);if(!us[Is]){var ks=us[Is]||0;ks++,us[Is]=ks}})})}),Object.keys(is).forEach(function(fs){var hs=is[fs];if(!(hs<as)){var vs={nodes:[],edges:[]};vs.nodes.push({id:"0",label:fs}),os.push(vs)}}),os},ns.prototype.run=function(){var ts=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var rs=this.graphs;this.directed;var as={};Object.keys(rs).forEach(function(os){var is=rs[os],us=is.nodeMap;is.nodes.forEach(function(ls){var fs=ts.findForwardRootEdges(is,ls);fs.forEach(function(hs){var vs=us[hs.to],gs="".concat(ls.label,"-").concat(hs.label,"-").concat(vs.label);as[gs]||(as[gs]={projected:[],nodeLabel1:ls.label,edgeLabel:hs.label,nodeLabel2:vs.label});var ys={graphId:os,edge:hs,preNode:null};as[gs].projected.push(ys)})})}),Object.keys(as).forEach(function(os){var is=as[os],us=is.projected,ls=is.nodeLabel1,fs=is.edgeLabel,hs=is.nodeLabel2;ts.dfsCode.dfsEdgeList.push(new DFSedge(0,1,ls,fs,hs)),ts.subGraphMining(us),ts.dfsCode.dfsEdgeList.pop()})}},ns}(),formatGraphs=function(ts,rs,as,os){var is={};return Object.keys(ts).forEach(function(us,ls){var fs=ts[us],hs=new _struct.Graph(ls,!0,rs),vs={};fs.nodes.forEach(function(gs,ys){hs.addNode(ys,gs[as]),vs[gs.id]=ys}),fs.edges.forEach(function(gs,ys){var xs=vs[gs.source],ms=vs[gs.target];hs.addEdge(-1,xs,ms,gs[os])}),hs&&hs.getNodeNum()&&(is[hs.id]=hs)}),is},toGraphDatas=function(ts,rs,as){var os=[];return ts.forEach(function(is){var us={nodes:[],edges:[]};is.nodes.forEach(function(ls){var fs;us.nodes.push((fs={id:"".concat(ls.id)},fs[rs]=ls.label,fs))}),is.edges.forEach(function(ls){var fs;us.edges.push((fs={source:"".concat(ls.from),target:"".concat(ls.to)},fs[as]=ls.label,fs))}),os.push(us)}),os},DEFAULT_LABEL_NAME="cluster",gSpan=function(ts){var rs=ts.graphs,as=ts.directed,os=as===void 0?!1:as,is=ts.nodeLabelProp,us=is===void 0?DEFAULT_LABEL_NAME:is,ls=ts.edgeLabelProp,fs=ls===void 0?DEFAULT_LABEL_NAME:ls,hs=formatGraphs(rs,os,us,fs),vs=ts.minSupport,gs=ts.maxNodeNum,ys=ts.minNodeNum,xs=ts.verbose,ms=ts.top,Ss={graphs:hs,minSupport:vs,maxNodeNum:gs,minNodeNum:ys,top:ms,verbose:xs,directed:os},Ms=new GSpan(Ss);Ms.run();var $s=toGraphDatas(Ms.frequentSubgraphs,us,fs);return $s},_default$3=gSpan;gSpan$1.default=_default$3;Object.defineProperty(gaddi,"__esModule",{value:!0});gaddi.default=void 0;var _tslib=require$$0$5,_floydWarshall=_interopRequireDefault$2(floydWarshall$4),_gSpan=_interopRequireDefault$2(gSpan$1),_dijkstra=_interopRequireDefault$2(dijkstra$2),_util=util$3;function _interopRequireDefault$2(ns){return ns&&ns.__esModule?ns:{default:ns}}var findKNeighborUnits=function(ts,rs,as,os){as===void 0&&(as="cluster"),os===void 0&&(os=2);var is=[],us=ts.nodes;return rs.forEach(function(ls,fs){is.push(findKNeighborUnit(us,ls,fs,as,os))}),is},findKNeighborUnit=function(ts,rs,as,os,is){var us=[as],ls=[],fs={};return rs.forEach(function(hs,vs){if(hs<=is&&as!==vs){us.push(vs),ls.push(ts[vs]);var gs=ts[vs][os];fs[gs]?(fs[gs].count++,fs[gs].dists.push(hs)):fs[gs]={count:1,dists:[hs]}}}),Object.keys(fs).forEach(function(hs){fs[hs].dists=fs[hs].dists.sort(function(vs,gs){return vs-gs})}),{nodeIdx:as,nodeId:ts[as].id,nodeIdxs:us,neighbors:ls,neighborNum:us.length-1,nodeLabelCountMap:fs}},findNodePairsRandomly=function(ts,rs,as,os,is){var us=Math.ceil(as/rs),ls={},fs=0;return os.forEach(function(hs,vs){for(var gs=0,ys=0,xs=hs.nodeIdxs,ms=hs.neighborNum-1;gs<us;){for(var Ss=xs[1+Math.floor(Math.random()*ms)],Ms=0;(ls["".concat(vs,"-").concat(Ss)]||ls["".concat(Ss,"-").concat(vs)])&&(Ss=Math.floor(Math.random()*rs),Ms++,!(Ms>2*rs)););if(Ms<2*rs&&(ls["".concat(vs,"-").concat(Ss)]={start:vs,end:Ss,distance:is[vs][Ss]},gs++,fs++,fs>=as))return ls;if(ys++,ys>2*rs)break}if(gs<us){var $s=us-gs;us=(us+$s)/(rs-vs-1)}}),ls},getIntersectNeighborInducedGraph=function(ts,rs,as,os){var is=as.nodes;return os||(os={}),Object.keys(ts).forEach(function(us){var ls,fs;if(!(os&&os[us])){os[us]={nodes:[],edges:[]};var hs=ts[us],vs=(ls=rs[hs.start])===null||ls===void 0?void 0:ls.nodeIdxs,gs=(fs=rs[hs.end])===null||fs===void 0?void 0:fs.nodeIdxs;if(!(!vs||!gs)){var ys=new Set(gs),xs=vs.filter(function(bs){return ys.has(bs)});if(!(!xs||!xs.length)){for(var ms={},Ss=xs.length,Ms=0;Ms<Ss;Ms++){var $s=is[xs[Ms]];os[us].nodes.push($s),ms[$s.id]=!0}as.edges.forEach(function(bs){ms[bs.source]&&ms[bs.target]&&os[us].edges.push(bs)})}}}}),os},getMatchedCount=function(ts,rs,as,os){var is,us,ls={};ts.nodes.forEach(function(hs){ls[hs.id]=hs});var fs=0;return!(!((is=rs==null?void 0:rs.edges)===null||is===void 0)&&is.length)||((us=rs==null?void 0:rs.nodes)===null||us===void 0?void 0:us.length)<2?0:(ts.edges.forEach(function(hs){var vs=ls[hs.source][as],gs=ls[hs.target][as],ys=rs==null?void 0:rs.nodes[0][as],xs=rs==null?void 0:rs.nodes[1][as],ms=rs==null?void 0:rs.edges[0][os];hs[os]===ms&&(vs===ys&&gs===xs||vs===xs&&gs===ys)&&fs++}),fs)},findRepresentStructure=function(ts,rs,as){for(var os=1/0,is=0,us=function(hs){var vs=ts[hs],gs=Object.keys(vs).sort(function(bs,Cs){return vs[bs]-vs[Cs]}),ys=10,xs=[];gs.forEach(function(bs,Cs){xs[Cs%ys]||(xs[Cs%ys]={graphs:[],totalCount:0,aveCount:0}),xs[Cs%ys].graphs.push(bs),xs[Cs%ys].totalCount+=vs[bs]});var ms=0,Ss=[];xs.forEach(function(bs){var Cs=bs.totalCount/bs.graphs.length;bs.aveCount=Cs,Ss.push(Cs);var As=0,Is=bs.length;bs.graphs.forEach(function(ks,Ps){var Ds=vs[ks];bs.graphs.forEach(function(Fs,Rs){Ps!==Rs&&(As+=Math.abs(Ds-vs[Fs]))})}),As/=Is*(Is-1)/2,ms+=As}),ms/=xs.length;var Ms=0;Ss.forEach(function(bs,Cs){Ss.forEach(function(As,Is){Cs!==Is&&(Ms+=Math.abs(bs-As))}),Ms/=Ss.length*(Ss.length-1)/2});var $s=Ms-ms;os<$s&&(os=$s,is=hs)},ls=0;ls<rs;ls++)us(ls);return{structure:as[is],structureCountMap:ts[is]}},getNodeMaps=function(ts,rs){var as={},os={};return ts.forEach(function(is,us){as[is.id]={idx:us,node:is,degree:0,inDegree:0,outDegree:0};var ls=is[rs];os[ls]||(os[ls]=[]),os[ls].push(is)}),{nodeMap:as,nodeLabelMap:os}},getEdgeMaps=function(ts,rs,as){var os={},is={};return ts.forEach(function(us,ls){os["".concat(_util.uniqueId)]={idx:ls,edge:us};var fs=us[rs];is[fs]||(is[fs]=[]),is[fs].push(us);var hs=as[us.source];hs&&(hs.degree++,hs.outDegree++);var vs=as[us.target];vs&&(vs.degree++,vs.inDegree++)}),{edgeMap:os,edgeLabelMap:is}},getSpmMap=function(ts,rs,as){var os=rs.length,is={};return rs.forEach(function(us,ls){for(var fs=as?0:ls+1,hs=ts[ls].id,vs=fs;vs<os;vs++)if(ls!==vs){var gs=ts[vs].id,ys=us[vs];is["".concat(hs,"-").concat(gs)]=ys,as||(is["".concat(gs,"-").concat(hs)]=ys)}}),is},getNDSDist=function(ts,rs,as,os,is,us,ls,fs,hs,vs,gs){var ys,xs="".concat(rs.id,"-").concat(as.id);if(vs&&vs[xs])return vs[xs];var ms=gs?gs[xs]:void 0;if(!ms){var Ss=(ys={},ys[xs]={start:os[rs.id].idx,end:os[as.id].idx,distance:is},ys);gs=getIntersectNeighborInducedGraph(Ss,us,ts,gs),ms=gs[xs]}return getMatchedCount(ms,ls,fs,hs)},stashPatternNodeLabelDegreeMap=function(ts,rs,as,os){var is,us,ls,fs=(is=ts[rs])===null||is===void 0?void 0:is.degree,hs=(us=ts[rs])===null||us===void 0?void 0:us.inDegree,vs=(ls=ts[rs])===null||ls===void 0?void 0:ls.outDegree;return ts[rs]===void 0&&(fs=1/0,hs=1/0,vs=1/0,os[rs].forEach(function(gs){var ys=as[gs.id].degree;fs>ys&&(fs=ys);var xs=as[gs.id].inDegree;hs>xs&&(hs=xs);var ms=as[gs.id].outDegree;vs>ms&&(vs=ms)}),ts[rs]={degree:fs,inDegree:hs,outDegree:vs}),{minPatternNodeLabelDegree:fs,minPatternNodeLabelInDegree:hs,minPatternNodeLabelOutDegree:vs}},GADDI=function(ts,rs,as,os,is,us,ls){var fs;if(as===void 0&&(as=!1),us===void 0&&(us="cluster"),ls===void 0&&(ls="cluster"),!(!ts||!ts.nodes)){var hs=ts.nodes.length;if(hs){var vs=(0,_floydWarshall.default)(ts,as),gs=(0,_floydWarshall.default)(rs,as),ys=getSpmMap(ts.nodes,vs,as),xs=getSpmMap(rs.nodes,gs,as),ms=getNodeMaps(ts.nodes,us),Ss=ms.nodeMap,Ms=ms.nodeLabelMap,$s=getNodeMaps(rs.nodes,us),bs=$s.nodeMap,Cs=$s.nodeLabelMap;getEdgeMaps(ts.edges,ls,Ss);var As=getEdgeMaps(rs.edges,ls,bs).edgeLabelMap,Is=[];gs==null||gs.forEach(function(j0){Is=Is.concat(j0)}),is||(is=Math.max.apply(Math,(0,_tslib.__spreadArray)((0,_tslib.__spreadArray)([],Is,!1),[2],!1))),os||(os=is);var ks=findKNeighborUnits(ts,vs,us,os),Ps=findKNeighborUnits(rs,gs,us,os),Ds=Math.min(100,hs*(hs-1)/2),Fs=findNodePairsRandomly(os,hs,Ds,ks,vs),Rs=getIntersectNeighborInducedGraph(Fs,ks,ts),js=10,zs=1,Us=1,Ys=4,Ks={graphs:Rs,nodeLabelProp:us,edgeLabelProp:ls,minSupport:zs,minNodeNum:Us,maxNodeNum:Ys,directed:as},qs=(0,_gSpan.default)(Ks).slice(0,js),_l=qs.length,Js=[];qs.forEach(function(j0,Ul){Js[Ul]={},Object.keys(Rs).forEach(function(Xs){var d0=Rs[Xs],M0=getMatchedCount(d0,j0,us,ls);Js[Ul][Xs]=M0})});var Vs=findRepresentStructure(Js,_l,qs),Zs=Vs.structure,Sl=Vs.structureCountMap,Il=rs.nodes[0],Nl=[],Tl=(fs=rs.nodes[0])===null||fs===void 0?void 0:fs[us],_c=-1/0;rs.nodes.forEach(function(j0){var Ul=j0[us],Xs=Ms[Ul];(Xs==null?void 0:Xs.length)>_c&&(_c=Xs.length,Nl=Xs,Tl=Ul,Il=j0)});var l0={},g0={},R0={},V0={},U0={},tv={};Object.keys(Cs).forEach(function(j0,Ul){U0[j0]=[],as&&(tv[j0]=[]);var Xs=Cs[j0],d0={};Xs.forEach(function(B0){var G0=xs["".concat(Il.id,"-").concat(B0.id)];if(G0&&U0[j0].push(G0),d0["".concat(Il.id,"-").concat(B0.id)]={start:0,end:bs[B0.id].idx,distance:G0},as){var rv=xs["".concat(B0.id,"-").concat(Il.id)];rv&&tv[j0].push(rv)}}),U0[j0]=U0[j0].sort(function(B0,G0){return B0-G0}),as&&(tv[j0]=tv[j0].sort(function(B0,G0){return B0-G0})),g0=getIntersectNeighborInducedGraph(d0,Ps,rs,g0);var M0=[];if(Object.keys(d0).forEach(function(B0){if(R0[B0]){M0.push(R0[B0]);return}var G0=g0[B0];R0[B0]=getMatchedCount(G0,Zs,us,ls),M0.push(R0[B0])}),M0=M0.sort(function(B0,G0){return G0-B0}),V0["".concat(Il.id,"-").concat(j0)]=M0,j0!==Tl)for(var i0=(Nl==null?void 0:Nl.length)||0,k0=function(G0){var rv=Nl[G0],xv=ks[Ss[rv.id].idx],qv=xv.nodeLabelCountMap[j0],Ev=Cs[j0].length;if(!qv||qv.count<Ev)return Nl.splice(G0,1),"continue";for(var Kv=!1,Xv=0;Xv<Ev;Xv++)if(qv.dists[Xv]>U0[j0][Xv]){Kv=!0;break}if(Kv)return Nl.splice(G0,1),"continue";var ap={};xv.neighbors.forEach(function(zv){var yp=ys["".concat(rv.id,"-").concat(zv.id)];ap["".concat(rv.id,"-").concat(zv.id)]={start:Ss[rv.id].idx,end:Ss[zv.id].idx,distance:yp}}),Rs=getIntersectNeighborInducedGraph(ap,ks,ts,Rs);var tp=[];Object.keys(ap).forEach(function(zv){if(Sl[zv]){tp.push(Sl[zv]);return}var yp=Rs[zv];Sl[zv]=getMatchedCount(yp,Zs,us,ls),tp.push(Sl[zv])}),tp=tp.sort(function(zv,yp){return yp-zv});for(var Lp=!1,Xv=0;Xv<Ev;Xv++)if(tp[Xv]<M0[Xv]){Lp=!0;break}if(Lp)return Nl.splice(G0,1),"continue"},P0=i0-1;P0>=0;P0--)k0(P0)});var Os=[];Nl==null||Nl.forEach(function(j0){for(var Ul=Ss[j0.id].idx,Xs=findKNeighborUnit(ts.nodes,vs[Ul],Ul,us,is),d0=Xs.neighbors,M0=d0.length,i0=!1,k0=M0-1;k0>=0;k0--){if(d0.length+1<rs.nodes.length){i0=!0;return}var P0=d0[k0],B0=P0[us];if(!Cs[B0]||!Cs[B0].length){d0.splice(k0,1);continue}if(!U0[B0]||!U0[B0].length){d0.splice(k0,1);continue}var G0="".concat(j0.id,"-").concat(P0.id),rv=ys[G0],xv=U0[B0].length-1,qv=U0[B0][xv];if(rv>qv){d0.splice(k0,1);continue}if(as){var Ev="".concat(P0.id,"-").concat(j0.id),Kv=ys[Ev];xv=tv[B0].length-1;var Xv=tv[B0][xv];if(Kv>Xv){d0.splice(k0,1);continue}}var ap=Sl[G0]?Sl[G0]:getNDSDist(ts,j0,P0,Ss,rv,ks,Zs,us,ls,Sl,Rs),tp="".concat(Il.id,"-").concat(B0),Lp=V0[tp][V0[tp].length-1];if(ap<Lp){d0.splice(k0,1);continue}var zv=stashPatternNodeLabelDegreeMap(l0,B0,bs,Cs),yp=zv.minPatternNodeLabelDegree;if(zv.minPatternNodeLabelInDegree,zv.minPatternNodeLabelOutDegree,Ss[P0.id].degree<yp){d0.splice(k0,1);continue}}i0||Os.push({nodes:[j0].concat(d0)})});var ov=(0,_dijkstra.default)(rs,Il.id,!1).length,$v={};as?(Object.keys(ov).forEach(function(j0){var Ul=bs[j0].node[us];$v[Ul]?$v[Ul].push(ov[j0]):$v[Ul]=[ov[j0]]}),Object.keys($v).forEach(function(j0){$v[j0].sort(function(Ul,Xs){return Ul-Xs})})):$v=U0;for(var Lv=Os.length,Jv=function(Ul){var Xs=Os[Ul],d0=Xs.nodes[0],M0={},i0={};Xs.nodes.forEach(function(lv,rp){i0[lv.id]={idx:rp,node:lv,degree:0,inDegree:0,outDegree:0};var nv=lv[us];M0[nv]?M0[nv]++:M0[nv]=1});var k0=[],P0={};ts.edges.forEach(function(lv){i0[lv.source]&&i0[lv.target]&&(k0.push(lv),P0[lv[ls]]?P0[lv[ls]]++:P0[lv[ls]]=1,i0[lv.source].degree++,i0[lv.target].degree++,i0[lv.source].outDegree++,i0[lv.target].inDegree++)});for(var B0=Object.keys(As).length,G0=!1,rv=0;rv<B0;rv++){var xv=Object.keys(As)[rv];if(!P0[xv]||P0[xv]<As[xv].length){G0=!0;break}}if(G0)return Os.splice(Ul,1),"continue";var qv=k0.length;if(qv<rs.edges.length)return Os.splice(Ul,1),"break";for(var Ev=!1,Kv=function(rp){var nv=k0[rp],fp=nv[ls],Tp=As[fp];if(!Tp||!Tp.length)return P0[fp]--,Tp&&P0[fp]<Tp.length?(Ev=!0,"break"):(k0.splice(rp,1),i0[nv.source].degree--,i0[nv.target].degree--,i0[nv.source].outDegree--,i0[nv.target].inDegree--,"continue");var r2=i0[nv.source].node[us],v1=i0[nv.target].node[us],p1=!1;if(Tp.forEach(function(j1){var n2=bs[j1.source].node,yv=bs[j1.target].node;n2[us]===r2&&yv[us]===v1&&(p1=!0),!as&&n2[us]===v1&&yv[us]===r2&&(p1=!0)}),!p1)return P0[fp]--,Tp&&P0[fp]<Tp.length?(Ev=!0,"break"):(k0.splice(rp,1),i0[nv.source].degree--,i0[nv.target].degree--,i0[nv.source].outDegree--,i0[nv.target].inDegree--,"continue")},rv=qv-1;rv>=0;rv--){var Xv=Kv(rv);if(Xv==="break")break}if(Ev)return Os.splice(Ul,1),"continue";Xs.edges=k0;var ap=(0,_dijkstra.default)(Xs,Xs.nodes[0].id,!1).length;if(Object.keys(ap).reverse().forEach(function(lv){if(!(lv===Xs.nodes[0].id||Ev)){if(ap[lv]===1/0){var rp=i0[lv].node[us];if(M0[rp]--,M0[rp]<Cs[rp].length){Ev=!0;return}var nv=Xs.nodes.indexOf(i0[lv].node);Xs.nodes.splice(nv,1),i0[lv]=void 0;return}var fp=Ss[lv].node[us];if(!$v[fp]||!$v[fp].length||ap[lv]>$v[fp][$v[fp].length-1]){var rp=i0[lv].node[us];if(M0[rp]--,M0[rp]<Cs[rp].length){Ev=!0;return}var nv=Xs.nodes.indexOf(i0[lv].node);Xs.nodes.splice(nv,1),i0[lv]=void 0}}}),Ev)return Os.splice(Ul,1),"continue";for(var tp=!0,Lp=0;tp&&!Ev;){tp=!1;var zv=as?i0[d0.id].degree<bs[Il.id].degree||i0[d0.id].inDegree<bs[Il.id].inDegree||i0[d0.id].outDegree<bs[Il.id].outDegree:i0[d0.id].degree<bs[Il.id].degree;if(zv){Ev=!0;break}if(M0[d0[us]]<Cs[d0[us]].length){Ev=!0;break}for(var yp=Xs.nodes.length,c1=yp-1;c1>=0;c1--){var $p=Xs.nodes[c1],d1=i0[$p.id].degree,A2=i0[$p.id].inDegree,I2=i0[$p.id].outDegree,Cp=$p[us],A1=stashPatternNodeLabelDegreeMap(l0,Cp,bs,Cs),g2=A1.minPatternNodeLabelDegree,om=A1.minPatternNodeLabelInDegree,k2=A1.minPatternNodeLabelOutDegree,sm=as?d1<g2||A2<om||I2<k2:d1<g2;if(sm){if(M0[$p[us]]--,M0[$p[us]]<Cs[$p[us]].length){Ev=!0;break}Xs.nodes.splice(c1,1),i0[$p.id]=void 0,tp=!0}}if(Ev||!tp&&Lp!==0)break;qv=k0.length;for(var s1=qv-1;s1>=0;s1--){var Z0=k0[s1];if(!i0[Z0.source]||!i0[Z0.target]){k0.splice(s1,1);var h1=Z0[ls];if(P0[h1]--,i0[Z0.source]&&(i0[Z0.source].degree--,i0[Z0.source].outDegree--),i0[Z0.target]&&(i0[Z0.target].degree--,i0[Z0.target].inDegree--),As[h1]&&P0[h1]<As[h1].length){Ev=!0;break}tp=!0}}Lp++}if(Ev||Ev||Xs.nodes.length<rs.nodes.length||k0.length<rs.edges.length)return Os.splice(Ul,1),"continue"},Yv=Lv-1;Yv>=0;Yv--){var Pv=Jv(Yv);if(Pv==="break")break}for(var jv=Os.length,wp=function(Ul){var Xs=Os[Ul],d0={};Xs.edges.forEach(function(k0){var P0="".concat(k0.source,"-").concat(k0.target,"-").concat(k0.label);d0[P0]?d0[P0]++:d0[P0]=1});for(var M0=function(P0){var B0=Os[P0],G0={};B0.edges.forEach(function(xv){var qv="".concat(xv.source,"-").concat(xv.target,"-").concat(xv.label);G0[qv]?G0[qv]++:G0[qv]=1});var rv=!0;Object.keys(G0).length!==Object.keys(d0).length?rv=!1:Object.keys(d0).forEach(function(xv){G0[xv]!==d0[xv]&&(rv=!1)}),rv&&Os.splice(P0,1)},i0=jv-1;i0>Ul;i0--)M0(i0);jv=Os.length},Yv=0;Yv<=jv-1;Yv++)wp(Yv);return Os}}},_default$2=GADDI;gaddi.default=_default$2;(function(ns){function ts(As){"@babel/helpers - typeof";return ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Is){return typeof Is}:function(Is){return Is&&typeof Symbol=="function"&&Is.constructor===Symbol&&Is!==Symbol.prototype?"symbol":typeof Is},ts(As)}Object.defineProperty(ns,"__esModule",{value:!0}),Object.defineProperty(ns,"GADDI",{enumerable:!0,get:function(){return Ss.default}}),Object.defineProperty(ns,"breadthFirstSearch",{enumerable:!0,get:function(){return as.default}}),Object.defineProperty(ns,"connectedComponent",{enumerable:!0,get:function(){return os.default}}),Object.defineProperty(ns,"depthFirstSearch",{enumerable:!0,get:function(){return ls.default}}),Object.defineProperty(ns,"detectCycle",{enumerable:!0,get:function(){return us.default}}),Object.defineProperty(ns,"dijkstra",{enumerable:!0,get:function(){return fs.default}}),Object.defineProperty(ns,"findAllPath",{enumerable:!0,get:function(){return hs.findAllPath}}),Object.defineProperty(ns,"findShortestPath",{enumerable:!0,get:function(){return hs.findShortestPath}}),Object.defineProperty(ns,"floydWarshall",{enumerable:!0,get:function(){return vs.default}}),Object.defineProperty(ns,"getAdjMatrix",{enumerable:!0,get:function(){return rs.default}}),Object.defineProperty(ns,"getDegree",{enumerable:!0,get:function(){return is.default}}),Object.defineProperty(ns,"getInDegree",{enumerable:!0,get:function(){return is.getInDegree}}),Object.defineProperty(ns,"getNeighbors",{enumerable:!0,get:function(){return Ms.getNeighbors}}),Object.defineProperty(ns,"getOutDegree",{enumerable:!0,get:function(){return is.getOutDegree}}),Object.defineProperty(ns,"labelPropagation",{enumerable:!0,get:function(){return gs.default}}),Object.defineProperty(ns,"louvain",{enumerable:!0,get:function(){return ys.default}}),Object.defineProperty(ns,"minimumSpanningTree",{enumerable:!0,get:function(){return xs.default}}),Object.defineProperty(ns,"pageRank",{enumerable:!0,get:function(){return ms.default}});var rs=Cs(adjacentMatrix),as=Cs(bfs),os=Cs(connectedComponent),is=bs(degree$2),us=Cs(detectCycle),ls=Cs(dfs$2),fs=Cs(dijkstra$2),hs=findPath$1,vs=Cs(floydWarshall$4),gs=Cs(labelPropagation$1),ys=Cs(louvain$1),xs=Cs(mts),ms=Cs(pageRank$1),Ss=Cs(gaddi),Ms=util$3;function $s(As){if(typeof WeakMap!="function")return null;var Is=new WeakMap,ks=new WeakMap;return($s=function(Ds){return Ds?ks:Is})(As)}function bs(As,Is){if(!Is&&As&&As.__esModule)return As;if(As===null||ts(As)!=="object"&&typeof As!="function")return{default:As};var ks=$s(Is);if(ks&&ks.has(As))return ks.get(As);var Ps={},Ds=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Fs in As)if(Fs!=="default"&&Object.prototype.hasOwnProperty.call(As,Fs)){var Rs=Ds?Object.getOwnPropertyDescriptor(As,Fs):null;Rs&&(Rs.get||Rs.set)?Object.defineProperty(Ps,Fs,Rs):Ps[Fs]=As[Fs]}return Ps.default=As,ks&&ks.set(As,Ps),Ps}function Cs(As){return As&&As.__esModule?As:{default:As}}})(algorithm$1);function _typeof$a(ns){"@babel/helpers - typeof";return _typeof$a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ts){return typeof ts}:function(ts){return ts&&typeof Symbol=="function"&&ts.constructor===Symbol&&ts!==Symbol.prototype?"symbol":typeof ts},_typeof$a(ns)}Object.defineProperty(index_worker,"__esModule",{value:!0});index_worker.default=void 0;var algorithm=_interopRequireWildcard(algorithm$1),_constant$2=constant$1;function _getRequireWildcardCache(ns){if(typeof WeakMap!="function")return null;var ts=new WeakMap,rs=new WeakMap;return(_getRequireWildcardCache=function(os){return os?rs:ts})(ns)}function _interopRequireWildcard(ns,ts){if(!ts&&ns&&ns.__esModule)return ns;if(ns===null||_typeof$a(ns)!=="object"&&typeof ns!="function")return{default:ns};var rs=_getRequireWildcardCache(ts);if(rs&&rs.has(ns))return rs.get(ns);var as={},os=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var is in ns)if(is!=="default"&&Object.prototype.hasOwnProperty.call(ns,is)){var us=os?Object.getOwnPropertyDescriptor(ns,is):null;us&&(us.get||us.set)?Object.defineProperty(as,is,us):as[is]=ns[is]}return as.default=ns,rs&&rs.set(ns,as),as}var ctx=typeof self<"u"?self:{};ctx.onmessage=function(ns){var ts=ns.data,rs=ts._algorithmType,as=ts.data;if(rs){if(typeof algorithm[rs]=="function"){var os=algorithm[rs].apply(algorithm,as);ctx.postMessage({_algorithmType:_constant$2.MESSAGE.SUCCESS,data:os});return}ctx.postMessage({_algorithmType:_constant$2.MESSAGE.FAILURE})}};var _default$1=null;index_worker.default=_default$1;Object.defineProperty(createWorker$1,"__esModule",{value:!0});createWorker$1.default=void 0;var _constant$1=constant$1,_index=_interopRequireDefault$1(index_worker);function _interopRequireDefault$1(ns){return ns&&ns.__esModule?ns:{default:ns}}var createWorker=function(ts){return function(){for(var rs=[],as=0;as<arguments.length;as++)rs[as]=arguments[as];return new Promise(function(os,is){var us=new _index.default;us.postMessage({_algorithmType:ts,data:rs}),us.onmessage=function(ls){var fs=ls.data,hs=fs.data,vs=fs._algorithmType;_constant$1.MESSAGE.SUCCESS===vs?os(hs):is(),us.terminate()}})}},_default=createWorker;createWorker$1.default=_default;Object.defineProperty(workers,"__esModule",{value:!0});workers.pageRankAsync=workers.minimumSpanningTreeAsync=workers.louvainAsync=workers.labelPropagationAsync=workers.getOutDegreeAsync=workers.getNeighborsAsync=workers.getInDegreeAsync=workers.getDegreeAsync=workers.getAdjMatrixAsync=workers.floydWarshallAsync=workers.findShortestPathAsync=workers.findAllPathAsync=workers.dijkstraAsync=workers.detectCycleAsync=workers.detectAllUndirectedCycleAsync=workers.detectAllDirectedCycleAsync=workers.detectAllCyclesAsync=workers.connectedComponentAsync=workers.GADDIAsync=void 0;var _createWorker=_interopRequireDefault(createWorker$1),_constant=constant$1;function _interopRequireDefault(ns){return ns&&ns.__esModule?ns:{default:ns}}var getAdjMatrixAsync=function(ts,rs){return(0,_createWorker.default)(_constant.ALGORITHM.getAdjMatrix).apply(void 0,[ts,rs])};workers.getAdjMatrixAsync=getAdjMatrixAsync;var connectedComponentAsync=function(ts,rs){return(0,_createWorker.default)(_constant.ALGORITHM.connectedComponent).apply(void 0,[ts,rs])};workers.connectedComponentAsync=connectedComponentAsync;var getDegreeAsync=function(ts){return(0,_createWorker.default)(_constant.ALGORITHM.getDegree)(ts)};workers.getDegreeAsync=getDegreeAsync;var getInDegreeAsync=function(ts,rs){return(0,_createWorker.default)(_constant.ALGORITHM.getInDegree)(ts,rs)};workers.getInDegreeAsync=getInDegreeAsync;var getOutDegreeAsync=function(ts,rs){return(0,_createWorker.default)(_constant.ALGORITHM.getOutDegree)(ts,rs)};workers.getOutDegreeAsync=getOutDegreeAsync;var detectCycleAsync=function(ts){return(0,_createWorker.default)(_constant.ALGORITHM.detectCycle)(ts)};workers.detectCycleAsync=detectCycleAsync;var detectAllCyclesAsync=function(ts){return(0,_createWorker.default)(_constant.ALGORITHM.detectAllCycles)(ts)};workers.detectAllCyclesAsync=detectAllCyclesAsync;var detectAllDirectedCycleAsync=function(ts){return(0,_createWorker.default)(_constant.ALGORITHM.detectAllDirectedCycle)(ts)};workers.detectAllDirectedCycleAsync=detectAllDirectedCycleAsync;var detectAllUndirectedCycleAsync=function(ts){return(0,_createWorker.default)(_constant.ALGORITHM.detectAllUndirectedCycle)(ts)};workers.detectAllUndirectedCycleAsync=detectAllUndirectedCycleAsync;var dijkstraAsync=function(ts,rs,as,os){return(0,_createWorker.default)(_constant.ALGORITHM.dijkstra).apply(void 0,[ts,rs,as,os])};workers.dijkstraAsync=dijkstraAsync;var findAllPathAsync=function(ts,rs,as,os){return(0,_createWorker.default)(_constant.ALGORITHM.findAllPath).apply(void 0,[ts,rs,as,os])};workers.findAllPathAsync=findAllPathAsync;var findShortestPathAsync=function(ts,rs,as,os,is){return(0,_createWorker.default)(_constant.ALGORITHM.findShortestPath).apply(void 0,[ts,rs,as,os,is])};workers.findShortestPathAsync=findShortestPathAsync;var floydWarshallAsync=function(ts,rs){return(0,_createWorker.default)(_constant.ALGORITHM.floydWarshall).apply(void 0,[ts,rs])};workers.floydWarshallAsync=floydWarshallAsync;var labelPropagationAsync=function(ts,rs,as,os){return os===void 0&&(os=1e3),(0,_createWorker.default)(_constant.ALGORITHM.labelPropagation)(ts,rs,as,os)};workers.labelPropagationAsync=labelPropagationAsync;var louvainAsync=function(ts,rs,as,os){return(0,_createWorker.default)(_constant.ALGORITHM.louvain)(ts,rs,as,os)};workers.louvainAsync=louvainAsync;var minimumSpanningTreeAsync=function(ts,rs,as){return(0,_createWorker.default)(_constant.ALGORITHM.minimumSpanningTree).apply(void 0,[ts,rs,as])};workers.minimumSpanningTreeAsync=minimumSpanningTreeAsync;var pageRankAsync=function(ts,rs,as){return(0,_createWorker.default)(_constant.ALGORITHM.pageRank).apply(void 0,[ts,rs,as])};workers.pageRankAsync=pageRankAsync;var getNeighborsAsync=function(ts,rs,as){return(0,_createWorker.default)(_constant.ALGORITHM.getNeighbors).apply(void 0,[ts,rs,as])};workers.getNeighborsAsync=getNeighborsAsync;var GADDIAsync=function(ts,rs,as,os,is,us,ls){return as===void 0&&(as=!1),us===void 0&&(us="cluster"),ls===void 0&&(ls="cluster"),(0,_createWorker.default)(_constant.ALGORITHM.GADDI).apply(void 0,[ts,rs,as,os,is,us,ls])};workers.GADDIAsync=GADDIAsync;(function(ns){Object.defineProperty(ns,"__esModule",{value:!0}),Object.defineProperty(ns,"GADDIAsync",{enumerable:!0,get:function(){return ts.GADDIAsync}}),Object.defineProperty(ns,"connectedComponentAsync",{enumerable:!0,get:function(){return ts.connectedComponentAsync}}),ns.default=void 0,Object.defineProperty(ns,"detectAllCyclesAsync",{enumerable:!0,get:function(){return ts.detectAllCyclesAsync}}),Object.defineProperty(ns,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return ts.detectAllDirectedCycleAsync}}),Object.defineProperty(ns,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return ts.detectAllUndirectedCycleAsync}}),Object.defineProperty(ns,"detectCycleAsync",{enumerable:!0,get:function(){return ts.detectCycleAsync}}),ns.detectDirectedCycleAsync=void 0,Object.defineProperty(ns,"dijkstraAsync",{enumerable:!0,get:function(){return ts.dijkstraAsync}}),Object.defineProperty(ns,"findAllPathAsync",{enumerable:!0,get:function(){return ts.findAllPathAsync}}),Object.defineProperty(ns,"findShortestPathAsync",{enumerable:!0,get:function(){return ts.findShortestPathAsync}}),Object.defineProperty(ns,"floydWarshallAsync",{enumerable:!0,get:function(){return ts.floydWarshallAsync}}),Object.defineProperty(ns,"getAdjMatrixAsync",{enumerable:!0,get:function(){return ts.getAdjMatrixAsync}}),Object.defineProperty(ns,"getDegreeAsync",{enumerable:!0,get:function(){return ts.getDegreeAsync}}),Object.defineProperty(ns,"getInDegreeAsync",{enumerable:!0,get:function(){return ts.getInDegreeAsync}}),Object.defineProperty(ns,"getNeighborsAsync",{enumerable:!0,get:function(){return ts.getNeighborsAsync}}),Object.defineProperty(ns,"getOutDegreeAsync",{enumerable:!0,get:function(){return ts.getOutDegreeAsync}}),Object.defineProperty(ns,"labelPropagationAsync",{enumerable:!0,get:function(){return ts.labelPropagationAsync}}),Object.defineProperty(ns,"louvainAsync",{enumerable:!0,get:function(){return ts.louvainAsync}}),Object.defineProperty(ns,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return ts.minimumSpanningTreeAsync}}),Object.defineProperty(ns,"pageRankAsync",{enumerable:!0,get:function(){return ts.pageRankAsync}});var ts=workers,rs=ts.detectCycleAsync;ns.detectDirectedCycleAsync=rs;var as={getAdjMatrixAsync:ts.getAdjMatrixAsync,connectedComponentAsync:ts.connectedComponentAsync,getDegreeAsync:ts.getDegreeAsync,getInDegreeAsync:ts.getInDegreeAsync,getOutDegreeAsync:ts.getOutDegreeAsync,detectCycleAsync:ts.detectCycleAsync,detectDirectedCycleAsync:rs,detectAllCyclesAsync:ts.detectAllCyclesAsync,detectAllDirectedCycleAsync:ts.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:ts.detectAllUndirectedCycleAsync,dijkstraAsync:ts.dijkstraAsync,findAllPathAsync:ts.findAllPathAsync,findShortestPathAsync:ts.findShortestPathAsync,floydWarshallAsync:ts.floydWarshallAsync,labelPropagationAsync:ts.labelPropagationAsync,louvainAsync:ts.louvainAsync,minimumSpanningTreeAsync:ts.minimumSpanningTreeAsync,pageRankAsync:ts.pageRankAsync,getNeighborsAsync:ts.getNeighborsAsync,GADDIAsync:ts.GADDIAsync};ns.default=as})(asyncIndex$1);const asyncIndex=getDefaultExportFromCjs(asyncIndex$1),AlgorithmAsync=_mergeNamespaces({__proto__:null,default:asyncIndex},[asyncIndex$1]);function getPixelRatio(){return window?window.devicePixelRatio:1}function distance$3(ns,ts,rs,as){var os=ns-rs,is=ts-as;return Math.sqrt(os*os+is*is)}function inBox(ns,ts,rs,as,os,is){return os>=ns&&os<=ns+rs&&is>=ts&&is<=ts+as}function intersectRect(ns,ts){return!(ts.minX>ns.maxX||ts.maxX<ns.minX||ts.minY>ns.maxY||ts.maxY<ns.minY)}function mergeRegion(ns,ts){return!ns||!ts?ns||ts:{minX:Math.min(ns.minX,ts.minX),minY:Math.min(ns.minY,ts.minY),maxX:Math.max(ns.maxX,ts.maxX),maxY:Math.max(ns.maxY,ts.maxY)}}function isSamePoint(ns,ts){return ns[0]===ts[0]&&ns[1]===ts[1]}var regexLG$2=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,regexRG$2=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,regexPR$1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,regexColorStop$2=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function addStop$1(ns,ts){var rs=ns.match(regexColorStop$2);each$1(rs,function(as){var os=as.split(":");ts.addColorStop(os[0],os[1])})}function parseLineGradient$1(ns,ts,rs){var as=regexLG$2.exec(rs),os=parseFloat(as[1])%360*(Math.PI/180),is=as[2],us=ts.getBBox(),ls,fs;os>=0&&os<1/2*Math.PI?(ls={x:us.minX,y:us.minY},fs={x:us.maxX,y:us.maxY}):1/2*Math.PI<=os&&os<Math.PI?(ls={x:us.maxX,y:us.minY},fs={x:us.minX,y:us.maxY}):Math.PI<=os&&os<3/2*Math.PI?(ls={x:us.maxX,y:us.maxY},fs={x:us.minX,y:us.minY}):(ls={x:us.minX,y:us.maxY},fs={x:us.maxX,y:us.minY});var hs=Math.tan(os),vs=hs*hs,gs=(fs.x-ls.x+hs*(fs.y-ls.y))/(vs+1)+ls.x,ys=hs*(fs.x-ls.x+hs*(fs.y-ls.y))/(vs+1)+ls.y,xs=ns.createLinearGradient(ls.x,ls.y,gs,ys);return addStop$1(is,xs),xs}function parseRadialGradient$1(ns,ts,rs){var as=regexRG$2.exec(rs),os=parseFloat(as[1]),is=parseFloat(as[2]),us=parseFloat(as[3]),ls=as[4];if(us===0){var fs=ls.match(regexColorStop$2);return fs[fs.length-1].split(":")[1]}var hs=ts.getBBox(),vs=hs.maxX-hs.minX,gs=hs.maxY-hs.minY,ys=Math.sqrt(vs*vs+gs*gs)/2,xs=ns.createRadialGradient(hs.minX+vs*os,hs.minY+gs*is,0,hs.minX+vs/2,hs.minY+gs/2,us*ys);return addStop$1(ls,xs),xs}function parsePattern(ns,ts,rs){if(ts.get("patternSource")&&ts.get("patternSource")===rs)return ts.get("pattern");var as,os,is=regexPR$1.exec(rs),us=is[1],ls=is[2];function fs(){as=ns.createPattern(os,us),ts.set("pattern",as),ts.set("patternSource",rs)}switch(us){case"a":us="repeat";break;case"x":us="repeat-x";break;case"y":us="repeat-y";break;case"n":us="no-repeat";break;default:us="no-repeat"}return os=new Image,ls.match(/^data:/i)||(os.crossOrigin="Anonymous"),os.src=ls,os.complete?fs():(os.onload=fs,os.src=os.src),as}function parseStyle(ns,ts,rs){var as=ts.getBBox();if(isNaN(as.x)||isNaN(as.y)||isNaN(as.width)||isNaN(as.height))return rs;if(isString$2(rs)){if(rs[1]==="("||rs[2]==="("){if(rs[0]==="l")return parseLineGradient$1(ns,ts,rs);if(rs[0]==="r")return parseRadialGradient$1(ns,ts,rs);if(rs[0]==="p")return parsePattern(ns,ts,rs)}return rs}if(rs instanceof CanvasPattern)return rs}function parseRadius$2(ns){var ts=0,rs=0,as=0,os=0;return isArray$2(ns)?ns.length===1?ts=rs=as=os=ns[0]:ns.length===2?(ts=as=ns[0],rs=os=ns[1]):ns.length===3?(ts=ns[0],rs=os=ns[1],as=ns[2]):(ts=ns[0],rs=ns[1],as=ns[2],os=ns[3]):ts=rs=as=os=ns,[ts,rs,as,os]}function vMag(ns){return Math.sqrt(ns[0]*ns[0]+ns[1]*ns[1])}function vRatio(ns,ts){return vMag(ns)*vMag(ts)?(ns[0]*ts[0]+ns[1]*ts[1])/(vMag(ns)*vMag(ts)):1}function vAngle(ns,ts){return(ns[0]*ts[1]<ns[1]*ts[0]?-1:1)*Math.acos(vRatio(ns,ts))}function getArcParams(ns,ts){var rs=ts[1],as=ts[2],os=mod$3(toRadian$3(ts[3]),Math.PI*2),is=ts[4],us=ts[5],ls=ns[0],fs=ns[1],hs=ts[6],vs=ts[7],gs=Math.cos(os)*(ls-hs)/2+Math.sin(os)*(fs-vs)/2,ys=-1*Math.sin(os)*(ls-hs)/2+Math.cos(os)*(fs-vs)/2,xs=gs*gs/(rs*rs)+ys*ys/(as*as);xs>1&&(rs*=Math.sqrt(xs),as*=Math.sqrt(xs));var ms=rs*rs*(ys*ys)+as*as*(gs*gs),Ss=ms?Math.sqrt((rs*rs*(as*as)-ms)/ms):1;is===us&&(Ss*=-1),isNaN(Ss)&&(Ss=0);var Ms=as?Ss*rs*ys/as:0,$s=rs?Ss*-as*gs/rs:0,bs=(ls+hs)/2+Math.cos(os)*Ms-Math.sin(os)*$s,Cs=(fs+vs)/2+Math.sin(os)*Ms+Math.cos(os)*$s,As=[(gs-Ms)/rs,(ys-$s)/as],Is=[(-1*gs-Ms)/rs,(-1*ys-$s)/as],ks=vAngle([1,0],As),Ps=vAngle(As,Is);return vRatio(As,Is)<=-1&&(Ps=Math.PI),vRatio(As,Is)>=1&&(Ps=0),us===0&&Ps>0&&(Ps=Ps-2*Math.PI),us===1&&Ps<0&&(Ps=Ps+2*Math.PI),{cx:bs,cy:Cs,rx:isSamePoint(ns,[hs,vs])?0:rs,ry:isSamePoint(ns,[hs,vs])?0:as,startAngle:ks,endAngle:ks+Ps,xRotation:os,arcFlag:is,sweepFlag:us}}var sin$1=Math.sin,cos$1=Math.cos,atan2=Math.atan2,PI$1=Math.PI;function _addDefaultArrow(ns,ts,rs,as,os,is,us){var ls=ts.stroke,fs=ts.lineWidth,hs=rs-os,vs=as-is,gs=atan2(vs,hs),ys=new Path$1({type:"path",canvas:ns.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*cos$1(PI$1/6)+","+10*sin$1(PI$1/6)+" L0,0 L"+10*cos$1(PI$1/6)+",-"+10*sin$1(PI$1/6),stroke:ls,lineWidth:fs}});ys.translate(os,is),ys.rotateAtPoint(os,is,gs),ns.set(us?"startArrowShape":"endArrowShape",ys)}function _addCustomizedArrow(ns,ts,rs,as,os,is,us){var ls=ts.startArrow,fs=ts.endArrow,hs=ts.stroke,vs=ts.lineWidth,gs=us?ls:fs,ys=gs.d,xs=gs.fill,ms=gs.stroke,Ss=gs.lineWidth,Ms=__rest$2(gs,["d","fill","stroke","lineWidth"]),$s=rs-os,bs=as-is,Cs=atan2(bs,$s);ys&&(os=os-cos$1(Cs)*ys,is=is-sin$1(Cs)*ys);var As=new Path$1({type:"path",canvas:ns.get("canvas"),isArrowShape:!0,attrs:__assign$h(__assign$h({},Ms),{stroke:ms||hs,lineWidth:Ss||vs,fill:xs})});As.translate(os,is),As.rotateAtPoint(os,is,Cs),ns.set(us?"startArrowShape":"endArrowShape",As)}function getShortenOffset(ns,ts,rs,as,os){var is=atan2(as-ts,rs-ns);return{dx:cos$1(is)*os,dy:sin$1(is)*os}}function addStartArrow(ns,ts,rs,as,os,is){typeof ts.startArrow=="object"?_addCustomizedArrow(ns,ts,rs,as,os,is,!0):ts.startArrow?_addDefaultArrow(ns,ts,rs,as,os,is,!0):ns.set("startArrowShape",null)}function addEndArrow(ns,ts,rs,as,os,is){typeof ts.endArrow=="object"?_addCustomizedArrow(ns,ts,rs,as,os,is,!1):ts.endArrow?_addDefaultArrow(ns,ts,rs,as,os,is,!1):ns.set("startArrowShape",null)}var SHAPE_ATTRS_MAP={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function applyAttrsToContext(ns,ts){var rs=ts.attr();for(var as in rs){var os=rs[as],is=SHAPE_ATTRS_MAP[as]?SHAPE_ATTRS_MAP[as]:as;is==="matrix"&&os?ns.transform(os[0],os[1],os[3],os[4],os[6],os[7]):is==="lineDash"&&ns.setLineDash?isArray$2(os)&&ns.setLineDash(os):(is==="strokeStyle"||is==="fillStyle"?os=parseStyle(ns,ts,os):is==="globalAlpha"&&(os=os*ns.globalAlpha),ns[is]=os)}}function drawChildren$1(ns,ts,rs){for(var as=0;as<ts.length;as++){var os=ts[as];os.cfg.visible?os.draw(ns,rs):os.skipDraw()}}function checkRefresh(ns,ts,rs){var as=ns.get("refreshElements");each$1(as,function(os){if(os!==ns)for(var is=os.cfg.parent;is&&is!==ns&&!is.cfg.refresh;)is.cfg.refresh=!0,is=is.cfg.parent}),as[0]===ns?setChildrenRefresh(ts):checkChildrenRefresh(ts,rs)}function checkChildrenRefresh(ns,ts){for(var rs=0;rs<ns.length;rs++){var as=ns[rs];if(as.cfg.visible)if(as.cfg.hasChanged)as.cfg.refresh=!0,as.isGroup()&&setChildrenRefresh(as.cfg.children);else if(as.cfg.refresh)as.isGroup()&&checkChildrenRefresh(as.cfg.children,ts);else{var os=checkElementRefresh(as,ts);as.cfg.refresh=os,os&&as.isGroup()&&checkChildrenRefresh(as.cfg.children,ts)}}}function clearChanged(ns){for(var ts=0;ts<ns.length;ts++){var rs=ns[ts];rs.cfg.hasChanged=!1,rs.isGroup()&&!rs.destroyed&&clearChanged(rs.cfg.children)}}function setChildrenRefresh(ns,ts){for(var rs=0;rs<ns.length;rs++){var as=ns[rs];as.cfg.visible&&(as.cfg.refresh=!0,as.isGroup()&&setChildrenRefresh(as.get("children")))}}function checkElementRefresh(ns,ts){var rs=ns.cfg.cacheCanvasBBox,as=ns.cfg.isInView&&rs&&intersectRect(rs,ts);return as}function drawPath(ns,ts,rs,as){var os=rs.path,is=rs.startArrow,us=rs.endArrow;if(os){var ls=[0,0],fs=[0,0],hs={dx:0,dy:0};ts.beginPath();for(var vs=0;vs<os.length;vs++){var gs=os[vs],ys=gs[0];if(vs===0&&is&&is.d){var xs=ns.getStartTangent();hs=getShortenOffset(xs[0][0],xs[0][1],xs[1][0],xs[1][1],is.d)}else if(vs===os.length-2&&os[vs+1][0]==="Z"&&us&&us.d){var ms=os[vs+1];if(ms[0]==="Z"){var xs=ns.getEndTangent();hs=getShortenOffset(xs[0][0],xs[0][1],xs[1][0],xs[1][1],us.d)}}else if(vs===os.length-1&&us&&us.d&&os[0]!=="Z"){var xs=ns.getEndTangent();hs=getShortenOffset(xs[0][0],xs[0][1],xs[1][0],xs[1][1],us.d)}var Ss=hs.dx,Ms=hs.dy;switch(ys){case"M":ts.moveTo(gs[1]-Ss,gs[2]-Ms),fs=[gs[1],gs[2]];break;case"L":ts.lineTo(gs[1]-Ss,gs[2]-Ms);break;case"Q":ts.quadraticCurveTo(gs[1],gs[2],gs[3]-Ss,gs[4]-Ms);break;case"C":ts.bezierCurveTo(gs[1],gs[2],gs[3],gs[4],gs[5]-Ss,gs[6]-Ms);break;case"A":{var $s=void 0;as?($s=as[vs],$s||($s=getArcParams(ls,gs),as[vs]=$s)):$s=getArcParams(ls,gs);var bs=$s.cx,Cs=$s.cy,As=$s.rx,Is=$s.ry,ks=$s.startAngle,Ps=$s.endAngle,Ds=$s.xRotation,Fs=$s.sweepFlag;if(ts.ellipse)ts.ellipse(bs,Cs,As,Is,Ds,ks,Ps,1-Fs);else{var Rs=As>Is?As:Is,js=As>Is?1:As/Is,zs=As>Is?Is/As:1;ts.translate(bs,Cs),ts.rotate(Ds),ts.scale(js,zs),ts.arc(0,0,Rs,ks,Ps,1-Fs),ts.scale(1/js,1/zs),ts.rotate(-Ds),ts.translate(-bs,-Cs)}break}case"Z":ts.closePath();break}if(ys==="Z")ls=fs;else{var Us=gs.length;ls=[gs[Us-2],gs[Us-1]]}}}}function refreshElement$1(ns,ts){var rs=ns.get("canvas");rs&&(ts==="remove"&&(ns._cacheCanvasBBox=ns.get("cacheCanvasBBox")),ns.get("hasChanged")||(ns.set("hasChanged",!0),ns.cfg.parent&&ns.cfg.parent.get("hasChanged")||(rs.refreshElement(ns,ts,rs),rs.get("autoDraw")&&rs.draw())))}function getRefreshRegion(ns){var ts;if(ns.destroyed)ts=ns._cacheCanvasBBox;else{var rs=ns.get("cacheCanvasBBox"),as=rs&&!!(rs.width&&rs.height),os=ns.getCanvasBBox(),is=os&&!!(os.width&&os.height);as&&is?ts=mergeRegion(rs,os):as?ts=rs:is&&(ts=os)}return ts}function getMergedRegion(ns){if(!ns.length)return null;var ts=[],rs=[],as=[],os=[];return each$1(ns,function(is){var us=getRefreshRegion(is);us&&(ts.push(us.minX),rs.push(us.minY),as.push(us.maxX),os.push(us.maxY))}),{minX:min$5(ts),minY:min$5(rs),maxX:max$6(as),maxY:max$6(os)}}function mergeView(ns,ts){return!ns||!ts||!intersectRect(ns,ts)?null:{minX:Math.max(ns.minX,ts.minX),minY:Math.max(ns.minY,ts.minY),maxX:Math.min(ns.maxX,ts.maxX),maxY:Math.min(ns.maxY,ts.maxY)}}var Group$2=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.onCanvasChange=function(rs){refreshElement$1(this,rs)},ts.prototype.getShapeBase=function(){return Shape$2},ts.prototype.getGroupBase=function(){return ts},ts.prototype._applyClip=function(rs,as){as&&(rs.save(),applyAttrsToContext(rs,as),as.createPath(rs),rs.restore(),rs.clip(),as._afterDraw())},ts.prototype.cacheCanvasBBox=function(){var rs=this.cfg.children,as=[],os=[];each$1(rs,function(ys){var xs=ys.cfg.cacheCanvasBBox;xs&&ys.cfg.isInView&&(as.push(xs.minX,xs.maxX),os.push(xs.minY,xs.maxY))});var is=null;if(as.length){var us=min$5(as),ls=max$6(as),fs=min$5(os),hs=max$6(os);is={minX:us,minY:fs,x:us,y:fs,maxX:ls,maxY:hs,width:ls-us,height:hs-fs};var vs=this.cfg.canvas;if(vs){var gs=vs.getViewRange();this.set("isInView",intersectRect(is,gs))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",is)},ts.prototype.draw=function(rs,as){var os=this.cfg.children,is=as?this.cfg.refresh:!0;os.length&&is&&(rs.save(),applyAttrsToContext(rs,this),this._applyClip(rs,this.getClip()),drawChildren$1(rs,os,as),rs.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},ts.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},ts}(AbstractGroup),ShapeBase$1=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},ts.prototype.getShapeBase=function(){return Shape$2},ts.prototype.getGroupBase=function(){return Group$2},ts.prototype.onCanvasChange=function(rs){refreshElement$1(this,rs)},ts.prototype.calculateBBox=function(){var rs=this.get("type"),as=this.getHitLineWidth(),os=getMethod(rs),is=os(this),us=as/2,ls=is.x-us,fs=is.y-us,hs=is.x+is.width+us,vs=is.y+is.height+us;return{x:ls,minX:ls,y:fs,minY:fs,width:is.width+as,height:is.height+as,maxX:hs,maxY:vs}},ts.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},ts.prototype.isStroke=function(){return!!this.attrs.stroke},ts.prototype._applyClip=function(rs,as){as&&(rs.save(),applyAttrsToContext(rs,as),as.createPath(rs),rs.restore(),rs.clip(),as._afterDraw())},ts.prototype.draw=function(rs,as){var os=this.cfg.clipShape;if(as){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var is=this.getCanvasBBox();if(!intersectRect(as,is)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}rs.save(),applyAttrsToContext(rs,this),this._applyClip(rs,os),this.drawPath(rs),rs.restore(),this._afterDraw()},ts.prototype.getCanvasViewBox=function(){var rs=this.cfg.canvas;return rs?rs.getViewRange():null},ts.prototype.cacheCanvasBBox=function(){var rs=this.getCanvasViewBox();if(rs){var as=this.getCanvasBBox(),os=intersectRect(as,rs);this.set("isInView",os),os?this.set("cacheCanvasBBox",as):this.set("cacheCanvasBBox",null)}},ts.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},ts.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},ts.prototype.drawPath=function(rs){this.createPath(rs),this.strokeAndFill(rs),this.afterDrawPath(rs)},ts.prototype.fill=function(rs){rs.fill()},ts.prototype.stroke=function(rs){rs.stroke()},ts.prototype.strokeAndFill=function(rs){var as=this.attrs,os=as.lineWidth,is=as.opacity,us=as.strokeOpacity,ls=as.fillOpacity;this.isFill()&&(!isNil$2(ls)&&ls!==1?(rs.globalAlpha=ls,this.fill(rs),rs.globalAlpha=is):this.fill(rs)),this.isStroke()&&os>0&&(!isNil$2(us)&&us!==1&&(rs.globalAlpha=us),this.stroke(rs)),this.afterDrawPath(rs)},ts.prototype.createPath=function(rs){},ts.prototype.afterDrawPath=function(rs){},ts.prototype.isInShape=function(rs,as){var os=this.isStroke(),is=this.isFill(),us=this.getHitLineWidth();return this.isInStrokeOrPath(rs,as,os,is,us)},ts.prototype.isInStrokeOrPath=function(rs,as,os,is,us){return!1},ts.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var rs=this.attrs;return rs.lineWidth+rs.lineAppendWidth},ts}(AbstractShape),Circle$1=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{x:0,y:0,r:0})},ts.prototype.isInStrokeOrPath=function(rs,as,os,is,us){var ls=this.attr(),fs=ls.x,hs=ls.y,vs=ls.r,gs=us/2,ys=distance$3(fs,hs,rs,as);return is&&os?ys<=vs+gs:is?ys<=vs:os?ys>=vs-gs&&ys<=vs+gs:!1},ts.prototype.createPath=function(rs){var as=this.attr(),os=as.x,is=as.y,us=as.r;rs.beginPath(),rs.arc(os,is,us,0,Math.PI*2,!1),rs.closePath()},ts}(ShapeBase$1);function ellipseDistance(ns,ts,rs,as){return ns/(rs*rs)+ts/(as*as)}var Ellipse$1=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{x:0,y:0,rx:0,ry:0})},ts.prototype.isInStrokeOrPath=function(rs,as,os,is,us){var ls=this.attr(),fs=us/2,hs=ls.x,vs=ls.y,gs=ls.rx,ys=ls.ry,xs=(rs-hs)*(rs-hs),ms=(as-vs)*(as-vs);return is&&os?ellipseDistance(xs,ms,gs+fs,ys+fs)<=1:is?ellipseDistance(xs,ms,gs,ys)<=1:os?ellipseDistance(xs,ms,gs-fs,ys-fs)>=1&&ellipseDistance(xs,ms,gs+fs,ys+fs)<=1:!1},ts.prototype.createPath=function(rs){var as=this.attr(),os=as.x,is=as.y,us=as.rx,ls=as.ry;if(rs.beginPath(),rs.ellipse)rs.ellipse(os,is,us,ls,0,0,Math.PI*2,!1);else{var fs=us>ls?us:ls,hs=us>ls?1:us/ls,vs=us>ls?ls/us:1;rs.save(),rs.translate(os,is),rs.scale(hs,vs),rs.arc(0,0,fs,0,Math.PI*2),rs.restore(),rs.closePath()}},ts}(ShapeBase$1);function isCanvas(ns){return ns instanceof HTMLElement&&isString$2(ns.nodeName)&&ns.nodeName.toUpperCase()==="CANVAS"}var ImageShape=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{x:0,y:0,width:0,height:0})},ts.prototype.initAttrs=function(rs){this._setImage(rs.img)},ts.prototype.isStroke=function(){return!1},ts.prototype.isOnlyHitBox=function(){return!0},ts.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var rs=this.get("canvas");rs?rs.draw():this.createPath(this.get("context"))}},ts.prototype._setImage=function(rs){var as=this,os=this.attrs;if(isString$2(rs)){var is=new Image;is.onload=function(){if(as.destroyed)return!1;as.attr("img",is),as.set("loading",!1),as._afterLoading();var us=as.get("callback");us&&us.call(as)},is.crossOrigin="Anonymous",is.src=rs,this.set("loading",!0)}else rs instanceof Image?(os.width||(os.width=rs.width),os.height||(os.height=rs.height)):isCanvas(rs)&&(os.width||(os.width=Number(rs.getAttribute("width"))),os.height||(os.height,Number(rs.getAttribute("height"))))},ts.prototype.onAttrChange=function(rs,as,os){ns.prototype.onAttrChange.call(this,rs,as,os),rs==="img"&&this._setImage(as)},ts.prototype.createPath=function(rs){if(this.get("loading")){this.set("toDraw",!0),this.set("context",rs);return}var as=this.attr(),os=as.x,is=as.y,us=as.width,ls=as.height,fs=as.sx,hs=as.sy,vs=as.swidth,gs=as.sheight,ys=as.img;(ys instanceof Image||isCanvas(ys))&&(!isNil$2(fs)&&!isNil$2(hs)&&!isNil$2(vs)&&!isNil$2(gs)?rs.drawImage(ys,fs,hs,vs,gs,os,is,us,ls):rs.drawImage(ys,os,is,us,ls))},ts}(ShapeBase$1);function inLine(ns,ts,rs,as,os,is,us){var ls=Math.min(ns,rs),fs=Math.max(ns,rs),hs=Math.min(ts,as),vs=Math.max(ts,as),gs=os/2;return is>=ls-gs&&is<=fs+gs&&us>=hs-gs&&us<=vs+gs?LineUtil.pointToLine(ns,ts,rs,as,is,us)<=os/2:!1}var Line$2=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},ts.prototype.initAttrs=function(rs){this.setArrow()},ts.prototype.onAttrChange=function(rs,as,os){ns.prototype.onAttrChange.call(this,rs,as,os),this.setArrow()},ts.prototype.setArrow=function(){var rs=this.attr(),as=rs.x1,os=rs.y1,is=rs.x2,us=rs.y2,ls=rs.startArrow,fs=rs.endArrow;ls&&addStartArrow(this,rs,is,us,as,os),fs&&addEndArrow(this,rs,as,os,is,us)},ts.prototype.isInStrokeOrPath=function(rs,as,os,is,us){if(!os||!us)return!1;var ls=this.attr(),fs=ls.x1,hs=ls.y1,vs=ls.x2,gs=ls.y2;return inLine(fs,hs,vs,gs,us,rs,as)},ts.prototype.createPath=function(rs){var as=this.attr(),os=as.x1,is=as.y1,us=as.x2,ls=as.y2,fs=as.startArrow,hs=as.endArrow,vs={dx:0,dy:0},gs={dx:0,dy:0};fs&&fs.d&&(vs=getShortenOffset(os,is,us,ls,as.startArrow.d)),hs&&hs.d&&(gs=getShortenOffset(os,is,us,ls,as.endArrow.d)),rs.beginPath(),rs.moveTo(os+vs.dx,is+vs.dy),rs.lineTo(us-gs.dx,ls-gs.dy)},ts.prototype.afterDrawPath=function(rs){var as=this.get("startArrowShape"),os=this.get("endArrowShape");as&&as.draw(rs),os&&os.draw(rs)},ts.prototype.getTotalLength=function(){var rs=this.attr(),as=rs.x1,os=rs.y1,is=rs.x2,us=rs.y2;return LineUtil.length(as,os,is,us)},ts.prototype.getPoint=function(rs){var as=this.attr(),os=as.x1,is=as.y1,us=as.x2,ls=as.y2;return LineUtil.pointAt(os,is,us,ls,rs)},ts}(ShapeBase$1),Symbols$1={circle:function(ns,ts,rs){return[["M",ns-rs,ts],["A",rs,rs,0,1,0,ns+rs,ts],["A",rs,rs,0,1,0,ns-rs,ts]]},square:function(ns,ts,rs){return[["M",ns-rs,ts-rs],["L",ns+rs,ts-rs],["L",ns+rs,ts+rs],["L",ns-rs,ts+rs],["Z"]]},diamond:function(ns,ts,rs){return[["M",ns-rs,ts],["L",ns,ts-rs],["L",ns+rs,ts],["L",ns,ts+rs],["Z"]]},triangle:function(ns,ts,rs){var as=rs*Math.sin(.3333333333333333*Math.PI);return[["M",ns-rs,ts+as],["L",ns,ts-as],["L",ns+rs,ts+as],["Z"]]},"triangle-down":function(ns,ts,rs){var as=rs*Math.sin(.3333333333333333*Math.PI);return[["M",ns-rs,ts-as],["L",ns+rs,ts-as],["L",ns,ts+as],["Z"]]}},Marker$2=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.initAttrs=function(rs){this._resetParamsCache()},ts.prototype._resetParamsCache=function(){this.set("paramsCache",{})},ts.prototype.onAttrChange=function(rs,as,os){ns.prototype.onAttrChange.call(this,rs,as,os),["symbol","x","y","r","radius"].indexOf(rs)!==-1&&this._resetParamsCache()},ts.prototype.isOnlyHitBox=function(){return!0},ts.prototype._getR=function(rs){return isNil$2(rs.r)?rs.radius:rs.r},ts.prototype._getPath=function(){var rs=this.attr(),as=rs.x,os=rs.y,is=rs.symbol||"circle",us=this._getR(rs),ls,fs;if(isFunction$2(is))ls=is,fs=ls(as,os,us),fs=pathToAbsolute(fs);else{if(ls=ts.Symbols[is],!ls)return console.warn(is+" marker is not supported."),null;fs=ls(as,os,us)}return fs},ts.prototype.createPath=function(rs){var as=this._getPath(),os=this.get("paramsCache");drawPath(this,rs,{path:as},os)},ts.Symbols=Symbols$1,ts}(ShapeBase$1);function isPointInPath(ns,ts,rs){var as=getOffScreenContext();return ns.createPath(as),as.isPointInPath(ts,rs)}var tolerance$1=1e-6;function dcmp$1(ns){return Math.abs(ns)<tolerance$1?0:ns<0?-1:1}function onSegment$2(ns,ts,rs){return(rs[0]-ns[0])*(ts[1]-ns[1])===(ts[0]-ns[0])*(rs[1]-ns[1])&&Math.min(ns[0],ts[0])<=rs[0]&&rs[0]<=Math.max(ns[0],ts[0])&&Math.min(ns[1],ts[1])<=rs[1]&&rs[1]<=Math.max(ns[1],ts[1])}function isInPolygon(ns,ts,rs){var as=!1,os=ns.length;if(os<=2)return!1;for(var is=0;is<os;is++){var us=ns[is],ls=ns[(is+1)%os];if(onSegment$2(us,ls,[ts,rs]))return!0;dcmp$1(us[1]-rs)>0!=dcmp$1(ls[1]-rs)>0&&dcmp$1(ts-(rs-us[1])*(us[0]-ls[0])/(us[1]-ls[1])-us[0])<0&&(as=!as)}return as}function arc(ns,ts,rs,as,os,is,us,ls){var fs=(Math.atan2(ls-ts,us-ns)+Math.PI*2)%(Math.PI*2);if(fs<as||fs>os)return!1;var hs={x:ns+rs*Math.cos(fs),y:ts+rs*Math.sin(fs)};return distance$3(hs.x,hs.y,us,ls)<=is/2}var transform$b=transform$i;function hasArc(ns){for(var ts=!1,rs=ns.length,as=0;as<rs;as++){var os=ns[as],is=os[0];if(is==="C"||is==="A"||is==="Q"){ts=!0;break}}return ts}function isPointInStroke$1(ns,ts,rs,as,os){for(var is=!1,us=ts/2,ls=0;ls<ns.length;ls++){var fs=ns[ls],hs=fs.currentPoint,vs=fs.params,gs=fs.prePoint,ys=fs.box;if(!(ys&&!inBox(ys.x-us,ys.y-us,ys.width+ts,ys.height+ts,rs,as))){switch(fs.command){case"L":case"Z":is=inLine(gs[0],gs[1],hs[0],hs[1],ts,rs,as);break;case"Q":var xs=QuadUtil.pointDistance(gs[0],gs[1],vs[1],vs[2],vs[3],vs[4],rs,as);is=xs<=ts/2;break;case"C":var ms=CubicUtil.pointDistance(gs[0],gs[1],vs[1],vs[2],vs[3],vs[4],vs[5],vs[6],rs,as,os);is=ms<=ts/2;break;case"A":var Ss=fs.arcParams,Ms=Ss.cx,$s=Ss.cy,bs=Ss.rx,Cs=Ss.ry,As=Ss.startAngle,Is=Ss.endAngle,ks=Ss.xRotation,Ps=[rs,as,1],Ds=bs>Cs?bs:Cs,Fs=bs>Cs?1:bs/Cs,Rs=bs>Cs?Cs/bs:1,js=transform$b(null,[["t",-Ms,-$s],["r",-ks],["s",1/Fs,1/Rs]]);transformMat3$1(Ps,Ps,js),is=arc(0,0,Ds,As,Is,ts,Ps[0],Ps[1]);break}if(is)break}}return is}function extractPolygons(ns){for(var ts=ns.length,rs=[],as=[],os=[],is=0;is<ts;is++){var us=ns[is],ls=us[0];ls==="M"?(os.length&&(as.push(os),os=[]),os.push([us[1],us[2]])):ls==="Z"?os.length&&(rs.push(os),os=[]):os.push([us[1],us[2]])}return os.length>0&&as.push(os),{polygons:rs,polylines:as}}const PathUtil$1=__assign$h({hasArc,extractPolygons,isPointInStroke:isPointInStroke$1},PathUtil$3);function isInPolygons(ns,ts,rs){for(var as=!1,os=0;os<ns.length;os++){var is=ns[os];if(as=isInPolygon(is,ts,rs),as)break}return as}var Path$1=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{startArrow:!1,endArrow:!1})},ts.prototype.initAttrs=function(rs){this._setPathArr(rs.path),this.setArrow()},ts.prototype.onAttrChange=function(rs,as,os){ns.prototype.onAttrChange.call(this,rs,as,os),rs==="path"&&this._setPathArr(as),this.setArrow()},ts.prototype._setPathArr=function(rs){this.attrs.path=pathToAbsolute(rs);var as=PathUtil$1.hasArc(rs);this.set("hasArc",as),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},ts.prototype.getSegments=function(){var rs=this.get("segements");return rs||(rs=getSegments(this.attr("path")),this.set("segments",rs)),rs},ts.prototype.setArrow=function(){var rs=this.attr(),as=rs.startArrow,os=rs.endArrow;if(as){var is=this.getStartTangent();addStartArrow(this,rs,is[0][0],is[0][1],is[1][0],is[1][1])}if(os){var is=this.getEndTangent();addEndArrow(this,rs,is[0][0],is[0][1],is[1][0],is[1][1])}},ts.prototype.isInStrokeOrPath=function(rs,as,os,is,us){var ls=this.getSegments(),fs=this.get("hasArc"),hs=!1;if(os){var vs=this.getTotalLength();hs=PathUtil$1.isPointInStroke(ls,us,rs,as,vs)}if(!hs&&is)if(fs)hs=isPointInPath(this,rs,as);else{var gs=this.attr("path"),ys=PathUtil$1.extractPolygons(gs);hs=isInPolygons(ys.polygons,rs,as)||isInPolygons(ys.polylines,rs,as)}return hs},ts.prototype.createPath=function(rs){var as=this.attr(),os=this.get("paramsCache");drawPath(this,rs,as,os)},ts.prototype.afterDrawPath=function(rs){var as=this.get("startArrowShape"),os=this.get("endArrowShape");as&&as.draw(rs),os&&os.draw(rs)},ts.prototype.getTotalLength=function(){var rs=this.get("totalLength");return isNil$2(rs)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):rs},ts.prototype.getPoint=function(rs){var as=this.get("tCache");as||(this._calculateCurve(),this._setTcache(),as=this.get("tCache"));var os,is,us=this.get("curve");if(!as||as.length===0)return us?{x:us[0][1],y:us[0][2]}:null;each$1(as,function(vs,gs){rs>=vs[0]&&rs<=vs[1]&&(os=(rs-vs[0])/(vs[1]-vs[0]),is=gs)});var ls=us[is];if(isNil$2(ls)||isNil$2(is))return null;var fs=ls.length,hs=us[is+1];return CubicUtil.pointAt(ls[fs-2],ls[fs-1],hs[1],hs[2],hs[3],hs[4],hs[5],hs[6],os)},ts.prototype._calculateCurve=function(){var rs=this.attr().path;this.set("curve",PathUtil$1.pathToCurve(rs))},ts.prototype._setTcache=function(){var rs=0,as=0,os=[],is,us,ls,fs,hs=this.get("curve");if(hs){if(each$1(hs,function(vs,gs){ls=hs[gs+1],fs=vs.length,ls&&(rs+=CubicUtil.length(vs[fs-2],vs[fs-1],ls[1],ls[2],ls[3],ls[4],ls[5],ls[6])||0)}),this.set("totalLength",rs),rs===0){this.set("tCache",[]);return}each$1(hs,function(vs,gs){ls=hs[gs+1],fs=vs.length,ls&&(is=[],is[0]=as/rs,us=CubicUtil.length(vs[fs-2],vs[fs-1],ls[1],ls[2],ls[3],ls[4],ls[5],ls[6]),as+=us||0,is[1]=as/rs,os.push(is))}),this.set("tCache",os)}},ts.prototype.getStartTangent=function(){var rs=this.getSegments(),as;if(rs.length>1){var os=rs[0].currentPoint,is=rs[1].currentPoint,us=rs[1].startTangent;as=[],us?(as.push([os[0]-us[0],os[1]-us[1]]),as.push([os[0],os[1]])):(as.push([is[0],is[1]]),as.push([os[0],os[1]]))}return as},ts.prototype.getEndTangent=function(){var rs=this.getSegments(),as=rs.length,os;if(as>1){var is=rs[as-2].currentPoint,us=rs[as-1].currentPoint,ls=rs[as-1].endTangent;os=[],ls?(os.push([us[0]-ls[0],us[1]-ls[1]]),os.push([us[0],us[1]])):(os.push([is[0],is[1]]),os.push([us[0],us[1]]))}return os},ts}(ShapeBase$1);function inPolyline(ns,ts,rs,as,os){var is=ns.length;if(is<2)return!1;for(var us=0;us<is-1;us++){var ls=ns[us][0],fs=ns[us][1],hs=ns[us+1][0],vs=ns[us+1][1];if(inLine(ls,fs,hs,vs,ts,rs,as))return!0}if(os){var gs=ns[0],ys=ns[is-1];if(inLine(gs[0],gs[1],ys[0],ys[1],ts,rs,as))return!0}return!1}var Polygon$1=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.isInStrokeOrPath=function(rs,as,os,is,us){var ls=this.attr().points,fs=!1;return os&&(fs=inPolyline(ls,us,rs,as,!0)),!fs&&is&&(fs=isInPolygon(ls,rs,as)),fs},ts.prototype.createPath=function(rs){var as=this.attr(),os=as.points;if(!(os.length<2)){rs.beginPath();for(var is=0;is<os.length;is++){var us=os[is];is===0?rs.moveTo(us[0],us[1]):rs.lineTo(us[0],us[1])}rs.closePath()}},ts}(ShapeBase$1),PolyLine=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{startArrow:!1,endArrow:!1})},ts.prototype.initAttrs=function(rs){this.setArrow()},ts.prototype.onAttrChange=function(rs,as,os){ns.prototype.onAttrChange.call(this,rs,as,os),this.setArrow(),["points"].indexOf(rs)!==-1&&this._resetCache()},ts.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},ts.prototype.setArrow=function(){var rs=this.attr(),as=this.attrs,os=as.points,is=as.startArrow,us=as.endArrow,ls=os.length,fs=os[0][0],hs=os[0][1],vs=os[ls-1][0],gs=os[ls-1][1];is&&addStartArrow(this,rs,os[1][0],os[1][1],fs,hs),us&&addEndArrow(this,rs,os[ls-2][0],os[ls-2][1],vs,gs)},ts.prototype.isFill=function(){return!1},ts.prototype.isInStrokeOrPath=function(rs,as,os,is,us){if(!os||!us)return!1;var ls=this.attr().points;return inPolyline(ls,us,rs,as,!1)},ts.prototype.isStroke=function(){return!0},ts.prototype.createPath=function(rs){var as=this.attr(),os=as.points,is=as.startArrow,us=as.endArrow,ls=os.length;if(!(os.length<2)){var fs=os[0][0],hs=os[0][1],vs=os[ls-1][0],gs=os[ls-1][1];if(is&&is.d){var ys=getShortenOffset(fs,hs,os[1][0],os[1][1],is.d);fs+=ys.dx,hs+=ys.dy}if(us&&us.d){var ys=getShortenOffset(os[ls-2][0],os[ls-2][1],vs,gs,us.d);vs-=ys.dx,gs-=ys.dy}rs.beginPath(),rs.moveTo(fs,hs);for(var xs=0;xs<ls-1;xs++){var ms=os[xs];rs.lineTo(ms[0],ms[1])}rs.lineTo(vs,gs)}},ts.prototype.afterDrawPath=function(rs){var as=this.get("startArrowShape"),os=this.get("endArrowShape");as&&as.draw(rs),os&&os.draw(rs)},ts.prototype.getTotalLength=function(){var rs=this.attr().points,as=this.get("totalLength");return isNil$2(as)?(this.set("totalLength",PolylineUtil.length(rs)),this.get("totalLength")):as},ts.prototype.getPoint=function(rs){var as=this.attr().points,os=this.get("tCache");os||(this._setTcache(),os=this.get("tCache"));var is,us;return each$1(os,function(ls,fs){rs>=ls[0]&&rs<=ls[1]&&(is=(rs-ls[0])/(ls[1]-ls[0]),us=fs)}),LineUtil.pointAt(as[us][0],as[us][1],as[us+1][0],as[us+1][1],is)},ts.prototype._setTcache=function(){var rs=this.attr().points;if(!(!rs||rs.length===0)){var as=this.getTotalLength();if(!(as<=0)){var os=0,is=[],us,ls;each$1(rs,function(fs,hs){rs[hs+1]&&(us=[],us[0]=os/as,ls=LineUtil.length(fs[0],fs[1],rs[hs+1][0],rs[hs+1][1]),os+=ls,us[1]=os/as,is.push(us))}),this.set("tCache",is)}}},ts.prototype.getStartTangent=function(){var rs=this.attr().points,as=[];return as.push([rs[1][0],rs[1][1]]),as.push([rs[0][0],rs[0][1]]),as},ts.prototype.getEndTangent=function(){var rs=this.attr().points,as=rs.length-1,os=[];return os.push([rs[as-1][0],rs[as-1][1]]),os.push([rs[as][0],rs[as][1]]),os},ts}(ShapeBase$1);function inRect(ns,ts,rs,as,os,is,us){var ls=os/2;return inBox(ns-ls,ts-ls,rs,os,is,us)||inBox(ns+rs-ls,ts-ls,os,as,is,us)||inBox(ns+ls,ts+as-ls,rs,os,is,us)||inBox(ns-ls,ts+ls,os,as,is,us)}function rectWithRadius(ns,ts,rs,as,os,is,us,ls){return inLine(ns+os,ts,ns+rs-os,ts,is,us,ls)||inLine(ns+rs,ts+os,ns+rs,ts+as-os,is,us,ls)||inLine(ns+rs-os,ts+as,ns+os,ts+as,is,us,ls)||inLine(ns,ts+as-os,ns,ts+os,is,us,ls)||arc(ns+rs-os,ts+os,os,1.5*Math.PI,2*Math.PI,is,us,ls)||arc(ns+rs-os,ts+as-os,os,0,.5*Math.PI,is,us,ls)||arc(ns+os,ts+as-os,os,.5*Math.PI,Math.PI,is,us,ls)||arc(ns+os,ts+os,os,Math.PI,1.5*Math.PI,is,us,ls)}var Rect$2=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{x:0,y:0,width:0,height:0,radius:0})},ts.prototype.isInStrokeOrPath=function(rs,as,os,is,us){var ls=this.attr(),fs=ls.x,hs=ls.y,vs=ls.width,gs=ls.height,ys=ls.radius;if(ys){var ms=!1;return os&&(ms=rectWithRadius(fs,hs,vs,gs,ys,us,rs,as)),!ms&&is&&(ms=isPointInPath(this,rs,as)),ms}else{var xs=us/2;if(is&&os)return inBox(fs-xs,hs-xs,vs+xs,gs+xs,rs,as);if(is)return inBox(fs,hs,vs,gs,rs,as);if(os)return inRect(fs,hs,vs,gs,us,rs,as)}},ts.prototype.createPath=function(rs){var as=this.attr(),os=as.x,is=as.y,us=as.width,ls=as.height,fs=as.radius;if(rs.beginPath(),fs===0)rs.rect(os,is,us,ls);else{var hs=parseRadius$2(fs),vs=hs[0],gs=hs[1],ys=hs[2],xs=hs[3];rs.moveTo(os+vs,is),rs.lineTo(os+us-gs,is),gs!==0&&rs.arc(os+us-gs,is+gs,gs,-Math.PI/2,0),rs.lineTo(os+us,is+ls-ys),ys!==0&&rs.arc(os+us-ys,is+ls-ys,ys,0,Math.PI/2),rs.lineTo(os+xs,is+ls),xs!==0&&rs.arc(os+xs,is+ls-xs,xs,Math.PI/2,Math.PI),rs.lineTo(os,is+vs),vs!==0&&rs.arc(os+vs,is+vs,vs,Math.PI,Math.PI*1.5),rs.closePath()}},ts}(ShapeBase$1),Text$2=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},ts.prototype.isOnlyHitBox=function(){return!0},ts.prototype.initAttrs=function(rs){this._assembleFont(),rs.text&&this._setText(rs.text)},ts.prototype._assembleFont=function(){var rs=this.attrs;rs.font=assembleFont(rs)},ts.prototype._setText=function(rs){var as=null;isString$2(rs)&&rs.indexOf(`
`)!==-1&&(as=rs.split(`
`)),this.set("textArr",as)},ts.prototype.onAttrChange=function(rs,as,os){ns.prototype.onAttrChange.call(this,rs,as,os),rs.startsWith("font")&&this._assembleFont(),rs==="text"&&this._setText(as)},ts.prototype._getSpaceingY=function(){var rs=this.attrs,as=rs.lineHeight,os=rs.fontSize*1;return as?as-os:os*.14},ts.prototype._drawTextArr=function(rs,as,os){var is=this.attrs,us=is.textBaseline,ls=is.x,fs=is.y,hs=is.fontSize*1,vs=this._getSpaceingY(),gs=getTextHeight(is.text,is.fontSize,is.lineHeight),ys;each$1(as,function(xs,ms){ys=fs+ms*(vs+hs)-gs+hs,us==="middle"&&(ys+=gs-hs-(gs-hs)/2),us==="top"&&(ys+=gs-hs),isNil$2(xs)||(os?rs.fillText(xs,ls,ys):rs.strokeText(xs,ls,ys))})},ts.prototype._drawText=function(rs,as){var os=this.attr(),is=os.x,us=os.y,ls=this.get("textArr");if(ls)this._drawTextArr(rs,ls,as);else{var fs=os.text;isNil$2(fs)||(as?rs.fillText(fs,is,us):rs.strokeText(fs,is,us))}},ts.prototype.strokeAndFill=function(rs){var as=this.attrs,os=as.lineWidth,is=as.opacity,us=as.strokeOpacity,ls=as.fillOpacity;this.isStroke()&&os>0&&(!isNil$2(us)&&us!==1&&(rs.globalAlpha=is),this.stroke(rs)),this.isFill()&&(!isNil$2(ls)&&ls!==1?(rs.globalAlpha=ls,this.fill(rs),rs.globalAlpha=is):this.fill(rs)),this.afterDrawPath(rs)},ts.prototype.fill=function(rs){this._drawText(rs,!0)},ts.prototype.stroke=function(rs){this._drawText(rs,!1)},ts}(ShapeBase$1);function invertFromMatrix(ns,ts){if(ts){var rs=invert(ts);return multiplyVec2(rs,ns)}return ns}function getRefXY(ns,ts,rs){var as=ns.getTotalMatrix();if(as){var os=invertFromMatrix([ts,rs,1],as),is=os[0],us=os[1];return[is,us]}return[ts,rs]}function preTest(ns,ts,rs){if(ns.isCanvas&&ns.isCanvas())return!0;if(!isAllowCapture(ns)||ns.cfg.isInView===!1)return!1;if(ns.cfg.clipShape){var as=getRefXY(ns,ts,rs),os=as[0],is=as[1];if(ns.isClipped(os,is))return!1}var us=ns.cfg.cacheCanvasBBox||ns.getCanvasBBox();return ts>=us.minX&&ts<=us.maxX&&rs>=us.minY&&rs<=us.maxY}function getShape(ns,ts,rs){if(!preTest(ns,ts,rs))return null;for(var as=null,os=ns.getChildren(),is=os.length,us=is-1;us>=0;us--){var ls=os[us];if(ls.isGroup())as=getShape(ls,ts,rs);else if(preTest(ls,ts,rs)){var fs=ls,hs=getRefXY(ls,ts,rs),vs=hs[0],gs=hs[1];fs.isInShape(vs,gs)&&(as=ls)}if(as)break}return as}var Canvas$1=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getDefaultCfg=function(){var rs=ns.prototype.getDefaultCfg.call(this);return rs.renderer="canvas",rs.autoDraw=!0,rs.localRefresh=!0,rs.refreshElements=[],rs.clipView=!0,rs.quickHit=!1,rs},ts.prototype.onCanvasChange=function(rs){(rs==="attr"||rs==="sort"||rs==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},ts.prototype.getShapeBase=function(){return Shape$2},ts.prototype.getGroupBase=function(){return Group$2},ts.prototype.getPixelRatio=function(){var rs=this.get("pixelRatio")||getPixelRatio();return rs>=1?Math.ceil(rs):1},ts.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},ts.prototype.createDom=function(){var rs=document.createElement("canvas"),as=rs.getContext("2d");return this.set("context",as),rs},ts.prototype.setDOMSize=function(rs,as){ns.prototype.setDOMSize.call(this,rs,as);var os=this.get("context"),is=this.get("el"),us=this.getPixelRatio();is.width=us*rs,is.height=us*as,us>1&&os.scale(us,us)},ts.prototype.clear=function(){ns.prototype.clear.call(this),this._clearFrame();var rs=this.get("context"),as=this.get("el");rs.clearRect(0,0,as.width,as.height)},ts.prototype.getShape=function(rs,as){var os;return this.get("quickHit")?os=getShape(this,rs,as):os=ns.prototype.getShape.call(this,rs,as,null),os},ts.prototype._getRefreshRegion=function(){var rs=this.get("refreshElements"),as=this.getViewRange(),os;if(rs.length&&rs[0]===this)os=as;else if(os=getMergedRegion(rs),os){os.minX=Math.floor(os.minX),os.minY=Math.floor(os.minY),os.maxX=Math.ceil(os.maxX),os.maxY=Math.ceil(os.maxY),os.maxY+=1;var is=this.get("clipView");is&&(os=mergeView(os,as))}return os},ts.prototype.refreshElement=function(rs){var as=this.get("refreshElements");as.push(rs)},ts.prototype._clearFrame=function(){var rs=this.get("drawFrame");rs&&(cancelAnimationFrame$2(rs),this.set("drawFrame",null),this.set("refreshElements",[]))},ts.prototype.draw=function(){var rs=this.get("drawFrame");this.get("autoDraw")&&rs||this._startDraw()},ts.prototype._drawAll=function(){var rs=this.get("context"),as=this.get("el"),os=this.getChildren();rs.clearRect(0,0,as.width,as.height),applyAttrsToContext(rs,this),drawChildren$1(rs,os),this.set("refreshElements",[])},ts.prototype._drawRegion=function(){var rs=this.get("context"),as=this.get("refreshElements"),os=this.getChildren(),is=this._getRefreshRegion();is?(rs.clearRect(is.minX,is.minY,is.maxX-is.minX,is.maxY-is.minY),rs.save(),rs.beginPath(),rs.rect(is.minX,is.minY,is.maxX-is.minX,is.maxY-is.minY),rs.clip(),applyAttrsToContext(rs,this),checkRefresh(this,os,is),drawChildren$1(rs,os,is),rs.restore()):as.length&&clearChanged(as),each$1(as,function(us){us.get("hasChanged")&&us.set("hasChanged",!1)}),this.set("refreshElements",[])},ts.prototype._startDraw=function(){var rs=this,as=this.get("drawFrame");as||(as=requestAnimationFrame$2(function(){rs.get("localRefresh")?rs._drawRegion():rs._drawAll(),rs.set("drawFrame",null)}),this.set("drawFrame",as))},ts.prototype.skipDraw=function(){},ts.prototype.removeDom=function(){var rs=this.get("el");rs.width=0,rs.height=0,rs.parentNode.removeChild(rs)},ts}(Canvas$2),SHAPE_TO_TAGS={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},SVG_ATTR_MAP={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function createSVGElement(ns){return document.createElementNS("http://www.w3.org/2000/svg",ns)}function createDom$1(ns){var ts=SHAPE_TO_TAGS[ns.type],rs=ns.getParent();if(!ts)throw new Error("the type "+ns.type+" is not supported by svg");var as=createSVGElement(ts);if(ns.get("id")&&(as.id=ns.get("id")),ns.set("el",as),ns.set("attrs",{}),rs){var os=rs.get("el");os||(os=rs.createDom(),rs.set("el",os)),os.appendChild(as)}return as}function sortDom(ns,ts){var rs=ns.get("el"),as=toArray$1(rs.children).sort(ts),os=document.createDocumentFragment();as.forEach(function(is){os.appendChild(is)}),rs.appendChild(os)}function moveTo(ns,ts){var rs=ns.parentNode,as=Array.from(rs.childNodes).filter(function(ls){return ls.nodeType===1&&ls.nodeName.toLowerCase()!=="defs"}),os=as[ts],is=as.indexOf(ns);if(os){if(is>ts)rs.insertBefore(ns,os);else if(is<ts){var us=as[ts+1];us?rs.insertBefore(ns,us):rs.appendChild(ns)}}else rs.appendChild(ns)}function setShadow(ns,ts){var rs=ns.cfg.el,as=ns.attr(),os={dx:as.shadowOffsetX,dy:as.shadowOffsetY,blur:as.shadowBlur,color:as.shadowColor};if(!os.dx&&!os.dy&&!os.blur&&!os.color)rs.removeAttribute("filter");else{var is=ts.find("filter",os);is||(is=ts.addShadow(os)),rs.setAttribute("filter","url(#"+is+")")}}function setTransform(ns){var ts=ns.attr().matrix;if(ts){for(var rs=ns.cfg.el,as=[],os=0;os<9;os+=3)as.push(ts[os]+","+ts[os+1]);as=as.join(","),as.indexOf("NaN")===-1?rs.setAttribute("transform","matrix("+as+")"):console.warn("invalid matrix:",ts)}}function setClip(ns,ts){var rs=ns.getClip(),as=ns.get("el");if(!rs)as.removeAttribute("clip-path");else if(rs&&!as.hasAttribute("clip-path")){createDom$1(rs),rs.createPath(ts);var os=ts.addClip(rs);as.setAttribute("clip-path","url(#"+os+")")}}function drawChildren(ns,ts){ts.forEach(function(rs){rs.draw(ns)})}function refreshElement(ns,ts){var rs=ns.get("canvas");if(rs&&rs.get("autoDraw")){var as=rs.get("context"),os=ns.getParent(),is=os?os.getChildren():[rs],us=ns.get("el");if(ts==="remove"){var ls=ns.get("isClipShape");if(ls){var fs=us&&us.parentNode,hs=fs&&fs.parentNode;fs&&hs&&hs.removeChild(fs)}else us&&us.parentNode&&us.parentNode.removeChild(us)}else if(ts==="show")us.setAttribute("visibility","visible");else if(ts==="hide")us.setAttribute("visibility","hidden");else if(ts==="zIndex")moveTo(us,is.indexOf(ns));else if(ts==="sort"){var vs=ns.get("children");vs&&vs.length&&sortDom(ns,function(gs,ys){return vs.indexOf(gs)-vs.indexOf(ys)?1:0})}else ts==="clear"?us&&(us.innerHTML=""):ts==="matrix"?setTransform(ns):ts==="clip"?setClip(ns,as):ts==="attr"||ts==="add"&&ns.draw(as)}}var Group$1=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.isEntityGroup=function(){return!0},ts.prototype.createDom=function(){var rs=createSVGElement("g");this.set("el",rs);var as=this.getParent();if(as){var os=as.get("el");os||(os=as.createDom(),as.set("el",os)),os.appendChild(rs)}return rs},ts.prototype.afterAttrsChange=function(rs){ns.prototype.afterAttrsChange.call(this,rs);var as=this.get("canvas");if(as&&as.get("autoDraw")){var os=as.get("context");this.createPath(os,rs)}},ts.prototype.onCanvasChange=function(rs){refreshElement(this,rs)},ts.prototype.getShapeBase=function(){return Shape$1},ts.prototype.getGroupBase=function(){return ts},ts.prototype.draw=function(rs){var as=this.getChildren(),os=this.get("el");this.get("destroyed")?os&&os.parentNode.removeChild(os):(os||this.createDom(),setClip(this,rs),this.createPath(rs),as.length&&drawChildren(rs,as))},ts.prototype.createPath=function(rs,as){var os=this.attr(),is=this.get("el");each$1(as||os,function(us,ls){SVG_ATTR_MAP[ls]&&is.setAttribute(SVG_ATTR_MAP[ls],us)}),setTransform(this)},ts}(AbstractGroup),ShapeBase=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="svg",rs.canFill=!1,rs.canStroke=!1,rs}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},ts.prototype.afterAttrsChange=function(rs){ns.prototype.afterAttrsChange.call(this,rs);var as=this.get("canvas");if(as&&as.get("autoDraw")){var os=as.get("context");this.draw(os,rs)}},ts.prototype.getShapeBase=function(){return Shape$1},ts.prototype.getGroupBase=function(){return Group$1},ts.prototype.onCanvasChange=function(rs){refreshElement(this,rs)},ts.prototype.calculateBBox=function(){var rs=this.get("el"),as=null;if(rs)as=rs.getBBox();else{var os=getMethod(this.get("type"));os&&(as=os(this))}if(as){var is=as.x,us=as.y,ls=as.width,fs=as.height,hs=this.getHitLineWidth(),vs=hs/2,gs=is-vs,ys=us-vs,xs=is+ls+vs,ms=us+fs+vs;return{x:gs,y:ys,minX:gs,minY:ys,maxX:xs,maxY:ms,width:ls+hs,height:fs+hs}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},ts.prototype.isFill=function(){var rs=this.attr(),as=rs.fill,os=rs.fillStyle;return(as||os||this.isClipShape())&&this.canFill},ts.prototype.isStroke=function(){var rs=this.attr(),as=rs.stroke,os=rs.strokeStyle;return(as||os)&&this.canStroke},ts.prototype.draw=function(rs,as){var os=this.get("el");this.get("destroyed")?os&&os.parentNode.removeChild(os):(os||createDom$1(this),setClip(this,rs),this.createPath(rs,as),this.shadow(rs,as),this.strokeAndFill(rs,as),this.transform(as))},ts.prototype.createPath=function(rs,as){},ts.prototype.strokeAndFill=function(rs,as){var os=as||this.attr(),is=os.fill,us=os.fillStyle,ls=os.stroke,fs=os.strokeStyle,hs=os.fillOpacity,vs=os.strokeOpacity,gs=os.lineWidth,ys=this.get("el");this.canFill&&(as?"fill"in os?this._setColor(rs,"fill",is):"fillStyle"in os&&this._setColor(rs,"fill",us):this._setColor(rs,"fill",is||us),hs&&ys.setAttribute(SVG_ATTR_MAP.fillOpacity,hs)),this.canStroke&&gs>0&&(as?"stroke"in os?this._setColor(rs,"stroke",ls):"strokeStyle"in os&&this._setColor(rs,"stroke",fs):this._setColor(rs,"stroke",ls||fs),vs&&ys.setAttribute(SVG_ATTR_MAP.strokeOpacity,vs),gs&&ys.setAttribute(SVG_ATTR_MAP.lineWidth,gs))},ts.prototype._setColor=function(rs,as,os){var is=this.get("el");if(!os){is.setAttribute(SVG_ATTR_MAP[as],"none");return}if(os=os.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(os)){var us=rs.find("gradient",os);us||(us=rs.addGradient(os)),is.setAttribute(SVG_ATTR_MAP[as],"url(#"+us+")")}else if(/^[p,P]{1}[\s]*\(/.test(os)){var us=rs.find("pattern",os);us||(us=rs.addPattern(os)),is.setAttribute(SVG_ATTR_MAP[as],"url(#"+us+")")}else is.setAttribute(SVG_ATTR_MAP[as],os)},ts.prototype.shadow=function(rs,as){var os=this.attr(),is=as||os,us=is.shadowOffsetX,ls=is.shadowOffsetY,fs=is.shadowBlur,hs=is.shadowColor;(us||ls||fs||hs)&&setShadow(this,rs)},ts.prototype.transform=function(rs){var as=this.attr(),os=(rs||as).matrix;os&&setTransform(this)},ts.prototype.isInShape=function(rs,as){return this.isPointInPath(rs,as)},ts.prototype.isPointInPath=function(rs,as){var os=this.get("el"),is=this.get("canvas"),us=is.get("el").getBoundingClientRect(),ls=rs+us.left,fs=as+us.top,hs=document.elementFromPoint(ls,fs);return!!(hs&&hs.isEqualNode(os))},ts.prototype.getHitLineWidth=function(){var rs=this.attrs,as=rs.lineWidth,os=rs.lineAppendWidth;return this.isStroke()?as+os:0},ts}(AbstractShape),Circle=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="circle",rs.canFill=!0,rs.canStroke=!0,rs}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{x:0,y:0,r:0})},ts.prototype.createPath=function(rs,as){var os=this.attr(),is=this.get("el");each$1(as||os,function(us,ls){ls==="x"||ls==="y"?is.setAttribute("c"+ls,us):SVG_ATTR_MAP[ls]&&is.setAttribute(SVG_ATTR_MAP[ls],us)})},ts}(ShapeBase),Dom=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="dom",rs.canFill=!1,rs.canStroke=!1,rs}return ts.prototype.createPath=function(rs,as){var os=this.attr(),is=this.get("el");if(each$1(as||os,function(hs,vs){SVG_ATTR_MAP[vs]&&is.setAttribute(SVG_ATTR_MAP[vs],hs)}),typeof os.html=="function"){var us=os.html.call(this,os);if(us instanceof Element||us instanceof HTMLDocument){for(var ls=is.childNodes,fs=ls.length-1;fs>=0;fs--)is.removeChild(ls[fs]);is.appendChild(us)}else is.innerHTML=us}else is.innerHTML=os.html},ts}(ShapeBase),Ellipse=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="ellipse",rs.canFill=!0,rs.canStroke=!0,rs}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{x:0,y:0,rx:0,ry:0})},ts.prototype.createPath=function(rs,as){var os=this.attr(),is=this.get("el");each$1(as||os,function(us,ls){ls==="x"||ls==="y"?is.setAttribute("c"+ls,us):SVG_ATTR_MAP[ls]&&is.setAttribute(SVG_ATTR_MAP[ls],us)})},ts}(ShapeBase),Image$1=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="image",rs.canFill=!1,rs.canStroke=!1,rs}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{x:0,y:0,width:0,height:0})},ts.prototype.createPath=function(rs,as){var os=this,is=this.attr(),us=this.get("el");each$1(as||is,function(ls,fs){fs==="img"?os._setImage(is.img):SVG_ATTR_MAP[fs]&&us.setAttribute(SVG_ATTR_MAP[fs],ls)})},ts.prototype.setAttr=function(rs,as){this.attrs[rs]=as,rs==="img"&&this._setImage(as)},ts.prototype._setImage=function(rs){var as=this.attr(),os=this.get("el");if(isString$2(rs))os.setAttribute("href",rs);else if(rs instanceof window.Image)as.width||(os.setAttribute("width",rs.width),this.attr("width",rs.width)),as.height||(os.setAttribute("height",rs.height),this.attr("height",rs.height)),os.setAttribute("href",rs.src);else if(rs instanceof HTMLElement&&isString$2(rs.nodeName)&&rs.nodeName.toUpperCase()==="CANVAS")os.setAttribute("href",rs.toDataURL());else if(rs instanceof ImageData){var is=document.createElement("canvas");is.setAttribute("width",""+rs.width),is.setAttribute("height",""+rs.height),is.getContext("2d").putImageData(rs,0,0),as.width||(os.setAttribute("width",""+rs.width),this.attr("width",rs.width)),as.height||(os.setAttribute("height",""+rs.height),this.attr("height",rs.height)),os.setAttribute("href",is.toDataURL())}},ts}(ShapeBase),Line$1=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="line",rs.canFill=!1,rs.canStroke=!0,rs}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},ts.prototype.createPath=function(rs,as){var os=this.attr(),is=this.get("el");each$1(as||os,function(us,ls){if(ls==="startArrow"||ls==="endArrow")if(us){var fs=isObject$1(us)?rs.addArrow(os,SVG_ATTR_MAP[ls]):rs.getDefaultArrow(os,SVG_ATTR_MAP[ls]);is.setAttribute(SVG_ATTR_MAP[ls],"url(#"+fs+")")}else is.removeAttribute(SVG_ATTR_MAP[ls]);else SVG_ATTR_MAP[ls]&&is.setAttribute(SVG_ATTR_MAP[ls],us)})},ts.prototype.getTotalLength=function(){var rs=this.attr(),as=rs.x1,os=rs.y1,is=rs.x2,us=rs.y2;return LineUtil.length(as,os,is,us)},ts.prototype.getPoint=function(rs){var as=this.attr(),os=as.x1,is=as.y1,us=as.x2,ls=as.y2;return LineUtil.pointAt(os,is,us,ls,rs)},ts}(ShapeBase),Symbols={circle:function(ns,ts,rs){return[["M",ns,ts],["m",-rs,0],["a",rs,rs,0,1,0,rs*2,0],["a",rs,rs,0,1,0,-rs*2,0]]},square:function(ns,ts,rs){return[["M",ns-rs,ts-rs],["L",ns+rs,ts-rs],["L",ns+rs,ts+rs],["L",ns-rs,ts+rs],["Z"]]},diamond:function(ns,ts,rs){return[["M",ns-rs,ts],["L",ns,ts-rs],["L",ns+rs,ts],["L",ns,ts+rs],["Z"]]},triangle:function(ns,ts,rs){var as=rs*Math.sin(.3333333333333333*Math.PI);return[["M",ns-rs,ts+as],["L",ns,ts-as],["L",ns+rs,ts+as],["z"]]},triangleDown:function(ns,ts,rs){var as=rs*Math.sin(.3333333333333333*Math.PI);return[["M",ns-rs,ts-as],["L",ns+rs,ts-as],["L",ns,ts+as],["Z"]]}};const symbolsFactory={get:function(ns){return Symbols[ns]},register:function(ns,ts){Symbols[ns]=ts},remove:function(ns){delete Symbols[ns]},getAll:function(){return Symbols}};var Marker$1=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="marker",rs.canFill=!0,rs.canStroke=!0,rs}return ts.prototype.createPath=function(rs){var as=this.get("el");as.setAttribute("d",this._assembleMarker())},ts.prototype._assembleMarker=function(){var rs=this._getPath();return isArray$2(rs)?rs.map(function(as){return as.join(" ")}).join(""):rs},ts.prototype._getPath=function(){var rs=this.attr(),as=rs.x,os=rs.y,is=rs.r||rs.radius,us=rs.symbol||"circle",ls;return isFunction$2(us)?ls=us:ls=symbolsFactory.get(us),ls?ls(as,os,is):(console.warn(ls+" symbol is not exist."),null)},ts.symbolsFactory=symbolsFactory,ts}(ShapeBase),Path=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="path",rs.canFill=!0,rs.canStroke=!0,rs}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{startArrow:!1,endArrow:!1})},ts.prototype.createPath=function(rs,as){var os=this,is=this.attr(),us=this.get("el");each$1(as||is,function(ls,fs){if(fs==="path"&&isArray$2(ls))us.setAttribute("d",os._formatPath(ls));else if(fs==="startArrow"||fs==="endArrow")if(ls){var hs=isObject$1(ls)?rs.addArrow(is,SVG_ATTR_MAP[fs]):rs.getDefaultArrow(is,SVG_ATTR_MAP[fs]);us.setAttribute(SVG_ATTR_MAP[fs],"url(#"+hs+")")}else us.removeAttribute(SVG_ATTR_MAP[fs]);else SVG_ATTR_MAP[fs]&&us.setAttribute(SVG_ATTR_MAP[fs],ls)})},ts.prototype._formatPath=function(rs){var as=rs.map(function(os){return os.join(" ")}).join("");return~as.indexOf("NaN")?"":as},ts.prototype.getTotalLength=function(){var rs=this.get("el");return rs?rs.getTotalLength():null},ts.prototype.getPoint=function(rs){var as=this.get("el"),os=this.getTotalLength();if(os===0)return null;var is=as?as.getPointAtLength(rs*os):null;return is?{x:is.x,y:is.y}:null},ts}(ShapeBase),Polygon=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="polygon",rs.canFill=!0,rs.canStroke=!0,rs}return ts.prototype.createPath=function(rs,as){var os=this.attr(),is=this.get("el");each$1(as||os,function(us,ls){ls==="points"&&isArray$2(us)&&us.length>=2?is.setAttribute("points",us.map(function(fs){return fs[0]+","+fs[1]}).join(" ")):SVG_ATTR_MAP[ls]&&is.setAttribute(SVG_ATTR_MAP[ls],us)})},ts}(ShapeBase),Polyline=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="polyline",rs.canFill=!0,rs.canStroke=!0,rs}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{startArrow:!1,endArrow:!1})},ts.prototype.onAttrChange=function(rs,as,os){ns.prototype.onAttrChange.call(this,rs,as,os),["points"].indexOf(rs)!==-1&&this._resetCache()},ts.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},ts.prototype.createPath=function(rs,as){var os=this.attr(),is=this.get("el");each$1(as||os,function(us,ls){ls==="points"&&isArray$2(us)&&us.length>=2?is.setAttribute("points",us.map(function(fs){return fs[0]+","+fs[1]}).join(" ")):SVG_ATTR_MAP[ls]&&is.setAttribute(SVG_ATTR_MAP[ls],us)})},ts.prototype.getTotalLength=function(){var rs=this.attr().points,as=this.get("totalLength");return isNil$2(as)?(this.set("totalLength",PolylineUtil.length(rs)),this.get("totalLength")):as},ts.prototype.getPoint=function(rs){var as=this.attr().points,os=this.get("tCache");os||(this._setTcache(),os=this.get("tCache"));var is,us;return each$1(os,function(ls,fs){rs>=ls[0]&&rs<=ls[1]&&(is=(rs-ls[0])/(ls[1]-ls[0]),us=fs)}),LineUtil.pointAt(as[us][0],as[us][1],as[us+1][0],as[us+1][1],is)},ts.prototype._setTcache=function(){var rs=this.attr().points;if(!(!rs||rs.length===0)){var as=this.getTotalLength();if(!(as<=0)){var os=0,is=[],us,ls;each$1(rs,function(fs,hs){rs[hs+1]&&(us=[],us[0]=os/as,ls=LineUtil.length(fs[0],fs[1],rs[hs+1][0],rs[hs+1][1]),os+=ls,us[1]=os/as,is.push(us))}),this.set("tCache",is)}}},ts.prototype.getStartTangent=function(){var rs=this.attr().points,as=[];return as.push([rs[1][0],rs[1][1]]),as.push([rs[0][0],rs[0][1]]),as},ts.prototype.getEndTangent=function(){var rs=this.attr().points,as=rs.length-1,os=[];return os.push([rs[as-1][0],rs[as-1][1]]),os.push([rs[as][0],rs[as][1]]),os},ts}(ShapeBase);function parseRadius$1(ns){var ts=0,rs=0,as=0,os=0;return isArray$2(ns)?ns.length===1?ts=rs=as=os=ns[0]:ns.length===2?(ts=as=ns[0],rs=os=ns[1]):ns.length===3?(ts=ns[0],rs=os=ns[1],as=ns[2]):(ts=ns[0],rs=ns[1],as=ns[2],os=ns[3]):ts=rs=as=os=ns,{r1:ts,r2:rs,r3:as,r4:os}}var Rect$1=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="rect",rs.canFill=!0,rs.canStroke=!0,rs}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{x:0,y:0,width:0,height:0,radius:0})},ts.prototype.createPath=function(rs,as){var os=this,is=this.attr(),us=this.get("el"),ls=!1,fs=["x","y","width","height","radius"];each$1(as||is,function(hs,vs){fs.indexOf(vs)!==-1&&!ls?(us.setAttribute("d",os._assembleRect(is)),ls=!0):fs.indexOf(vs)===-1&&SVG_ATTR_MAP[vs]&&us.setAttribute(SVG_ATTR_MAP[vs],hs)})},ts.prototype._assembleRect=function(rs){var as=rs.x,os=rs.y,is=rs.width,us=rs.height,ls=rs.radius;if(!ls)return"M "+as+","+os+" l "+is+",0 l 0,"+us+" l"+-is+" 0 z";var fs=parseRadius$1(ls);isArray$2(ls)?ls.length===1?fs.r1=fs.r2=fs.r3=fs.r4=ls[0]:ls.length===2?(fs.r1=fs.r3=ls[0],fs.r2=fs.r4=ls[1]):ls.length===3?(fs.r1=ls[0],fs.r2=fs.r4=ls[1],fs.r3=ls[2]):(fs.r1=ls[0],fs.r2=ls[1],fs.r3=ls[2],fs.r4=ls[3]):fs.r1=fs.r2=fs.r3=fs.r4=ls;var hs=[["M "+(as+fs.r1)+","+os],["l "+(is-fs.r1-fs.r2)+",0"],["a "+fs.r2+","+fs.r2+",0,0,1,"+fs.r2+","+fs.r2],["l 0,"+(us-fs.r2-fs.r3)],["a "+fs.r3+","+fs.r3+",0,0,1,"+-fs.r3+","+fs.r3],["l "+(fs.r3+fs.r4-is)+",0"],["a "+fs.r4+","+fs.r4+",0,0,1,"+-fs.r4+","+-fs.r4],["l 0,"+(fs.r4+fs.r1-us)],["a "+fs.r1+","+fs.r1+",0,0,1,"+fs.r1+","+-fs.r1],["z"]];return hs.join(" ")},ts}(ShapeBase),LETTER_SPACING=.3,BASELINE_MAP={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},BASELINE_MAP_FOR_FIREFOX={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},ANCHOR_MAP={left:"left",start:"left",center:"middle",right:"end",end:"end"},Text$1=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="text",rs.canFill=!0,rs.canStroke=!0,rs}return ts.prototype.getDefaultAttrs=function(){var rs=ns.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},rs),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},ts.prototype.createPath=function(rs,as){var os=this,is=this.attr(),us=this.get("el");this._setFont(),each$1(as||is,function(ls,fs){fs==="text"?os._setText(""+ls):fs==="matrix"&&ls?setTransform(os):SVG_ATTR_MAP[fs]&&us.setAttribute(SVG_ATTR_MAP[fs],ls)}),us.setAttribute("paint-order","stroke"),us.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},ts.prototype._setFont=function(){var rs=this.get("el"),as=this.attr(),os=as.textBaseline,is=as.textAlign,us=detect();us&&us.name==="firefox"?rs.setAttribute("dominant-baseline",BASELINE_MAP_FOR_FIREFOX[os]||"alphabetic"):rs.setAttribute("alignment-baseline",BASELINE_MAP[os]||"baseline"),rs.setAttribute("text-anchor",ANCHOR_MAP[is]||"left")},ts.prototype._setText=function(rs){var as=this.get("el"),os=this.attr(),is=os.x,us=os.textBaseline,ls=us===void 0?"bottom":us;if(!rs)as.innerHTML="";else if(~rs.indexOf(`
`)){var fs=rs.split(`
`),hs=fs.length-1,vs="";each$1(fs,function(gs,ys){ys===0?ls==="alphabetic"?vs+='<tspan x="'+is+'" dy="'+-hs+'em">'+gs+"</tspan>":ls==="top"?vs+='<tspan x="'+is+'" dy="0.9em">'+gs+"</tspan>":ls==="middle"?vs+='<tspan x="'+is+'" dy="'+-(hs-1)/2+'em">'+gs+"</tspan>":ls==="bottom"?vs+='<tspan x="'+is+'" dy="-'+(hs+LETTER_SPACING)+'em">'+gs+"</tspan>":ls==="hanging"&&(vs+='<tspan x="'+is+'" dy="'+(-(hs-1)-LETTER_SPACING)+'em">'+gs+"</tspan>"):vs+='<tspan x="'+is+'" dy="1em">'+gs+"</tspan>"}),as.innerHTML=vs}else as.innerHTML=rs},ts}(ShapeBase),regexLG$1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,regexRG$1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,regexColorStop$1=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function addStop(ns){var ts=ns.match(regexColorStop$1);if(!ts)return"";var rs="";return ts.sort(function(as,os){return as=as.split(":"),os=os.split(":"),Number(as[0])-Number(os[0])}),each$1(ts,function(as){as=as.split(":"),rs+='<stop offset="'+as[0]+'" stop-color="'+as[1]+'"></stop>'}),rs}function parseLineGradient(ns,ts){var rs=regexLG$1.exec(ns),as=mod$3(toRadian$3(parseFloat(rs[1])),Math.PI*2),os=rs[2],is,us;as>=0&&as<.5*Math.PI?(is={x:0,y:0},us={x:1,y:1}):.5*Math.PI<=as&&as<Math.PI?(is={x:1,y:0},us={x:0,y:1}):Math.PI<=as&&as<1.5*Math.PI?(is={x:1,y:1},us={x:0,y:0}):(is={x:0,y:1},us={x:1,y:0});var ls=Math.tan(as),fs=ls*ls,hs=(us.x-is.x+ls*(us.y-is.y))/(fs+1)+is.x,vs=ls*(us.x-is.x+ls*(us.y-is.y))/(fs+1)+is.y;ts.setAttribute("x1",is.x),ts.setAttribute("y1",is.y),ts.setAttribute("x2",hs),ts.setAttribute("y2",vs),ts.innerHTML=addStop(os)}function parseRadialGradient(ns,ts){var rs=regexRG$1.exec(ns),as=parseFloat(rs[1]),os=parseFloat(rs[2]),is=parseFloat(rs[3]),us=rs[4];ts.setAttribute("cx",as),ts.setAttribute("cy",os),ts.setAttribute("r",is),ts.innerHTML=addStop(us)}var Gradient=function(){function ns(ts){this.cfg={};var rs=null,as=uniqueId$5("gradient_");return ts.toLowerCase()[0]==="l"?(rs=createSVGElement("linearGradient"),parseLineGradient(ts,rs)):(rs=createSVGElement("radialGradient"),parseRadialGradient(ts,rs)),rs.setAttribute("id",as),this.el=rs,this.id=as,this.cfg=ts,this}return ns.prototype.match=function(ts,rs){return this.cfg===rs},ns}(),ATTR_MAP={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},SHADOW_DIMENSION={x:"-40%",y:"-40%",width:"200%",height:"200%"},Shadow=function(){function ns(ts){this.type="filter",this.cfg={},this.type="filter";var rs=createSVGElement("filter");return each$1(SHADOW_DIMENSION,function(as,os){rs.setAttribute(os,as)}),this.el=rs,this.id=uniqueId$5("filter_"),this.el.id=this.id,this.cfg=ts,this._parseShadow(ts,rs),this}return ns.prototype.match=function(ts,rs){if(this.type!==ts)return!1;var as=!0,os=this.cfg;return each$1(Object.keys(os),function(is){if(os[is]!==rs[is])return as=!1,!1}),as},ns.prototype.update=function(ts,rs){var as=this.cfg;return as[ATTR_MAP[ts]]=rs,this._parseShadow(as,this.el),this},ns.prototype._parseShadow=function(ts,rs){var as=`<feDropShadow
      dx="`+(ts.dx||0)+`"
      dy="`+(ts.dy||0)+`"
      stdDeviation="`+(ts.blur?ts.blur/10:0)+`"
      flood-color="`+(ts.color?ts.color:"#000")+`"
      flood-opacity="`+(ts.opacity?ts.opacity:1)+`"
      />`;rs.innerHTML=as},ns}(),Arrow$1=function(){function ns(ts,rs){this.cfg={};var as=createSVGElement("marker"),os=uniqueId$5("marker_");as.setAttribute("id",os);var is=createSVGElement("path");is.setAttribute("stroke",ts.stroke||"none"),is.setAttribute("fill",ts.fill||"none"),as.appendChild(is),as.setAttribute("overflow","visible"),as.setAttribute("orient","auto-start-reverse"),this.el=as,this.child=is,this.id=os;var us=ts[rs==="marker-start"?"startArrow":"endArrow"];return this.stroke=ts.stroke||"#000",us===!0?this._setDefaultPath(rs,is):(this.cfg=us,this._setMarker(ts.lineWidth,is)),this}return ns.prototype.match=function(){return!1},ns.prototype._setDefaultPath=function(ts,rs){var as=this.el;rs.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),as.setAttribute("refX",""+10*Math.cos(Math.PI/6)),as.setAttribute("refY","5")},ns.prototype._setMarker=function(ts,rs){var as=this.el,os=this.cfg.path,is=this.cfg.d;isArray$2(os)&&(os=os.map(function(us){return us.join(" ")}).join("")),rs.setAttribute("d",os),as.appendChild(rs),is&&as.setAttribute("refX",""+is/ts)},ns.prototype.update=function(ts){var rs=this.child;rs.attr?rs.attr("fill",ts):rs.setAttribute("fill",ts)},ns}(),Clip=function(){function ns(ts){this.type="clip",this.cfg={};var rs=createSVGElement("clipPath");this.el=rs,this.id=uniqueId$5("clip_"),rs.id=this.id;var as=ts.cfg.el;return rs.appendChild(as),this.cfg=ts,this}return ns.prototype.match=function(){return!1},ns.prototype.remove=function(){var ts=this.el;ts.parentNode.removeChild(ts)},ns}(),regexPR=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Pattern=function(){function ns(ts){this.cfg={};var rs=createSVGElement("pattern");rs.setAttribute("patternUnits","userSpaceOnUse");var as=createSVGElement("image");rs.appendChild(as);var os=uniqueId$5("pattern_");rs.id=os,this.el=rs,this.id=os,this.cfg=ts;var is=regexPR.exec(ts),us=is[2];as.setAttribute("href",us);var ls=new Image;us.match(/^data:/i)||(ls.crossOrigin="Anonymous"),ls.src=us;function fs(){rs.setAttribute("width",""+ls.width),rs.setAttribute("height",""+ls.height)}return ls.complete?fs():(ls.onload=fs,ls.src=ls.src),this}return ns.prototype.match=function(ts,rs){return this.cfg===rs},ns}(),Defs=function(){function ns(ts){var rs=createSVGElement("defs"),as=uniqueId$5("defs_");rs.id=as,ts.appendChild(rs),this.children=[],this.defaultArrow={},this.el=rs,this.canvas=ts}return ns.prototype.find=function(ts,rs){for(var as=this.children,os=null,is=0;is<as.length;is++)if(as[is].match(ts,rs)){os=as[is].id;break}return os},ns.prototype.findById=function(ts){for(var rs=this.children,as=null,os=0;os<rs.length;os++)if(rs[os].id===ts){as=rs[os];break}return as},ns.prototype.add=function(ts){this.children.push(ts),ts.canvas=this.canvas,ts.parent=this},ns.prototype.getDefaultArrow=function(ts,rs){var as=ts.stroke||ts.strokeStyle;if(this.defaultArrow[as])return this.defaultArrow[as].id;var os=new Arrow$1(ts,rs);return this.defaultArrow[as]=os,this.el.appendChild(os.el),this.add(os),os.id},ns.prototype.addGradient=function(ts){var rs=new Gradient(ts);return this.el.appendChild(rs.el),this.add(rs),rs.id},ns.prototype.addArrow=function(ts,rs){var as=new Arrow$1(ts,rs);return this.el.appendChild(as.el),this.add(as),as.id},ns.prototype.addShadow=function(ts){var rs=new Shadow(ts);return this.el.appendChild(rs.el),this.add(rs),rs.id},ns.prototype.addPattern=function(ts){var rs=new Pattern(ts);return this.el.appendChild(rs.el),this.add(rs),rs.id},ns.prototype.addClip=function(ts){var rs=new Clip(ts);return this.el.appendChild(rs.el),this.add(rs),rs.id},ns}(),Canvas=function(ns){__extends$x(ts,ns);function ts(rs){return ns.call(this,__assign$h(__assign$h({},rs),{autoDraw:!0,renderer:"svg"}))||this}return ts.prototype.getShapeBase=function(){return Shape$1},ts.prototype.getGroupBase=function(){return Group$1},ts.prototype.getShape=function(rs,as,os){var is=os.target||os.srcElement;if(!SHAPE_TO_TAGS[is.tagName]){for(var us=is.parentNode;us&&!SHAPE_TO_TAGS[us.tagName];)us=us.parentNode;is=us}return this.find(function(ls){return ls.get("el")===is})},ts.prototype.createDom=function(){var rs=createSVGElement("svg"),as=new Defs(rs);return rs.setAttribute("width",""+this.get("width")),rs.setAttribute("height",""+this.get("height")),this.set("context",as),rs},ts.prototype.onCanvasChange=function(rs){var as=this.get("context"),os=this.get("el");if(rs==="sort"){var is=this.get("children");is&&is.length&&sortDom(this,function(ls,fs){return is.indexOf(ls)-is.indexOf(fs)?1:0})}else if(rs==="clear"){if(os){os.innerHTML="";var us=as.el;us.innerHTML="",os.appendChild(us)}}else rs==="matrix"?setTransform(this):rs==="clip"?setClip(this,as):rs==="changeSize"&&(os.setAttribute("width",""+this.get("width")),os.setAttribute("height",""+this.get("height")))},ts.prototype.draw=function(){var rs=this.get("context"),as=this.getChildren();setClip(this,rs),as.length&&drawChildren(rs,as)},ts}(Canvas$2);function addEventListener(ns,ts,rs){if(ns){if(typeof ns.addEventListener=="function")return ns.addEventListener(ts,rs,!1),{remove:function(){ns.removeEventListener(ts,rs,!1)}};if(typeof ns.attachEvent=="function")return ns.attachEvent("on"+ts,rs),{remove:function(){ns.detachEvent("on"+ts,rs)}}}}var TABLE,TABLE_TR,FRAGMENT_REG,CONTAINERS;function initConstants(){TABLE=document.createElement("table"),TABLE_TR=document.createElement("tr"),FRAGMENT_REG=/^\s*<(\w+|!)[^>]*>/,CONTAINERS={tr:document.createElement("tbody"),tbody:TABLE,thead:TABLE,tfoot:TABLE,td:TABLE_TR,th:TABLE_TR,"*":document.createElement("div")}}function createDom(ns){TABLE||initConstants();var ts=FRAGMENT_REG.test(ns)&&RegExp.$1;(!ts||!(ts in CONTAINERS))&&(ts="*");var rs=CONTAINERS[ts];ns=typeof ns=="string"?ns.replace(/(^\s*)|(\s*$)/g,""):ns,rs.innerHTML=""+ns;var as=rs.childNodes[0];return as&&rs.contains(as)&&rs.removeChild(as),as}function modifyCSS$1(ns,ts){if(ns)for(var rs in ts)ts.hasOwnProperty(rs)&&(ns.style[rs]=ts[rs]);return ns}var colorString$1={exports:{}},colorName$1={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},simpleSwizzle={exports:{}},isArrayish$1=function(ts){return!ts||typeof ts=="string"?!1:ts instanceof Array||Array.isArray(ts)||ts.length>=0&&(ts.splice instanceof Function||Object.getOwnPropertyDescriptor(ts,ts.length-1)&&ts.constructor.name!=="String")},isArrayish=isArrayish$1,concat=Array.prototype.concat,slice=Array.prototype.slice,swizzle$1=simpleSwizzle.exports=function(ts){for(var rs=[],as=0,os=ts.length;as<os;as++){var is=ts[as];isArrayish(is)?rs=concat.call(rs,slice.call(is)):rs.push(is)}return rs};swizzle$1.wrap=function(ns){return function(){return ns(swizzle$1(arguments))}};var simpleSwizzleExports=simpleSwizzle.exports,colorNames=colorName$1,swizzle=simpleSwizzleExports,hasOwnProperty$6=Object.hasOwnProperty,reverseNames=Object.create(null);for(var name in colorNames)hasOwnProperty$6.call(colorNames,name)&&(reverseNames[colorNames[name]]=name);var cs=colorString$1.exports={to:{},get:{}};cs.get=function(ns){var ts=ns.substring(0,3).toLowerCase(),rs,as;switch(ts){case"hsl":rs=cs.get.hsl(ns),as="hsl";break;case"hwb":rs=cs.get.hwb(ns),as="hwb";break;default:rs=cs.get.rgb(ns),as="rgb";break}return rs?{model:as,value:rs}:null};cs.get.rgb=function(ns){if(!ns)return null;var ts=/^#([a-f0-9]{3,4})$/i,rs=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,as=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,os=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,is=/^(\w+)$/,us=[0,0,0,1],ls,fs,hs;if(ls=ns.match(rs)){for(hs=ls[2],ls=ls[1],fs=0;fs<3;fs++){var vs=fs*2;us[fs]=parseInt(ls.slice(vs,vs+2),16)}hs&&(us[3]=parseInt(hs,16)/255)}else if(ls=ns.match(ts)){for(ls=ls[1],hs=ls[3],fs=0;fs<3;fs++)us[fs]=parseInt(ls[fs]+ls[fs],16);hs&&(us[3]=parseInt(hs+hs,16)/255)}else if(ls=ns.match(as)){for(fs=0;fs<3;fs++)us[fs]=parseInt(ls[fs+1],0);ls[4]&&(ls[5]?us[3]=parseFloat(ls[4])*.01:us[3]=parseFloat(ls[4]))}else if(ls=ns.match(os)){for(fs=0;fs<3;fs++)us[fs]=Math.round(parseFloat(ls[fs+1])*2.55);ls[4]&&(ls[5]?us[3]=parseFloat(ls[4])*.01:us[3]=parseFloat(ls[4]))}else return(ls=ns.match(is))?ls[1]==="transparent"?[0,0,0,0]:hasOwnProperty$6.call(colorNames,ls[1])?(us=colorNames[ls[1]],us[3]=1,us):null:null;for(fs=0;fs<3;fs++)us[fs]=clamp$2(us[fs],0,255);return us[3]=clamp$2(us[3],0,1),us};cs.get.hsl=function(ns){if(!ns)return null;var ts=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,rs=ns.match(ts);if(rs){var as=parseFloat(rs[4]),os=(parseFloat(rs[1])%360+360)%360,is=clamp$2(parseFloat(rs[2]),0,100),us=clamp$2(parseFloat(rs[3]),0,100),ls=clamp$2(isNaN(as)?1:as,0,1);return[os,is,us,ls]}return null};cs.get.hwb=function(ns){if(!ns)return null;var ts=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,rs=ns.match(ts);if(rs){var as=parseFloat(rs[4]),os=(parseFloat(rs[1])%360+360)%360,is=clamp$2(parseFloat(rs[2]),0,100),us=clamp$2(parseFloat(rs[3]),0,100),ls=clamp$2(isNaN(as)?1:as,0,1);return[os,is,us,ls]}return null};cs.to.hex=function(){var ns=swizzle(arguments);return"#"+hexDouble(ns[0])+hexDouble(ns[1])+hexDouble(ns[2])+(ns[3]<1?hexDouble(Math.round(ns[3]*255)):"")};cs.to.rgb=function(){var ns=swizzle(arguments);return ns.length<4||ns[3]===1?"rgb("+Math.round(ns[0])+", "+Math.round(ns[1])+", "+Math.round(ns[2])+")":"rgba("+Math.round(ns[0])+", "+Math.round(ns[1])+", "+Math.round(ns[2])+", "+ns[3]+")"};cs.to.rgb.percent=function(){var ns=swizzle(arguments),ts=Math.round(ns[0]/255*100),rs=Math.round(ns[1]/255*100),as=Math.round(ns[2]/255*100);return ns.length<4||ns[3]===1?"rgb("+ts+"%, "+rs+"%, "+as+"%)":"rgba("+ts+"%, "+rs+"%, "+as+"%, "+ns[3]+")"};cs.to.hsl=function(){var ns=swizzle(arguments);return ns.length<4||ns[3]===1?"hsl("+ns[0]+", "+ns[1]+"%, "+ns[2]+"%)":"hsla("+ns[0]+", "+ns[1]+"%, "+ns[2]+"%, "+ns[3]+")"};cs.to.hwb=function(){var ns=swizzle(arguments),ts="";return ns.length>=4&&ns[3]!==1&&(ts=", "+ns[3]),"hwb("+ns[0]+", "+ns[1]+"%, "+ns[2]+"%"+ts+")"};cs.to.keyword=function(ns){return reverseNames[ns.slice(0,3)]};function clamp$2(ns,ts,rs){return Math.min(Math.max(ts,ns),rs)}function hexDouble(ns){var ts=Math.round(ns).toString(16).toUpperCase();return ts.length<2?"0"+ts:ts}var colorStringExports=colorString$1.exports,conversions$2={exports:{}},colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},cssKeywords=colorName,reverseKeywords={};for(var key in cssKeywords)cssKeywords.hasOwnProperty(key)&&(reverseKeywords[cssKeywords[key]]=key);var convert$2=conversions$2.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var model in convert$2)if(convert$2.hasOwnProperty(model)){if(!("channels"in convert$2[model]))throw new Error("missing channels property: "+model);if(!("labels"in convert$2[model]))throw new Error("missing channel labels property: "+model);if(convert$2[model].labels.length!==convert$2[model].channels)throw new Error("channel and label counts mismatch: "+model);var channels=convert$2[model].channels,labels=convert$2[model].labels;delete convert$2[model].channels,delete convert$2[model].labels,Object.defineProperty(convert$2[model],"channels",{value:channels}),Object.defineProperty(convert$2[model],"labels",{value:labels})}convert$2.rgb.hsl=function(ns){var ts=ns[0]/255,rs=ns[1]/255,as=ns[2]/255,os=Math.min(ts,rs,as),is=Math.max(ts,rs,as),us=is-os,ls,fs,hs;return is===os?ls=0:ts===is?ls=(rs-as)/us:rs===is?ls=2+(as-ts)/us:as===is&&(ls=4+(ts-rs)/us),ls=Math.min(ls*60,360),ls<0&&(ls+=360),hs=(os+is)/2,is===os?fs=0:hs<=.5?fs=us/(is+os):fs=us/(2-is-os),[ls,fs*100,hs*100]};convert$2.rgb.hsv=function(ns){var ts,rs,as,os,is,us=ns[0]/255,ls=ns[1]/255,fs=ns[2]/255,hs=Math.max(us,ls,fs),vs=hs-Math.min(us,ls,fs),gs=function(ys){return(hs-ys)/6/vs+1/2};return vs===0?os=is=0:(is=vs/hs,ts=gs(us),rs=gs(ls),as=gs(fs),us===hs?os=as-rs:ls===hs?os=1/3+ts-as:fs===hs&&(os=2/3+rs-ts),os<0?os+=1:os>1&&(os-=1)),[os*360,is*100,hs*100]};convert$2.rgb.hwb=function(ns){var ts=ns[0],rs=ns[1],as=ns[2],os=convert$2.rgb.hsl(ns)[0],is=1/255*Math.min(ts,Math.min(rs,as));return as=1-1/255*Math.max(ts,Math.max(rs,as)),[os,is*100,as*100]};convert$2.rgb.cmyk=function(ns){var ts=ns[0]/255,rs=ns[1]/255,as=ns[2]/255,os,is,us,ls;return ls=Math.min(1-ts,1-rs,1-as),os=(1-ts-ls)/(1-ls)||0,is=(1-rs-ls)/(1-ls)||0,us=(1-as-ls)/(1-ls)||0,[os*100,is*100,us*100,ls*100]};function comparativeDistance(ns,ts){return Math.pow(ns[0]-ts[0],2)+Math.pow(ns[1]-ts[1],2)+Math.pow(ns[2]-ts[2],2)}convert$2.rgb.keyword=function(ns){var ts=reverseKeywords[ns];if(ts)return ts;var rs=1/0,as;for(var os in cssKeywords)if(cssKeywords.hasOwnProperty(os)){var is=cssKeywords[os],us=comparativeDistance(ns,is);us<rs&&(rs=us,as=os)}return as};convert$2.keyword.rgb=function(ns){return cssKeywords[ns]};convert$2.rgb.xyz=function(ns){var ts=ns[0]/255,rs=ns[1]/255,as=ns[2]/255;ts=ts>.04045?Math.pow((ts+.055)/1.055,2.4):ts/12.92,rs=rs>.04045?Math.pow((rs+.055)/1.055,2.4):rs/12.92,as=as>.04045?Math.pow((as+.055)/1.055,2.4):as/12.92;var os=ts*.4124+rs*.3576+as*.1805,is=ts*.2126+rs*.7152+as*.0722,us=ts*.0193+rs*.1192+as*.9505;return[os*100,is*100,us*100]};convert$2.rgb.lab=function(ns){var ts=convert$2.rgb.xyz(ns),rs=ts[0],as=ts[1],os=ts[2],is,us,ls;return rs/=95.047,as/=100,os/=108.883,rs=rs>.008856?Math.pow(rs,1/3):7.787*rs+16/116,as=as>.008856?Math.pow(as,1/3):7.787*as+16/116,os=os>.008856?Math.pow(os,1/3):7.787*os+16/116,is=116*as-16,us=500*(rs-as),ls=200*(as-os),[is,us,ls]};convert$2.hsl.rgb=function(ns){var ts=ns[0]/360,rs=ns[1]/100,as=ns[2]/100,os,is,us,ls,fs;if(rs===0)return fs=as*255,[fs,fs,fs];as<.5?is=as*(1+rs):is=as+rs-as*rs,os=2*as-is,ls=[0,0,0];for(var hs=0;hs<3;hs++)us=ts+1/3*-(hs-1),us<0&&us++,us>1&&us--,6*us<1?fs=os+(is-os)*6*us:2*us<1?fs=is:3*us<2?fs=os+(is-os)*(2/3-us)*6:fs=os,ls[hs]=fs*255;return ls};convert$2.hsl.hsv=function(ns){var ts=ns[0],rs=ns[1]/100,as=ns[2]/100,os=rs,is=Math.max(as,.01),us,ls;return as*=2,rs*=as<=1?as:2-as,os*=is<=1?is:2-is,ls=(as+rs)/2,us=as===0?2*os/(is+os):2*rs/(as+rs),[ts,us*100,ls*100]};convert$2.hsv.rgb=function(ns){var ts=ns[0]/60,rs=ns[1]/100,as=ns[2]/100,os=Math.floor(ts)%6,is=ts-Math.floor(ts),us=255*as*(1-rs),ls=255*as*(1-rs*is),fs=255*as*(1-rs*(1-is));switch(as*=255,os){case 0:return[as,fs,us];case 1:return[ls,as,us];case 2:return[us,as,fs];case 3:return[us,ls,as];case 4:return[fs,us,as];case 5:return[as,us,ls]}};convert$2.hsv.hsl=function(ns){var ts=ns[0],rs=ns[1]/100,as=ns[2]/100,os=Math.max(as,.01),is,us,ls;return ls=(2-rs)*as,is=(2-rs)*os,us=rs*os,us/=is<=1?is:2-is,us=us||0,ls/=2,[ts,us*100,ls*100]};convert$2.hwb.rgb=function(ns){var ts=ns[0]/360,rs=ns[1]/100,as=ns[2]/100,os=rs+as,is,us,ls,fs;os>1&&(rs/=os,as/=os),is=Math.floor(6*ts),us=1-as,ls=6*ts-is,is&1&&(ls=1-ls),fs=rs+ls*(us-rs);var hs,vs,gs;switch(is){default:case 6:case 0:hs=us,vs=fs,gs=rs;break;case 1:hs=fs,vs=us,gs=rs;break;case 2:hs=rs,vs=us,gs=fs;break;case 3:hs=rs,vs=fs,gs=us;break;case 4:hs=fs,vs=rs,gs=us;break;case 5:hs=us,vs=rs,gs=fs;break}return[hs*255,vs*255,gs*255]};convert$2.cmyk.rgb=function(ns){var ts=ns[0]/100,rs=ns[1]/100,as=ns[2]/100,os=ns[3]/100,is,us,ls;return is=1-Math.min(1,ts*(1-os)+os),us=1-Math.min(1,rs*(1-os)+os),ls=1-Math.min(1,as*(1-os)+os),[is*255,us*255,ls*255]};convert$2.xyz.rgb=function(ns){var ts=ns[0]/100,rs=ns[1]/100,as=ns[2]/100,os,is,us;return os=ts*3.2406+rs*-1.5372+as*-.4986,is=ts*-.9689+rs*1.8758+as*.0415,us=ts*.0557+rs*-.204+as*1.057,os=os>.0031308?1.055*Math.pow(os,1/2.4)-.055:os*12.92,is=is>.0031308?1.055*Math.pow(is,1/2.4)-.055:is*12.92,us=us>.0031308?1.055*Math.pow(us,1/2.4)-.055:us*12.92,os=Math.min(Math.max(0,os),1),is=Math.min(Math.max(0,is),1),us=Math.min(Math.max(0,us),1),[os*255,is*255,us*255]};convert$2.xyz.lab=function(ns){var ts=ns[0],rs=ns[1],as=ns[2],os,is,us;return ts/=95.047,rs/=100,as/=108.883,ts=ts>.008856?Math.pow(ts,1/3):7.787*ts+16/116,rs=rs>.008856?Math.pow(rs,1/3):7.787*rs+16/116,as=as>.008856?Math.pow(as,1/3):7.787*as+16/116,os=116*rs-16,is=500*(ts-rs),us=200*(rs-as),[os,is,us]};convert$2.lab.xyz=function(ns){var ts=ns[0],rs=ns[1],as=ns[2],os,is,us;is=(ts+16)/116,os=rs/500+is,us=is-as/200;var ls=Math.pow(is,3),fs=Math.pow(os,3),hs=Math.pow(us,3);return is=ls>.008856?ls:(is-16/116)/7.787,os=fs>.008856?fs:(os-16/116)/7.787,us=hs>.008856?hs:(us-16/116)/7.787,os*=95.047,is*=100,us*=108.883,[os,is,us]};convert$2.lab.lch=function(ns){var ts=ns[0],rs=ns[1],as=ns[2],os,is,us;return os=Math.atan2(as,rs),is=os*360/2/Math.PI,is<0&&(is+=360),us=Math.sqrt(rs*rs+as*as),[ts,us,is]};convert$2.lch.lab=function(ns){var ts=ns[0],rs=ns[1],as=ns[2],os,is,us;return us=as/360*2*Math.PI,os=rs*Math.cos(us),is=rs*Math.sin(us),[ts,os,is]};convert$2.rgb.ansi16=function(ns){var ts=ns[0],rs=ns[1],as=ns[2],os=1 in arguments?arguments[1]:convert$2.rgb.hsv(ns)[2];if(os=Math.round(os/50),os===0)return 30;var is=30+(Math.round(as/255)<<2|Math.round(rs/255)<<1|Math.round(ts/255));return os===2&&(is+=60),is};convert$2.hsv.ansi16=function(ns){return convert$2.rgb.ansi16(convert$2.hsv.rgb(ns),ns[2])};convert$2.rgb.ansi256=function(ns){var ts=ns[0],rs=ns[1],as=ns[2];if(ts===rs&&rs===as)return ts<8?16:ts>248?231:Math.round((ts-8)/247*24)+232;var os=16+36*Math.round(ts/255*5)+6*Math.round(rs/255*5)+Math.round(as/255*5);return os};convert$2.ansi16.rgb=function(ns){var ts=ns%10;if(ts===0||ts===7)return ns>50&&(ts+=3.5),ts=ts/10.5*255,[ts,ts,ts];var rs=(~~(ns>50)+1)*.5,as=(ts&1)*rs*255,os=(ts>>1&1)*rs*255,is=(ts>>2&1)*rs*255;return[as,os,is]};convert$2.ansi256.rgb=function(ns){if(ns>=232){var ts=(ns-232)*10+8;return[ts,ts,ts]}ns-=16;var rs,as=Math.floor(ns/36)/5*255,os=Math.floor((rs=ns%36)/6)/5*255,is=rs%6/5*255;return[as,os,is]};convert$2.rgb.hex=function(ns){var ts=((Math.round(ns[0])&255)<<16)+((Math.round(ns[1])&255)<<8)+(Math.round(ns[2])&255),rs=ts.toString(16).toUpperCase();return"000000".substring(rs.length)+rs};convert$2.hex.rgb=function(ns){var ts=ns.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!ts)return[0,0,0];var rs=ts[0];ts[0].length===3&&(rs=rs.split("").map(function(ls){return ls+ls}).join(""));var as=parseInt(rs,16),os=as>>16&255,is=as>>8&255,us=as&255;return[os,is,us]};convert$2.rgb.hcg=function(ns){var ts=ns[0]/255,rs=ns[1]/255,as=ns[2]/255,os=Math.max(Math.max(ts,rs),as),is=Math.min(Math.min(ts,rs),as),us=os-is,ls,fs;return us<1?ls=is/(1-us):ls=0,us<=0?fs=0:os===ts?fs=(rs-as)/us%6:os===rs?fs=2+(as-ts)/us:fs=4+(ts-rs)/us+4,fs/=6,fs%=1,[fs*360,us*100,ls*100]};convert$2.hsl.hcg=function(ns){var ts=ns[1]/100,rs=ns[2]/100,as=1,os=0;return rs<.5?as=2*ts*rs:as=2*ts*(1-rs),as<1&&(os=(rs-.5*as)/(1-as)),[ns[0],as*100,os*100]};convert$2.hsv.hcg=function(ns){var ts=ns[1]/100,rs=ns[2]/100,as=ts*rs,os=0;return as<1&&(os=(rs-as)/(1-as)),[ns[0],as*100,os*100]};convert$2.hcg.rgb=function(ns){var ts=ns[0]/360,rs=ns[1]/100,as=ns[2]/100;if(rs===0)return[as*255,as*255,as*255];var os=[0,0,0],is=ts%1*6,us=is%1,ls=1-us,fs=0;switch(Math.floor(is)){case 0:os[0]=1,os[1]=us,os[2]=0;break;case 1:os[0]=ls,os[1]=1,os[2]=0;break;case 2:os[0]=0,os[1]=1,os[2]=us;break;case 3:os[0]=0,os[1]=ls,os[2]=1;break;case 4:os[0]=us,os[1]=0,os[2]=1;break;default:os[0]=1,os[1]=0,os[2]=ls}return fs=(1-rs)*as,[(rs*os[0]+fs)*255,(rs*os[1]+fs)*255,(rs*os[2]+fs)*255]};convert$2.hcg.hsv=function(ns){var ts=ns[1]/100,rs=ns[2]/100,as=ts+rs*(1-ts),os=0;return as>0&&(os=ts/as),[ns[0],os*100,as*100]};convert$2.hcg.hsl=function(ns){var ts=ns[1]/100,rs=ns[2]/100,as=rs*(1-ts)+.5*ts,os=0;return as>0&&as<.5?os=ts/(2*as):as>=.5&&as<1&&(os=ts/(2*(1-as))),[ns[0],os*100,as*100]};convert$2.hcg.hwb=function(ns){var ts=ns[1]/100,rs=ns[2]/100,as=ts+rs*(1-ts);return[ns[0],(as-ts)*100,(1-as)*100]};convert$2.hwb.hcg=function(ns){var ts=ns[1]/100,rs=ns[2]/100,as=1-rs,os=as-ts,is=0;return os<1&&(is=(as-os)/(1-os)),[ns[0],os*100,is*100]};convert$2.apple.rgb=function(ns){return[ns[0]/65535*255,ns[1]/65535*255,ns[2]/65535*255]};convert$2.rgb.apple=function(ns){return[ns[0]/255*65535,ns[1]/255*65535,ns[2]/255*65535]};convert$2.gray.rgb=function(ns){return[ns[0]/100*255,ns[0]/100*255,ns[0]/100*255]};convert$2.gray.hsl=convert$2.gray.hsv=function(ns){return[0,0,ns[0]]};convert$2.gray.hwb=function(ns){return[0,100,ns[0]]};convert$2.gray.cmyk=function(ns){return[0,0,0,ns[0]]};convert$2.gray.lab=function(ns){return[ns[0],0,0]};convert$2.gray.hex=function(ns){var ts=Math.round(ns[0]/100*255)&255,rs=(ts<<16)+(ts<<8)+ts,as=rs.toString(16).toUpperCase();return"000000".substring(as.length)+as};convert$2.rgb.gray=function(ns){var ts=(ns[0]+ns[1]+ns[2])/3;return[ts/255*100]};var conversionsExports=conversions$2.exports,conversions$1=conversionsExports;function buildGraph(){for(var ns={},ts=Object.keys(conversions$1),rs=ts.length,as=0;as<rs;as++)ns[ts[as]]={distance:-1,parent:null};return ns}function deriveBFS(ns){var ts=buildGraph(),rs=[ns];for(ts[ns].distance=0;rs.length;)for(var as=rs.pop(),os=Object.keys(conversions$1[as]),is=os.length,us=0;us<is;us++){var ls=os[us],fs=ts[ls];fs.distance===-1&&(fs.distance=ts[as].distance+1,fs.parent=as,rs.unshift(ls))}return ts}function link$1(ns,ts){return function(rs){return ts(ns(rs))}}function wrapConversion(ns,ts){for(var rs=[ts[ns].parent,ns],as=conversions$1[ts[ns].parent][ns],os=ts[ns].parent;ts[os].parent;)rs.unshift(ts[os].parent),as=link$1(conversions$1[ts[os].parent][os],as),os=ts[os].parent;return as.conversion=rs,as}var route$1=function(ns){for(var ts=deriveBFS(ns),rs={},as=Object.keys(ts),os=as.length,is=0;is<os;is++){var us=as[is],ls=ts[us];ls.parent!==null&&(rs[us]=wrapConversion(us,ts))}return rs},conversions=conversionsExports,route=route$1,convert$1={},models=Object.keys(conversions);function wrapRaw(ns){var ts=function(rs){return rs==null?rs:(arguments.length>1&&(rs=Array.prototype.slice.call(arguments)),ns(rs))};return"conversion"in ns&&(ts.conversion=ns.conversion),ts}function wrapRounded(ns){var ts=function(rs){if(rs==null)return rs;arguments.length>1&&(rs=Array.prototype.slice.call(arguments));var as=ns(rs);if(typeof as=="object")for(var os=as.length,is=0;is<os;is++)as[is]=Math.round(as[is]);return as};return"conversion"in ns&&(ts.conversion=ns.conversion),ts}models.forEach(function(ns){convert$1[ns]={},Object.defineProperty(convert$1[ns],"channels",{value:conversions[ns].channels}),Object.defineProperty(convert$1[ns],"labels",{value:conversions[ns].labels});var ts=route(ns),rs=Object.keys(ts);rs.forEach(function(as){var os=ts[as];convert$1[ns][as]=wrapRounded(os),convert$1[ns][as].raw=wrapRaw(os)})});var colorConvert=convert$1,colorString=colorStringExports,convert=colorConvert,_slice=[].slice,skippedModels=["keyword","gray","hex"],hashedModelKeys={};Object.keys(convert).forEach(function(ns){hashedModelKeys[_slice.call(convert[ns].labels).sort().join("")]=ns});var limiters={};function Color(ns,ts){if(!(this instanceof Color))return new Color(ns,ts);if(ts&&ts in skippedModels&&(ts=null),ts&&!(ts in convert))throw new Error("Unknown model: "+ts);var rs,as;if(ns==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(ns instanceof Color)this.model=ns.model,this.color=ns.color.slice(),this.valpha=ns.valpha;else if(typeof ns=="string"){var os=colorString.get(ns);if(os===null)throw new Error("Unable to parse color from string: "+ns);this.model=os.model,as=convert[this.model].channels,this.color=os.value.slice(0,as),this.valpha=typeof os.value[as]=="number"?os.value[as]:1}else if(ns.length){this.model=ts||"rgb",as=convert[this.model].channels;var is=_slice.call(ns,0,as);this.color=zeroArray(is,as),this.valpha=typeof ns[as]=="number"?ns[as]:1}else if(typeof ns=="number")ns&=16777215,this.model="rgb",this.color=[ns>>16&255,ns>>8&255,ns&255],this.valpha=1;else{this.valpha=1;var us=Object.keys(ns);"alpha"in ns&&(us.splice(us.indexOf("alpha"),1),this.valpha=typeof ns.alpha=="number"?ns.alpha:0);var ls=us.sort().join("");if(!(ls in hashedModelKeys))throw new Error("Unable to parse color from object: "+JSON.stringify(ns));this.model=hashedModelKeys[ls];var fs=convert[this.model].labels,hs=[];for(rs=0;rs<fs.length;rs++)hs.push(ns[fs[rs]]);this.color=zeroArray(hs)}if(limiters[this.model])for(as=convert[this.model].channels,rs=0;rs<as;rs++){var vs=limiters[this.model][rs];vs&&(this.color[rs]=vs(this.color[rs]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Color.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(ns){var ts=this.model in colorString.to?this:this.rgb();ts=ts.round(typeof ns=="number"?ns:1);var rs=ts.valpha===1?ts.color:ts.color.concat(this.valpha);return colorString.to[ts.model](rs)},percentString:function(ns){var ts=this.rgb().round(typeof ns=="number"?ns:1),rs=ts.valpha===1?ts.color:ts.color.concat(this.valpha);return colorString.to.rgb.percent(rs)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var ns={},ts=convert[this.model].channels,rs=convert[this.model].labels,as=0;as<ts;as++)ns[rs[as]]=this.color[as];return this.valpha!==1&&(ns.alpha=this.valpha),ns},unitArray:function(){var ns=this.rgb().color;return ns[0]/=255,ns[1]/=255,ns[2]/=255,this.valpha!==1&&ns.push(this.valpha),ns},unitObject:function(){var ns=this.rgb().object();return ns.r/=255,ns.g/=255,ns.b/=255,this.valpha!==1&&(ns.alpha=this.valpha),ns},round:function(ns){return ns=Math.max(ns||0,0),new Color(this.color.map(roundToPlace(ns)).concat(this.valpha),this.model)},alpha:function(ns){return arguments.length?new Color(this.color.concat(Math.max(0,Math.min(1,ns))),this.model):this.valpha},red:getset("rgb",0,maxfn(255)),green:getset("rgb",1,maxfn(255)),blue:getset("rgb",2,maxfn(255)),hue:getset(["hsl","hsv","hsl","hwb","hcg"],0,function(ns){return(ns%360+360)%360}),saturationl:getset("hsl",1,maxfn(100)),lightness:getset("hsl",2,maxfn(100)),saturationv:getset("hsv",1,maxfn(100)),value:getset("hsv",2,maxfn(100)),chroma:getset("hcg",1,maxfn(100)),gray:getset("hcg",2,maxfn(100)),white:getset("hwb",1,maxfn(100)),wblack:getset("hwb",2,maxfn(100)),cyan:getset("cmyk",0,maxfn(100)),magenta:getset("cmyk",1,maxfn(100)),yellow:getset("cmyk",2,maxfn(100)),black:getset("cmyk",3,maxfn(100)),x:getset("xyz",0,maxfn(100)),y:getset("xyz",1,maxfn(100)),z:getset("xyz",2,maxfn(100)),l:getset("lab",0,maxfn(100)),a:getset("lab",1),b:getset("lab",2),keyword:function(ns){return arguments.length?new Color(ns):convert[this.model].keyword(this.color)},hex:function(ns){return arguments.length?new Color(ns):colorString.to.hex(this.rgb().round().color)},rgbNumber:function(){var ns=this.rgb().color;return(ns[0]&255)<<16|(ns[1]&255)<<8|ns[2]&255},luminosity:function(){for(var ns=this.rgb().color,ts=[],rs=0;rs<ns.length;rs++){var as=ns[rs]/255;ts[rs]=as<=.03928?as/12.92:Math.pow((as+.055)/1.055,2.4)}return .2126*ts[0]+.7152*ts[1]+.0722*ts[2]},contrast:function(ns){var ts=this.luminosity(),rs=ns.luminosity();return ts>rs?(ts+.05)/(rs+.05):(rs+.05)/(ts+.05)},level:function(ns){var ts=this.contrast(ns);return ts>=7.1?"AAA":ts>=4.5?"AA":""},isDark:function(){var ns=this.rgb().color,ts=(ns[0]*299+ns[1]*587+ns[2]*114)/1e3;return ts<128},isLight:function(){return!this.isDark()},negate:function(){for(var ns=this.rgb(),ts=0;ts<3;ts++)ns.color[ts]=255-ns.color[ts];return ns},lighten:function(ns){var ts=this.hsl();return ts.color[2]+=ts.color[2]*ns,ts},darken:function(ns){var ts=this.hsl();return ts.color[2]-=ts.color[2]*ns,ts},saturate:function(ns){var ts=this.hsl();return ts.color[1]+=ts.color[1]*ns,ts},desaturate:function(ns){var ts=this.hsl();return ts.color[1]-=ts.color[1]*ns,ts},whiten:function(ns){var ts=this.hwb();return ts.color[1]+=ts.color[1]*ns,ts},blacken:function(ns){var ts=this.hwb();return ts.color[2]+=ts.color[2]*ns,ts},grayscale:function(){var ns=this.rgb().color,ts=ns[0]*.3+ns[1]*.59+ns[2]*.11;return Color.rgb(ts,ts,ts)},fade:function(ns){return this.alpha(this.valpha-this.valpha*ns)},opaquer:function(ns){return this.alpha(this.valpha+this.valpha*ns)},rotate:function(ns){var ts=this.hsl(),rs=ts.color[0];return rs=(rs+ns)%360,rs=rs<0?360+rs:rs,ts.color[0]=rs,ts},mix:function(ns,ts){if(!ns||!ns.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof ns);var rs=ns.rgb(),as=this.rgb(),os=ts===void 0?.5:ts,is=2*os-1,us=rs.alpha()-as.alpha(),ls=((is*us===-1?is:(is+us)/(1+is*us))+1)/2,fs=1-ls;return Color.rgb(ls*rs.red()+fs*as.red(),ls*rs.green()+fs*as.green(),ls*rs.blue()+fs*as.blue(),rs.alpha()*os+as.alpha()*(1-os))}};Object.keys(convert).forEach(function(ns){if(skippedModels.indexOf(ns)===-1){var ts=convert[ns].channels;Color.prototype[ns]=function(){if(this.model===ns)return new Color(this);if(arguments.length)return new Color(arguments,ns);var rs=typeof arguments[ts]=="number"?ts:this.valpha;return new Color(assertArray(convert[this.model][ns].raw(this.color)).concat(rs),ns)},Color[ns]=function(rs){return typeof rs=="number"&&(rs=zeroArray(_slice.call(arguments),ts)),new Color(rs,ns)}}});function roundTo(ns,ts){return Number(ns.toFixed(ts))}function roundToPlace(ns){return function(ts){return roundTo(ts,ns)}}function getset(ns,ts,rs){return ns=Array.isArray(ns)?ns:[ns],ns.forEach(function(as){(limiters[as]||(limiters[as]=[]))[ts]=rs}),ns=ns[0],function(as){var os;return arguments.length?(rs&&(as=rs(as)),os=this[ns](),os.color[ts]=as,os):(os=this[ns]().color[ts],rs&&(os=rs(os)),os)}}function maxfn(ns){return function(ts){return Math.max(0,Math.min(ns,ts))}}function assertArray(ns){return Array.isArray(ns)?ns:[ns]}function zeroArray(ns,ts){for(var rs=0;rs<ts;rs++)typeof ns[rs]!="number"&&(ns[rs]=0);return ns}var color=Color;const color$1=getDefaultExportFromCjs(color);function _typeof$9(ns){"@babel/helpers - typeof";return _typeof$9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ts){return typeof ts}:function(ts){return ts&&typeof Symbol=="function"&&ts.constructor===Symbol&&ts!==Symbol.prototype?"symbol":typeof ts},_typeof$9(ns)}var trimLeft=/^\s+/,trimRight=/\s+$/;function tinycolor(ns,ts){if(ns=ns||"",ts=ts||{},ns instanceof tinycolor)return ns;if(!(this instanceof tinycolor))return new tinycolor(ns,ts);var rs=inputToRGB(ns);this._originalInput=ns,this._r=rs.r,this._g=rs.g,this._b=rs.b,this._a=rs.a,this._roundA=Math.round(100*this._a)/100,this._format=ts.format||rs.format,this._gradientType=ts.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=rs.ok}tinycolor.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ts=this.toRgb();return(ts.r*299+ts.g*587+ts.b*114)/1e3},getLuminance:function(){var ts=this.toRgb(),rs,as,os,is,us,ls;return rs=ts.r/255,as=ts.g/255,os=ts.b/255,rs<=.03928?is=rs/12.92:is=Math.pow((rs+.055)/1.055,2.4),as<=.03928?us=as/12.92:us=Math.pow((as+.055)/1.055,2.4),os<=.03928?ls=os/12.92:ls=Math.pow((os+.055)/1.055,2.4),.2126*is+.7152*us+.0722*ls},setAlpha:function(ts){return this._a=boundAlpha(ts),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var ts=rgbToHsv(this._r,this._g,this._b);return{h:ts.h*360,s:ts.s,v:ts.v,a:this._a}},toHsvString:function(){var ts=rgbToHsv(this._r,this._g,this._b),rs=Math.round(ts.h*360),as=Math.round(ts.s*100),os=Math.round(ts.v*100);return this._a==1?"hsv("+rs+", "+as+"%, "+os+"%)":"hsva("+rs+", "+as+"%, "+os+"%, "+this._roundA+")"},toHsl:function(){var ts=rgbToHsl(this._r,this._g,this._b);return{h:ts.h*360,s:ts.s,l:ts.l,a:this._a}},toHslString:function(){var ts=rgbToHsl(this._r,this._g,this._b),rs=Math.round(ts.h*360),as=Math.round(ts.s*100),os=Math.round(ts.l*100);return this._a==1?"hsl("+rs+", "+as+"%, "+os+"%)":"hsla("+rs+", "+as+"%, "+os+"%, "+this._roundA+")"},toHex:function(ts){return rgbToHex(this._r,this._g,this._b,ts)},toHexString:function(ts){return"#"+this.toHex(ts)},toHex8:function(ts){return rgbaToHex(this._r,this._g,this._b,this._a,ts)},toHex8String:function(ts){return"#"+this.toHex8(ts)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(bound01(this._r,255)*100)+"%",g:Math.round(bound01(this._g,255)*100)+"%",b:Math.round(bound01(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(bound01(this._r,255)*100)+"%, "+Math.round(bound01(this._g,255)*100)+"%, "+Math.round(bound01(this._b,255)*100)+"%)":"rgba("+Math.round(bound01(this._r,255)*100)+"%, "+Math.round(bound01(this._g,255)*100)+"%, "+Math.round(bound01(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:hexNames[rgbToHex(this._r,this._g,this._b,!0)]||!1},toFilter:function(ts){var rs="#"+rgbaToArgbHex(this._r,this._g,this._b,this._a),as=rs,os=this._gradientType?"GradientType = 1, ":"";if(ts){var is=tinycolor(ts);as="#"+rgbaToArgbHex(is._r,is._g,is._b,is._a)}return"progid:DXImageTransform.Microsoft.gradient("+os+"startColorstr="+rs+",endColorstr="+as+")"},toString:function(ts){var rs=!!ts;ts=ts||this._format;var as=!1,os=this._a<1&&this._a>=0,is=!rs&&os&&(ts==="hex"||ts==="hex6"||ts==="hex3"||ts==="hex4"||ts==="hex8"||ts==="name");return is?ts==="name"&&this._a===0?this.toName():this.toRgbString():(ts==="rgb"&&(as=this.toRgbString()),ts==="prgb"&&(as=this.toPercentageRgbString()),(ts==="hex"||ts==="hex6")&&(as=this.toHexString()),ts==="hex3"&&(as=this.toHexString(!0)),ts==="hex4"&&(as=this.toHex8String(!0)),ts==="hex8"&&(as=this.toHex8String()),ts==="name"&&(as=this.toName()),ts==="hsl"&&(as=this.toHslString()),ts==="hsv"&&(as=this.toHsvString()),as||this.toHexString())},clone:function(){return tinycolor(this.toString())},_applyModification:function(ts,rs){var as=ts.apply(null,[this].concat([].slice.call(rs)));return this._r=as._r,this._g=as._g,this._b=as._b,this.setAlpha(as._a),this},lighten:function(){return this._applyModification(_lighten,arguments)},brighten:function(){return this._applyModification(_brighten,arguments)},darken:function(){return this._applyModification(_darken,arguments)},desaturate:function(){return this._applyModification(_desaturate,arguments)},saturate:function(){return this._applyModification(_saturate,arguments)},greyscale:function(){return this._applyModification(_greyscale,arguments)},spin:function(){return this._applyModification(_spin,arguments)},_applyCombination:function(ts,rs){return ts.apply(null,[this].concat([].slice.call(rs)))},analogous:function(){return this._applyCombination(_analogous,arguments)},complement:function(){return this._applyCombination(_complement,arguments)},monochromatic:function(){return this._applyCombination(_monochromatic,arguments)},splitcomplement:function(){return this._applyCombination(_splitcomplement,arguments)},triad:function(){return this._applyCombination(polyad,[3])},tetrad:function(){return this._applyCombination(polyad,[4])}};tinycolor.fromRatio=function(ns,ts){if(_typeof$9(ns)=="object"){var rs={};for(var as in ns)ns.hasOwnProperty(as)&&(as==="a"?rs[as]=ns[as]:rs[as]=convertToPercentage(ns[as]));ns=rs}return tinycolor(ns,ts)};function inputToRGB(ns){var ts={r:0,g:0,b:0},rs=1,as=null,os=null,is=null,us=!1,ls=!1;return typeof ns=="string"&&(ns=stringInputToObject(ns)),_typeof$9(ns)=="object"&&(isValidCSSUnit(ns.r)&&isValidCSSUnit(ns.g)&&isValidCSSUnit(ns.b)?(ts=rgbToRgb(ns.r,ns.g,ns.b),us=!0,ls=String(ns.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(ns.h)&&isValidCSSUnit(ns.s)&&isValidCSSUnit(ns.v)?(as=convertToPercentage(ns.s),os=convertToPercentage(ns.v),ts=hsvToRgb(ns.h,as,os),us=!0,ls="hsv"):isValidCSSUnit(ns.h)&&isValidCSSUnit(ns.s)&&isValidCSSUnit(ns.l)&&(as=convertToPercentage(ns.s),is=convertToPercentage(ns.l),ts=hslToRgb(ns.h,as,is),us=!0,ls="hsl"),ns.hasOwnProperty("a")&&(rs=ns.a)),rs=boundAlpha(rs),{ok:us,format:ns.format||ls,r:Math.min(255,Math.max(ts.r,0)),g:Math.min(255,Math.max(ts.g,0)),b:Math.min(255,Math.max(ts.b,0)),a:rs}}function rgbToRgb(ns,ts,rs){return{r:bound01(ns,255)*255,g:bound01(ts,255)*255,b:bound01(rs,255)*255}}function rgbToHsl(ns,ts,rs){ns=bound01(ns,255),ts=bound01(ts,255),rs=bound01(rs,255);var as=Math.max(ns,ts,rs),os=Math.min(ns,ts,rs),is,us,ls=(as+os)/2;if(as==os)is=us=0;else{var fs=as-os;switch(us=ls>.5?fs/(2-as-os):fs/(as+os),as){case ns:is=(ts-rs)/fs+(ts<rs?6:0);break;case ts:is=(rs-ns)/fs+2;break;case rs:is=(ns-ts)/fs+4;break}is/=6}return{h:is,s:us,l:ls}}function hslToRgb(ns,ts,rs){var as,os,is;ns=bound01(ns,360),ts=bound01(ts,100),rs=bound01(rs,100);function us(hs,vs,gs){return gs<0&&(gs+=1),gs>1&&(gs-=1),gs<1/6?hs+(vs-hs)*6*gs:gs<1/2?vs:gs<2/3?hs+(vs-hs)*(2/3-gs)*6:hs}if(ts===0)as=os=is=rs;else{var ls=rs<.5?rs*(1+ts):rs+ts-rs*ts,fs=2*rs-ls;as=us(fs,ls,ns+1/3),os=us(fs,ls,ns),is=us(fs,ls,ns-1/3)}return{r:as*255,g:os*255,b:is*255}}function rgbToHsv(ns,ts,rs){ns=bound01(ns,255),ts=bound01(ts,255),rs=bound01(rs,255);var as=Math.max(ns,ts,rs),os=Math.min(ns,ts,rs),is,us,ls=as,fs=as-os;if(us=as===0?0:fs/as,as==os)is=0;else{switch(as){case ns:is=(ts-rs)/fs+(ts<rs?6:0);break;case ts:is=(rs-ns)/fs+2;break;case rs:is=(ns-ts)/fs+4;break}is/=6}return{h:is,s:us,v:ls}}function hsvToRgb(ns,ts,rs){ns=bound01(ns,360)*6,ts=bound01(ts,100),rs=bound01(rs,100);var as=Math.floor(ns),os=ns-as,is=rs*(1-ts),us=rs*(1-os*ts),ls=rs*(1-(1-os)*ts),fs=as%6,hs=[rs,us,is,is,ls,rs][fs],vs=[ls,rs,rs,us,is,is][fs],gs=[is,is,ls,rs,rs,us][fs];return{r:hs*255,g:vs*255,b:gs*255}}function rgbToHex(ns,ts,rs,as){var os=[pad2(Math.round(ns).toString(16)),pad2(Math.round(ts).toString(16)),pad2(Math.round(rs).toString(16))];return as&&os[0].charAt(0)==os[0].charAt(1)&&os[1].charAt(0)==os[1].charAt(1)&&os[2].charAt(0)==os[2].charAt(1)?os[0].charAt(0)+os[1].charAt(0)+os[2].charAt(0):os.join("")}function rgbaToHex(ns,ts,rs,as,os){var is=[pad2(Math.round(ns).toString(16)),pad2(Math.round(ts).toString(16)),pad2(Math.round(rs).toString(16)),pad2(convertDecimalToHex(as))];return os&&is[0].charAt(0)==is[0].charAt(1)&&is[1].charAt(0)==is[1].charAt(1)&&is[2].charAt(0)==is[2].charAt(1)&&is[3].charAt(0)==is[3].charAt(1)?is[0].charAt(0)+is[1].charAt(0)+is[2].charAt(0)+is[3].charAt(0):is.join("")}function rgbaToArgbHex(ns,ts,rs,as){var os=[pad2(convertDecimalToHex(as)),pad2(Math.round(ns).toString(16)),pad2(Math.round(ts).toString(16)),pad2(Math.round(rs).toString(16))];return os.join("")}tinycolor.equals=function(ns,ts){return!ns||!ts?!1:tinycolor(ns).toRgbString()==tinycolor(ts).toRgbString()};tinycolor.random=function(){return tinycolor.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function _desaturate(ns,ts){ts=ts===0?0:ts||10;var rs=tinycolor(ns).toHsl();return rs.s-=ts/100,rs.s=clamp01(rs.s),tinycolor(rs)}function _saturate(ns,ts){ts=ts===0?0:ts||10;var rs=tinycolor(ns).toHsl();return rs.s+=ts/100,rs.s=clamp01(rs.s),tinycolor(rs)}function _greyscale(ns){return tinycolor(ns).desaturate(100)}function _lighten(ns,ts){ts=ts===0?0:ts||10;var rs=tinycolor(ns).toHsl();return rs.l+=ts/100,rs.l=clamp01(rs.l),tinycolor(rs)}function _brighten(ns,ts){ts=ts===0?0:ts||10;var rs=tinycolor(ns).toRgb();return rs.r=Math.max(0,Math.min(255,rs.r-Math.round(255*-(ts/100)))),rs.g=Math.max(0,Math.min(255,rs.g-Math.round(255*-(ts/100)))),rs.b=Math.max(0,Math.min(255,rs.b-Math.round(255*-(ts/100)))),tinycolor(rs)}function _darken(ns,ts){ts=ts===0?0:ts||10;var rs=tinycolor(ns).toHsl();return rs.l-=ts/100,rs.l=clamp01(rs.l),tinycolor(rs)}function _spin(ns,ts){var rs=tinycolor(ns).toHsl(),as=(rs.h+ts)%360;return rs.h=as<0?360+as:as,tinycolor(rs)}function _complement(ns){var ts=tinycolor(ns).toHsl();return ts.h=(ts.h+180)%360,tinycolor(ts)}function polyad(ns,ts){if(isNaN(ts)||ts<=0)throw new Error("Argument to polyad must be a positive number");for(var rs=tinycolor(ns).toHsl(),as=[tinycolor(ns)],os=360/ts,is=1;is<ts;is++)as.push(tinycolor({h:(rs.h+is*os)%360,s:rs.s,l:rs.l}));return as}function _splitcomplement(ns){var ts=tinycolor(ns).toHsl(),rs=ts.h;return[tinycolor(ns),tinycolor({h:(rs+72)%360,s:ts.s,l:ts.l}),tinycolor({h:(rs+216)%360,s:ts.s,l:ts.l})]}function _analogous(ns,ts,rs){ts=ts||6,rs=rs||30;var as=tinycolor(ns).toHsl(),os=360/rs,is=[tinycolor(ns)];for(as.h=(as.h-(os*ts>>1)+720)%360;--ts;)as.h=(as.h+os)%360,is.push(tinycolor(as));return is}function _monochromatic(ns,ts){ts=ts||6;for(var rs=tinycolor(ns).toHsv(),as=rs.h,os=rs.s,is=rs.v,us=[],ls=1/ts;ts--;)us.push(tinycolor({h:as,s:os,v:is})),is=(is+ls)%1;return us}tinycolor.mix=function(ns,ts,rs){rs=rs===0?0:rs||50;var as=tinycolor(ns).toRgb(),os=tinycolor(ts).toRgb(),is=rs/100,us={r:(os.r-as.r)*is+as.r,g:(os.g-as.g)*is+as.g,b:(os.b-as.b)*is+as.b,a:(os.a-as.a)*is+as.a};return tinycolor(us)};tinycolor.readability=function(ns,ts){var rs=tinycolor(ns),as=tinycolor(ts);return(Math.max(rs.getLuminance(),as.getLuminance())+.05)/(Math.min(rs.getLuminance(),as.getLuminance())+.05)};tinycolor.isReadable=function(ns,ts,rs){var as=tinycolor.readability(ns,ts),os,is;switch(is=!1,os=validateWCAG2Parms(rs),os.level+os.size){case"AAsmall":case"AAAlarge":is=as>=4.5;break;case"AAlarge":is=as>=3;break;case"AAAsmall":is=as>=7;break}return is};tinycolor.mostReadable=function(ns,ts,rs){var as=null,os=0,is,us,ls,fs;rs=rs||{},us=rs.includeFallbackColors,ls=rs.level,fs=rs.size;for(var hs=0;hs<ts.length;hs++)is=tinycolor.readability(ns,ts[hs]),is>os&&(os=is,as=tinycolor(ts[hs]));return tinycolor.isReadable(ns,as,{level:ls,size:fs})||!us?as:(rs.includeFallbackColors=!1,tinycolor.mostReadable(ns,["#fff","#000"],rs))};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},hexNames=tinycolor.hexNames=flip(names);function flip(ns){var ts={};for(var rs in ns)ns.hasOwnProperty(rs)&&(ts[ns[rs]]=rs);return ts}function boundAlpha(ns){return ns=parseFloat(ns),(isNaN(ns)||ns<0||ns>1)&&(ns=1),ns}function bound01(ns,ts){isOnePointZero(ns)&&(ns="100%");var rs=isPercentage(ns);return ns=Math.min(ts,Math.max(0,parseFloat(ns))),rs&&(ns=parseInt(ns*ts,10)/100),Math.abs(ns-ts)<1e-6?1:ns%ts/parseFloat(ts)}function clamp01(ns){return Math.min(1,Math.max(0,ns))}function parseIntFromHex(ns){return parseInt(ns,16)}function isOnePointZero(ns){return typeof ns=="string"&&ns.indexOf(".")!=-1&&parseFloat(ns)===1}function isPercentage(ns){return typeof ns=="string"&&ns.indexOf("%")!=-1}function pad2(ns){return ns.length==1?"0"+ns:""+ns}function convertToPercentage(ns){return ns<=1&&(ns=ns*100+"%"),ns}function convertDecimalToHex(ns){return Math.round(parseFloat(ns)*255).toString(16)}function convertHexToDecimal(ns){return parseIntFromHex(ns)/255}var matchers=function(){var ns="[-\\+]?\\d+%?",ts="[-\\+]?\\d*\\.\\d+%?",rs="(?:"+ts+")|(?:"+ns+")",as="[\\s|\\(]+("+rs+")[,|\\s]+("+rs+")[,|\\s]+("+rs+")\\s*\\)?",os="[\\s|\\(]+("+rs+")[,|\\s]+("+rs+")[,|\\s]+("+rs+")[,|\\s]+("+rs+")\\s*\\)?";return{CSS_UNIT:new RegExp(rs),rgb:new RegExp("rgb"+as),rgba:new RegExp("rgba"+os),hsl:new RegExp("hsl"+as),hsla:new RegExp("hsla"+os),hsv:new RegExp("hsv"+as),hsva:new RegExp("hsva"+os),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function isValidCSSUnit(ns){return!!matchers.CSS_UNIT.exec(ns)}function stringInputToObject(ns){ns=ns.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var ts=!1;if(names[ns])ns=names[ns],ts=!0;else if(ns=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var rs;return(rs=matchers.rgb.exec(ns))?{r:rs[1],g:rs[2],b:rs[3]}:(rs=matchers.rgba.exec(ns))?{r:rs[1],g:rs[2],b:rs[3],a:rs[4]}:(rs=matchers.hsl.exec(ns))?{h:rs[1],s:rs[2],l:rs[3]}:(rs=matchers.hsla.exec(ns))?{h:rs[1],s:rs[2],l:rs[3],a:rs[4]}:(rs=matchers.hsv.exec(ns))?{h:rs[1],s:rs[2],v:rs[3]}:(rs=matchers.hsva.exec(ns))?{h:rs[1],s:rs[2],v:rs[3],a:rs[4]}:(rs=matchers.hex8.exec(ns))?{r:parseIntFromHex(rs[1]),g:parseIntFromHex(rs[2]),b:parseIntFromHex(rs[3]),a:convertHexToDecimal(rs[4]),format:ts?"name":"hex8"}:(rs=matchers.hex6.exec(ns))?{r:parseIntFromHex(rs[1]),g:parseIntFromHex(rs[2]),b:parseIntFromHex(rs[3]),format:ts?"name":"hex"}:(rs=matchers.hex4.exec(ns))?{r:parseIntFromHex(rs[1]+""+rs[1]),g:parseIntFromHex(rs[2]+""+rs[2]),b:parseIntFromHex(rs[3]+""+rs[3]),a:convertHexToDecimal(rs[4]+""+rs[4]),format:ts?"name":"hex8"}:(rs=matchers.hex3.exec(ns))?{r:parseIntFromHex(rs[1]+""+rs[1]),g:parseIntFromHex(rs[2]+""+rs[2]),b:parseIntFromHex(rs[3]+""+rs[3]),format:ts?"name":"hex"}:!1}function validateWCAG2Parms(ns){var ts,rs;return ns=ns||{level:"AA",size:"small"},ts=(ns.level||"AA").toUpperCase(),rs=(ns.size||"small").toLowerCase(),ts!=="AA"&&ts!=="AAA"&&(ts="AA"),rs!=="small"&&rs!=="large"&&(rs="small"),{level:ts,size:rs}}var hueStep=2,saturationStep=.16,saturationStep2=.05,brightnessStep1=.05,brightnessStep2=.15,lightColorCount=5,darkColorCount=4,darkColorMap=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function getHue(ns,ts,rs){var as;return Math.round(ns.h)>=60&&Math.round(ns.h)<=240?as=rs?Math.round(ns.h)-hueStep*ts:Math.round(ns.h)+hueStep*ts:as=rs?Math.round(ns.h)+hueStep*ts:Math.round(ns.h)-hueStep*ts,as<0?as+=360:as>=360&&(as-=360),as}function getSaturation(ns,ts,rs){if(ns.h===0&&ns.s===0)return ns.s;var as;return rs?as=ns.s-saturationStep*ts:ts===darkColorCount?as=ns.s+saturationStep:as=ns.s+saturationStep2*ts,as>1&&(as=1),rs&&ts===lightColorCount&&as>.1&&(as=.1),as<.06&&(as=.06),Number(as.toFixed(2))}function getValue$1(ns,ts,rs){var as;return rs?as=ns.v+brightnessStep1*ts:as=ns.v-brightnessStep2*ts,as>1&&(as=1),Number(as.toFixed(2))}function generate(ns){for(var ts=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rs=[],as=tinycolor(ns),os=lightColorCount;os>0;os-=1){var is=as.toHsv(),us=tinycolor({h:getHue(is,os,!0),s:getSaturation(is,os,!0),v:getValue$1(is,os,!0)}).toHexString();rs.push(us)}rs.push(as.toHexString());for(var ls=1;ls<=darkColorCount;ls+=1){var fs=as.toHsv(),hs=tinycolor({h:getHue(fs,ls),s:getSaturation(fs,ls),v:getValue$1(fs,ls)}).toHexString();rs.push(hs)}return ts.theme==="dark"?darkColorMap.map(function(vs){var gs=vs.index,ys=vs.opacity,xs=tinycolor.mix(ts.backgroundColor||"#141414",rs[gs],ys*100).toHexString();return xs}):rs}var presetPrimaryColors={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},presetPalettes={},presetDarkPalettes={};Object.keys(presetPrimaryColors).forEach(function(ns){presetPalettes[ns]=generate(presetPrimaryColors[ns]),presetPalettes[ns].primary=presetPalettes[ns][5],presetDarkPalettes[ns]=generate(presetPrimaryColors[ns],{theme:"dark",backgroundColor:"#141414"}),presetDarkPalettes[ns].primary=presetDarkPalettes[ns][5]});var mixColor=function(ts,rs,as){var os=color$1(ts),is=color$1(rs);return color$1([(1-as)*os.red()+as*is.red(),(1-as)*os.green()+as*is.green(),(1-as)*os.blue()+as*is.blue()]).rgb()},getColorsWithDefaultTheme=function(ts,rs,as){rs===void 0&&(rs="#fff"),as===void 0&&(as="rgb(150, 150, 150)");var os=mixColor(rs,ts,.05).rgb().toString(),is=mixColor(rs,ts,.1).rgb().toString(),us=mixColor(rs,ts,.2).rgb().toString(),ls=mixColor(rs,ts,.4).rgb().toString(),fs=mixColor(rs,as,.02).rgb().toString(),hs=mixColor(rs,as,.05).rgb().toString(),vs=mixColor(rs,as,.1).rgb().toString(),gs=mixColor(rs,as,.2).rgb().toString(),ys=mixColor(rs,as,.3).rgb().toString(),xs=generate(ts,{theme:"default",backgroundColor:rs}),ms=color$1(ts).hex().toLowerCase(),Ss=xs.indexOf(ms),Ms=ts;return Ss!==-1&&(Ms=xs[Ss+1]),{mainStroke:ts,mainFill:is,activeStroke:ts,activeFill:os,inactiveStroke:ls,inactiveFill:os,selectedStroke:ts,selectedFill:rs,highlightStroke:Ms,highlightFill:us,disableStroke:ys,disableFill:hs,edgeMainStroke:ys,edgeActiveStroke:ts,edgeInactiveStroke:gs,edgeSelectedStroke:ts,edgeHighlightStroke:ts,edgeDisableStroke:vs,comboMainStroke:ys,comboMainFill:fs,comboActiveStroke:ts,comboActiveFill:os,comboInactiveStroke:ys,comboInactiveFill:fs,comboSelectedStroke:ts,comboSelectedFill:fs,comboHighlightStroke:Ms,comboHighlightFill:fs,comboDisableStroke:gs,comboDisableFill:hs}},getColorsWithDarkTheme=function(ts,rs,as){rs===void 0&&(rs="#fff"),as===void 0&&(as="#777");var os=mixColor(rs,ts,.2).rgb().toString(),is=mixColor(rs,ts,.3).rgb().toString(),us=mixColor(rs,ts,.6).rgb().toString(),ls=mixColor(rs,ts,.8).rgb().toString(),fs=mixColor(rs,as,.2).rgb().toString(),hs=mixColor(rs,as,.25).rgb().toString(),vs=mixColor(rs,as,.3).rgb().toString(),gs=mixColor(rs,as,.4).rgb().toString(),ys=mixColor(rs,as,.5).rgb().toString(),xs=generate(ts,{theme:"dark",backgroundColor:rs}),ms=color$1(ts).hex().toLowerCase(),Ss=xs.indexOf(ms),Ms=ts;return Ss!==-1&&(Ms=xs[Ss+1]),{mainStroke:ls,mainFill:os,activeStroke:ts,activeFill:is,inactiveStroke:ls,inactiveFill:os,selectedStroke:ts,selectedFill:os,highlightStroke:ts,highlightFill:us,disableStroke:ys,disableFill:hs,edgeMainStroke:as,edgeActiveStroke:ts,edgeInactiveStroke:as,edgeSelectedStroke:ts,edgeHighlightStroke:ts,edgeDisableStroke:vs,comboMainStroke:gs,comboMainFill:hs,comboActiveStroke:ts,comboActiveFill:fs,comboInactiveStroke:gs,comboInactiveFill:hs,comboSelectedStroke:ts,comboSelectedFill:fs,comboHighlightStroke:Ms,comboHighlightFill:hs,comboDisableStroke:gs,comboDisableFill:fs}},getColorsWithSubjectColor=function(ts,rs,as,os){return rs===void 0&&(rs="#fff"),as===void 0&&(as="default"),as==="default"?getColorsWithDefaultTheme(ts,rs,"rgb(150, 150, 150)"):getColorsWithDarkTheme(ts,rs,"#777")},getColorSetsBySubjectColors=function(ts,rs,as,os){rs===void 0&&(rs="#fff"),as===void 0&&(as="default");var is=[];return ts.forEach(function(us){is.push(getColorsWithSubjectColor(us,rs,as))}),is};const ColorUtil=Object.freeze(Object.defineProperty({__proto__:null,getColorSetsBySubjectColors,getColorsWithSubjectColor,mixColor},Symbol.toStringTag,{value:"Module"}));var subjectColor$1="rgb(95, 149, 255)",backColor$1="rgb(255, 255, 255)",textColor$1="rgb(0, 0, 0)",colorSet$1=getColorsWithSubjectColor(subjectColor$1,backColor$1);const Global$1={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:colorSet$1.mainStroke,fill:colorSet$1.mainFill},size:20,color:colorSet$1.mainStroke,linkPoints:{size:8,lineWidth:1,fill:colorSet$1.activeFill,stroke:colorSet$1.activeStroke}},nodeStateStyles:{active:{fill:colorSet$1.activeFill,stroke:colorSet$1.activeStroke,lineWidth:2,shadowColor:colorSet$1.mainStroke,shadowBlur:10},selected:{fill:colorSet$1.selectedFill,stroke:colorSet$1.selectedStroke,lineWidth:4,shadowColor:colorSet$1.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:colorSet$1.highlightFill,stroke:colorSet$1.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:colorSet$1.inactiveFill,stroke:colorSet$1.inactiveStroke,lineWidth:1},disable:{fill:colorSet$1.disableFill,stroke:colorSet$1.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:textColor$1,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:colorSet$1.edgeMainStroke,lineAppendWidth:2},color:colorSet$1.edgeMainStroke},edgeStateStyles:{active:{stroke:colorSet$1.edgeActiveStroke,lineWidth:1},selected:{stroke:colorSet$1.edgeSelectedStroke,lineWidth:2,shadowColor:colorSet$1.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:colorSet$1.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:colorSet$1.edgeInactiveStroke,lineWidth:1},disable:{stroke:colorSet$1.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:textColor$1,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:colorSet$1.comboMainFill,lineWidth:1,stroke:colorSet$1.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:colorSet$1.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:colorSet$1.comboActiveStroke,lineWidth:1,fill:colorSet$1.comboActiveFill},selected:{stroke:colorSet$1.comboSelectedStroke,lineWidth:2,fill:colorSet$1.comboSelectedFill,shadowColor:colorSet$1.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:colorSet$1.comboHighlightStroke,lineWidth:2,fill:colorSet$1.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:colorSet$1.comboInactiveStroke,fill:colorSet$1.comboInactiveFill,lineWidth:1},disable:{stroke:colorSet$1.comboDisableStroke,fill:colorSet$1.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};var cloneGElement=function(ts){var rs=ts.clone();return applyCloneClip(ts,rs),rs},applyCloneClip=function ns(ts,rs){var as;ts.isGroup()&&rs.isGroup()&&((as=ts.get("children"))===null||as===void 0||as.forEach(function(ls,fs){var hs=rs.get("children")[fs];ns(ls,hs)}));var os=ts.get("type"),is=rs.get("type");if(!(os!=="image"||is!=="image")){var us=ts.get("clipShape");us&&rs.setClip({type:us.get("type"),attrs:us.attr()})}},cloneEvent$2=Util$1.cloneEvent,isViewportChanged$1=Util$1.isViewportChanged,EventController$1=function(ns){__extends$x(ts,ns);function ts(rs){var as=ns.call(this,rs)||this;return as.extendEvents=[],as.dragging=!1,as.mousedown=!1,as.preItem=null,as.destroy(),as.graph=rs,as.destroyed=!1,as.initEvents(),as}return ts.prototype.initEvents=function(){var rs=this,as=rs.graph,os=rs.extendEvents,is=os===void 0?[]:os,us=as.get("canvas"),ls=us.get("el"),fs=wrapBehavior$1(this,"onCanvasEvents"),hs=wrapBehavior$1(this,"onExtendEvents"),vs=wrapBehavior$1(this,"onWheelEvent");us.off("*").on("*",fs),this.canvasHandler=fs,is.push(addEventListener(ls,"wheel",vs)),typeof window<"u"&&(is.push(addEventListener(window,"keydown",hs)),is.push(addEventListener(window,"keyup",hs)),is.push(addEventListener(window,"focus",hs))),this.resetHandler&&as.off("afterchangedata",this.resetHandler),this.resetHandler=wrapBehavior$1(this,"resetStatus"),as.on("afterchangedata",this.resetHandler)},ts.getItemRoot=function(rs){for(;rs&&!rs.get("item");)rs=rs.get("parent");return rs},ts.prototype.onCanvasEvents=function(rs){var as=this,os=this.graph,is=os.get("canvas"),us=rs.target,ls=rs.type;switch(ls){case"drag":this.onCanvasEvents(Object.assign({},rs,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},rs,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return as.mousedown=!1});break;case"click":if(!this.mousedown)return;break}rs.canvasX=rs.x,rs.canvasY=rs.y;var fs={x:rs.canvasX,y:rs.canvasY},hs=os.get("group"),vs=hs.getMatrix();if(vs||(vs=[1,0,0,0,1,0,0,0,1]),isViewportChanged$1(vs)&&(fs=os.getPointByClient(rs.clientX,rs.clientY)),rs.x=fs.x,rs.y=fs.y,rs.currentTarget=os,us===is){(ls==="mousemove"||ls==="mouseleave")&&this.handleMouseMove(rs,"canvas"),rs.target=is,rs.item=null,os.emit(ls,rs),os.emit("canvas:".concat(ls),rs);return}var gs=ts.getItemRoot(us);if(!gs){os.emit(ls,rs);return}var ys=gs.get("item");if(!ys.destroyed){var xs=ys.getType();if(rs.target=us,rs.item=ys,rs.canvasX===rs.x&&rs.canvasY===rs.y){var ms=os.getCanvasByPoint(rs.x,rs.y);rs.canvasX=ms.x,rs.canvasY=ms.y}rs.name&&!rs.name.includes(":")?(os.emit("".concat(xs,":").concat(ls),rs),os.emit(ls,rs)):rs.name&&os.emit(rs.name,rs),ls==="dragstart"&&(this.dragging=!0),ls==="dragend"&&(this.dragging=!1),ls==="mousemove"&&this.handleMouseMove(rs,xs)}},ts.prototype.onExtendEvents=function(rs){this.graph.emit(rs.type,rs)},ts.prototype.onWheelEvent=function(rs){isNil$2(rs.wheelDelta)&&(rs.wheelDelta=-rs.detail),this.graph.emit("wheel",rs)},ts.prototype.handleMouseMove=function(rs,as){var os=this,is=os.graph,us=os.preItem,ls=is.get("canvas"),fs=rs.target===ls?null:rs.item;rs=cloneEvent$2(rs),us&&us!==fs&&!us.destroyed&&(rs.item=us,this.emitCustomEvent(us.getType(),"mouseleave",rs),this.dragging&&this.emitCustomEvent(us.getType(),"dragleave",rs)),fs&&us!==fs&&(rs.item=fs,this.emitCustomEvent(as,"mouseenter",rs),this.dragging&&this.emitCustomEvent(as,"dragenter",rs)),this.preItem=fs},ts.prototype.emitCustomEvent=function(rs,as,os){os.type=as,this.graph.emit("".concat(rs,":").concat(as),os)},ts.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},ts.prototype.destroy=function(){var rs=this,as=rs.graph,os=rs.canvasHandler,is=rs.extendEvents,us=as.get("canvas");us.off("*",os),each$1(is,function(ls){ls.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},ts}(EventController$2),lib={},registy={},base$1={};Object.defineProperty(base$1,"__esModule",{value:!0});base$1.Base=void 0;var Base=function(){function ns(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return ns.prototype.layout=function(ts){return this.init(ts),this.execute(!0)},ns.prototype.init=function(ts){this.nodes=ts.nodes||[],this.edges=ts.edges||[],this.combos=ts.combos||[],this.comboEdges=ts.comboEdges||[],this.hiddenNodes=ts.hiddenNodes||[],this.hiddenEdges=ts.hiddenEdges||[],this.hiddenCombos=ts.hiddenCombos||[],this.vedges=ts.vedges||[]},ns.prototype.execute=function(ts){},ns.prototype.executeWithWorker=function(){},ns.prototype.getDefaultCfg=function(){return{}},ns.prototype.updateCfg=function(ts){ts&&Object.assign(this,ts)},ns.prototype.getType=function(){return"base"},ns.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},ns}();base$1.Base=Base;var util$2={},string={};Object.defineProperty(string,"__esModule",{value:!0});string.camelize=string.isString=void 0;var isString$1=function(ns){return typeof ns=="string"};string.isString=isString$1;var cacheStringFunction=function(ns){var ts=Object.create(null);return function(rs){var as=ts[rs];return as||(ts[rs]=ns(rs))}},camelizeRE=/-(\w)/g;string.camelize=cacheStringFunction(function(ns){return ns.replace(camelizeRE,function(ts,rs){return rs?rs.toUpperCase():""})});var array={};Object.defineProperty(array,"__esModule",{value:!0});array.isArray=void 0;array.isArray=Array.isArray;var number={};(function(ns){Object.defineProperty(ns,"__esModule",{value:!0}),ns.toNumber=ns.isNaN=ns.isNumber=void 0;var ts=function(os){return typeof os=="number"};ns.isNumber=ts;var rs=function(os){return Number.isNaN(Number(os))};ns.isNaN=rs;var as=function(os){var is=parseFloat(os);return(0,ns.isNaN)(is)?os:is};ns.toNumber=as})(number);var math={},object={};(function(ns){var ts=commonjsGlobal&&commonjsGlobal.__assign||function(){return ts=Object.assign||function(os){for(var is,us=1,ls=arguments.length;us<ls;us++){is=arguments[us];for(var fs in is)Object.prototype.hasOwnProperty.call(is,fs)&&(os[fs]=is[fs])}return os},ts.apply(this,arguments)};Object.defineProperty(ns,"__esModule",{value:!0}),ns.clone=ns.isObject=void 0;var rs=function(os){return os!==null&&typeof os=="object"};ns.isObject=rs;var as=function(os){if(os===null)return os;if(os instanceof Date)return new Date(os.getTime());if(os instanceof Array){var is=[];return os.forEach(function(ls){is.push(ls)}),is.map(function(ls){return(0,ns.clone)(ls)})}if(typeof os=="object"&&Object.keys(os).length){var us=ts({},os);return Object.keys(us).forEach(function(ls){us[ls]=(0,ns.clone)(us[ls])}),us}return os};ns.clone=as})(object);(function(ns){Object.defineProperty(ns,"__esModule",{value:!0}),ns.getCoreNodeAndRelativeLeafNodes=ns.getAvgNodePosition=ns.getLayoutBBox=ns.traverseTreeUp=ns.scaleMatrix=ns.getAdjMatrix=ns.floydWarshall=ns.getDegreeMap=ns.getDegree=ns.getEdgeTerminal=void 0;var ts=array,rs=number,as=object,os=function(bs,Cs){var As=bs[Cs];return(0,as.isObject)(As)?As.cell:As};ns.getEdgeTerminal=os;var is=function(bs,Cs,As){for(var Is=[],ks=0;ks<bs;ks++)Is[ks]={in:0,out:0,all:0};return As&&As.forEach(function(Ps){var Ds=(0,ns.getEdgeTerminal)(Ps,"source"),Fs=(0,ns.getEdgeTerminal)(Ps,"target");Ds&&Is[Cs[Ds]]&&(Is[Cs[Ds]].out+=1,Is[Cs[Ds]].all+=1),Fs&&Is[Cs[Fs]]&&(Is[Cs[Fs]].in+=1,Is[Cs[Fs]].all+=1)}),Is};ns.getDegree=is;var us=function(bs,Cs){var As={};return bs.forEach(function(Is){As[Is.id]={in:0,out:0,all:0}}),Cs&&Cs.forEach(function(Is){var ks=(0,ns.getEdgeTerminal)(Is,"source"),Ps=(0,ns.getEdgeTerminal)(Is,"target");ks&&(As[ks].out+=1,As[ks].all+=1),Ps&&(As[Ps].in+=1,As[Ps].all+=1)}),As};ns.getDegreeMap=us;var ls=function(bs){for(var Cs=[],As=bs.length,Is=0;Is<As;Is+=1){Cs[Is]=[];for(var ks=0;ks<As;ks+=1)Is===ks?Cs[Is][ks]=0:bs[Is][ks]===0||!bs[Is][ks]?Cs[Is][ks]=1/0:Cs[Is][ks]=bs[Is][ks]}for(var Ps=0;Ps<As;Ps+=1)for(var Is=0;Is<As;Is+=1)for(var ks=0;ks<As;ks+=1)Cs[Is][ks]>Cs[Is][Ps]+Cs[Ps][ks]&&(Cs[Is][ks]=Cs[Is][Ps]+Cs[Ps][ks]);return Cs};ns.floydWarshall=ls;var fs=function(bs,Cs){var As=bs.nodes,Is=bs.edges,ks=[],Ps={};if(!As)throw new Error("invalid nodes data!");return As&&As.forEach(function(Ds,Fs){Ps[Ds.id]=Fs;var Rs=[];ks.push(Rs)}),Is==null||Is.forEach(function(Ds){var Fs=(0,ns.getEdgeTerminal)(Ds,"source"),Rs=(0,ns.getEdgeTerminal)(Ds,"target"),js=Ps[Fs],zs=Ps[Rs];js===void 0||zs===void 0||(ks[js][zs]=1,Cs||(ks[zs][js]=1))}),ks};ns.getAdjMatrix=fs;var hs=function(bs,Cs){var As=[];return bs.forEach(function(Is){var ks=[];Is.forEach(function(Ps){ks.push(Ps*Cs)}),As.push(ks)}),As};ns.scaleMatrix=hs;var vs=function(bs,Cs){if(bs&&bs.children){for(var As=bs.children.length-1;As>=0;As--)if(!vs(bs.children[As],Cs))return}return!!Cs(bs)},gs=function(bs,Cs){typeof Cs=="function"&&vs(bs,Cs)};ns.traverseTreeUp=gs;var ys=function(bs){var Cs=1/0,As=1/0,Is=-1/0,ks=-1/0;return bs.forEach(function(Ps){var Ds=Ps.size;(0,ts.isArray)(Ds)?Ds.length===1&&(Ds=[Ds[0],Ds[0]]):(0,rs.isNumber)(Ds)?Ds=[Ds,Ds]:(Ds===void 0||isNaN(Ds))&&(Ds=[30,30]);var Fs=[Ds[0]/2,Ds[1]/2],Rs=Ps.x-Fs[0],js=Ps.x+Fs[0],zs=Ps.y-Fs[1],Us=Ps.y+Fs[1];Cs>Rs&&(Cs=Rs),As>zs&&(As=zs),Is<js&&(Is=js),ks<Us&&(ks=Us)}),{minX:Cs,minY:As,maxX:Is,maxY:ks}};ns.getLayoutBBox=ys;var xs=function(bs){var Cs={x:0,y:0};bs.forEach(function(Is){Cs.x+=Is.x||0,Cs.y+=Is.y||0});var As=bs.length||1;return{x:Cs.x/As,y:Cs.y/As}};ns.getAvgNodePosition=xs;var ms=function(bs,Cs,As){var Is,ks;return bs==="source"?((Is=As==null?void 0:As.find(function(Ps){return Ps.target===Cs.id}))===null||Is===void 0?void 0:Is.source)||{}:((ks=As==null?void 0:As.find(function(Ps){return Ps.source===Cs.id}))===null||ks===void 0?void 0:ks.target)||{}},Ss=function(bs,Cs,As){var Is=[];switch(bs){case"source":Is=As==null?void 0:As.filter(function(Ps){return Ps.source===Cs.id}).map(function(Ps){return Ps.target});break;case"target":Is=As==null?void 0:As.filter(function(Ps){return Ps.target===Cs.id}).map(function(Ps){return Ps.source});break;case"both":Is=As==null?void 0:As.filter(function(Ps){return Ps.source===Cs.id}).map(function(Ps){return Ps.target}).concat(As==null?void 0:As.filter(function(Ps){return Ps.target===Cs.id}).map(function(Ps){return Ps.source}));break}var ks=new Set(Is);return Array.from(ks)},Ms=function(bs,Cs,As,Is,ks){var Ps=As[Cs]||"",Ds=(Is==null?void 0:Is.filter(function(Fs){return Fs[Cs]===Ps}))||[];return bs==="leaf"&&(Ds=Ds.filter(function(Fs){var Rs,js;return((Rs=ks[Fs.id])===null||Rs===void 0?void 0:Rs.in)===0||((js=ks[Fs.id])===null||js===void 0?void 0:js.out)===0})),Ds},$s=function(bs,Cs,As,Is,ks,Ps){var Ds=ks[Cs.id],Fs=Ds.in,Rs=Ds.out,js=Cs,zs=[];Fs===0?(js=ms("source",Cs,As),zs=Ss("both",js,As).map(function(Ys){return Ps[Ys]})):Rs===0&&(js=ms("target",Cs,As),zs=Ss("both",js,As).map(function(Ys){return Ps[Ys]})),zs=zs.filter(function(Ys){return ks[Ys.id]&&(ks[Ys.id].in===0||ks[Ys.id].out===0)});var Us=Ms(bs,Is,Cs,zs,ks);return{coreNode:js,relativeLeafNodes:zs,sameTypeLeafNodes:Us}};ns.getCoreNodeAndRelativeLeafNodes=$s})(math);var _function={},hasRequired_function;function require_function(){return hasRequired_function||(hasRequired_function=1,function(ns){Object.defineProperty(ns,"__esModule",{value:!0}),ns.getFuncByUnknownType=ns.getFunc=ns.isFunction=void 0;var ts=requireUtil(),rs=number,as=function(us){return typeof us=="function"};ns.isFunction=as;var os=function(us,ls,fs){var hs;return fs?hs=fs:(0,rs.isNumber)(us)?hs=function(){return us}:hs=function(){return ls},hs};ns.getFunc=os;var is=function(us,ls,fs){return fs===void 0&&(fs=!0),!ls&&ls!==0?function(hs){return hs.size?(0,ts.isArray)(hs.size)?hs.size[0]>hs.size[1]?hs.size[0]:hs.size[1]:(0,ts.isObject)(hs.size)?hs.size.width>hs.size.height?hs.size.width:hs.size.height:hs.size:us}:(0,ns.isFunction)(ls)?ls:(0,rs.isNumber)(ls)?function(){return ls}:(0,ts.isArray)(ls)?function(){if(fs){var hs=Math.max.apply(Math,ls);return isNaN(hs)?us:hs}return ls}:(0,ts.isObject)(ls)?function(){if(fs){var hs=Math.max(ls.width,ls.height);return isNaN(hs)?us:hs}return[ls.width,ls.height]}:function(){return us}};ns.getFuncByUnknownType=is}(_function)),_function}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(ns){var ts=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(as,os,is,us){us===void 0&&(us=is);var ls=Object.getOwnPropertyDescriptor(os,is);(!ls||("get"in ls?!os.__esModule:ls.writable||ls.configurable))&&(ls={enumerable:!0,get:function(){return os[is]}}),Object.defineProperty(as,us,ls)}:function(as,os,is,us){us===void 0&&(us=is),as[us]=os[is]}),rs=commonjsGlobal&&commonjsGlobal.__exportStar||function(as,os){for(var is in as)is!=="default"&&!Object.prototype.hasOwnProperty.call(os,is)&&ts(os,as,is)};Object.defineProperty(ns,"__esModule",{value:!0}),rs(string,ns),rs(array,ns),rs(number,ns),rs(math,ns),rs(object,ns),rs(require_function(),ns)}(util$2)),util$2}var __extends$w=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}();Object.defineProperty(registy,"__esModule",{value:!0});registy.getLayoutByName=registy.unRegisterLayout=registy.registerLayout=void 0;var base_1$h=base$1,util_1$s=requireUtil(),map$4=new Map,registerLayout$1=function(ns,ts){if(map$4.get(ns)&&console.warn("The layout with the name ".concat(ns," exists already, it will be overridden")),(0,util_1$s.isObject)(ts)){var rs=function(as){__extends$w(os,as);function os(is){var us=this,ls;us=as.call(this)||this;var fs=us,hs={},vs=Object.assign({},fs.getDefaultCfg(),((ls=ts.getDefaultCfg)===null||ls===void 0?void 0:ls.call(ts))||{});return Object.assign(hs,vs,ts,is),Object.keys(hs).forEach(function(gs){var ys=hs[gs];fs[gs]=ys}),us}return os}(base_1$h.Base);map$4.set(ns,rs)}else map$4.set(ns,ts);return map$4.get(ns)};registy.registerLayout=registerLayout$1;var unRegisterLayout=function(ns){map$4.has(ns)&&map$4.delete(ns)};registy.unRegisterLayout=unRegisterLayout;var getLayoutByName=function(ns){return map$4.has(ns)?map$4.get(ns):null};registy.getLayoutByName=getLayoutByName;var layout$7={},grid$1={},__extends$v=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}();Object.defineProperty(grid$1,"__esModule",{value:!0});grid$1.GridLayout=void 0;var util_1$r=requireUtil(),base_1$g=base$1,GridLayout=function(ns){__extends$v(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.begin=[0,0],as.preventOverlap=!0,as.preventOverlapPadding=10,as.condense=!1,as.sortBy="degree",as.nodes=[],as.edges=[],as.width=300,as.height=300,as.row=0,as.col=0,as.cellWidth=0,as.cellHeight=0,as.cellUsed={},as.id2manPos={},as.onLayoutEnd=function(){},as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},ts.prototype.execute=function(){var rs=this,as=rs.nodes,os=rs.edges,is=rs.begin,us=as.length;if(us===0)return rs.onLayoutEnd&&rs.onLayoutEnd(),{nodes:as,edges:os};if(us===1)return as[0].x=is[0],as[0].y=is[1],rs.onLayoutEnd&&rs.onLayoutEnd(),{nodes:as,edges:os};var ls=rs.sortBy,fs=rs.width,hs=rs.height,vs=rs.condense,gs=rs.preventOverlapPadding,ys=rs.preventOverlap,xs=rs.nodeSpacing,ms=rs.nodeSize,Ss=[];as.forEach(function(zs){Ss.push(zs)});var Ms={};if(Ss.forEach(function(zs,Us){Ms[zs.id]=Us}),(ls==="degree"||!(0,util_1$r.isString)(ls)||Ss[0][ls]===void 0)&&(ls="degree",(0,util_1$r.isNaN)(as[0].degree))){var $s=(0,util_1$r.getDegree)(Ss.length,Ms,os);Ss.forEach(function(zs,Us){zs.degree=$s[Us].all})}Ss.sort(function(zs,Us){return Us[ls]-zs[ls]}),!fs&&typeof window<"u"&&(fs=window.innerWidth),!hs&&typeof window<"u"&&(hs=window.innerHeight);var bs=rs.rows,Cs=rs.cols!=null?rs.cols:rs.columns;if(rs.cells=us,bs!=null&&Cs!=null?(rs.rows=bs,rs.cols=Cs):bs!=null&&Cs==null?(rs.rows=bs,rs.cols=Math.ceil(rs.cells/rs.rows)):bs==null&&Cs!=null?(rs.cols=Cs,rs.rows=Math.ceil(rs.cells/rs.cols)):(rs.splits=Math.sqrt(rs.cells*rs.height/rs.width),rs.rows=Math.round(rs.splits),rs.cols=Math.round(rs.width/rs.height*rs.splits)),rs.rows=Math.max(rs.rows,1),rs.cols=Math.max(rs.cols,1),rs.cols*rs.rows>rs.cells){var As=rs.small(),Is=rs.large();(As-1)*Is>=rs.cells?rs.small(As-1):(Is-1)*As>=rs.cells&&rs.large(Is-1)}else for(;rs.cols*rs.rows<rs.cells;){var As=rs.small(),Is=rs.large();(Is+1)*As>=rs.cells?rs.large(Is+1):rs.small(As+1)}if(rs.cellWidth=fs/rs.cols,rs.cellHeight=hs/rs.rows,vs&&(rs.cellWidth=0,rs.cellHeight=0),ys||xs){var ks=(0,util_1$r.getFuncByUnknownType)(10,xs),Ps=(0,util_1$r.getFuncByUnknownType)(30,ms,!1);Ss.forEach(function(zs){(!zs.x||!zs.y)&&(zs.x=0,zs.y=0);var Us=Ps(zs)||30,Ys,Ks;(0,util_1$r.isArray)(Us)?(Ys=Us[0],Ks=Us[1]):(Ys=Us,Ks=Us);var qs=ks!==void 0?ks(zs):gs,_l=Ys+qs,Js=Ks+qs;rs.cellWidth=Math.max(rs.cellWidth,_l),rs.cellHeight=Math.max(rs.cellHeight,Js)})}rs.cellUsed={},rs.row=0,rs.col=0,rs.id2manPos={};for(var Ds=0;Ds<Ss.length;Ds++){var Fs=Ss[Ds],Rs=void 0;if(rs.position&&(Rs=rs.position(Fs)),Rs&&(Rs.row!==void 0||Rs.col!==void 0)){var js={row:Rs.row,col:Rs.col};if(js.col===void 0)for(js.col=0;rs.used(js.row,js.col);)js.col++;else if(js.row===void 0)for(js.row=0;rs.used(js.row,js.col);)js.row++;rs.id2manPos[Fs.id]=js,rs.use(js.row,js.col)}rs.getPos(Fs)}return rs.onLayoutEnd&&rs.onLayoutEnd(),{edges:os,nodes:Ss}},ts.prototype.small=function(rs){var as=this,os,is=as.rows||5,us=as.cols||5;if(rs==null)os=Math.min(is,us);else{var ls=Math.min(is,us);ls===as.rows?as.rows=rs:as.cols=rs}return os},ts.prototype.large=function(rs){var as=this,os,is=as.rows||5,us=as.cols||5;if(rs==null)os=Math.max(is,us);else{var ls=Math.max(is,us);ls===as.rows?as.rows=rs:as.cols=rs}return os},ts.prototype.used=function(rs,as){var os=this;return os.cellUsed["c-".concat(rs,"-").concat(as)]||!1},ts.prototype.use=function(rs,as){var os=this;os.cellUsed["c-".concat(rs,"-").concat(as)]=!0},ts.prototype.moveToNextCell=function(){var rs=this,as=rs.cols||5;rs.col++,rs.col>=as&&(rs.col=0,rs.row++)},ts.prototype.getPos=function(rs){var as=this,os=as.begin,is=as.cellWidth,us=as.cellHeight,ls,fs,hs=as.id2manPos[rs.id];if(hs)ls=hs.col*is+is/2+os[0],fs=hs.row*us+us/2+os[1];else{for(;as.used(as.row,as.col);)as.moveToNextCell();ls=as.col*is+is/2+os[0],fs=as.row*us+us/2+os[1],as.use(as.row,as.col),as.moveToNextCell()}rs.x=ls,rs.y=fs},ts.prototype.getType=function(){return"grid"},ts}(base_1$g.Base);grid$1.GridLayout=GridLayout;var random={},__extends$u=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}();Object.defineProperty(random,"__esModule",{value:!0});random.RandomLayout=void 0;var base_1$f=base$1,RandomLayout=function(ns){__extends$u(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.center=[0,0],as.width=300,as.height=300,as.nodes=[],as.edges=[],as.onLayoutEnd=function(){},as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},ts.prototype.execute=function(){var rs=this,as=rs.nodes,os=.9,is=rs.center;return!rs.width&&typeof window<"u"&&(rs.width=window.innerWidth),!rs.height&&typeof window<"u"&&(rs.height=window.innerHeight),as&&as.forEach(function(us){us.x=(Math.random()-.5)*os*rs.width+is[0],us.y=(Math.random()-.5)*os*rs.height+is[1]}),rs.onLayoutEnd&&rs.onLayoutEnd(),{nodes:as,edges:this.edges}},ts.prototype.getType=function(){return"random"},ts}(base_1$f.Base);random.RandomLayout=RandomLayout;var gForce$1={},__extends$t=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}();Object.defineProperty(gForce$1,"__esModule",{value:!0});gForce$1.GForceLayout=void 0;var base_1$e=base$1,util_1$q=requireUtil(),proccessToFunc$3=function(ns,ts){var rs;return ns?(0,util_1$q.isNumber)(ns)?rs=function(as){return ns}:rs=ns:rs=function(as){return ts||1},rs},GForceLayout=function(ns){__extends$t(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.maxIteration=500,as.workerEnabled=!1,as.edgeStrength=200,as.nodeStrength=1e3,as.coulombDisScale=.005,as.damping=.9,as.maxSpeed=1e3,as.minMovement=.5,as.interval=.02,as.factor=1,as.linkDistance=1,as.gravity=10,as.preventOverlap=!0,as.collideStrength=1,as.tick=function(){},as.nodes=[],as.edges=[],as.width=300,as.height=300,as.nodeMap={},as.nodeIdxMap={},as.animate=!0,as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},ts.prototype.execute=function(){var rs,as,os=this,is=os.nodes;if(os.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(os.timeInterval),!is||is.length===0){(rs=os.onLayoutEnd)===null||rs===void 0||rs.call(os);return}!os.width&&typeof window<"u"&&(os.width=window.innerWidth),!os.height&&typeof window<"u"&&(os.height=window.innerHeight),os.center||(os.center=[os.width/2,os.height/2]);var us=os.center;if(is.length===1){is[0].x=us[0],is[0].y=us[1],(as=os.onLayoutEnd)===null||as===void 0||as.call(os);return}var ls={},fs={};is.forEach(function(ms,Ss){(0,util_1$q.isNumber)(ms.x)||(ms.x=Math.random()*os.width),(0,util_1$q.isNumber)(ms.y)||(ms.y=Math.random()*os.height),ls[ms.id]=ms,fs[ms.id]=Ss}),os.nodeMap=ls,os.nodeIdxMap=fs,os.linkDistance=proccessToFunc$3(os.linkDistance,1),os.nodeStrength=proccessToFunc$3(os.nodeStrength,1),os.edgeStrength=proccessToFunc$3(os.edgeStrength,1);var hs=os.nodeSize,vs;if(os.preventOverlap){var gs=os.nodeSpacing,ys;(0,util_1$q.isNumber)(gs)?ys=function(){return gs}:(0,util_1$q.isFunction)(gs)?ys=gs:ys=function(){return 0},hs?(0,util_1$q.isArray)(hs)?vs=function(ms){return Math.max(hs[0],hs[1])+ys(ms)}:vs=function(ms){return hs+ys(ms)}:vs=function(ms){return ms.size?(0,util_1$q.isArray)(ms.size)?Math.max(ms.size[0],ms.size[1])+ys(ms):(0,util_1$q.isObject)(ms.size)?Math.max(ms.size.width,ms.size.height)+ys(ms):ms.size+ys(ms):10+ys(ms)}}os.nodeSize=vs;var xs=os.edges;os.degrees=(0,util_1$q.getDegree)(is.length,os.nodeIdxMap,xs),os.getMass||(os.getMass=function(ms){var Ss=ms.mass||os.degrees[os.nodeIdxMap[ms.id]].all||1;return Ss}),os.run()},ts.prototype.run=function(){var rs,as=this,os=as.maxIteration,is=as.nodes,us=as.workerEnabled,ls=as.minMovement,fs=as.animate;if(is)if(us||!fs){for(var hs=0;hs<os;hs++){var vs=as.runOneStep(hs);if(as.reachMoveThreshold(is,vs,ls))break}(rs=as.onLayoutEnd)===null||rs===void 0||rs.call(as)}else{if(typeof window>"u")return;var gs=0;this.timeInterval=window.setInterval(function(){var ys,xs;if(is){var ms=as.runOneStep(gs)||[];as.reachMoveThreshold(is,ms,ls)&&((ys=as.onLayoutEnd)===null||ys===void 0||ys.call(as),window.clearInterval(as.timeInterval)),gs++,gs>=os&&((xs=as.onLayoutEnd)===null||xs===void 0||xs.call(as),window.clearInterval(as.timeInterval))}},0)}},ts.prototype.reachMoveThreshold=function(rs,as,os){var is=0;return rs.forEach(function(us,ls){var fs=us.x-as[ls].x,hs=us.y-as[ls].y;is+=Math.sqrt(fs*fs+hs*hs)}),is/=rs.length,is<os},ts.prototype.runOneStep=function(rs){var as,os=this,is=os.nodes,us=os.edges,ls=[],fs=[];if(is){is.forEach(function(gs,ys){ls[2*ys]=0,ls[2*ys+1]=0,fs[2*ys]=0,fs[2*ys+1]=0}),os.calRepulsive(ls,is),us&&os.calAttractive(ls,us),os.calGravity(ls,is);var hs=Math.max(.02,os.interval-rs*.002);os.updateVelocity(ls,fs,hs,is);var vs=[];return is.forEach(function(gs){vs.push({x:gs.x,y:gs.y})}),os.updatePosition(fs,hs,is),(as=os.tick)===null||as===void 0||as.call(os),vs}},ts.prototype.calRepulsive=function(rs,as){var os=this,is=os.getMass,us=os.factor,ls=os.coulombDisScale,fs=os.preventOverlap,hs=os.collideStrength,vs=hs===void 0?1:hs,gs=os.nodeStrength,ys=os.nodeSize;as.forEach(function(xs,ms){var Ss=is?is(xs):1;as.forEach(function(Ms,$s){if(!(ms>=$s)){var bs=xs.x-Ms.x,Cs=xs.y-Ms.y;bs===0&&Cs===0&&(bs=Math.random()*.01,Cs=Math.random()*.01);var As=bs*bs+Cs*Cs,Is=Math.sqrt(As),ks=(Is+.1)*ls,Ps=bs/Is,Ds=Cs/Is,Fs=(gs(xs)+gs(Ms))*.5*us/(ks*ks),Rs=is?is(Ms):1;if(rs[2*ms]+=Ps*Fs,rs[2*ms+1]+=Ds*Fs,rs[2*$s]-=Ps*Fs,rs[2*$s+1]-=Ds*Fs,fs&&(ys(xs)+ys(Ms))/2>Is){var js=vs*(gs(xs)+gs(Ms))*.5/As;rs[2*ms]+=Ps*js/Ss,rs[2*ms+1]+=Ds*js/Ss,rs[2*$s]-=Ps*js/Rs,rs[2*$s+1]-=Ds*js/Rs}}})})},ts.prototype.calAttractive=function(rs,as){var os=this,is=os.nodeMap,us=os.nodeIdxMap,ls=os.linkDistance,fs=os.edgeStrength,hs=os.nodeSize,vs=os.getMass;as.forEach(function(gs,ys){var xs=(0,util_1$q.getEdgeTerminal)(gs,"source"),ms=(0,util_1$q.getEdgeTerminal)(gs,"target"),Ss=is[xs],Ms=is[ms],$s=Ms.x-Ss.x,bs=Ms.y-Ss.y;$s===0&&bs===0&&($s=Math.random()*.01,bs=Math.random()*.01);var Cs=Math.sqrt($s*$s+bs*bs),As=$s/Cs,Is=bs/Cs,ks=ls(gs,Ss,Ms)||1+(hs(Ss)+hs(Ms)||0)/2,Ps=ks-Cs,Ds=Ps*fs(gs),Fs=us[xs],Rs=us[ms],js=vs?vs(Ss):1,zs=vs?vs(Ms):1;rs[2*Fs]-=As*Ds/js,rs[2*Fs+1]-=Is*Ds/js,rs[2*Rs]+=As*Ds/zs,rs[2*Rs+1]+=Is*Ds/zs})},ts.prototype.calGravity=function(rs,as){for(var os=this,is=os.center,us=os.gravity,ls=os.degrees,fs=as.length,hs=0;hs<fs;hs++){var vs=as[hs],gs=vs.x-is[0],ys=vs.y-is[1],xs=us;if(os.getCenter){var ms=os.getCenter(vs,ls[hs].all);ms&&(0,util_1$q.isNumber)(ms[0])&&(0,util_1$q.isNumber)(ms[1])&&(0,util_1$q.isNumber)(ms[2])&&(gs=vs.x-ms[0],ys=vs.y-ms[1],xs=ms[2])}xs&&(rs[2*hs]-=xs*gs,rs[2*hs+1]-=xs*ys)}},ts.prototype.updateVelocity=function(rs,as,os,is){var us=this,ls=os*us.damping;is.forEach(function(fs,hs){var vs=rs[2*hs]*ls||.01,gs=rs[2*hs+1]*ls||.01,ys=Math.sqrt(vs*vs+gs*gs);if(ys>us.maxSpeed){var xs=us.maxSpeed/ys;vs=xs*vs,gs=xs*gs}as[2*hs]=vs,as[2*hs+1]=gs})},ts.prototype.updatePosition=function(rs,as,os){os.forEach(function(is,us){if((0,util_1$q.isNumber)(is.fx)&&(0,util_1$q.isNumber)(is.fy)){is.x=is.fx,is.y=is.fy;return}var ls=rs[2*us]*as,fs=rs[2*us+1]*as;is.x+=ls,is.y+=fs})},ts.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},ts.prototype.destroy=function(){var rs=this;rs.stop(),rs.tick=null,rs.nodes=null,rs.edges=null,rs.destroyed=!0},ts.prototype.getType=function(){return"gForce"},ts}(base_1$e.Base);gForce$1.GForceLayout=GForceLayout;var force2={},ForceNBody={};function tree_add(ns){const ts=+this._x.call(null,ns),rs=+this._y.call(null,ns);return add(this.cover(ts,rs),ts,rs,ns)}function add(ns,ts,rs,as){if(isNaN(ts)||isNaN(rs))return ns;var os,is=ns._root,us={data:as},ls=ns._x0,fs=ns._y0,hs=ns._x1,vs=ns._y1,gs,ys,xs,ms,Ss,Ms,$s,bs;if(!is)return ns._root=us,ns;for(;is.length;)if((Ss=ts>=(gs=(ls+hs)/2))?ls=gs:hs=gs,(Ms=rs>=(ys=(fs+vs)/2))?fs=ys:vs=ys,os=is,!(is=is[$s=Ms<<1|Ss]))return os[$s]=us,ns;if(xs=+ns._x.call(null,is.data),ms=+ns._y.call(null,is.data),ts===xs&&rs===ms)return us.next=is,os?os[$s]=us:ns._root=us,ns;do os=os?os[$s]=new Array(4):ns._root=new Array(4),(Ss=ts>=(gs=(ls+hs)/2))?ls=gs:hs=gs,(Ms=rs>=(ys=(fs+vs)/2))?fs=ys:vs=ys;while(($s=Ms<<1|Ss)===(bs=(ms>=ys)<<1|xs>=gs));return os[bs]=is,os[$s]=us,ns}function addAll(ns){var ts,rs,as=ns.length,os,is,us=new Array(as),ls=new Array(as),fs=1/0,hs=1/0,vs=-1/0,gs=-1/0;for(rs=0;rs<as;++rs)isNaN(os=+this._x.call(null,ts=ns[rs]))||isNaN(is=+this._y.call(null,ts))||(us[rs]=os,ls[rs]=is,os<fs&&(fs=os),os>vs&&(vs=os),is<hs&&(hs=is),is>gs&&(gs=is));if(fs>vs||hs>gs)return this;for(this.cover(fs,hs).cover(vs,gs),rs=0;rs<as;++rs)add(this,us[rs],ls[rs],ns[rs]);return this}function tree_cover(ns,ts){if(isNaN(ns=+ns)||isNaN(ts=+ts))return this;var rs=this._x0,as=this._y0,os=this._x1,is=this._y1;if(isNaN(rs))os=(rs=Math.floor(ns))+1,is=(as=Math.floor(ts))+1;else{for(var us=os-rs||1,ls=this._root,fs,hs;rs>ns||ns>=os||as>ts||ts>=is;)switch(hs=(ts<as)<<1|ns<rs,fs=new Array(4),fs[hs]=ls,ls=fs,us*=2,hs){case 0:os=rs+us,is=as+us;break;case 1:rs=os-us,is=as+us;break;case 2:os=rs+us,as=is-us;break;case 3:rs=os-us,as=is-us;break}this._root&&this._root.length&&(this._root=ls)}return this._x0=rs,this._y0=as,this._x1=os,this._y1=is,this}function tree_data(){var ns=[];return this.visit(function(ts){if(!ts.length)do ns.push(ts.data);while(ts=ts.next)}),ns}function tree_extent(ns){return arguments.length?this.cover(+ns[0][0],+ns[0][1]).cover(+ns[1][0],+ns[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad$1(ns,ts,rs,as,os){this.node=ns,this.x0=ts,this.y0=rs,this.x1=as,this.y1=os}function tree_find(ns,ts,rs){var as,os=this._x0,is=this._y0,us,ls,fs,hs,vs=this._x1,gs=this._y1,ys=[],xs=this._root,ms,Ss;for(xs&&ys.push(new Quad$1(xs,os,is,vs,gs)),rs==null?rs=1/0:(os=ns-rs,is=ts-rs,vs=ns+rs,gs=ts+rs,rs*=rs);ms=ys.pop();)if(!(!(xs=ms.node)||(us=ms.x0)>vs||(ls=ms.y0)>gs||(fs=ms.x1)<os||(hs=ms.y1)<is))if(xs.length){var Ms=(us+fs)/2,$s=(ls+hs)/2;ys.push(new Quad$1(xs[3],Ms,$s,fs,hs),new Quad$1(xs[2],us,$s,Ms,hs),new Quad$1(xs[1],Ms,ls,fs,$s),new Quad$1(xs[0],us,ls,Ms,$s)),(Ss=(ts>=$s)<<1|ns>=Ms)&&(ms=ys[ys.length-1],ys[ys.length-1]=ys[ys.length-1-Ss],ys[ys.length-1-Ss]=ms)}else{var bs=ns-+this._x.call(null,xs.data),Cs=ts-+this._y.call(null,xs.data),As=bs*bs+Cs*Cs;if(As<rs){var Is=Math.sqrt(rs=As);os=ns-Is,is=ts-Is,vs=ns+Is,gs=ts+Is,as=xs.data}}return as}function tree_remove(ns){if(isNaN(vs=+this._x.call(null,ns))||isNaN(gs=+this._y.call(null,ns)))return this;var ts,rs=this._root,as,os,is,us=this._x0,ls=this._y0,fs=this._x1,hs=this._y1,vs,gs,ys,xs,ms,Ss,Ms,$s;if(!rs)return this;if(rs.length)for(;;){if((ms=vs>=(ys=(us+fs)/2))?us=ys:fs=ys,(Ss=gs>=(xs=(ls+hs)/2))?ls=xs:hs=xs,ts=rs,!(rs=rs[Ms=Ss<<1|ms]))return this;if(!rs.length)break;(ts[Ms+1&3]||ts[Ms+2&3]||ts[Ms+3&3])&&(as=ts,$s=Ms)}for(;rs.data!==ns;)if(os=rs,!(rs=rs.next))return this;return(is=rs.next)&&delete rs.next,os?(is?os.next=is:delete os.next,this):ts?(is?ts[Ms]=is:delete ts[Ms],(rs=ts[0]||ts[1]||ts[2]||ts[3])&&rs===(ts[3]||ts[2]||ts[1]||ts[0])&&!rs.length&&(as?as[$s]=rs:this._root=rs),this):(this._root=is,this)}function removeAll(ns){for(var ts=0,rs=ns.length;ts<rs;++ts)this.remove(ns[ts]);return this}function tree_root(){return this._root}function tree_size(){var ns=0;return this.visit(function(ts){if(!ts.length)do++ns;while(ts=ts.next)}),ns}function tree_visit(ns){var ts=[],rs,as=this._root,os,is,us,ls,fs;for(as&&ts.push(new Quad$1(as,this._x0,this._y0,this._x1,this._y1));rs=ts.pop();)if(!ns(as=rs.node,is=rs.x0,us=rs.y0,ls=rs.x1,fs=rs.y1)&&as.length){var hs=(is+ls)/2,vs=(us+fs)/2;(os=as[3])&&ts.push(new Quad$1(os,hs,vs,ls,fs)),(os=as[2])&&ts.push(new Quad$1(os,is,vs,hs,fs)),(os=as[1])&&ts.push(new Quad$1(os,hs,us,ls,vs)),(os=as[0])&&ts.push(new Quad$1(os,is,us,hs,vs))}return this}function tree_visitAfter(ns){var ts=[],rs=[],as;for(this._root&&ts.push(new Quad$1(this._root,this._x0,this._y0,this._x1,this._y1));as=ts.pop();){var os=as.node;if(os.length){var is,us=as.x0,ls=as.y0,fs=as.x1,hs=as.y1,vs=(us+fs)/2,gs=(ls+hs)/2;(is=os[0])&&ts.push(new Quad$1(is,us,ls,vs,gs)),(is=os[1])&&ts.push(new Quad$1(is,vs,ls,fs,gs)),(is=os[2])&&ts.push(new Quad$1(is,us,gs,vs,hs)),(is=os[3])&&ts.push(new Quad$1(is,vs,gs,fs,hs))}rs.push(as)}for(;as=rs.pop();)ns(as.node,as.x0,as.y0,as.x1,as.y1);return this}function defaultX(ns){return ns[0]}function tree_x(ns){return arguments.length?(this._x=ns,this):this._x}function defaultY(ns){return ns[1]}function tree_y(ns){return arguments.length?(this._y=ns,this):this._y}function quadtree(ns,ts,rs){var as=new Quadtree(ts??defaultX,rs??defaultY,NaN,NaN,NaN,NaN);return ns==null?as:as.addAll(ns)}function Quadtree(ns,ts,rs,as,os,is){this._x=ns,this._y=ts,this._x0=rs,this._y0=as,this._x1=os,this._y1=is,this._root=void 0}function leaf_copy(ns){for(var ts={data:ns.data},rs=ts;ns=ns.next;)rs=rs.next={data:ns.data};return ts}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var ns=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),ts=this._root,rs,as;if(!ts)return ns;if(!ts.length)return ns._root=leaf_copy(ts),ns;for(rs=[{source:ts,target:ns._root=new Array(4)}];ts=rs.pop();)for(var os=0;os<4;++os)(as=ts.source[os])&&(as.length?rs.push({source:as,target:ts.target[os]=new Array(4)}):ts.target[os]=leaf_copy(as));return ns};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;const src$2=Object.freeze(Object.defineProperty({__proto__:null,quadtree},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(src$2);Object.defineProperty(ForceNBody,"__esModule",{value:!0});ForceNBody.forceNBody=void 0;var d3_quadtree_1=require$$0$3,theta2=.81,epsilon=.1;function forceNBody(ns,ts,rs,as,os){var is=rs/as,us=ns.map(function(fs,hs){var vs=ts[fs.id],gs=vs.data,ys=vs.x,xs=vs.y,ms=vs.size,Ss=gs.layout.force.nodeStrength;return{x:ys,y:xs,size:ms,index:hs,vx:0,vy:0,weight:is*Ss}}),ls=(0,d3_quadtree_1.quadtree)(us,function(fs){return fs.x},function(fs){return fs.y}).visitAfter(accumulate);return us.forEach(function(fs){computeForce(fs,ls)}),us.map(function(fs,hs){var vs=ts[ns[hs].id],gs=vs.data.layout.force.mass,ys=gs===void 0?1:gs;os[2*hs]=fs.vx/ys,os[2*hs+1]=fs.vy/ys}),os}ForceNBody.forceNBody=forceNBody;function accumulate(ns){var ts=0,rs=0,as=0;if(ns.length){for(var os=0;os<4;os++){var is=ns[os];is&&is.weight&&(ts+=is.weight,rs+=is.x*is.weight,as+=is.y*is.weight)}ns.x=rs/ts,ns.y=as/ts,ns.weight=ts}else{var is=ns;ns.x=is.data.x,ns.y=is.data.y,ns.weight=is.data.weight}}var apply=function(ns,ts,rs,as,os,is){var us=is.x-ns.x||epsilon,ls=is.y-ns.y||epsilon,fs=as-ts,hs=us*us+ls*ls,vs=Math.sqrt(hs)*hs;if(fs*fs*theta2<hs){var gs=ns.weight/vs;return is.vx+=us*gs,is.vy+=ls*gs,!0}if(ns.length)return!1;if(ns.data!==is){var gs=ns.data.weight/vs;is.vx+=us*gs,is.vy+=ls*gs}};function computeForce(ns,ts){ts.visit(function(rs,as,os,is,us){return apply(rs,as,os,is,us,ns)})}var __extends$s=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__assign$g=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$g=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$g.apply(this,arguments)};Object.defineProperty(force2,"__esModule",{value:!0});force2.Force2Layout=void 0;var base_1$d=base$1,util_1$p=requireUtil(),ForceNBody_1=ForceNBody,proccessToFunc$2=function(ns,ts){var rs;return ns?(0,util_1$p.isNumber)(ns)?rs=function(as){return ns}:rs=ns:rs=function(as){return ts||1},rs},Force2Layout=function(ns){__extends$s(ts,ns);function ts(rs){var as=ns.call(this)||this;as.maxIteration=1e3,as.workerEnabled=!1,as.edgeStrength=200,as.nodeStrength=1e3,as.coulombDisScale=.005,as.damping=.9,as.maxSpeed=500,as.minMovement=.4,as.interval=.02,as.factor=1,as.linkDistance=200,as.gravity=0,as.clusterNodeStrength=20,as.preventOverlap=!0,as.distanceThresholdMode="mean",as.tick=function(){},as.nodes=[],as.edges=[],as.width=300,as.height=300,as.nodeMap={},as.nodeIdxMap={},as.judgingDistance=0,as.centripetalOptions={leaf:2,single:2,others:1,center:function(is){return{x:as.width/2,y:as.height/2}}};var os=rs.getMass;return as.propsGetMass=os,as.updateCfg(rs),as}return ts.prototype.getCentripetalOptions=function(){var rs=this,as=rs.leafCluster,os=rs.clustering,is=rs.nodeClusterBy,us=rs.nodes,ls=rs.nodeMap,fs=rs.clusterNodeStrength,hs=function(Cs){return typeof fs=="function"?fs(Cs):fs},vs={},gs;if(as){gs=this.getSameTypeLeafMap()||{};var ys=Array.from(new Set(us==null?void 0:us.map(function(Cs){return Cs[is]})))||[];vs={single:100,leaf:function(Cs,As,Is){var ks=gs[Cs.id]||{},Ps=ks.relativeLeafNodes,Ds=ks.sameTypeLeafNodes;return(Ds==null?void 0:Ds.length)===(Ps==null?void 0:Ps.length)||(ys==null?void 0:ys.length)===1?1:hs(Cs)},others:1,center:function(Cs,As,Is){var ks,Ps=(((ks=Cs.data)===null||ks===void 0?void 0:ks.layout)||{}).degree;if(!Ps)return{x:100,y:100};var Ds;if(Ps===1){var Fs=(gs[Cs.id]||{}).sameTypeLeafNodes,Rs=Fs===void 0?[]:Fs;Rs.length===1?Ds=void 0:Rs.length>1&&(Ds=(0,util_1$p.getAvgNodePosition)(Rs))}else Ds=void 0;return{x:Ds==null?void 0:Ds.x,y:Ds==null?void 0:Ds.y}}}}if(os){gs||(gs=this.getSameTypeLeafMap());var xs=Array.from(new Set(us.map(function(Cs,As){return Cs[is]}))).filter(function(Cs){return Cs!==void 0}),ms={};xs.forEach(function(Cs){var As=us.filter(function(Is){return Is[is]===Cs}).map(function(Is){return ls[Is.id]});ms[Cs]=(0,util_1$p.getAvgNodePosition)(As)}),vs={single:function(Cs){return hs(Cs)},leaf:function(Cs){return hs(Cs)},others:function(Cs){return hs(Cs)},center:function(Cs,As,Is){var ks=ms[Cs[is]];return{x:ks==null?void 0:ks.x,y:ks==null?void 0:ks.y}}}}this.centripetalOptions=__assign$g(__assign$g({},this.centripetalOptions),vs);var Ss=this.centripetalOptions,Ms=Ss.leaf,$s=Ss.single,bs=Ss.others;Ms&&typeof Ms!="function"&&(this.centripetalOptions.leaf=function(){return Ms}),$s&&typeof $s!="function"&&(this.centripetalOptions.single=function(){return $s}),bs&&typeof bs!="function"&&(this.centripetalOptions.others=function(){return bs})},ts.prototype.updateCfg=function(rs){rs&&Object.assign(this,rs)},ts.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},ts.prototype.execute=function(){var rs=this;rs.stop();var as=rs.nodes,os=rs.edges,is=rs.defSpringLen;if(rs.judgingDistance=0,!as||as.length===0){rs.onLayoutEnd([]);return}!rs.width&&typeof window<"u"&&(rs.width=window.innerWidth),!rs.height&&typeof window<"u"&&(rs.height=window.innerHeight),rs.center||(rs.center=[rs.width/2,rs.height/2]);var us=rs.center;if(as.length===1){as[0].x=us[0],as[0].y=us[1],rs.onLayoutEnd([__assign$g({},as[0])]);return}rs.degreesMap=(0,util_1$p.getDegreeMap)(as,os),rs.propsGetMass?rs.getMass=rs.propsGetMass:rs.getMass=function(xs){var ms=1;(0,util_1$p.isNumber)(xs.mass)&&(ms=xs.mass);var Ss=rs.degreesMap[xs.id].all;return!Ss||Ss<5?ms:Ss*5*ms};var ls=rs.nodeSize,fs;if(rs.preventOverlap){var hs=rs.nodeSpacing,vs;(0,util_1$p.isNumber)(hs)?vs=function(){return hs}:(0,util_1$p.isFunction)(hs)?vs=hs:vs=function(){return 0},ls?(0,util_1$p.isArray)(ls)?fs=function(xs){return Math.max(ls[0],ls[1])+vs(xs)}:fs=function(xs){return ls+vs(xs)}:fs=function(xs){return xs.size?(0,util_1$p.isArray)(xs.size)?Math.max(xs.size[0],xs.size[1])+vs(xs):(0,util_1$p.isObject)(xs.size)?Math.max(xs.size.width,xs.size.height)+vs(xs):xs.size+vs(xs):10+vs(xs)}}rs.nodeSize=fs,rs.linkDistance=proccessToFunc$2(rs.linkDistance,1),rs.nodeStrength=proccessToFunc$2(rs.nodeStrength,1),rs.edgeStrength=proccessToFunc$2(rs.edgeStrength,1);var gs={},ys={};as.forEach(function(xs,ms){(0,util_1$p.isNumber)(xs.x)||(xs.x=Math.random()*rs.width),(0,util_1$p.isNumber)(xs.y)||(xs.y=Math.random()*rs.height);var Ss=rs.degreesMap[xs.id];gs[xs.id]=__assign$g(__assign$g({},xs),{data:__assign$g(__assign$g({},xs.data),{size:rs.nodeSize(xs)||30,layout:{inDegree:Ss.in,outDegree:Ss.out,degree:Ss.all,tDegree:Ss.in,sDegree:Ss.out,force:{mass:rs.getMass(xs),nodeStrength:rs.nodeStrength(xs,os)}}})}),ys[xs.id]=ms}),rs.nodeMap=gs,rs.nodeIdxMap=ys,rs.edgeInfos=[],os==null||os.forEach(function(xs){var ms=gs[xs.source],Ss=gs[xs.target];!ms||!Ss?elf.edgeInfos.push({}):rs.edgeInfos.push({edgeStrength:rs.edgeStrength(xs),linkDistance:is?is(__assign$g(__assign$g({},xs),{source:ms,target:Ss}),ms,Ss):rs.linkDistance(xs,ms,Ss)||1+(ls(ms)+ls(ms)||0)/2})}),this.getCentripetalOptions(),rs.onLayoutEnd=rs.onLayoutEnd||function(){},rs.run()},ts.prototype.run=function(){var rs=this,as=rs.maxIteration,os=rs.nodes,is=rs.edges,us=rs.workerEnabled,ls=rs.minMovement,fs=rs.animate,hs=rs.nodeMap,vs=rs.height;if(rs.currentMinY=0,rs.currentMaxY=vs,!!os){var gs=[];if(os.forEach(function($s,bs){gs[2*bs]=0,gs[2*bs+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var ys={};is.forEach(function($s){var bs=$s.source,Cs=$s.target;ys[bs]=ys[bs]||[],ys[bs].push($s),ys[Cs]=ys[Cs]||[],ys[Cs].push($s)}),this.relatedEdges=ys}var xs=as,ms=!fs;if(us||ms){for(var Ss=0;(rs.judgingDistance>ls||Ss<1)&&Ss<xs;Ss++)rs.runOneStep(Ss,gs);rs.onLayoutEnd(Object.values(hs))}else{if(typeof window>"u")return;var Ms=0;this.timeInterval=window.setInterval(function(){os&&(rs.runOneStep(Ms,gs),Ms++,(Ms>=xs||rs.judgingDistance<ls)&&(rs.onLayoutEnd(Object.values(hs)),window.clearInterval(rs.timeInterval)))},0)}}},ts.prototype.runOneStep=function(rs,as){var os,is=this,us=is.nodes,ls=is.edges;is.nodeMap;var fs=is.monitor,hs=[];if(us!=null&&us.length){is.calRepulsive(hs),ls&&is.calAttractive(hs),is.calGravity(hs),is.attractToSide(hs);var vs=is.interval;if(is.updateVelocity(hs,as,vs),is.updatePosition(as,vs),(os=is.tick)===null||os===void 0||os.call(is),fs){var gs=this.calTotalEnergy(hs);fs({energy:gs,nodes:us,edges:ls,iterations:rs})}}},ts.prototype.calTotalEnergy=function(rs){var as=this,os=as.nodes,is=as.nodeMap;if(!(os!=null&&os.length))return 0;var us=0;return os.forEach(function(ls,fs){var hs=rs[2*fs],vs=rs[2*fs+1],gs=hs*hs+vs*vs,ys=is[ls.id].data.layout.force.mass,xs=ys===void 0?1:ys;us+=xs*gs*.5}),us},ts.prototype.calRepulsive=function(rs){var as=this,os=as.nodes,is=as.nodeMap,us=as.factor,ls=as.coulombDisScale;as.nodeSize,(0,ForceNBody_1.forceNBody)(os,is,us,ls*ls,rs)},ts.prototype.calAttractive=function(rs){var as=this,os=as.edges,is=as.nodeMap,us=as.nodeIdxMap,ls=as.edgeInfos;as.nodeSize,os.forEach(function(fs,hs){var vs=(0,util_1$p.getEdgeTerminal)(fs,"source"),gs=(0,util_1$p.getEdgeTerminal)(fs,"target"),ys=is[vs],xs=is[gs];if(!(!ys||!xs)){var ms=xs.x-ys.x,Ss=xs.y-ys.y;!ms&&!Ss&&(ms=Math.random()*.01,Ss=Math.random()*.01);var Ms=Math.sqrt(ms*ms+Ss*Ss),$s=ms/Ms,bs=Ss/Ms,Cs=ls[hs]||{},As=Cs.linkDistance,Is=As===void 0?200:As,ks=Cs.edgeStrength,Ps=ks===void 0?200:ks,Ds=Is-Ms,Fs=Ds*Ps,Rs=ys.data.layout.force.mass||1,js=xs.data.layout.force.mass||1,zs=1/Rs,Us=1/js,Ys=$s*Fs,Ks=bs*Fs,qs=2*us[vs],_l=2*us[gs];rs[qs]-=Ys*zs,rs[qs+1]-=Ks*zs,rs[_l]+=Ys*Us,rs[_l+1]+=Ks*Us}})},ts.prototype.calGravity=function(rs){var as,os=this,is=os.nodes,us=os.edges,ls=us===void 0?[]:us,fs=os.nodeMap,hs=os.width,vs=os.height,gs=os.center,ys=os.gravity,xs=os.degreesMap,ms=os.centripetalOptions;if(is)for(var Ss=is.length,Ms=0;Ms<Ss;Ms++){var $s=2*Ms,bs=fs[is[Ms].id],Cs=bs.data.layout.force.mass,As=Cs===void 0?1:Cs,Is=0,ks=0,Ps=ys,Ds=xs[bs.id],Fs=Ds.in,Rs=Ds.out,js=Ds.all,zs=(as=os.getCenter)===null||as===void 0?void 0:as.call(os,bs,js);if(zs){var Us=zs[0],Ys=zs[1],Ks=zs[2];Is=bs.x-Us,ks=bs.y-Ys,Ps=Ks}else Is=bs.x-gs[0],ks=bs.y-gs[1];if(Ps&&(rs[$s]-=Ps*Is/As,rs[$s+1]-=Ps*ks/As),ms){var qs=ms.leaf,_l=ms.single,Js=ms.others,Vs=ms.center,Zs=(Vs==null?void 0:Vs(bs,is,ls,hs,vs))||{x:0,y:0,centerStrength:0},Sl=Zs.x,Il=Zs.y,Nl=Zs.centerStrength;if(!(0,util_1$p.isNumber)(Sl)||!(0,util_1$p.isNumber)(Il))continue;var Tl=(bs.x-Sl)/As,_c=(bs.y-Il)/As;if(Nl&&(rs[$s]-=Nl*Tl,rs[$s+1]-=Nl*_c),js===0){var l0=_l(bs);if(!l0)continue;rs[$s]-=l0*Tl,rs[$s+1]-=l0*_c;continue}if(Fs===0||Rs===0){var g0=qs(bs,is,ls);if(!g0)continue;rs[$s]-=g0*Tl,rs[$s+1]-=g0*_c;continue}var R0=Js(bs);if(!R0)continue;rs[$s]-=R0*Tl,rs[$s+1]-=R0*_c}}},ts.prototype.attractToSide=function(rs){var as=this,os=as.defSideCoe;as.height;var is=as.nodes,us=as.relatedEdges,ls=as.currentMinY,fs=ls===void 0?0:ls,hs=as.currentMaxY,vs=hs===void 0?this.height:hs;!os||typeof os!="function"||!(is!=null&&is.length)||is.forEach(function(gs,ys){var xs=os(gs,us[gs.id]||[]);if(xs!==0){var ms=xs<0?fs:vs,Ss=Math.abs(xs);rs[2*ys+1]-=Ss*(gs.y-ms)}})},ts.prototype.updateVelocity=function(rs,as,os){var is=this,us=is.nodes,ls=is.damping,fs=is.maxSpeed;us!=null&&us.length&&us.forEach(function(hs,vs){var gs=(as[2*vs]+rs[2*vs]*os)*ls||.01,ys=(as[2*vs+1]+rs[2*vs+1]*os)*ls||.01,xs=Math.sqrt(gs*gs+ys*ys);if(xs>fs){var ms=fs/xs;gs=ms*gs,ys=ms*ys}as[2*vs]=gs,as[2*vs+1]=ys})},ts.prototype.updatePosition=function(rs,as){var os=this,is=os.nodes,us=os.distanceThresholdMode,ls=os.nodeMap;if(!(is!=null&&is.length)){this.judgingDistance=0;return}var fs=0;us==="max"?os.judgingDistance=-1/0:us==="min"&&(os.judgingDistance=1/0);var hs=1/0,vs=-1/0;is.forEach(function(gs,ys){var xs=ls[gs.id];if((0,util_1$p.isNumber)(gs.fx)&&(0,util_1$p.isNumber)(gs.fy)){gs.x=gs.fx,gs.y=gs.fy,xs.x=gs.x,xs.y=gs.y;return}var ms=rs[2*ys]*as,Ss=rs[2*ys+1]*as;gs.x+=ms,gs.y+=Ss,xs.x=gs.x,xs.y=gs.y,gs.y<hs&&(hs=gs.y),gs.y>vs&&(vs=gs.y);var Ms=Math.sqrt(ms*ms+Ss*Ss);switch(us){case"max":os.judgingDistance<Ms&&(os.judgingDistance=Ms);break;case"min":os.judgingDistance>Ms&&(os.judgingDistance=Ms);break;default:fs=fs+Ms;break}}),this.currentMinY=hs,this.currentMaxY=vs,(!us||us==="mean")&&(os.judgingDistance=fs/is.length)},ts.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},ts.prototype.destroy=function(){var rs=this;rs.stop(),rs.tick=null,rs.nodes=null,rs.edges=null,rs.destroyed=!0},ts.prototype.getType=function(){return"force2"},ts.prototype.getSameTypeLeafMap=function(){var rs=this,as=rs.nodeClusterBy,os=rs.nodes,is=rs.edges,us=rs.nodeMap,ls=rs.degreesMap;if(os!=null&&os.length){var fs={};return os.forEach(function(hs,vs){var gs=ls[hs.id].all;gs===1&&(fs[hs.id]=(0,util_1$p.getCoreNodeAndRelativeLeafNodes)("leaf",hs,is,as,ls,us))}),fs}},ts}(base_1$d.Base);force2.Force2Layout=Force2Layout;var force$1={},force={};function center(ns,ts){var rs,as=1;ns==null&&(ns=0),ts==null&&(ts=0);function os(){var is,us=rs.length,ls,fs=0,hs=0;for(is=0;is<us;++is)ls=rs[is],fs+=ls.x,hs+=ls.y;for(fs=(fs/us-ns)*as,hs=(hs/us-ts)*as,is=0;is<us;++is)ls=rs[is],ls.x-=fs,ls.y-=hs}return os.initialize=function(is){rs=is},os.x=function(is){return arguments.length?(ns=+is,os):ns},os.y=function(is){return arguments.length?(ts=+is,os):ts},os.strength=function(is){return arguments.length?(as=+is,os):as},os}function constant(ns){return function(){return ns}}function jiggle(ns){return(ns()-.5)*1e-6}function x$4(ns){return ns.x+ns.vx}function y$4(ns){return ns.y+ns.vy}function collide(ns){var ts,rs,as,os=1,is=1;typeof ns!="function"&&(ns=constant(ns==null?1:+ns));function us(){for(var hs,vs=ts.length,gs,ys,xs,ms,Ss,Ms,$s=0;$s<is;++$s)for(gs=quadtree(ts,x$4,y$4).visitAfter(ls),hs=0;hs<vs;++hs)ys=ts[hs],Ss=rs[ys.index],Ms=Ss*Ss,xs=ys.x+ys.vx,ms=ys.y+ys.vy,gs.visit(bs);function bs(Cs,As,Is,ks,Ps){var Ds=Cs.data,Fs=Cs.r,Rs=Ss+Fs;if(Ds){if(Ds.index>ys.index){var js=xs-Ds.x-Ds.vx,zs=ms-Ds.y-Ds.vy,Us=js*js+zs*zs;Us<Rs*Rs&&(js===0&&(js=jiggle(as),Us+=js*js),zs===0&&(zs=jiggle(as),Us+=zs*zs),Us=(Rs-(Us=Math.sqrt(Us)))/Us*os,ys.vx+=(js*=Us)*(Rs=(Fs*=Fs)/(Ms+Fs)),ys.vy+=(zs*=Us)*Rs,Ds.vx-=js*(Rs=1-Rs),Ds.vy-=zs*Rs)}return}return As>xs+Rs||ks<xs-Rs||Is>ms+Rs||Ps<ms-Rs}}function ls(hs){if(hs.data)return hs.r=rs[hs.data.index];for(var vs=hs.r=0;vs<4;++vs)hs[vs]&&hs[vs].r>hs.r&&(hs.r=hs[vs].r)}function fs(){if(ts){var hs,vs=ts.length,gs;for(rs=new Array(vs),hs=0;hs<vs;++hs)gs=ts[hs],rs[gs.index]=+ns(gs,hs,ts)}}return us.initialize=function(hs,vs){ts=hs,as=vs,fs()},us.iterations=function(hs){return arguments.length?(is=+hs,us):is},us.strength=function(hs){return arguments.length?(os=+hs,us):os},us.radius=function(hs){return arguments.length?(ns=typeof hs=="function"?hs:constant(+hs),fs(),us):ns},us}function index$4(ns){return ns.index}function find$1(ns,ts){var rs=ns.get(ts);if(!rs)throw new Error("node not found: "+ts);return rs}function link(ns){var ts=index$4,rs=gs,as,os=constant(30),is,us,ls,fs,hs,vs=1;ns==null&&(ns=[]);function gs(Ms){return 1/Math.min(ls[Ms.source.index],ls[Ms.target.index])}function ys(Ms){for(var $s=0,bs=ns.length;$s<vs;++$s)for(var Cs=0,As,Is,ks,Ps,Ds,Fs,Rs;Cs<bs;++Cs)As=ns[Cs],Is=As.source,ks=As.target,Ps=ks.x+ks.vx-Is.x-Is.vx||jiggle(hs),Ds=ks.y+ks.vy-Is.y-Is.vy||jiggle(hs),Fs=Math.sqrt(Ps*Ps+Ds*Ds),Fs=(Fs-is[Cs])/Fs*Ms*as[Cs],Ps*=Fs,Ds*=Fs,ks.vx-=Ps*(Rs=fs[Cs]),ks.vy-=Ds*Rs,Is.vx+=Ps*(Rs=1-Rs),Is.vy+=Ds*Rs}function xs(){if(us){var Ms,$s=us.length,bs=ns.length,Cs=new Map(us.map((Is,ks)=>[ts(Is,ks,us),Is])),As;for(Ms=0,ls=new Array($s);Ms<bs;++Ms)As=ns[Ms],As.index=Ms,typeof As.source!="object"&&(As.source=find$1(Cs,As.source)),typeof As.target!="object"&&(As.target=find$1(Cs,As.target)),ls[As.source.index]=(ls[As.source.index]||0)+1,ls[As.target.index]=(ls[As.target.index]||0)+1;for(Ms=0,fs=new Array(bs);Ms<bs;++Ms)As=ns[Ms],fs[Ms]=ls[As.source.index]/(ls[As.source.index]+ls[As.target.index]);as=new Array(bs),ms(),is=new Array(bs),Ss()}}function ms(){if(us)for(var Ms=0,$s=ns.length;Ms<$s;++Ms)as[Ms]=+rs(ns[Ms],Ms,ns)}function Ss(){if(us)for(var Ms=0,$s=ns.length;Ms<$s;++Ms)is[Ms]=+os(ns[Ms],Ms,ns)}return ys.initialize=function(Ms,$s){us=Ms,hs=$s,xs()},ys.links=function(Ms){return arguments.length?(ns=Ms,xs(),ys):ns},ys.id=function(Ms){return arguments.length?(ts=Ms,ys):ts},ys.iterations=function(Ms){return arguments.length?(vs=+Ms,ys):vs},ys.strength=function(Ms){return arguments.length?(rs=typeof Ms=="function"?Ms:constant(+Ms),ms(),ys):rs},ys.distance=function(Ms){return arguments.length?(os=typeof Ms=="function"?Ms:constant(+Ms),Ss(),ys):os},ys}var noop$1={value:()=>{}};function dispatch(){for(var ns=0,ts=arguments.length,rs={},as;ns<ts;++ns){if(!(as=arguments[ns]+"")||as in rs||/[\s.]/.test(as))throw new Error("illegal type: "+as);rs[as]=[]}return new Dispatch(rs)}function Dispatch(ns){this._=ns}function parseTypenames(ns,ts){return ns.trim().split(/^|\s+/).map(function(rs){var as="",os=rs.indexOf(".");if(os>=0&&(as=rs.slice(os+1),rs=rs.slice(0,os)),rs&&!ts.hasOwnProperty(rs))throw new Error("unknown type: "+rs);return{type:rs,name:as}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(ns,ts){var rs=this._,as=parseTypenames(ns+"",rs),os,is=-1,us=as.length;if(arguments.length<2){for(;++is<us;)if((os=(ns=as[is]).type)&&(os=get$1(rs[os],ns.name)))return os;return}if(ts!=null&&typeof ts!="function")throw new Error("invalid callback: "+ts);for(;++is<us;)if(os=(ns=as[is]).type)rs[os]=set$1(rs[os],ns.name,ts);else if(ts==null)for(os in rs)rs[os]=set$1(rs[os],ns.name,null);return this},copy:function(){var ns={},ts=this._;for(var rs in ts)ns[rs]=ts[rs].slice();return new Dispatch(ns)},call:function(ns,ts){if((os=arguments.length-2)>0)for(var rs=new Array(os),as=0,os,is;as<os;++as)rs[as]=arguments[as+2];if(!this._.hasOwnProperty(ns))throw new Error("unknown type: "+ns);for(is=this._[ns],as=0,os=is.length;as<os;++as)is[as].value.apply(ts,rs)},apply:function(ns,ts,rs){if(!this._.hasOwnProperty(ns))throw new Error("unknown type: "+ns);for(var as=this._[ns],os=0,is=as.length;os<is;++os)as[os].value.apply(ts,rs)}};function get$1(ns,ts){for(var rs=0,as=ns.length,os;rs<as;++rs)if((os=ns[rs]).name===ts)return os.value}function set$1(ns,ts,rs){for(var as=0,os=ns.length;as<os;++as)if(ns[as].name===ts){ns[as]=noop$1,ns=ns.slice(0,as).concat(ns.slice(as+1));break}return rs!=null&&ns.push({name:ts,value:rs}),ns}const a$1=1664525,c$1=1013904223,m$1=4294967296;function lcg(){let ns=1;return()=>(ns=(a$1*ns+c$1)%m$1)/m$1}function x$3(ns){return ns.x}function y$3(ns){return ns.y}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function simulation(ns){var ts,rs=1,as=.001,os=1-Math.pow(as,1/300),is=0,us=.6,ls=new Map,fs=timer$1(gs),hs=dispatch("tick","end"),vs=lcg();ns==null&&(ns=[]);function gs(){ys(),hs.call("tick",ts),rs<as&&(fs.stop(),hs.call("end",ts))}function ys(Ss){var Ms,$s=ns.length,bs;Ss===void 0&&(Ss=1);for(var Cs=0;Cs<Ss;++Cs)for(rs+=(is-rs)*os,ls.forEach(function(As){As(rs)}),Ms=0;Ms<$s;++Ms)bs=ns[Ms],bs.fx==null?bs.x+=bs.vx*=us:(bs.x=bs.fx,bs.vx=0),bs.fy==null?bs.y+=bs.vy*=us:(bs.y=bs.fy,bs.vy=0);return ts}function xs(){for(var Ss=0,Ms=ns.length,$s;Ss<Ms;++Ss){if($s=ns[Ss],$s.index=Ss,$s.fx!=null&&($s.x=$s.fx),$s.fy!=null&&($s.y=$s.fy),isNaN($s.x)||isNaN($s.y)){var bs=initialRadius*Math.sqrt(.5+Ss),Cs=Ss*initialAngle;$s.x=bs*Math.cos(Cs),$s.y=bs*Math.sin(Cs)}(isNaN($s.vx)||isNaN($s.vy))&&($s.vx=$s.vy=0)}}function ms(Ss){return Ss.initialize&&Ss.initialize(ns,vs),Ss}return xs(),ts={tick:ys,restart:function(){return fs.restart(gs),ts},stop:function(){return fs.stop(),ts},nodes:function(Ss){return arguments.length?(ns=Ss,xs(),ls.forEach(ms),ts):ns},alpha:function(Ss){return arguments.length?(rs=+Ss,ts):rs},alphaMin:function(Ss){return arguments.length?(as=+Ss,ts):as},alphaDecay:function(Ss){return arguments.length?(os=+Ss,ts):+os},alphaTarget:function(Ss){return arguments.length?(is=+Ss,ts):is},velocityDecay:function(Ss){return arguments.length?(us=1-Ss,ts):1-us},randomSource:function(Ss){return arguments.length?(vs=Ss,ls.forEach(ms),ts):vs},force:function(Ss,Ms){return arguments.length>1?(Ms==null?ls.delete(Ss):ls.set(Ss,ms(Ms)),ts):ls.get(Ss)},find:function(Ss,Ms,$s){var bs=0,Cs=ns.length,As,Is,ks,Ps,Ds;for($s==null?$s=1/0:$s*=$s,bs=0;bs<Cs;++bs)Ps=ns[bs],As=Ss-Ps.x,Is=Ms-Ps.y,ks=As*As+Is*Is,ks<$s&&(Ds=Ps,$s=ks);return Ds},on:function(Ss,Ms){return arguments.length>1?(hs.on(Ss,Ms),ts):hs.on(Ss)}}}function manyBody(){var ns,ts,rs,as,os=constant(-30),is,us=1,ls=1/0,fs=.81;function hs(xs){var ms,Ss=ns.length,Ms=quadtree(ns,x$3,y$3).visitAfter(gs);for(as=xs,ms=0;ms<Ss;++ms)ts=ns[ms],Ms.visit(ys)}function vs(){if(ns){var xs,ms=ns.length,Ss;for(is=new Array(ms),xs=0;xs<ms;++xs)Ss=ns[xs],is[Ss.index]=+os(Ss,xs,ns)}}function gs(xs){var ms=0,Ss,Ms,$s=0,bs,Cs,As;if(xs.length){for(bs=Cs=As=0;As<4;++As)(Ss=xs[As])&&(Ms=Math.abs(Ss.value))&&(ms+=Ss.value,$s+=Ms,bs+=Ms*Ss.x,Cs+=Ms*Ss.y);xs.x=bs/$s,xs.y=Cs/$s}else{Ss=xs,Ss.x=Ss.data.x,Ss.y=Ss.data.y;do ms+=is[Ss.data.index];while(Ss=Ss.next)}xs.value=ms}function ys(xs,ms,Ss,Ms){if(!xs.value)return!0;var $s=xs.x-ts.x,bs=xs.y-ts.y,Cs=Ms-ms,As=$s*$s+bs*bs;if(Cs*Cs/fs<As)return As<ls&&($s===0&&($s=jiggle(rs),As+=$s*$s),bs===0&&(bs=jiggle(rs),As+=bs*bs),As<us&&(As=Math.sqrt(us*As)),ts.vx+=$s*xs.value*as/As,ts.vy+=bs*xs.value*as/As),!0;if(xs.length||As>=ls)return;(xs.data!==ts||xs.next)&&($s===0&&($s=jiggle(rs),As+=$s*$s),bs===0&&(bs=jiggle(rs),As+=bs*bs),As<us&&(As=Math.sqrt(us*As)));do xs.data!==ts&&(Cs=is[xs.data.index]*as/As,ts.vx+=$s*Cs,ts.vy+=bs*Cs);while(xs=xs.next)}return hs.initialize=function(xs,ms){ns=xs,rs=ms,vs()},hs.strength=function(xs){return arguments.length?(os=typeof xs=="function"?xs:constant(+xs),vs(),hs):os},hs.distanceMin=function(xs){return arguments.length?(us=xs*xs,hs):Math.sqrt(us)},hs.distanceMax=function(xs){return arguments.length?(ls=xs*xs,hs):Math.sqrt(ls)},hs.theta=function(xs){return arguments.length?(fs=xs*xs,hs):Math.sqrt(fs)},hs}function radial$2(ns,ts,rs){var as,os=constant(.1),is,us;typeof ns!="function"&&(ns=constant(+ns)),ts==null&&(ts=0),rs==null&&(rs=0);function ls(hs){for(var vs=0,gs=as.length;vs<gs;++vs){var ys=as[vs],xs=ys.x-ts||1e-6,ms=ys.y-rs||1e-6,Ss=Math.sqrt(xs*xs+ms*ms),Ms=(us[vs]-Ss)*is[vs]*hs/Ss;ys.vx+=xs*Ms,ys.vy+=ms*Ms}}function fs(){if(as){var hs,vs=as.length;for(is=new Array(vs),us=new Array(vs),hs=0;hs<vs;++hs)us[hs]=+ns(as[hs],hs,as),is[hs]=isNaN(us[hs])?0:+os(as[hs],hs,as)}}return ls.initialize=function(hs){as=hs,fs()},ls.strength=function(hs){return arguments.length?(os=typeof hs=="function"?hs:constant(+hs),fs(),ls):os},ls.radius=function(hs){return arguments.length?(ns=typeof hs=="function"?hs:constant(+hs),fs(),ls):ns},ls.x=function(hs){return arguments.length?(ts=+hs,ls):ts},ls.y=function(hs){return arguments.length?(rs=+hs,ls):rs},ls}function x$2(ns){var ts=constant(.1),rs,as,os;typeof ns!="function"&&(ns=constant(ns==null?0:+ns));function is(ls){for(var fs=0,hs=rs.length,vs;fs<hs;++fs)vs=rs[fs],vs.vx+=(os[fs]-vs.x)*as[fs]*ls}function us(){if(rs){var ls,fs=rs.length;for(as=new Array(fs),os=new Array(fs),ls=0;ls<fs;++ls)as[ls]=isNaN(os[ls]=+ns(rs[ls],ls,rs))?0:+ts(rs[ls],ls,rs)}}return is.initialize=function(ls){rs=ls,us()},is.strength=function(ls){return arguments.length?(ts=typeof ls=="function"?ls:constant(+ls),us(),is):ts},is.x=function(ls){return arguments.length?(ns=typeof ls=="function"?ls:constant(+ls),us(),is):ns},is}function y$2(ns){var ts=constant(.1),rs,as,os;typeof ns!="function"&&(ns=constant(ns==null?0:+ns));function is(ls){for(var fs=0,hs=rs.length,vs;fs<hs;++fs)vs=rs[fs],vs.vy+=(os[fs]-vs.y)*as[fs]*ls}function us(){if(rs){var ls,fs=rs.length;for(as=new Array(fs),os=new Array(fs),ls=0;ls<fs;++ls)as[ls]=isNaN(os[ls]=+ns(rs[ls],ls,rs))?0:+ts(rs[ls],ls,rs)}}return is.initialize=function(ls){rs=ls,us()},is.strength=function(ls){return arguments.length?(ts=typeof ls=="function"?ls:constant(+ls),us(),is):ts},is.y=function(ls){return arguments.length?(ns=typeof ls=="function"?ls:constant(+ls),us(),is):ns},is}const src$1=Object.freeze(Object.defineProperty({__proto__:null,forceCenter:center,forceCollide:collide,forceLink:link,forceManyBody:manyBody,forceRadial:radial$2,forceSimulation:simulation,forceX:x$2,forceY:y$2},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(src$1);var forceInABox$1={},__createBinding$2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ns,ts,rs,as){as===void 0&&(as=rs);var os=Object.getOwnPropertyDescriptor(ts,rs);(!os||("get"in os?!ts.__esModule:os.writable||os.configurable))&&(os={enumerable:!0,get:function(){return ts[rs]}}),Object.defineProperty(ns,as,os)}:function(ns,ts,rs,as){as===void 0&&(as=rs),ns[as]=ts[rs]}),__setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(ns,ts){Object.defineProperty(ns,"default",{enumerable:!0,value:ts})}:function(ns,ts){ns.default=ts}),__importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(ns){if(ns&&ns.__esModule)return ns;var ts={};if(ns!=null)for(var rs in ns)rs!=="default"&&Object.prototype.hasOwnProperty.call(ns,rs)&&__createBinding$2(ts,ns,rs);return __setModuleDefault$2(ts,ns),ts};Object.defineProperty(forceInABox$1,"__esModule",{value:!0});var d3Force$2=__importStar$2(require$$0$2),util_1$o=requireUtil();function forceInABox(){function ns(Tl){return function(){return Tl}}var ts=function(Tl){return Tl.cluster},rs=ns(1),as=ns(-1),os=ns(100),is=ns(.1),us=[0,0],ls=[],fs={},hs=[],vs=100,gs=100,ys={none:{x:0,y:0}},xs=[],ms,Ss="force",Ms=!0,$s=.1;function bs(Tl){if(!Ms)return bs;ms.tick(),Ds();for(var _c=0,l0=ls.length,g0=void 0,R0=Tl*$s;_c<l0;++_c)g0=ls[_c],g0.vx+=(ys[ts(g0)].x-g0.x)*R0,g0.vy+=(ys[ts(g0)].y-g0.y)*R0}function Cs(){ls&&As()}function As(){if(!(!ls||!ls.length)){if(ts(ls[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Tl=Is();ms=d3Force$2.forceSimulation(Tl.nodes).force("x",d3Force$2.forceX(vs).strength(.1)).force("y",d3Force$2.forceY(gs).strength(.1)).force("collide",d3Force$2.forceCollide(function(_c){return _c.r}).iterations(4)).force("charge",d3Force$2.forceManyBody().strength(as)).force("links",d3Force$2.forceLink(Tl.nodes.length?Tl.links:[]).distance(os).strength(is)),xs=ms.nodes(),Ds()}}function Is(){var Tl=[],_c=[],l0={},g0=[],R0={},V0=[];return R0=ks(ls),V0=Ps(hs),g0=Object.keys(R0),g0.forEach(function(U0,tv){var Os=R0[U0];Tl.push({id:U0,size:Os.count,r:Math.sqrt(Os.sumforceNodeSize/Math.PI)}),l0[U0]=tv}),V0.forEach(function(U0){var tv=(0,util_1$o.getEdgeTerminal)(U0,"source"),Os=(0,util_1$o.getEdgeTerminal)(U0,"target"),ov=l0[tv],$v=l0[Os];ov!==void 0&&$v!==void 0&&_c.push({source:ov,target:$v,count:U0.count})}),{nodes:Tl,links:_c}}function ks(Tl){var _c={};return Tl.forEach(function(l0){var g0=ts(l0);_c[g0]||(_c[g0]={count:0,sumforceNodeSize:0})}),Tl.forEach(function(l0){var g0=ts(l0),R0=rs(l0),V0=_c[g0];V0.count=V0.count+1,V0.sumforceNodeSize=V0.sumforceNodeSize+Math.PI*(R0*R0)*1.3,_c[g0]=V0}),_c}function Ps(Tl){var _c={},l0=[];Tl.forEach(function(R0){var V0=Fs(R0),U0=0;_c[V0]!==void 0&&(U0=_c[V0]),U0+=1,_c[V0]=U0});var g0=Object.entries(_c);return g0.forEach(function(R0){var V0=R0[0],U0=R0[1],tv=V0.split("~")[0],Os=V0.split("~")[1];tv!==void 0&&Os!==void 0&&l0.push({source:tv,target:Os,count:U0})}),l0}function Ds(){return ys={none:{x:0,y:0}},xs.forEach(function(Tl){ys[Tl.id]={x:Tl.x-us[0],y:Tl.y-us[1]}}),ys}function Fs(Tl){var _c=(0,util_1$o.getEdgeTerminal)(Tl,"source"),l0=(0,util_1$o.getEdgeTerminal)(Tl,"target"),g0=ts(fs[_c]),R0=ts(fs[l0]);return g0<=R0?"".concat(g0,"~").concat(R0):"".concat(R0,"~").concat(g0)}function Rs(Tl){fs={},Tl.forEach(function(_c){fs[_c.id]=_c})}function js(Tl){return arguments.length?(Ss=Tl,Cs(),bs):Ss}function zs(Tl){return arguments.length?typeof Tl=="string"?(ts=function(_c){return _c[Tl]},bs):(ts=Tl,bs):ts}function Us(Tl){return arguments.length?(Ms=Tl,bs):Ms}function Ys(Tl){return arguments.length?($s=Tl,bs):$s}function Ks(Tl){return arguments.length?(vs=Tl,bs):vs}function qs(Tl){return arguments.length?(gs=Tl,bs):gs}function _l(Tl){return arguments.length?(Rs(Tl||[]),ls=Tl||[],bs):ls}function Js(Tl){return arguments.length?(hs=Tl||[],Cs(),bs):hs}function Vs(Tl){return arguments.length?(typeof Tl=="function"?rs=Tl:rs=ns(+Tl),Cs(),bs):rs}function Zs(Tl){return arguments.length?(typeof Tl=="function"?as=Tl:as=ns(+Tl),Cs(),bs):as}function Sl(Tl){return arguments.length?(typeof Tl=="function"?os=Tl:os=ns(+Tl),Cs(),bs):os}function Il(Tl){return arguments.length?(typeof Tl=="function"?is=Tl:is=ns(+Tl),Cs(),bs):is}function Nl(Tl){return arguments.length?(us=Tl,bs):us}return bs.initialize=function(Tl){ls=Tl,Cs()},bs.template=js,bs.groupBy=zs,bs.enableGrouping=Us,bs.strength=Ys,bs.centerX=Ks,bs.centerY=qs,bs.nodes=_l,bs.links=Js,bs.forceNodeSize=Vs,bs.nodeSize=bs.forceNodeSize,bs.forceCharge=Zs,bs.forceLinkDistance=Sl,bs.forceLinkStrength=Il,bs.offset=Nl,bs.getFocis=Ds,bs}forceInABox$1.default=forceInABox;var constants={};Object.defineProperty(constants,"__esModule",{value:!0});constants.FORCE_LAYOUT_TYPE_MAP=constants.LAYOUT_MESSAGE=void 0;constants.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};constants.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0};var __extends$r=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ns,ts,rs,as){as===void 0&&(as=rs);var os=Object.getOwnPropertyDescriptor(ts,rs);(!os||("get"in os?!ts.__esModule:os.writable||os.configurable))&&(os={enumerable:!0,get:function(){return ts[rs]}}),Object.defineProperty(ns,as,os)}:function(ns,ts,rs,as){as===void 0&&(as=rs),ns[as]=ts[rs]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(ns,ts){Object.defineProperty(ns,"default",{enumerable:!0,value:ts})}:function(ns,ts){ns.default=ts}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(ns){if(ns&&ns.__esModule)return ns;var ts={};if(ns!=null)for(var rs in ns)rs!=="default"&&Object.prototype.hasOwnProperty.call(ns,rs)&&__createBinding$1(ts,ns,rs);return __setModuleDefault$1(ts,ns),ts},__importDefault$d=commonjsGlobal&&commonjsGlobal.__importDefault||function(ns){return ns&&ns.__esModule?ns:{default:ns}};Object.defineProperty(force,"__esModule",{value:!0});force.ForceLayout=void 0;var d3Force$1=__importStar$1(require$$0$2),force_in_a_box_1=__importDefault$d(forceInABox$1),util_1$n=requireUtil(),base_1$c=base$1,constants_1$2=constants,ForceLayout=function(ns){__extends$r(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.center=[0,0],as.nodeStrength=null,as.edgeStrength=null,as.preventOverlap=!1,as.clusterNodeStrength=null,as.clusterEdgeStrength=null,as.clusterEdgeDistance=null,as.clusterNodeSize=null,as.clusterFociStrength=null,as.linkDistance=50,as.alphaDecay=.028,as.alphaMin=.001,as.alpha=.3,as.collideStrength=1,as.workerEnabled=!1,as.tick=function(){},as.onLayoutEnd=function(){},as.ticking=void 0,rs&&as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},ts.prototype.init=function(rs){var as=this;as.nodes=rs.nodes||[];var os=rs.edges||[];as.edges=os.map(function(is){var us={},ls=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(is).forEach(function(fs){ls.indexOf(fs)>-1||(us[fs]=is[fs])}),us}),as.ticking=!1},ts.prototype.execute=function(rs){var as=this,os=as.nodes,is=as.edges;if(!as.ticking){var us=as.forceSimulation,ls=as.alphaMin,fs=as.alphaDecay,hs=as.alpha;if(us){if(rs){if(as.clustering&&as.clusterForce&&(as.clusterForce.nodes(os),as.clusterForce.links(is)),us.nodes(os),is&&as.edgeForce)as.edgeForce.links(is);else if(is&&!as.edgeForce){var ys=d3Force$1.forceLink().id(function(Ms){return Ms.id}).links(is);as.edgeStrength&&ys.strength(as.edgeStrength),as.linkDistance&&ys.distance(as.linkDistance),as.edgeForce=ys,us.force("link",ys)}}as.preventOverlap&&as.overlapProcess(us),us.alpha(hs).restart(),this.ticking=!0}else try{var vs=d3Force$1.forceManyBody();if(as.nodeStrength&&vs.strength(as.nodeStrength),us=d3Force$1.forceSimulation().nodes(os),as.clustering){var gs=(0,force_in_a_box_1.default)();gs.centerX(as.center[0]).centerY(as.center[1]).template("force").strength(as.clusterFociStrength),is&&gs.links(is),os&&gs.nodes(os),gs.forceLinkDistance(as.clusterEdgeDistance).forceLinkStrength(as.clusterEdgeStrength).forceCharge(as.clusterNodeStrength).forceNodeSize(as.clusterNodeSize),as.clusterForce=gs,us.force("group",gs)}if(us.force("center",d3Force$1.forceCenter(as.center[0],as.center[1])).force("charge",vs).alpha(hs).alphaDecay(fs).alphaMin(ls),as.preventOverlap&&as.overlapProcess(us),is){var ys=d3Force$1.forceLink().id(function(Ss){return Ss.id}).links(is);as.edgeStrength&&ys.strength(as.edgeStrength),as.linkDistance&&ys.distance(as.linkDistance),as.edgeForce=ys,us.force("link",ys)}if(as.workerEnabled&&!isInWorker()&&(as.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!as.workerEnabled)us.on("tick",function(){as.tick()}).on("end",function(){as.ticking=!1,as.onLayoutEnd&&as.onLayoutEnd()}),as.ticking=!0;else{us.stop();for(var xs=getSimulationTicks(us),ms=1;ms<=xs;ms++)us.tick(),postMessage({nodes:os,currentTick:ms,totalTicks:xs,type:constants_1$2.LAYOUT_MESSAGE.TICK},void 0);as.ticking=!1}as.forceSimulation=us,as.ticking=!0}catch(Ss){as.ticking=!1,console.warn(Ss)}}},ts.prototype.overlapProcess=function(rs){var as=this,os=as.nodeSize,is=as.nodeSpacing,us,ls,fs=as.collideStrength;if((0,util_1$n.isNumber)(is)?ls=function(){return is}:(0,util_1$n.isFunction)(is)?ls=is:ls=function(){return 0},!os)us=function(ys){if(ys.size){if((0,util_1$n.isArray)(ys.size)){var xs=ys.size[0]>ys.size[1]?ys.size[0]:ys.size[1];return xs/2+ls(ys)}if((0,util_1$n.isObject)(ys.size)){var xs=ys.size.width>ys.size.height?ys.size.width:ys.size.height;return xs/2+ls(ys)}return ys.size/2+ls(ys)}return 10+ls(ys)};else if((0,util_1$n.isFunction)(os))us=function(ys){var xs=os(ys);return xs+ls(ys)};else if((0,util_1$n.isArray)(os)){var hs=os[0]>os[1]?os[0]:os[1],vs=hs/2;us=function(ys){return vs+ls(ys)}}else if((0,util_1$n.isNumber)(os)){var gs=os/2;us=function(ys){return gs+ls(ys)}}else us=function(){return 10};rs.force("collisionForce",d3Force$1.forceCollide(us).strength(fs))},ts.prototype.updateCfg=function(rs){var as=this;as.ticking&&(as.forceSimulation.stop(),as.ticking=!1),as.forceSimulation=null,Object.assign(as,rs)},ts.prototype.destroy=function(){var rs=this;rs.ticking&&(rs.forceSimulation.stop(),rs.ticking=!1),rs.nodes=null,rs.edges=null,rs.destroyed=!0},ts}(base_1$c.Base);force.ForceLayout=ForceLayout;function getSimulationTicks(ns){var ts=ns.alphaMin(),rs=ns.alphaTarget(),as=ns.alpha(),os=Math.log((ts-rs)/(as-rs))/Math.log(1-ns.alphaDecay()),is=Math.ceil(os);return is}function isInWorker(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}(function(ns){var ts=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(as,os,is,us){us===void 0&&(us=is);var ls=Object.getOwnPropertyDescriptor(os,is);(!ls||("get"in ls?!os.__esModule:ls.writable||ls.configurable))&&(ls={enumerable:!0,get:function(){return os[is]}}),Object.defineProperty(as,us,ls)}:function(as,os,is,us){us===void 0&&(us=is),as[us]=os[is]}),rs=commonjsGlobal&&commonjsGlobal.__exportStar||function(as,os){for(var is in as)is!=="default"&&!Object.prototype.hasOwnProperty.call(os,is)&&ts(os,as,is)};Object.defineProperty(ns,"__esModule",{value:!0}),rs(force,ns)})(force$1);var circular={},__extends$q=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}();Object.defineProperty(circular,"__esModule",{value:!0});circular.CircularLayout=void 0;var base_1$b=base$1,util_1$m=requireUtil();function initHierarchy(ns,ts,rs,as){ns.forEach(function(os,is){ns[is].children=[],ns[is].parent=[]}),as?ts.forEach(function(os){var is=(0,util_1$m.getEdgeTerminal)(os,"source"),us=(0,util_1$m.getEdgeTerminal)(os,"target"),ls=0;is&&(ls=rs[is]);var fs=0;us&&(fs=rs[us]);var hs=ns[ls].children,vs=ns[fs].parent;hs.push(ns[fs].id),vs.push(ns[ls].id)}):ts.forEach(function(os){var is=(0,util_1$m.getEdgeTerminal)(os,"source"),us=(0,util_1$m.getEdgeTerminal)(os,"target"),ls=0;is&&(ls=rs[is]);var fs=0;us&&(fs=rs[us]);var hs=ns[ls].children,vs=ns[fs].children;hs.push(ns[fs].id),vs.push(ns[ls].id)})}function connect(ns,ts,rs){for(var as=rs.length,os=0;os<as;os++){var is=(0,util_1$m.getEdgeTerminal)(rs[os],"source"),us=(0,util_1$m.getEdgeTerminal)(rs[os],"target");if(ns.id===is&&ts.id===us||ts.id===is&&ns.id===us)return!0}return!1}function compareDegree(ns,ts){var rs=ns.degree,as=ts.degree;return rs<as?-1:rs>as?1:0}var CircularLayout=function(ns){__extends$q(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.radius=null,as.nodeSize=void 0,as.startRadius=null,as.endRadius=null,as.startAngle=0,as.endAngle=2*Math.PI,as.clockwise=!0,as.divisions=1,as.ordering=null,as.angleRatio=1,as.nodes=[],as.edges=[],as.nodeMap={},as.degrees=[],as.width=300,as.height=300,as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},ts.prototype.execute=function(){var rs,as=this,os=as.nodes,is=as.edges,us=os.length;if(us===0){as.onLayoutEnd&&as.onLayoutEnd();return}!as.width&&typeof window<"u"&&(as.width=window.innerWidth),!as.height&&typeof window<"u"&&(as.height=window.innerHeight),as.center||(as.center=[as.width/2,as.height/2]);var ls=as.center;if(us===1){os[0].x=ls[0],os[0].y=ls[1],as.onLayoutEnd&&as.onLayoutEnd();return}var fs=as.radius,hs=as.startRadius,vs=as.endRadius,gs=as.divisions,ys=as.startAngle,xs=as.endAngle,ms=as.angleRatio,Ss=as.ordering,Ms=as.clockwise,$s=as.nodeSpacing,bs=as.nodeSize,Cs=(xs-ys)/us,As={};os.forEach(function(qs,_l){As[qs.id]=_l}),as.nodeMap=As;var Is=(0,util_1$m.getDegree)(os.length,As,is);if(as.degrees=Is,$s){var ks=(0,util_1$m.getFuncByUnknownType)(10,$s),Ps=(0,util_1$m.getFuncByUnknownType)(10,bs),Ds=-1/0;os.forEach(function(qs){var _l=Ps(qs);Ds<_l&&(Ds=_l)});var Fs=0;os.forEach(function(qs,_l){_l===0?Fs+=Ds||10:Fs+=(ks(qs)||0)+(Ds||10)}),fs=Fs/(2*Math.PI)}else!fs&&!hs&&!vs?fs=as.height>as.width?as.width/2:as.height/2:!hs&&vs?hs=vs:hs&&!vs&&(vs=hs);var Rs=Cs*ms,js=[];Ss==="topology"?js=as.topologyOrdering():Ss==="topology-directed"?js=as.topologyOrdering(!0):Ss==="degree"?js=as.degreeOrdering():js=os;for(var zs=Math.ceil(us/gs),Us=0;Us<us;++Us){var Ys=fs;!Ys&&hs!==null&&vs!==null&&(Ys=hs+Us*(vs-hs)/(us-1)),Ys||(Ys=10+Us*100/(us-1));var Ks=ys+Us%zs*Rs+2*Math.PI/gs*Math.floor(Us/zs);Ms||(Ks=xs-Us%zs*Rs-2*Math.PI/gs*Math.floor(Us/zs)),js[Us].x=ls[0]+Math.cos(Ks)*Ys,js[Us].y=ls[1]+Math.sin(Ks)*Ys,js[Us].weight=Is[Us].all}return(rs=as.onLayoutEnd)===null||rs===void 0||rs.call(as),{nodes:js,edges:this.edges}},ts.prototype.topologyOrdering=function(rs){rs===void 0&&(rs=!1);var as=this,os=as.degrees,is=as.edges,us=as.nodes,ls=(0,util_1$m.clone)(us),fs=as.nodeMap,hs=[ls[0]],vs=[us[0]],gs=[],ys=us.length;gs[0]=!0,initHierarchy(ls,is,fs,rs);var xs=0;return ls.forEach(function(ms,Ss){if(Ss!==0)if((Ss===ys-1||os[Ss].all!==os[Ss+1].all||connect(hs[xs],ms,is))&&!gs[Ss])hs.push(ms),vs.push(us[fs[ms.id]]),gs[Ss]=!0,xs++;else{for(var Ms=hs[xs].children,$s=!1,bs=0;bs<Ms.length;bs++){var Cs=fs[Ms[bs]];if(os[Cs].all===os[Ss].all&&!gs[Cs]){hs.push(ls[Cs]),vs.push(us[fs[ls[Cs].id]]),gs[Cs]=!0,$s=!0;break}}for(var As=0;!$s&&(gs[As]||(hs.push(ls[As]),vs.push(us[fs[ls[As].id]]),gs[As]=!0,$s=!0),As++,As!==ys););}}),vs},ts.prototype.degreeOrdering=function(){var rs=this,as=rs.nodes,os=[],is=rs.degrees;return as.forEach(function(us,ls){us.degree=is[ls].all,os.push(us)}),os.sort(compareDegree),os},ts.prototype.getType=function(){return"circular"},ts}(base_1$b.Base);circular.CircularLayout=CircularLayout;var dagre$1={},dagre={},layout$6={},acyclic={},greedyFas={},list={};Object.defineProperty(list,"__esModule",{value:!0});var filterOutLinks=function(ns,ts){if(ns!=="next"&&ns!=="prev")return ts},unlink=function(ns){ns.prev.next=ns.next,ns.next.prev=ns.prev,delete ns.next,delete ns.prev},List$1=function(){function ns(){var ts={};ts.prev=ts,ts.next=ts.prev,this.shortcut=ts}return ns.prototype.dequeue=function(){var ts=this.shortcut,rs=ts.prev;if(rs&&rs!==ts)return unlink(rs),rs},ns.prototype.enqueue=function(ts){var rs=this.shortcut;ts.prev&&ts.next&&unlink(ts),ts.next=rs.next,rs.next.prev=ts,rs.next=ts,ts.prev=rs},ns.prototype.toString=function(){for(var ts=[],rs=this.shortcut,as=rs.prev;as!==rs;)ts.push(JSON.stringify(as,filterOutLinks)),as=as==null?void 0:as.prev;return"[".concat(ts.join(", "),"]")},ns}();list.default=List$1;var GraphEnum;(function(ns){ns.DEFAULT_EDGE_NAME="\0",ns.GRAPH_NODE="\0",ns.EDGE_KEY_DELIM=""})(GraphEnum||(GraphEnum={}));function incrementOrInitEntry(ns,ts){var rs=ns.get(ts)||0;ns.set(ts,rs+1)}function decrementOrRemoveEntry(ns,ts){var rs=ns.get(ts);rs!==void 0&&(rs=rs-1,rs>0?ns.set(ts,rs):ns.delete(ts))}function edgeArgsToId(ns,ts,rs,as){var os=String(ts),is=String(rs);if(!ns&&os>is){var us=os;os=is,is=us}return os+GraphEnum.EDGE_KEY_DELIM+is+GraphEnum.EDGE_KEY_DELIM+(as===void 0?GraphEnum.DEFAULT_EDGE_NAME:as)}function edgeArgsToObj(ns,ts,rs,as){var os=String(ts),is=String(rs),us={v:ts,w:rs};if(!ns&&os>is){var ls=us.v;us.v=us.w,us.w=ls}return as!==void 0&&(us.name=as),us}function edgeObjToId(ns,ts){return edgeArgsToId(ns,ts.v,ts.w,ts.name)}function isFunction$1(ns){return typeof ns=="function"}var nodeToJSON=function(ts){return ts.nodes().map(function(rs){var as=ts.node(rs),os=ts.parent(rs),is={id:rs,value:as,parent:os};return is.value===void 0&&delete is.value,is.parent===void 0&&delete is.parent,is})},edgeToJSON=function(ts){return ts.edges().map(function(rs){var as=ts.edge(rs),os={v:rs.v,w:rs.w,value:as,name:rs.name};return os.name===void 0&&delete os.name,os.value===void 0&&delete os.value,os})},write=function(ts){var rs={options:{directed:ts.isDirected(),multigraph:ts.isMultigraph(),compound:ts.isCompound()},nodes:nodeToJSON(ts),edges:edgeToJSON(ts),value:ts.graph()};return rs.value===void 0&&delete rs.value,rs},read$1=function(ts){var rs=new Graph$2(ts.options);return ts.value!==void 0&&rs.setGraph(ts.value),ts.nodes.forEach(function(as){rs.setNode(as.id,as.value),as.parent&&rs.setParent(as.id,as.parent)}),ts.edges.forEach(function(as){rs.setEdge(as.v,as.w,as.value,as.name)}),rs};function ownKeys$4(ns,ts){var rs=Object.keys(ns);if(Object.getOwnPropertySymbols){var as=Object.getOwnPropertySymbols(ns);ts&&(as=as.filter(function(os){return Object.getOwnPropertyDescriptor(ns,os).enumerable})),rs.push.apply(rs,as)}return rs}function _objectSpread$3(ns){for(var ts=1;ts<arguments.length;ts++){var rs=arguments[ts]!=null?arguments[ts]:{};ts%2?ownKeys$4(Object(rs),!0).forEach(function(as){_defineProperty$3(ns,as,rs[as])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ns,Object.getOwnPropertyDescriptors(rs)):ownKeys$4(Object(rs)).forEach(function(as){Object.defineProperty(ns,as,Object.getOwnPropertyDescriptor(rs,as))})}return ns}function _defineProperty$3(ns,ts,rs){return ts in ns?Object.defineProperty(ns,ts,{value:rs,enumerable:!0,configurable:!0,writable:!0}):ns[ts]=rs,ns}function _classCallCheck$5(ns,ts){if(!(ns instanceof ts))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(ns,ts){for(var rs=0;rs<ts.length;rs++){var as=ts[rs];as.enumerable=as.enumerable||!1,as.configurable=!0,"value"in as&&(as.writable=!0),Object.defineProperty(ns,as.key,as)}}function _createClass$5(ns,ts,rs){return ts&&_defineProperties$4(ns.prototype,ts),rs&&_defineProperties$4(ns,rs),Object.defineProperty(ns,"prototype",{writable:!1}),ns}var defaultOption={compound:!1,multigraph:!1,directed:!0},Graph$2=function(){function ns(){var ts=this,rs=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck$5(this,ns),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=GraphEnum.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return ts.directed},this.isMultigraph=function(){return ts.multigraph},this.isCompound=function(){return ts.compound},this.setGraph=function(os){return ts.label=os,ts},this.graph=function(){return ts.label},this.setDefaultNodeLabel=function(os){return isFunction$1(os)?ts.defaultNodeLabelFn=os:ts.defaultNodeLabelFn=function(){return os},ts},this.nodeCount=function(){return ts.nodeCountNum},this.node=function(os){return ts.nodesLabelMap.get(os)},this.nodes=function(){return Array.from(ts.nodesLabelMap.keys())},this.sources=function(){return ts.nodes().filter(function(os){var is;return!(!((is=ts.inEdgesMap.get(os))===null||is===void 0)&&is.size)})},this.sinks=function(){return ts.nodes().filter(function(os){var is;return!(!((is=ts.outEdgesMap.get(os))===null||is===void 0)&&is.size)})},this.setNodes=function(os,is){return os.map(function(us){return ts.setNode(us,is)}),ts},this.hasNode=function(os){return ts.nodesLabelMap.has(os)},this.checkCompound=function(){if(!ts.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(os){if(ts.isCompound()){var is,us=(is=ts.parentMap)===null||is===void 0?void 0:is.get(os);if(us!==ts.GRAPH_NODE)return us}},this.removeFromParentsChildList=function(os){var is=ts.parentMap.get(os);ts.childrenMap.get(is).delete(os)},this.setParent=function(os,is){var us,ls;ts.checkCompound();for(var fs=is===void 0?ts.GRAPH_NODE:is,hs=ts.parent(fs);hs;){if(os===hs)throw new Error("Setting "+is+" as parent of "+os+" would create a cycle");hs=ts.parent(hs)}is&&ts.setNode(is),ts.setNode(os),ts.removeFromParentsChildList(os),(us=ts.parentMap)===null||us===void 0||us.set(os,fs);var vs=ts.childrenMap.get(fs);return vs.set(os,!0),(ls=ts.childrenMap)===null||ls===void 0||ls.set(fs,vs),ts},this.children=function(os){var is=os===void 0?ts.GRAPH_NODE:os;if(ts.isCompound()){var us,ls=(us=ts.childrenMap)===null||us===void 0?void 0:us.get(is);return ls?Array.from(ls.keys()):void 0}if(is===ts.GRAPH_NODE)return ts.nodes();if(os&&ts.hasNode(os))return[]},this.predecessors=function(os){var is=ts.predecessorsMap.get(os);return is?Array.from(is.keys()):void 0},this.successors=function(os){var is=ts.successorsMap.get(os);return is?Array.from(is.keys()):void 0},this.neighbors=function(os){var is;if(ts.hasNode(os))return Array.from(new Set((is=ts.predecessors(os))===null||is===void 0?void 0:is.concat(ts.successors(os))))},this.isLeaf=function(os){var is;if(ts.isDirected()){var us;return!(!((us=ts.successors(os))===null||us===void 0)&&us.length)}return!(!((is=ts.neighbors(os))===null||is===void 0)&&is.length)},this.filterNodes=function(os){var is=ts.directed,us=ts.multigraph,ls=ts.compound,fs=new ns({directed:is,multigraph:us,compound:ls});if(fs.setGraph(ts.graph()),ts.nodes().forEach(function(vs){os(vs)&&fs.setNode(vs,ts.node(vs))}),ts.edges().forEach(function(vs){fs.hasNode(vs.v)&&fs.hasNode(vs.w)&&fs.setEdgeObj(vs,ts.edge(vs))}),ls){var hs=function(gs){for(var ys=ts.parent(gs);ys!==void 0&&!fs.hasNode(ys);)ys=ts.parent(ys);return ys};fs.nodes().forEach(function(vs){fs.setParent(vs,hs(vs))})}return fs},this.setDefaultEdgeLabel=function(os){return isFunction$1(os)?ts.defaultEdgeLabelFn=os:ts.defaultEdgeLabelFn=function(){return os},ts},this.edgeCount=function(){return ts.edgeCountNum},this.setEdgeObj=function(os,is){return ts.setEdge(os.v,os.w,is,os.name)},this.setPath=function(os,is){return os.reduce(function(us,ls){return ts.setEdge(us,ls,is),ls}),ts},this.edgeFromArgs=function(os,is,us){return ts.edge({v:os,w:is,name:us})},this.edge=function(os){return ts.edgesLabelsMap.get(edgeObjToId(ts.isDirected(),os))},this.hasEdge=function(os,is,us){return ts.edgesLabelsMap.has(edgeObjToId(ts.isDirected(),{v:os,w:is,name:us}))},this.removeEdgeObj=function(os){var is=os.v,us=os.w,ls=os.name;return ts.removeEdge(is,us,ls)},this.edges=function(){return Array.from(ts.edgesMap.values())},this.inEdges=function(os,is){var us=ts.inEdgesMap.get(os);if(us)return Array.from(us.values()).filter(function(ls){return!is||ls.v===is})},this.outEdges=function(os,is){var us=ts.outEdgesMap.get(os);if(us)return Array.from(us.values()).filter(function(ls){return!is||ls.w===is})},this.nodeEdges=function(os,is){var us;if(ts.hasNode(os))return(us=ts.inEdges(os,is))===null||us===void 0?void 0:us.concat(ts.outEdges(os,is))},this.toJSON=function(){return write(ts)},this.nodeInDegree=function(os){var is=ts.inEdgesMap.get(os);return is?is.size:0},this.nodeOutDegree=function(os){var is=ts.outEdgesMap.get(os);return is?is.size:0},this.nodeDegree=function(os){return ts.nodeInDegree(os)+ts.nodeOutDegree(os)},this.source=function(os){return os.v},this.target=function(os){return os.w};var as=_objectSpread$3(_objectSpread$3({},defaultOption),rs);this.compound=as.compound,this.directed=as.directed,this.multigraph=as.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return _createClass$5(ns,[{key:"setNode",value:function(rs,as){var os=this.nodesLabelMap,is=this.defaultNodeLabelFn,us=this.isCompound,ls=this.parentMap,fs=this.childrenMap,hs=this.inEdgesMap,vs=this.outEdgesMap,gs=this.predecessorsMap,ys=this.successorsMap;if(os.has(rs))return as!==void 0&&os.set(rs,as),this;if(os.set(rs,as||is(rs)),us()){var xs;ls==null||ls.set(rs,this.GRAPH_NODE),fs==null||fs.set(rs,new Map),fs!=null&&fs.has(this.GRAPH_NODE)||fs==null||fs.set(this.GRAPH_NODE,new Map),fs==null||(xs=fs.get(this.GRAPH_NODE))===null||xs===void 0||xs.set(rs,!0)}return[hs,vs,gs,ys].forEach(function(ms){return ms.set(rs,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(rs){var as=this;if(this.hasNode(rs)){var os=function(Ms){as.removeEdge(Ms.v,Ms.w,Ms.name)},is=this.inEdgesMap,us=this.outEdgesMap,ls=this.predecessorsMap,fs=this.successorsMap,hs=this.nodesLabelMap;if(this.isCompound()){var vs,gs,ys;this.removeFromParentsChildList(rs),(vs=this.parentMap)===null||vs===void 0||vs.delete(rs),(gs=this.children(rs))===null||gs===void 0||gs.forEach(function(Ss){return as.setParent(Ss)}),(ys=this.childrenMap)===null||ys===void 0||ys.delete(rs)}var xs=is.get(rs),ms=us.get(rs);Array.from(xs.values()).forEach(function(Ss){return os(Ss)}),Array.from(ms.values()).forEach(function(Ss){return os(Ss)}),hs.delete(rs),is.delete(rs),us.delete(rs),ls.delete(rs),fs.delete(rs),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(rs,as,os,is){var us,ls,fs=edgeArgsToObj(this.isDirected(),rs,as,is),hs=edgeObjToId(this.isDirected(),fs),vs=fs.v,gs=fs.w;if(this.edgesLabelsMap.has(hs))return this.edgesLabelsMap.set(hs,os),this;if(is!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(vs),this.setNode(gs),this.edgesLabelsMap.set(hs,os||this.defaultEdgeLabelFn(vs,gs,is)),Object.freeze(fs),this.edgesMap.set(hs,fs);var ys=this.predecessorsMap.get(gs),xs=this.successorsMap.get(vs);return incrementOrInitEntry(ys,vs),incrementOrInitEntry(xs,gs),(us=this.inEdgesMap.get(gs))===null||us===void 0||us.set(hs,fs),(ls=this.outEdgesMap.get(vs))===null||ls===void 0||ls.set(hs,fs),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(rs,as,os){var is=edgeArgsToId(this.isDirected(),rs,as,os),us=this.edgesMap.get(is);if(us){var ls=edgeArgsToObj(this.isDirected(),rs,as,os),fs=ls.v,hs=ls.w;this.edgesLabelsMap.delete(is),this.edgesMap.delete(is);var vs=this.predecessorsMap.get(hs),gs=this.successorsMap.get(fs);decrementOrRemoveEntry(vs,fs),decrementOrRemoveEntry(gs,hs),this.inEdgesMap.get(hs).delete(is),this.outEdgesMap.get(fs).delete(is),this.edgeCountNum-=1}return this}}]),ns}();Graph$2.fromJSON=read$1;function _typeof$8(ns){"@babel/helpers - typeof";return _typeof$8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ts){return typeof ts}:function(ts){return ts&&typeof Symbol=="function"&&ts.constructor===Symbol&&ts!==Symbol.prototype?"symbol":typeof ts},_typeof$8(ns)}function _classCallCheck$4(ns,ts){if(!(ns instanceof ts))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(ns,ts){for(var rs=0;rs<ts.length;rs++){var as=ts[rs];as.enumerable=as.enumerable||!1,as.configurable=!0,"value"in as&&(as.writable=!0),Object.defineProperty(ns,as.key,as)}}function _createClass$4(ns,ts,rs){return ts&&_defineProperties$3(ns.prototype,ts),rs&&_defineProperties$3(ns,rs),Object.defineProperty(ns,"prototype",{writable:!1}),ns}function _get(){return typeof Reflect<"u"&&Reflect.get?_get=Reflect.get:_get=function(ts,rs,as){var os=_superPropBase(ts,rs);if(os){var is=Object.getOwnPropertyDescriptor(os,rs);return is.get?is.get.call(arguments.length<3?ts:as):is.value}},_get.apply(this,arguments)}function _superPropBase(ns,ts){for(;!Object.prototype.hasOwnProperty.call(ns,ts)&&(ns=_getPrototypeOf$1(ns),ns!==null););return ns}function _inherits$1(ns,ts){if(typeof ts!="function"&&ts!==null)throw new TypeError("Super expression must either be null or a function");ns.prototype=Object.create(ts&&ts.prototype,{constructor:{value:ns,writable:!0,configurable:!0}}),Object.defineProperty(ns,"prototype",{writable:!1}),ts&&_setPrototypeOf$1(ns,ts)}function _setPrototypeOf$1(ns,ts){return _setPrototypeOf$1=Object.setPrototypeOf||function(as,os){return as.__proto__=os,as},_setPrototypeOf$1(ns,ts)}function _createSuper$1(ns){var ts=_isNativeReflectConstruct$1();return function(){var as=_getPrototypeOf$1(ns),os;if(ts){var is=_getPrototypeOf$1(this).constructor;os=Reflect.construct(as,arguments,is)}else os=as.apply(this,arguments);return _possibleConstructorReturn$1(this,os)}}function _possibleConstructorReturn$1(ns,ts){if(ts&&(_typeof$8(ts)==="object"||typeof ts=="function"))return ts;if(ts!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(ns)}function _assertThisInitialized$1(ns){if(ns===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ns}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$1(ns){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf:function(rs){return rs.__proto__||Object.getPrototypeOf(rs)},_getPrototypeOf$1(ns)}var GraphWithEvent=function(ns){_inherits$1(rs,ns);var ts=_createSuper$1(rs);function rs(){var as;_classCallCheck$4(this,rs);for(var os=arguments.length,is=new Array(os),us=0;us<os;us++)is[us]=arguments[us];return as=ts.call.apply(ts,[this].concat(is)),as.eventPool={},as}return _createClass$4(rs,[{key:"appendEvent",value:function(os,is){this.eventPool[os]||(this.eventPool[os]=[]),this.eventPool[os].push(is)}},{key:"removeEvent",value:function(os,is){if(this.eventPool[os]){var us=this.eventPool[os].indexOf(is);us>-1&&this.eventPool[os].splice(us,1)}}},{key:"emitEvent",value:function(os){for(var is=arguments.length,us=new Array(is>1?is-1:0),ls=1;ls<is;ls++)us[ls-1]=arguments[ls];this.eventPool[os]&&this.eventPool[os].forEach(function(fs){fs.apply(void 0,us)})}},{key:"setNode",value:function(os,is){return _get(_getPrototypeOf$1(rs.prototype),"setNode",this).call(this,os,is),this.emitEvent("nodeAdd",os,is),this}},{key:"removeNode",value:function(os){return _get(_getPrototypeOf$1(rs.prototype),"removeNode",this).call(this,os),this.emitEvent("nodeRemove",os),this}},{key:"setEdge",value:function(os,is,us,ls){return _get(_getPrototypeOf$1(rs.prototype),"setEdge",this).call(this,os,is,us,ls),this.emitEvent("edgeAdd",os,is,us,ls),this}},{key:"removeEdge",value:function(os,is,us){return _get(_getPrototypeOf$1(rs.prototype),"removeEdge",this).call(this,os,is,us),this.emitEvent("edgeRemove",os,is,us),this}}]),rs}(Graph$2);function _defineProperties$2(ns,ts){for(var rs=0;rs<ts.length;rs++){var as=ts[rs];as.enumerable=as.enumerable||!1,as.configurable=!0,"value"in as&&(as.writable=!0),Object.defineProperty(ns,as.key,as)}}function _createClass$3(ns,ts,rs){return ts&&_defineProperties$2(ns.prototype,ts),rs&&_defineProperties$2(ns,rs),Object.defineProperty(ns,"prototype",{writable:!1}),ns}function _classCallCheck$3(ns,ts){if(!(ns instanceof ts))throw new TypeError("Cannot call a class as a function")}var PriorityQueue=_createClass$3(function ns(){var ts=this;_classCallCheck$3(this,ns),this.arr=[],this.keyIndice=new Map,this.size=function(){return ts.arr.length},this.keys=function(){return ts.arr.map(function(rs){return rs.key})},this.has=function(rs){return ts.keyIndice.has(rs)},this.priority=function(rs){var as=ts.keyIndice.get(rs);if(as!==void 0)return ts.arr[as].priority},this.swap=function(rs,as){var os=ts.arr,is=ts.keyIndice,us=[os[rs],os[as]],ls=us[0],fs=us[1];os[rs]=fs,os[as]=ls,is.set(ls.key,as),is.set(fs.key,rs)},this.innerDecrease=function(rs){for(var as=ts.arr,os=as[rs].priority,is,us=rs;us!==0;){var ls;if(is=us>>1,((ls=as[is])===null||ls===void 0?void 0:ls.priority)<os)break;ts.swap(us,is),us=is}},this.heapify=function(rs){var as=ts.arr,os=rs<<1,is=os+1,us=rs;os<as.length&&(us=as[os].priority<as[us].priority?os:us,is<as.length&&(us=as[is].priority<as[us].priority?is:us),us!==rs&&(ts.swap(rs,us),ts.heapify(us)))},this.min=function(){if(ts.size()===0)throw new Error("Queue underflow");return ts.arr[0].key},this.add=function(rs,as){var os=ts.keyIndice,is=ts.arr;if(!os.has(rs)){var us=is.length;return os.set(rs,us),is.push({key:rs,priority:as}),ts.innerDecrease(us),!0}return!1},this.removeMin=function(){ts.swap(0,ts.arr.length-1);var rs=ts.arr.pop();return ts.keyIndice.delete(rs.key),ts.heapify(0),rs.key},this.decrease=function(rs,as){if(!ts.has(rs))throw new Error("There's no key named ".concat(rs));var os=ts.keyIndice.get(rs);if(as>ts.arr[os].priority)throw new Error("New priority is greater than current priority.Key: ".concat(rs," Old: + ").concat(ts.arr[os].priority," New: ").concat(as));ts.arr[os].priority=as,ts.innerDecrease(os)}}),prim=function(ts,rs){var as=new Graph$2,os=new Map,is=new PriorityQueue,us;function ls(vs){var gs=vs.v===us?vs.w:vs.v,ys=is.priority(gs);if(ys!==void 0){var xs=rs(vs);xs<ys&&(os.set(gs,us),is.decrease(gs,xs))}}if(ts.nodeCount()===0)return as;ts.nodes().forEach(function(vs){is.add(vs,Number.POSITIVE_INFINITY),as.setNode(vs)}),is.decrease(ts.nodes()[0],0);for(var fs=!1;is.size()>0;){var hs;if(us=is.removeMin(),os.has(us))as.setEdge(us,os.get(us));else{if(fs)throw new Error("Input graph is not connected: "+ts.graph());fs=!0}(hs=ts.nodeEdges(us))===null||hs===void 0||hs.forEach(ls)}return as},components=function(ts){var rs=new Set,as=[],os=ts.nodes();return os.forEach(function(is){for(var us=[],ls=[is];ls.length>0;){var fs=ls.pop();if(!rs.has(fs)){var hs,vs;rs.add(fs),us.push(fs),(hs=ts.successors(fs))===null||hs===void 0||hs.forEach(function(gs){return ls.push(gs)}),(vs=ts.predecessors(fs))===null||vs===void 0||vs.forEach(function(gs){return ls.push(gs)})}}us.length&&as.push(us)}),as},doDFS=function ns(ts,rs,as,os,is,us){os.includes(rs)||(os.push(rs),as||us.push(rs),is(rs).forEach(function(ls){return ns(ts,ls,as,os,is,us)}),as&&us.push(rs))},dfs$1=function(ts,rs,as){var os=Array.isArray(rs)?rs:[rs],is=function(hs){return ts.isDirected()?ts.successors(hs):ts.neighbors(hs)},us=[],ls=[];return os.forEach(function(fs){if(ts.hasNode(fs))doDFS(ts,fs,as==="post",ls,is,us);else throw new Error("Graph does not have node: "+fs)}),us};function _slicedToArray$2(ns,ts){return _arrayWithHoles$2(ns)||_iterableToArrayLimit$2(ns,ts)||_unsupportedIterableToArray$3(ns,ts)||_nonIterableRest$2()}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$3(ns,ts){if(ns){if(typeof ns=="string")return _arrayLikeToArray$3(ns,ts);var rs=Object.prototype.toString.call(ns).slice(8,-1);if(rs==="Object"&&ns.constructor&&(rs=ns.constructor.name),rs==="Map"||rs==="Set")return Array.from(ns);if(rs==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rs))return _arrayLikeToArray$3(ns,ts)}}function _arrayLikeToArray$3(ns,ts){(ts==null||ts>ns.length)&&(ts=ns.length);for(var rs=0,as=new Array(ts);rs<ts;rs++)as[rs]=ns[rs];return as}function _iterableToArrayLimit$2(ns,ts){var rs=ns==null?null:typeof Symbol<"u"&&ns[Symbol.iterator]||ns["@@iterator"];if(rs!=null){var as=[],os=!0,is=!1,us,ls;try{for(rs=rs.call(ns);!(os=(us=rs.next()).done)&&(as.push(us.value),!(ts&&as.length===ts));os=!0);}catch(fs){is=!0,ls=fs}finally{try{!os&&rs.return!=null&&rs.return()}finally{if(is)throw ls}}return as}}function _arrayWithHoles$2(ns){if(Array.isArray(ns))return ns}var DEFAULT_WEIGHT_FUNC$1=function(){return 1},dijkstra=function(ts,rs,as,os){return runDijkstra(ts,rs,as||DEFAULT_WEIGHT_FUNC$1,os||function(is){return ts.outEdges(is)})},runDijkstra=function(ts,rs,as,os){var is=new Map,us=new PriorityQueue,ls,fs,hs=function(ys){var xs=ys.v!==ls?ys.v:ys.w,ms=is.get(xs),Ss=as(ys),Ms=fs.distance+Ss;if(Ss<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+ys+" Weight: "+Ss);Ms<ms.distance&&(ms.distance=Ms,ms.predecessor=ls,us.decrease(xs,Ms))};for(ts.nodes().forEach(function(gs){var ys=gs===rs?0:Number.POSITIVE_INFINITY;is.set(gs,{distance:ys}),us.add(gs,ys)});us.size()>0&&(ls=us.removeMin(),fs=is.get(ls),!(fs&&fs.distance===Number.POSITIVE_INFINITY));)os(ls).forEach(hs);var vs={};return Array.from(is.entries()).forEach(function(gs){var ys=_slicedToArray$2(gs,2),xs=ys[0],ms=ys[1];return vs[String(xs)]=ms,vs}),vs},dijkstraAll=function(ts,rs,as){var os={};return ts.nodes().forEach(function(is){return os[String(is)]=dijkstra(ts,is,rs,as),os}),os},tarjan=function(ts){var rs=0,as=[],os=new Map,is=[];function us(ls){var fs,hs={onStack:!0,lowlink:rs,index:rs};if(os.set(ls,hs),rs+=1,as.push(ls),(fs=ts.successors(ls))===null||fs===void 0||fs.forEach(function(xs){var ms;if(os.has(xs)){if(!((ms=os.get(xs))===null||ms===void 0)&&ms.onStack){var Ms=os.get(xs);hs.lowlink=Math.min(hs.lowlink,Ms.index)}}else{us(xs);var Ss=os.get(xs);hs.lowlink=Math.min(hs.lowlink,Ss.lowlink)}}),hs.lowlink===hs.index){var vs=[],gs;do{gs=as.pop();var ys=os.get(gs);ys.onStack=!1,vs.push(gs)}while(ls!==gs);is.push(vs)}}return ts.nodes().forEach(function(ls){os.has(ls)||us(ls)}),is},findCycles=function(ts){return tarjan(ts).filter(function(rs){return rs.length>1||rs.length===1&&ts.hasEdge(rs[0],rs[0])})};function _typeof$7(ns){"@babel/helpers - typeof";return _typeof$7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ts){return typeof ts}:function(ts){return ts&&typeof Symbol=="function"&&ts.constructor===Symbol&&ts!==Symbol.prototype?"symbol":typeof ts},_typeof$7(ns)}function _defineProperties$1(ns,ts){for(var rs=0;rs<ts.length;rs++){var as=ts[rs];as.enumerable=as.enumerable||!1,as.configurable=!0,"value"in as&&(as.writable=!0),Object.defineProperty(ns,as.key,as)}}function _createClass$2(ns,ts,rs){return ts&&_defineProperties$1(ns.prototype,ts),rs&&_defineProperties$1(ns,rs),Object.defineProperty(ns,"prototype",{writable:!1}),ns}function _classCallCheck$2(ns,ts){if(!(ns instanceof ts))throw new TypeError("Cannot call a class as a function")}function _inherits(ns,ts){if(typeof ts!="function"&&ts!==null)throw new TypeError("Super expression must either be null or a function");ns.prototype=Object.create(ts&&ts.prototype,{constructor:{value:ns,writable:!0,configurable:!0}}),Object.defineProperty(ns,"prototype",{writable:!1}),ts&&_setPrototypeOf(ns,ts)}function _createSuper(ns){var ts=_isNativeReflectConstruct();return function(){var as=_getPrototypeOf(ns),os;if(ts){var is=_getPrototypeOf(this).constructor;os=Reflect.construct(as,arguments,is)}else os=as.apply(this,arguments);return _possibleConstructorReturn(this,os)}}function _possibleConstructorReturn(ns,ts){if(ts&&(_typeof$7(ts)==="object"||typeof ts=="function"))return ts;if(ts!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(ns)}function _assertThisInitialized(ns){if(ns===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ns}function _wrapNativeSuper(ns){var ts=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(as){if(as===null||!_isNativeFunction(as))return as;if(typeof as!="function")throw new TypeError("Super expression must either be null or a function");if(typeof ts<"u"){if(ts.has(as))return ts.get(as);ts.set(as,os)}function os(){return _construct(as,arguments,_getPrototypeOf(this).constructor)}return os.prototype=Object.create(as.prototype,{constructor:{value:os,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(os,as)},_wrapNativeSuper(ns)}function _construct(ns,ts,rs){return _isNativeReflectConstruct()?_construct=Reflect.construct:_construct=function(os,is,us){var ls=[null];ls.push.apply(ls,is);var fs=Function.bind.apply(os,ls),hs=new fs;return us&&_setPrototypeOf(hs,us.prototype),hs},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _isNativeFunction(ns){return Function.toString.call(ns).indexOf("[native code]")!==-1}function _setPrototypeOf(ns,ts){return _setPrototypeOf=Object.setPrototypeOf||function(as,os){return as.__proto__=os,as},_setPrototypeOf(ns,ts)}function _getPrototypeOf(ns){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(rs){return rs.__proto__||Object.getPrototypeOf(rs)},_getPrototypeOf(ns)}var CycleException=function(ns){_inherits(rs,ns);var ts=_createSuper(rs);function rs(){return _classCallCheck$2(this,rs),ts.apply(this,arguments)}return _createClass$2(rs)}(_wrapNativeSuper(Error));function topsort(ns){var ts=new Set,rs=new Set,as=[];function os(is){if(rs.has(is))throw new CycleException;if(!ts.has(is)){var us;rs.add(is),ts.add(is),(us=ns.predecessors(is))===null||us===void 0||us.forEach(os),rs.delete(is),as.push(is)}}if(ns.sinks().forEach(os),ts.size!==ns.nodeCount())throw new CycleException;return as}var isAcyclic=function(ts){try{topsort(ts)}catch(rs){if(rs instanceof CycleException)return!1;throw rs}return!0},postorder=function(ts,rs){return dfs$1(ts,rs,"post")},preorder=function(ts,rs){return dfs$1(ts,rs,"pre")},DEFAULT_WEIGHT_FUNC=function(){return 1};function floydWarshall$2(ns,ts,rs){return runFloydWarshall(ns,ts||DEFAULT_WEIGHT_FUNC,rs||function(as){return ns.outEdges(as)})}function runFloydWarshall(ns,ts,rs){var as={},os=ns.nodes();return os.forEach(function(is){var us=String(is);as[us]={},as[us][us]={distance:0},os.forEach(function(ls){is!==ls&&(as[us][String(ls)]={distance:Number.POSITIVE_INFINITY})}),rs(is).forEach(function(ls){var fs=ls.v===is?ls.w:ls.v,hs=ts(ls);as[us][String(fs)]={distance:hs,predecessor:is}})}),os.forEach(function(is){var us=String(is),ls=as[us];os.forEach(function(fs){var hs=String(fs),vs=as[hs];os.forEach(function(gs){var ys=String(gs),xs=vs[us],ms=ls[ys],Ss=vs[ys],Ms=xs.distance+ms.distance;Ms<Ss.distance&&(Ss.distance=Ms,Ss.predecessor=ms.predecessor)})})}),as}const index$3=Object.freeze(Object.defineProperty({__proto__:null,components,dfs:dfs$1,dijkstra,dijkstraAll,findCycles,floydWarshall:floydWarshall$2,isAcyclic,postorder,preorder,prim,tarjan,topsort},Symbol.toStringTag,{value:"Module"}));var containSameNodes=function(ts,rs){for(var as=ts.nodes(),os=0;os<as.length;os++){var is=as[os];if(rs.hasNode(is))return!0}return!1},containSameEdges=function(ts,rs){for(var as=ts.edges(),os=0;os<as.length;os++){var is=as[os];if(rs.hasEdge(is.v,is.w,is.name))return!0}return!1},getSameNodes=function(ts,rs){var as=ts.nodes(),os=as.filter(function(is){return rs.hasNode(is)});return os},getSameEdges=function(ts,rs){var as=ts.edges(),os=as.filter(function(is){return rs.hasEdge(is.v,is.w,is.name)});return os},isGraphOptionSame=function(ts,rs){return ts.isCompound()===rs.isCompound()&&ts.isDirected()===rs.isDirected()&&ts.isMultigraph()===rs.isMultigraph()},containAllSameNodes=function(ts,rs){var as=getSameNodes(ts,rs);return as.length===ts.nodes().length},containAllSameEdges=function(ts,rs){var as=getSameEdges(ts,rs);return as.length===ts.edges().length},isGraphSame=function(ts,rs){return isGraphOptionSame(ts,rs)&&ts.nodeCount()===rs.nodeCount()&&containAllSameNodes(ts,rs)&&ts.edgeCount()===rs.edgeCount()&&containAllSameEdges(ts,rs)},isGraphContainsAnother=function(ts,rs){return containAllSameNodes(ts,rs)&&containAllSameEdges(ts,rs)};function _slicedToArray$1(ns,ts){return _arrayWithHoles$1(ns)||_iterableToArrayLimit$1(ns,ts)||_unsupportedIterableToArray$2(ns,ts)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(ns,ts){if(ns){if(typeof ns=="string")return _arrayLikeToArray$2(ns,ts);var rs=Object.prototype.toString.call(ns).slice(8,-1);if(rs==="Object"&&ns.constructor&&(rs=ns.constructor.name),rs==="Map"||rs==="Set")return Array.from(ns);if(rs==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rs))return _arrayLikeToArray$2(ns,ts)}}function _arrayLikeToArray$2(ns,ts){(ts==null||ts>ns.length)&&(ts=ns.length);for(var rs=0,as=new Array(ts);rs<ts;rs++)as[rs]=ns[rs];return as}function _iterableToArrayLimit$1(ns,ts){var rs=ns==null?null:typeof Symbol<"u"&&ns[Symbol.iterator]||ns["@@iterator"];if(rs!=null){var as=[],os=!0,is=!1,us,ls;try{for(rs=rs.call(ns);!(os=(us=rs.next()).done)&&(as.push(us.value),!(ts&&as.length===ts));os=!0);}catch(fs){is=!0,ls=fs}finally{try{!os&&rs.return!=null&&rs.return()}finally{if(is)throw ls}}return as}}function _arrayWithHoles$1(ns){if(Array.isArray(ns))return ns}function isGraph(ns){return ns instanceof Graph$2}function isSimpleGraph(ns){if(ns.isMultigraph())return!1;for(var ts=ns.edges(),rs=new Map,as=0;as<ts.length;as++){var os=ts[as];if(os.v===os.w)return!1;var is=[os.v,os.w].sort(),us=_slicedToArray$1(is,2),ls=us[0],fs=us[1],hs="".concat(ls,"-").concat(fs);if(rs.has(hs))return!1;rs.set(hs,!0)}return!0}function isNullGraph(ns){return ns.nodes().length===0}function hasSelfLoop(ns){for(var ts=ns.edges(),rs=0;rs<ts.length;rs++){var as=ts[rs];if(as.v===as.w)return!0}return!1}const index$2=Object.freeze(Object.defineProperty({__proto__:null,hasSelfLoop,isGraph,isNullGraph,isSimpleGraph},Symbol.toStringTag,{value:"Module"}));var isGraphComplement=function(ts,rs){if(!isSimpleGraph(ts)||!isSimpleGraph(rs)||!containAllSameNodes(ts,rs)||containSameEdges(ts,rs))return!1;var as=ts.nodeCount();return ts.edgeCount()+rs.edgeCount()===as*(as-1)/2};const index$1=Object.freeze(Object.defineProperty({__proto__:null,containAllSameEdges,containAllSameNodes,containSameEdges,containSameNodes,getSameEdges,getSameNodes,isGraphComplement,isGraphContainsAnother,isGraphOptionSame,isGraphSame},Symbol.toStringTag,{value:"Module"}));var getGraphComplement=function(ts){if(!isSimpleGraph(ts))return null;for(var rs=ts.nodeCount(),as=new Graph$2({compound:ts.isCompound(),directed:ts.isDirected(),multigraph:ts.isMultigraph()}),os=ts.nodes(),is=0;is<rs;is++){var us=os[is];as.setNode(us,ts.node(us));for(var ls=is+1;ls<rs;ls++){var fs=os[ls];ts.hasEdge(us,fs)||as.setEdge(us,fs)}}return as};const index=Object.freeze(Object.defineProperty({__proto__:null,getGraphComplement},Symbol.toStringTag,{value:"Module"})),es$1=Object.freeze(Object.defineProperty({__proto__:null,Graph:Graph$2,GraphWithEvent,algorithm:index$3,comparision:index$1,essence:index$2,generate:index},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(es$1);var __extends$p=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__importDefault$c=commonjsGlobal&&commonjsGlobal.__importDefault||function(ns){return ns&&ns.__esModule?ns:{default:ns}};Object.defineProperty(greedyFas,"__esModule",{value:!0});var list_1=__importDefault$c(list),graphlib_1$1=require$$0$1,List=function(ns){__extends$p(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts}(list_1.default),StateGraph=function(ns){__extends$p(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts}(graphlib_1$1.Graph),DEFAULT_WEIGHT_FN=function(){return 1},greedyFAS=function(ns,ts){var rs;if(ns.nodeCount()<=1)return[];var as=buildState(ns,ts||DEFAULT_WEIGHT_FN),os=doGreedyFAS(as.graph,as.buckets,as.zeroIdx);return(rs=os.map(function(is){return ns.outEdges(is.v,is.w)}))===null||rs===void 0?void 0:rs.flat()},doGreedyFAS=function(ns,ts,rs){for(var as=[],os=ts[ts.length-1],is=ts[0],us;ns.nodeCount();){for(;us=is.dequeue();)removeNode(ns,ts,rs,us);for(;us=os.dequeue();)removeNode(ns,ts,rs,us);if(ns.nodeCount()){for(var ls=ts.length-2;ls>0;--ls)if(us=ts[ls].dequeue(),us){as=as.concat(removeNode(ns,ts,rs,us,!0));break}}}return as},removeNode=function(ns,ts,rs,as,os){var is,us,ls=[];return(is=ns.inEdges(as.v))===null||is===void 0||is.forEach(function(fs){var hs=ns.edge(fs),vs=ns.node(fs.v);os&&ls.push({v:fs.v,w:fs.w,in:0,out:0}),vs.out===void 0&&(vs.out=0),vs.out-=hs,assignBucket(ts,rs,vs)}),(us=ns.outEdges(as.v))===null||us===void 0||us.forEach(function(fs){var hs=ns.edge(fs),vs=fs.w,gs=ns.node(vs);gs.in===void 0&&(gs.in=0),gs.in-=hs,assignBucket(ts,rs,gs)}),ns.removeNode(as.v),os?ls:void 0},buildState=function(ns,ts){var rs=new StateGraph,as=0,os=0;ns.nodes().forEach(function(hs){rs.setNode(hs,{v:hs,in:0,out:0})}),ns.edges().forEach(function(hs){var vs=rs.edge(hs)||0,gs=(ts==null?void 0:ts(hs))||1,ys=vs+gs;rs.setEdge(hs.v,hs.w,ys),os=Math.max(os,rs.node(hs.v).out+=gs),as=Math.max(as,rs.node(hs.w).in+=gs)});for(var is=[],us=os+as+3,ls=0;ls<us;ls++)is.push(new List);var fs=as+1;return rs.nodes().forEach(function(hs){assignBucket(is,fs,rs.node(hs))}),{buckets:is,zeroIdx:fs,graph:rs}},assignBucket=function(ns,ts,rs){rs.out?rs.in?ns[rs.out-rs.in+ts].enqueue(rs):ns[ns.length-1].enqueue(rs):ns[0].enqueue(rs)};greedyFas.default=greedyFAS;var __importDefault$b=commonjsGlobal&&commonjsGlobal.__importDefault||function(ns){return ns&&ns.__esModule?ns:{default:ns}};Object.defineProperty(acyclic,"__esModule",{value:!0});var greedy_fas_1=__importDefault$b(greedyFas),run$2=function(ns){var ts=function(as){return function(os){var is;return((is=as.edge(os))===null||is===void 0?void 0:is.weight)||1}},rs=ns.graph().acyclicer==="greedy"?(0,greedy_fas_1.default)(ns,ts(ns)):dfsFAS(ns);rs==null||rs.forEach(function(as){var os=ns.edge(as);ns.removeEdgeObj(as),os.forwardName=as.name,os.reversed=!0,ns.setEdge(as.w,as.v,os,"rev-".concat(Math.random()))})},dfsFAS=function(ns){var ts=[],rs={},as={},os=function(is){var us;as[is]||(as[is]=!0,rs[is]=!0,(us=ns.outEdges(is))===null||us===void 0||us.forEach(function(ls){rs[ls.w]?ts.push(ls):os(ls.w)}),delete rs[is])};return ns.nodes().forEach(os),ts},undo$2=function(ns){ns.edges().forEach(function(ts){var rs=ns.edge(ts);if(rs.reversed){ns.removeEdgeObj(ts);var as=rs.forwardName;delete rs.reversed,delete rs.forwardName,ns.setEdge(ts.w,ts.v,rs,as)}})};acyclic.default={run:run$2,undo:undo$2};var normalize={},util$1={},graph={},__extends$o=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}();Object.defineProperty(graph,"__esModule",{value:!0});graph.Graph=void 0;var graphlib_1=require$$0$1,Graph$1=function(ns){__extends$o(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts}(graphlib_1.Graph);graph.Graph=Graph$1;(function(ns){Object.defineProperty(ns,"__esModule",{value:!0}),ns.minBy=ns.notime=ns.time=ns.partition=ns.maxRank=ns.addBorderNode=ns.removeEmptyRanks=ns.normalizeRanks=ns.buildLayerMatrix=ns.intersectRect=ns.predecessorWeights=ns.successorWeights=ns.zipObject=ns.asNonCompoundGraph=ns.simplify=ns.addDummyNode=void 0;var ts=requireUtil(),rs=graph,as=function(As,Is){return Number(As)-Number(Is)},os=function(As,Is,ks,Ps){var Ds;do Ds="".concat(Ps).concat(Math.random());while(As.hasNode(Ds));return ks.dummy=Is,As.setNode(Ds,ks),Ds};ns.addDummyNode=os;var is=function(As){var Is=new rs.Graph().setGraph(As.graph());return As.nodes().forEach(function(ks){Is.setNode(ks,As.node(ks))}),As.edges().forEach(function(ks){var Ps=Is.edgeFromArgs(ks.v,ks.w)||{weight:0,minlen:1},Ds=As.edge(ks);Is.setEdge(ks.v,ks.w,{weight:Ps.weight+Ds.weight,minlen:Math.max(Ps.minlen,Ds.minlen)})}),Is};ns.simplify=is;var us=function(As){var Is=new rs.Graph({multigraph:As.isMultigraph()}).setGraph(As.graph());return As.nodes().forEach(function(ks){var Ps;!((Ps=As.children(ks))===null||Ps===void 0)&&Ps.length||Is.setNode(ks,As.node(ks))}),As.edges().forEach(function(ks){Is.setEdgeObj(ks,As.edge(ks))}),Is};ns.asNonCompoundGraph=us;var ls=function(As,Is){return As==null?void 0:As.reduce(function(ks,Ps,Ds){return ks[Ps]=Is[Ds],ks},{})};ns.zipObject=ls;var fs=function(As){var Is={};return As.nodes().forEach(function(ks){var Ps,Ds={};(Ps=As.outEdges(ks))===null||Ps===void 0||Ps.forEach(function(Fs){var Rs;Ds[Fs.w]=(Ds[Fs.w]||0)+(((Rs=As.edge(Fs))===null||Rs===void 0?void 0:Rs.weight)||0)}),Is[ks]=Ds}),Is};ns.successorWeights=fs;var hs=function(As){var Is=As.nodes(),ks=Is.map(function(Ps){var Ds,Fs={};return(Ds=As.inEdges(Ps))===null||Ds===void 0||Ds.forEach(function(Rs){Fs[Rs.v]=(Fs[Rs.v]||0)+As.edge(Rs).weight}),Fs});return(0,ns.zipObject)(Is,ks)};ns.predecessorWeights=hs;var vs=function(As,Is){var ks=Number(As.x),Ps=Number(As.y),Ds=Number(Is.x)-ks,Fs=Number(Is.y)-Ps,Rs=Number(As.width)/2,js=Number(As.height)/2;if(!Ds&&!Fs)return{x:0,y:0};var zs,Us;return Math.abs(Fs)*Rs>Math.abs(Ds)*js?(Fs<0&&(js=-js),zs=js*Ds/Fs,Us=js):(Ds<0&&(Rs=-Rs),zs=Rs,Us=Rs*Fs/Ds),{x:ks+zs,y:Ps+Us}};ns.intersectRect=vs;var gs=function(As){for(var Is=[],ks=(0,ns.maxRank)(As)+1,Ps=0;Ps<ks;Ps++)Is.push([]);As.nodes().forEach(function(Ds){var Fs=As.node(Ds);if(Fs){var Rs=Fs.rank;Rs!==void 0&&Is[Rs]&&Is[Rs].push(Ds)}});for(var Ps=0;Ps<ks;Ps++)Is[Ps]=Is[Ps].sort(function(Fs,Rs){var js,zs;return as((js=As.node(Fs))===null||js===void 0?void 0:js.order,(zs=As.node(Rs))===null||zs===void 0?void 0:zs.order)});return Is};ns.buildLayerMatrix=gs;var ys=function(As){var Is=As.nodes().filter(function(Ps){var Ds;return((Ds=As.node(Ps))===null||Ds===void 0?void 0:Ds.rank)!==void 0}).map(function(Ps){return As.node(Ps).rank}),ks=Math.min.apply(Math,Is);As.nodes().forEach(function(Ps){var Ds=As.node(Ps);Ds.hasOwnProperty("rank")&&ks!==1/0&&(Ds.rank-=ks)})};ns.normalizeRanks=ys;var xs=function(As){var Is=As.nodes(),ks=Is.filter(function(Us){var Ys;return((Ys=As.node(Us))===null||Ys===void 0?void 0:Ys.rank)!==void 0}).map(function(Us){return As.node(Us).rank}),Ps=Math.min.apply(Math,ks),Ds=[];Is.forEach(function(Us){var Ys,Ks=(((Ys=As.node(Us))===null||Ys===void 0?void 0:Ys.rank)||0)-Ps;Ds[Ks]||(Ds[Ks]=[]),Ds[Ks].push(Us)});for(var Fs=0,Rs=As.graph().nodeRankFactor||0,js=0;js<Ds.length;js++){var zs=Ds[js];zs===void 0?js%Rs!==0&&(Fs-=1):Fs&&(zs==null||zs.forEach(function(Us){var Ys=As.node(Us);Ys&&(Ys.rank=Ys.rank||0,Ys.rank+=Fs)}))}};ns.removeEmptyRanks=xs;var ms=function(As,Is,ks,Ps){var Ds={width:0,height:0};return(0,ts.isNumber)(ks)&&(0,ts.isNumber)(Ps)&&(Ds.rank=ks,Ds.order=Ps),(0,ns.addDummyNode)(As,"border",Ds,Is)};ns.addBorderNode=ms;var Ss=function(As){var Is;return As.nodes().forEach(function(ks){var Ps,Ds=(Ps=As.node(ks))===null||Ps===void 0?void 0:Ps.rank;Ds!==void 0&&(Is===void 0||Ds>Is)&&(Is=Ds)}),Is||(Is=0),Is};ns.maxRank=Ss;var Ms=function(As,Is){var ks={lhs:[],rhs:[]};return As==null||As.forEach(function(Ps){Is(Ps)?ks.lhs.push(Ps):ks.rhs.push(Ps)}),ks};ns.partition=Ms;var $s=function(As,Is){var ks=Date.now();try{return Is()}finally{console.log("".concat(As," time: ").concat(Date.now()-ks,"ms"))}};ns.time=$s;var bs=function(As,Is){return Is()};ns.notime=bs;var Cs=function(As,Is){return As.reduce(function(ks,Ps){var Ds=Is(ks),Fs=Is(Ps);return Ds>Fs?Ps:ks})};ns.minBy=Cs})(util$1);Object.defineProperty(normalize,"__esModule",{value:!0});var util_1$l=util$1,run$1=function(ns){ns.graph().dummyChains=[],ns.edges().forEach(function(ts){return normalizeEdge(ns,ts)})},normalizeEdge=function(ns,ts){var rs=ts.v,as=ns.node(rs).rank,os=ts.w,is=ns.node(os).rank,us=ts.name,ls=ns.edge(ts),fs=ls.labelRank;if(is!==as+1){ns.removeEdgeObj(ts);var hs=ns.graph(),vs,gs,ys;for(ys=0,++as;as<is;++ys,++as)ls.points=[],gs={edgeLabel:ls,width:0,height:0,edgeObj:ts,rank:as},vs=(0,util_1$l.addDummyNode)(ns,"edge",gs,"_d"),as===fs&&(gs.width=ls.width,gs.height=ls.height,gs.dummy="edge-label",gs.labelpos=ls.labelpos),ns.setEdge(rs,vs,{weight:ls.weight},us),ys===0&&(hs.dummyChains||(hs.dummyChains=[]),hs.dummyChains.push(vs)),rs=vs;ns.setEdge(rs,os,{weight:ls.weight},us)}},undo$1=function(ns){var ts;(ts=ns.graph().dummyChains)===null||ts===void 0||ts.forEach(function(rs){var as=ns.node(rs),os=as.edgeLabel,is;as.edgeObj&&ns.setEdgeObj(as.edgeObj,os);for(var us=rs;as.dummy;)is=ns.successors(us)[0],ns.removeNode(us),os.points.push({x:as.x,y:as.y}),as.dummy==="edge-label"&&(os.x=as.x,os.y=as.y,os.width=as.width,os.height=as.height),us=is,as=ns.node(us)})};normalize.default={run:run$1,undo:undo$1};var rank$1={},util={};Object.defineProperty(util,"__esModule",{value:!0});util.slack=util.longestPathWithLayer=util.longestPath=void 0;var longestPath=function(ns){var ts,rs={},as=function(os){var is,us=ns.node(os);if(!us)return 0;if(rs[os])return us.rank;rs[os]=!0;var ls;return(is=ns.outEdges(os))===null||is===void 0||is.forEach(function(fs){var hs=as(fs.w),vs=ns.edge(fs).minlen,gs=hs-vs;gs&&(ls===void 0||gs<ls)&&(ls=gs)}),ls||(ls=0),us.rank=ls,ls};(ts=ns.sources())===null||ts===void 0||ts.forEach(function(os){return as(os)})};util.longestPath=longestPath;var longestPathWithLayer=function(ns){var ts,rs={},as,os=function(ls){var fs,hs=ns.node(ls);if(!hs)return 0;if(rs[ls])return hs.rank;rs[ls]=!0;var vs;return(fs=ns.outEdges(ls))===null||fs===void 0||fs.forEach(function(gs){var ys=os(gs.w),xs=ns.edge(gs).minlen,ms=ys-xs;ms&&(vs===void 0||ms<vs)&&(vs=ms)}),vs||(vs=0),(as===void 0||vs<as)&&(as=vs),hs.rank=vs,vs};(ts=ns.sources())===null||ts===void 0||ts.forEach(function(ls){ns.node(ls)&&os(ls)}),as===void 0&&(as=0);var is={},us=function(ls,fs){var hs,vs=ns.node(ls),gs=isNaN(vs.layer)?fs:vs.layer;(vs.rank===void 0||vs.rank<gs)&&(vs.rank=gs),!is[ls]&&(is[ls]=!0,(hs=ns.outEdges(ls))===null||hs===void 0||hs.map(function(ys){us(ys.w,gs+ns.edge(ys).minlen)}))};ns.nodes().forEach(function(ls){var fs=ns.node(ls);fs&&(isNaN(fs.layer)?fs.rank-=as:us(ls,fs.layer))})};util.longestPathWithLayer=longestPathWithLayer;var slack=function(ns,ts){return ns.node(ts.w).rank-ns.node(ts.v).rank-ns.edge(ts).minlen};util.slack=slack;util.default={longestPath,longestPathWithLayer,slack};var feasibleTree$1={};Object.defineProperty(feasibleTree$1,"__esModule",{value:!0});feasibleTree$1.feasibleTreeWithLayer=feasibleTree$1.feasibleTree=void 0;var util_1$k=util,util_2$1=util$1,graph_1$4=graph,feasibleTree=function(ns){var ts=new graph_1$4.Graph({directed:!1}),rs=ns.nodes()[0],as=ns.nodeCount();ts.setNode(rs,{});for(var os,is;tightTree(ts,ns)<as;)os=findMinSlackEdge(ts,ns),is=ts.hasNode(os.v)?(0,util_1$k.slack)(ns,os):-(0,util_1$k.slack)(ns,os),shiftRanks(ts,ns,is);return ts};feasibleTree$1.feasibleTree=feasibleTree;var tightTree=function(ns,ts){var rs=function(as){ts.nodeEdges(as).forEach(function(os){var is=os.v,us=as===is?os.w:is;!ns.hasNode(us)&&!(0,util_1$k.slack)(ts,os)&&(ns.setNode(us,{}),ns.setEdge(as,us,{}),rs(us))})};return ns.nodes().forEach(rs),ns.nodeCount()},feasibleTreeWithLayer=function(ns){var ts=new graph_1$4.Graph({directed:!1}),rs=ns.nodes()[0],as=ns.nodes().filter(function(us){return!!ns.node(us)}).length;ts.setNode(rs,{});for(var os,is;tightTreeWithLayer(ts,ns)<as;)os=findMinSlackEdge(ts,ns),is=ts.hasNode(os.v)?(0,util_1$k.slack)(ns,os):-(0,util_1$k.slack)(ns,os),shiftRanks(ts,ns,is);return ts};feasibleTree$1.feasibleTreeWithLayer=feasibleTreeWithLayer;var tightTreeWithLayer=function(ns,ts){var rs=function(as){var os;(os=ts.nodeEdges(as))===null||os===void 0||os.forEach(function(is){var us=is.v,ls=as===us?is.w:us;!ns.hasNode(ls)&&(ts.node(ls).layer!==void 0||!(0,util_1$k.slack)(ts,is))&&(ns.setNode(ls,{}),ns.setEdge(as,ls,{}),rs(ls))})};return ns.nodes().forEach(rs),ns.nodeCount()},findMinSlackEdge=function(ns,ts){return(0,util_2$1.minBy)(ts.edges(),function(rs){return ns.hasNode(rs.v)!==ns.hasNode(rs.w)?(0,util_1$k.slack)(ts,rs):1/0})},shiftRanks=function(ns,ts,rs){ns.nodes().forEach(function(as){ts.node(as).rank||(ts.node(as).rank=0),ts.node(as).rank+=rs})};feasibleTree$1.default={feasibleTree,feasibleTreeWithLayer};var networkSimplex={};(function(ns){Object.defineProperty(ns,"__esModule",{value:!0}),ns.exchangeEdges=ns.enterEdge=ns.leaveEdge=ns.initLowLimValues=ns.calcCutValue=ns.initCutValues=void 0;var ts=feasibleTree$1,rs=util,as=util$1,os=require$$0$1,is=os.algorithm.preorder,us=os.algorithm.postorder,ls=function(Cs){var As=(0,as.simplify)(Cs);(0,rs.longestPath)(As);var Is=(0,ts.feasibleTree)(As);(0,ns.initLowLimValues)(Is),(0,ns.initCutValues)(Is,As);for(var ks,Ps;ks=(0,ns.leaveEdge)(Is);)Ps=(0,ns.enterEdge)(Is,As,ks),(0,ns.exchangeEdges)(Is,As,ks,Ps)},fs=function(Cs,As){var Is=us(Cs,Cs.nodes());Is=Is==null?void 0:Is.slice(0,(Is==null?void 0:Is.length)-1),Is==null||Is.forEach(function(ks){hs(Cs,As,ks)})};ns.initCutValues=fs;var hs=function(Cs,As,Is){var ks=Cs.node(Is),Ps=ks.parent;Cs.edgeFromArgs(Is,Ps).cutvalue=(0,ns.calcCutValue)(Cs,As,Is)},vs=function(Cs,As,Is){var ks,Ps=Cs.node(Is),Ds=Ps.parent,Fs=!0,Rs=As.edgeFromArgs(Is,Ds),js=0;return Rs||(Fs=!1,Rs=As.edgeFromArgs(Ds,Is)),js=Rs.weight,(ks=As.nodeEdges(Is))===null||ks===void 0||ks.forEach(function(zs){var Us=zs.v===Is,Ys=Us?zs.w:zs.v;if(Ys!==Ds){var Ks=Us===Fs,qs=As.edge(zs).weight;if(js+=Ks?qs:-qs,$s(Cs,Is,Ys)){var _l=Cs.edgeFromArgs(Is,Ys).cutvalue;js+=Ks?-_l:_l}}}),js};ns.calcCutValue=vs;var gs=function(Cs,As){As===void 0&&(As=Cs.nodes()[0]),ys(Cs,{},1,As)};ns.initLowLimValues=gs;var ys=function(Cs,As,Is,ks,Ps){var Ds,Fs=Is,Rs=Is,js=Cs.node(ks);return As[ks]=!0,(Ds=Cs.neighbors(ks))===null||Ds===void 0||Ds.forEach(function(zs){As[zs]||(Rs=ys(Cs,As,Rs,zs,ks))}),js.low=Fs,js.lim=Rs++,Ps?js.parent=Ps:delete js.parent,Rs},xs=function(Cs){return Cs.edges().find(function(As){return Cs.edge(As).cutvalue<0})};ns.leaveEdge=xs;var ms=function(Cs,As,Is){var ks=Is.v,Ps=Is.w;As.hasEdge(ks,Ps)||(ks=Is.w,Ps=Is.v);var Ds=Cs.node(ks),Fs=Cs.node(Ps),Rs=Ds,js=!1;Ds.lim>Fs.lim&&(Rs=Fs,js=!0);var zs=As.edges().filter(function(Us){return js===bs(Cs,Cs.node(Us.v),Rs)&&js!==bs(Cs,Cs.node(Us.w),Rs)});return(0,as.minBy)(zs,function(Us){return(0,rs.slack)(As,Us)})};ns.enterEdge=ms;var Ss=function(Cs,As,Is,ks){var Ps=Is.v,Ds=Is.w;Cs.removeEdge(Ps,Ds),Cs.setEdge(ks.v,ks.w,{}),(0,ns.initLowLimValues)(Cs),(0,ns.initCutValues)(Cs,As),Ms(Cs,As)};ns.exchangeEdges=Ss;var Ms=function(Cs,As){var Is=Cs.nodes().find(function(Ps){var Ds;return!(!((Ds=As.node(Ps))===null||Ds===void 0)&&Ds.parent)}),ks=is(Cs,Is);ks=ks==null?void 0:ks.slice(1),ks==null||ks.forEach(function(Ps){var Ds=Cs.node(Ps).parent,Fs=As.edgeFromArgs(Ps,Ds),Rs=!1;Fs||(Fs=As.edgeFromArgs(Ds,Ps),Rs=!0),As.node(Ps).rank=As.node(Ds).rank+(Rs?Fs.minlen:-Fs.minlen)})},$s=function(Cs,As,Is){return Cs.hasEdge(As,Is)},bs=function(Cs,As,Is){return Is.low<=As.lim&&As.lim<=Is.lim};ns.default=ls})(networkSimplex);var __importDefault$a=commonjsGlobal&&commonjsGlobal.__importDefault||function(ns){return ns&&ns.__esModule?ns:{default:ns}};Object.defineProperty(rank$1,"__esModule",{value:!0});var util_1$j=util,feasible_tree_1=feasibleTree$1,network_simplex_1=__importDefault$a(networkSimplex),rank=function(ns){switch(ns.graph().ranker){case"network-simplex":networkSimplexRanker(ns);break;case"tight-tree":tightTreeRanker(ns);break;case"longest-path":longestPathRanker(ns);break;default:tightTreeRanker(ns)}},longestPathRanker=util_1$j.longestPath,tightTreeRanker=function(ns){(0,util_1$j.longestPathWithLayer)(ns),(0,feasible_tree_1.feasibleTreeWithLayer)(ns)},networkSimplexRanker=function(ns){(0,network_simplex_1.default)(ns)};rank$1.default=rank;var parentDummyChains$1={};Object.defineProperty(parentDummyChains$1,"__esModule",{value:!0});var dfsBothOrder=function(ns){var ts,rs={},as=0,os=function(is){var us,ls=as;(us=ns.children(is))===null||us===void 0||us.forEach(os),rs[is]={low:ls,lim:as++}};return(ts=ns.children())===null||ts===void 0||ts.forEach(os),rs},findPath=function(ns,ts,rs,as){var os=[],is=[],us=Math.min(ts[rs].low,ts[as].low),ls=Math.max(ts[rs].lim,ts[as].lim),fs,hs;fs=rs;do fs=ns.parent(fs),os.push(fs);while(fs&&(ts[fs].low>us||ls>ts[fs].lim));for(hs=fs,fs=as;fs&&fs!==hs;)is.push(fs),fs=ns.parent(fs);return{lca:hs,path:os.concat(is.reverse())}},parentDummyChains=function(ns){var ts,rs=dfsBothOrder(ns);(ts=ns.graph().dummyChains)===null||ts===void 0||ts.forEach(function(as){var os,is,us=as,ls=ns.node(us),fs=ls.edgeObj;if(fs)for(var hs=findPath(ns,rs,fs.v,fs.w),vs=hs.path,gs=hs.lca,ys=0,xs=vs[ys],ms=!0;us!==fs.w;){if(ls=ns.node(us),ms){for(;xs!==gs&&((os=ns.node(xs))===null||os===void 0?void 0:os.maxRank)<ls.rank;)ys++,xs=vs[ys];xs===gs&&(ms=!1)}if(!ms){for(;ys<vs.length-1&&((is=ns.node(vs[ys+1]))===null||is===void 0?void 0:is.minRank)<=ls.rank;)ys++;xs=vs[ys]}ns.setParent(us,xs),us=ns.successors(us)[0]}})};parentDummyChains$1.default=parentDummyChains;var nestingGraph={};Object.defineProperty(nestingGraph,"__esModule",{value:!0});var util_1$i=util$1,run=function(ns){var ts,rs=(0,util_1$i.addDummyNode)(ns,"root",{},"_root"),as=treeDepths(ns),os=Math.max.apply(Math,Object.values(as));Math.abs(os)===1/0&&(os=1);var is=os-1,us=2*is+1;ns.graph().nestingRoot=rs,ns.edges().forEach(function(fs){ns.edge(fs).minlen*=us});var ls=sumWeights(ns)+1;(ts=ns.children())===null||ts===void 0||ts.forEach(function(fs){dfs(ns,rs,us,ls,is,as,fs)}),ns.graph().nodeRankFactor=us},dfs=function(ns,ts,rs,as,os,is,us){var ls=ns.children(us);if(!(ls!=null&&ls.length)){us!==ts&&ns.setEdge(ts,us,{weight:0,minlen:rs});return}var fs=(0,util_1$i.addBorderNode)(ns,"_bt"),hs=(0,util_1$i.addBorderNode)(ns,"_bb"),vs=ns.node(us);ns.setParent(fs,us),vs.borderTop=fs,ns.setParent(hs,us),vs.borderBottom=hs,ls==null||ls.forEach(function(gs){dfs(ns,ts,rs,as,os,is,gs);var ys=ns.node(gs),xs=ys.borderTop?ys.borderTop:gs,ms=ys.borderBottom?ys.borderBottom:gs,Ss=ys.borderTop?as:2*as,Ms=xs!==ms?1:os-is[us]+1;ns.setEdge(fs,xs,{minlen:Ms,weight:Ss,nestingEdge:!0}),ns.setEdge(ms,hs,{minlen:Ms,weight:Ss,nestingEdge:!0})}),ns.parent(us)||ns.setEdge(ts,fs,{weight:0,minlen:os+is[us]})},treeDepths=function(ns){var ts,rs={},as=function(os,is){var us=ns.children(os);us==null||us.forEach(function(ls){return as(ls,is+1)}),rs[os]=is};return(ts=ns.children())===null||ts===void 0||ts.forEach(function(os){return as(os,1)}),rs},sumWeights=function(ns){var ts=0;return ns.edges().forEach(function(rs){ts+=ns.edge(rs).weight}),ts},cleanup=function(ns){var ts=ns.graph();ts.nestingRoot&&ns.removeNode(ts.nestingRoot),delete ts.nestingRoot,ns.edges().forEach(function(rs){var as=ns.edge(rs);as.nestingEdge&&ns.removeEdgeObj(rs)})};nestingGraph.default={run,cleanup};var addBorderSegments$1={};Object.defineProperty(addBorderSegments$1,"__esModule",{value:!0});var util_1$h=util$1,addBorderSegments=function(ns){var ts,rs=function(as){var os=ns.children(as),is=ns.node(as);if(os!=null&&os.length&&os.forEach(function(fs){return rs(fs)}),is.hasOwnProperty("minRank")){is.borderLeft=[],is.borderRight=[];for(var us=is.minRank,ls=is.maxRank+1;us<ls;us+=1)addBorderNode(ns,"borderLeft","_bl",as,is,us),addBorderNode(ns,"borderRight","_br",as,is,us)}};(ts=ns.children())===null||ts===void 0||ts.forEach(function(as){return rs(as)})},addBorderNode=function(ns,ts,rs,as,os,is){var us={rank:is,borderType:ts,width:0,height:0},ls=os[ts][is-1],fs=(0,util_1$h.addDummyNode)(ns,"border",us,rs);os[ts][is]=fs,ns.setParent(fs,as),ls&&ns.setEdge(ls,fs,{weight:1})};addBorderSegments$1.default=addBorderSegments;var coordinateSystem={};Object.defineProperty(coordinateSystem,"__esModule",{value:!0});var adjust=function(ns){var ts,rs=(ts=ns.graph().rankdir)===null||ts===void 0?void 0:ts.toLowerCase();(rs==="lr"||rs==="rl")&&swapWidthHeight(ns)},undo=function(ns){var ts,rs=(ts=ns.graph().rankdir)===null||ts===void 0?void 0:ts.toLowerCase();(rs==="bt"||rs==="rl")&&reverseY(ns),(rs==="lr"||rs==="rl")&&(swapXY(ns),swapWidthHeight(ns))},swapWidthHeight=function(ns){ns.nodes().forEach(function(ts){swapWidthHeightOne(ns.node(ts))}),ns.edges().forEach(function(ts){swapWidthHeightOne(ns.edge(ts))})},swapWidthHeightOne=function(ns){var ts=ns.width;ns.width=ns.height,ns.height=ts},reverseY=function(ns){ns.nodes().forEach(function(ts){reverseYOne(ns.node(ts))}),ns.edges().forEach(function(ts){var rs,as=ns.edge(ts);(rs=as.points)===null||rs===void 0||rs.forEach(function(os){return reverseYOne(os)}),as.hasOwnProperty("y")&&reverseYOne(as)})},reverseYOne=function(ns){ns!=null&&ns.y&&(ns.y=-ns.y)},swapXY=function(ns){ns.nodes().forEach(function(ts){swapXYOne(ns.node(ts))}),ns.edges().forEach(function(ts){var rs,as=ns.edge(ts);(rs=as.points)===null||rs===void 0||rs.forEach(function(os){return swapXYOne(os)}),as.hasOwnProperty("x")&&swapXYOne(as)})},swapXYOne=function(ns){var ts=ns.x;ns.x=ns.y,ns.y=ts};coordinateSystem.default={adjust,undo};var order$1={},initOrder$1={};function rgb2arr(ns){return[parseInt(ns.substr(1,2),16),parseInt(ns.substr(3,2),16),parseInt(ns.substr(5,2),16)]}function toHex(ns){var ts=Math.round(ns).toString(16);return ts.length===1?"0"+ts:ts}function arr2rgb(ns){return"#"+toHex(ns[0])+toHex(ns[1])+toHex(ns[2])}var isArrayLike=function(ns){return ns!==null&&typeof ns!="function"&&isFinite(ns.length)};const isArraylike=isArrayLike;var contains=function(ns,ts){return isArraylike(ns)?ns.indexOf(ts)>-1:!1};const contains$1=contains;var filter=function(ns,ts){if(!isArraylike(ns))return ns;for(var rs=[],as=0;as<ns.length;as++){var os=ns[as];ts(os,as)&&rs.push(os)}return rs};const filter$1=filter;var difference=function(ns,ts){return ts===void 0&&(ts=[]),filter$1(ns,function(rs){return!contains$1(ts,rs)})};const difference$1=difference,isFunction=function(ns){return typeof ns=="function"};var isNil=function(ns){return ns==null};const isNil$1=isNil;var toString$3={}.toString,isType=function(ns,ts){return toString$3.call(ns)==="[object "+ts+"]"};const isType$1=isType,isArray$1=function(ns){return Array.isArray?Array.isArray(ns):isType$1(ns,"Array")},isObject=function(ns){var ts=typeof ns;return ns!==null&&ts==="object"||ts==="function"};function each(ns,ts){if(ns){var rs;if(isArray$1(ns))for(var as=0,os=ns.length;as<os&&(rs=ts(ns[as],as),rs!==!1);as++);else if(isObject(ns)){for(var is in ns)if(ns.hasOwnProperty(is)&&(rs=ts(ns[is],is),rs===!1))break}}}var keys=Object.keys?function(ns){return Object.keys(ns)}:function(ns){var ts=[];return each(ns,function(rs,as){isFunction(ns)&&as==="prototype"||ts.push(as)}),ts};const keys$1=keys;function isMatch(ns,ts){var rs=keys$1(ts),as=rs.length;if(isNil$1(ns))return!as;for(var os=0;os<as;os+=1){var is=rs[os];if(ts[is]!==ns[is]||!(is in ns))return!1}return!0}var isObjectLike$4=function(ns){return typeof ns=="object"&&ns!==null};const isObjectLike$5=isObjectLike$4;var isPlainObject$1=function(ns){if(!isObjectLike$5(ns)||!isType$1(ns,"Object"))return!1;if(Object.getPrototypeOf(ns)===null)return!0;for(var ts=ns;Object.getPrototypeOf(ts)!==null;)ts=Object.getPrototypeOf(ts);return Object.getPrototypeOf(ns)===ts};const isPlainObject$2=isPlainObject$1;function find(ns,ts){if(!isArray$1(ns))return null;var rs;if(isFunction(ts)&&(rs=ts),isPlainObject$2(ts)&&(rs=function(os){return isMatch(os,ts)}),rs){for(var as=0;as<ns.length;as+=1)if(rs(ns[as]))return ns[as]}return null}function findIndex(ns,ts,rs){rs===void 0&&(rs=0);for(var as=rs;as<ns.length;as++)if(ts(ns[as],as))return as;return-1}var firstValue=function(ns,ts){for(var rs=null,as=0;as<ns.length;as++){var os=ns[as],is=os[ts];if(!isNil$1(is)){isArray$1(is)?rs=is[0]:rs=is;break}}return rs};const firstValue$1=firstValue;var flatten=function(ns){if(!isArray$1(ns))return[];for(var ts=[],rs=0;rs<ns.length;rs++)ts=ts.concat(ns[rs]);return ts};const flatten$1=flatten;var flattenDeep=function(ns,ts){if(ts===void 0&&(ts=[]),!isArray$1(ns))ts.push(ns);else for(var rs=0;rs<ns.length;rs+=1)flattenDeep(ns[rs],ts);return ts};const flattenDeep$1=flattenDeep,getMax=function(ns){if(isArray$1(ns))return ns.reduce(function(ts,rs){return Math.max(ts,rs)},ns[0])},getMin=function(ns){if(isArray$1(ns))return ns.reduce(function(ts,rs){return Math.min(ts,rs)},ns[0])};var getRange=function(ns){var ts=ns.filter(function(us){return!isNaN(us)});if(!ts.length)return{min:0,max:0};if(isArray$1(ns[0])){for(var rs=[],as=0;as<ns.length;as++)rs=rs.concat(ns[as]);ts=rs}var os=getMax(ts),is=getMin(ts);return{min:is,max:os}};const getRange$1=getRange;var arrPrototype=Array.prototype,splice$1=arrPrototype.splice,indexOf$2=arrPrototype.indexOf,pull=function(ns){for(var ts=[],rs=1;rs<arguments.length;rs++)ts[rs-1]=arguments[rs];for(var as=0;as<ts.length;as++)for(var os=ts[as],is=-1;(is=indexOf$2.call(ns,os))>-1;)splice$1.call(ns,is,1);return ns};const pull$1=pull;var splice=Array.prototype.splice,pullAt=function(ts,rs){if(!isArraylike(ts))return[];for(var as=ts?rs.length:0,os=as-1;as--;){var is=void 0,us=rs[as];(as===os||us!==is)&&(is=us,splice.call(ts,us,1))}return ts};const pullAt$1=pullAt;var reduce=function(ns,ts,rs){if(!isArray$1(ns)&&!isPlainObject$2(ns))return ns;var as=rs;return each(ns,function(os,is){as=ts(as,os,is)}),as};const reduce$1=reduce;var remove=function(ns,ts){var rs=[];if(!isArraylike(ns))return rs;for(var as=-1,os=[],is=ns.length;++as<is;){var us=ns[as];ts(us,as,ns)&&(rs.push(us),os.push(as))}return pullAt$1(ns,os),rs};const remove$1=remove,isString=function(ns){return isType$1(ns,"String")};function sortBy(ns,ts){var rs;if(isFunction(ts))rs=function(os,is){return ts(os)-ts(is)};else{var as=[];isString(ts)?as.push(ts):isArray$1(ts)&&(as=ts),rs=function(os,is){for(var us=0;us<as.length;us+=1){var ls=as[us];if(os[ls]>is[ls])return 1;if(os[ls]<is[ls])return-1}return 0}}return ns.sort(rs),ns}function uniq(ns,ts){ts===void 0&&(ts=new Map);var rs=[];if(Array.isArray(ns))for(var as=0,os=ns.length;as<os;as++){var is=ns[as];ts.has(is)||(rs.push(is),ts.set(is,!0))}return rs}var union=function(){for(var ns=[],ts=0;ts<arguments.length;ts++)ns[ts]=arguments[ts];return uniq([].concat.apply([],ns))};const union$1=union,valuesOfKey=function(ns,ts){for(var rs=[],as={},os=0;os<ns.length;os++){var is=ns[os],us=is[ts];if(!isNil$1(us)){isArray$1(us)||(us=[us]);for(var ls=0;ls<us.length;ls++){var fs=us[ls];as[fs]||(rs.push(fs),as[fs]=!0)}}}return rs};function head(ns){if(isArraylike(ns))return ns[0]}function last(ns){if(isArraylike(ns)){var ts=ns;return ts[ts.length-1]}}function startsWith(ns,ts){return isArray$1(ns)||isString(ns)?ns[0]===ts:!1}function endsWith(ns,ts){return isArray$1(ns)||isString(ns)?ns[ns.length-1]===ts:!1}var every=function(ns,ts){for(var rs=0;rs<ns.length;rs++)if(!ts(ns[rs],rs))return!1;return!0};const every$1=every;var some=function(ns,ts){for(var rs=0;rs<ns.length;rs++)if(ts(ns[rs],rs))return!0;return!1};const some$1=some;var hasOwnProperty$5=Object.prototype.hasOwnProperty;function groupBy(ns,ts){if(!ts||!isArray$1(ns))return{};for(var rs={},as=isFunction(ts)?ts:function(ls){return ls[ts]},os,is=0;is<ns.length;is++){var us=ns[is];os=as(us),hasOwnProperty$5.call(rs,os)?rs[os].push(us):rs[os]=[us]}return rs}function groupToMap(ns,ts){if(!ts)return{0:ns};if(!isFunction(ts)){var rs=isArray$1(ts)?ts:ts.replace(/\s+/g,"").split("*");ts=function(as){for(var os="_",is=0,us=rs.length;is<us;is++)os+=as[rs[is]]&&as[rs[is]].toString();return os}}return groupBy(ns,ts)}const group=function(ns,ts){if(!ts)return[ns];var rs=groupToMap(ns,ts),as=[];for(var os in rs)as.push(rs[os]);return as};function getWrapBehavior(ns,ts){return ns["_wrap_"+ts]}function wrapBehavior(ns,ts){if(ns["_wrap_"+ts])return ns["_wrap_"+ts];var rs=function(as){ns[ts](as)};return ns["_wrap_"+ts]=rs,rs}var numColorCache={};function numberToColor(ns){var ts=numColorCache[ns];if(!ts){for(var rs=ns.toString(16),as=rs.length;as<6;as++)rs="0"+rs;ts="#"+rs,numColorCache[ns]=ts}return ts}function parseRadius(ns){var ts=0,rs=0,as=0,os=0;return isArray$1(ns)?ns.length===1?ts=rs=as=os=ns[0]:ns.length===2?(ts=as=ns[0],rs=os=ns[1]):ns.length===3?(ts=ns[0],rs=os=ns[1],as=ns[2]):(ts=ns[0],rs=ns[1],as=ns[2],os=ns[3]):ts=rs=as=os=ns,{r1:ts,r2:rs,r3:as,r4:os}}var clamp=function(ns,ts,rs){return ns<ts?ts:ns>rs?rs:ns};const clamp$1=clamp;var fixedBase=function(ns,ts){var rs=ts.toString(),as=rs.indexOf(".");if(as===-1)return Math.round(ns);var os=rs.substr(as+1).length;return os>20&&(os=20),parseFloat(ns.toFixed(os))};const fixedBase$1=fixedBase;var isNumber$1=function(ns){return isType$1(ns,"Number")};const isNumber$2=isNumber$1;var isDecimal=function(ns){return isNumber$2(ns)&&ns%1!==0};const isDecimal$1=isDecimal;var isEven=function(ns){return isNumber$2(ns)&&ns%2===0};const isEven$1=isEven;var isInteger=Number.isInteger?Number.isInteger:function(ns){return isNumber$2(ns)&&ns%1===0};const isInteger$1=isInteger;var isNegative=function(ns){return isNumber$2(ns)&&ns<0};const isNegative$1=isNegative;var PRECISION=1e-5;function isNumberEqual(ns,ts,rs){return rs===void 0&&(rs=PRECISION),Math.abs(ns-ts)<rs}var isOdd=function(ns){return isNumber$2(ns)&&ns%2!==0};const isOdd$1=isOdd;var isPositive=function(ns){return isNumber$2(ns)&&ns>0};const isPositive$1=isPositive,maxBy=function(ns,ts){if(isArray$1(ns)){for(var rs,as=-1/0,os=0;os<ns.length;os++){var is=ns[os],us=isFunction(ts)?ts(is):is[ts];us>as&&(rs=is,as=us)}return rs}},minBy=function(ns,ts){if(isArray$1(ns)){for(var rs,as=1/0,os=0;os<ns.length;os++){var is=ns[os],us=isFunction(ts)?ts(is):is[ts];us<as&&(rs=is,as=us)}return rs}};var mod$1=function(ns,ts){return(ns%ts+ts)%ts};const mod$2=mod$1;var DEGREE=180/Math.PI,toDegree=function(ns){return DEGREE*ns};const toDegree$1=toDegree,parseInt$1=parseInt;var RADIAN=Math.PI/180,toRadian=function(ns){return RADIAN*ns};const toRadian$1=toRadian,has=function(ns,ts){return ns.hasOwnProperty(ts)};var values=Object.values?function(ns){return Object.values(ns)}:function(ns){var ts=[];return each(ns,function(rs,as){isFunction(ns)&&as==="prototype"||ts.push(rs)}),ts};const values$1=values,hasValue=function(ns,ts){return contains$1(values$1(ns),ts)},toString$2=function(ns){return isNil$1(ns)?"":ns.toString()};var lowerCase=function(ns){return toString$2(ns).toLowerCase()};const lowerCase$1=lowerCase;var lowerFirst=function(ns){var ts=toString$2(ns);return ts.charAt(0).toLowerCase()+ts.substring(1)};const lowerFirst$1=lowerFirst;function substitute$1(ns,ts){return!ns||!ts?ns:ns.replace(/\\?\{([^{}]+)\}/g,function(rs,as){return rs.charAt(0)==="\\"?rs.slice(1):ts[as]===void 0?"":ts[as]})}var upperCase=function(ns){return toString$2(ns).toUpperCase()};const upperCase$1=upperCase;var upperFirst=function(ns){var ts=toString$2(ns);return ts.charAt(0).toUpperCase()+ts.substring(1)};const upperFirst$1=upperFirst;var toString$1={}.toString,getType=function(ns){return toString$1.call(ns).replace(/^\[object /,"").replace(/]$/,"")};const getType$1=getType;var isArguments=function(ns){return isType$1(ns,"Arguments")};const isArguments$1=isArguments;var isBoolean=function(ns){return isType$1(ns,"Boolean")};const isBoolean$1=isBoolean;var isDate=function(ns){return isType$1(ns,"Date")};const isDate$1=isDate;var isError=function(ns){return isType$1(ns,"Error")};const isError$1=isError;function isFinite$1(ns){return isNumber$2(ns)&&isFinite(ns)}var isNull=function(ns){return ns===null};const isNull$1=isNull;var objectProto$3=Object.prototype,isPrototype=function(ns){var ts=ns&&ns.constructor,rs=typeof ts=="function"&&ts.prototype||objectProto$3;return ns===rs};const isPrototype$1=isPrototype;var isRegExp=function(ns){return isType$1(ns,"RegExp")};const isRegExp$1=isRegExp;var isUndefined=function(ns){return ns===void 0};const isUndefined$1=isUndefined;var isElement=function(ns){return ns instanceof Element||ns instanceof Document};const isElement$1=isElement;function requestAnimationFrame$1(ns){var ts=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(rs){return setTimeout(rs,16)};return ts(ns)}function cancelAnimationFrame$1(ns){var ts=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;ts(ns)}function _mix(ns,ts){for(var rs in ts)ts.hasOwnProperty(rs)&&rs!=="constructor"&&ts[rs]!==void 0&&(ns[rs]=ts[rs])}function mix(ns,ts,rs,as){return ts&&_mix(ns,ts),rs&&_mix(ns,rs),as&&_mix(ns,as),ns}var augment=function(){for(var ns=[],ts=0;ts<arguments.length;ts++)ns[ts]=arguments[ts];for(var rs=ns[0],as=1;as<ns.length;as++){var os=ns[as];isFunction(os)&&(os=os.prototype),mix(rs.prototype,os)}};const augment$1=augment;var clone=function(ns){if(typeof ns!="object"||ns===null)return ns;var ts;if(isArray$1(ns)){ts=[];for(var rs=0,as=ns.length;rs<as;rs++)typeof ns[rs]=="object"&&ns[rs]!=null?ts[rs]=clone(ns[rs]):ts[rs]=ns[rs]}else{ts={};for(var os in ns)typeof ns[os]=="object"&&ns[os]!=null?ts[os]=clone(ns[os]):ts[os]=ns[os]}return ts};const clone$1=clone;function debounce(ns,ts,rs){var as;return function(){var os=this,is=arguments,us=function(){as=null,rs||ns.apply(os,is)},ls=rs&&!as;clearTimeout(as),as=setTimeout(us,ts),ls&&ns.apply(os,is)}}function flru(ns){var ts,rs,as,os=ns||1;function is(ls,fs){++ts>os&&(as=rs,us(1),++ts),rs[ls]=fs}function us(ls){ts=0,rs=Object.create(null),ls||(as=Object.create(null))}return us(),{clear:us,has:function(ls){return rs[ls]!==void 0||as[ls]!==void 0},get:function(ls){var fs=rs[ls];if(fs!==void 0)return fs;if((fs=as[ls])!==void 0)return is(ls,fs),fs},set:function(ls,fs){rs[ls]!==void 0?rs[ls]=fs:is(ls,fs)}}}const memoize=function(ns,ts,rs){if(rs===void 0&&(rs=128),!isFunction(ns))throw new TypeError("Expected a function");var as=function(){for(var os=[],is=0;is<arguments.length;is++)os[is]=arguments[is];var us=ts?ts.apply(this,os):os[0],ls=as.cache;if(ls.has(us))return ls.get(us);var fs=ns.apply(this,os);return ls.set(us,fs),fs};return as.cache=flru(rs),as};var MAX_MIX_LEVEL=5;function hasOwn(ns,ts){if(Object.hasOwn)return Object.hasOwn(ns,ts);if(ns==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(ns),ts)}function _deepMix(ns,ts,rs,as){rs=rs||0,as=as||MAX_MIX_LEVEL;for(var os in ts)if(hasOwn(ts,os)){var is=ts[os];is!==null&&isPlainObject$2(is)?(isPlainObject$2(ns[os])||(ns[os]={}),rs<as?_deepMix(ns[os],is,rs+1,as):ns[os]=ts[os]):isArray$1(is)?(ns[os]=[],ns[os]=ns[os].concat(is)):is!==void 0&&(ns[os]=is)}}var deepMix=function(ns){for(var ts=[],rs=1;rs<arguments.length;rs++)ts[rs-1]=arguments[rs];for(var as=0;as<ts.length;as+=1)_deepMix(ns,ts[as]);return ns};const deepMix$1=deepMix;var extend=function(ns,ts,rs,as){isFunction(ts)||(rs=ts,ts=ns,ns=function(){});var os=Object.create?function(us,ls){return Object.create(us,{constructor:{value:ls}})}:function(us,ls){function fs(){}fs.prototype=us;var hs=new fs;return hs.constructor=ls,hs},is=os(ts.prototype,ns);return ns.prototype=mix(is,ns.prototype),ns.superclass=os(ts.prototype,ts),mix(is,rs),mix(ns,as),ns};const extend$1=extend;var indexOf=function(ns,ts){if(!isArraylike(ns))return-1;var rs=Array.prototype.indexOf;if(rs)return rs.call(ns,ts);for(var as=-1,os=0;os<ns.length;os++)if(ns[os]===ts){as=os;break}return as};const indexOf$1=indexOf;var hasOwnProperty$4=Object.prototype.hasOwnProperty;function isEmpty(ns){if(isNil$1(ns))return!0;if(isArraylike(ns))return!ns.length;var ts=getType$1(ns);if(ts==="Map"||ts==="Set")return!ns.size;if(isPrototype$1(ns))return!Object.keys(ns).length;for(var rs in ns)if(hasOwnProperty$4.call(ns,rs))return!1;return!0}var isEqual=function(ns,ts){if(ns===ts)return!0;if(!ns||!ts||isString(ns)||isString(ts))return!1;if(isArraylike(ns)||isArraylike(ts)){if(ns.length!==ts.length)return!1;for(var rs=!0,as=0;as<ns.length&&(rs=isEqual(ns[as],ts[as]),!!rs);as++);return rs}if(isObjectLike$5(ns)||isObjectLike$5(ts)){var os=Object.keys(ns),is=Object.keys(ts);if(os.length!==is.length)return!1;for(var rs=!0,as=0;as<os.length&&(rs=isEqual(ns[os[as]],ts[os[as]]),!!rs);as++);return rs}return!1};const isEqual$1=isEqual,isEqualWith=function(ns,ts,rs){return isFunction(rs)?!!rs(ns,ts):isEqual$1(ns,ts)};var map$2=function(ns,ts){if(!isArraylike(ns))return ns;for(var rs=[],as=0;as<ns.length;as++){var os=ns[as];rs.push(ts(os,as))}return rs};const map$3=map$2;var identity$1=function(ns){return ns};const mapValues=function(ns,ts){ts===void 0&&(ts=identity$1);var rs={};return isObject(ns)&&!isNil$1(ns)&&Object.keys(ns).forEach(function(as){rs[as]=ts(ns[as],as)}),rs},get=function(ns,ts,rs){for(var as=0,os=isString(ts)?ts.split("."):ts;ns&&as<os.length;)ns=ns[os[as++]];return ns===void 0||as<os.length?rs:ns},set=function(ns,ts,rs){var as=ns,os=isString(ts)?ts.split("."):ts;return os.forEach(function(is,us){us<os.length-1?(isObject(as[is])||(as[is]=isNumber$2(os[us+1])?[]:{}),as=as[is]):as[is]=rs}),ns};var hasOwnProperty$3=Object.prototype.hasOwnProperty;const pick=function(ns,ts){if(ns===null||!isPlainObject$2(ns))return{};var rs={};return each(ts,function(as){hasOwnProperty$3.call(ns,as)&&(rs[as]=ns[as])}),rs},omit=function(ns,ts){return reduce$1(ns,function(rs,as,os){return ts.includes(os)||(rs[os]=as),rs},{})},throttle=function(ns,ts,rs){var as,os,is,us,ls=0;rs||(rs={});var fs=function(){ls=rs.leading===!1?0:Date.now(),as=null,us=ns.apply(os,is),as||(os=is=null)},hs=function(){var vs=Date.now();!ls&&rs.leading===!1&&(ls=vs);var gs=ts-(vs-ls);return os=this,is=arguments,gs<=0||gs>ts?(as&&(clearTimeout(as),as=null),ls=vs,us=ns.apply(os,is),as||(os=is=null)):!as&&rs.trailing!==!1&&(as=setTimeout(fs,gs)),us};return hs.cancel=function(){clearTimeout(as),ls=0,as=os=is=null},hs},toArray=function(ns){return isArraylike(ns)?Array.prototype.slice.call(ns):[]};var map$1={};const uniqueId$1=function(ns){return ns=ns||"g",map$1[ns]?map$1[ns]+=1:map$1[ns]=1,ns+map$1[ns]},noop=function(){},identity=function(ns){return ns};function size(ns){return isNil$1(ns)?0:isArraylike(ns)?ns.length:Object.keys(ns).length}var default_1=function(){function ns(){this.map={}}return ns.prototype.has=function(ts){return this.map[ts]!==void 0},ns.prototype.get=function(ts,rs){var as=this.map[ts];return as===void 0?rs:as},ns.prototype.set=function(ts,rs){this.map[ts]=rs},ns.prototype.clear=function(){this.map={}},ns.prototype.delete=function(ts){delete this.map[ts]},ns.prototype.size=function(){return Object.keys(this.map).length},ns}();const default_1$1=default_1;var RGB_REG=/rgba?\(([\s.,0-9]+)\)/;function createTmp(){var ns=document.createElement("i");return ns.title="Web Colour Picker",ns.style.display="none",document.body.appendChild(ns),ns}var iEl;function toRGBString(ns){if(ns[0]==="#"&&ns.length===7)return ns;iEl||(iEl=createTmp()),iEl.style.color=ns;var ts=document.defaultView.getComputedStyle(iEl,"").getPropertyValue("color"),rs=RGB_REG.exec(ts),as=rs[1].split(/\s*,\s*/).map(function(os){return Number(os)});return ts=arr2rgb(as),ts}var toRGB=memoize(toRGBString,function(ns){return ns},256);function getValue(ns,ts,rs,as){return ns[as]+(ts[as]-ns[as])*rs}function calColor(ns,ts){var rs=isNaN(Number(ts))||ts<0?0:ts>1?1:Number(ts),as=ns.length-1,os=Math.floor(as*rs),is=as*rs-os,us=ns[os],ls=os===as?us:ns[os+1];return arr2rgb([getValue(us,ls,is,0),getValue(us,ls,is,1),getValue(us,ls,is,2)])}function gradient(ns){var ts=typeof ns=="string"?ns.split("-"):ns,rs=ts.map(function(as){return rgb2arr(as.indexOf("#")===-1?toRGB(as):as)});return function(as){return calColor(rs,as)}}var regexLG=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,regexRG=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,regexColorStop=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function isGradientColor(ns){return/^[r,R,L,l]{1}[\s]*\(/.test(ns)}function toCSSGradient(ns){if(isGradientColor(ns)){var ts,rs=void 0;if(ns[0]==="l"){var as=regexLG.exec(ns),os=+as[1]+90;rs=as[2],ts="linear-gradient("+os+"deg, "}else if(ns[0]==="r"){ts="radial-gradient(";var as=regexRG.exec(ns);rs=as[4]}var is=rs.match(regexColorStop);return is.forEach(function(us,ls){var fs=us.split(":");ts+=fs[1]+" "+Number(fs[0])*100+"%",ls!==is.length-1&&(ts+=", ")}),ts+=")",ts}return ns}function leftTranslate(ns,ts,rs){var as=[0,0,0,0,0,0,0,0,0];return fromTranslation$2(as,rs),multiply$6(ns,as,ts)}function leftRotate(ns,ts,rs){var as=[0,0,0,0,0,0,0,0,0];return fromRotation$2(as,rs),multiply$6(ns,as,ts)}function leftScale(ns,ts,rs){var as=[0,0,0,0,0,0,0,0,0];return fromScaling$1(as,rs),multiply$6(ns,as,ts)}function leftMultiply(ns,ts,rs){return multiply$6(ns,rs,ts)}function transform$a(ns,ts){for(var rs=ns?[].concat(ns):[1,0,0,0,1,0,0,0,1],as=0,os=ts.length;as<os;as++){var is=ts[as];switch(is[0]){case"t":leftTranslate(rs,rs,[is[1],is[2]]);break;case"s":leftScale(rs,rs,[is[1],is[2]]);break;case"r":leftRotate(rs,rs,is[1]);break;case"m":leftMultiply(rs,rs,is[1]);break}}return rs}function direction(ns,ts){return ns[0]*ts[1]-ts[0]*ns[1]}function angleTo(ns,ts,rs){var as=angle(ns,ts),os=direction(ns,ts)>=0;return rs?os?Math.PI*2-as:as:os?as:Math.PI*2-as}function vertical(ns,ts,rs){return rs?(ns[0]=ts[1],ns[1]=-1*ts[0]):(ns[0]=-1*ts[1],ns[1]=ts[0]),ns}function roundPath(ns,ts){if(ts==="off")return[].concat(ns);var rs=typeof ts=="number"&&ts>=1?Math.pow(10,ts):1;return ns.map(function(as){var os=as.slice(1).map(Number).map(function(is){return ts?Math.round(is*rs)/rs:Math.round(is)});return[as[0]].concat(os)})}function path2String(ns,ts){return ts===void 0&&(ts="off"),roundPath(ns,ts).map(function(rs){return rs[0]+rs.slice(1).join(" ")}).join("")}var paramsParser={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function fixArc(ns,ts,rs){if(ns[rs].length>7){ns[rs].shift();for(var as=ns[rs],os=rs;as.length;)ts[rs]="A",ns.splice(os+=1,0,["C"].concat(as.splice(0,6)));ns.splice(rs,1)}}var paramsCount={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function isPathArray(ns){return Array.isArray(ns)&&ns.every(function(ts){var rs=ts[0].toLowerCase();return paramsCount[rs]===ts.length-1&&"achlmqstvz".includes(rs)})}function isAbsoluteArray(ns){return isPathArray(ns)&&ns.every(function(ts){var rs=ts[0];return rs===rs.toUpperCase()})}function isNormalizedArray(ns){return isAbsoluteArray(ns)&&ns.every(function(ts){var rs=ts[0];return"ACLMQZ".includes(rs)})}function finalizeSegment(ns){for(var ts=ns.pathValue[ns.segmentStart],rs=ts.toLowerCase(),as=ns.data;as.length>=paramsCount[rs]&&(rs==="m"&&as.length>2?(ns.segments.push([ts].concat(as.splice(0,2))),rs="l",ts=ts==="m"?"l":"L"):ns.segments.push([ts].concat(as.splice(0,paramsCount[rs]))),!!paramsCount[rs]););}function scanFlag(ns){var ts=ns.index,rs=ns.pathValue,as=rs.charCodeAt(ts);if(as===48){ns.param=0,ns.index+=1;return}if(as===49){ns.param=1,ns.index+=1;return}ns.err='[path-util]: invalid Arc flag "'+rs[ts]+'", expecting 0 or 1 at index '+ts}function isDigitStart(ns){return ns>=48&&ns<=57||ns===43||ns===45||ns===46}function isDigit(ns){return ns>=48&&ns<=57}function scanParam(ns){var ts=ns.max,rs=ns.pathValue,as=ns.index,os=as,is=!1,us=!1,ls=!1,fs=!1,hs;if(os>=ts){ns.err="[path-util]: Invalid path value at index "+os+', "pathValue" is missing param';return}if(hs=rs.charCodeAt(os),(hs===43||hs===45)&&(os+=1,hs=rs.charCodeAt(os)),!isDigit(hs)&&hs!==46){ns.err="[path-util]: Invalid path value at index "+os+', "'+rs[os]+'" is not a number';return}if(hs!==46){if(is=hs===48,os+=1,hs=rs.charCodeAt(os),is&&os<ts&&hs&&isDigit(hs)){ns.err="[path-util]: Invalid path value at index "+as+', "'+rs[as]+'" illegal number';return}for(;os<ts&&isDigit(rs.charCodeAt(os));)os+=1,us=!0;hs=rs.charCodeAt(os)}if(hs===46){for(fs=!0,os+=1;isDigit(rs.charCodeAt(os));)os+=1,ls=!0;hs=rs.charCodeAt(os)}if(hs===101||hs===69){if(fs&&!us&&!ls){ns.err="[path-util]: Invalid path value at index "+os+', "'+rs[os]+'" invalid float exponent';return}if(os+=1,hs=rs.charCodeAt(os),(hs===43||hs===45)&&(os+=1),os<ts&&isDigit(rs.charCodeAt(os)))for(;os<ts&&isDigit(rs.charCodeAt(os));)os+=1;else{ns.err="[path-util]: Invalid path value at index "+os+', "'+rs[os]+'" invalid integer exponent';return}}ns.index=os,ns.param=+ns.pathValue.slice(as,os)}function isSpace(ns){var ts=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return ns===10||ns===13||ns===8232||ns===8233||ns===32||ns===9||ns===11||ns===12||ns===160||ns>=5760&&ts.includes(ns)}function skipSpaces(ns){for(var ts=ns.pathValue,rs=ns.max;ns.index<rs&&isSpace(ts.charCodeAt(ns.index));)ns.index+=1}function isPathCommand(ns){switch(ns|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function isArcCommand(ns){return(ns|32)===97}function scanSegment(ns){var ts=ns.max,rs=ns.pathValue,as=ns.index,os=rs.charCodeAt(as),is=paramsCount[rs[as].toLowerCase()];if(ns.segmentStart=as,!isPathCommand(os)){ns.err='[path-util]: Invalid path value "'+rs[as]+'" is not a path command';return}if(ns.index+=1,skipSpaces(ns),ns.data=[],!is){finalizeSegment(ns);return}for(;;){for(var us=is;us>0;us-=1){if(isArcCommand(os)&&(us===3||us===4)?scanFlag(ns):scanParam(ns),ns.err.length)return;ns.data.push(ns.param),skipSpaces(ns),ns.index<ts&&rs.charCodeAt(ns.index)===44&&(ns.index+=1,skipSpaces(ns))}if(ns.index>=ns.max||!isDigitStart(rs.charCodeAt(ns.index)))break}finalizeSegment(ns)}var PathParser=function(){function ns(ts){this.pathValue=ts,this.segments=[],this.max=ts.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return ns}();function parsePathString(ns){if(isPathArray(ns))return[].concat(ns);var ts=new PathParser(ns);for(skipSpaces(ts);ts.index<ts.max&&!ts.err.length;)scanSegment(ts);return ts.err?ts.err:ts.segments}function path2Absolute(ns){if(isAbsoluteArray(ns))return[].concat(ns);var ts=parsePathString(ns),rs=0,as=0,os=0,is=0;return ts.map(function(us){var ls=us.slice(1).map(Number),fs=us[0],hs=fs.toUpperCase();if(fs==="M")return rs=ls[0],as=ls[1],os=rs,is=as,["M",rs,as];var vs;if(fs!==hs)switch(hs){case"A":vs=[hs,ls[0],ls[1],ls[2],ls[3],ls[4],ls[5]+rs,ls[6]+as];break;case"V":vs=[hs,ls[0]+as];break;case"H":vs=[hs,ls[0]+rs];break;default:{var gs=ls.map(function(xs,ms){return xs+(ms%2?as:rs)});vs=[hs].concat(gs)}}else vs=[hs].concat(ls);var ys=vs.length;switch(hs){case"Z":rs=os,as=is;break;case"H":rs=vs[1];break;case"V":as=vs[1];break;default:rs=vs[ys-2],as=vs[ys-1],hs==="M"&&(os=rs,is=as)}return vs})}function normalizeSegment(ns,ts){var rs=ns[0],as=ts.x1,os=ts.y1,is=ts.x2,us=ts.y2,ls=ns.slice(1).map(Number),fs=ns;if("TQ".includes(rs)||(ts.qx=null,ts.qy=null),rs==="H")fs=["L",ns[1],os];else if(rs==="V")fs=["L",as,ns[1]];else if(rs==="S"){var hs=as*2-is,vs=os*2-us;ts.x1=hs,ts.y1=vs,fs=["C",hs,vs].concat(ls)}else if(rs==="T"){var gs=as*2-ts.qx,ys=os*2-ts.qy;ts.qx=gs,ts.qy=ys,fs=["Q",gs,ys].concat(ls)}else if(rs==="Q"){var xs=ls[0],ms=ls[1];ts.qx=xs,ts.qy=ms}return fs}function normalizePath(ns){if(isNormalizedArray(ns))return[].concat(ns);for(var ts=path2Absolute(ns),rs=__assign$h({},paramsParser),as=0;as<ts.length;as+=1){ts[as]=normalizeSegment(ts[as],rs);var os=ts[as],is=os.length;rs.x1=+os[is-2],rs.y1=+os[is-1],rs.x2=+os[is-4]||rs.x1,rs.y2=+os[is-3]||rs.y1}return ts}function isCurveArray(ns){return isNormalizedArray(ns)&&ns.every(function(ts){var rs=ts[0];return"MC".includes(rs)})}function rotateVector(ns,ts,rs){var as=ns*Math.cos(rs)-ts*Math.sin(rs),os=ns*Math.sin(rs)+ts*Math.cos(rs);return{x:as,y:os}}function arcToCubic(ns,ts,rs,as,os,is,us,ls,fs,hs){var vs=ns,gs=ts,ys=rs,xs=as,ms=ls,Ss=fs,Ms=Math.PI*120/180,$s=Math.PI/180*(+os||0),bs=[],Cs,As,Is,ks,Ps;if(hs)As=hs[0],Is=hs[1],ks=hs[2],Ps=hs[3];else{Cs=rotateVector(vs,gs,-$s),vs=Cs.x,gs=Cs.y,Cs=rotateVector(ms,Ss,-$s),ms=Cs.x,Ss=Cs.y;var Ds=(vs-ms)/2,Fs=(gs-Ss)/2,Rs=Ds*Ds/(ys*ys)+Fs*Fs/(xs*xs);Rs>1&&(Rs=Math.sqrt(Rs),ys*=Rs,xs*=Rs);var js=ys*ys,zs=xs*xs,Us=(is===us?-1:1)*Math.sqrt(Math.abs((js*zs-js*Fs*Fs-zs*Ds*Ds)/(js*Fs*Fs+zs*Ds*Ds)));ks=Us*ys*Fs/xs+(vs+ms)/2,Ps=Us*-xs*Ds/ys+(gs+Ss)/2,As=Math.asin(((gs-Ps)/xs*Math.pow(10,9)>>0)/Math.pow(10,9)),Is=Math.asin(((Ss-Ps)/xs*Math.pow(10,9)>>0)/Math.pow(10,9)),As=vs<ks?Math.PI-As:As,Is=ms<ks?Math.PI-Is:Is,As<0&&(As=Math.PI*2+As),Is<0&&(Is=Math.PI*2+Is),us&&As>Is&&(As-=Math.PI*2),!us&&Is>As&&(Is-=Math.PI*2)}var Ys=Is-As;if(Math.abs(Ys)>Ms){var Ks=Is,qs=ms,_l=Ss;Is=As+Ms*(us&&Is>As?1:-1),ms=ks+ys*Math.cos(Is),Ss=Ps+xs*Math.sin(Is),bs=arcToCubic(ms,Ss,ys,xs,os,0,us,qs,_l,[Is,Ks,ks,Ps])}Ys=Is-As;var Js=Math.cos(As),Vs=Math.sin(As),Zs=Math.cos(Is),Sl=Math.sin(Is),Il=Math.tan(Ys/4),Nl=4/3*ys*Il,Tl=4/3*xs*Il,_c=[vs,gs],l0=[vs+Nl*Vs,gs-Tl*Js],g0=[ms+Nl*Sl,Ss-Tl*Zs],R0=[ms,Ss];if(l0[0]=2*_c[0]-l0[0],l0[1]=2*_c[1]-l0[1],hs)return l0.concat(g0,R0,bs);bs=l0.concat(g0,R0,bs);for(var V0=[],U0=0,tv=bs.length;U0<tv;U0+=1)V0[U0]=U0%2?rotateVector(bs[U0-1],bs[U0],$s).y:rotateVector(bs[U0],bs[U0+1],$s).x;return V0}function quadToCubic(ns,ts,rs,as,os,is){var us=.3333333333333333,ls=2/3;return[us*ns+ls*rs,us*ts+ls*as,us*os+ls*rs,us*is+ls*as,os,is]}function midPoint(ns,ts,rs){var as=ns[0],os=ns[1],is=ts[0],us=ts[1];return[as+(is-as)*rs,os+(us-os)*rs]}var lineToCubic=function(ns,ts,rs,as){var os=.5,is=midPoint([ns,ts],[rs,as],os);return __spreadArray$4(__spreadArray$4([],is,!0),[rs,as,rs,as],!1)};function segmentToCubic(ns,ts){var rs=ns[0],as=ns.slice(1).map(Number),os=as[0],is=as[1],us,ls=ts.x1,fs=ts.y1,hs=ts.x,vs=ts.y;switch("TQ".includes(rs)||(ts.qx=null,ts.qy=null),rs){case"M":return ts.x=os,ts.y=is,ns;case"A":return us=[ls,fs].concat(as),["C"].concat(arcToCubic(us[0],us[1],us[2],us[3],us[4],us[5],us[6],us[7],us[8],us[9]));case"Q":return ts.qx=os,ts.qy=is,us=[ls,fs].concat(as),["C"].concat(quadToCubic(us[0],us[1],us[2],us[3],us[4],us[5]));case"L":return["C"].concat(lineToCubic(ls,fs,os,is));case"Z":return ls===hs&&fs===vs?["C",ls,fs,hs,vs,hs,vs]:["C"].concat(lineToCubic(ls,fs,hs,vs))}return ns}function path2Curve(ns,ts){if(ts===void 0&&(ts=!1),isCurveArray(ns)){var rs=[].concat(ns);return ts?[rs,[]]:rs}for(var as=normalizePath(ns),os=__assign$h({},paramsParser),is=[],us="",ls=as.length,fs,hs,vs=[],gs=0;gs<ls;gs+=1){as[gs]&&(us=as[gs][0]),is[gs]=us;var ys=segmentToCubic(as[gs],os);as[gs]=ys,fixArc(as,is,gs),ls=as.length,us==="Z"&&vs.push(gs),fs=as[gs],hs=fs.length,os.x1=+fs[hs-2],os.y1=+fs[hs-1],os.x2=+fs[hs-4]||os.x1,os.y2=+fs[hs-3]||os.y1}return ts?[as,vs]:as}function clonePath(ns){return ns.map(function(ts){return Array.isArray(ts)?[].concat(ts):ts})}function reverseCurve(ns){var ts=ns.slice(1).map(function(rs,as,os){return as?os[as-1].slice(-2).concat(rs.slice(1)):ns[0].slice(1).concat(rs.slice(1))}).map(function(rs){return rs.map(function(as,os){return rs[rs.length-os-2*(1-os%2)]})}).reverse();return[["M"].concat(ts[0].slice(0,2))].concat(ts.map(function(rs){return["C"].concat(rs.slice(2))}))}function distanceSquareRoot(ns,ts){return Math.sqrt((ns[0]-ts[0])*(ns[0]-ts[0])+(ns[1]-ts[1])*(ns[1]-ts[1]))}function segmentLineFactory(ns,ts,rs,as,os){var is=distanceSquareRoot([ns,ts],[rs,as]),us={x:0,y:0};if(typeof os=="number")if(os<=0)us={x:ns,y:ts};else if(os>=is)us={x:rs,y:as};else{var ls=midPoint([ns,ts],[rs,as],os/is),fs=ls[0],hs=ls[1];us={x:fs,y:hs}}return{length:is,point:us,min:{x:Math.min(ns,rs),y:Math.min(ts,as)},max:{x:Math.max(ns,rs),y:Math.max(ts,as)}}}function angleBetween(ns,ts){var rs=ns.x,as=ns.y,os=ts.x,is=ts.y,us=rs*os+as*is,ls=Math.sqrt((Math.pow(rs,2)+Math.pow(as,2))*(Math.pow(os,2)+Math.pow(is,2))),fs=rs*is-as*os<0?-1:1,hs=fs*Math.acos(us/ls);return hs}function getPointAtArcSegmentLength(ns,ts,rs,as,os,is,us,ls,fs,hs){var vs=Math.abs,gs=Math.sin,ys=Math.cos,xs=Math.sqrt,ms=Math.PI,Ss=vs(rs),Ms=vs(as),$s=(os%360+360)%360,bs=$s*(ms/180);if(ns===ls&&ts===fs)return{x:ns,y:ts};if(Ss===0||Ms===0)return segmentLineFactory(ns,ts,ls,fs,hs).point;var Cs=(ns-ls)/2,As=(ts-fs)/2,Is={x:ys(bs)*Cs+gs(bs)*As,y:-gs(bs)*Cs+ys(bs)*As},ks=Math.pow(Is.x,2)/Math.pow(Ss,2)+Math.pow(Is.y,2)/Math.pow(Ms,2);ks>1&&(Ss*=xs(ks),Ms*=xs(ks));var Ps=Math.pow(Ss,2)*Math.pow(Ms,2)-Math.pow(Ss,2)*Math.pow(Is.y,2)-Math.pow(Ms,2)*Math.pow(Is.x,2),Ds=Math.pow(Ss,2)*Math.pow(Is.y,2)+Math.pow(Ms,2)*Math.pow(Is.x,2),Fs=Ps/Ds;Fs=Fs<0?0:Fs;var Rs=(is!==us?1:-1)*xs(Fs),js={x:Rs*(Ss*Is.y/Ms),y:Rs*(-(Ms*Is.x)/Ss)},zs={x:ys(bs)*js.x-gs(bs)*js.y+(ns+ls)/2,y:gs(bs)*js.x+ys(bs)*js.y+(ts+fs)/2},Us={x:(Is.x-js.x)/Ss,y:(Is.y-js.y)/Ms},Ys=angleBetween({x:1,y:0},Us),Ks={x:(-Is.x-js.x)/Ss,y:(-Is.y-js.y)/Ms},qs=angleBetween(Us,Ks);!us&&qs>0?qs-=2*ms:us&&qs<0&&(qs+=2*ms),qs%=2*ms;var _l=Ys+qs*hs,Js=Ss*ys(_l),Vs=Ms*gs(_l),Zs={x:ys(bs)*Js-gs(bs)*Vs+zs.x,y:gs(bs)*Js+ys(bs)*Vs+zs.y};return Zs}function segmentArcFactory(ns,ts,rs,as,os,is,us,ls,fs,hs,vs){var gs,ys=vs.bbox,xs=ys===void 0?!0:ys,ms=vs.length,Ss=ms===void 0?!0:ms,Ms=vs.sampleSize,$s=Ms===void 0?30:Ms,bs=typeof hs=="number",Cs=ns,As=ts,Is=0,ks=[Cs,As,Is],Ps=[Cs,As],Ds=0,Fs={x:0,y:0},Rs=[{x:Cs,y:As}];bs&&hs<=0&&(Fs={x:Cs,y:As});for(var js=0;js<=$s;js+=1){if(Ds=js/$s,gs=getPointAtArcSegmentLength(ns,ts,rs,as,os,is,us,ls,fs,Ds),Cs=gs.x,As=gs.y,xs&&Rs.push({x:Cs,y:As}),Ss&&(Is+=distanceSquareRoot(Ps,[Cs,As])),Ps=[Cs,As],bs&&Is>=hs&&hs>ks[2]){var zs=(Is-hs)/(Is-ks[2]);Fs={x:Ps[0]*(1-zs)+ks[0]*zs,y:Ps[1]*(1-zs)+ks[1]*zs}}ks=[Cs,As,Is]}return bs&&hs>=Is&&(Fs={x:ls,y:fs}),{length:Is,point:Fs,min:{x:Math.min.apply(null,Rs.map(function(Us){return Us.x})),y:Math.min.apply(null,Rs.map(function(Us){return Us.y}))},max:{x:Math.max.apply(null,Rs.map(function(Us){return Us.x})),y:Math.max.apply(null,Rs.map(function(Us){return Us.y}))}}}function getPointAtCubicSegmentLength(ns,ts,rs,as,os,is,us,ls,fs){var hs=1-fs;return{x:Math.pow(hs,3)*ns+3*Math.pow(hs,2)*fs*rs+3*hs*Math.pow(fs,2)*os+Math.pow(fs,3)*us,y:Math.pow(hs,3)*ts+3*Math.pow(hs,2)*fs*as+3*hs*Math.pow(fs,2)*is+Math.pow(fs,3)*ls}}function segmentCubicFactory(ns,ts,rs,as,os,is,us,ls,fs,hs){var vs,gs=hs.bbox,ys=gs===void 0?!0:gs,xs=hs.length,ms=xs===void 0?!0:xs,Ss=hs.sampleSize,Ms=Ss===void 0?10:Ss,$s=typeof fs=="number",bs=ns,Cs=ts,As=0,Is=[bs,Cs,As],ks=[bs,Cs],Ps=0,Ds={x:0,y:0},Fs=[{x:bs,y:Cs}];$s&&fs<=0&&(Ds={x:bs,y:Cs});for(var Rs=0;Rs<=Ms;Rs+=1){if(Ps=Rs/Ms,vs=getPointAtCubicSegmentLength(ns,ts,rs,as,os,is,us,ls,Ps),bs=vs.x,Cs=vs.y,ys&&Fs.push({x:bs,y:Cs}),ms&&(As+=distanceSquareRoot(ks,[bs,Cs])),ks=[bs,Cs],$s&&As>=fs&&fs>Is[2]){var js=(As-fs)/(As-Is[2]);Ds={x:ks[0]*(1-js)+Is[0]*js,y:ks[1]*(1-js)+Is[1]*js}}Is=[bs,Cs,As]}return $s&&fs>=As&&(Ds={x:us,y:ls}),{length:As,point:Ds,min:{x:Math.min.apply(null,Fs.map(function(zs){return zs.x})),y:Math.min.apply(null,Fs.map(function(zs){return zs.y}))},max:{x:Math.max.apply(null,Fs.map(function(zs){return zs.x})),y:Math.max.apply(null,Fs.map(function(zs){return zs.y}))}}}function getPointAtQuadSegmentLength(ns,ts,rs,as,os,is,us){var ls=1-us;return{x:Math.pow(ls,2)*ns+2*ls*us*rs+Math.pow(us,2)*os,y:Math.pow(ls,2)*ts+2*ls*us*as+Math.pow(us,2)*is}}function segmentQuadFactory(ns,ts,rs,as,os,is,us,ls){var fs,hs=ls.bbox,vs=hs===void 0?!0:hs,gs=ls.length,ys=gs===void 0?!0:gs,xs=ls.sampleSize,ms=xs===void 0?10:xs,Ss=typeof us=="number",Ms=ns,$s=ts,bs=0,Cs=[Ms,$s,bs],As=[Ms,$s],Is=0,ks={x:0,y:0},Ps=[{x:Ms,y:$s}];Ss&&us<=0&&(ks={x:Ms,y:$s});for(var Ds=0;Ds<=ms;Ds+=1){if(Is=Ds/ms,fs=getPointAtQuadSegmentLength(ns,ts,rs,as,os,is,Is),Ms=fs.x,$s=fs.y,vs&&Ps.push({x:Ms,y:$s}),ys&&(bs+=distanceSquareRoot(As,[Ms,$s])),As=[Ms,$s],Ss&&bs>=us&&us>Cs[2]){var Fs=(bs-us)/(bs-Cs[2]);ks={x:As[0]*(1-Fs)+Cs[0]*Fs,y:As[1]*(1-Fs)+Cs[1]*Fs}}Cs=[Ms,$s,bs]}return Ss&&us>=bs&&(ks={x:os,y:is}),{length:bs,point:ks,min:{x:Math.min.apply(null,Ps.map(function(Rs){return Rs.x})),y:Math.min.apply(null,Ps.map(function(Rs){return Rs.y}))},max:{x:Math.max.apply(null,Ps.map(function(Rs){return Rs.x})),y:Math.max.apply(null,Ps.map(function(Rs){return Rs.y}))}}}function pathLengthFactory(ns,ts,rs){for(var as,os,is,us,ls,fs,hs=normalizePath(ns),vs=typeof ts=="number",gs,ys=[],xs,ms=0,Ss=0,Ms=0,$s=0,bs,Cs=[],As=[],Is=0,ks={x:0,y:0},Ps=ks,Ds=ks,Fs=ks,Rs=0,js=0,zs=hs.length;js<zs;js+=1)bs=hs[js],xs=bs[0],gs=xs==="M",ys=gs?ys:[ms,Ss].concat(bs.slice(1)),gs?(Ms=bs[1],$s=bs[2],ks={x:Ms,y:$s},Ps=ks,Is=0,vs&&ts<.001&&(Fs=ks)):xs==="L"?(as=segmentLineFactory(ys[0],ys[1],ys[2],ys[3],(ts||0)-Rs),Is=as.length,ks=as.min,Ps=as.max,Ds=as.point):xs==="A"?(os=segmentArcFactory(ys[0],ys[1],ys[2],ys[3],ys[4],ys[5],ys[6],ys[7],ys[8],(ts||0)-Rs,rs||{}),Is=os.length,ks=os.min,Ps=os.max,Ds=os.point):xs==="C"?(is=segmentCubicFactory(ys[0],ys[1],ys[2],ys[3],ys[4],ys[5],ys[6],ys[7],(ts||0)-Rs,rs||{}),Is=is.length,ks=is.min,Ps=is.max,Ds=is.point):xs==="Q"?(us=segmentQuadFactory(ys[0],ys[1],ys[2],ys[3],ys[4],ys[5],(ts||0)-Rs,rs||{}),Is=us.length,ks=us.min,Ps=us.max,Ds=us.point):xs==="Z"&&(ys=[ms,Ss,Ms,$s],ls=segmentLineFactory(ys[0],ys[1],ys[2],ys[3],(ts||0)-Rs),Is=ls.length,ks=ls.min,Ps=ls.max,Ds=ls.point),vs&&Rs<ts&&Rs+Is>=ts&&(Fs=Ds),As.push(Ps),Cs.push(ks),Rs+=Is,fs=xs!=="Z"?bs.slice(-2):[Ms,$s],ms=fs[0],Ss=fs[1];return vs&&ts>=Rs&&(Fs={x:ms,y:Ss}),{length:Rs,point:Fs,min:{x:Math.min.apply(null,Cs.map(function(Us){return Us.x})),y:Math.min.apply(null,Cs.map(function(Us){return Us.y}))},max:{x:Math.max.apply(null,As.map(function(Us){return Us.x})),y:Math.max.apply(null,As.map(function(Us){return Us.y}))}}}function getPathBBox(ns,ts){if(!ns)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var rs=pathLengthFactory(ns,void 0,__assign$h(__assign$h({},ts),{length:!1})),as=rs.min,os=as.x,is=as.y,us=rs.max,ls=us.x,fs=us.y,hs=ls-os,vs=fs-is;return{width:hs,height:vs,x:os,y:is,x2:ls,y2:fs,cx:os+hs/2,cy:is+vs/2,cz:Math.max(hs,vs)+Math.min(hs,vs)/2}}function getTotalLength(ns,ts){return pathLengthFactory(ns,void 0,__assign$h(__assign$h({},ts),{bbox:!1,length:!0})).length}function getPathBBoxTotalLength(ns,ts){if(!ns)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var rs=pathLengthFactory(ns,void 0,__assign$h(__assign$h({},ts),{bbox:!0,length:!0})),as=rs.length,os=rs.min,is=os.x,us=os.y,ls=rs.max,fs=ls.x,hs=ls.y,vs=fs-is,gs=hs-us;return{length:as,width:vs,height:gs,x:is,y:us,x2:fs,y2:hs,cx:is+vs/2,cy:us+gs/2,cz:Math.max(vs,gs)+Math.min(vs,gs)/2}}function getRotations(ns){var ts=ns.length,rs=ts-1;return ns.map(function(as,os){return ns.map(function(is,us){var ls=os+us,fs;return us===0||ns[ls]&&ns[ls][0]==="M"?(fs=ns[ls],["M"].concat(fs.slice(-2))):(ls>=ts&&(ls-=rs),ns[ls])})})}function getRotatedCurve(ns,ts){var rs=ns.length-1,as=[],os=0,is=0,us=getRotations(ns);return us.forEach(function(ls,fs){ns.slice(1).forEach(function(hs,vs){is+=distanceSquareRoot(ns[(fs+vs)%rs].slice(-2),ts[vs%rs].slice(-2))}),as[fs]=is,is=0}),os=as.indexOf(Math.min.apply(null,as)),us[os]}function getCubicSegArea(ns,ts,rs,as,os,is,us,ls){return 3*((ls-ts)*(rs+os)-(us-ns)*(as+is)+as*(ns-os)-rs*(ts-is)+ls*(os+ns/3)-us*(is+ts/3))/20}function getPathArea(ns){var ts=0,rs=0,as=0;return path2Curve(ns).map(function(os){var is;switch(os[0]){case"M":return ts=os[1],rs=os[2],0;default:var us=os.slice(1),ls=us[0],fs=us[1],hs=us[2],vs=us[3],gs=us[4],ys=us[5];return as=getCubicSegArea(ts,rs,ls,fs,hs,vs,gs,ys),is=os.slice(-2),ts=is[0],rs=is[1],as}}).reduce(function(os,is){return os+is},0)}function getDrawDirection(ns){return getPathArea(ns)>=0}function getPointAtLength(ns,ts,rs){return pathLengthFactory(ns,ts,__assign$h(__assign$h({},rs),{bbox:!1,length:!0})).point}function getPropertiesAtLength(ns,ts){var rs=parsePathString(ns);if(typeof rs=="string")throw TypeError(rs);var as=rs.slice(),os=getTotalLength(as),is=as.length-1,us=0,ls=0,fs=rs[0],hs=fs.slice(-2),vs=hs[0],gs=hs[1],ys={x:vs,y:gs};if(is<=0||!ts||!Number.isFinite(ts))return{segment:fs,index:0,length:ls,point:ys,lengthAtSegment:us};if(ts>=os)return as=rs.slice(0,-1),us=getTotalLength(as),ls=os-us,{segment:rs[is],index:is,length:ls,lengthAtSegment:us};for(var xs=[];is>0;)fs=as[is],as=as.slice(0,-1),us=getTotalLength(as),ls=os-us,os=us,xs.push({segment:fs,index:is,length:ls,lengthAtSegment:us}),is-=1;return xs.find(function(ms){var Ss=ms.lengthAtSegment;return Ss<=ts})}function getPropertiesAtPoint(ns,ts){for(var rs=parsePathString(ns),as=normalizePath(rs),os=getTotalLength(rs),is=function(Is){var ks=Is.x-ts.x,Ps=Is.y-ts.y;return ks*ks+Ps*Ps},us=8,ls,fs=0,hs,vs=0,gs=1/0,ys=0;ys<=os;ys+=us)ls=getPointAtLength(as,ys),fs=is(ls),fs<gs&&(hs=ls,vs=ys,gs=fs);us/=2;for(var xs,ms,Ss=0,Ms=0,$s=0,bs=0;us>.5;)Ss=vs-us,xs=getPointAtLength(as,Ss),$s=is(xs),Ms=vs+us,ms=getPointAtLength(as,Ms),bs=is(ms),Ss>=0&&$s<gs?(hs=xs,vs=Ss,gs=$s):Ms<=os&&bs<gs?(hs=ms,vs=Ms,gs=bs):us/=2;var Cs=getPropertiesAtLength(rs,vs),As=Math.sqrt(gs);return{closest:hs,distance:As,segment:Cs}}function isPointInStroke(ns,ts){var rs=getPropertiesAtPoint(ns,ts).distance;return Math.abs(rs)<.001}function splitCubic(ns,ts){ts===void 0&&(ts=.5);var rs=ns.slice(0,2),as=ns.slice(2,4),os=ns.slice(4,6),is=ns.slice(6,8),us=midPoint(rs,as,ts),ls=midPoint(as,os,ts),fs=midPoint(os,is,ts),hs=midPoint(us,ls,ts),vs=midPoint(ls,fs,ts),gs=midPoint(hs,vs,ts);return[["C"].concat(us,hs,gs),["C"].concat(vs,fs,is)]}function getCurveArray(ns){return ns.map(function(ts,rs,as){var os=rs&&as[rs-1].slice(-2).concat(ts.slice(1)),is=rs?segmentCubicFactory(os[0],os[1],os[2],os[3],os[4],os[5],os[6],os[7],os[8],{bbox:!1}).length:0,us;return rs?us=is?splitCubic(os):[ts,ts]:us=[ts],{s:ts,ss:us,l:is}})}function equalizeSegments(ns,ts,rs){var as=getCurveArray(ns),os=getCurveArray(ts),is=as.length,us=os.length,ls=as.filter(function(Ms){return Ms.l}).length,fs=os.filter(function(Ms){return Ms.l}).length,hs=as.filter(function(Ms){return Ms.l}).reduce(function(Ms,$s){var bs=$s.l;return Ms+bs},0)/ls||0,vs=os.filter(function(Ms){return Ms.l}).reduce(function(Ms,$s){var bs=$s.l;return Ms+bs},0)/fs||0,gs=rs||Math.max(is,us),ys=[hs,vs],xs=[gs-is,gs-us],ms=0,Ss=[as,os].map(function(Ms,$s){return Ms.l===gs?Ms.map(function(bs){return bs.s}):Ms.map(function(bs,Cs){return ms=Cs&&xs[$s]&&bs.l>=ys[$s],xs[$s]-=ms?1:0,ms?bs.ss:[bs.s]}).flat()});return Ss[0].length===Ss[1].length?Ss:equalizeSegments(Ss[0],Ss[1],gs)}var tolerance=1e-6;function dcmp(ns){return Math.abs(ns)<tolerance?0:ns<0?-1:1}function onSegment$1(ns,ts,rs){return(rs[0]-ns[0])*(ts[1]-ns[1])===(ts[0]-ns[0])*(rs[1]-ns[1])&&Math.min(ns[0],ts[0])<=rs[0]&&rs[0]<=Math.max(ns[0],ts[0])&&Math.min(ns[1],ts[1])<=rs[1]&&rs[1]<=Math.max(ns[1],ts[1])}function isPointInPolygon$1(ns,ts,rs){var as=!1,os=ns.length;if(os<=2)return!1;for(var is=0;is<os;is++){var us=ns[is],ls=ns[(is+1)%os];if(onSegment$1(us,ls,[ts,rs]))return!0;dcmp(us[1]-rs)>0!=dcmp(ls[1]-rs)>0&&dcmp(ts-(rs-us[1])*(us[0]-ls[0])/(us[1]-ls[1])-us[0])<0&&(as=!as)}return as}var isBetween$1=function(ns,ts,rs){return ns>=ts&&ns<=rs};function getLineIntersect$1(ns,ts,rs,as){var os=.001,is={x:rs.x-ns.x,y:rs.y-ns.y},us={x:ts.x-ns.x,y:ts.y-ns.y},ls={x:as.x-rs.x,y:as.y-rs.y},fs=us.x*ls.y-us.y*ls.x,hs=fs*fs,vs=us.x*us.x+us.y*us.y,gs=ls.x*ls.x+ls.y*ls.y,ys=null;if(hs>os*vs*gs){var xs=(is.x*ls.y-is.y*ls.x)/fs,ms=(is.x*us.y-is.y*us.x)/fs;isBetween$1(xs,0,1)&&isBetween$1(ms,0,1)&&(ys={x:ns.x+xs*us.x,y:ns.y+xs*us.y})}return ys}function parseToLines(ns){for(var ts=[],rs=ns.length,as=0;as<rs-1;as++){var os=ns[as],is=ns[as+1];ts.push({from:{x:os[0],y:os[1]},to:{x:is[0],y:is[1]}})}if(ts.length>1){var us=ns[0],ls=ns[rs-1];ts.push({from:{x:ls[0],y:ls[1]},to:{x:us[0],y:us[1]}})}return ts}function lineIntersectPolygon$1(ns,ts){var rs=!1;return ns.forEach(function(as){if(getLineIntersect$1(as.from,as.to,ts.from,ts.to))return rs=!0,!1}),rs}function getBBox$2(ns){var ts=ns.map(function(as){return as[0]}),rs=ns.map(function(as){return as[1]});return{minX:Math.min.apply(null,ts),maxX:Math.max.apply(null,ts),minY:Math.min.apply(null,rs),maxY:Math.max.apply(null,rs)}}function intersectBBox$1(ns,ts){return!(ts.minX>ns.maxX||ts.maxX<ns.minX||ts.minY>ns.maxY||ts.maxY<ns.minY)}function isPolygonsIntersect$2(ns,ts){if(ns.length<2||ts.length<2)return!1;var rs=getBBox$2(ns),as=getBBox$2(ts);if(!intersectBBox$1(rs,as))return!1;var os=!1;if(ts.forEach(function(fs){if(isPointInPolygon$1(ns,fs[0],fs[1]))return os=!0,!1}),os||(ns.forEach(function(fs){if(isPointInPolygon$1(ts,fs[0],fs[1]))return os=!0,!1}),os))return!0;var is=parseToLines(ns),us=parseToLines(ts),ls=!1;return us.forEach(function(fs){if(lineIntersectPolygon$1(is,fs))return ls=!0,!1}),ls}function createDOM(ns){var ts=document.createElement("div");ts.innerHTML=ns;var rs=ts.childNodes[0];return rs&&ts.contains(rs)&&ts.removeChild(rs),rs}function modifyCSS(ns,ts){if(ns)return Object.keys(ts).forEach(function(rs){ns.style[rs]=ts[rs]}),ns}const esm=Object.freeze(Object.defineProperty({__proto__:null,Cache:default_1$1,angleTo,arcToCubic,assign:mix,augment:augment$1,clamp:clamp$1,clearAnimationFrame:cancelAnimationFrame$1,clone:clone$1,clonePath,contains:contains$1,createDOM,debounce,deepMix:deepMix$1,difference:difference$1,direction,distanceSquareRoot,each,endsWith,equalizeSegments,every:every$1,extend:extend$1,filter:filter$1,find,findIndex,firstValue:firstValue$1,fixedBase:fixedBase$1,flatten:flatten$1,flattenDeep:flattenDeep$1,forIn:each,get,getDrawDirection,getPathArea,getPathBBox,getPathBBoxTotalLength,getPointAtLength,getRange:getRange$1,getRotatedCurve,getTotalLength,getType:getType$1,getWrapBehavior,gradient,group,groupBy,groupToMap,has,hasKey:has,hasValue,head,identity,includes:contains$1,indexOf:indexOf$1,isArguments:isArguments$1,isArray:isArray$1,isArrayLike:isArraylike,isBoolean:isBoolean$1,isDate:isDate$1,isDecimal:isDecimal$1,isElement:isElement$1,isEmpty,isEqual:isEqual$1,isEqualWith,isError:isError$1,isEven:isEven$1,isFinite:isFinite$1,isFunction,isInteger:isInteger$1,isMatch,isNegative:isNegative$1,isNil:isNil$1,isNull:isNull$1,isNumber:isNumber$2,isNumberEqual,isObject,isObjectLike:isObjectLike$5,isOdd:isOdd$1,isPlainObject:isPlainObject$2,isPointInPolygon:isPointInPolygon$1,isPointInStroke,isPolygonsIntersect:isPolygonsIntersect$2,isPositive:isPositive$1,isPrototype:isPrototype$1,isRegExp:isRegExp$1,isString,isType:isType$1,isUndefined:isUndefined$1,keys:keys$1,last,lowerCase:lowerCase$1,lowerFirst:lowerFirst$1,map:map$3,mapValues,max:getMax,maxBy,memoize,min:getMin,minBy,mix,mod:mod$2,modifyCSS,noop,normalizePath,number2color:numberToColor,omit,parseRadius,path2Absolute,path2Curve,path2String,pick,pull:pull$1,pullAt:pullAt$1,reduce:reduce$1,remove:remove$1,requestAnimationFrame:requestAnimationFrame$1,reverseCurve,rgb2arr,set,size,some:some$1,sortBy,startsWith,substitute:substitute$1,throttle,toArray,toCSSGradient,toDegree:toDegree$1,toInteger:parseInt$1,toRGB,toRadian:toRadian$1,toString:toString$2,transform:transform$a,union:union$1,uniq,uniqueId:uniqueId$1,upperCase:upperCase$1,upperFirst:upperFirst$1,values:values$1,valuesOfKey,vertical,wrapBehavior},Symbol.toStringTag,{value:"Module"})),require$$1$1=getAugmentedNamespace(esm);Object.defineProperty(initOrder$1,"__esModule",{value:!0});var util_1$g=require$$1$1,initOrder=function(ns){for(var ts={},rs=ns.nodes().filter(function(gs){var ys;return!(!((ys=ns.children(gs))===null||ys===void 0)&&ys.length)}),as=rs.map(function(gs){return ns.node(gs).rank}),os=(0,util_1$g.max)(as),is=[],us=0;us<os+1;us++)is.push([]);var ls=function(gs){var ys;if(!ts.hasOwnProperty(gs)){ts[gs]=!0;var xs=ns.node(gs);isNaN(xs.rank)||is[xs.rank].push(gs),(ys=ns.successors(gs))===null||ys===void 0||ys.forEach(function(ms){return ls(ms)})}},fs=rs.sort(function(gs,ys){return ns.node(gs).rank-ns.node(ys).rank}),hs=fs.filter(function(gs){return ns.node(gs).fixorder!==void 0}),vs=hs.sort(function(gs,ys){return ns.node(gs).fixorder-ns.node(ys).fixorder});return vs==null||vs.forEach(function(gs){isNaN(ns.node(gs).rank)||is[ns.node(gs).rank].push(gs),ts[gs]=!0}),fs==null||fs.forEach(ls),is};initOrder$1.default=initOrder;var crossCount$1={};Object.defineProperty(crossCount$1,"__esModule",{value:!0});var util_1$f=util$1,twoLayerCrossCount=function(ns,ts,rs){for(var as=(0,util_1$f.zipObject)(rs,rs.map(function(vs,gs){return gs})),os=ts.map(function(vs){var gs,ys=(gs=ns.outEdges(vs))===null||gs===void 0?void 0:gs.map(function(xs){return{pos:as[xs.w]||0,weight:ns.edge(xs).weight}});return ys==null?void 0:ys.sort(function(xs,ms){return xs.pos-ms.pos})}),is=os.flat().filter(function(vs){return vs!==void 0}),us=1;us<rs.length;)us<<=1;var ls=2*us-1;us-=1;var fs=Array(ls).fill(0,0,ls),hs=0;return is==null||is.forEach(function(vs){if(vs){var gs=vs.pos+us;fs[gs]+=vs.weight;for(var ys=0;gs>0;)gs%2&&(ys+=fs[gs+1]),gs=gs-1>>1,fs[gs]+=vs.weight;hs+=vs.weight*ys}}),hs},crossCount=function(ns,ts){for(var rs=0,as=1;as<(ts==null?void 0:ts.length);as+=1)rs+=twoLayerCrossCount(ns,ts[as-1],ts[as]);return rs};crossCount$1.default=crossCount;var buildLayerGraph$1={};Object.defineProperty(buildLayerGraph$1,"__esModule",{value:!0});var graph_1$3=graph,buildLayerGraph=function(ns,ts,rs){var as=createRootNode(ns),os=new graph_1$3.Graph({compound:!0}).setGraph({root:as}).setDefaultNodeLabel(function(is){return ns.node(is)});return ns.nodes().forEach(function(is){var us,ls=ns.node(is),fs=ns.parent(is);(ls.rank===ts||ls.minRank<=ts&&ts<=ls.maxRank)&&(os.setNode(is),os.setParent(is,fs||as),(us=ns[rs](is))===null||us===void 0||us.forEach(function(hs){var vs=hs.v===is?hs.w:hs.v,gs=os.edgeFromArgs(vs,is),ys=gs!==void 0?gs.weight:0;os.setEdge(vs,is,{weight:ns.edge(hs).weight+ys})}),ls.hasOwnProperty("minRank")&&os.setNode(is,{borderLeft:ls.borderLeft[ts],borderRight:ls.borderRight[ts]}))}),os},createRootNode=function(ns){for(var ts;ns.hasNode(ts="_root".concat(Math.random())););return ts};buildLayerGraph$1.default=buildLayerGraph;var addSubgraphConstraints$1={};Object.defineProperty(addSubgraphConstraints$1,"__esModule",{value:!0});var addSubgraphConstraints=function(ns,ts,rs){var as={},os;rs==null||rs.forEach(function(is){for(var us=ns.parent(is),ls,fs;us;){if(ls=ns.parent(us),ls?(fs=as[ls],as[ls]=us):(fs=os,os=us),fs&&fs!==us){ts.setEdge(fs,us);return}us=ls}})};addSubgraphConstraints$1.default=addSubgraphConstraints;var sortSubgraph$1={},barycenter$1={};Object.defineProperty(barycenter$1,"__esModule",{value:!0});var barycenter=function(ns,ts){return ts.map(function(rs){var as=ns.inEdges(rs);if(!(as!=null&&as.length))return{v:rs};{var os={sum:0,weight:0};return as==null||as.forEach(function(is){var us=ns.edge(is),ls=ns.node(is.v);os.sum+=us.weight*ls.order,os.weight+=us.weight}),{v:rs,barycenter:os.sum/os.weight,weight:os.weight}}})};barycenter$1.default=barycenter;var resolveConflicts$1={};Object.defineProperty(resolveConflicts$1,"__esModule",{value:!0});var resolveConflicts=function(ns,ts){var rs,as,os,is={};ns==null||ns.forEach(function(ls,fs){is[ls.v]={i:fs,indegree:0,in:[],out:[],vs:[ls.v]};var hs=is[ls.v];ls.barycenter!==void 0&&(hs.barycenter=ls.barycenter,hs.weight=ls.weight)}),(rs=ts.edges())===null||rs===void 0||rs.forEach(function(ls){var fs=is[ls.v],hs=is[ls.w];fs!==void 0&&hs!==void 0&&(hs.indegree++,fs.out.push(is[ls.w]))});var us=(os=(as=Object.values(is)).filter)===null||os===void 0?void 0:os.call(as,function(ls){return!ls.indegree});return doResolveConflicts(us)},doResolveConflicts=function(ns){for(var ts,rs,as=[],os=function(hs){return function(vs){vs.merged||(vs.barycenter===void 0||hs.barycenter===void 0||vs.barycenter>=hs.barycenter)&&mergeEntries(hs,vs)}},is=function(hs){return function(vs){vs.in.push(hs),--vs.indegree===0&&ns.push(vs)}},us=function(){var hs=ns.pop();as.push(hs),(ts=hs.in.reverse())===null||ts===void 0||ts.forEach(function(vs){return os(hs)(vs)}),(rs=hs.out)===null||rs===void 0||rs.forEach(function(vs){return is(hs)(vs)})};ns!=null&&ns.length;)us();var ls=as.filter(function(hs){return!hs.merged}),fs=["vs","i","barycenter","weight"];return ls.map(function(hs){var vs={};return fs==null||fs.forEach(function(gs){hs[gs]!==void 0&&(vs[gs]=hs[gs])}),vs})},mergeEntries=function(ns,ts){var rs,as=0,os=0;ns.weight&&(as+=ns.barycenter*ns.weight,os+=ns.weight),ts.weight&&(as+=ts.barycenter*ts.weight,os+=ts.weight),ns.vs=(rs=ts.vs)===null||rs===void 0?void 0:rs.concat(ns.vs),ns.barycenter=as/os,ns.weight=os,ns.i=Math.min(ts.i,ns.i),ts.merged=!0};resolveConflicts$1.default=resolveConflicts;var sort$1={};Object.defineProperty(sort$1,"__esModule",{value:!0});var util_1$e=util$1,sort=function(ns,ts,rs,as){var os=(0,util_1$e.partition)(ns,function(ys){var xs=ys.hasOwnProperty("fixorder")&&!isNaN(ys.fixorder);return as?!xs&&ys.hasOwnProperty("barycenter"):xs||ys.hasOwnProperty("barycenter")}),is=os.lhs,us=os.rhs.sort(function(ys,xs){return-ys.i- -xs.i}),ls=[],fs=0,hs=0,vs=0;is==null||is.sort(compareWithBias(!!ts,!!rs)),vs=consumeUnsortable(ls,us,vs),is==null||is.forEach(function(ys){var xs;vs+=(xs=ys.vs)===null||xs===void 0?void 0:xs.length,ls.push(ys.vs),fs+=ys.barycenter*ys.weight,hs+=ys.weight,vs=consumeUnsortable(ls,us,vs)});var gs={vs:ls.flat()};return hs&&(gs.barycenter=fs/hs,gs.weight=hs),gs},consumeUnsortable=function(ns,ts,rs){for(var as=rs,os;ts.length&&(os=ts[ts.length-1]).i<=as;)ts.pop(),ns==null||ns.push(os.vs),as++;return as},compareWithBias=function(ns,ts){return function(rs,as){if(rs.fixorder!==void 0&&as.fixorder!==void 0)return rs.fixorder-as.fixorder;if(rs.barycenter<as.barycenter)return-1;if(rs.barycenter>as.barycenter)return 1;if(ts&&rs.order!==void 0&&as.order!==void 0){if(rs.order<as.order)return-1;if(rs.order>as.order)return 1}return ns?as.i-rs.i:rs.i-as.i}};sort$1.default=sort;var __importDefault$9=commonjsGlobal&&commonjsGlobal.__importDefault||function(ns){return ns&&ns.__esModule?ns:{default:ns}};Object.defineProperty(sortSubgraph$1,"__esModule",{value:!0});var barycenter_1=__importDefault$9(barycenter$1),resolve_conflicts_1=__importDefault$9(resolveConflicts$1),sort_1=__importDefault$9(sort$1),sortSubgraph=function(ns,ts,rs,as,os,is){var us,ls,fs,hs,vs=ns.children(ts),gs=ns.node(ts),ys=gs?gs.borderLeft:void 0,xs=gs?gs.borderRight:void 0,ms={};ys&&(vs=vs==null?void 0:vs.filter(function(As){return As!==ys&&As!==xs}));var Ss=(0,barycenter_1.default)(ns,vs||[]);Ss==null||Ss.forEach(function(As){var Is;if(!((Is=ns.children(As.v))===null||Is===void 0)&&Is.length){var ks=sortSubgraph(ns,As.v,rs,as,is);ms[As.v]=ks,ks.hasOwnProperty("barycenter")&&mergeBarycenters(As,ks)}});var Ms=(0,resolve_conflicts_1.default)(Ss,rs);expandSubgraphs(Ms,ms),(us=Ms.filter(function(As){return As.vs.length>0}))===null||us===void 0||us.forEach(function(As){var Is=ns.node(As.vs[0]);Is&&(As.fixorder=Is.fixorder,As.order=Is.order)});var $s=(0,sort_1.default)(Ms,as,os,is);if(ys&&($s.vs=[ys,$s.vs,xs].flat(),!((ls=ns.predecessors(ys))===null||ls===void 0)&&ls.length)){var bs=ns.node(((fs=ns.predecessors(ys))===null||fs===void 0?void 0:fs[0])||""),Cs=ns.node(((hs=ns.predecessors(xs))===null||hs===void 0?void 0:hs[0])||"");$s.hasOwnProperty("barycenter")||($s.barycenter=0,$s.weight=0),$s.barycenter=($s.barycenter*$s.weight+bs.order+Cs.order)/($s.weight+2),$s.weight+=2}return $s},expandSubgraphs=function(ns,ts){ns==null||ns.forEach(function(rs){var as,os=(as=rs.vs)===null||as===void 0?void 0:as.map(function(is){return ts[is]?ts[is].vs:is});rs.vs=os.flat()})},mergeBarycenters=function(ns,ts){ns.barycenter!==void 0?(ns.barycenter=(ns.barycenter*ns.weight+ts.barycenter*ts.weight)/(ns.weight+ts.weight),ns.weight+=ts.weight):(ns.barycenter=ts.barycenter,ns.weight=ts.weight)};sortSubgraph$1.default=sortSubgraph;var __importDefault$8=commonjsGlobal&&commonjsGlobal.__importDefault||function(ns){return ns&&ns.__esModule?ns:{default:ns}};Object.defineProperty(order$1,"__esModule",{value:!0});var init_order_1=__importDefault$8(initOrder$1),cross_count_1=__importDefault$8(crossCount$1),build_layer_graph_1=__importDefault$8(buildLayerGraph$1),add_subgraph_constraints_1=__importDefault$8(addSubgraphConstraints$1),sort_subgraph_1=__importDefault$8(sortSubgraph$1),util_1$d=requireUtil(),graph_1$2=graph,util_2=util$1,order=function(ns,ts){for(var rs=(0,util_2.maxRank)(ns),as=[],os=[],is=1;is<rs+1;is++)as.push(is);for(var is=rs-1;is>-1;is--)os.push(is);var us=buildLayerGraphs(ns,as,"inEdges"),ls=buildLayerGraphs(ns,os,"outEdges"),fs=(0,init_order_1.default)(ns);assignOrder(ns,fs);for(var hs=Number.POSITIVE_INFINITY,vs,is=0,gs=0;gs<4;++is,++gs){sweepLayerGraphs(is%2?us:ls,is%4>=2,!1,ts),fs=(0,util_2.buildLayerMatrix)(ns);var ys=(0,cross_count_1.default)(ns,fs);ys<hs&&(gs=0,vs=(0,util_1$d.clone)(fs),hs=ys)}fs=(0,init_order_1.default)(ns),assignOrder(ns,fs);for(var is=0,gs=0;gs<4;++is,++gs){sweepLayerGraphs(is%2?us:ls,is%4>=2,!0,ts),fs=(0,util_2.buildLayerMatrix)(ns);var ys=(0,cross_count_1.default)(ns,fs);ys<hs&&(gs=0,vs=(0,util_1$d.clone)(fs),hs=ys)}assignOrder(ns,vs)},buildLayerGraphs=function(ns,ts,rs){return ts.map(function(as){return(0,build_layer_graph_1.default)(ns,as,rs)})},sweepLayerGraphs=function(ns,ts,rs,as){var os=new graph_1$2.Graph;ns==null||ns.forEach(function(is){for(var us,ls=is.graph().root,fs=(0,sort_subgraph_1.default)(is,ls,os,ts,rs,as),hs=0;hs<((us=fs.vs)===null||us===void 0?void 0:us.length);hs++){var vs=is.node(fs.vs[hs]);vs&&(vs.order=hs)}(0,add_subgraph_constraints_1.default)(is,os,fs.vs)})},assignOrder=function(ns,ts){ts==null||ts.forEach(function(rs){rs==null||rs.forEach(function(as,os){ns.node(as).order=os})})};order$1.default=order;var position$1={},bk={};(function(ns){var ts=commonjsGlobal&&commonjsGlobal.__extends||function(){var As=function(Is,ks){return As=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ps,Ds){Ps.__proto__=Ds}||function(Ps,Ds){for(var Fs in Ds)Object.prototype.hasOwnProperty.call(Ds,Fs)&&(Ps[Fs]=Ds[Fs])},As(Is,ks)};return function(Is,ks){if(typeof ks!="function"&&ks!==null)throw new TypeError("Class extends value "+String(ks)+" is not a constructor or null");As(Is,ks);function Ps(){this.constructor=Is}Is.prototype=ks===null?Object.create(ks):(Ps.prototype=ks.prototype,new Ps)}}();Object.defineProperty(ns,"__esModule",{value:!0}),ns.width=ns.sep=ns.positionX=ns.balance=ns.alignCoordinates=ns.findSmallestWidthAlignment=ns.buildBlockGraph=ns.horizontalCompaction=ns.verticalAlignment=ns.hasConflict=ns.addConflict=ns.findOtherInnerSegmentNode=ns.findType2Conflicts=ns.findType1Conflicts=void 0;var rs=require$$0$1,as=require$$1$1,os=util$1,is=function(As){ts(Is,As);function Is(){return As!==null&&As.apply(this,arguments)||this}return Is}(rs.Graph),us=function(As,Is){var ks={},Ps=function(Ds,Fs){var Rs=0,js=0,zs=Ds.length,Us=Fs==null?void 0:Fs[(Fs==null?void 0:Fs.length)-1];return Fs==null||Fs.forEach(function(Ys,Ks){var qs,_l=(0,ns.findOtherInnerSegmentNode)(As,Ys),Js=_l?As.node(_l).order:zs;(_l||Ys===Us)&&((qs=Fs.slice(js,Ks+1))===null||qs===void 0||qs.forEach(function(Vs){var Zs;(Zs=As.predecessors(Vs))===null||Zs===void 0||Zs.forEach(function(Sl){var Il,Nl=As.node(Sl),Tl=Nl.order;(Tl<Rs||Js<Tl)&&!(Nl.dummy&&(!((Il=As.node(Vs))===null||Il===void 0)&&Il.dummy))&&(0,ns.addConflict)(ks,Sl,Vs)})}),js=Ks+1,Rs=Js)}),Fs};return Is!=null&&Is.length&&Is.reduce(Ps),ks};ns.findType1Conflicts=us;var ls=function(As,Is){var ks={};function Ps(js,zs,Us,Ys,Ks){for(var qs,_l,Js,Vs=zs;Vs<Us;Vs++)Js=js[Vs],!((qs=As.node(Js))===null||qs===void 0)&&qs.dummy&&((_l=As.predecessors(Js))===null||_l===void 0||_l.forEach(function(Zs){var Sl=As.node(Zs);Sl.dummy&&(Sl.order<Ys||Sl.order>Ks)&&(0,ns.addConflict)(ks,Zs,Js)}))}function Ds(js){return JSON.stringify(js.slice(1))}function Fs(js,zs){var Us=Ds(js);zs.get(Us)||(Ps.apply(void 0,js),zs.set(Us,!0))}var Rs=function(js,zs){var Us=-1,Ys,Ks=0,qs=new Map;return zs==null||zs.forEach(function(_l,Js){var Vs;if(((Vs=As.node(_l))===null||Vs===void 0?void 0:Vs.dummy)==="border"){var Zs=As.predecessors(_l)||[];Zs.length&&(Ys=As.node(Zs[0]).order,Fs([zs,Ks,Js,Us,Ys],qs),Ks=Js,Us=Ys)}Fs([zs,Ks,zs.length,Ys,js.length],qs)}),zs};return Is!=null&&Is.length&&Is.reduce(Rs),ks};ns.findType2Conflicts=ls;var fs=function(As,Is){var ks,Ps;if(!((ks=As.node(Is))===null||ks===void 0)&&ks.dummy)return(Ps=As.predecessors(Is))===null||Ps===void 0?void 0:Ps.find(function(Ds){return As.node(Ds).dummy})};ns.findOtherInnerSegmentNode=fs;var hs=function(As,Is,ks){var Ps=Is,Ds=ks;if(Ps>Ds){var Fs=Ps;Ps=Ds,Ds=Fs}var Rs=As[Ps];Rs||(As[Ps]=Rs={}),Rs[Ds]=!0};ns.addConflict=hs;var vs=function(As,Is,ks){var Ps=Is,Ds=ks;if(Ps>Ds){var Fs=Is;Ps=Ds,Ds=Fs}return!!As[Ps]};ns.hasConflict=vs;var gs=function(As,Is,ks,Ps){var Ds={},Fs={},Rs={};return Is==null||Is.forEach(function(js){js==null||js.forEach(function(zs,Us){Ds[zs]=zs,Fs[zs]=zs,Rs[zs]=Us})}),Is==null||Is.forEach(function(js){var zs=-1;js==null||js.forEach(function(Us){var Ys=Ps(Us);if(Ys.length){Ys=Ys.sort(function(Vs,Zs){return Rs[Vs]-Rs[Zs]});for(var Ks=(Ys.length-1)/2,qs=Math.floor(Ks),_l=Math.ceil(Ks);qs<=_l;++qs){var Js=Ys[qs];Fs[Us]===Us&&zs<Rs[Js]&&!(0,ns.hasConflict)(ks,Us,Js)&&(Fs[Js]=Us,Fs[Us]=Ds[Us]=Ds[Js],zs=Rs[Js])}}})}),{root:Ds,align:Fs}};ns.verticalAlignment=gs;var ys=function(As,Is,ks,Ps,Ds){var Fs,Rs={},js=(0,ns.buildBlockGraph)(As,Is,ks,Ds),zs=Ds?"borderLeft":"borderRight",Us=function(qs,_l){for(var Js=js.nodes(),Vs=Js.pop(),Zs={};Vs;)Zs[Vs]?qs(Vs):(Zs[Vs]=!0,Js.push(Vs),Js=Js.concat(_l(Vs))),Vs=Js.pop()},Ys=function(qs){Rs[qs]=(js.inEdges(qs)||[]).reduce(function(_l,Js){return Math.max(_l,(Rs[Js.v]||0)+js.edge(Js))},0)},Ks=function(qs){var _l=(js.outEdges(qs)||[]).reduce(function(Vs,Zs){return Math.min(Vs,(Rs[Zs.w]||0)-js.edge(Zs))},Number.POSITIVE_INFINITY),Js=As.node(qs);_l!==Number.POSITIVE_INFINITY&&Js.borderType!==zs&&(Rs[qs]=Math.max(Rs[qs],_l))};return Us(Ys,js.predecessors.bind(js)),Us(Ks,js.successors.bind(js)),(Fs=Object.values(Ps))===null||Fs===void 0||Fs.forEach(function(qs){Rs[qs]=Rs[ks[qs]]}),Rs};ns.horizontalCompaction=ys;var xs=function(As,Is,ks,Ps){var Ds=new is,Fs=As.graph(),Rs=(0,ns.sep)(Fs.nodesep,Fs.edgesep,Ps);return Is==null||Is.forEach(function(js){var zs;js==null||js.forEach(function(Us){var Ys=ks[Us];if(Ds.setNode(Ys),zs){var Ks=ks[zs],qs=Ds.edgeFromArgs(Ks,Ys);Ds.setEdge(Ks,Ys,Math.max(Rs(As,Us,zs),qs||0))}zs=Us})}),Ds};ns.buildBlockGraph=xs;var ms=function(As,Is){return(0,os.minBy)(Object.values(Is),function(ks){var Ps,Ds=Number.NEGATIVE_INFINITY,Fs=Number.POSITIVE_INFINITY;return(Ps=Object.keys(ks))===null||Ps===void 0||Ps.forEach(function(Rs){var js=ks[Rs],zs=(0,ns.width)(As,Rs)/2;Ds=Math.max(js+zs,Ds),Fs=Math.min(js-zs,Fs)}),Ds-Fs})};ns.findSmallestWidthAlignment=ms;function Ss(As,Is){var ks=Object.values(Is),Ps=(0,as.min)(ks),Ds=(0,as.max)(ks);["u","d"].forEach(function(Fs){["l","r"].forEach(function(Rs){var js=Fs+Rs,zs=As[js],Us;if(zs!==Is){var Ys=Object.values(zs);Us=Rs==="l"?Ps-(0,as.min)(Ys):Ds-(0,as.max)(Ys),Us&&(As[js]={},Object.keys(zs).forEach(function(Ks){As[js][Ks]=zs[Ks]+Us}))}})})}ns.alignCoordinates=Ss;var Ms=function(As,Is){var ks={};return Object.keys(As.ul).forEach(function(Ps){if(Is)ks[Ps]=As[Is.toLowerCase()][Ps];else{var Ds=Object.values(As).map(function(Fs){return Fs[Ps]});ks[Ps]=(Ds[0]+Ds[1])/2}}),ks};ns.balance=Ms;var $s=function(As){var Is=(0,os.buildLayerMatrix)(As),ks=Object.assign((0,ns.findType1Conflicts)(As,Is),(0,ns.findType2Conflicts)(As,Is)),Ps={},Ds;["u","d"].forEach(function(Rs){Ds=Rs==="u"?Is:Object.values(Is).reverse(),["l","r"].forEach(function(js){js==="r"&&(Ds=Ds.map(function(Ks){return Object.values(Ks).reverse()}));var zs=(Rs==="u"?As.predecessors:As.successors).bind(As),Us=(0,ns.verticalAlignment)(As,Ds,ks,zs),Ys=(0,ns.horizontalCompaction)(As,Ds,Us.root,Us.align,js==="r");js==="r"&&Object.keys(Ys).forEach(function(Ks){Ys[Ks]=-Ys[Ks]}),Ps[Rs+js]=Ys})});var Fs=(0,ns.findSmallestWidthAlignment)(As,Ps);return Ss(Ps,Fs),(0,ns.balance)(Ps,As.graph().align)};ns.positionX=$s;var bs=function(As,Is,ks){return function(Ps,Ds,Fs){var Rs=Ps.node(Ds),js=Ps.node(Fs),zs=0,Us;if(zs+=Rs.width/2,Rs.hasOwnProperty("labelpos"))switch((Rs.labelpos||"").toLowerCase()){case"l":Us=-Rs.width/2;break;case"r":Us=Rs.width/2;break}if(Us&&(zs+=ks?Us:-Us),Us=0,zs+=(Rs.dummy?Is:As)/2,zs+=(js.dummy?Is:As)/2,zs+=js.width/2,js.labelpos)switch((js.labelpos||"").toLowerCase()){case"l":Us=js.width/2;break;case"r":Us=-js.width/2;break}return Us&&(zs+=ks?Us:-Us),Us=0,zs}};ns.sep=bs;var Cs=function(As,Is){return As.node(Is).width||0};ns.width=Cs})(bk);var __spreadArray$2=commonjsGlobal&&commonjsGlobal.__spreadArray||function(ns,ts,rs){if(rs||arguments.length===2)for(var as=0,os=ts.length,is;as<os;as++)(is||!(as in ts))&&(is||(is=Array.prototype.slice.call(ts,0,as)),is[as]=ts[as]);return ns.concat(is||Array.prototype.slice.call(ts))};Object.defineProperty(position$1,"__esModule",{value:!0});var util_1$c=util$1,bk_1=bk,positionY=function(ns){var ts=(0,util_1$c.buildLayerMatrix)(ns),rs=ns.graph().ranksep,as=0;ts==null||ts.forEach(function(os){var is=os.map(function(ls){return ns.node(ls).height}),us=Math.max.apply(Math,__spreadArray$2(__spreadArray$2([],is,!1),[0],!1));os==null||os.forEach(function(ls){ns.node(ls).y=as+us/2}),as+=us+rs})},positionX=function(ns){var ts=(0,util_1$c.buildLayerMatrix)(ns),rs=Object.assign((0,bk_1.findType1Conflicts)(ns,ts),(0,bk_1.findType2Conflicts)(ns,ts)),as={},os=[];["u","d"].forEach(function(us){os=us==="u"?ts:Object.values(ts).reverse(),["l","r"].forEach(function(ls){ls==="r"&&(os=os.map(function(gs){return Object.values(gs).reverse()}));var fs=(us==="u"?ns.predecessors:ns.successors).bind(ns),hs=(0,bk_1.verticalAlignment)(ns,os,rs,fs),vs=(0,bk_1.horizontalCompaction)(ns,os,hs.root,hs.align,ls==="r");ls==="r"&&Object.keys(vs).forEach(function(gs){return vs[gs]=-vs[gs]}),as[us+ls]=vs})});var is=(0,bk_1.findSmallestWidthAlignment)(ns,as);return is&&(0,bk_1.alignCoordinates)(as,is),(0,bk_1.balance)(as,ns.graph().align)},position=function(ns){var ts,rs=(0,util_1$c.asNonCompoundGraph)(ns);positionY(rs);var as=positionX(rs);(ts=Object.keys(as))===null||ts===void 0||ts.forEach(function(os){rs.node(os).x=as[os]})};position$1.default=position;var initDataOrder$1={};Object.defineProperty(initDataOrder$1,"__esModule",{value:!0});var initDataOrder=function(ns,ts){for(var rs=ns.nodes().filter(function(ls){var fs;return!(!((fs=ns.children(ls))===null||fs===void 0)&&fs.length)}),as=rs.map(function(ls){return ns.node(ls).rank}),os=Math.max.apply(Math,as),is=[],us=0;us<os+1;us++)is[us]=[];ts==null||ts.forEach(function(ls){var fs=ns.node(ls);!fs||fs!=null&&fs.dummy||isNaN(fs.rank)||(fs.fixorder=is[fs.rank].length,is[fs.rank].push(ls))})};initDataOrder$1.default=initDataOrder;var __assign$f=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$f=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$f.apply(this,arguments)},__importDefault$7=commonjsGlobal&&commonjsGlobal.__importDefault||function(ns){return ns&&ns.__esModule?ns:{default:ns}};Object.defineProperty(layout$6,"__esModule",{value:!0});var acyclic_1=__importDefault$7(acyclic),normalize_1=__importDefault$7(normalize),rank_1=__importDefault$7(rank$1),util_1$b=util$1,parent_dummy_chains_1=__importDefault$7(parentDummyChains$1),nesting_graph_1=__importDefault$7(nestingGraph),add_border_segments_1=__importDefault$7(addBorderSegments$1),coordinate_system_1=__importDefault$7(coordinateSystem),order_1=__importDefault$7(order$1),position_1=__importDefault$7(position$1),init_data_order_1=__importDefault$7(initDataOrder$1),graph_1$1=graph,layout$5=function(ns,ts){var rs=ts&&ts.debugTiming?util_1$b.time:util_1$b.notime;rs("layout",function(){ts&&!ts.keepNodeOrder&&ts.prevGraph&&rs("  inheritOrder",function(){inheritOrder(ns,ts.prevGraph)});var as=rs("  buildLayoutGraph",function(){return buildLayoutGraph(ns)});ts&&ts.edgeLabelSpace===!1||rs("  makeSpaceForEdgeLabels",function(){makeSpaceForEdgeLabels(as)});try{rs("  runLayout",function(){runLayout(as,rs,ts)})}catch(os){if(os.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,os);return}throw os}rs("  updateInputGraph",function(){updateInputGraph(ns,as)})})},runLayout=function(ns,ts,rs){ts("    removeSelfEdges",function(){removeSelfEdges(ns)}),ts("    acyclic",function(){acyclic_1.default.run(ns)}),ts("    nestingGraph.run",function(){nesting_graph_1.default.run(ns)}),ts("    rank",function(){(0,rank_1.default)((0,util_1$b.asNonCompoundGraph)(ns))}),ts("    injectEdgeLabelProxies",function(){injectEdgeLabelProxies(ns)}),ts("    removeEmptyRanks",function(){(0,util_1$b.removeEmptyRanks)(ns)}),ts("    nestingGraph.cleanup",function(){nesting_graph_1.default.cleanup(ns)}),ts("    normalizeRanks",function(){(0,util_1$b.normalizeRanks)(ns)}),ts("    assignRankMinMax",function(){assignRankMinMax(ns)}),ts("    removeEdgeLabelProxies",function(){removeEdgeLabelProxies(ns)}),ts("    normalize.run",function(){normalize_1.default.run(ns)}),ts("    parentDummyChains",function(){(0,parent_dummy_chains_1.default)(ns)}),ts("    addBorderSegments",function(){(0,add_border_segments_1.default)(ns)}),rs&&rs.keepNodeOrder&&ts("    initDataOrder",function(){(0,init_data_order_1.default)(ns,rs.nodeOrder)}),ts("    order",function(){(0,order_1.default)(ns,rs==null?void 0:rs.keepNodeOrder)}),ts("    insertSelfEdges",function(){insertSelfEdges(ns)}),ts("    adjustCoordinateSystem",function(){coordinate_system_1.default.adjust(ns)}),ts("    position",function(){(0,position_1.default)(ns)}),ts("    positionSelfEdges",function(){positionSelfEdges(ns)}),ts("    removeBorderNodes",function(){removeBorderNodes(ns)}),ts("    normalize.undo",function(){normalize_1.default.undo(ns)}),ts("    fixupEdgeLabelCoords",function(){fixupEdgeLabelCoords(ns)}),ts("    undoCoordinateSystem",function(){coordinate_system_1.default.undo(ns)}),ts("    translateGraph",function(){translateGraph(ns)}),ts("    assignNodeIntersects",function(){assignNodeIntersects(ns)}),ts("    reversePoints",function(){reversePointsForReversedEdges(ns)}),ts("    acyclic.undo",function(){acyclic_1.default.undo(ns)})},inheritOrder=function(ns,ts){ns.nodes().forEach(function(rs){var as=ns.node(rs),os=ts.node(rs);os!==void 0?(as.fixorder=os._order,delete os._order):delete as.fixorder})},updateInputGraph=function(ns,ts){ns.nodes().forEach(function(rs){var as,os=ns.node(rs);if(os){var is=ts.node(rs);os.x=is.x,os.y=is.y,os._order=is.order,os._rank=is.rank,!((as=ts.children(rs))===null||as===void 0)&&as.length&&(os.width=is.width,os.height=is.height)}}),ns.edges().forEach(function(rs){var as=ns.edge(rs),os=ts.edge(rs);as.points=os?os.points:[],os&&os.hasOwnProperty("x")&&(as.x=os.x,as.y=os.y)}),ns.graph().width=ts.graph().width,ns.graph().height=ts.graph().height},graphNumAttrs=["nodesep","edgesep","ranksep","marginx","marginy"],graphDefaults={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},graphAttrs=["acyclicer","ranker","rankdir","align"],nodeNumAttrs=["width","height","layer","fixorder"],nodeDefaults={width:0,height:0},edgeNumAttrs=["minlen","weight","width","height","labeloffset"],edgeDefaults={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},edgeAttrs=["labelpos"],buildLayoutGraph=function(ns){var ts=new graph_1$1.Graph({multigraph:!0,compound:!0}),rs=canonicalize(ns.graph()),as={};return graphAttrs==null||graphAttrs.forEach(function(os){rs[os]!==void 0&&(as[os]=rs[os])}),ts.setGraph(Object.assign({},graphDefaults,selectNumberAttrs(rs,graphNumAttrs),as)),ns.nodes().forEach(function(os){var is=canonicalize(ns.node(os)),us=__assign$f(__assign$f({},nodeDefaults),is),ls=selectNumberAttrs(us,nodeNumAttrs);ts.setNode(os,ls),ts.setParent(os,ns.parent(os))}),ns.edges().forEach(function(os){var is=canonicalize(ns.edge(os)),us={};edgeAttrs==null||edgeAttrs.forEach(function(ls){is[ls]!==void 0&&(us[ls]=is[ls])}),ts.setEdgeObj(os,Object.assign({},edgeDefaults,selectNumberAttrs(is,edgeNumAttrs),us))}),ts},makeSpaceForEdgeLabels=function(ns){var ts=ns.graph();ts.ranksep||(ts.ranksep=0),ts.ranksep/=2,ns.nodes().forEach(function(rs){var as=ns.node(rs);isNaN(as.layer)||as.layer||(as.layer=0)}),ns.edges().forEach(function(rs){var as,os=ns.edge(rs);os.minlen*=2,((as=os.labelpos)===null||as===void 0?void 0:as.toLowerCase())!=="c"&&(ts.rankdir==="TB"||ts.rankdir==="BT"?os.width+=os.labeloffset:os.height+=os.labeloffset)})},injectEdgeLabelProxies=function(ns){ns.edges().forEach(function(ts){var rs=ns.edge(ts);if(rs.width&&rs.height){var as=ns.node(ts.v),os=ns.node(ts.w),is={e:ts,rank:(os.rank-as.rank)/2+as.rank};(0,util_1$b.addDummyNode)(ns,"edge-proxy",is,"_ep")}})},assignRankMinMax=function(ns){var ts=0;ns.nodes().forEach(function(rs){var as,os,is=ns.node(rs);is.borderTop&&(is.minRank=(as=ns.node(is.borderTop))===null||as===void 0?void 0:as.rank,is.maxRank=(os=ns.node(is.borderBottom))===null||os===void 0?void 0:os.rank,ts=Math.max(ts,is.maxRank||-1/0))}),ns.graph().maxRank=ts},removeEdgeLabelProxies=function(ns){ns.nodes().forEach(function(ts){var rs=ns.node(ts);rs.dummy==="edge-proxy"&&(ns.edge(rs.e).labelRank=rs.rank,ns.removeNode(ts))})},translateGraph=function(ns){var ts,rs=0,as,os=0,is=ns.graph(),us=is.marginx||0,ls=is.marginy||0,fs=function(hs){if(hs){var vs=hs.x,gs=hs.y,ys=hs.width,xs=hs.height;!isNaN(vs)&&!isNaN(ys)&&(ts===void 0&&(ts=vs-ys/2),ts=Math.min(ts,vs-ys/2),rs=Math.max(rs,vs+ys/2)),!isNaN(gs)&&!isNaN(xs)&&(as===void 0&&(as=gs-xs/2),as=Math.min(as,gs-xs/2),os=Math.max(os,gs+xs/2))}};ns.nodes().forEach(function(hs){fs(ns.node(hs))}),ns.edges().forEach(function(hs){var vs=ns.edge(hs);vs!=null&&vs.hasOwnProperty("x")&&fs(vs)}),ts-=us,as-=ls,ns.nodes().forEach(function(hs){var vs=ns.node(hs);vs&&(vs.x-=ts,vs.y-=as)}),ns.edges().forEach(function(hs){var vs,gs=ns.edge(hs);(vs=gs.points)===null||vs===void 0||vs.forEach(function(ys){ys.x-=ts,ys.y-=as}),gs.hasOwnProperty("x")&&(gs.x-=ts),gs.hasOwnProperty("y")&&(gs.y-=as)}),is.width=rs-ts+us,is.height=os-as+ls},assignNodeIntersects=function(ns){ns.edges().forEach(function(ts){var rs=ns.edge(ts),as=ns.node(ts.v),os=ns.node(ts.w),is,us;rs.points?(is=rs.points[0],us=rs.points[rs.points.length-1]):(rs.points=[],is=os,us=as),rs.points.unshift((0,util_1$b.intersectRect)(as,is)),rs.points.push((0,util_1$b.intersectRect)(os,us))})},fixupEdgeLabelCoords=function(ns){ns.edges().forEach(function(ts){var rs=ns.edge(ts);if(rs!=null&&rs.hasOwnProperty("x"))switch((rs.labelpos==="l"||rs.labelpos==="r")&&(rs.width-=rs.labeloffset),rs.labelpos){case"l":rs.x-=rs.width/2+rs.labeloffset;break;case"r":rs.x+=rs.width/2+rs.labeloffset;break}})},reversePointsForReversedEdges=function(ns){ns.edges().forEach(function(ts){var rs,as=ns.edge(ts);as.reversed&&((rs=as.points)===null||rs===void 0||rs.reverse())})},removeBorderNodes=function(ns){ns.nodes().forEach(function(ts){var rs,as,os;if(!((rs=ns.children(ts))===null||rs===void 0)&&rs.length){var is=ns.node(ts),us=ns.node(is.borderTop),ls=ns.node(is.borderBottom),fs=ns.node(is.borderLeft[((as=is.borderLeft)===null||as===void 0?void 0:as.length)-1]),hs=ns.node(is.borderRight[((os=is.borderRight)===null||os===void 0?void 0:os.length)-1]);is.width=Math.abs((hs==null?void 0:hs.x)-(fs==null?void 0:fs.x))||10,is.height=Math.abs((ls==null?void 0:ls.y)-(us==null?void 0:us.y))||10,is.x=((fs==null?void 0:fs.x)||0)+is.width/2,is.y=((us==null?void 0:us.y)||0)+is.height/2}}),ns.nodes().forEach(function(ts){var rs;((rs=ns.node(ts))===null||rs===void 0?void 0:rs.dummy)==="border"&&ns.removeNode(ts)})},removeSelfEdges=function(ns){ns.edges().forEach(function(ts){if(ts.v===ts.w){var rs=ns.node(ts.v);rs.selfEdges||(rs.selfEdges=[]),rs.selfEdges.push({e:ts,label:ns.edge(ts)}),ns.removeEdgeObj(ts)}})},insertSelfEdges=function(ns){var ts=(0,util_1$b.buildLayerMatrix)(ns);ts==null||ts.forEach(function(rs){var as=0;rs==null||rs.forEach(function(os,is){var us,ls=ns.node(os);ls.order=is+as,(us=ls.selfEdges)===null||us===void 0||us.forEach(function(fs){(0,util_1$b.addDummyNode)(ns,"selfedge",{width:fs.label.width,height:fs.label.height,rank:ls.rank,order:is+ ++as,e:fs.e,label:fs.label},"_se")}),delete ls.selfEdges})})},positionSelfEdges=function(ns){ns.nodes().forEach(function(ts){var rs=ns.node(ts);if(rs.dummy==="selfedge"){var as=ns.node(rs.e.v),os=as.x+as.width/2,is=as.y,us=rs.x-os,ls=as.height/2;ns.setEdgeObj(rs.e,rs.label),ns.removeNode(ts),rs.label.points=[{x:os+2*us/3,y:is-ls},{x:os+5*us/6,y:is-ls},{y:is,x:os+us},{x:os+5*us/6,y:is+ls},{x:os+2*us/3,y:is+ls}],rs.label.x=rs.x,rs.label.y=rs.y}})},selectNumberAttrs=function(ns,ts){var rs={};return ts==null||ts.forEach(function(as){ns[as]!==void 0&&(rs[as]=+ns[as])}),rs},canonicalize=function(ns){ns===void 0&&(ns={});var ts={};return Object.keys(ns).forEach(function(rs){ts[rs.toLowerCase()]=ns[rs]}),ts};layout$6.default=layout$5;var __importDefault$6=commonjsGlobal&&commonjsGlobal.__importDefault||function(ns){return ns&&ns.__esModule?ns:{default:ns}};Object.defineProperty(dagre,"__esModule",{value:!0});var layout_1=__importDefault$6(layout$6),util_1$a=util$1;dagre.default={layout:layout_1.default,util:{time:util_1$a.time,notime:util_1$a.notime}};var __extends$n=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(ns){return ns&&ns.__esModule?ns:{default:ns}};Object.defineProperty(dagre$1,"__esModule",{value:!0});dagre$1.DagreLayout=void 0;var index_1=__importDefault$5(dagre),util_1$9=requireUtil(),base_1$a=base$1,graph_1=graph,DagreLayout=function(ns){__extends$n(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.rankdir="TB",as.nodesep=50,as.ranksep=50,as.controlPoints=!1,as.sortByCombo=!1,as.edgeLabelSpace=!0,as.radial=!1,as.nodes=[],as.edges=[],as.onLayoutEnd=function(){},as.layoutNode=function(os){var is=as,us=is.nodes,ls=us.find(function(hs){return hs.id===os});if(ls){var fs=ls.layout!==!1;return fs}return!0},as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},ts.prototype.execute=function(){var rs=this,as,os,is,us,ls=this,fs=ls.nodes,hs=ls.nodeSize,vs=ls.rankdir,gs=ls.combos,ys=ls.begin,xs=ls.radial,ms=ls.comboEdges,Ss=ms===void 0?[]:ms,Ms=ls.vedges,$s=Ms===void 0?[]:Ms;if(fs){var bs=ls.edges||[],Cs=new graph_1.Graph({multigraph:!0,compound:!0});ls.nodeMap={};var As={};fs.forEach(function(Ul){ls.nodeMap[Ul.id]=Ul,Ul.comboId&&(As[Ul.comboId]=As[Ul.comboId]||[],As[Ul.comboId].push(Ul.id))});var Is=[],ks={};!((as=ls.nodeOrder)===null||as===void 0)&&as.length?(ls.nodeOrder.forEach(function(Ul){ks[Ul]=!0,Is.push(ls.nodeMap[Ul])}),fs.forEach(function(Ul){ks[Ul.id]||Is.push(Ul)})):Is=fs;var Ps;hs?(0,util_1$9.isArray)(hs)?Ps=function(){return hs}:Ps=function(){return[hs,hs]}:Ps=function(Ul){return Ul.size?(0,util_1$9.isArray)(Ul.size)?Ul.size:(0,util_1$9.isObject)(Ul.size)?[Ul.size.width||40,Ul.size.height||40]:[Ul.size,Ul.size]:[40,40]};var Ds=(0,util_1$9.getFunc)(ls.ranksep,50,ls.ranksepFunc),Fs=(0,util_1$9.getFunc)(ls.nodesep,50,ls.nodesepFunc),Rs=Fs,js=Ds;(vs==="LR"||vs==="RL")&&(Rs=Ds,js=Fs),Cs.setDefaultEdgeLabel(function(){return{}}),Cs.setGraph(ls);var zs={};this.sortByCombo&&gs&&gs.forEach(function(Ul){if(zs[Ul.id]=Ul,Ul.collapsed){var Xs=Ps(Ul),d0=js(Ul),M0=Rs(Ul),i0=Xs[0]+2*M0,k0=Xs[1]+2*d0;Cs.setNode(Ul.id,{width:i0,height:k0})}Ul.parentId&&(zs[Ul.parentId]||Cs.setNode(Ul.parentId,{}),Cs.setParent(Ul.id,Ul.parentId))}),Is.filter(function(Ul){return Ul.layout!==!1}).forEach(function(Ul){var Xs=Ps(Ul),d0=js(Ul),M0=Rs(Ul),i0=Xs[0]+2*M0,k0=Xs[1]+2*d0,P0=Ul.layer;(0,util_1$9.isNumber)(P0)?Cs.setNode(Ul.id,{width:i0,height:k0,layer:P0}):Cs.setNode(Ul.id,{width:i0,height:k0}),rs.sortByCombo&&Ul.comboId&&(zs[Ul.comboId]||(zs[Ul.comboId]={id:Ul.comboId},Cs.setNode(Ul.comboId,{})),Cs.setParent(Ul.id,Ul.comboId))}),bs.forEach(function(Ul){var Xs=(0,util_1$9.getEdgeTerminal)(Ul,"source"),d0=(0,util_1$9.getEdgeTerminal)(Ul,"target");rs.layoutNode(Xs)&&rs.layoutNode(d0)&&Cs.setEdge(Xs,d0,{weight:Ul.weight||1})}),(os=Ss==null?void 0:Ss.concat($s||[]))===null||os===void 0||os.forEach(function(Ul){var Xs,d0,M0=Ul.source,i0=Ul.target,k0=!((Xs=zs[M0])===null||Xs===void 0)&&Xs.collapsed?[M0]:As[M0]||[M0],P0=!((d0=zs[i0])===null||d0===void 0)&&d0.collapsed?[i0]:As[i0]||[i0];k0.forEach(function(B0){P0.forEach(function(G0){Cs.setEdge(B0,G0,{weight:Ul.weight||1})})})});var Us=void 0;!((is=ls.preset)===null||is===void 0)&&is.nodes&&(Us=new graph_1.Graph({multigraph:!0,compound:!0}),ls.preset.nodes.forEach(function(Ul){Us==null||Us.setNode(Ul.id,Ul)})),index_1.default.layout(Cs,{prevGraph:Us,edgeLabelSpace:ls.edgeLabelSpace,keepNodeOrder:!!ls.nodeOrder,nodeOrder:ls.nodeOrder});var Ys=[0,0];if(ys){var Ks=1/0,qs=1/0;Cs.nodes().forEach(function(Ul){var Xs=Cs.node(Ul);Ks>Xs.x&&(Ks=Xs.x),qs>Xs.y&&(qs=Xs.y)}),Cs.edges().forEach(function(Ul){var Xs,d0=Cs.edge(Ul);(Xs=d0.points)===null||Xs===void 0||Xs.forEach(function(M0){Ks>M0.x&&(Ks=M0.x),qs>M0.y&&(qs=M0.y)})}),Ys[0]=ys[0]-Ks,Ys[1]=ys[1]-qs}var _l=vs==="LR"||vs==="RL";if(xs){var Js=this,Vs=Js.focusNode,Zs=Js.ranksep,Sl=Js.getRadialPos,Il=(0,util_1$9.isString)(Vs)?Vs:Vs==null?void 0:Vs.id,Nl=Il?(us=Cs.node(Il))===null||us===void 0?void 0:us._rank:0,Tl=[],_c=_l?"y":"x",l0=_l?"height":"width",g0=1/0,R0=-1/0;Cs.nodes().forEach(function(Ul){var Xs=Cs.node(Ul);if(ls.nodeMap[Ul]){var d0=Fs(ls.nodeMap[Ul]);if(Nl===0)Tl[Xs._rank]||(Tl[Xs._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Tl[Xs._rank].nodes.push(Ul),Tl[Xs._rank].totalWidth+=d0*2+Xs[l0],Tl[Xs._rank].maxSize<Math.max(Xs.width,Xs.height)&&(Tl[Xs._rank].maxSize=Math.max(Xs.width,Xs.height));else{var M0=Xs._rank-Nl;if(M0===0)Tl[M0]||(Tl[M0]={nodes:[],totalWidth:0,maxSize:-1/0}),Tl[M0].nodes.push(Ul),Tl[M0].totalWidth+=d0*2+Xs[l0],Tl[M0].maxSize<Math.max(Xs.width,Xs.height)&&(Tl[M0].maxSize=Math.max(Xs.width,Xs.height));else{var i0=Math.abs(M0);Tl[i0]||(Tl[i0]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Tl[i0].totalWidth+=d0*2+Xs[l0],Tl[i0].maxSize<Math.max(Xs.width,Xs.height)&&(Tl[i0].maxSize=Math.max(Xs.width,Xs.height)),M0<0?Tl[i0].left.push(Ul):Tl[i0].right.push(Ul)}}var k0=Xs[_c]-Xs[l0]/2-d0,P0=Xs[_c]+Xs[l0]/2+d0;k0<g0&&(g0=k0),P0>R0&&(R0=P0)}});var V0=Zs||50,U0={},tv=(R0-g0)/.9,Os=[(g0+R0-tv)*.5,(g0+R0+tv)*.5],ov=function(Ul,Xs,d0,M0){d0===void 0&&(d0=-1/0),M0===void 0&&(M0=[0,1]);var i0=d0;return Ul.forEach(function(k0){var P0=Cs.node(k0);U0[k0]=Xs;var B0=Sl(P0[_c],Os,tv,Xs,M0),G0=B0.x,rv=B0.y;if(ls.nodeMap[k0]){ls.nodeMap[k0].x=G0+Ys[0],ls.nodeMap[k0].y=rv+Ys[1],ls.nodeMap[k0]._order=P0._order;var xv=Ds(ls.nodeMap[k0]);i0<xv&&(i0=xv)}}),i0},$v=!0,Lv=0;Tl.forEach(function(Ul){var Xs,d0,M0,i0,k0,P0,B0;if(!(!(!((Xs=Ul==null?void 0:Ul.nodes)===null||Xs===void 0)&&Xs.length)&&!(!((d0=Ul==null?void 0:Ul.left)===null||d0===void 0)&&d0.length)&&!(!((M0=Ul==null?void 0:Ul.right)===null||M0===void 0)&&M0.length))){if($v&&Ul.nodes.length===1){var G0=Ul.nodes[0];if(!ls.nodeMap[G0])return;ls.nodeMap[G0].x=Ys[0],ls.nodeMap[G0].y=Ys[1],U0[Ul.nodes[0]]=0,V0=Ds(ls.nodeMap[G0]),$v=!1;return}V0=Math.max(V0,Ul.totalWidth/(2*Math.PI));var rv=-1/0;if(Nl===0||!((i0=Ul.nodes)===null||i0===void 0)&&i0.length)rv=ov(Ul.nodes,V0,rv,[0,1]);else{var xv=((k0=Ul.left)===null||k0===void 0?void 0:k0.length)/(((P0=Ul.left)===null||P0===void 0?void 0:P0.length)+((B0=Ul.right)===null||B0===void 0?void 0:B0.length));rv=ov(Ul.left,V0,rv,[0,xv]),rv=ov(Ul.right,V0,rv,[xv+.05,1])}V0+=rv,$v=!1,Lv-Ul.maxSize}}),Cs.edges().forEach(function(Ul){var Xs,d0,M0,i0=Cs.edge(Ul),k0=bs.findIndex(function(Kv){var Xv=(0,util_1$9.getEdgeTerminal)(Kv,"source"),ap=(0,util_1$9.getEdgeTerminal)(Kv,"target");return Xv===Ul.v&&ap===Ul.w});if(!(k0<=-1)&&ls.edgeLabelSpace&&ls.controlPoints&&bs[k0].type!=="loop"){var P0=_c==="x"?"y":"x",B0=(Xs=i0==null?void 0:i0.points)===null||Xs===void 0?void 0:Xs.slice(1,i0.points.length-1),G0=[],rv=(d0=Cs.node(Ul.v))===null||d0===void 0?void 0:d0[P0],xv=rv-((M0=Cs.node(Ul.w))===null||M0===void 0?void 0:M0[P0]),qv=U0[Ul.v],Ev=qv-U0[Ul.w];B0==null||B0.forEach(function(Kv){var Xv=(Kv[P0]-rv)/xv*Ev+qv,ap=Sl(Kv[_c],Os,tv,Xv);G0.push({x:ap.x+Ys[0],y:ap.y+Ys[1]})}),bs[k0].controlPoints=G0}})}else{var Jv=new Set,Yv=vs==="BT"||vs==="RL",Pv=Yv?function(Ul,Xs){return Xs-Ul}:function(Ul,Xs){return Ul-Xs};Cs.nodes().forEach(function(Ul){var Xs=Cs.node(Ul);if(Xs){var d0=rs.nodeMap[Ul];d0||(d0=gs==null?void 0:gs.find(function(M0){return M0.id===Ul})),d0&&(d0.x=Xs.x+Ys[0],d0.y=Xs.y+Ys[1],d0._order=Xs._order,Jv.add(_l?d0.x:d0.y))}});var jv=Array.from(Jv).sort(Pv),wp=_l?function(Ul,Xs){return Ul.x!==Xs.x}:function(Ul,Xs){return Ul.y!==Xs.y},j0=_l?function(Ul,Xs,d0){var M0=Math.max(Xs.y,d0.y),i0=Math.min(Xs.y,d0.y);return Ul.filter(function(k0){return k0.y<=M0&&k0.y>=i0})}:function(Ul,Xs,d0){var M0=Math.max(Xs.x,d0.x),i0=Math.min(Xs.x,d0.x);return Ul.filter(function(k0){return k0.x<=M0&&k0.x>=i0})};Cs.edges().forEach(function(Ul){var Xs,d0=Cs.edge(Ul),M0=bs.findIndex(function(P0){var B0=(0,util_1$9.getEdgeTerminal)(P0,"source"),G0=(0,util_1$9.getEdgeTerminal)(P0,"target");return B0===Ul.v&&G0===Ul.w});if(!(M0<=-1)&&ls.edgeLabelSpace&&ls.controlPoints&&bs[M0].type!=="loop"){(Xs=d0==null?void 0:d0.points)===null||Xs===void 0||Xs.forEach(function(P0){P0.x+=Ys[0],P0.y+=Ys[1]});var i0=ls.nodeMap[Ul.v],k0=ls.nodeMap[Ul.w];bs[M0].controlPoints=getControlPoints$1(d0==null?void 0:d0.points,i0,k0,jv,_l,wp,j0)}})}return ls.onLayoutEnd&&ls.onLayoutEnd(),{nodes:fs,edges:bs}}},ts.prototype.getRadialPos=function(rs,as,os,is,us){us===void 0&&(us=[0,1]);var ls=(rs-as[0])/os;ls=ls*(us[1]-us[0])+us[0];var fs=ls*2*Math.PI;return{x:Math.cos(fs)*is,y:Math.sin(fs)*is}},ts.prototype.getType=function(){return"dagre"},ts}(base_1$a.Base);dagre$1.DagreLayout=DagreLayout;var getControlPoints$1=function(ns,ts,rs,as,os,is,us){var ls=(ns==null?void 0:ns.slice(1,ns.length-1))||[];if(ts&&rs){var fs=ts.x,hs=ts.y,vs=rs.x,gs=rs.y;if(os&&(fs=ts.y,hs=ts.x,vs=rs.y,gs=rs.x),gs!==hs&&fs!==vs){var ys=as.indexOf(hs),xs=as[ys+1];if(xs){var ms=ls[0],Ss=os?{x:(hs+xs)/2,y:(ms==null?void 0:ms.y)||vs}:{x:(ms==null?void 0:ms.x)||vs,y:(hs+xs)/2};(!ms||is(ms,Ss))&&ls.unshift(Ss)}var Ms=as.indexOf(gs),$s=Math.abs(Ms-ys);if($s===1)ls=us(ls,ts,rs),ls.length||ls.push(os?{x:(hs+gs)/2,y:fs}:{x:fs,y:(hs+gs)/2});else if($s>1){var bs=as[Ms-1];if(bs){var Cs=ls[ls.length-1],As=os?{x:(gs+bs)/2,y:(Cs==null?void 0:Cs.y)||vs}:{x:(Cs==null?void 0:Cs.x)||fs,y:(gs+bs)/2};(!Cs||is(Cs,As))&&ls.push(As)}}}}return ls},dagreCompound={};const e={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function n$1(ns={},ts=e){var rs,as,os,is;const us=JSON.parse(JSON.stringify(ts)),ls=((rs=ns==null?void 0:ns.graph)===null||rs===void 0?void 0:rs.meta)||{},fs=((as=ns==null?void 0:ns.subScene)===null||as===void 0?void 0:as.meta)||{},hs=((os=ns==null?void 0:ns.nodeSize)===null||os===void 0?void 0:os.meta)||{},vs=((is=ns==null?void 0:ns.nodeSize)===null||is===void 0?void 0:is.node)||{},gs=us.nodeSize.bridge;return{graph:{meta:Object.assign(us.graph.meta,ls)},subScene:{meta:Object.assign(us.subScene.meta,fs)},nodeSize:{meta:Object.assign(us.nodeSize.meta,hs),node:Object.assign(us.nodeSize.node,vs),bridge:gs}}}function t$1(ns){return`◬${ns}◬`}const r$1=t$1("ROOT"),o=t$1("BRIDGE_GRAPH");var i,a,u$1,c;(function(ns){ns[ns.META=0]="META",ns[ns.NODE=1]="NODE",ns[ns.BRIDGE=2]="BRIDGE"})(i||(i={})),function(ns){ns[ns.INCLUDE=0]="INCLUDE",ns[ns.EXCLUDE=1]="EXCLUDE",ns[ns.UNSPECIFIED=2]="UNSPECIFIED"}(a||(a={})),function(ns){ns[ns.META=0]="META",ns[ns.CORE=1]="CORE",ns[ns.BRIDGE=2]="BRIDGE"}(u$1||(u$1={})),function(ns){ns[ns.META=0]="META",ns[ns.OP=1]="OP",ns[ns.SERIES=2]="SERIES"}(c||(c={}));var s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function d(ns,ts){return ns(ts={exports:{}},ts.exports),ts.exports}var f=function(){this.__data__=[],this.size=0},h=function(ns,ts){return ns===ts||ns!=ns&&ts!=ts},l$1=function(ns,ts){for(var rs=ns.length;rs--;)if(h(ns[rs][0],ts))return rs;return-1},v$1=Array.prototype.splice,p$1=function(ns){var ts=this.__data__,rs=l$1(ts,ns);return!(rs<0)&&(rs==ts.length-1?ts.pop():v$1.call(ts,rs,1),--this.size,!0)},g=function(ns){var ts=this.__data__,rs=l$1(ts,ns);return rs<0?void 0:ts[rs][1]},y$1=function(ns){return l$1(this.__data__,ns)>-1},b=function(ns,ts){var rs=this.__data__,as=l$1(rs,ns);return as<0?(++this.size,rs.push([ns,ts])):rs[as][1]=ts,this};function m(ns){var ts=-1,rs=ns==null?0:ns.length;for(this.clear();++ts<rs;){var as=ns[ts];this.set(as[0],as[1])}}m.prototype.clear=f,m.prototype.delete=p$1,m.prototype.get=g,m.prototype.has=y$1,m.prototype.set=b;var w$1=m,E$1=function(){this.__data__=new w$1,this.size=0},_=function(ns){var ts=this.__data__,rs=ts.delete(ns);return this.size=ts.size,rs},j=function(ns){return this.__data__.get(ns)},x$1=function(ns){return this.__data__.has(ns)},N$1=typeof s=="object"&&s&&s.Object===Object&&s,O$1=typeof self=="object"&&self&&self.Object===Object&&self,k=N$1||O$1||Function("return this")(),I$1=k.Symbol,S$1=Object.prototype,M$1=S$1.hasOwnProperty,C$1=S$1.toString,G$1=I$1?I$1.toStringTag:void 0,B$1=function(ns){var ts=M$1.call(ns,G$1),rs=ns[G$1];try{ns[G$1]=void 0;var as=!0}catch{}var os=C$1.call(ns);return as&&(ts?ns[G$1]=rs:delete ns[G$1]),os},A$1=Object.prototype.toString,L$1=function(ns){return A$1.call(ns)},R$2=I$1?I$1.toStringTag:void 0,T$2=function(ns){return ns==null?ns===void 0?"[object Undefined]":"[object Null]":R$2&&R$2 in Object(ns)?B$1(ns):L$1(ns)},D$1=function(ns){var ts=typeof ns;return ns!=null&&(ts=="object"||ts=="function")},P$1,z$1=function(ns){if(!D$1(ns))return!1;var ts=T$2(ns);return ts=="[object Function]"||ts=="[object GeneratorFunction]"||ts=="[object AsyncFunction]"||ts=="[object Proxy]"},F$1=k["__core-js_shared__"],U$1=(P$1=/[^.]+$/.exec(F$1&&F$1.keys&&F$1.keys.IE_PROTO||""))?"Symbol(src)_1."+P$1:"",V$1=function(ns){return!!U$1&&U$1 in ns},$=Function.prototype.toString,H$1=function(ns){if(ns!=null){try{return $.call(ns)}catch{}try{return ns+""}catch{}}return""},W$1=/^\[object .+?Constructor\]$/,q$1=Function.prototype,Y$1=Object.prototype,J$1=q$1.toString,X$1=Y$1.hasOwnProperty,K$1=RegExp("^"+J$1.call(X$1).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Q$1=function(ns){return!(!D$1(ns)||V$1(ns))&&(z$1(ns)?K$1:W$1).test(H$1(ns))},Z$1=function(ns,ts){return ns==null?void 0:ns[ts]},ee=function(ns,ts){var rs=Z$1(ns,ts);return Q$1(rs)?rs:void 0},ne=ee(k,"Map"),te=ee(Object,"create"),re=function(){this.__data__=te?te(null):{},this.size=0},oe=function(ns){var ts=this.has(ns)&&delete this.__data__[ns];return this.size-=ts?1:0,ts},ie=Object.prototype.hasOwnProperty,ae=function(ns){var ts=this.__data__;if(te){var rs=ts[ns];return rs==="__lodash_hash_undefined__"?void 0:rs}return ie.call(ts,ns)?ts[ns]:void 0},ue=Object.prototype.hasOwnProperty,ce=function(ns){var ts=this.__data__;return te?ts[ns]!==void 0:ue.call(ts,ns)},se=function(ns,ts){var rs=this.__data__;return this.size+=this.has(ns)?0:1,rs[ns]=te&&ts===void 0?"__lodash_hash_undefined__":ts,this};function de(ns){var ts=-1,rs=ns==null?0:ns.length;for(this.clear();++ts<rs;){var as=ns[ts];this.set(as[0],as[1])}}de.prototype.clear=re,de.prototype.delete=oe,de.prototype.get=ae,de.prototype.has=ce,de.prototype.set=se;var fe=de,he=function(){this.size=0,this.__data__={hash:new fe,map:new(ne||w$1),string:new fe}},le=function(ns){var ts=typeof ns;return ts=="string"||ts=="number"||ts=="symbol"||ts=="boolean"?ns!=="__proto__":ns===null},ve=function(ns,ts){var rs=ns.__data__;return le(ts)?rs[typeof ts=="string"?"string":"hash"]:rs.map},pe=function(ns){var ts=ve(this,ns).delete(ns);return this.size-=ts?1:0,ts},ge=function(ns){return ve(this,ns).get(ns)},ye=function(ns){return ve(this,ns).has(ns)},be=function(ns,ts){var rs=ve(this,ns),as=rs.size;return rs.set(ns,ts),this.size+=rs.size==as?0:1,this};function me(ns){var ts=-1,rs=ns==null?0:ns.length;for(this.clear();++ts<rs;){var as=ns[ts];this.set(as[0],as[1])}}me.prototype.clear=he,me.prototype.delete=pe,me.prototype.get=ge,me.prototype.has=ye,me.prototype.set=be;var we=me,Ee=function(ns,ts){var rs=this.__data__;if(rs instanceof w$1){var as=rs.__data__;if(!ne||as.length<199)return as.push([ns,ts]),this.size=++rs.size,this;rs=this.__data__=new we(as)}return rs.set(ns,ts),this.size=rs.size,this};function _e(ns){var ts=this.__data__=new w$1(ns);this.size=ts.size}_e.prototype.clear=E$1,_e.prototype.delete=_,_e.prototype.get=j,_e.prototype.has=x$1,_e.prototype.set=Ee;var je=_e,xe=function(ns,ts){for(var rs=-1,as=ns==null?0:ns.length;++rs<as&&ts(ns[rs],rs,ns)!==!1;);return ns},Ne=function(){try{var ns=ee(Object,"defineProperty");return ns({},"",{}),ns}catch{}}(),Oe=function(ns,ts,rs){ts=="__proto__"&&Ne?Ne(ns,ts,{configurable:!0,enumerable:!0,value:rs,writable:!0}):ns[ts]=rs},ke=Object.prototype.hasOwnProperty,Ie=function(ns,ts,rs){var as=ns[ts];ke.call(ns,ts)&&h(as,rs)&&(rs!==void 0||ts in ns)||Oe(ns,ts,rs)},Se=function(ns,ts,rs,as){var os=!rs;rs||(rs={});for(var is=-1,us=ts.length;++is<us;){var ls=ts[is],fs=as?as(rs[ls],ns[ls],ls,rs,ns):void 0;fs===void 0&&(fs=ns[ls]),os?Oe(rs,ls,fs):Ie(rs,ls,fs)}return rs},Me=function(ns,ts){for(var rs=-1,as=Array(ns);++rs<ns;)as[rs]=ts(rs);return as},Ce=function(ns){return ns!=null&&typeof ns=="object"},Ge=function(ns){return Ce(ns)&&T$2(ns)=="[object Arguments]"},Be=Object.prototype,Ae=Be.hasOwnProperty,Le=Be.propertyIsEnumerable,Re=Ge(function(){return arguments}())?Ge:function(ns){return Ce(ns)&&Ae.call(ns,"callee")&&!Le.call(ns,"callee")},Te=Array.isArray,De=function(){return!1},Pe=d(function(ns,ts){var rs=ts&&!ts.nodeType&&ts,as=rs&&ns&&!ns.nodeType&&ns,os=as&&as.exports===rs?k.Buffer:void 0,is=(os?os.isBuffer:void 0)||De;ns.exports=is}),ze=/^(?:0|[1-9]\d*)$/,Fe=function(ns,ts){var rs=typeof ns;return!!(ts=ts??9007199254740991)&&(rs=="number"||rs!="symbol"&&ze.test(ns))&&ns>-1&&ns%1==0&&ns<ts},Ue=function(ns){return typeof ns=="number"&&ns>-1&&ns%1==0&&ns<=9007199254740991},Ve={};Ve["[object Float32Array]"]=Ve["[object Float64Array]"]=Ve["[object Int8Array]"]=Ve["[object Int16Array]"]=Ve["[object Int32Array]"]=Ve["[object Uint8Array]"]=Ve["[object Uint8ClampedArray]"]=Ve["[object Uint16Array]"]=Ve["[object Uint32Array]"]=!0,Ve["[object Arguments]"]=Ve["[object Array]"]=Ve["[object ArrayBuffer]"]=Ve["[object Boolean]"]=Ve["[object DataView]"]=Ve["[object Date]"]=Ve["[object Error]"]=Ve["[object Function]"]=Ve["[object Map]"]=Ve["[object Number]"]=Ve["[object Object]"]=Ve["[object RegExp]"]=Ve["[object Set]"]=Ve["[object String]"]=Ve["[object WeakMap]"]=!1;var $e=function(ns){return Ce(ns)&&Ue(ns.length)&&!!Ve[T$2(ns)]},He=function(ns){return function(ts){return ns(ts)}},We=d(function(ns,ts){var rs=ts&&!ts.nodeType&&ts,as=rs&&ns&&!ns.nodeType&&ns,os=as&&as.exports===rs&&N$1.process,is=function(){try{var us=as&&as.require&&as.require("util").types;return us||os&&os.binding&&os.binding("util")}catch{}}();ns.exports=is}),qe=We&&We.isTypedArray,Ye=qe?He(qe):$e,Je=Object.prototype.hasOwnProperty,Xe=function(ns,ts){var rs=Te(ns),as=!rs&&Re(ns),os=!rs&&!as&&Pe(ns),is=!rs&&!as&&!os&&Ye(ns),us=rs||as||os||is,ls=us?Me(ns.length,String):[],fs=ls.length;for(var hs in ns)!ts&&!Je.call(ns,hs)||us&&(hs=="length"||os&&(hs=="offset"||hs=="parent")||is&&(hs=="buffer"||hs=="byteLength"||hs=="byteOffset")||Fe(hs,fs))||ls.push(hs);return ls},Ke=Object.prototype,Qe=function(ns){var ts=ns&&ns.constructor;return ns===(typeof ts=="function"&&ts.prototype||Ke)},Ze=function(ns,ts){return function(rs){return ns(ts(rs))}},en=Ze(Object.keys,Object),nn=Object.prototype.hasOwnProperty,tn=function(ns){if(!Qe(ns))return en(ns);var ts=[];for(var rs in Object(ns))nn.call(ns,rs)&&rs!="constructor"&&ts.push(rs);return ts},rn=function(ns){return ns!=null&&Ue(ns.length)&&!z$1(ns)},on=function(ns){return rn(ns)?Xe(ns):tn(ns)},an=function(ns,ts){return ns&&Se(ts,on(ts),ns)},un=function(ns){var ts=[];if(ns!=null)for(var rs in Object(ns))ts.push(rs);return ts},cn=Object.prototype.hasOwnProperty,sn=function(ns){if(!D$1(ns))return un(ns);var ts=Qe(ns),rs=[];for(var as in ns)(as!="constructor"||!ts&&cn.call(ns,as))&&rs.push(as);return rs},dn=function(ns){return rn(ns)?Xe(ns,!0):sn(ns)},fn=function(ns,ts){return ns&&Se(ts,dn(ts),ns)},hn=d(function(ns,ts){var rs=ts&&!ts.nodeType&&ts,as=rs&&ns&&!ns.nodeType&&ns,os=as&&as.exports===rs?k.Buffer:void 0,is=os?os.allocUnsafe:void 0;ns.exports=function(us,ls){if(ls)return us.slice();var fs=us.length,hs=is?is(fs):new us.constructor(fs);return us.copy(hs),hs}}),ln=function(ns,ts){var rs=-1,as=ns.length;for(ts||(ts=Array(as));++rs<as;)ts[rs]=ns[rs];return ts},vn=function(ns,ts){for(var rs=-1,as=ns==null?0:ns.length,os=0,is=[];++rs<as;){var us=ns[rs];ts(us,rs,ns)&&(is[os++]=us)}return is},pn=function(){return[]},gn=Object.prototype.propertyIsEnumerable,yn=Object.getOwnPropertySymbols,bn=yn?function(ns){return ns==null?[]:(ns=Object(ns),vn(yn(ns),function(ts){return gn.call(ns,ts)}))}:pn,mn=function(ns,ts){return Se(ns,bn(ns),ts)},wn=function(ns,ts){for(var rs=-1,as=ts.length,os=ns.length;++rs<as;)ns[os+rs]=ts[rs];return ns},En=Ze(Object.getPrototypeOf,Object),_n=Object.getOwnPropertySymbols?function(ns){for(var ts=[];ns;)wn(ts,bn(ns)),ns=En(ns);return ts}:pn,jn=function(ns,ts){return Se(ns,_n(ns),ts)},xn=function(ns,ts,rs){var as=ts(ns);return Te(ns)?as:wn(as,rs(ns))},Nn=function(ns){return xn(ns,on,bn)},On=function(ns){return xn(ns,dn,_n)},kn=ee(k,"DataView"),In=ee(k,"Promise"),Sn=ee(k,"Set"),Mn=ee(k,"WeakMap"),Cn=H$1(kn),Gn=H$1(ne),Bn=H$1(In),An=H$1(Sn),Ln=H$1(Mn),Rn=T$2;(kn&&Rn(new kn(new ArrayBuffer(1)))!="[object DataView]"||ne&&Rn(new ne)!="[object Map]"||In&&Rn(In.resolve())!="[object Promise]"||Sn&&Rn(new Sn)!="[object Set]"||Mn&&Rn(new Mn)!="[object WeakMap]")&&(Rn=function(ns){var ts=T$2(ns),rs=ts=="[object Object]"?ns.constructor:void 0,as=rs?H$1(rs):"";if(as)switch(as){case Cn:return"[object DataView]";case Gn:return"[object Map]";case Bn:return"[object Promise]";case An:return"[object Set]";case Ln:return"[object WeakMap]"}return ts});var Tn=Rn,Dn=Object.prototype.hasOwnProperty,Pn=function(ns){var ts=ns.length,rs=new ns.constructor(ts);return ts&&typeof ns[0]=="string"&&Dn.call(ns,"index")&&(rs.index=ns.index,rs.input=ns.input),rs},zn=k.Uint8Array,Fn=function(ns){var ts=new ns.constructor(ns.byteLength);return new zn(ts).set(new zn(ns)),ts},Un=function(ns,ts){var rs=ts?Fn(ns.buffer):ns.buffer;return new ns.constructor(rs,ns.byteOffset,ns.byteLength)},Vn=/\w*$/,$n=function(ns){var ts=new ns.constructor(ns.source,Vn.exec(ns));return ts.lastIndex=ns.lastIndex,ts},Hn=I$1?I$1.prototype:void 0,Wn=Hn?Hn.valueOf:void 0,qn=function(ns){return Wn?Object(Wn.call(ns)):{}},Yn=function(ns,ts){var rs=ts?Fn(ns.buffer):ns.buffer;return new ns.constructor(rs,ns.byteOffset,ns.length)},Jn=function(ns,ts,rs){var as=ns.constructor;switch(ts){case"[object ArrayBuffer]":return Fn(ns);case"[object Boolean]":case"[object Date]":return new as(+ns);case"[object DataView]":return Un(ns,rs);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Yn(ns,rs);case"[object Map]":return new as;case"[object Number]":case"[object String]":return new as(ns);case"[object RegExp]":return $n(ns);case"[object Set]":return new as;case"[object Symbol]":return qn(ns)}},Xn=Object.create,Kn=function(){function ns(){}return function(ts){if(!D$1(ts))return{};if(Xn)return Xn(ts);ns.prototype=ts;var rs=new ns;return ns.prototype=void 0,rs}}(),Qn=function(ns){return typeof ns.constructor!="function"||Qe(ns)?{}:Kn(En(ns))},Zn=function(ns){return Ce(ns)&&Tn(ns)=="[object Map]"},et=We&&We.isMap,nt=et?He(et):Zn,tt=function(ns){return Ce(ns)&&Tn(ns)=="[object Set]"},rt=We&&We.isSet,ot=rt?He(rt):tt,it={};it["[object Arguments]"]=it["[object Array]"]=it["[object ArrayBuffer]"]=it["[object DataView]"]=it["[object Boolean]"]=it["[object Date]"]=it["[object Float32Array]"]=it["[object Float64Array]"]=it["[object Int8Array]"]=it["[object Int16Array]"]=it["[object Int32Array]"]=it["[object Map]"]=it["[object Number]"]=it["[object Object]"]=it["[object RegExp]"]=it["[object Set]"]=it["[object String]"]=it["[object Symbol]"]=it["[object Uint8Array]"]=it["[object Uint8ClampedArray]"]=it["[object Uint16Array]"]=it["[object Uint32Array]"]=!0,it["[object Error]"]=it["[object Function]"]=it["[object WeakMap]"]=!1;var at=function ns(ts,rs,as,os,is,us){var ls,fs=1&rs,hs=2&rs,vs=4&rs;if(as&&(ls=is?as(ts,os,is,us):as(ts)),ls!==void 0)return ls;if(!D$1(ts))return ts;var gs=Te(ts);if(gs){if(ls=Pn(ts),!fs)return ln(ts,ls)}else{var ys=Tn(ts),xs=ys=="[object Function]"||ys=="[object GeneratorFunction]";if(Pe(ts))return hn(ts,fs);if(ys=="[object Object]"||ys=="[object Arguments]"||xs&&!is){if(ls=hs||xs?{}:Qn(ts),!fs)return hs?jn(ts,fn(ls,ts)):mn(ts,an(ls,ts))}else{if(!it[ys])return is?ts:{};ls=Jn(ts,ys,fs)}}us||(us=new je);var ms=us.get(ts);if(ms)return ms;us.set(ts,ls),ot(ts)?ts.forEach(function(Ms){ls.add(ns(Ms,rs,as,Ms,ts,us))}):nt(ts)&&ts.forEach(function(Ms,$s){ls.set($s,ns(Ms,rs,as,$s,ts,us))});var Ss=gs?void 0:(vs?hs?On:Nn:hs?dn:on)(ts);return xe(Ss||ts,function(Ms,$s){Ss&&(Ms=ts[$s=Ms]),Ie(ls,$s,ns(Ms,rs,as,$s,ts,us))}),ls},ut=function(ns){return at(ns,4)},ct=function(ns){return function(){return ns}},st=function(ns){return function(ts,rs,as){for(var os=-1,is=Object(ts),us=as(ts),ls=us.length;ls--;){var fs=us[ns?ls:++os];if(rs(is[fs],fs,is)===!1)break}return ts}}(),dt=function(ns,ts){return ns&&st(ns,ts,on)},ft=function(ns,ts){return function(rs,as){if(rs==null)return rs;if(!rn(rs))return ns(rs,as);for(var os=rs.length,is=ts?os:-1,us=Object(rs);(ts?is--:++is<os)&&as(us[is],is,us)!==!1;);return rs}}(dt),ht=function(ns){return ns},lt=function(ns){return typeof ns=="function"?ns:ht},vt=function(ns,ts){return(Te(ns)?xe:ft)(ns,lt(ts))},pt=vt,gt=function(ns,ts){var rs=[];return ft(ns,function(as,os,is){ts(as,os,is)&&rs.push(as)}),rs},yt=function(ns){return this.__data__.set(ns,"__lodash_hash_undefined__"),this},bt=function(ns){return this.__data__.has(ns)};function mt(ns){var ts=-1,rs=ns==null?0:ns.length;for(this.__data__=new we;++ts<rs;)this.add(ns[ts])}mt.prototype.add=mt.prototype.push=yt,mt.prototype.has=bt;var wt=mt,Et=function(ns,ts){for(var rs=-1,as=ns==null?0:ns.length;++rs<as;)if(ts(ns[rs],rs,ns))return!0;return!1},_t=function(ns,ts){return ns.has(ts)},jt=function(ns,ts,rs,as,os,is){var us=1&rs,ls=ns.length,fs=ts.length;if(ls!=fs&&!(us&&fs>ls))return!1;var hs=is.get(ns),vs=is.get(ts);if(hs&&vs)return hs==ts&&vs==ns;var gs=-1,ys=!0,xs=2&rs?new wt:void 0;for(is.set(ns,ts),is.set(ts,ns);++gs<ls;){var ms=ns[gs],Ss=ts[gs];if(as)var Ms=us?as(Ss,ms,gs,ts,ns,is):as(ms,Ss,gs,ns,ts,is);if(Ms!==void 0){if(Ms)continue;ys=!1;break}if(xs){if(!Et(ts,function($s,bs){if(!_t(xs,bs)&&(ms===$s||os(ms,$s,rs,as,is)))return xs.push(bs)})){ys=!1;break}}else if(ms!==Ss&&!os(ms,Ss,rs,as,is)){ys=!1;break}}return is.delete(ns),is.delete(ts),ys},xt=function(ns){var ts=-1,rs=Array(ns.size);return ns.forEach(function(as,os){rs[++ts]=[os,as]}),rs},Nt=function(ns){var ts=-1,rs=Array(ns.size);return ns.forEach(function(as){rs[++ts]=as}),rs},Ot=I$1?I$1.prototype:void 0,kt=Ot?Ot.valueOf:void 0,It=function(ns,ts,rs,as,os,is,us){switch(rs){case"[object DataView]":if(ns.byteLength!=ts.byteLength||ns.byteOffset!=ts.byteOffset)return!1;ns=ns.buffer,ts=ts.buffer;case"[object ArrayBuffer]":return!(ns.byteLength!=ts.byteLength||!is(new zn(ns),new zn(ts)));case"[object Boolean]":case"[object Date]":case"[object Number]":return h(+ns,+ts);case"[object Error]":return ns.name==ts.name&&ns.message==ts.message;case"[object RegExp]":case"[object String]":return ns==ts+"";case"[object Map]":var ls=xt;case"[object Set]":var fs=1&as;if(ls||(ls=Nt),ns.size!=ts.size&&!fs)return!1;var hs=us.get(ns);if(hs)return hs==ts;as|=2,us.set(ns,ts);var vs=jt(ls(ns),ls(ts),as,os,is,us);return us.delete(ns),vs;case"[object Symbol]":if(kt)return kt.call(ns)==kt.call(ts)}return!1},St=Object.prototype.hasOwnProperty,Mt=function(ns,ts,rs,as,os,is){var us=1&rs,ls=Nn(ns),fs=ls.length;if(fs!=Nn(ts).length&&!us)return!1;for(var hs=fs;hs--;){var vs=ls[hs];if(!(us?vs in ts:St.call(ts,vs)))return!1}var gs=is.get(ns),ys=is.get(ts);if(gs&&ys)return gs==ts&&ys==ns;var xs=!0;is.set(ns,ts),is.set(ts,ns);for(var ms=us;++hs<fs;){var Ss=ns[vs=ls[hs]],Ms=ts[vs];if(as)var $s=us?as(Ms,Ss,vs,ts,ns,is):as(Ss,Ms,vs,ns,ts,is);if(!($s===void 0?Ss===Ms||os(Ss,Ms,rs,as,is):$s)){xs=!1;break}ms||(ms=vs=="constructor")}if(xs&&!ms){var bs=ns.constructor,Cs=ts.constructor;bs==Cs||!("constructor"in ns)||!("constructor"in ts)||typeof bs=="function"&&bs instanceof bs&&typeof Cs=="function"&&Cs instanceof Cs||(xs=!1)}return is.delete(ns),is.delete(ts),xs},Ct=Object.prototype.hasOwnProperty,Gt=function(ns,ts,rs,as,os,is){var us=Te(ns),ls=Te(ts),fs=us?"[object Array]":Tn(ns),hs=ls?"[object Array]":Tn(ts),vs=(fs=fs=="[object Arguments]"?"[object Object]":fs)=="[object Object]",gs=(hs=hs=="[object Arguments]"?"[object Object]":hs)=="[object Object]",ys=fs==hs;if(ys&&Pe(ns)){if(!Pe(ts))return!1;us=!0,vs=!1}if(ys&&!vs)return is||(is=new je),us||Ye(ns)?jt(ns,ts,rs,as,os,is):It(ns,ts,fs,rs,as,os,is);if(!(1&rs)){var xs=vs&&Ct.call(ns,"__wrapped__"),ms=gs&&Ct.call(ts,"__wrapped__");if(xs||ms){var Ss=xs?ns.value():ns,Ms=ms?ts.value():ts;return is||(is=new je),os(Ss,Ms,rs,as,is)}}return!!ys&&(is||(is=new je),Mt(ns,ts,rs,as,os,is))},Bt=function ns(ts,rs,as,os,is){return ts===rs||(ts==null||rs==null||!Ce(ts)&&!Ce(rs)?ts!=ts&&rs!=rs:Gt(ts,rs,as,os,ns,is))},At=function(ns,ts,rs,as){var os=rs.length,is=os,us=!as;if(ns==null)return!is;for(ns=Object(ns);os--;){var ls=rs[os];if(us&&ls[2]?ls[1]!==ns[ls[0]]:!(ls[0]in ns))return!1}for(;++os<is;){var fs=(ls=rs[os])[0],hs=ns[fs],vs=ls[1];if(us&&ls[2]){if(hs===void 0&&!(fs in ns))return!1}else{var gs=new je;if(as)var ys=as(hs,vs,fs,ns,ts,gs);if(!(ys===void 0?Bt(vs,hs,3,as,gs):ys))return!1}}return!0},Lt=function(ns){return ns==ns&&!D$1(ns)},Rt=function(ns){for(var ts=on(ns),rs=ts.length;rs--;){var as=ts[rs],os=ns[as];ts[rs]=[as,os,Lt(os)]}return ts},Tt=function(ns,ts){return function(rs){return rs!=null&&rs[ns]===ts&&(ts!==void 0||ns in Object(rs))}},Dt=function(ns){var ts=Rt(ns);return ts.length==1&&ts[0][2]?Tt(ts[0][0],ts[0][1]):function(rs){return rs===ns||At(rs,ns,ts)}},Pt=function(ns){return typeof ns=="symbol"||Ce(ns)&&T$2(ns)=="[object Symbol]"},zt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ft=/^\w*$/,Ut=function(ns,ts){if(Te(ns))return!1;var rs=typeof ns;return!(rs!="number"&&rs!="symbol"&&rs!="boolean"&&ns!=null&&!Pt(ns))||Ft.test(ns)||!zt.test(ns)||ts!=null&&ns in Object(ts)};function Vt(ns,ts){if(typeof ns!="function"||ts!=null&&typeof ts!="function")throw new TypeError("Expected a function");var rs=function(){var as=arguments,os=ts?ts.apply(this,as):as[0],is=rs.cache;if(is.has(os))return is.get(os);var us=ns.apply(this,as);return rs.cache=is.set(os,us)||is,us};return rs.cache=new(Vt.Cache||we),rs}Vt.Cache=we;var $t=Vt,Ht=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wt=/\\(\\)?/g,qt=function(ns){var ts=$t(ns,function(as){return rs.size===500&&rs.clear(),as}),rs=ts.cache;return ts}(function(ns){var ts=[];return ns.charCodeAt(0)===46&&ts.push(""),ns.replace(Ht,function(rs,as,os,is){ts.push(os?is.replace(Wt,"$1"):as||rs)}),ts}),Yt=function(ns,ts){for(var rs=-1,as=ns==null?0:ns.length,os=Array(as);++rs<as;)os[rs]=ts(ns[rs],rs,ns);return os},Jt=I$1?I$1.prototype:void 0,Xt=Jt?Jt.toString:void 0,Kt=function ns(ts){if(typeof ts=="string")return ts;if(Te(ts))return Yt(ts,ns)+"";if(Pt(ts))return Xt?Xt.call(ts):"";var rs=ts+"";return rs=="0"&&1/ts==-1/0?"-0":rs},Qt=function(ns){return ns==null?"":Kt(ns)},Zt=function(ns,ts){return Te(ns)?ns:Ut(ns,ts)?[ns]:qt(Qt(ns))},er$1=function(ns){if(typeof ns=="string"||Pt(ns))return ns;var ts=ns+"";return ts=="0"&&1/ns==-1/0?"-0":ts},nr=function(ns,ts){for(var rs=0,as=(ts=Zt(ts,ns)).length;ns!=null&&rs<as;)ns=ns[er$1(ts[rs++])];return rs&&rs==as?ns:void 0},tr=function(ns,ts,rs){var as=ns==null?void 0:nr(ns,ts);return as===void 0?rs:as},rr=function(ns,ts){return ns!=null&&ts in Object(ns)},or=function(ns,ts,rs){for(var as=-1,os=(ts=Zt(ts,ns)).length,is=!1;++as<os;){var us=er$1(ts[as]);if(!(is=ns!=null&&rs(ns,us)))break;ns=ns[us]}return is||++as!=os?is:!!(os=ns==null?0:ns.length)&&Ue(os)&&Fe(us,os)&&(Te(ns)||Re(ns))},ir=function(ns,ts){return ns!=null&&or(ns,ts,rr)},ar=function(ns,ts){return Ut(ns)&&Lt(ts)?Tt(er$1(ns),ts):function(rs){var as=tr(rs,ns);return as===void 0&&as===ts?ir(rs,ns):Bt(ts,as,3)}},ur=function(ns){return function(ts){return ts==null?void 0:ts[ns]}},cr=function(ns){return function(ts){return nr(ts,ns)}},sr=function(ns){return Ut(ns)?ur(er$1(ns)):cr(ns)},dr=function(ns){return typeof ns=="function"?ns:ns==null?ht:typeof ns=="object"?Te(ns)?ar(ns[0],ns[1]):Dt(ns):sr(ns)},fr=function(ns,ts){return(Te(ns)?vn:gt)(ns,dr(ts))},hr=Object.prototype.hasOwnProperty,lr=function(ns,ts){return ns!=null&&hr.call(ns,ts)},vr=function(ns,ts){return ns!=null&&or(ns,ts,lr)},pr=Object.prototype.hasOwnProperty,gr=function(ns){if(ns==null)return!0;if(rn(ns)&&(Te(ns)||typeof ns=="string"||typeof ns.splice=="function"||Pe(ns)||Ye(ns)||Re(ns)))return!ns.length;var ts=Tn(ns);if(ts=="[object Map]"||ts=="[object Set]")return!ns.size;if(Qe(ns))return!tn(ns).length;for(var rs in ns)if(pr.call(ns,rs))return!1;return!0},yr=function(ns){return ns===void 0},br=function(ns,ts){var rs=-1,as=rn(ns)?Array(ns.length):[];return ft(ns,function(os,is,us){as[++rs]=ts(os,is,us)}),as},mr=function(ns,ts){return(Te(ns)?Yt:br)(ns,dr(ts))},wr=function(ns,ts,rs,as){var os=-1,is=ns==null?0:ns.length;for(as&&is&&(rs=ns[++os]);++os<is;)rs=ts(rs,ns[os],os,ns);return rs},Er=function(ns,ts,rs,as,os){return os(ns,function(is,us,ls){rs=as?(as=!1,is):ts(rs,is,us,ls)}),rs},_r=function(ns,ts,rs){var as=Te(ns)?wr:Er,os=arguments.length<3;return as(ns,dr(ts),rs,os,ft)},jr=function(ns){return typeof ns=="string"||!Te(ns)&&Ce(ns)&&T$2(ns)=="[object String]"},xr=ur("length"),Nr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Or=function(ns){return Nr.test(ns)},kr="[\\ud800-\\udfff]",Ir="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Sr="\\ud83c[\\udffb-\\udfff]",Mr="[^\\ud800-\\udfff]",Cr="(?:\\ud83c[\\udde6-\\uddff]){2}",Gr="[\\ud800-\\udbff][\\udc00-\\udfff]",Br="(?:"+Ir+"|"+Sr+")?",Ar="[\\ufe0e\\ufe0f]?"+Br+("(?:\\u200d(?:"+[Mr,Cr,Gr].join("|")+")[\\ufe0e\\ufe0f]?"+Br+")*"),Lr="(?:"+[Mr+Ir+"?",Ir,Cr,Gr,kr].join("|")+")",Rr=RegExp(Sr+"(?="+Sr+")|"+Lr+Ar,"g"),Tr=function(ns){for(var ts=Rr.lastIndex=0;Rr.test(ns);)++ts;return ts},Dr=function(ns){return Or(ns)?Tr(ns):xr(ns)},Pr=function(ns){if(ns==null)return 0;if(rn(ns))return jr(ns)?Dr(ns):ns.length;var ts=Tn(ns);return ts=="[object Map]"||ts=="[object Set]"?ns.size:tn(ns).length},zr=function(ns,ts,rs){var as=Te(ns),os=as||Pe(ns)||Ye(ns);if(ts=dr(ts),rs==null){var is=ns&&ns.constructor;rs=os?as?new is:[]:D$1(ns)&&z$1(is)?Kn(En(ns)):{}}return(os?xe:dt)(ns,function(us,ls,fs){return ts(rs,us,ls,fs)}),rs},Fr=I$1?I$1.isConcatSpreadable:void 0,Ur=function(ns){return Te(ns)||Re(ns)||!!(Fr&&ns&&ns[Fr])},Vr=function ns(ts,rs,as,os,is){var us=-1,ls=ts.length;for(as||(as=Ur),is||(is=[]);++us<ls;){var fs=ts[us];rs>0&&as(fs)?rs>1?ns(fs,rs-1,as,os,is):wn(is,fs):os||(is[is.length]=fs)}return is},$r=function(ns,ts,rs){switch(rs.length){case 0:return ns.call(ts);case 1:return ns.call(ts,rs[0]);case 2:return ns.call(ts,rs[0],rs[1]);case 3:return ns.call(ts,rs[0],rs[1],rs[2])}return ns.apply(ts,rs)},Hr=Math.max,Wr=function(ns,ts,rs){return ts=Hr(ts===void 0?ns.length-1:ts,0),function(){for(var as=arguments,os=-1,is=Hr(as.length-ts,0),us=Array(is);++os<is;)us[os]=as[ts+os];os=-1;for(var ls=Array(ts+1);++os<ts;)ls[os]=as[os];return ls[ts]=rs(us),$r(ns,this,ls)}},qr=Ne?function(ns,ts){return Ne(ns,"toString",{configurable:!0,enumerable:!1,value:ct(ts),writable:!0})}:ht,Yr=Date.now,Jr=function(ns){var ts=0,rs=0;return function(){var as=Yr(),os=16-(as-rs);if(rs=as,os>0){if(++ts>=800)return arguments[0]}else ts=0;return ns.apply(void 0,arguments)}}(qr),Xr=function(ns,ts){return Jr(Wr(ns,ts,ht),ns+"")},Kr=function(ns,ts,rs,as){for(var os=ns.length,is=rs+(as?1:-1);as?is--:++is<os;)if(ts(ns[is],is,ns))return is;return-1},Qr=function(ns){return ns!=ns},Zr=function(ns,ts,rs){for(var as=rs-1,os=ns.length;++as<os;)if(ns[as]===ts)return as;return-1},eo=function(ns,ts,rs){return ts==ts?Zr(ns,ts,rs):Kr(ns,Qr,rs)},no=function(ns,ts){return!!(ns!=null&&ns.length)&&eo(ns,ts,0)>-1},to=function(ns,ts,rs){for(var as=-1,os=ns==null?0:ns.length;++as<os;)if(rs(ts,ns[as]))return!0;return!1},ro=function(){},oo=Sn&&1/Nt(new Sn([,-0]))[1]==1/0?function(ns){return new Sn(ns)}:ro,io=function(ns,ts,rs){var as=-1,os=no,is=ns.length,us=!0,ls=[],fs=ls;if(rs)us=!1,os=to;else if(is>=200){var hs=ts?null:oo(ns);if(hs)return Nt(hs);us=!1,os=_t,fs=new wt}else fs=ts?[]:ls;e:for(;++as<is;){var vs=ns[as],gs=ts?ts(vs):vs;if(vs=rs||vs!==0?vs:0,us&&gs==gs){for(var ys=fs.length;ys--;)if(fs[ys]===gs)continue e;ts&&fs.push(gs),ls.push(vs)}else os(fs,gs,rs)||(fs!==ls&&fs.push(gs),ls.push(vs))}return ls},ao=function(ns){return Ce(ns)&&rn(ns)},uo=Xr(function(ns){return io(Vr(ns,1,ao,!0))}),co=function(ns,ts){return Yt(ts,function(rs){return ns[rs]})},so,fo=function(ns){return ns==null?[]:co(ns,on(ns))};try{so={clone:ut,constant:ct,each:pt,filter:fr,has:vr,isArray:Te,isEmpty:gr,isFunction:z$1,isUndefined:yr,keys:on,map:mr,reduce:_r,size:Pr,transform:zr,union:uo,values:fo}}catch{}so||(so=window._);var ho=so,lo=vo;function vo(ns){this._isDirected=!ho.has(ns,"directed")||ns.directed,this._isMultigraph=!!ho.has(ns,"multigraph")&&ns.multigraph,this._isCompound=!!ho.has(ns,"compound")&&ns.compound,this._label=void 0,this._defaultNodeLabelFn=ho.constant(void 0),this._defaultEdgeLabelFn=ho.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function po(ns,ts){ns[ts]?ns[ts]++:ns[ts]=1}function go(ns,ts){--ns[ts]||delete ns[ts]}function yo(ns,ts,rs,as){var os=""+ts,is=""+rs;if(!ns&&os>is){var us=os;os=is,is=us}return os+""+is+""+(ho.isUndefined(as)?"\0":as)}function bo(ns,ts,rs,as){var os=""+ts,is=""+rs;if(!ns&&os>is){var us=os;os=is,is=us}var ls={v:os,w:is};return as&&(ls.name=as),ls}function mo(ns,ts){return yo(ns,ts.v,ts.w,ts.name)}vo.prototype._nodeCount=0,vo.prototype._edgeCount=0,vo.prototype.isDirected=function(){return this._isDirected},vo.prototype.isMultigraph=function(){return this._isMultigraph},vo.prototype.isCompound=function(){return this._isCompound},vo.prototype.setGraph=function(ns){return this._label=ns,this},vo.prototype.graph=function(){return this._label},vo.prototype.setDefaultNodeLabel=function(ns){return ho.isFunction(ns)||(ns=ho.constant(ns)),this._defaultNodeLabelFn=ns,this},vo.prototype.nodeCount=function(){return this._nodeCount},vo.prototype.nodes=function(){return ho.keys(this._nodes)},vo.prototype.sources=function(){var ns=this;return ho.filter(this.nodes(),function(ts){return ho.isEmpty(ns._in[ts])})},vo.prototype.sinks=function(){var ns=this;return ho.filter(this.nodes(),function(ts){return ho.isEmpty(ns._out[ts])})},vo.prototype.setNodes=function(ns,ts){var rs=arguments,as=this;return ho.each(ns,function(os){rs.length>1?as.setNode(os,ts):as.setNode(os)}),this},vo.prototype.setNode=function(ns,ts){return ho.has(this._nodes,ns)?(arguments.length>1&&(this._nodes[ns]=ts),this):(this._nodes[ns]=arguments.length>1?ts:this._defaultNodeLabelFn(ns),this._isCompound&&(this._parent[ns]="\0",this._children[ns]={},this._children["\0"][ns]=!0),this._in[ns]={},this._preds[ns]={},this._out[ns]={},this._sucs[ns]={},++this._nodeCount,this)},vo.prototype.node=function(ns){return this._nodes[ns]},vo.prototype.hasNode=function(ns){return ho.has(this._nodes,ns)},vo.prototype.removeNode=function(ns){var ts=this;if(ho.has(this._nodes,ns)){var rs=function(as){ts.removeEdge(ts._edgeObjs[as])};delete this._nodes[ns],this._isCompound&&(this._removeFromParentsChildList(ns),delete this._parent[ns],ho.each(this.children(ns),function(as){ts.setParent(as)}),delete this._children[ns]),ho.each(ho.keys(this._in[ns]),rs),delete this._in[ns],delete this._preds[ns],ho.each(ho.keys(this._out[ns]),rs),delete this._out[ns],delete this._sucs[ns],--this._nodeCount}return this},vo.prototype.setParent=function(ns,ts){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(ho.isUndefined(ts))ts="\0";else{for(var rs=ts+="";!ho.isUndefined(rs);rs=this.parent(rs))if(rs===ns)throw new Error("Setting "+ts+" as parent of "+ns+" would create a cycle");this.setNode(ts)}return this.setNode(ns),this._removeFromParentsChildList(ns),this._parent[ns]=ts,this._children[ts][ns]=!0,this},vo.prototype._removeFromParentsChildList=function(ns){delete this._children[this._parent[ns]][ns]},vo.prototype.parent=function(ns){if(this._isCompound){var ts=this._parent[ns];if(ts!=="\0")return ts}},vo.prototype.children=function(ns){if(ho.isUndefined(ns)&&(ns="\0"),this._isCompound){var ts=this._children[ns];if(ts)return ho.keys(ts)}else{if(ns==="\0")return this.nodes();if(this.hasNode(ns))return[]}},vo.prototype.predecessors=function(ns){var ts=this._preds[ns];if(ts)return ho.keys(ts)},vo.prototype.successors=function(ns){var ts=this._sucs[ns];if(ts)return ho.keys(ts)},vo.prototype.neighbors=function(ns){var ts=this.predecessors(ns);if(ts)return ho.union(ts,this.successors(ns))},vo.prototype.isLeaf=function(ns){return(this.isDirected()?this.successors(ns):this.neighbors(ns)).length===0},vo.prototype.filterNodes=function(ns){var ts=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});ts.setGraph(this.graph());var rs=this;ho.each(this._nodes,function(is,us){ns(us)&&ts.setNode(us,is)}),ho.each(this._edgeObjs,function(is){ts.hasNode(is.v)&&ts.hasNode(is.w)&&ts.setEdge(is,rs.edge(is))});var as={};function os(is){var us=rs.parent(is);return us===void 0||ts.hasNode(us)?(as[is]=us,us):us in as?as[us]:os(us)}return this._isCompound&&ho.each(ts.nodes(),function(is){ts.setParent(is,os(is))}),ts},vo.prototype.setDefaultEdgeLabel=function(ns){return ho.isFunction(ns)||(ns=ho.constant(ns)),this._defaultEdgeLabelFn=ns,this},vo.prototype.edgeCount=function(){return this._edgeCount},vo.prototype.edges=function(){return ho.values(this._edgeObjs)},vo.prototype.setPath=function(ns,ts){var rs=this,as=arguments;return ho.reduce(ns,function(os,is){return as.length>1?rs.setEdge(os,is,ts):rs.setEdge(os,is),is}),this},vo.prototype.setEdge=function(){var ns,ts,rs,as,os=!1,is=arguments[0];typeof is=="object"&&is!==null&&"v"in is?(ns=is.v,ts=is.w,rs=is.name,arguments.length===2&&(as=arguments[1],os=!0)):(ns=is,ts=arguments[1],rs=arguments[3],arguments.length>2&&(as=arguments[2],os=!0)),ns=""+ns,ts=""+ts,ho.isUndefined(rs)||(rs=""+rs);var us=yo(this._isDirected,ns,ts,rs);if(ho.has(this._edgeLabels,us))return os&&(this._edgeLabels[us]=as),this;if(!ho.isUndefined(rs)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(ns),this.setNode(ts),this._edgeLabels[us]=os?as:this._defaultEdgeLabelFn(ns,ts,rs);var ls=bo(this._isDirected,ns,ts,rs);return ns=ls.v,ts=ls.w,Object.freeze(ls),this._edgeObjs[us]=ls,po(this._preds[ts],ns),po(this._sucs[ns],ts),this._in[ts][us]=ls,this._out[ns][us]=ls,this._edgeCount++,this},vo.prototype.edge=function(ns,ts,rs){var as=arguments.length===1?mo(this._isDirected,arguments[0]):yo(this._isDirected,ns,ts,rs);return this._edgeLabels[as]},vo.prototype.hasEdge=function(ns,ts,rs){var as=arguments.length===1?mo(this._isDirected,arguments[0]):yo(this._isDirected,ns,ts,rs);return ho.has(this._edgeLabels,as)},vo.prototype.removeEdge=function(ns,ts,rs){var as=arguments.length===1?mo(this._isDirected,arguments[0]):yo(this._isDirected,ns,ts,rs),os=this._edgeObjs[as];return os&&(ns=os.v,ts=os.w,delete this._edgeLabels[as],delete this._edgeObjs[as],go(this._preds[ts],ns),go(this._sucs[ns],ts),delete this._in[ts][as],delete this._out[ns][as],this._edgeCount--),this},vo.prototype.inEdges=function(ns,ts){var rs=this._in[ns];if(rs){var as=ho.values(rs);return ts?ho.filter(as,function(os){return os.v===ts}):as}},vo.prototype.outEdges=function(ns,ts){var rs=this._out[ns];if(rs){var as=ho.values(rs);return ts?ho.filter(as,function(os){return os.w===ts}):as}},vo.prototype.nodeEdges=function(ns,ts){var rs=this.inEdges(ns,ts);if(rs)return rs.concat(this.outEdges(ns,ts))};var wo={Graph:lo,version:"2.1.8"},Eo={write:function(ns){var ts={options:{directed:ns.isDirected(),multigraph:ns.isMultigraph(),compound:ns.isCompound()},nodes:_o(ns),edges:jo(ns)};return ho.isUndefined(ns.graph())||(ts.value=ho.clone(ns.graph())),ts},read:function(ns){var ts=new lo(ns.options).setGraph(ns.value);return ho.each(ns.nodes,function(rs){ts.setNode(rs.v,rs.value),rs.parent&&ts.setParent(rs.v,rs.parent)}),ho.each(ns.edges,function(rs){ts.setEdge({v:rs.v,w:rs.w,name:rs.name},rs.value)}),ts}};function _o(ns){return ho.map(ns.nodes(),function(ts){var rs=ns.node(ts),as=ns.parent(ts),os={v:ts};return ho.isUndefined(rs)||(os.value=rs),ho.isUndefined(as)||(os.parent=as),os})}function jo(ns){return ho.map(ns.edges(),function(ts){var rs=ns.edge(ts),as={v:ts.v,w:ts.w};return ho.isUndefined(ts.name)||(as.name=ts.name),ho.isUndefined(rs)||(as.value=rs),as})}var xo=function(ns){var ts,rs={},as=[];function os(is){ho.has(rs,is)||(rs[is]=!0,ts.push(is),ho.each(ns.successors(is),os),ho.each(ns.predecessors(is),os))}return ho.each(ns.nodes(),function(is){ts=[],os(is),ts.length&&as.push(ts)}),as},No=Oo;function Oo(){this._arr=[],this._keyIndices={}}Oo.prototype.size=function(){return this._arr.length},Oo.prototype.keys=function(){return this._arr.map(function(ns){return ns.key})},Oo.prototype.has=function(ns){return ho.has(this._keyIndices,ns)},Oo.prototype.priority=function(ns){var ts=this._keyIndices[ns];if(ts!==void 0)return this._arr[ts].priority},Oo.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Oo.prototype.add=function(ns,ts){var rs=this._keyIndices;if(ns=String(ns),!ho.has(rs,ns)){var as=this._arr,os=as.length;return rs[ns]=os,as.push({key:ns,priority:ts}),this._decrease(os),!0}return!1},Oo.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var ns=this._arr.pop();return delete this._keyIndices[ns.key],this._heapify(0),ns.key},Oo.prototype.decrease=function(ns,ts){var rs=this._keyIndices[ns];if(ts>this._arr[rs].priority)throw new Error("New priority is greater than current priority. Key: "+ns+" Old: "+this._arr[rs].priority+" New: "+ts);this._arr[rs].priority=ts,this._decrease(rs)},Oo.prototype._heapify=function(ns){var ts=this._arr,rs=2*ns,as=rs+1,os=ns;rs<ts.length&&(os=ts[rs].priority<ts[os].priority?rs:os,as<ts.length&&(os=ts[as].priority<ts[os].priority?as:os),os!==ns&&(this._swap(ns,os),this._heapify(os)))},Oo.prototype._decrease=function(ns){for(var ts,rs=this._arr,as=rs[ns].priority;ns!==0&&!(rs[ts=ns>>1].priority<as);)this._swap(ns,ts),ns=ts},Oo.prototype._swap=function(ns,ts){var rs=this._arr,as=this._keyIndices,os=rs[ns],is=rs[ts];rs[ns]=is,rs[ts]=os,as[is.key]=ns,as[os.key]=ts};var ko=function(ns,ts,rs,as){return function(os,is,us,ls){var fs,hs,vs={},gs=new No,ys=function(xs){var ms=xs.v!==fs?xs.v:xs.w,Ss=vs[ms],Ms=us(xs),$s=hs.distance+Ms;if(Ms<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+xs+" Weight: "+Ms);$s<Ss.distance&&(Ss.distance=$s,Ss.predecessor=fs,gs.decrease(ms,$s))};for(os.nodes().forEach(function(xs){var ms=xs===is?0:Number.POSITIVE_INFINITY;vs[xs]={distance:ms},gs.add(xs,ms)});gs.size()>0&&(fs=gs.removeMin(),(hs=vs[fs]).distance!==Number.POSITIVE_INFINITY);)ls(fs).forEach(ys);return vs}(ns,String(ts),rs||Io,as||function(os){return ns.outEdges(os)})},Io=ho.constant(1),So=function(ns,ts,rs){return ho.transform(ns.nodes(),function(as,os){as[os]=ko(ns,os,ts,rs)},{})},Mo=function(ns){var ts=0,rs=[],as={},os=[];function is(us){var ls=as[us]={onStack:!0,lowlink:ts,index:ts++};if(rs.push(us),ns.successors(us).forEach(function(vs){ho.has(as,vs)?as[vs].onStack&&(ls.lowlink=Math.min(ls.lowlink,as[vs].index)):(is(vs),ls.lowlink=Math.min(ls.lowlink,as[vs].lowlink))}),ls.lowlink===ls.index){var fs,hs=[];do fs=rs.pop(),as[fs].onStack=!1,hs.push(fs);while(us!==fs);os.push(hs)}}return ns.nodes().forEach(function(us){ho.has(as,us)||is(us)}),os},Co=function(ns){return ho.filter(Mo(ns),function(ts){return ts.length>1||ts.length===1&&ns.hasEdge(ts[0],ts[0])})},Go=function(ns,ts,rs){return function(as,os,is){var us={},ls=as.nodes();return ls.forEach(function(fs){us[fs]={},us[fs][fs]={distance:0},ls.forEach(function(hs){fs!==hs&&(us[fs][hs]={distance:Number.POSITIVE_INFINITY})}),is(fs).forEach(function(hs){var vs=hs.v===fs?hs.w:hs.v,gs=os(hs);us[fs][vs]={distance:gs,predecessor:fs}})}),ls.forEach(function(fs){var hs=us[fs];ls.forEach(function(vs){var gs=us[vs];ls.forEach(function(ys){var xs=gs[fs],ms=hs[ys],Ss=gs[ys],Ms=xs.distance+ms.distance;Ms<Ss.distance&&(Ss.distance=Ms,Ss.predecessor=ms.predecessor)})})}),us}(ns,ts||Bo,rs||function(as){return ns.outEdges(as)})},Bo=ho.constant(1),Ao=Lo;function Lo(ns){var ts={},rs={},as=[];if(ho.each(ns.sinks(),function os(is){if(ho.has(rs,is))throw new Ro;ho.has(ts,is)||(rs[is]=!0,ts[is]=!0,ho.each(ns.predecessors(is),os),delete rs[is],as.push(is))}),ho.size(ts)!==ns.nodeCount())throw new Ro;return as}function Ro(){}Lo.CycleException=Ro,Ro.prototype=new Error;var To=function(ns,ts,rs){ho.isArray(ts)||(ts=[ts]);var as=(ns.isDirected()?ns.successors:ns.neighbors).bind(ns),os=[],is={};return ho.each(ts,function(us){if(!ns.hasNode(us))throw new Error("Graph does not have node: "+us);Do(ns,us,rs==="post",is,as,os)}),os};function Do(ns,ts,rs,as,os,is){ho.has(as,ts)||(as[ts]=!0,rs||is.push(ts),ho.each(os(ts),function(us){Do(ns,us,rs,as,os,is)}),rs&&is.push(ts))}var Po,zo={Graph:wo.Graph,json:Eo,alg:{components:xo,dijkstra:ko,dijkstraAll:So,findCycles:Co,floydWarshall:Go,isAcyclic:function(ns){try{Ao(ns)}catch(ts){if(ts instanceof Ao.CycleException)return!1;throw ts}return!0},postorder:function(ns,ts){return To(ns,ts,"post")},preorder:function(ns,ts){return To(ns,ts,"pre")},prim:function(ns,ts){var rs,as=new lo,os={},is=new No;function us(fs){var hs=fs.v===rs?fs.w:fs.v,vs=is.priority(hs);if(vs!==void 0){var gs=ts(fs);gs<vs&&(os[hs]=rs,is.decrease(hs,gs))}}if(ns.nodeCount()===0)return as;ho.each(ns.nodes(),function(fs){is.add(fs,Number.POSITIVE_INFINITY),as.setNode(fs)}),is.decrease(ns.nodes()[0],0);for(var ls=!1;is.size()>0;){if(rs=is.removeMin(),ho.has(os,rs))as.setEdge(rs,os[rs]);else{if(ls)throw new Error("Input graph is not connected: "+ns);ls=!0}ns.nodeEdges(rs).forEach(us)}return as},tarjan:Mo,topsort:Ao},version:wo.version};try{Po=zo}catch{}Po||(Po=window.graphlib);var Fo=Po,Uo=function(ns){return at(ns,5)},Vo=function(ns,ts,rs){if(!D$1(rs))return!1;var as=typeof ts;return!!(as=="number"?rn(rs)&&Fe(ts,rs.length):as=="string"&&ts in rs)&&h(rs[ts],ns)},$o=Object.prototype,Ho=$o.hasOwnProperty,Wo=Xr(function(ns,ts){ns=Object(ns);var rs=-1,as=ts.length,os=as>2?ts[2]:void 0;for(os&&Vo(ts[0],ts[1],os)&&(as=1);++rs<as;)for(var is=ts[rs],us=dn(is),ls=-1,fs=us.length;++ls<fs;){var hs=us[ls],vs=ns[hs];(vs===void 0||h(vs,$o[hs])&&!Ho.call(ns,hs))&&(ns[hs]=is[hs])}return ns}),qo=function(ns){return function(ts,rs,as){var os=Object(ts);if(!rn(ts)){var is=dr(rs);ts=on(ts),rs=function(ls){return is(os[ls],ls,os)}}var us=ns(ts,rs,as);return us>-1?os[is?ts[us]:us]:void 0}},Yo=/^\s+|\s+$/g,Jo=/^[-+]0x[0-9a-f]+$/i,Xo=/^0b[01]+$/i,Ko=/^0o[0-7]+$/i,Qo=parseInt,Zo=function(ns){if(typeof ns=="number")return ns;if(Pt(ns))return NaN;if(D$1(ns)){var ts=typeof ns.valueOf=="function"?ns.valueOf():ns;ns=D$1(ts)?ts+"":ts}if(typeof ns!="string")return ns===0?ns:+ns;ns=ns.replace(Yo,"");var rs=Xo.test(ns);return rs||Ko.test(ns)?Qo(ns.slice(2),rs?2:8):Jo.test(ns)?NaN:+ns},ei=function(ns){return ns?(ns=Zo(ns))===1/0||ns===-1/0?17976931348623157e292*(ns<0?-1:1):ns==ns?ns:0:ns===0?ns:0},ni=function(ns){var ts=ei(ns),rs=ts%1;return ts==ts?rs?ts-rs:ts:0},ti=Math.max,ri=qo(function(ns,ts,rs){var as=ns==null?0:ns.length;if(!as)return-1;var os=rs==null?0:ni(rs);return os<0&&(os=ti(as+os,0)),Kr(ns,dr(ts),os)}),oi=function(ns){return ns!=null&&ns.length?Vr(ns,1):[]},ii=function(ns,ts){return ns==null?ns:st(ns,lt(ts),dn)},ai=function(ns){var ts=ns==null?0:ns.length;return ts?ns[ts-1]:void 0},ui=function(ns,ts){var rs={};return ts=dr(ts),dt(ns,function(as,os,is){Oe(rs,os,ts(as,os,is))}),rs},ci=function(ns,ts,rs){for(var as=-1,os=ns.length;++as<os;){var is=ns[as],us=ts(is);if(us!=null&&(ls===void 0?us==us&&!Pt(us):rs(us,ls)))var ls=us,fs=is}return fs},si=function(ns,ts){return ns>ts},di=function(ns){return ns&&ns.length?ci(ns,ht,si):void 0},fi=function(ns,ts,rs){(rs!==void 0&&!h(ns[ts],rs)||rs===void 0&&!(ts in ns))&&Oe(ns,ts,rs)},hi=Function.prototype,li=Object.prototype,vi=hi.toString,pi=li.hasOwnProperty,gi=vi.call(Object),yi=function(ns){if(!Ce(ns)||T$2(ns)!="[object Object]")return!1;var ts=En(ns);if(ts===null)return!0;var rs=pi.call(ts,"constructor")&&ts.constructor;return typeof rs=="function"&&rs instanceof rs&&vi.call(rs)==gi},bi=function(ns,ts){if((ts!=="constructor"||typeof ns[ts]!="function")&&ts!="__proto__")return ns[ts]},mi=function(ns){return Se(ns,dn(ns))},wi=function(ns,ts,rs,as,os,is,us){var ls=bi(ns,rs),fs=bi(ts,rs),hs=us.get(fs);if(hs)fi(ns,rs,hs);else{var vs=is?is(ls,fs,rs+"",ns,ts,us):void 0,gs=vs===void 0;if(gs){var ys=Te(fs),xs=!ys&&Pe(fs),ms=!ys&&!xs&&Ye(fs);vs=fs,ys||xs||ms?Te(ls)?vs=ls:ao(ls)?vs=ln(ls):xs?(gs=!1,vs=hn(fs,!0)):ms?(gs=!1,vs=Yn(fs,!0)):vs=[]:yi(fs)||Re(fs)?(vs=ls,Re(ls)?vs=mi(ls):D$1(ls)&&!z$1(ls)||(vs=Qn(fs))):gs=!1}gs&&(us.set(fs,vs),os(vs,fs,as,is,us),us.delete(fs)),fi(ns,rs,vs)}},Ei=function ns(ts,rs,as,os,is){ts!==rs&&st(rs,function(us,ls){if(is||(is=new je),D$1(us))wi(ts,rs,ls,as,ns,os,is);else{var fs=os?os(bi(ts,ls),us,ls+"",ts,rs,is):void 0;fs===void 0&&(fs=us),fi(ts,ls,fs)}},dn)},_i=function(ns){return Xr(function(ts,rs){var as=-1,os=rs.length,is=os>1?rs[os-1]:void 0,us=os>2?rs[2]:void 0;for(is=ns.length>3&&typeof is=="function"?(os--,is):void 0,us&&Vo(rs[0],rs[1],us)&&(is=os<3?void 0:is,os=1),ts=Object(ts);++as<os;){var ls=rs[as];ls&&ns(ts,ls,as,is)}return ts})}(function(ns,ts,rs){Ei(ns,ts,rs)}),ji=function(ns,ts){return ns<ts},xi=function(ns){return ns&&ns.length?ci(ns,ht,ji):void 0},Ni=function(ns,ts){return ns&&ns.length?ci(ns,dr(ts),ji):void 0},Oi=function(){return k.Date.now()},ki=function(ns,ts,rs,as){if(!D$1(ns))return ns;for(var os=-1,is=(ts=Zt(ts,ns)).length,us=is-1,ls=ns;ls!=null&&++os<is;){var fs=er$1(ts[os]),hs=rs;if(fs==="__proto__"||fs==="constructor"||fs==="prototype")return ns;if(os!=us){var vs=ls[fs];(hs=as?as(vs,fs,ls):void 0)===void 0&&(hs=D$1(vs)?vs:Fe(ts[os+1])?[]:{})}Ie(ls,fs,hs),ls=ls[fs]}return ns},Ii=function(ns,ts,rs){for(var as=-1,os=ts.length,is={};++as<os;){var us=ts[as],ls=nr(ns,us);rs(ls,us)&&ki(is,Zt(us,ns),ls)}return is},Si=function(ns,ts){return Ii(ns,ts,function(rs,as){return ir(ns,as)})},Mi=function(ns){return Jr(Wr(ns,void 0,oi),ns+"")}(function(ns,ts){return ns==null?{}:Si(ns,ts)}),Ci=Math.ceil,Gi=Math.max,Bi=function(ns,ts,rs,as){for(var os=-1,is=Gi(Ci((ts-ns)/(rs||1)),0),us=Array(is);is--;)us[as?is:++os]=ns,ns+=rs;return us},Ai=function(ns){return function(ts,rs,as){return as&&typeof as!="number"&&Vo(ts,rs,as)&&(rs=as=void 0),ts=ei(ts),rs===void 0?(rs=ts,ts=0):rs=ei(rs),as=as===void 0?ts<rs?1:-1:ei(as),Bi(ts,rs,as,ns)}}(),Li=function(ns,ts){var rs=ns.length;for(ns.sort(ts);rs--;)ns[rs]=ns[rs].value;return ns},Ri=function(ns,ts){if(ns!==ts){var rs=ns!==void 0,as=ns===null,os=ns==ns,is=Pt(ns),us=ts!==void 0,ls=ts===null,fs=ts==ts,hs=Pt(ts);if(!ls&&!hs&&!is&&ns>ts||is&&us&&fs&&!ls&&!hs||as&&us&&fs||!rs&&fs||!os)return 1;if(!as&&!is&&!hs&&ns<ts||hs&&rs&&os&&!as&&!is||ls&&rs&&os||!us&&os||!fs)return-1}return 0},Ti=function(ns,ts,rs){for(var as=-1,os=ns.criteria,is=ts.criteria,us=os.length,ls=rs.length;++as<us;){var fs=Ri(os[as],is[as]);if(fs)return as>=ls?fs:fs*(rs[as]=="desc"?-1:1)}return ns.index-ts.index},Di=function(ns,ts,rs){ts=ts.length?Yt(ts,function(is){return Te(is)?function(us){return nr(us,is.length===1?is[0]:is)}:is}):[ht];var as=-1;ts=Yt(ts,He(dr));var os=br(ns,function(is,us,ls){return{criteria:Yt(ts,function(fs){return fs(is)}),index:++as,value:is}});return Li(os,function(is,us){return Ti(is,us,rs)})},Pi=Xr(function(ns,ts){if(ns==null)return[];var rs=ts.length;return rs>1&&Vo(ns,ts[0],ts[1])?ts=[]:rs>2&&Vo(ts[0],ts[1],ts[2])&&(ts=[ts[0]]),Di(ns,Vr(ts,1),[])}),zi=0,Fi=function(ns){var ts=++zi;return Qt(ns)+ts},Ui=function(ns,ts,rs){for(var as=-1,os=ns.length,is=ts.length,us={};++as<os;){var ls=as<is?ts[as]:void 0;rs(us,ns[as],ls)}return us},Vi,$i=function(ns,ts){return Ui(ns||[],ts||[],Ie)};try{Vi={cloneDeep:Uo,constant:ct,defaults:Wo,each:pt,filter:fr,find:ri,flatten:oi,forEach:vt,forIn:ii,has:vr,isUndefined:yr,last:ai,map:mr,mapValues:ui,max:di,merge:_i,min:xi,minBy:Ni,now:Oi,pick:Mi,range:Ai,reduce:_r,sortBy:Pi,uniqueId:Fi,values:fo,zipObject:$i}}catch{}Vi||(Vi=window._);var Hi=Vi,Wi=qi;function qi(){var ns={};ns._next=ns._prev=ns,this._sentinel=ns}function Yi(ns){ns._prev._next=ns._next,ns._next._prev=ns._prev,delete ns._next,delete ns._prev}function Ji(ns,ts){if(ns!=="_next"&&ns!=="_prev")return ts}qi.prototype.dequeue=function(){var ns=this._sentinel,ts=ns._prev;if(ts!==ns)return Yi(ts),ts},qi.prototype.enqueue=function(ns){var ts=this._sentinel;ns._prev&&ns._next&&Yi(ns),ns._next=ts._next,ts._next._prev=ns,ts._next=ns,ns._prev=ts},qi.prototype.toString=function(){for(var ns=[],ts=this._sentinel,rs=ts._prev;rs!==ts;)ns.push(JSON.stringify(rs,Ji)),rs=rs._prev;return"["+ns.join(", ")+"]"};var Xi=Fo.Graph,Ki=function(ns,ts){if(ns.nodeCount()<=1)return[];var rs=function(os,is){var us=new Xi,ls=0,fs=0;Hi.forEach(os.nodes(),function(gs){us.setNode(gs,{v:gs,in:0,out:0})}),Hi.forEach(os.edges(),function(gs){var ys=us.edge(gs.v,gs.w)||0,xs=is(gs),ms=ys+xs;us.setEdge(gs.v,gs.w,ms),fs=Math.max(fs,us.node(gs.v).out+=xs),ls=Math.max(ls,us.node(gs.w).in+=xs)});var hs=Hi.range(fs+ls+3).map(function(){return new Wi}),vs=ls+1;return Hi.forEach(us.nodes(),function(gs){ea(hs,vs,us.node(gs))}),{graph:us,buckets:hs,zeroIdx:vs}}(ns,ts||Qi),as=function(os,is,us){for(var ls,fs=[],hs=is[is.length-1],vs=is[0];os.nodeCount();){for(;ls=vs.dequeue();)Zi(os,is,us,ls);for(;ls=hs.dequeue();)Zi(os,is,us,ls);if(os.nodeCount()){for(var gs=is.length-2;gs>0;--gs)if(ls=is[gs].dequeue()){fs=fs.concat(Zi(os,is,us,ls,!0));break}}}return fs}(rs.graph,rs.buckets,rs.zeroIdx);return Hi.flatten(Hi.map(as,function(os){return ns.outEdges(os.v,os.w)}),!0)},Qi=Hi.constant(1);function Zi(ns,ts,rs,as,os){var is=os?[]:void 0;return Hi.forEach(ns.inEdges(as.v),function(us){var ls=ns.edge(us),fs=ns.node(us.v);os&&is.push({v:us.v,w:us.w}),fs.out-=ls,ea(ts,rs,fs)}),Hi.forEach(ns.outEdges(as.v),function(us){var ls=ns.edge(us),fs=us.w,hs=ns.node(fs);hs.in-=ls,ea(ts,rs,hs)}),ns.removeNode(as.v),is}function ea(ns,ts,rs){rs.out?rs.in?ns[rs.out-rs.in+ts].enqueue(rs):ns[ns.length-1].enqueue(rs):ns[0].enqueue(rs)}var na={run:function(ns){var ts=ns.graph().acyclicer==="greedy"?Ki(ns,function(rs){return function(as){return rs.edge(as).weight}}(ns)):function(rs){var as=[],os={},is={};function us(ls){Hi.has(is,ls)||(is[ls]=!0,os[ls]=!0,Hi.forEach(rs.outEdges(ls),function(fs){Hi.has(os,fs.w)?as.push(fs):us(fs.w)}),delete os[ls])}return Hi.forEach(rs.nodes(),us),as}(ns);Hi.forEach(ts,function(rs){var as=ns.edge(rs);ns.removeEdge(rs),as.forwardName=rs.name,as.reversed=!0,ns.setEdge(rs.w,rs.v,as,Hi.uniqueId("rev"))})},undo:function(ns){Hi.forEach(ns.edges(),function(ts){var rs=ns.edge(ts);if(rs.reversed){ns.removeEdge(ts);var as=rs.forwardName;delete rs.reversed,delete rs.forwardName,ns.setEdge(ts.w,ts.v,rs,as)}})}},ta=Fo.Graph,ra={addDummyNode:oa,simplify:function(ns){var ts=new ta().setGraph(ns.graph());return Hi.forEach(ns.nodes(),function(rs){ts.setNode(rs,ns.node(rs))}),Hi.forEach(ns.edges(),function(rs){var as=ts.edge(rs.v,rs.w)||{weight:0,minlen:1},os=ns.edge(rs);ts.setEdge(rs.v,rs.w,{weight:as.weight+os.weight,minlen:Math.max(as.minlen,os.minlen)})}),ts},asNonCompoundGraph:function(ns){var ts=new ta({multigraph:ns.isMultigraph()}).setGraph(ns.graph());return Hi.forEach(ns.nodes(),function(rs){ns.children(rs).length||ts.setNode(rs,ns.node(rs))}),Hi.forEach(ns.edges(),function(rs){ts.setEdge(rs,ns.edge(rs))}),ts},successorWeights:function(ns){var ts=Hi.map(ns.nodes(),function(rs){var as={};return Hi.forEach(ns.outEdges(rs),function(os){as[os.w]=(as[os.w]||0)+ns.edge(os).weight}),as});return Hi.zipObject(ns.nodes(),ts)},predecessorWeights:function(ns){var ts=Hi.map(ns.nodes(),function(rs){var as={};return Hi.forEach(ns.inEdges(rs),function(os){as[os.v]=(as[os.v]||0)+ns.edge(os).weight}),as});return Hi.zipObject(ns.nodes(),ts)},intersectRect:function(ns,ts){var rs,as,os=ns.x,is=ns.y,us=ts.x-os,ls=ts.y-is,fs=ns.width/2,hs=ns.height/2;if(!us&&!ls)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(ls)*fs>Math.abs(us)*hs?(ls<0&&(hs=-hs),rs=hs*us/ls,as=hs):(us<0&&(fs=-fs),rs=fs,as=fs*ls/us),{x:os+rs,y:is+as}},buildLayerMatrix:function(ns){var ts=Hi.map(Hi.range(ia(ns)+1),function(){return[]});return Hi.forEach(ns.nodes(),function(rs){var as=ns.node(rs),os=as.rank;Hi.isUndefined(os)||(ts[os][as.order]=rs)}),ts},normalizeRanks:function(ns){var ts=Hi.min(Hi.map(ns.nodes(),function(rs){return ns.node(rs).rank}));Hi.forEach(ns.nodes(),function(rs){var as=ns.node(rs);Hi.has(as,"rank")&&(as.rank-=ts)})},removeEmptyRanks:function(ns){var ts=Hi.min(Hi.map(ns.nodes(),function(is){return ns.node(is).rank})),rs=[];Hi.forEach(ns.nodes(),function(is){var us=ns.node(is).rank-ts;rs[us]||(rs[us]=[]),rs[us].push(is)});var as=0,os=ns.graph().nodeRankFactor;Hi.forEach(rs,function(is,us){Hi.isUndefined(is)&&us%os!=0?--as:as&&Hi.forEach(is,function(ls){ns.node(ls).rank+=as})})},addBorderNode:function(ns,ts,rs,as){var os={width:0,height:0};return arguments.length>=4&&(os.rank=rs,os.order=as),oa(ns,"border",os,ts)},maxRank:ia,partition:function(ns,ts){var rs={lhs:[],rhs:[]};return Hi.forEach(ns,function(as){ts(as)?rs.lhs.push(as):rs.rhs.push(as)}),rs},time:function(ns,ts){var rs=Hi.now();try{return ts()}finally{console.log(ns+" time: "+(Hi.now()-rs)+"ms")}},notime:function(ns,ts){return ts()}};function oa(ns,ts,rs,as){var os;do os=Hi.uniqueId(as);while(ns.hasNode(os));return rs.dummy=ts,ns.setNode(os,rs),os}function ia(ns){return Hi.max(Hi.map(ns.nodes(),function(ts){var rs=ns.node(ts).rank;if(!Hi.isUndefined(rs))return rs}))}var aa$1={run:function(ns){ns.graph().dummyChains=[],Hi.forEach(ns.edges(),function(ts){(function(rs,as){var os,is,us,ls=as.v,fs=rs.node(ls).rank,hs=as.w,vs=rs.node(hs).rank,gs=as.name,ys=rs.edge(as),xs=ys.labelRank;if(vs!==fs+1){for(rs.removeEdge(as),us=0,++fs;fs<vs;++us,++fs)ys.points=[],is={width:0,height:0,edgeLabel:ys,edgeObj:as,rank:fs},os=ra.addDummyNode(rs,"edge",is,"_d"),fs===xs&&(is.width=ys.width,is.height=ys.height,is.dummy="edge-label",is.labelpos=ys.labelpos),rs.setEdge(ls,os,{weight:ys.weight},gs),us===0&&rs.graph().dummyChains.push(os),ls=os;rs.setEdge(ls,hs,{weight:ys.weight},gs)}})(ns,ts)})},undo:function(ns){Hi.forEach(ns.graph().dummyChains,function(ts){var rs,as=ns.node(ts),os=as.edgeLabel;for(ns.setEdge(as.edgeObj,os);as.dummy;)rs=ns.successors(ts)[0],ns.removeNode(ts),os.points.push({x:as.x,y:as.y}),as.dummy==="edge-label"&&(os.x=as.x,os.y=as.y,os.width=as.width,os.height=as.height),ts=rs,as=ns.node(ts)})}},ua=function(ns){var ts={};Hi.forEach(ns.sources(),function rs(as){var os=ns.node(as);if(Hi.has(ts,as))return os.rank;ts[as]=!0;var is=Hi.min(Hi.map(ns.outEdges(as),function(us){return rs(us.w)-ns.edge(us).minlen}));return is!==Number.POSITIVE_INFINITY&&is!=null||(is=0),os.rank=is})},ca=function(ns,ts){return ns.node(ts.w).rank-ns.node(ts.v).rank-ns.edge(ts).minlen},sa=Fo.Graph,da=ca,fa=function(ns){var ts,rs,as=new sa({directed:!1}),os=ns.nodes()[0],is=ns.nodeCount();for(as.setNode(os,{});ha(as,ns)<is;)ts=la(as,ns),rs=as.hasNode(ts.v)?da(ns,ts):-da(ns,ts),va(as,ns,rs);return as};function ha(ns,ts){return Hi.forEach(ns.nodes(),function rs(as){Hi.forEach(ts.nodeEdges(as),function(os){var is=os.v,us=as===is?os.w:is;ns.hasNode(us)||da(ts,os)||(ns.setNode(us,{}),ns.setEdge(as,us,{}),rs(us))})}),ns.nodeCount()}function la(ns,ts){return Hi.minBy(ts.edges(),function(rs){if(ns.hasNode(rs.v)!==ns.hasNode(rs.w))return da(ts,rs)})}function va(ns,ts,rs){Hi.forEach(ns.nodes(),function(as){ts.node(as).rank+=rs})}var pa=ca,ga=ua,ya=Fo.alg.preorder,ba$1=Fo.alg.postorder,ma=ra.simplify,wa=Ea;function Ea(ns){ns=ma(ns),ga(ns);var ts,rs=fa(ns);for(xa(rs),_a(rs,ns);ts=Oa(rs);)Ia(rs,ns,ts,ka(rs,ns,ts))}function _a(ns,ts){var rs=ba$1(ns,ns.nodes());rs=rs.slice(0,rs.length-1),Hi.forEach(rs,function(as){(function(os,is,us){var ls=os.node(us).parent;os.edge(us,ls).cutvalue=ja(os,is,us)})(ns,ts,as)})}function ja(ns,ts,rs){var as=ns.node(rs).parent,os=!0,is=ts.edge(rs,as),us=0;return is||(os=!1,is=ts.edge(as,rs)),us=is.weight,Hi.forEach(ts.nodeEdges(rs),function(ls){var fs,hs,vs=ls.v===rs,gs=vs?ls.w:ls.v;if(gs!==as){var ys=vs===os,xs=ts.edge(ls).weight;if(us+=ys?xs:-xs,fs=rs,hs=gs,ns.hasEdge(fs,hs)){var ms=ns.edge(rs,gs).cutvalue;us+=ys?-ms:ms}}}),us}function xa(ns,ts){arguments.length<2&&(ts=ns.nodes()[0]),Na(ns,{},1,ts)}function Na(ns,ts,rs,as,os){var is=rs,us=ns.node(as);return ts[as]=!0,Hi.forEach(ns.neighbors(as),function(ls){Hi.has(ts,ls)||(rs=Na(ns,ts,rs,ls,as))}),us.low=is,us.lim=rs++,os?us.parent=os:delete us.parent,rs}function Oa(ns){return Hi.find(ns.edges(),function(ts){return ns.edge(ts).cutvalue<0})}function ka(ns,ts,rs){var as=rs.v,os=rs.w;ts.hasEdge(as,os)||(as=rs.w,os=rs.v);var is=ns.node(as),us=ns.node(os),ls=is,fs=!1;is.lim>us.lim&&(ls=us,fs=!0);var hs=Hi.filter(ts.edges(),function(vs){return fs===Sa(ns,ns.node(vs.v),ls)&&fs!==Sa(ns,ns.node(vs.w),ls)});return Hi.minBy(hs,function(vs){return pa(ts,vs)})}function Ia(ns,ts,rs,as){var os=rs.v,is=rs.w;ns.removeEdge(os,is),ns.setEdge(as.v,as.w,{}),xa(ns),_a(ns,ts),function(us,ls){var fs=Hi.find(us.nodes(),function(vs){return!ls.node(vs).parent}),hs=ya(us,fs);hs=hs.slice(1),Hi.forEach(hs,function(vs){var gs=us.node(vs).parent,ys=ls.edge(vs,gs),xs=!1;ys||(ys=ls.edge(gs,vs),xs=!0),ls.node(vs).rank=ls.node(gs).rank+(xs?ys.minlen:-ys.minlen)})}(ns,ts)}function Sa(ns,ts,rs){return rs.low<=ts.lim&&ts.lim<=rs.lim}Ea.initLowLimValues=xa,Ea.initCutValues=_a,Ea.calcCutValue=ja,Ea.leaveEdge=Oa,Ea.enterEdge=ka,Ea.exchangeEdges=Ia;var Ma=ua,Ca=function(ns){switch(ns.graph().ranker){case"network-simplex":Ba(ns);break;case"tight-tree":(function(ts){Ma(ts),fa(ts)})(ns);break;case"longest-path":Ga(ns);break;default:Ba(ns)}},Ga=Ma;function Ba(ns){wa(ns)}var Aa=function(ns){var ts=function(rs){var as={},os=0;function is(us){var ls=os;Hi.forEach(rs.children(us),is),as[us]={low:ls,lim:os++}}return Hi.forEach(rs.children(),is),as}(ns);Hi.forEach(ns.graph().dummyChains,function(rs){for(var as=ns.node(rs),os=as.edgeObj,is=function(gs,ys,xs,ms){var Ss,Ms,$s=[],bs=[],Cs=Math.min(ys[xs].low,ys[ms].low),As=Math.max(ys[xs].lim,ys[ms].lim);Ss=xs;do Ss=gs.parent(Ss),$s.push(Ss);while(Ss&&(ys[Ss].low>Cs||As>ys[Ss].lim));for(Ms=Ss,Ss=ms;(Ss=gs.parent(Ss))!==Ms;)bs.push(Ss);return{path:$s.concat(bs.reverse()),lca:Ms}}(ns,ts,os.v,os.w),us=is.path,ls=is.lca,fs=0,hs=us[fs],vs=!0;rs!==os.w;){if(as=ns.node(rs),vs){for(;(hs=us[fs])!==ls&&ns.node(hs).maxRank<as.rank;)fs++;hs===ls&&(vs=!1)}if(!vs){for(;fs<us.length-1&&ns.node(hs=us[fs+1]).minRank<=as.rank;)fs++;hs=us[fs]}ns.setParent(rs,hs),rs=ns.successors(rs)[0]}})},La={run:function(ns){var ts=ra.addDummyNode(ns,"root",{},"_root"),rs=function(us){var ls={};function fs(hs,vs){var gs=us.children(hs);gs&&gs.length&&Hi.forEach(gs,function(ys){fs(ys,vs+1)}),ls[hs]=vs}return Hi.forEach(us.children(),function(hs){fs(hs,1)}),ls}(ns),as=Hi.max(Hi.values(rs))-1,os=2*as+1;ns.graph().nestingRoot=ts,Hi.forEach(ns.edges(),function(us){ns.edge(us).minlen*=os});var is=function(us){return Hi.reduce(us.edges(),function(ls,fs){return ls+us.edge(fs).weight},0)}(ns)+1;Hi.forEach(ns.children(),function(us){Ra(ns,ts,os,is,as,rs,us)}),ns.graph().nodeRankFactor=os},cleanup:function(ns){var ts=ns.graph();ns.removeNode(ts.nestingRoot),delete ts.nestingRoot,Hi.forEach(ns.edges(),function(rs){ns.edge(rs).nestingEdge&&ns.removeEdge(rs)})}};function Ra(ns,ts,rs,as,os,is,us){var ls=ns.children(us);if(ls.length){var fs=ra.addBorderNode(ns,"_bt"),hs=ra.addBorderNode(ns,"_bb"),vs=ns.node(us);ns.setParent(fs,us),vs.borderTop=fs,ns.setParent(hs,us),vs.borderBottom=hs,Hi.forEach(ls,function(gs){Ra(ns,ts,rs,as,os,is,gs);var ys=ns.node(gs),xs=ys.borderTop?ys.borderTop:gs,ms=ys.borderBottom?ys.borderBottom:gs,Ss=ys.borderTop?as:2*as,Ms=xs!==ms?1:os-is[us]+1;ns.setEdge(fs,xs,{weight:Ss,minlen:Ms,nestingEdge:!0}),ns.setEdge(ms,hs,{weight:Ss,minlen:Ms,nestingEdge:!0})}),ns.parent(us)||ns.setEdge(ts,fs,{weight:0,minlen:os+is[us]})}else us!==ts&&ns.setEdge(ts,us,{weight:0,minlen:rs})}var Ta=function(ns){Hi.forEach(ns.children(),function ts(rs){var as=ns.children(rs),os=ns.node(rs);if(as.length&&Hi.forEach(as,ts),Hi.has(os,"minRank")){os.borderLeft=[],os.borderRight=[];for(var is=os.minRank,us=os.maxRank+1;is<us;++is)Da(ns,"borderLeft","_bl",rs,os,is),Da(ns,"borderRight","_br",rs,os,is)}})};function Da(ns,ts,rs,as,os,is){var us={width:0,height:0,rank:is,borderType:ts},ls=os[ts][is-1],fs=ra.addDummyNode(ns,"border",us,rs);os[ts][is]=fs,ns.setParent(fs,as),ls&&ns.setEdge(ls,fs,{weight:1})}var Pa={adjust:function(ns){var ts=ns.graph().rankdir.toLowerCase();ts!=="lr"&&ts!=="rl"||za(ns)},undo:function(ns){var ts=ns.graph().rankdir.toLowerCase();ts!=="bt"&&ts!=="rl"||function(rs){Hi.forEach(rs.nodes(),function(as){Ua(rs.node(as))}),Hi.forEach(rs.edges(),function(as){var os=rs.edge(as);Hi.forEach(os.points,Ua),Hi.has(os,"y")&&Ua(os)})}(ns),ts!=="lr"&&ts!=="rl"||(function(rs){Hi.forEach(rs.nodes(),function(as){Va(rs.node(as))}),Hi.forEach(rs.edges(),function(as){var os=rs.edge(as);Hi.forEach(os.points,Va),Hi.has(os,"x")&&Va(os)})}(ns),za(ns))}};function za(ns){Hi.forEach(ns.nodes(),function(ts){Fa(ns.node(ts))}),Hi.forEach(ns.edges(),function(ts){Fa(ns.edge(ts))})}function Fa(ns){var ts=ns.width;ns.width=ns.height,ns.height=ts}function Ua(ns){ns.y=-ns.y}function Va(ns){var ts=ns.x;ns.x=ns.y,ns.y=ts}var $a=function(ns){var ts={},rs=Hi.filter(ns.nodes(),function(ls){return!ns.children(ls).length}),as=Hi.max(Hi.map(rs,function(ls){return ns.node(ls).rank})),os=Hi.map(Hi.range(as+1),function(){return[]});function is(ls){if(!Hi.has(ts,ls)){ts[ls]=!0;var fs=ns.node(ls);os[fs.rank].push(ls),Hi.forEach(ns.successors(ls),is)}}var us=Hi.sortBy(rs,function(ls){return ns.node(ls).rank});return Hi.forEach(us,is),os},Ha=function(ns,ts){for(var rs=0,as=1;as<ts.length;++as)rs+=Wa(ns,ts[as-1],ts[as]);return rs};function Wa(ns,ts,rs){for(var as=Hi.zipObject(rs,Hi.map(rs,function(hs,vs){return vs})),os=Hi.flatten(Hi.map(ts,function(hs){return Hi.sortBy(Hi.map(ns.outEdges(hs),function(vs){return{pos:as[vs.w],weight:ns.edge(vs).weight}}),"pos")}),!0),is=1;is<rs.length;)is<<=1;var us=2*is-1;is-=1;var ls=Hi.map(new Array(us),function(){return 0}),fs=0;return Hi.forEach(os.forEach(function(hs){var vs=hs.pos+is;ls[vs]+=hs.weight;for(var gs=0;vs>0;)vs%2&&(gs+=ls[vs+1]),ls[vs=vs-1>>1]+=hs.weight;fs+=hs.weight*gs})),fs}var qa=function(ns,ts){return Hi.map(ts,function(rs){var as=ns.inEdges(rs);if(as.length){var os=Hi.reduce(as,function(is,us){var ls=ns.edge(us),fs=ns.node(us.v);return{sum:is.sum+ls.weight*fs.order,weight:is.weight+ls.weight}},{sum:0,weight:0});return{v:rs,barycenter:os.sum/os.weight,weight:os.weight}}return{v:rs}})},Ya=function(ns,ts){var rs={};return Hi.forEach(ns,function(as,os){var is=rs[as.v]={indegree:0,in:[],out:[],vs:[as.v],i:os};Hi.isUndefined(as.barycenter)||(is.barycenter=as.barycenter,is.weight=as.weight)}),Hi.forEach(ts.edges(),function(as){var os=rs[as.v],is=rs[as.w];Hi.isUndefined(os)||Hi.isUndefined(is)||(is.indegree++,os.out.push(rs[as.w]))}),function(as){var os=[];function is(fs){return function(hs){hs.merged||(Hi.isUndefined(hs.barycenter)||Hi.isUndefined(fs.barycenter)||hs.barycenter>=fs.barycenter)&&function(vs,gs){var ys=0,xs=0;vs.weight&&(ys+=vs.barycenter*vs.weight,xs+=vs.weight),gs.weight&&(ys+=gs.barycenter*gs.weight,xs+=gs.weight),vs.vs=gs.vs.concat(vs.vs),vs.barycenter=ys/xs,vs.weight=xs,vs.i=Math.min(gs.i,vs.i),gs.merged=!0}(fs,hs)}}function us(fs){return function(hs){hs.in.push(fs),--hs.indegree==0&&as.push(hs)}}for(;as.length;){var ls=as.pop();os.push(ls),Hi.forEach(ls.in.reverse(),is(ls)),Hi.forEach(ls.out,us(ls))}return Hi.map(Hi.filter(os,function(fs){return!fs.merged}),function(fs){return Hi.pick(fs,["vs","i","barycenter","weight"])})}(Hi.filter(rs,function(as){return!as.indegree}))},Ja=function(ns,ts){var rs=ra.partition(ns,function(gs){return Hi.has(gs,"barycenter")}),as=rs.lhs,os=Hi.sortBy(rs.rhs,function(gs){return-gs.i}),is=[],us=0,ls=0,fs=0;as.sort((hs=!!ts,function(gs,ys){return gs.barycenter<ys.barycenter?-1:gs.barycenter>ys.barycenter?1:hs?ys.i-gs.i:gs.i-ys.i})),fs=Xa(is,os,fs),Hi.forEach(as,function(gs){fs+=gs.vs.length,is.push(gs.vs),us+=gs.barycenter*gs.weight,ls+=gs.weight,fs=Xa(is,os,fs)});var hs,vs={vs:Hi.flatten(is,!0)};return ls&&(vs.barycenter=us/ls,vs.weight=ls),vs};function Xa(ns,ts,rs){for(var as;ts.length&&(as=Hi.last(ts)).i<=rs;)ts.pop(),ns.push(as.vs),rs++;return rs}var Ka=function ns(ts,rs,as,os){var is=ts.children(rs),us=ts.node(rs),ls=us?us.borderLeft:void 0,fs=us?us.borderRight:void 0,hs={};ls&&(is=Hi.filter(is,function(Ss){return Ss!==ls&&Ss!==fs}));var vs=qa(ts,is);Hi.forEach(vs,function(Ss){if(ts.children(Ss.v).length){var Ms=ns(ts,Ss.v,as,os);hs[Ss.v]=Ms,Hi.has(Ms,"barycenter")&&($s=Ss,bs=Ms,Hi.isUndefined($s.barycenter)?($s.barycenter=bs.barycenter,$s.weight=bs.weight):($s.barycenter=($s.barycenter*$s.weight+bs.barycenter*bs.weight)/($s.weight+bs.weight),$s.weight+=bs.weight))}var $s,bs});var gs=Ya(vs,as);(function(Ss,Ms){Hi.forEach(Ss,function($s){$s.vs=Hi.flatten($s.vs.map(function(bs){return Ms[bs]?Ms[bs].vs:bs}),!0)})})(gs,hs);var ys=Ja(gs,os);if(ls&&(ys.vs=Hi.flatten([ls,ys.vs,fs],!0),ts.predecessors(ls).length)){var xs=ts.node(ts.predecessors(ls)[0]),ms=ts.node(ts.predecessors(fs)[0]);Hi.has(ys,"barycenter")||(ys.barycenter=0,ys.weight=0),ys.barycenter=(ys.barycenter*ys.weight+xs.order+ms.order)/(ys.weight+2),ys.weight+=2}return ys},Qa=Fo.Graph,Za=function(ns,ts,rs){var as=function(is){for(var us;is.hasNode(us=Hi.uniqueId("_root")););return us}(ns),os=new Qa({compound:!0}).setGraph({root:as}).setDefaultNodeLabel(function(is){return ns.node(is)});return Hi.forEach(ns.nodes(),function(is){var us=ns.node(is),ls=ns.parent(is);(us.rank===ts||us.minRank<=ts&&ts<=us.maxRank)&&(os.setNode(is),os.setParent(is,ls||as),Hi.forEach(ns[rs](is),function(fs){var hs=fs.v===is?fs.w:fs.v,vs=os.edge(hs,is),gs=Hi.isUndefined(vs)?0:vs.weight;os.setEdge(hs,is,{weight:ns.edge(fs).weight+gs})}),Hi.has(us,"minRank")&&os.setNode(is,{borderLeft:us.borderLeft[ts],borderRight:us.borderRight[ts]}))}),os},eu=function(ns,ts,rs){var as,os={};Hi.forEach(rs,function(is){for(var us,ls,fs=ns.parent(is);fs;){if((us=ns.parent(fs))?(ls=os[us],os[us]=fs):(ls=as,as=fs),ls&&ls!==fs)return void ts.setEdge(ls,fs);fs=us}})},nu=Fo.Graph,tu=function(ns){var ts=ra.maxRank(ns),rs=ru(ns,Hi.range(1,ts+1),"inEdges"),as=ru(ns,Hi.range(ts-1,-1,-1),"outEdges"),os=$a(ns);iu(ns,os);for(var is,us=Number.POSITIVE_INFINITY,ls=0,fs=0;fs<4;++ls,++fs){ou(ls%2?rs:as,ls%4>=2),os=ra.buildLayerMatrix(ns);var hs=Ha(ns,os);hs<us&&(fs=0,is=Hi.cloneDeep(os),us=hs)}iu(ns,is)};function ru(ns,ts,rs){return Hi.map(ts,function(as){return Za(ns,as,rs)})}function ou(ns,ts){var rs=new nu;Hi.forEach(ns,function(as){var os=as.graph().root,is=Ka(as,os,rs,ts);Hi.forEach(is.vs,function(us,ls){as.node(us).order=ls}),eu(as,rs,is.vs)})}function iu(ns,ts){Hi.forEach(ts,function(rs){Hi.forEach(rs,function(as,os){ns.node(as).order=os})})}var au=Fo.Graph,uu=function(ns){var ts,rs=ra.buildLayerMatrix(ns),as=Hi.merge(cu(ns,rs),su(ns,rs)),os={};Hi.forEach(["u","d"],function(us){ts=us==="u"?rs:Hi.values(rs).reverse(),Hi.forEach(["l","r"],function(ls){ls==="r"&&(ts=Hi.map(ts,function(gs){return Hi.values(gs).reverse()}));var fs=(us==="u"?ns.predecessors:ns.successors).bind(ns),hs=hu(ns,ts,as,fs),vs=lu(ns,ts,hs.root,hs.align,ls==="r");ls==="r"&&(vs=Hi.mapValues(vs,function(gs){return-gs})),os[us+ls]=vs})});var is=vu(ns,os);return pu(os,is),gu(os,ns.graph().align)};function cu(ns,ts){var rs={};return Hi.reduce(ts,function(as,os){var is=0,us=0,ls=as.length,fs=Hi.last(os);return Hi.forEach(os,function(hs,vs){var gs=function(xs,ms){if(xs.node(ms).dummy)return Hi.find(xs.predecessors(ms),function(Ss){return xs.node(Ss).dummy})}(ns,hs),ys=gs?ns.node(gs).order:ls;(gs||hs===fs)&&(Hi.forEach(os.slice(us,vs+1),function(xs){Hi.forEach(ns.predecessors(xs),function(ms){var Ss=ns.node(ms),Ms=Ss.order;!(Ms<is||ys<Ms)||Ss.dummy&&ns.node(xs).dummy||du(rs,ms,xs)})}),us=vs+1,is=ys)}),os}),rs}function su(ns,ts){var rs={};function as(os,is,us,ls,fs){var hs;Hi.forEach(Hi.range(is,us),function(vs){hs=os[vs],ns.node(hs).dummy&&Hi.forEach(ns.predecessors(hs),function(gs){var ys=ns.node(gs);ys.dummy&&(ys.order<ls||ys.order>fs)&&du(rs,gs,hs)})})}return Hi.reduce(ts,function(os,is){var us,ls=-1,fs=0;return Hi.forEach(is,function(hs,vs){if(ns.node(hs).dummy==="border"){var gs=ns.predecessors(hs);gs.length&&(us=ns.node(gs[0]).order,as(is,fs,vs,ls,us),fs=vs,ls=us)}as(is,fs,is.length,us,os.length)}),is}),rs}function du(ns,ts,rs){if(ts>rs){var as=ts;ts=rs,rs=as}var os=ns[ts];os||(ns[ts]=os={}),os[rs]=!0}function fu(ns,ts,rs){if(ts>rs){var as=ts;ts=rs,rs=as}return Hi.has(ns[ts],rs)}function hu(ns,ts,rs,as){var os={},is={},us={};return Hi.forEach(ts,function(ls){Hi.forEach(ls,function(fs,hs){os[fs]=fs,is[fs]=fs,us[fs]=hs})}),Hi.forEach(ts,function(ls){var fs=-1;Hi.forEach(ls,function(hs){var vs=as(hs);if(vs.length)for(var gs=((vs=Hi.sortBy(vs,function(Ss){return us[Ss]})).length-1)/2,ys=Math.floor(gs),xs=Math.ceil(gs);ys<=xs;++ys){var ms=vs[ys];is[hs]===hs&&fs<us[ms]&&!fu(rs,hs,ms)&&(is[ms]=hs,is[hs]=os[hs]=os[ms],fs=us[ms])}})}),{root:os,align:is}}function lu(ns,ts,rs,as,os){var is={},us=function(hs,vs,gs,ys){var xs=new au,ms=hs.graph(),Ss=function(Ms,$s,bs){return function(Cs,As,Is){var ks,Ps=Cs.node(As),Ds=Cs.node(Is),Fs=0;if(Fs+=Ps.width/2,Hi.has(Ps,"labelpos"))switch(Ps.labelpos.toLowerCase()){case"l":ks=-Ps.width/2;break;case"r":ks=Ps.width/2}if(ks&&(Fs+=bs?ks:-ks),ks=0,Fs+=(Ps.dummy?$s:Ms)/2,Fs+=(Ds.dummy?$s:Ms)/2,Fs+=Ds.width/2,Hi.has(Ds,"labelpos"))switch(Ds.labelpos.toLowerCase()){case"l":ks=Ds.width/2;break;case"r":ks=-Ds.width/2}return ks&&(Fs+=bs?ks:-ks),ks=0,Fs}}(ms.nodesep,ms.edgesep,ys);return Hi.forEach(vs,function(Ms){var $s;Hi.forEach(Ms,function(bs){var Cs=gs[bs];if(xs.setNode(Cs),$s){var As=gs[$s],Is=xs.edge(As,Cs);xs.setEdge(As,Cs,Math.max(Ss(hs,bs,$s),Is||0))}$s=bs})}),xs}(ns,ts,rs,os),ls=os?"borderLeft":"borderRight";function fs(hs,vs){for(var gs=us.nodes(),ys=gs.pop(),xs={};ys;)xs[ys]?hs(ys):(xs[ys]=!0,gs.push(ys),gs=gs.concat(vs(ys))),ys=gs.pop()}return fs(function(hs){is[hs]=us.inEdges(hs).reduce(function(vs,gs){return Math.max(vs,is[gs.v]+us.edge(gs))},0)},us.predecessors.bind(us)),fs(function(hs){var vs=us.outEdges(hs).reduce(function(ys,xs){return Math.min(ys,is[xs.w]-us.edge(xs))},Number.POSITIVE_INFINITY),gs=ns.node(hs);vs!==Number.POSITIVE_INFINITY&&gs.borderType!==ls&&(is[hs]=Math.max(is[hs],vs))},us.successors.bind(us)),Hi.forEach(as,function(hs){is[hs]=is[rs[hs]]}),is}function vu(ns,ts){return Hi.minBy(Hi.values(ts),function(rs){var as=Number.NEGATIVE_INFINITY,os=Number.POSITIVE_INFINITY;return Hi.forIn(rs,function(is,us){var ls=function(fs,hs){return fs.node(hs).width}(ns,us)/2;as=Math.max(is+ls,as),os=Math.min(is-ls,os)}),as-os})}function pu(ns,ts){var rs=Hi.values(ts),as=Hi.min(rs),os=Hi.max(rs);Hi.forEach(["u","d"],function(is){Hi.forEach(["l","r"],function(us){var ls,fs=is+us,hs=ns[fs];if(hs!==ts){var vs=Hi.values(hs);(ls=us==="l"?as-Hi.min(vs):os-Hi.max(vs))&&(ns[fs]=Hi.mapValues(hs,function(gs){return gs+ls}))}})})}function gu(ns,ts){return Hi.mapValues(ns.ul,function(rs,as){if(ts)return ns[ts.toLowerCase()][as];var os=Hi.sortBy(Hi.map(ns,as));return(os[1]+os[2])/2})}var yu=uu,bu=function(ns){(function(ts){var rs=ra.buildLayerMatrix(ts),as=ts.graph().ranksep,os=0;Hi.forEach(rs,function(is){var us=Hi.max(Hi.map(is,function(ls){return ts.node(ls).height}));Hi.forEach(is,function(ls){ts.node(ls).y=os+us/2}),os+=us+as})})(ns=ra.asNonCompoundGraph(ns)),Hi.forEach(yu(ns),function(ts,rs){ns.node(rs).x=ts})},mu=ra.normalizeRanks,wu=ra.removeEmptyRanks,Eu=ra,_u=Fo.Graph,ju=function(ns,ts){var rs=ts&&ts.debugTiming?Eu.time:Eu.notime;rs("layout",function(){var as=rs("  buildLayoutGraph",function(){return function(os){var is=new _u({multigraph:!0,compound:!0}),us=Bu(os.graph());return is.setGraph(Hi.merge({},Nu,Gu(us,xu),Hi.pick(us,Ou))),Hi.forEach(os.nodes(),function(ls){var fs=Bu(os.node(ls));is.setNode(ls,Hi.defaults(Gu(fs,ku),Iu)),is.setParent(ls,os.parent(ls))}),Hi.forEach(os.edges(),function(ls){var fs=Bu(os.edge(ls));is.setEdge(ls,Hi.merge({},Mu,Gu(fs,Su),Hi.pick(fs,Cu)))}),is}(ns)});rs("  runLayout",function(){(function(os,is){is("    makeSpaceForEdgeLabels",function(){(function(us){var ls=us.graph();ls.ranksep/=2,Hi.forEach(us.edges(),function(fs){var hs=us.edge(fs);hs.minlen*=2,hs.labelpos.toLowerCase()!=="c"&&(ls.rankdir==="TB"||ls.rankdir==="BT"?hs.width+=hs.labeloffset:hs.height+=hs.labeloffset)})})(os)}),is("    removeSelfEdges",function(){(function(us){Hi.forEach(us.edges(),function(ls){if(ls.v===ls.w){var fs=us.node(ls.v);fs.selfEdges||(fs.selfEdges=[]),fs.selfEdges.push({e:ls,label:us.edge(ls)}),us.removeEdge(ls)}})})(os)}),is("    acyclic",function(){na.run(os)}),is("    nestingGraph.run",function(){La.run(os)}),is("    rank",function(){Ca(Eu.asNonCompoundGraph(os))}),is("    injectEdgeLabelProxies",function(){(function(us){Hi.forEach(us.edges(),function(ls){var fs=us.edge(ls);if(fs.width&&fs.height){var hs=us.node(ls.v),vs={rank:(us.node(ls.w).rank-hs.rank)/2+hs.rank,e:ls};Eu.addDummyNode(us,"edge-proxy",vs,"_ep")}})})(os)}),is("    removeEmptyRanks",function(){wu(os)}),is("    nestingGraph.cleanup",function(){La.cleanup(os)}),is("    normalizeRanks",function(){mu(os)}),is("    assignRankMinMax",function(){(function(us){var ls=0;Hi.forEach(us.nodes(),function(fs){var hs=us.node(fs);hs.borderTop&&(hs.minRank=us.node(hs.borderTop).rank,hs.maxRank=us.node(hs.borderBottom).rank,ls=Hi.max(ls,hs.maxRank))}),us.graph().maxRank=ls})(os)}),is("    removeEdgeLabelProxies",function(){(function(us){Hi.forEach(us.nodes(),function(ls){var fs=us.node(ls);fs.dummy==="edge-proxy"&&(us.edge(fs.e).labelRank=fs.rank,us.removeNode(ls))})})(os)}),is("    normalize.run",function(){aa$1.run(os)}),is("    parentDummyChains",function(){Aa(os)}),is("    addBorderSegments",function(){Ta(os)}),is("    order",function(){tu(os)}),is("    insertSelfEdges",function(){(function(us){var ls=Eu.buildLayerMatrix(us);Hi.forEach(ls,function(fs){var hs=0;Hi.forEach(fs,function(vs,gs){var ys=us.node(vs);ys.order=gs+hs,Hi.forEach(ys.selfEdges,function(xs){Eu.addDummyNode(us,"selfedge",{width:xs.label.width,height:xs.label.height,rank:ys.rank,order:gs+ ++hs,e:xs.e,label:xs.label},"_se")}),delete ys.selfEdges})})})(os)}),is("    adjustCoordinateSystem",function(){Pa.adjust(os)}),is("    position",function(){bu(os)}),is("    positionSelfEdges",function(){(function(us){Hi.forEach(us.nodes(),function(ls){var fs=us.node(ls);if(fs.dummy==="selfedge"){var hs=us.node(fs.e.v),vs=hs.x+hs.width/2,gs=hs.y,ys=fs.x-vs,xs=hs.height/2;us.setEdge(fs.e,fs.label),us.removeNode(ls),fs.label.points=[{x:vs+2*ys/3,y:gs-xs},{x:vs+5*ys/6,y:gs-xs},{x:vs+ys,y:gs},{x:vs+5*ys/6,y:gs+xs},{x:vs+2*ys/3,y:gs+xs}],fs.label.x=fs.x,fs.label.y=fs.y}})})(os)}),is("    removeBorderNodes",function(){(function(us){Hi.forEach(us.nodes(),function(ls){if(us.children(ls).length){var fs=us.node(ls),hs=us.node(fs.borderTop),vs=us.node(fs.borderBottom),gs=us.node(Hi.last(fs.borderLeft)),ys=us.node(Hi.last(fs.borderRight));fs.width=Math.abs(ys.x-gs.x),fs.height=Math.abs(vs.y-hs.y),fs.x=gs.x+fs.width/2,fs.y=hs.y+fs.height/2}}),Hi.forEach(us.nodes(),function(ls){us.node(ls).dummy==="border"&&us.removeNode(ls)})})(os)}),is("    normalize.undo",function(){aa$1.undo(os)}),is("    fixupEdgeLabelCoords",function(){(function(us){Hi.forEach(us.edges(),function(ls){var fs=us.edge(ls);if(Hi.has(fs,"x"))switch(fs.labelpos!=="l"&&fs.labelpos!=="r"||(fs.width-=fs.labeloffset),fs.labelpos){case"l":fs.x-=fs.width/2+fs.labeloffset;break;case"r":fs.x+=fs.width/2+fs.labeloffset}})})(os)}),is("    undoCoordinateSystem",function(){Pa.undo(os)}),is("    translateGraph",function(){(function(us){var ls=Number.POSITIVE_INFINITY,fs=0,hs=Number.POSITIVE_INFINITY,vs=0,gs=us.graph(),ys=gs.marginx||0,xs=gs.marginy||0;function ms(Ss){var Ms=Ss.x,$s=Ss.y,bs=Ss.width,Cs=Ss.height;ls=Math.min(ls,Ms-bs/2),fs=Math.max(fs,Ms+bs/2),hs=Math.min(hs,$s-Cs/2),vs=Math.max(vs,$s+Cs/2)}Hi.forEach(us.nodes(),function(Ss){ms(us.node(Ss))}),Hi.forEach(us.edges(),function(Ss){var Ms=us.edge(Ss);Hi.has(Ms,"x")&&ms(Ms)}),ls-=ys,hs-=xs,Hi.forEach(us.nodes(),function(Ss){var Ms=us.node(Ss);Ms.x-=ls,Ms.y-=hs}),Hi.forEach(us.edges(),function(Ss){var Ms=us.edge(Ss);Hi.forEach(Ms.points,function($s){$s.x-=ls,$s.y-=hs}),Hi.has(Ms,"x")&&(Ms.x-=ls),Hi.has(Ms,"y")&&(Ms.y-=hs)}),gs.width=fs-ls+ys,gs.height=vs-hs+xs})(os)}),is("    assignNodeIntersects",function(){(function(us){Hi.forEach(us.edges(),function(ls){var fs,hs,vs=us.edge(ls),gs=us.node(ls.v),ys=us.node(ls.w);vs.points?(fs=vs.points[0],hs=vs.points[vs.points.length-1]):(vs.points=[],fs=ys,hs=gs),vs.points.unshift(Eu.intersectRect(gs,fs)),vs.points.push(Eu.intersectRect(ys,hs))})})(os)}),is("    reversePoints",function(){(function(us){Hi.forEach(us.edges(),function(ls){var fs=us.edge(ls);fs.reversed&&fs.points.reverse()})})(os)}),is("    acyclic.undo",function(){na.undo(os)})})(as,rs)}),rs("  updateInputGraph",function(){(function(os,is){Hi.forEach(os.nodes(),function(us){var ls=os.node(us),fs=is.node(us);ls&&(ls.x=fs.x,ls.y=fs.y,is.children(us).length&&(ls.width=fs.width,ls.height=fs.height))}),Hi.forEach(os.edges(),function(us){var ls=os.edge(us),fs=is.edge(us);ls.points=fs.points,Hi.has(fs,"x")&&(ls.x=fs.x,ls.y=fs.y)}),os.graph().width=is.graph().width,os.graph().height=is.graph().height})(ns,as)})})},xu=["nodesep","edgesep","ranksep","marginx","marginy"],Nu={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Ou=["acyclicer","ranker","rankdir","align"],ku=["width","height"],Iu={width:0,height:0},Su=["minlen","weight","width","height","labeloffset"],Mu={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Cu=["labelpos"];function Gu(ns,ts){return Hi.mapValues(Hi.pick(ns,ts),Number)}function Bu(ns){var ts={};return Hi.forEach(ns,function(rs,as){ts[as.toLowerCase()]=rs}),ts}var Au=Fo.Graph,Lu={graphlib:Fo,layout:ju,debug:{debugOrdering:function(ns){var ts=ra.buildLayerMatrix(ns),rs=new Au({compound:!0,multigraph:!0}).setGraph({});return Hi.forEach(ns.nodes(),function(as){rs.setNode(as,{label:as}),rs.setParent(as,"layer"+ns.node(as).rank)}),Hi.forEach(ns.edges(),function(as){rs.setEdge(as.v,as.w,{},as.name)}),Hi.forEach(ts,function(as,os){var is="layer"+os;rs.setNode(is,{rank:"same"}),Hi.reduce(as,function(us,ls){return rs.setEdge(us,ls,{style:"invis"}),ls})}),rs}},util:{time:ra.time,notime:ra.notime},version:"0.8.5"},Ru=Lu.graphlib,Tu=Lu.layout;class Du{constructor(ts){this.cardinality=1,this.include=a.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=i.NODE,this.name=ts.name,this.attr=ts.attr||{},this.inputs=ts.inputs,this.path=ts.path||[],this.width=ts.width,this.height=ts.height}}class Pu{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function zu(ns){const ts=new Pu;return ns.nodes.map(rs=>new Du(rs)).forEach(rs=>{ts.nodes[rs.name]=rs,rs.inputs.forEach(as=>{(function(os,is,us){us.name!==is.name&&os.edges.push(Object.assign(Object.assign({},us.attr),{v:us.name,w:is.name}))})(ts,rs,as)})}),ts}class Fu{constructor(ts,rs={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=a.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=i.META,this.path=[],this.name=ts,this.metaGraph=Hu(ts,u$1.META,rs)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(ts=>this.metaGraph.node(ts))}leaves(){let ts,rs=[],as=[this];for(;as.length;){let os=as.shift();os.isGroupNode?(ts=os.metaGraph,ts.nodes().forEach(is=>as.push(ts.node(is)))):rs.push(os.name)}return rs}}class Uu{constructor(ts,rs){this.v=ts,this.w=rs,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(ts,rs){this.baseEdgeList.push(ts)}}function Vu(ns,ts={}){return new Fu(ns,ts)}function $u(ns,ts){return new Uu(ns,ts)}function Hu(ns,ts,rs){const as=rs||{},os=new Ru.Graph(as);return os.setGraph({name:ns,rankdir:as.rankdir,type:ts,align:as.align}),os}class Wu{constructor(ts={}){this.graphOptions=ts,this.index={},this.graphOptions.compound=!0,this.root=Vu(r$1,this.graphOptions),this.index[r$1]=this.root}getNodeMap(){return this.index}node(ts){return this.index[ts]}setNode(ts,rs){this.index[ts]=rs}getBridgeGraph(ts){const rs=this.index[ts];if(!rs)throw Error("Could not find node in hierarchy: "+ts);if(!("metaGraph"in rs))return null;const as=rs;if(as.bridgeGraph)return as.bridgeGraph;const os=Hu(o,u$1.BRIDGE,this.graphOptions);if(as.bridgeGraph=os,!rs.parentNode||!("metaGraph"in rs.parentNode))return os;const is=rs.parentNode;return[is.metaGraph,this.getBridgeGraph(is.name)].forEach(us=>{us.edges().filter(ls=>ls.v===ts||ls.w===ts).forEach(ls=>{const fs=ls.w===ts;us.edge(ls).baseEdgeList.forEach(hs=>{const[vs,gs]=fs?[hs.w,ls.v]:[hs.v,ls.w],ys=this.getChildName(ts,vs),xs={v:fs?gs:ys,w:fs?ys:gs};let ms=os.edge(xs);ms||(ms=$u(xs.v,xs.w),ms.inbound=fs,os.setEdge(xs.v,xs.w,ms)),ms.addBaseEdge(hs,this)})})}),os}getChildName(ts,rs){let as=this.index[rs];for(;as;){if(as.parentNode&&as.parentNode.name===ts)return as.name;as=as.parentNode}throw Error("Could not find immediate child for descendant: "+rs)}getPredecessors(ts){const rs=this.index[ts];if(!rs)throw Error("Could not find node with name: "+ts);return this.getOneWayEdges(rs,!0)}getSuccessors(ts){const rs=this.index[ts];if(!rs)throw Error("Could not find node with name: "+ts);return this.getOneWayEdges(rs,!1)}getOneWayEdges(ts,rs){const as=[];if(!ts.parentNode||!ts.parentNode.isGroupNode)return as;const os=ts.parentNode,is=os.metaGraph,us=this.getBridgeGraph(os.name);return Yu(is,ts,rs,as),Yu(us,ts,rs,as),as}}function qu(ns,ts){const{rankDirection:rs,align:as}=ts,os=new Wu({rankdir:rs,align:as});return function(is,us){Object.keys(us.nodes).forEach(ls=>{const fs=us.nodes[ls],hs=fs.path;let vs=is.root;vs.depth=Math.max(hs.length,vs.depth);for(let gs=0;gs<hs.length&&(vs.depth=Math.max(vs.depth,hs.length-gs),vs.cardinality+=fs.cardinality,gs!==hs.length-1);gs++){const ys=hs[gs];let xs=is.node(ys);xs||(xs=Vu(ys,is.graphOptions),xs.path=fs.path.slice(0,gs+1),xs.parentNode=vs,is.setNode(ys,xs),vs.metaGraph.setNode(ys,xs)),vs=xs}is.setNode(fs.name,fs),fs.parentNode=vs,vs.metaGraph.setNode(fs.name,fs)})}(os,ns),function(is,us){const ls=is.getNodeMap();let fs=[],hs=[];const vs=(gs,ys)=>{let xs=0;for(;gs;)ys[xs++]=gs.name,gs=gs.parentNode;return xs-1};us.edges.forEach(gs=>{fs=[],hs=[];let ys=vs(us.nodes[gs.v],fs),xs=vs(us.nodes[gs.w],hs);for(;fs[ys]===hs[xs];)if(ys--,xs--,ys<0||xs<0)throw Error("No difference found between ancestor paths.");const ms=ls[fs[ys+1]],Ss=fs[ys],Ms=hs[xs];let $s=ms.metaGraph.edge(Ss,Ms);$s||($s=$u(Ss,Ms),ms.metaGraph.setEdge(Ss,Ms,$s)),$s.addBaseEdge(gs,is)})}(os,ns),os}function Yu(ns,ts,rs,as){(rs?ns.inEdges(ts.name):ns.outEdges(ts.name)).forEach(os=>{const is=ns.edge(os);as.push(is)})}class Ju{constructor(ts){this.hierarchy=ts,this.index={},this.hasSubHierarchy={},this.root=new Qu(this.hierarchy.root,this.hierarchy.graphOptions),this.index[ts.root.name]=this.root,this.buildSubHierarchy(ts.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(ts){if(ts in this.hasSubHierarchy)return;this.hasSubHierarchy[ts]=!0;const rs=this.index[ts];if(rs.node.type!==i.META)return;const as=rs,os=as.node.metaGraph,is=as.coreGraph;os.nodes().forEach(vs=>{const gs=this.getOrCreateRenderNodeByName(vs);is.setNode(vs,gs)}),os.edges().forEach(vs=>{const gs=os.edge(vs),ys=new Ku(gs);is.setEdge(vs.v,vs.w,ys)});const us=as.node.parentNode;if(!us)return;const ls=this.getRenderNodeByName(us.name),fs=(vs,...gs)=>gs.concat([vs?"IN":"OUT"]).join("~~"),hs=this.hierarchy.getBridgeGraph(ts);hs.edges().forEach(vs=>{const gs=hs.edge(vs),ys=!!os.node(vs.w),[xs,ms]=ys?[vs.w,vs.v]:[vs.v,vs.w],Ss=Is=>{const ks=ys?{v:Is,w:ts}:{v:ts,w:Is};return ls.coreGraph.edge(ks)};let Ms=Ss(ms);Ms||(Ms=Ss(fs(ys,ms,us.name)));const $s=fs(ys,ts),bs=fs(ys,ms,ts);let Cs=is.node(bs);if(!Cs){let Is=is.node($s);if(!Is){const Ps={name:$s,type:i.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:a.UNSPECIFIED,inbound:ys,attr:{}};Is=new Xu(Ps),this.index[$s]=Is,is.setNode($s,Is)}const ks={name:bs,type:i.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:a.UNSPECIFIED,inbound:ys,attr:{}};Cs=new Xu(ks),this.index[bs]=Cs,is.setNode(bs,Cs),is.setParent(bs,$s),Is.node.cardinality++}const As=new Ku(gs);As.adjoiningMetaEdge=Ms,ys?is.setEdge(bs,xs,As):is.setEdge(xs,bs,As)})}getOrCreateRenderNodeByName(ts){if(!ts)return null;if(ts in this.index)return this.index[ts];const rs=this.getNodeByName(ts);return rs?(this.index[ts]=rs.isGroupNode?new Qu(rs,this.hierarchy.graphOptions):new Xu(rs),this.index[ts]):null}getRenderNodeByName(ts){return this.index[ts]}getNodeByName(ts){return this.hierarchy.node(ts)}}class Xu{constructor(ts){this.node=ts,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=ts.width||0,this.height=ts.height||0,this.displayName=ts.name,this.attr=ts.attr}}class Ku{constructor(ts){this.metaEdge=ts,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class Qu extends Xu{constructor(ts,rs){super(ts);const as=ts.metaGraph.graph();rs.compound=!0,this.coreGraph=Hu(as.name,u$1.CORE,rs)}}function Zu(ns,ts){ns.node.isGroupNode&&function(rs,as){const os=n$1(as);rs.coreGraph.nodes().map(is=>rs.coreGraph.node(is)).forEach(is=>{var us,ls,fs,hs,vs,gs;const{height:ys,width:xs}=is;switch(is.node.type){case i.NODE:Object.assign(is,os.nodeSize.node),is.height=ys||os.nodeSize.node.height,is.width=xs||os.nodeSize.node.width;break;case i.BRIDGE:Object.assign(is,os.nodeSize.bridge);break;case i.META:is.expanded?Zu(is,as):(Object.assign(is,os.nodeSize.meta),is.height=os.nodeSize.meta.height,is.width=os.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+is.node.type)}if(!is.expanded){const ms=is.attr;(function(Ss,Ms=!1){if(Ss.coreBox.width=Ss.width,Ss.coreBox.height=Ss.height,!Ms){const $s=`${Ss.displayName}`.length,bs=3;Ss.width=Math.max(Ss.coreBox.width,$s*bs)}})(is,as&&(is.node.type===0&&!!(!((ls=(us=as==null?void 0:as.nodeSize)===null||us===void 0?void 0:us.meta)===null||ls===void 0)&&ls.width)||is.node.type===1&&(!!(!((hs=(fs=as==null?void 0:as.nodeSize)===null||fs===void 0?void 0:fs.node)===null||hs===void 0)&&hs.width)||!!ms.width)||is.node.type===2&&!!(!((gs=(vs=as==null?void 0:as.nodeSize)===null||vs===void 0?void 0:vs.bridge)===null||gs===void 0)&&gs.width)))}})}(ns,ts),ns.node.type===i.META&&function(rs,as){const os=n$1(as),is=os.subScene.meta;Object.assign(rs,is);const{nodeSep:us,rankSep:ls,edgeSep:fs,align:hs}=os.graph.meta,vs={nodesep:us,ranksep:ls,edgesep:fs,align:hs};Object.assign(rs.coreBox,function(xs,ms){const{ranksep:Ss,nodesep:Ms,edgesep:$s,align:bs}=ms;Object.assign(xs.graph(),{ranksep:Ss,nodesep:Ms,edgesep:$s,align:bs});const Cs=[];if(xs.nodes().forEach(Ds=>{xs.node(Ds).node.type!==i.BRIDGE&&Cs.push(Ds)}),!Cs.length)return{width:0,height:0};Tu(xs);let As=1/0,Is=1/0,ks=-1/0,Ps=-1/0;return Cs.forEach(Ds=>{const Fs=xs.node(Ds),Rs=.5*Fs.width,js=Fs.x-Rs,zs=Fs.x+Rs;As=js<As?js:As,ks=zs>ks?zs:ks;const Us=.5*Fs.height,Ys=Fs.y-Us,Ks=Fs.y+Us;Is=Ys<Is?Ys:Is,Ps=Ks>Ps?Ks:Ps}),xs.edges().forEach(Ds=>{const Fs=xs.edge(Ds),Rs=xs.node(Fs.metaEdge.v),js=xs.node(Fs.metaEdge.w);if(Fs.points.length===3&&function(Ys){let Ks=ec(Ys[0],Ys[1]);for(let qs=1;qs<Ys.length-1;qs++){const _l=ec(Ys[qs],Ys[qs+1]);if(Math.abs(_l-Ks)>1)return!1;Ks=_l}return!0}(Fs.points)){if(Rs!=null){const Ys=Rs.expanded?Rs.x:nc(Rs);Fs.points[0].x=Ys}if(js!=null){const Ys=js.expanded?js.x:nc(js);Fs.points[2].x=Ys}Fs.points=[Fs.points[0],Fs.points[1]]}const zs=Fs.points[Fs.points.length-2];js!=null&&(Fs.points[Fs.points.length-1]=tc(zs,js));const Us=Fs.points[1];Rs!=null&&(Fs.points[0]=tc(Us,Rs)),Fs.points.forEach(Ys=>{As=Ys.x<As?Ys.x:As,ks=Ys.x>ks?Ys.x:ks,Is=Ys.y<Is?Ys.y:Is,Ps=Ys.y>Ps?Ys.y:Ps})}),xs.nodes().forEach(Ds=>{const Fs=xs.node(Ds);Fs.x-=As,Fs.y-=Is}),xs.edges().forEach(Ds=>{xs.edge(Ds).points.forEach(Fs=>{Fs.x-=As,Fs.y-=Is})}),{width:ks-As,height:Ps-Is}}(rs.coreGraph,vs));let gs=0;rs.coreGraph.nodeCount()>0&&gs++;const ys=gs<=1?0:gs;rs.coreBox.width+=ys+ys,rs.coreBox.height=is.labelHeight+rs.coreBox.height,rs.width=rs.coreBox.width+is.paddingLeft+is.paddingRight,rs.height=rs.paddingTop+rs.coreBox.height+rs.paddingBottom}(ns,ts)}function ec(ns,ts){const rs=ts.x-ns.x,as=ts.y-ns.y;return 180*Math.atan(as/rs)/Math.PI}function nc(ns){return ns.expanded?ns.x:ns.x-ns.width/2+0+ns.coreBox.width/2}function tc(ns,ts){const rs=ts.expanded?ts.x:nc(ts),as=ts.y,os=ns.x-rs,is=ns.y-as;let us,ls,fs=ts.expanded?ts.width:ts.coreBox.width,hs=ts.expanded?ts.height:ts.coreBox.height;return Math.abs(is)*fs/2>Math.abs(os)*hs/2?(is<0&&(hs=-hs),us=is===0?0:hs/2*os/is,ls=hs/2):(os<0&&(fs=-fs),us=fs/2,ls=os===0?0:fs/2*is/os),{x:rs+us,y:as+ls}}function rc(ns,ts,rs){var as,os,is,us;const ls=ns.nodes.filter((gs,ys,xs)=>xs.findIndex(ms=>ms.id===gs.id)!==ys).map(gs=>gs.id);if(ls.length)throw new Error(`Duplicated ids found: ${ls.join(", ")}`);const fs=function(gs){const ys={nodes:[]},xs=gs.compound,ms=Object.keys(xs||{}),Ss=new Map,Ms=(bs,Cs=[])=>{if(Ss.has(bs))return Ss.get(bs);for(let As=0;As<ms.length;As++){let Is=ms[As];if(xs&&xs[Is].indexOf(bs)!==-1)return Cs.unshift(Is),Ms(Is,Cs)}return Cs.length===0&&Ss.set(bs,Cs),Cs},$s=bs=>gs.edges.filter(Cs=>Cs.w===bs).map(Cs=>({name:Cs.v}));return gs.nodes.forEach(bs=>{const Cs=bs.id,As=[...Ms(Cs),Cs];let Is=$s(Cs);ys.nodes.push({name:Cs,path:As,inputs:Is,width:bs.width,height:bs.height,attr:Object.assign({},bs)})}),ys}(ns),hs=function(gs,ys){const xs=(Ss,Ms)=>{for(let $s of Ms.values())if($s.includes(Ss))return!0;return!1},ms=(Ss,Ms=[])=>{if(Object.keys(Ss).length===0)return[...new Set(Ms)];const $s=new Map(Object.keys(Ss).map(Cs=>[Cs,Ss[Cs]])),bs={};for(let[Cs,As]of $s)xs(Cs,$s)?bs[Cs]=As:Ms=Ms.concat(Cs,As);return ms(bs,Ms)};return ms(gs).filter(Ss=>ys.includes(Ss))}(ns.compound||{},(ts==null?void 0:ts.expanded)||[]),vs=function(gs,ys){return function(xs){return new Ju(xs)}(qu(zu(gs),ys))}(fs,{rankDirection:((os=(as=rs==null?void 0:rs.graph)===null||as===void 0?void 0:as.meta)===null||os===void 0?void 0:os.rankDir)||(ts==null?void 0:ts.rankDirection)||e.graph.meta.rankDir,align:((us=(is=rs==null?void 0:rs.graph)===null||is===void 0?void 0:is.meta)===null||us===void 0?void 0:us.align)||e.graph.meta.align});return function(gs,ys){ys.forEach(xs=>{const ms=gs.getRenderInfoNodes().find($s=>$s.displayName===xs);let Ss=ms&&ms.node&&ms.node.name||"";const Ms=gs.getRenderNodeByName(Ss);if(!Ms)throw new Error(`No nodes found: ${Ss}`);Ms.expanded=!0,gs.buildSubHierarchy(Ss)})}(vs,hs),Zu(vs.root,rs),ac(vs.root)}function oc(ns,ts=!1){const rs=JSON.parse(JSON.stringify(ns)),as={nodes:[rs],edges:[...rs.edges]};return rs.nodes.forEach(function os(is){(is.type===0||is.type===1)&&as.nodes.push(is),is.type===0&&(as.edges=as.edges.concat(is.edges)),Array.isArray(is.nodes)&&is.nodes.forEach(os)}),ts&&as.nodes.forEach(os=>{const is=as.nodes.find(us=>us.id===os.parentNodeName);if(is){const us=is.x-is.width/2+is.paddingLeft,ls=is.y-is.height/2+is.labelHeight+is.paddingTop;is.id!==r$1&&(os.x+=us,os.y+=ls),os.type===0&&os.edges.forEach(fs=>{fs.points.forEach(hs=>{hs.x+=os.x-os.width/2+os.paddingLeft,hs.y+=os.y-os.height/2+os.labelHeight+os.paddingTop})})}}),as}function ic(ns,ts,rs,as){var os,is;let us=[];const ls=((os=rs.find(gs=>gs.id===ns))===null||os===void 0?void 0:os.path)||[],fs=((is=rs.find(gs=>gs.id===ts))===null||is===void 0?void 0:is.path)||[],hs=[r$1,...ls].slice(0,ls.length).reverse(),vs=[r$1,...fs].slice(0,fs.length);return hs.forEach(gs=>{const ys=rs.find(xs=>xs.id===gs);us=us.concat(ys.edges.filter(xs=>xs.baseEdgeList.some(ms=>ms.v===((as==null?void 0:as.v)||ns)&&ms.w===((as==null?void 0:as.w)||ts))))}),vs.filter(gs=>!hs.includes(gs)).forEach(gs=>{const ys=rs.find(xs=>xs.id===gs);us=us.concat(ys.edges.filter(xs=>xs.baseEdgeList.some(ms=>ms.v===((as==null?void 0:as.v)||ns)&&ms.w===((as==null?void 0:as.w)||ts))))}),us}function ac(ns){const ts=ns.coreGraph.nodes().map(as=>ns.coreGraph.node(as));return Object.assign(Object.assign({},uc(ns)),{expanded:ns.expanded,nodes:ns.expanded?(rs=ts,rs.map(as=>as.node.type===i.META?ac(as):uc(as))):[],edges:ns.expanded?cc(ns):[]});var rs}function uc(ns){return{id:ns.node.name,name:ns.node.name,type:ns.node.type,cardinality:ns.node.cardinality,attr:ns.attr,parentNodeName:ns.node.parentNode?ns.node.parentNode.name:null,coreBox:Object.assign({},ns.coreBox),x:ns.x,y:ns.y,width:ns.width,height:ns.height,radius:ns.radius,labelHeight:ns.labelHeight,labelOffset:ns.labelOffset,outboxWidth:ns.outboxWidth,paddingLeft:ns.paddingLeft,paddingTop:ns.paddingTop,paddingRight:ns.paddingRight,paddingBottom:ns.paddingBottom,path:ns.node.path}}function cc(ns){return ns.coreGraph.edges().map(ts=>({renderInfoEdge:ns.coreGraph.edge(ts),edge:ts})).filter(({renderInfoEdge:ts})=>ts.metaEdge).map(({edge:ts,renderInfoEdge:rs})=>{const as=function(os,is){const us=is.points.map(ls=>Object.assign({},ls));if(is.adjoiningMetaEdge){const ls=is.adjoiningMetaEdge.points,fs=is.metaEdge.inbound,hs=fs?ls[ls.length-1]:ls[0],vs=us[fs?0:us.length-1],gs=os.x-os.width/2,ys=os.y-os.height/2,xs=hs.x-gs,ms=hs.y-ys,Ss=-os.paddingLeft,Ms=-(os.paddingTop+os.labelHeight);vs.x=xs+Ss,vs.y=ms+Ms}return us}(ns,rs);return{adjoiningEdge:rs.adjoiningMetaEdge?{w:rs.adjoiningMetaEdge.metaEdge.w,v:rs.adjoiningMetaEdge.metaEdge.v}:null,inbound:rs.metaEdge.inbound,w:ts.w,v:ts.v,points:as,weight:rs.weight,baseEdgeList:rs.metaEdge.baseEdgeList,parentNodeName:ns.node.name}})}const dagreCompound_es5=Object.freeze(Object.defineProperty({__proto__:null,BRIDGE_GRAPH_NAME:o,get GraphType(){return u$1},get HierarchyNodeType(){return c},get InclusionType(){return a},LAYOUT_CONFIG:e,get NodeType(){return i},ROOT_NAME:r$1,buildGraph:rc,flatGraph:oc,getEdges:ic,mergeConfig:n$1},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(dagreCompound_es5);var __extends$m=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__assign$e=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$e=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$e.apply(this,arguments)},__spreadArray$1=commonjsGlobal&&commonjsGlobal.__spreadArray||function(ns,ts,rs){if(rs||arguments.length===2)for(var as=0,os=ts.length,is;as<os;as++)(is||!(as in ts))&&(is||(is=Array.prototype.slice.call(ts,0,as)),is[as]=ts[as]);return ns.concat(is||Array.prototype.slice.call(ts))};Object.defineProperty(dagreCompound,"__esModule",{value:!0});dagreCompound.DagreCompoundLayout=void 0;var base_1$9=base$1,dagre_compound_1=require$$1,util_1$8=requireUtil(),DagreCompoundLayout=function(ns){__extends$m(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.rankdir="TB",as.nodesep=50,as.edgesep=5,as.ranksep=50,as.controlPoints=!0,as.anchorPoint=!0,as.nodes=[],as.edges=[],as.combos=[],as.onLayoutEnd=function(){},as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},ts.prototype.init=function(rs){var as=rs.hiddenNodes||[],os=rs.hiddenEdges||[],is=rs.hiddenCombos||[];this.nodes=this.getDataByOrder((rs.nodes||[]).concat(as)),this.edges=this.getDataByOrder((rs.edges||[]).concat(os)),this.combos=(rs.combos||[]).concat(is.map(function(us){return __assign$e(__assign$e({},us),{collapsed:!0})}))},ts.prototype.execute=function(){var rs=this,as=rs.nodes,os=rs.edges;if(as){var is=rs.getLayoutConfig(),us=is.graphDef,ls=is.graphOption,fs=is.graphSettings,hs=(0,dagre_compound_1.buildGraph)(us,ls,fs),vs=(0,dagre_compound_1.flatGraph)(hs,!0);return this.updatePosition(vs),rs.onLayoutEnd&&rs.onLayoutEnd(),{nodes:as,edges:os}}},ts.prototype.getNodePath=function(rs){var as=this,os=as.nodes,is=as.combos,us=os.find(function(fs){return fs.id===rs}),ls=function(fs,hs){hs===void 0&&(hs=[]);var vs=is.find(function(gs){return gs.id===fs});return vs?(hs.unshift(fs),vs.parentId?ls(vs.parentId,hs):hs):hs};return us&&us.comboId?ls(us.comboId,[rs]):[rs]},ts.prototype.getLayoutConfig=function(){var rs,as,os,is=this,us=is.nodes,ls=is.edges,fs=is.combos,hs=is.nodeSize,vs=is.rankdir,gs=is.align,ys=is.edgesep,xs=is.nodesep,ms=is.ranksep,Ss=is.settings,Ms=(fs||[]).reduce(function(qs,_l){var Js=us.filter(function(Zs){return Zs.comboId===_l.id}).map(function(Zs){return Zs.id}),Vs=(fs||[]).filter(function(Zs){return Zs.parentId===_l.id}).map(function(Zs){return Zs.id});return(Js.length||Vs.length)&&(qs[_l.id]=__spreadArray$1(__spreadArray$1([],Js,!0),Vs,!0)),qs},{}),$s;hs?(0,util_1$8.isArray)(hs)?$s=function(){return hs}:$s=function(){return[hs,hs]}:$s=function(qs){return qs&&qs.size?(0,util_1$8.isArray)(qs.size)?qs.size:(0,util_1$8.isObject)(qs.size)?[qs.size.width||40,qs.size.height||40]:[qs.size,qs.size]:[40,40]};var bs=function(qs){return qs&&qs.size?(0,util_1$8.isArray)(qs.size)?qs.size:[qs.size,qs.size]:[80,40]},Cs=bs(fs==null?void 0:fs[0]),As=Cs[0],Is=Cs[1],ks=(as=(rs=is.graphSettings)===null||rs===void 0?void 0:rs.subScene)===null||as===void 0?void 0:as.meta,Ps=((os=fs.find(function(qs){return!qs.collapsed}))===null||os===void 0?void 0:os.padding)||[20,20,20,20],Ds=Ps[0],Fs=Ps[1],Rs=Ps[2],js=Ps[3],zs={compound:Ms,nodes:__spreadArray$1([],(us||[]).map(function(qs){var _l=$s(qs),Js=_l[0],Vs=_l[1];return __assign$e(__assign$e({},qs),{width:Js,height:Vs})}),!0),edges:__spreadArray$1([],(ls||[]).map(function(qs){return __assign$e(__assign$e({},qs),{v:qs.source,w:qs.target})}),!0)},Us={expanded:(fs||[]).filter(function(qs){return!qs.collapsed}).map(function(qs){return qs.id})},Ys={graph:{meta:{align:gs,rankDir:vs,nodeSep:xs,edgeSep:ys,rankSep:ms}},subScene:{meta:{paddingTop:Ds||(ks==null?void 0:ks.paddingTop)||20,paddingRight:Fs||(ks==null?void 0:ks.paddingRight)||20,paddingBottom:Rs||(ks==null?void 0:ks.paddingBottom)||20,paddingLeft:js||(ks==null?void 0:ks.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:As,height:Is}}},Ks=(0,dagre_compound_1.mergeConfig)(Ss,__assign$e({},(0,dagre_compound_1.mergeConfig)(Ys,dagre_compound_1.LAYOUT_CONFIG)));return is.graphSettings=Ks,{graphDef:zs,graphOption:Us,graphSettings:Ks}},ts.prototype.updatePosition=function(rs){var as=rs.nodes,os=rs.edges;this.updateNodePosition(as,os),this.updateEdgePosition(as,os)},ts.prototype.getBegin=function(rs,as){var os=this,is=os.begin,us=[0,0];if(is){var ls=1/0,fs=1/0;rs.forEach(function(hs){ls>hs.x&&(ls=hs.x),fs>hs.y&&(fs=hs.y)}),as.forEach(function(hs){hs.points.forEach(function(vs){ls>vs.x&&(ls=vs.x),fs>vs.y&&(fs=vs.y)})}),us[0]=is[0]-ls,us[1]=is[1]-fs}return us},ts.prototype.updateNodePosition=function(rs,as){var os=this,is=os.combos,us=os.nodes,ls=os.edges,fs=os.anchorPoint,hs=os.graphSettings,vs=this.getBegin(rs,as);rs.forEach(function(gs){var ys,xs=gs.x,ms=gs.y,Ss=gs.id,Ms=gs.type,$s=gs.coreBox;if(Ms===dagre_compound_1.HierarchyNodeType.META&&Ss!==dagre_compound_1.ROOT_NAME){var bs=is.findIndex(function(Ps){return Ps.id===Ss}),Cs=(ys=hs==null?void 0:hs.subScene)===null||ys===void 0?void 0:ys.meta;is[bs].offsetX=xs+vs[0],is[bs].offsetY=ms+vs[1],is[bs].fixSize=[$s.width,$s.height],is[bs].fixCollapseSize=[$s.width,$s.height],gs.expanded?is[bs].padding=[Cs==null?void 0:Cs.paddingTop,Cs==null?void 0:Cs.paddingRight,Cs==null?void 0:Cs.paddingBottom,Cs==null?void 0:Cs.paddingLeft]:is[bs].padding=[0,0,0,0]}else if(Ms===dagre_compound_1.HierarchyNodeType.OP){var bs=us.findIndex(function(Ds){return Ds.id===Ss});if(us[bs].x=xs+vs[0],us[bs].y=ms+vs[1],fs){var As=[],Is=as.filter(function(Ds){return Ds.v===Ss}),ks=as.filter(function(Ds){return Ds.w===Ss});Is.length>0&&Is.forEach(function(Ds){var Fs=Ds.points[0],Rs=(Fs.x-xs)/gs.width+.5,js=(Fs.y-ms)/gs.height+.5;As.push([Rs,js]),Ds.baseEdgeList.forEach(function(zs){var Us=ls.find(function(Ys){return Ys.source===zs.v&&Ys.target===zs.w});Us&&(Us.sourceAnchor=As.length-1)})}),ks.length>0&&ks.forEach(function(Ds){var Fs=Ds.points[Ds.points.length-1],Rs=(Fs.x-xs)/gs.width+.5,js=(Fs.y-ms)/gs.height+.5;As.push([Rs,js]),Ds.baseEdgeList.forEach(function(zs){var Us=ls.find(function(Ys){return Ys.source===zs.v&&Ys.target===zs.w});Us&&(Us.targetAnchor=As.length-1)})}),us[bs].anchorPoints=As.length>0?As:us[bs].anchorPoints||[]}}})},ts.prototype.updateEdgePosition=function(rs,as){var os=this,is=os.combos,us=os.edges,ls=os.controlPoints,fs=this.getBegin(rs,as);ls&&(is.forEach(function(hs){hs.inEdges=[],hs.outEdges=[]}),us.forEach(function(hs){var vs,gs,ys,xs,ms=rs.find(function(Ps){return Ps.id===hs.source}),Ss=rs.find(function(Ps){return Ps.id===hs.target}),Ms=[],$s=[];if(ms&&Ss)$s=(0,dagre_compound_1.getEdges)(ms==null?void 0:ms.id,Ss==null?void 0:Ss.id,rs);else if(!ms||!Ss){var bs=os.getNodePath(hs.source),Cs=os.getNodePath(hs.target),As=bs.reverse().slice(ms?0:1).find(function(Ps){return rs.find(function(Ds){return Ds.id===Ps})}),Is=Cs.reverse().slice(Ss?0:1).find(function(Ps){return rs.find(function(Ds){return Ds.id===Ps})});ms=rs.find(function(Ps){return Ps.id===As}),Ss=rs.find(function(Ps){return Ps.id===Is}),$s=(0,dagre_compound_1.getEdges)(ms==null?void 0:ms.id,Ss==null?void 0:Ss.id,rs,{v:hs.source,w:hs.target})}if(Ms=$s.reduce(function(Ps,Ds){return __spreadArray$1(__spreadArray$1([],Ps,!0),Ds.points.map(function(Fs){return __assign$e(__assign$e({},Fs),{x:Fs.x+fs[0],y:Fs.y+fs[1]})}),!0)},[]),Ms=Ms.slice(1,-1),hs.controlPoints=Ms,(Ss==null?void 0:Ss.type)===dagre_compound_1.NodeType.META){var ks=is.findIndex(function(Ps){return Ps.id===(Ss==null?void 0:Ss.id)});if(!is[ks]||!((vs=is[ks].inEdges)===null||vs===void 0)&&vs.some(function(Ps){return Ps.source===ms.id&&Ps.target===Ss.id}))return;(gs=is[ks].inEdges)===null||gs===void 0||gs.push({source:ms.id,target:Ss.id,controlPoints:Ms})}if((ms==null?void 0:ms.type)===dagre_compound_1.NodeType.META){var ks=is.findIndex(function(Ds){return Ds.id===(ms==null?void 0:ms.id)});if(!is[ks]||!((ys=is[ks].outEdges)===null||ys===void 0)&&ys.some(function(Ds){return Ds.source===ms.id&&Ds.target===Ss.id}))return;(xs=is[ks].outEdges)===null||xs===void 0||xs.push({source:ms.id,target:Ss.id,controlPoints:Ms})}}))},ts.prototype.getType=function(){return"dagreCompound"},ts.prototype.getDataByOrder=function(rs){return rs.every(function(as){return as.layoutOrder!==void 0})||rs.forEach(function(as,os){as.layoutOrder=os}),rs.sort(function(as,os){return as.layoutOrder-os.layoutOrder})},ts}(base_1$9.Base);dagreCompound.DagreCompoundLayout=DagreCompoundLayout;var radial$1={},radial={},mds$1={};const toString=Object.prototype.toString;function isAnyArray(ns){const ts=toString.call(ns);return ts.endsWith("Array]")&&!ts.includes("Big")}function max$2(ns){var ts=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(ns))throw new TypeError("input must be an array");if(ns.length===0)throw new TypeError("input must not be empty");var rs=ts.fromIndex,as=rs===void 0?0:rs,os=ts.toIndex,is=os===void 0?ns.length:os;if(as<0||as>=ns.length||!Number.isInteger(as))throw new Error("fromIndex must be a positive integer smaller than length");if(is<=as||is>ns.length||!Number.isInteger(is))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var us=ns[as],ls=as+1;ls<is;ls++)ns[ls]>us&&(us=ns[ls]);return us}function min$1(ns){var ts=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(ns))throw new TypeError("input must be an array");if(ns.length===0)throw new TypeError("input must not be empty");var rs=ts.fromIndex,as=rs===void 0?0:rs,os=ts.toIndex,is=os===void 0?ns.length:os;if(as<0||as>=ns.length||!Number.isInteger(as))throw new Error("fromIndex must be a positive integer smaller than length");if(is<=as||is>ns.length||!Number.isInteger(is))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var us=ns[as],ls=as+1;ls<is;ls++)ns[ls]<us&&(us=ns[ls]);return us}function rescale(ns){var ts=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(isAnyArray(ns)){if(ns.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var rs;if(ts.output!==void 0){if(!isAnyArray(ts.output))throw new TypeError("output option must be an array if specified");rs=ts.output}else rs=new Array(ns.length);var as=min$1(ns),os=max$2(ns);if(as===os)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var is=ts.min,us=is===void 0?ts.autoMinMax?as:0:is,ls=ts.max,fs=ls===void 0?ts.autoMinMax?os:1:ls;if(us>=fs)throw new RangeError("min option must be smaller than max option");for(var hs=(fs-us)/(os-as),vs=0;vs<ns.length;vs++)rs[vs]=(ns[vs]-as)*hs+us;return rs}const indent=" ".repeat(2),indentData=" ".repeat(4);function inspectMatrix(){return inspectMatrixWithOptions(this)}function inspectMatrixWithOptions(ns,ts={}){const{maxRows:rs=15,maxColumns:as=10,maxNumSize:os=8}=ts;return`${ns.constructor.name} {
${indent}[
${indentData}${inspectData(ns,rs,as,os)}
${indent}]
${indent}rows: ${ns.rows}
${indent}columns: ${ns.columns}
}`}function inspectData(ns,ts,rs,as){const{rows:os,columns:is}=ns,us=Math.min(os,ts),ls=Math.min(is,rs),fs=[];for(let hs=0;hs<us;hs++){let vs=[];for(let gs=0;gs<ls;gs++)vs.push(formatNumber(ns.get(hs,gs),as));fs.push(`${vs.join(" ")}`)}return ls!==is&&(fs[fs.length-1]+=` ... ${is-rs} more columns`),us!==os&&fs.push(`... ${os-ts} more rows`),fs.join(`
${indentData}`)}function formatNumber(ns,ts){const rs=String(ns);if(rs.length<=ts)return rs.padEnd(ts," ");const as=ns.toPrecision(ts-2);if(as.length<=ts)return as;const os=ns.toExponential(ts-2),is=os.indexOf("e"),us=os.slice(is);return os.slice(0,ts-us.length)+us}function installMathOperations(ns,ts){ns.prototype.add=function(as){return typeof as=="number"?this.addS(as):this.addM(as)},ns.prototype.addS=function(as){for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)+as);return this},ns.prototype.addM=function(as){if(as=ts.checkMatrix(as),this.rows!==as.rows||this.columns!==as.columns)throw new RangeError("Matrices dimensions must be equal");for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)+as.get(os,is));return this},ns.add=function(as,os){return new ts(as).add(os)},ns.prototype.sub=function(as){return typeof as=="number"?this.subS(as):this.subM(as)},ns.prototype.subS=function(as){for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)-as);return this},ns.prototype.subM=function(as){if(as=ts.checkMatrix(as),this.rows!==as.rows||this.columns!==as.columns)throw new RangeError("Matrices dimensions must be equal");for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)-as.get(os,is));return this},ns.sub=function(as,os){return new ts(as).sub(os)},ns.prototype.subtract=ns.prototype.sub,ns.prototype.subtractS=ns.prototype.subS,ns.prototype.subtractM=ns.prototype.subM,ns.subtract=ns.sub,ns.prototype.mul=function(as){return typeof as=="number"?this.mulS(as):this.mulM(as)},ns.prototype.mulS=function(as){for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)*as);return this},ns.prototype.mulM=function(as){if(as=ts.checkMatrix(as),this.rows!==as.rows||this.columns!==as.columns)throw new RangeError("Matrices dimensions must be equal");for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)*as.get(os,is));return this},ns.mul=function(as,os){return new ts(as).mul(os)},ns.prototype.multiply=ns.prototype.mul,ns.prototype.multiplyS=ns.prototype.mulS,ns.prototype.multiplyM=ns.prototype.mulM,ns.multiply=ns.mul,ns.prototype.div=function(as){return typeof as=="number"?this.divS(as):this.divM(as)},ns.prototype.divS=function(as){for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)/as);return this},ns.prototype.divM=function(as){if(as=ts.checkMatrix(as),this.rows!==as.rows||this.columns!==as.columns)throw new RangeError("Matrices dimensions must be equal");for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)/as.get(os,is));return this},ns.div=function(as,os){return new ts(as).div(os)},ns.prototype.divide=ns.prototype.div,ns.prototype.divideS=ns.prototype.divS,ns.prototype.divideM=ns.prototype.divM,ns.divide=ns.div,ns.prototype.mod=function(as){return typeof as=="number"?this.modS(as):this.modM(as)},ns.prototype.modS=function(as){for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)%as);return this},ns.prototype.modM=function(as){if(as=ts.checkMatrix(as),this.rows!==as.rows||this.columns!==as.columns)throw new RangeError("Matrices dimensions must be equal");for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)%as.get(os,is));return this},ns.mod=function(as,os){return new ts(as).mod(os)},ns.prototype.modulus=ns.prototype.mod,ns.prototype.modulusS=ns.prototype.modS,ns.prototype.modulusM=ns.prototype.modM,ns.modulus=ns.mod,ns.prototype.and=function(as){return typeof as=="number"?this.andS(as):this.andM(as)},ns.prototype.andS=function(as){for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)&as);return this},ns.prototype.andM=function(as){if(as=ts.checkMatrix(as),this.rows!==as.rows||this.columns!==as.columns)throw new RangeError("Matrices dimensions must be equal");for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)&as.get(os,is));return this},ns.and=function(as,os){return new ts(as).and(os)},ns.prototype.or=function(as){return typeof as=="number"?this.orS(as):this.orM(as)},ns.prototype.orS=function(as){for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)|as);return this},ns.prototype.orM=function(as){if(as=ts.checkMatrix(as),this.rows!==as.rows||this.columns!==as.columns)throw new RangeError("Matrices dimensions must be equal");for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)|as.get(os,is));return this},ns.or=function(as,os){return new ts(as).or(os)},ns.prototype.xor=function(as){return typeof as=="number"?this.xorS(as):this.xorM(as)},ns.prototype.xorS=function(as){for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)^as);return this},ns.prototype.xorM=function(as){if(as=ts.checkMatrix(as),this.rows!==as.rows||this.columns!==as.columns)throw new RangeError("Matrices dimensions must be equal");for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)^as.get(os,is));return this},ns.xor=function(as,os){return new ts(as).xor(os)},ns.prototype.leftShift=function(as){return typeof as=="number"?this.leftShiftS(as):this.leftShiftM(as)},ns.prototype.leftShiftS=function(as){for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)<<as);return this},ns.prototype.leftShiftM=function(as){if(as=ts.checkMatrix(as),this.rows!==as.rows||this.columns!==as.columns)throw new RangeError("Matrices dimensions must be equal");for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)<<as.get(os,is));return this},ns.leftShift=function(as,os){return new ts(as).leftShift(os)},ns.prototype.signPropagatingRightShift=function(as){return typeof as=="number"?this.signPropagatingRightShiftS(as):this.signPropagatingRightShiftM(as)},ns.prototype.signPropagatingRightShiftS=function(as){for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)>>as);return this},ns.prototype.signPropagatingRightShiftM=function(as){if(as=ts.checkMatrix(as),this.rows!==as.rows||this.columns!==as.columns)throw new RangeError("Matrices dimensions must be equal");for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)>>as.get(os,is));return this},ns.signPropagatingRightShift=function(as,os){return new ts(as).signPropagatingRightShift(os)},ns.prototype.rightShift=function(as){return typeof as=="number"?this.rightShiftS(as):this.rightShiftM(as)},ns.prototype.rightShiftS=function(as){for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)>>>as);return this},ns.prototype.rightShiftM=function(as){if(as=ts.checkMatrix(as),this.rows!==as.rows||this.columns!==as.columns)throw new RangeError("Matrices dimensions must be equal");for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,this.get(os,is)>>>as.get(os,is));return this},ns.rightShift=function(as,os){return new ts(as).rightShift(os)},ns.prototype.zeroFillRightShift=ns.prototype.rightShift,ns.prototype.zeroFillRightShiftS=ns.prototype.rightShiftS,ns.prototype.zeroFillRightShiftM=ns.prototype.rightShiftM,ns.zeroFillRightShift=ns.rightShift,ns.prototype.not=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,~this.get(as,os));return this},ns.not=function(as){return new ts(as).not()},ns.prototype.abs=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.abs(this.get(as,os)));return this},ns.abs=function(as){return new ts(as).abs()},ns.prototype.acos=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.acos(this.get(as,os)));return this},ns.acos=function(as){return new ts(as).acos()},ns.prototype.acosh=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.acosh(this.get(as,os)));return this},ns.acosh=function(as){return new ts(as).acosh()},ns.prototype.asin=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.asin(this.get(as,os)));return this},ns.asin=function(as){return new ts(as).asin()},ns.prototype.asinh=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.asinh(this.get(as,os)));return this},ns.asinh=function(as){return new ts(as).asinh()},ns.prototype.atan=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.atan(this.get(as,os)));return this},ns.atan=function(as){return new ts(as).atan()},ns.prototype.atanh=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.atanh(this.get(as,os)));return this},ns.atanh=function(as){return new ts(as).atanh()},ns.prototype.cbrt=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.cbrt(this.get(as,os)));return this},ns.cbrt=function(as){return new ts(as).cbrt()},ns.prototype.ceil=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.ceil(this.get(as,os)));return this},ns.ceil=function(as){return new ts(as).ceil()},ns.prototype.clz32=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.clz32(this.get(as,os)));return this},ns.clz32=function(as){return new ts(as).clz32()},ns.prototype.cos=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.cos(this.get(as,os)));return this},ns.cos=function(as){return new ts(as).cos()},ns.prototype.cosh=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.cosh(this.get(as,os)));return this},ns.cosh=function(as){return new ts(as).cosh()},ns.prototype.exp=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.exp(this.get(as,os)));return this},ns.exp=function(as){return new ts(as).exp()},ns.prototype.expm1=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.expm1(this.get(as,os)));return this},ns.expm1=function(as){return new ts(as).expm1()},ns.prototype.floor=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.floor(this.get(as,os)));return this},ns.floor=function(as){return new ts(as).floor()},ns.prototype.fround=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.fround(this.get(as,os)));return this},ns.fround=function(as){return new ts(as).fround()},ns.prototype.log=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.log(this.get(as,os)));return this},ns.log=function(as){return new ts(as).log()},ns.prototype.log1p=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.log1p(this.get(as,os)));return this},ns.log1p=function(as){return new ts(as).log1p()},ns.prototype.log10=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.log10(this.get(as,os)));return this},ns.log10=function(as){return new ts(as).log10()},ns.prototype.log2=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.log2(this.get(as,os)));return this},ns.log2=function(as){return new ts(as).log2()},ns.prototype.round=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.round(this.get(as,os)));return this},ns.round=function(as){return new ts(as).round()},ns.prototype.sign=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.sign(this.get(as,os)));return this},ns.sign=function(as){return new ts(as).sign()},ns.prototype.sin=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.sin(this.get(as,os)));return this},ns.sin=function(as){return new ts(as).sin()},ns.prototype.sinh=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.sinh(this.get(as,os)));return this},ns.sinh=function(as){return new ts(as).sinh()},ns.prototype.sqrt=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.sqrt(this.get(as,os)));return this},ns.sqrt=function(as){return new ts(as).sqrt()},ns.prototype.tan=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.tan(this.get(as,os)));return this},ns.tan=function(as){return new ts(as).tan()},ns.prototype.tanh=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.tanh(this.get(as,os)));return this},ns.tanh=function(as){return new ts(as).tanh()},ns.prototype.trunc=function(){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.set(as,os,Math.trunc(this.get(as,os)));return this},ns.trunc=function(as){return new ts(as).trunc()},ns.pow=function(as,os){return new ts(as).pow(os)},ns.prototype.pow=function(as){return typeof as=="number"?this.powS(as):this.powM(as)},ns.prototype.powS=function(as){for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,Math.pow(this.get(os,is),as));return this},ns.prototype.powM=function(as){if(as=ts.checkMatrix(as),this.rows!==as.rows||this.columns!==as.columns)throw new RangeError("Matrices dimensions must be equal");for(let os=0;os<this.rows;os++)for(let is=0;is<this.columns;is++)this.set(os,is,Math.pow(this.get(os,is),as.get(os,is)));return this}}function checkRowIndex(ns,ts,rs){let as=rs?ns.rows:ns.rows-1;if(ts<0||ts>as)throw new RangeError("Row index out of range")}function checkColumnIndex(ns,ts,rs){let as=rs?ns.columns:ns.columns-1;if(ts<0||ts>as)throw new RangeError("Column index out of range")}function checkRowVector(ns,ts){if(ts.to1DArray&&(ts=ts.to1DArray()),ts.length!==ns.columns)throw new RangeError("vector size must be the same as the number of columns");return ts}function checkColumnVector(ns,ts){if(ts.to1DArray&&(ts=ts.to1DArray()),ts.length!==ns.rows)throw new RangeError("vector size must be the same as the number of rows");return ts}function checkIndices(ns,ts,rs){return{row:checkRowIndices(ns,ts),column:checkColumnIndices(ns,rs)}}function checkRowIndices(ns,ts){if(typeof ts!="object")throw new TypeError("unexpected type for row indices");if(ts.some(as=>as<0||as>=ns.rows))throw new RangeError("row indices are out of range");return Array.isArray(ts)||(ts=Array.from(ts)),ts}function checkColumnIndices(ns,ts){if(typeof ts!="object")throw new TypeError("unexpected type for column indices");if(ts.some(as=>as<0||as>=ns.columns))throw new RangeError("column indices are out of range");return Array.isArray(ts)||(ts=Array.from(ts)),ts}function checkRange(ns,ts,rs,as,os){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(checkNumber("startRow",ts),checkNumber("endRow",rs),checkNumber("startColumn",as),checkNumber("endColumn",os),ts>rs||as>os||ts<0||ts>=ns.rows||rs<0||rs>=ns.rows||as<0||as>=ns.columns||os<0||os>=ns.columns)throw new RangeError("Submatrix indices are out of range")}function newArray(ns,ts=0){let rs=[];for(let as=0;as<ns;as++)rs.push(ts);return rs}function checkNumber(ns,ts){if(typeof ts!="number")throw new TypeError(`${ns} must be a number`)}function sumByRow(ns){let ts=newArray(ns.rows);for(let rs=0;rs<ns.rows;++rs)for(let as=0;as<ns.columns;++as)ts[rs]+=ns.get(rs,as);return ts}function sumByColumn(ns){let ts=newArray(ns.columns);for(let rs=0;rs<ns.rows;++rs)for(let as=0;as<ns.columns;++as)ts[as]+=ns.get(rs,as);return ts}function sumAll(ns){let ts=0;for(let rs=0;rs<ns.rows;rs++)for(let as=0;as<ns.columns;as++)ts+=ns.get(rs,as);return ts}function productByRow(ns){let ts=newArray(ns.rows,1);for(let rs=0;rs<ns.rows;++rs)for(let as=0;as<ns.columns;++as)ts[rs]*=ns.get(rs,as);return ts}function productByColumn(ns){let ts=newArray(ns.columns,1);for(let rs=0;rs<ns.rows;++rs)for(let as=0;as<ns.columns;++as)ts[as]*=ns.get(rs,as);return ts}function productAll(ns){let ts=1;for(let rs=0;rs<ns.rows;rs++)for(let as=0;as<ns.columns;as++)ts*=ns.get(rs,as);return ts}function varianceByRow(ns,ts,rs){const as=ns.rows,os=ns.columns,is=[];for(let us=0;us<as;us++){let ls=0,fs=0,hs=0;for(let vs=0;vs<os;vs++)hs=ns.get(us,vs)-rs[us],ls+=hs,fs+=hs*hs;ts?is.push((fs-ls*ls/os)/(os-1)):is.push((fs-ls*ls/os)/os)}return is}function varianceByColumn(ns,ts,rs){const as=ns.rows,os=ns.columns,is=[];for(let us=0;us<os;us++){let ls=0,fs=0,hs=0;for(let vs=0;vs<as;vs++)hs=ns.get(vs,us)-rs[us],ls+=hs,fs+=hs*hs;ts?is.push((fs-ls*ls/as)/(as-1)):is.push((fs-ls*ls/as)/as)}return is}function varianceAll(ns,ts,rs){const as=ns.rows,os=ns.columns,is=as*os;let us=0,ls=0,fs=0;for(let hs=0;hs<as;hs++)for(let vs=0;vs<os;vs++)fs=ns.get(hs,vs)-rs,us+=fs,ls+=fs*fs;return ts?(ls-us*us/is)/(is-1):(ls-us*us/is)/is}function centerByRow(ns,ts){for(let rs=0;rs<ns.rows;rs++)for(let as=0;as<ns.columns;as++)ns.set(rs,as,ns.get(rs,as)-ts[rs])}function centerByColumn(ns,ts){for(let rs=0;rs<ns.rows;rs++)for(let as=0;as<ns.columns;as++)ns.set(rs,as,ns.get(rs,as)-ts[as])}function centerAll(ns,ts){for(let rs=0;rs<ns.rows;rs++)for(let as=0;as<ns.columns;as++)ns.set(rs,as,ns.get(rs,as)-ts)}function getScaleByRow(ns){const ts=[];for(let rs=0;rs<ns.rows;rs++){let as=0;for(let os=0;os<ns.columns;os++)as+=Math.pow(ns.get(rs,os),2)/(ns.columns-1);ts.push(Math.sqrt(as))}return ts}function scaleByRow(ns,ts){for(let rs=0;rs<ns.rows;rs++)for(let as=0;as<ns.columns;as++)ns.set(rs,as,ns.get(rs,as)/ts[rs])}function getScaleByColumn(ns){const ts=[];for(let rs=0;rs<ns.columns;rs++){let as=0;for(let os=0;os<ns.rows;os++)as+=Math.pow(ns.get(os,rs),2)/(ns.rows-1);ts.push(Math.sqrt(as))}return ts}function scaleByColumn(ns,ts){for(let rs=0;rs<ns.rows;rs++)for(let as=0;as<ns.columns;as++)ns.set(rs,as,ns.get(rs,as)/ts[as])}function getScaleAll(ns){const ts=ns.size-1;let rs=0;for(let as=0;as<ns.columns;as++)for(let os=0;os<ns.rows;os++)rs+=Math.pow(ns.get(os,as),2)/ts;return Math.sqrt(rs)}function scaleAll(ns,ts){for(let rs=0;rs<ns.rows;rs++)for(let as=0;as<ns.columns;as++)ns.set(rs,as,ns.get(rs,as)/ts)}class AbstractMatrix{static from1DArray(ts,rs,as){if(ts*rs!==as.length)throw new RangeError("data length does not match given dimensions");let is=new Matrix(ts,rs);for(let us=0;us<ts;us++)for(let ls=0;ls<rs;ls++)is.set(us,ls,as[us*rs+ls]);return is}static rowVector(ts){let rs=new Matrix(1,ts.length);for(let as=0;as<ts.length;as++)rs.set(0,as,ts[as]);return rs}static columnVector(ts){let rs=new Matrix(ts.length,1);for(let as=0;as<ts.length;as++)rs.set(as,0,ts[as]);return rs}static zeros(ts,rs){return new Matrix(ts,rs)}static ones(ts,rs){return new Matrix(ts,rs).fill(1)}static rand(ts,rs,as={}){if(typeof as!="object")throw new TypeError("options must be an object");const{random:os=Math.random}=as;let is=new Matrix(ts,rs);for(let us=0;us<ts;us++)for(let ls=0;ls<rs;ls++)is.set(us,ls,os());return is}static randInt(ts,rs,as={}){if(typeof as!="object")throw new TypeError("options must be an object");const{min:os=0,max:is=1e3,random:us=Math.random}=as;if(!Number.isInteger(os))throw new TypeError("min must be an integer");if(!Number.isInteger(is))throw new TypeError("max must be an integer");if(os>=is)throw new RangeError("min must be smaller than max");let ls=is-os,fs=new Matrix(ts,rs);for(let hs=0;hs<ts;hs++)for(let vs=0;vs<rs;vs++){let gs=os+Math.round(us()*ls);fs.set(hs,vs,gs)}return fs}static eye(ts,rs,as){rs===void 0&&(rs=ts),as===void 0&&(as=1);let os=Math.min(ts,rs),is=this.zeros(ts,rs);for(let us=0;us<os;us++)is.set(us,us,as);return is}static diag(ts,rs,as){let os=ts.length;rs===void 0&&(rs=os),as===void 0&&(as=rs);let is=Math.min(os,rs,as),us=this.zeros(rs,as);for(let ls=0;ls<is;ls++)us.set(ls,ls,ts[ls]);return us}static min(ts,rs){ts=this.checkMatrix(ts),rs=this.checkMatrix(rs);let as=ts.rows,os=ts.columns,is=new Matrix(as,os);for(let us=0;us<as;us++)for(let ls=0;ls<os;ls++)is.set(us,ls,Math.min(ts.get(us,ls),rs.get(us,ls)));return is}static max(ts,rs){ts=this.checkMatrix(ts),rs=this.checkMatrix(rs);let as=ts.rows,os=ts.columns,is=new this(as,os);for(let us=0;us<as;us++)for(let ls=0;ls<os;ls++)is.set(us,ls,Math.max(ts.get(us,ls),rs.get(us,ls)));return is}static checkMatrix(ts){return AbstractMatrix.isMatrix(ts)?ts:new Matrix(ts)}static isMatrix(ts){return ts!=null&&ts.klass==="Matrix"}get size(){return this.rows*this.columns}apply(ts){if(typeof ts!="function")throw new TypeError("callback must be a function");for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)ts.call(this,rs,as);return this}to1DArray(){let ts=[];for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)ts.push(this.get(rs,as));return ts}to2DArray(){let ts=[];for(let rs=0;rs<this.rows;rs++){ts.push([]);for(let as=0;as<this.columns;as++)ts[rs].push(this.get(rs,as))}return ts}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(let ts=0;ts<this.rows;ts++)for(let rs=0;rs<=ts;rs++)if(this.get(ts,rs)!==this.get(rs,ts))return!1;return!0}return!1}isEchelonForm(){let ts=0,rs=0,as=-1,os=!0,is=!1;for(;ts<this.rows&&os;){for(rs=0,is=!1;rs<this.columns&&is===!1;)this.get(ts,rs)===0?rs++:this.get(ts,rs)===1&&rs>as?(is=!0,as=rs):(os=!1,is=!0);ts++}return os}isReducedEchelonForm(){let ts=0,rs=0,as=-1,os=!0,is=!1;for(;ts<this.rows&&os;){for(rs=0,is=!1;rs<this.columns&&is===!1;)this.get(ts,rs)===0?rs++:this.get(ts,rs)===1&&rs>as?(is=!0,as=rs):(os=!1,is=!0);for(let us=rs+1;us<this.rows;us++)this.get(ts,us)!==0&&(os=!1);ts++}return os}echelonForm(){let ts=this.clone(),rs=0,as=0;for(;rs<ts.rows&&as<ts.columns;){let os=rs;for(let is=rs;is<ts.rows;is++)ts.get(is,as)>ts.get(os,as)&&(os=is);if(ts.get(os,as)===0)as++;else{ts.swapRows(rs,os);let is=ts.get(rs,as);for(let us=as;us<ts.columns;us++)ts.set(rs,us,ts.get(rs,us)/is);for(let us=rs+1;us<ts.rows;us++){let ls=ts.get(us,as)/ts.get(rs,as);ts.set(us,as,0);for(let fs=as+1;fs<ts.columns;fs++)ts.set(us,fs,ts.get(us,fs)-ts.get(rs,fs)*ls)}rs++,as++}}return ts}reducedEchelonForm(){let ts=this.echelonForm(),rs=ts.columns,as=ts.rows,os=as-1;for(;os>=0;)if(ts.maxRow(os)===0)os--;else{let is=0,us=!1;for(;is<as&&us===!1;)ts.get(os,is)===1?us=!0:is++;for(let ls=0;ls<os;ls++){let fs=ts.get(ls,is);for(let hs=is;hs<rs;hs++){let vs=ts.get(ls,hs)-fs*ts.get(os,hs);ts.set(ls,hs,vs)}}os--}return ts}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(ts={}){if(typeof ts!="object")throw new TypeError("options must be an object");const{rows:rs=1,columns:as=1}=ts;if(!Number.isInteger(rs)||rs<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(as)||as<=0)throw new TypeError("columns must be a positive integer");let os=new Matrix(this.rows*rs,this.columns*as);for(let is=0;is<rs;is++)for(let us=0;us<as;us++)os.setSubMatrix(this,this.rows*is,this.columns*us);return os}fill(ts){for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)this.set(rs,as,ts);return this}neg(){return this.mulS(-1)}getRow(ts){checkRowIndex(this,ts);let rs=[];for(let as=0;as<this.columns;as++)rs.push(this.get(ts,as));return rs}getRowVector(ts){return Matrix.rowVector(this.getRow(ts))}setRow(ts,rs){checkRowIndex(this,ts),rs=checkRowVector(this,rs);for(let as=0;as<this.columns;as++)this.set(ts,as,rs[as]);return this}swapRows(ts,rs){checkRowIndex(this,ts),checkRowIndex(this,rs);for(let as=0;as<this.columns;as++){let os=this.get(ts,as);this.set(ts,as,this.get(rs,as)),this.set(rs,as,os)}return this}getColumn(ts){checkColumnIndex(this,ts);let rs=[];for(let as=0;as<this.rows;as++)rs.push(this.get(as,ts));return rs}getColumnVector(ts){return Matrix.columnVector(this.getColumn(ts))}setColumn(ts,rs){checkColumnIndex(this,ts),rs=checkColumnVector(this,rs);for(let as=0;as<this.rows;as++)this.set(as,ts,rs[as]);return this}swapColumns(ts,rs){checkColumnIndex(this,ts),checkColumnIndex(this,rs);for(let as=0;as<this.rows;as++){let os=this.get(as,ts);this.set(as,ts,this.get(as,rs)),this.set(as,rs,os)}return this}addRowVector(ts){ts=checkRowVector(this,ts);for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)this.set(rs,as,this.get(rs,as)+ts[as]);return this}subRowVector(ts){ts=checkRowVector(this,ts);for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)this.set(rs,as,this.get(rs,as)-ts[as]);return this}mulRowVector(ts){ts=checkRowVector(this,ts);for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)this.set(rs,as,this.get(rs,as)*ts[as]);return this}divRowVector(ts){ts=checkRowVector(this,ts);for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)this.set(rs,as,this.get(rs,as)/ts[as]);return this}addColumnVector(ts){ts=checkColumnVector(this,ts);for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)this.set(rs,as,this.get(rs,as)+ts[rs]);return this}subColumnVector(ts){ts=checkColumnVector(this,ts);for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)this.set(rs,as,this.get(rs,as)-ts[rs]);return this}mulColumnVector(ts){ts=checkColumnVector(this,ts);for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)this.set(rs,as,this.get(rs,as)*ts[rs]);return this}divColumnVector(ts){ts=checkColumnVector(this,ts);for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)this.set(rs,as,this.get(rs,as)/ts[rs]);return this}mulRow(ts,rs){checkRowIndex(this,ts);for(let as=0;as<this.columns;as++)this.set(ts,as,this.get(ts,as)*rs);return this}mulColumn(ts,rs){checkColumnIndex(this,ts);for(let as=0;as<this.rows;as++)this.set(as,ts,this.get(as,ts)*rs);return this}max(){let ts=this.get(0,0);for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)this.get(rs,as)>ts&&(ts=this.get(rs,as));return ts}maxIndex(){let ts=this.get(0,0),rs=[0,0];for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.get(as,os)>ts&&(ts=this.get(as,os),rs[0]=as,rs[1]=os);return rs}min(){let ts=this.get(0,0);for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)this.get(rs,as)<ts&&(ts=this.get(rs,as));return ts}minIndex(){let ts=this.get(0,0),rs=[0,0];for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)this.get(as,os)<ts&&(ts=this.get(as,os),rs[0]=as,rs[1]=os);return rs}maxRow(ts){checkRowIndex(this,ts);let rs=this.get(ts,0);for(let as=1;as<this.columns;as++)this.get(ts,as)>rs&&(rs=this.get(ts,as));return rs}maxRowIndex(ts){checkRowIndex(this,ts);let rs=this.get(ts,0),as=[ts,0];for(let os=1;os<this.columns;os++)this.get(ts,os)>rs&&(rs=this.get(ts,os),as[1]=os);return as}minRow(ts){checkRowIndex(this,ts);let rs=this.get(ts,0);for(let as=1;as<this.columns;as++)this.get(ts,as)<rs&&(rs=this.get(ts,as));return rs}minRowIndex(ts){checkRowIndex(this,ts);let rs=this.get(ts,0),as=[ts,0];for(let os=1;os<this.columns;os++)this.get(ts,os)<rs&&(rs=this.get(ts,os),as[1]=os);return as}maxColumn(ts){checkColumnIndex(this,ts);let rs=this.get(0,ts);for(let as=1;as<this.rows;as++)this.get(as,ts)>rs&&(rs=this.get(as,ts));return rs}maxColumnIndex(ts){checkColumnIndex(this,ts);let rs=this.get(0,ts),as=[0,ts];for(let os=1;os<this.rows;os++)this.get(os,ts)>rs&&(rs=this.get(os,ts),as[0]=os);return as}minColumn(ts){checkColumnIndex(this,ts);let rs=this.get(0,ts);for(let as=1;as<this.rows;as++)this.get(as,ts)<rs&&(rs=this.get(as,ts));return rs}minColumnIndex(ts){checkColumnIndex(this,ts);let rs=this.get(0,ts),as=[0,ts];for(let os=1;os<this.rows;os++)this.get(os,ts)<rs&&(rs=this.get(os,ts),as[0]=os);return as}diag(){let ts=Math.min(this.rows,this.columns),rs=[];for(let as=0;as<ts;as++)rs.push(this.get(as,as));return rs}norm(ts="frobenius"){let rs=0;if(ts==="max")return this.max();if(ts==="frobenius"){for(let as=0;as<this.rows;as++)for(let os=0;os<this.columns;os++)rs=rs+this.get(as,os)*this.get(as,os);return Math.sqrt(rs)}else throw new RangeError(`unknown norm type: ${ts}`)}cumulativeSum(){let ts=0;for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)ts+=this.get(rs,as),this.set(rs,as,ts);return this}dot(ts){AbstractMatrix.isMatrix(ts)&&(ts=ts.to1DArray());let rs=this.to1DArray();if(rs.length!==ts.length)throw new RangeError("vectors do not have the same size");let as=0;for(let os=0;os<rs.length;os++)as+=rs[os]*ts[os];return as}mmul(ts){ts=Matrix.checkMatrix(ts);let rs=this.rows,as=this.columns,os=ts.columns,is=new Matrix(rs,os),us=new Float64Array(as);for(let ls=0;ls<os;ls++){for(let fs=0;fs<as;fs++)us[fs]=ts.get(fs,ls);for(let fs=0;fs<rs;fs++){let hs=0;for(let vs=0;vs<as;vs++)hs+=this.get(fs,vs)*us[vs];is.set(fs,ls,hs)}}return is}strassen2x2(ts){ts=Matrix.checkMatrix(ts);let rs=new Matrix(2,2);const as=this.get(0,0),os=ts.get(0,0),is=this.get(0,1),us=ts.get(0,1),ls=this.get(1,0),fs=ts.get(1,0),hs=this.get(1,1),vs=ts.get(1,1),gs=(as+hs)*(os+vs),ys=(ls+hs)*os,xs=as*(us-vs),ms=hs*(fs-os),Ss=(as+is)*vs,Ms=(ls-as)*(os+us),$s=(is-hs)*(fs+vs),bs=gs+ms-Ss+$s,Cs=xs+Ss,As=ys+ms,Is=gs-ys+xs+Ms;return rs.set(0,0,bs),rs.set(0,1,Cs),rs.set(1,0,As),rs.set(1,1,Is),rs}strassen3x3(ts){ts=Matrix.checkMatrix(ts);let rs=new Matrix(3,3);const as=this.get(0,0),os=this.get(0,1),is=this.get(0,2),us=this.get(1,0),ls=this.get(1,1),fs=this.get(1,2),hs=this.get(2,0),vs=this.get(2,1),gs=this.get(2,2),ys=ts.get(0,0),xs=ts.get(0,1),ms=ts.get(0,2),Ss=ts.get(1,0),Ms=ts.get(1,1),$s=ts.get(1,2),bs=ts.get(2,0),Cs=ts.get(2,1),As=ts.get(2,2),Is=(as+os+is-us-ls-vs-gs)*Ms,ks=(as-us)*(-xs+Ms),Ps=ls*(-ys+xs+Ss-Ms-$s-bs+As),Ds=(-as+us+ls)*(ys-xs+Ms),Fs=(us+ls)*(-ys+xs),Rs=as*ys,js=(-as+hs+vs)*(ys-ms+$s),zs=(-as+hs)*(ms-$s),Us=(hs+vs)*(-ys+ms),Ys=(as+os+is-ls-fs-hs-vs)*$s,Ks=vs*(-ys+ms+Ss-Ms-$s-bs+Cs),qs=(-is+vs+gs)*(Ms+bs-Cs),_l=(is-gs)*(Ms-Cs),Js=is*bs,Vs=(vs+gs)*(-bs+Cs),Zs=(-is+ls+fs)*($s+bs-As),Sl=(is-fs)*($s-As),Il=(ls+fs)*(-bs+As),Nl=os*Ss,Tl=fs*Cs,_c=us*ms,l0=hs*xs,g0=gs*As,R0=Rs+Js+Nl,V0=Is+Ds+Fs+Rs+qs+Js+Vs,U0=Rs+js+Us+Ys+Js+Zs+Il,tv=ks+Ps+Ds+Rs+Js+Zs+Sl,Os=ks+Ds+Fs+Rs+Tl,ov=Js+Zs+Sl+Il+_c,$v=Rs+js+zs+Ks+qs+_l+Js,Lv=qs+_l+Js+Vs+l0,Jv=Rs+js+zs+Us+g0;return rs.set(0,0,R0),rs.set(0,1,V0),rs.set(0,2,U0),rs.set(1,0,tv),rs.set(1,1,Os),rs.set(1,2,ov),rs.set(2,0,$v),rs.set(2,1,Lv),rs.set(2,2,Jv),rs}mmulStrassen(ts){ts=Matrix.checkMatrix(ts);let rs=this.clone(),as=rs.rows,os=rs.columns,is=ts.rows,us=ts.columns;os!==is&&console.warn(`Multiplying ${as} x ${os} and ${is} x ${us} matrix: dimensions do not match.`);function ls(gs,ys,xs){let ms=gs.rows,Ss=gs.columns;if(ms===ys&&Ss===xs)return gs;{let Ms=AbstractMatrix.zeros(ys,xs);return Ms=Ms.setSubMatrix(gs,0,0),Ms}}let fs=Math.max(as,is),hs=Math.max(os,us);rs=ls(rs,fs,hs),ts=ls(ts,fs,hs);function vs(gs,ys,xs,ms){if(xs<=512||ms<=512)return gs.mmul(ys);xs%2===1&&ms%2===1?(gs=ls(gs,xs+1,ms+1),ys=ls(ys,xs+1,ms+1)):xs%2===1?(gs=ls(gs,xs+1,ms),ys=ls(ys,xs+1,ms)):ms%2===1&&(gs=ls(gs,xs,ms+1),ys=ls(ys,xs,ms+1));let Ss=parseInt(gs.rows/2,10),Ms=parseInt(gs.columns/2,10),$s=gs.subMatrix(0,Ss-1,0,Ms-1),bs=ys.subMatrix(0,Ss-1,0,Ms-1),Cs=gs.subMatrix(0,Ss-1,Ms,gs.columns-1),As=ys.subMatrix(0,Ss-1,Ms,ys.columns-1),Is=gs.subMatrix(Ss,gs.rows-1,0,Ms-1),ks=ys.subMatrix(Ss,ys.rows-1,0,Ms-1),Ps=gs.subMatrix(Ss,gs.rows-1,Ms,gs.columns-1),Ds=ys.subMatrix(Ss,ys.rows-1,Ms,ys.columns-1),Fs=vs(AbstractMatrix.add($s,Ps),AbstractMatrix.add(bs,Ds),Ss,Ms),Rs=vs(AbstractMatrix.add(Is,Ps),bs,Ss,Ms),js=vs($s,AbstractMatrix.sub(As,Ds),Ss,Ms),zs=vs(Ps,AbstractMatrix.sub(ks,bs),Ss,Ms),Us=vs(AbstractMatrix.add($s,Cs),Ds,Ss,Ms),Ys=vs(AbstractMatrix.sub(Is,$s),AbstractMatrix.add(bs,As),Ss,Ms),Ks=vs(AbstractMatrix.sub(Cs,Ps),AbstractMatrix.add(ks,Ds),Ss,Ms),qs=AbstractMatrix.add(Fs,zs);qs.sub(Us),qs.add(Ks);let _l=AbstractMatrix.add(js,Us),Js=AbstractMatrix.add(Rs,zs),Vs=AbstractMatrix.sub(Fs,Rs);Vs.add(js),Vs.add(Ys);let Zs=AbstractMatrix.zeros(2*qs.rows,2*qs.columns);return Zs=Zs.setSubMatrix(qs,0,0),Zs=Zs.setSubMatrix(_l,qs.rows,0),Zs=Zs.setSubMatrix(Js,0,qs.columns),Zs=Zs.setSubMatrix(Vs,qs.rows,qs.columns),Zs.subMatrix(0,xs-1,0,ms-1)}return vs(rs,ts,fs,hs)}scaleRows(ts={}){if(typeof ts!="object")throw new TypeError("options must be an object");const{min:rs=0,max:as=1}=ts;if(!Number.isFinite(rs))throw new TypeError("min must be a number");if(!Number.isFinite(as))throw new TypeError("max must be a number");if(rs>=as)throw new RangeError("min must be smaller than max");let os=new Matrix(this.rows,this.columns);for(let is=0;is<this.rows;is++){const us=this.getRow(is);rescale(us,{min:rs,max:as,output:us}),os.setRow(is,us)}return os}scaleColumns(ts={}){if(typeof ts!="object")throw new TypeError("options must be an object");const{min:rs=0,max:as=1}=ts;if(!Number.isFinite(rs))throw new TypeError("min must be a number");if(!Number.isFinite(as))throw new TypeError("max must be a number");if(rs>=as)throw new RangeError("min must be smaller than max");let os=new Matrix(this.rows,this.columns);for(let is=0;is<this.columns;is++){const us=this.getColumn(is);rescale(us,{min:rs,max:as,output:us}),os.setColumn(is,us)}return os}flipRows(){const ts=Math.ceil(this.columns/2);for(let rs=0;rs<this.rows;rs++)for(let as=0;as<ts;as++){let os=this.get(rs,as),is=this.get(rs,this.columns-1-as);this.set(rs,as,is),this.set(rs,this.columns-1-as,os)}return this}flipColumns(){const ts=Math.ceil(this.rows/2);for(let rs=0;rs<this.columns;rs++)for(let as=0;as<ts;as++){let os=this.get(as,rs),is=this.get(this.rows-1-as,rs);this.set(as,rs,is),this.set(this.rows-1-as,rs,os)}return this}kroneckerProduct(ts){ts=Matrix.checkMatrix(ts);let rs=this.rows,as=this.columns,os=ts.rows,is=ts.columns,us=new Matrix(rs*os,as*is);for(let ls=0;ls<rs;ls++)for(let fs=0;fs<as;fs++)for(let hs=0;hs<os;hs++)for(let vs=0;vs<is;vs++)us.set(os*ls+hs,is*fs+vs,this.get(ls,fs)*ts.get(hs,vs));return us}transpose(){let ts=new Matrix(this.columns,this.rows);for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)ts.set(as,rs,this.get(rs,as));return ts}sortRows(ts=compareNumbers){for(let rs=0;rs<this.rows;rs++)this.setRow(rs,this.getRow(rs).sort(ts));return this}sortColumns(ts=compareNumbers){for(let rs=0;rs<this.columns;rs++)this.setColumn(rs,this.getColumn(rs).sort(ts));return this}subMatrix(ts,rs,as,os){checkRange(this,ts,rs,as,os);let is=new Matrix(rs-ts+1,os-as+1);for(let us=ts;us<=rs;us++)for(let ls=as;ls<=os;ls++)is.set(us-ts,ls-as,this.get(us,ls));return is}subMatrixRow(ts,rs,as){if(rs===void 0&&(rs=0),as===void 0&&(as=this.columns-1),rs>as||rs<0||rs>=this.columns||as<0||as>=this.columns)throw new RangeError("Argument out of range");let os=new Matrix(ts.length,as-rs+1);for(let is=0;is<ts.length;is++)for(let us=rs;us<=as;us++){if(ts[is]<0||ts[is]>=this.rows)throw new RangeError(`Row index out of range: ${ts[is]}`);os.set(is,us-rs,this.get(ts[is],us))}return os}subMatrixColumn(ts,rs,as){if(rs===void 0&&(rs=0),as===void 0&&(as=this.rows-1),rs>as||rs<0||rs>=this.rows||as<0||as>=this.rows)throw new RangeError("Argument out of range");let os=new Matrix(as-rs+1,ts.length);for(let is=0;is<ts.length;is++)for(let us=rs;us<=as;us++){if(ts[is]<0||ts[is]>=this.columns)throw new RangeError(`Column index out of range: ${ts[is]}`);os.set(us-rs,is,this.get(us,ts[is]))}return os}setSubMatrix(ts,rs,as){ts=Matrix.checkMatrix(ts);let os=rs+ts.rows-1,is=as+ts.columns-1;checkRange(this,rs,os,as,is);for(let us=0;us<ts.rows;us++)for(let ls=0;ls<ts.columns;ls++)this.set(rs+us,as+ls,ts.get(us,ls));return this}selection(ts,rs){let as=checkIndices(this,ts,rs),os=new Matrix(ts.length,rs.length);for(let is=0;is<as.row.length;is++){let us=as.row[is];for(let ls=0;ls<as.column.length;ls++){let fs=as.column[ls];os.set(is,ls,this.get(us,fs))}}return os}trace(){let ts=Math.min(this.rows,this.columns),rs=0;for(let as=0;as<ts;as++)rs+=this.get(as,as);return rs}clone(){let ts=new Matrix(this.rows,this.columns);for(let rs=0;rs<this.rows;rs++)for(let as=0;as<this.columns;as++)ts.set(rs,as,this.get(rs,as));return ts}sum(ts){switch(ts){case"row":return sumByRow(this);case"column":return sumByColumn(this);case void 0:return sumAll(this);default:throw new Error(`invalid option: ${ts}`)}}product(ts){switch(ts){case"row":return productByRow(this);case"column":return productByColumn(this);case void 0:return productAll(this);default:throw new Error(`invalid option: ${ts}`)}}mean(ts){const rs=this.sum(ts);switch(ts){case"row":{for(let as=0;as<this.rows;as++)rs[as]/=this.columns;return rs}case"column":{for(let as=0;as<this.columns;as++)rs[as]/=this.rows;return rs}case void 0:return rs/this.size;default:throw new Error(`invalid option: ${ts}`)}}variance(ts,rs={}){if(typeof ts=="object"&&(rs=ts,ts=void 0),typeof rs!="object")throw new TypeError("options must be an object");const{unbiased:as=!0,mean:os=this.mean(ts)}=rs;if(typeof as!="boolean")throw new TypeError("unbiased must be a boolean");switch(ts){case"row":{if(!Array.isArray(os))throw new TypeError("mean must be an array");return varianceByRow(this,as,os)}case"column":{if(!Array.isArray(os))throw new TypeError("mean must be an array");return varianceByColumn(this,as,os)}case void 0:{if(typeof os!="number")throw new TypeError("mean must be a number");return varianceAll(this,as,os)}default:throw new Error(`invalid option: ${ts}`)}}standardDeviation(ts,rs){typeof ts=="object"&&(rs=ts,ts=void 0);const as=this.variance(ts,rs);if(ts===void 0)return Math.sqrt(as);for(let os=0;os<as.length;os++)as[os]=Math.sqrt(as[os]);return as}center(ts,rs={}){if(typeof ts=="object"&&(rs=ts,ts=void 0),typeof rs!="object")throw new TypeError("options must be an object");const{center:as=this.mean(ts)}=rs;switch(ts){case"row":{if(!Array.isArray(as))throw new TypeError("center must be an array");return centerByRow(this,as),this}case"column":{if(!Array.isArray(as))throw new TypeError("center must be an array");return centerByColumn(this,as),this}case void 0:{if(typeof as!="number")throw new TypeError("center must be a number");return centerAll(this,as),this}default:throw new Error(`invalid option: ${ts}`)}}scale(ts,rs={}){if(typeof ts=="object"&&(rs=ts,ts=void 0),typeof rs!="object")throw new TypeError("options must be an object");let as=rs.scale;switch(ts){case"row":{if(as===void 0)as=getScaleByRow(this);else if(!Array.isArray(as))throw new TypeError("scale must be an array");return scaleByRow(this,as),this}case"column":{if(as===void 0)as=getScaleByColumn(this);else if(!Array.isArray(as))throw new TypeError("scale must be an array");return scaleByColumn(this,as),this}case void 0:{if(as===void 0)as=getScaleAll(this);else if(typeof as!="number")throw new TypeError("scale must be a number");return scaleAll(this,as),this}default:throw new Error(`invalid option: ${ts}`)}}toString(ts){return inspectMatrixWithOptions(this,ts)}}AbstractMatrix.prototype.klass="Matrix";typeof Symbol<"u"&&(AbstractMatrix.prototype[Symbol.for("nodejs.util.inspect.custom")]=inspectMatrix);function compareNumbers(ns,ts){return ns-ts}AbstractMatrix.random=AbstractMatrix.rand;AbstractMatrix.randomInt=AbstractMatrix.randInt;AbstractMatrix.diagonal=AbstractMatrix.diag;AbstractMatrix.prototype.diagonal=AbstractMatrix.prototype.diag;AbstractMatrix.identity=AbstractMatrix.eye;AbstractMatrix.prototype.negate=AbstractMatrix.prototype.neg;AbstractMatrix.prototype.tensorProduct=AbstractMatrix.prototype.kroneckerProduct;class Matrix extends AbstractMatrix{constructor(ts,rs){if(super(),Matrix.isMatrix(ts))return ts.clone();if(Number.isInteger(ts)&&ts>0)if(this.data=[],Number.isInteger(rs)&&rs>0)for(let as=0;as<ts;as++)this.data.push(new Float64Array(rs));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(ts)){const as=ts;if(ts=as.length,rs=as[0].length,typeof rs!="number"||rs===0)throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let os=0;os<ts;os++){if(as[os].length!==rs)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(as[os]))}}else throw new TypeError("First argument must be a positive number or an array");return this.rows=ts,this.columns=rs,this}set(ts,rs,as){return this.data[ts][rs]=as,this}get(ts,rs){return this.data[ts][rs]}removeRow(ts){if(checkRowIndex(this,ts),this.rows===1)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(ts,1),this.rows-=1,this}addRow(ts,rs){return rs===void 0&&(rs=ts,ts=this.rows),checkRowIndex(this,ts,!0),rs=Float64Array.from(checkRowVector(this,rs)),this.data.splice(ts,0,rs),this.rows+=1,this}removeColumn(ts){if(checkColumnIndex(this,ts),this.columns===1)throw new RangeError("A matrix cannot have less than one column");for(let rs=0;rs<this.rows;rs++){const as=new Float64Array(this.columns-1);for(let os=0;os<ts;os++)as[os]=this.data[rs][os];for(let os=ts+1;os<this.columns;os++)as[os-1]=this.data[rs][os];this.data[rs]=as}return this.columns-=1,this}addColumn(ts,rs){typeof rs>"u"&&(rs=ts,ts=this.columns),checkColumnIndex(this,ts,!0),rs=checkColumnVector(this,rs);for(let as=0;as<this.rows;as++){const os=new Float64Array(this.columns+1);let is=0;for(;is<ts;is++)os[is]=this.data[as][is];for(os[is++]=rs[as];is<this.columns+1;is++)os[is]=this.data[as][is-1];this.data[as]=os}return this.columns+=1,this}}installMathOperations(AbstractMatrix,Matrix);class BaseView extends AbstractMatrix{constructor(ts,rs,as){super(),this.matrix=ts,this.rows=rs,this.columns=as}}class MatrixColumnView extends BaseView{constructor(ts,rs){checkColumnIndex(ts,rs),super(ts,ts.rows,1),this.column=rs}set(ts,rs,as){return this.matrix.set(ts,this.column,as),this}get(ts){return this.matrix.get(ts,this.column)}}class MatrixColumnSelectionView extends BaseView{constructor(ts,rs){rs=checkColumnIndices(ts,rs),super(ts,ts.rows,rs.length),this.columnIndices=rs}set(ts,rs,as){return this.matrix.set(ts,this.columnIndices[rs],as),this}get(ts,rs){return this.matrix.get(ts,this.columnIndices[rs])}}class MatrixFlipColumnView extends BaseView{constructor(ts){super(ts,ts.rows,ts.columns)}set(ts,rs,as){return this.matrix.set(ts,this.columns-rs-1,as),this}get(ts,rs){return this.matrix.get(ts,this.columns-rs-1)}}class MatrixFlipRowView extends BaseView{constructor(ts){super(ts,ts.rows,ts.columns)}set(ts,rs,as){return this.matrix.set(this.rows-ts-1,rs,as),this}get(ts,rs){return this.matrix.get(this.rows-ts-1,rs)}}class MatrixRowView extends BaseView{constructor(ts,rs){checkRowIndex(ts,rs),super(ts,1,ts.columns),this.row=rs}set(ts,rs,as){return this.matrix.set(this.row,rs,as),this}get(ts,rs){return this.matrix.get(this.row,rs)}}class MatrixRowSelectionView extends BaseView{constructor(ts,rs){rs=checkRowIndices(ts,rs),super(ts,rs.length,ts.columns),this.rowIndices=rs}set(ts,rs,as){return this.matrix.set(this.rowIndices[ts],rs,as),this}get(ts,rs){return this.matrix.get(this.rowIndices[ts],rs)}}class MatrixSelectionView extends BaseView{constructor(ts,rs,as){let os=checkIndices(ts,rs,as);super(ts,os.row.length,os.column.length),this.rowIndices=os.row,this.columnIndices=os.column}set(ts,rs,as){return this.matrix.set(this.rowIndices[ts],this.columnIndices[rs],as),this}get(ts,rs){return this.matrix.get(this.rowIndices[ts],this.columnIndices[rs])}}class MatrixSubView extends BaseView{constructor(ts,rs,as,os,is){checkRange(ts,rs,as,os,is),super(ts,as-rs+1,is-os+1),this.startRow=rs,this.startColumn=os}set(ts,rs,as){return this.matrix.set(this.startRow+ts,this.startColumn+rs,as),this}get(ts,rs){return this.matrix.get(this.startRow+ts,this.startColumn+rs)}}class MatrixTransposeView extends BaseView{constructor(ts){super(ts,ts.columns,ts.rows)}set(ts,rs,as){return this.matrix.set(rs,ts,as),this}get(ts,rs){return this.matrix.get(rs,ts)}}class WrapperMatrix1D extends AbstractMatrix{constructor(ts,rs={}){const{rows:as=1}=rs;if(ts.length%as!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=as,this.columns=ts.length/as,this.data=ts}set(ts,rs,as){let os=this._calculateIndex(ts,rs);return this.data[os]=as,this}get(ts,rs){let as=this._calculateIndex(ts,rs);return this.data[as]}_calculateIndex(ts,rs){return ts*this.columns+rs}}class WrapperMatrix2D extends AbstractMatrix{constructor(ts){super(),this.data=ts,this.rows=ts.length,this.columns=ts[0].length}set(ts,rs,as){return this.data[ts][rs]=as,this}get(ts,rs){return this.data[ts][rs]}}function wrap(ns,ts){if(Array.isArray(ns))return ns[0]&&Array.isArray(ns[0])?new WrapperMatrix2D(ns):new WrapperMatrix1D(ns,ts);throw new Error("the argument is not an array")}class LuDecomposition{constructor(ts){ts=WrapperMatrix2D.checkMatrix(ts);let rs=ts.clone(),as=rs.rows,os=rs.columns,is=new Float64Array(as),us=1,ls,fs,hs,vs,gs,ys,xs,ms,Ss;for(ls=0;ls<as;ls++)is[ls]=ls;for(ms=new Float64Array(as),fs=0;fs<os;fs++){for(ls=0;ls<as;ls++)ms[ls]=rs.get(ls,fs);for(ls=0;ls<as;ls++){for(Ss=Math.min(ls,fs),gs=0,hs=0;hs<Ss;hs++)gs+=rs.get(ls,hs)*ms[hs];ms[ls]-=gs,rs.set(ls,fs,ms[ls])}for(vs=fs,ls=fs+1;ls<as;ls++)Math.abs(ms[ls])>Math.abs(ms[vs])&&(vs=ls);if(vs!==fs){for(hs=0;hs<os;hs++)ys=rs.get(vs,hs),rs.set(vs,hs,rs.get(fs,hs)),rs.set(fs,hs,ys);xs=is[vs],is[vs]=is[fs],is[fs]=xs,us=-us}if(fs<as&&rs.get(fs,fs)!==0)for(ls=fs+1;ls<as;ls++)rs.set(ls,fs,rs.get(ls,fs)/rs.get(fs,fs))}this.LU=rs,this.pivotVector=is,this.pivotSign=us}isSingular(){let ts=this.LU,rs=ts.columns;for(let as=0;as<rs;as++)if(ts.get(as,as)===0)return!0;return!1}solve(ts){ts=Matrix.checkMatrix(ts);let rs=this.LU;if(rs.rows!==ts.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let os=ts.columns,is=ts.subMatrixRow(this.pivotVector,0,os-1),us=rs.columns,ls,fs,hs;for(hs=0;hs<us;hs++)for(ls=hs+1;ls<us;ls++)for(fs=0;fs<os;fs++)is.set(ls,fs,is.get(ls,fs)-is.get(hs,fs)*rs.get(ls,hs));for(hs=us-1;hs>=0;hs--){for(fs=0;fs<os;fs++)is.set(hs,fs,is.get(hs,fs)/rs.get(hs,hs));for(ls=0;ls<hs;ls++)for(fs=0;fs<os;fs++)is.set(ls,fs,is.get(ls,fs)-is.get(hs,fs)*rs.get(ls,hs))}return is}get determinant(){let ts=this.LU;if(!ts.isSquare())throw new Error("Matrix must be square");let rs=this.pivotSign,as=ts.columns;for(let os=0;os<as;os++)rs*=ts.get(os,os);return rs}get lowerTriangularMatrix(){let ts=this.LU,rs=ts.rows,as=ts.columns,os=new Matrix(rs,as);for(let is=0;is<rs;is++)for(let us=0;us<as;us++)is>us?os.set(is,us,ts.get(is,us)):is===us?os.set(is,us,1):os.set(is,us,0);return os}get upperTriangularMatrix(){let ts=this.LU,rs=ts.rows,as=ts.columns,os=new Matrix(rs,as);for(let is=0;is<rs;is++)for(let us=0;us<as;us++)is<=us?os.set(is,us,ts.get(is,us)):os.set(is,us,0);return os}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function hypotenuse(ns,ts){let rs=0;return Math.abs(ns)>Math.abs(ts)?(rs=ts/ns,Math.abs(ns)*Math.sqrt(1+rs*rs)):ts!==0?(rs=ns/ts,Math.abs(ts)*Math.sqrt(1+rs*rs)):0}class QrDecomposition{constructor(ts){ts=WrapperMatrix2D.checkMatrix(ts);let rs=ts.clone(),as=ts.rows,os=ts.columns,is=new Float64Array(os),us,ls,fs,hs;for(fs=0;fs<os;fs++){let vs=0;for(us=fs;us<as;us++)vs=hypotenuse(vs,rs.get(us,fs));if(vs!==0){for(rs.get(fs,fs)<0&&(vs=-vs),us=fs;us<as;us++)rs.set(us,fs,rs.get(us,fs)/vs);for(rs.set(fs,fs,rs.get(fs,fs)+1),ls=fs+1;ls<os;ls++){for(hs=0,us=fs;us<as;us++)hs+=rs.get(us,fs)*rs.get(us,ls);for(hs=-hs/rs.get(fs,fs),us=fs;us<as;us++)rs.set(us,ls,rs.get(us,ls)+hs*rs.get(us,fs))}}is[fs]=-vs}this.QR=rs,this.Rdiag=is}solve(ts){ts=Matrix.checkMatrix(ts);let rs=this.QR,as=rs.rows;if(ts.rows!==as)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let os=ts.columns,is=ts.clone(),us=rs.columns,ls,fs,hs,vs;for(hs=0;hs<us;hs++)for(fs=0;fs<os;fs++){for(vs=0,ls=hs;ls<as;ls++)vs+=rs.get(ls,hs)*is.get(ls,fs);for(vs=-vs/rs.get(hs,hs),ls=hs;ls<as;ls++)is.set(ls,fs,is.get(ls,fs)+vs*rs.get(ls,hs))}for(hs=us-1;hs>=0;hs--){for(fs=0;fs<os;fs++)is.set(hs,fs,is.get(hs,fs)/this.Rdiag[hs]);for(ls=0;ls<hs;ls++)for(fs=0;fs<os;fs++)is.set(ls,fs,is.get(ls,fs)-is.get(hs,fs)*rs.get(ls,hs))}return is.subMatrix(0,us-1,0,os-1)}isFullRank(){let ts=this.QR.columns;for(let rs=0;rs<ts;rs++)if(this.Rdiag[rs]===0)return!1;return!0}get upperTriangularMatrix(){let ts=this.QR,rs=ts.columns,as=new Matrix(rs,rs),os,is;for(os=0;os<rs;os++)for(is=0;is<rs;is++)os<is?as.set(os,is,ts.get(os,is)):os===is?as.set(os,is,this.Rdiag[os]):as.set(os,is,0);return as}get orthogonalMatrix(){let ts=this.QR,rs=ts.rows,as=ts.columns,os=new Matrix(rs,as),is,us,ls,fs;for(ls=as-1;ls>=0;ls--){for(is=0;is<rs;is++)os.set(is,ls,0);for(os.set(ls,ls,1),us=ls;us<as;us++)if(ts.get(ls,ls)!==0){for(fs=0,is=ls;is<rs;is++)fs+=ts.get(is,ls)*os.get(is,us);for(fs=-fs/ts.get(ls,ls),is=ls;is<rs;is++)os.set(is,us,os.get(is,us)+fs*ts.get(is,ls))}}return os}}class SingularValueDecomposition{constructor(ts,rs={}){ts=WrapperMatrix2D.checkMatrix(ts);let as=ts.rows,os=ts.columns;const{computeLeftSingularVectors:is=!0,computeRightSingularVectors:us=!0,autoTranspose:ls=!1}=rs;let fs=!!is,hs=!!us,vs=!1,gs;if(as<os)if(!ls)gs=ts.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{gs=ts.transpose(),as=gs.rows,os=gs.columns,vs=!0;let Rs=fs;fs=hs,hs=Rs}else gs=ts.clone();let ys=Math.min(as,os),xs=Math.min(as+1,os),ms=new Float64Array(xs),Ss=new Matrix(as,ys),Ms=new Matrix(os,os),$s=new Float64Array(os),bs=new Float64Array(as),Cs=new Float64Array(xs);for(let Rs=0;Rs<xs;Rs++)Cs[Rs]=Rs;let As=Math.min(as-1,os),Is=Math.max(0,Math.min(os-2,as)),ks=Math.max(As,Is);for(let Rs=0;Rs<ks;Rs++){if(Rs<As){ms[Rs]=0;for(let js=Rs;js<as;js++)ms[Rs]=hypotenuse(ms[Rs],gs.get(js,Rs));if(ms[Rs]!==0){gs.get(Rs,Rs)<0&&(ms[Rs]=-ms[Rs]);for(let js=Rs;js<as;js++)gs.set(js,Rs,gs.get(js,Rs)/ms[Rs]);gs.set(Rs,Rs,gs.get(Rs,Rs)+1)}ms[Rs]=-ms[Rs]}for(let js=Rs+1;js<os;js++){if(Rs<As&&ms[Rs]!==0){let zs=0;for(let Us=Rs;Us<as;Us++)zs+=gs.get(Us,Rs)*gs.get(Us,js);zs=-zs/gs.get(Rs,Rs);for(let Us=Rs;Us<as;Us++)gs.set(Us,js,gs.get(Us,js)+zs*gs.get(Us,Rs))}$s[js]=gs.get(Rs,js)}if(fs&&Rs<As)for(let js=Rs;js<as;js++)Ss.set(js,Rs,gs.get(js,Rs));if(Rs<Is){$s[Rs]=0;for(let js=Rs+1;js<os;js++)$s[Rs]=hypotenuse($s[Rs],$s[js]);if($s[Rs]!==0){$s[Rs+1]<0&&($s[Rs]=0-$s[Rs]);for(let js=Rs+1;js<os;js++)$s[js]/=$s[Rs];$s[Rs+1]+=1}if($s[Rs]=-$s[Rs],Rs+1<as&&$s[Rs]!==0){for(let js=Rs+1;js<as;js++)bs[js]=0;for(let js=Rs+1;js<as;js++)for(let zs=Rs+1;zs<os;zs++)bs[js]+=$s[zs]*gs.get(js,zs);for(let js=Rs+1;js<os;js++){let zs=-$s[js]/$s[Rs+1];for(let Us=Rs+1;Us<as;Us++)gs.set(Us,js,gs.get(Us,js)+zs*bs[Us])}}if(hs)for(let js=Rs+1;js<os;js++)Ms.set(js,Rs,$s[js])}}let Ps=Math.min(os,as+1);if(As<os&&(ms[As]=gs.get(As,As)),as<Ps&&(ms[Ps-1]=0),Is+1<Ps&&($s[Is]=gs.get(Is,Ps-1)),$s[Ps-1]=0,fs){for(let Rs=As;Rs<ys;Rs++){for(let js=0;js<as;js++)Ss.set(js,Rs,0);Ss.set(Rs,Rs,1)}for(let Rs=As-1;Rs>=0;Rs--)if(ms[Rs]!==0){for(let js=Rs+1;js<ys;js++){let zs=0;for(let Us=Rs;Us<as;Us++)zs+=Ss.get(Us,Rs)*Ss.get(Us,js);zs=-zs/Ss.get(Rs,Rs);for(let Us=Rs;Us<as;Us++)Ss.set(Us,js,Ss.get(Us,js)+zs*Ss.get(Us,Rs))}for(let js=Rs;js<as;js++)Ss.set(js,Rs,-Ss.get(js,Rs));Ss.set(Rs,Rs,1+Ss.get(Rs,Rs));for(let js=0;js<Rs-1;js++)Ss.set(js,Rs,0)}else{for(let js=0;js<as;js++)Ss.set(js,Rs,0);Ss.set(Rs,Rs,1)}}if(hs)for(let Rs=os-1;Rs>=0;Rs--){if(Rs<Is&&$s[Rs]!==0)for(let js=Rs+1;js<os;js++){let zs=0;for(let Us=Rs+1;Us<os;Us++)zs+=Ms.get(Us,Rs)*Ms.get(Us,js);zs=-zs/Ms.get(Rs+1,Rs);for(let Us=Rs+1;Us<os;Us++)Ms.set(Us,js,Ms.get(Us,js)+zs*Ms.get(Us,Rs))}for(let js=0;js<os;js++)Ms.set(js,Rs,0);Ms.set(Rs,Rs,1)}let Ds=Ps-1,Fs=Number.EPSILON;for(;Ps>0;){let Rs,js;for(Rs=Ps-2;Rs>=-1&&Rs!==-1;Rs--){const zs=Number.MIN_VALUE+Fs*Math.abs(ms[Rs]+Math.abs(ms[Rs+1]));if(Math.abs($s[Rs])<=zs||Number.isNaN($s[Rs])){$s[Rs]=0;break}}if(Rs===Ps-2)js=4;else{let zs;for(zs=Ps-1;zs>=Rs&&zs!==Rs;zs--){let Us=(zs!==Ps?Math.abs($s[zs]):0)+(zs!==Rs+1?Math.abs($s[zs-1]):0);if(Math.abs(ms[zs])<=Fs*Us){ms[zs]=0;break}}zs===Rs?js=3:zs===Ps-1?js=1:(js=2,Rs=zs)}switch(Rs++,js){case 1:{let zs=$s[Ps-2];$s[Ps-2]=0;for(let Us=Ps-2;Us>=Rs;Us--){let Ys=hypotenuse(ms[Us],zs),Ks=ms[Us]/Ys,qs=zs/Ys;if(ms[Us]=Ys,Us!==Rs&&(zs=-qs*$s[Us-1],$s[Us-1]=Ks*$s[Us-1]),hs)for(let _l=0;_l<os;_l++)Ys=Ks*Ms.get(_l,Us)+qs*Ms.get(_l,Ps-1),Ms.set(_l,Ps-1,-qs*Ms.get(_l,Us)+Ks*Ms.get(_l,Ps-1)),Ms.set(_l,Us,Ys)}break}case 2:{let zs=$s[Rs-1];$s[Rs-1]=0;for(let Us=Rs;Us<Ps;Us++){let Ys=hypotenuse(ms[Us],zs),Ks=ms[Us]/Ys,qs=zs/Ys;if(ms[Us]=Ys,zs=-qs*$s[Us],$s[Us]=Ks*$s[Us],fs)for(let _l=0;_l<as;_l++)Ys=Ks*Ss.get(_l,Us)+qs*Ss.get(_l,Rs-1),Ss.set(_l,Rs-1,-qs*Ss.get(_l,Us)+Ks*Ss.get(_l,Rs-1)),Ss.set(_l,Us,Ys)}break}case 3:{const zs=Math.max(Math.abs(ms[Ps-1]),Math.abs(ms[Ps-2]),Math.abs($s[Ps-2]),Math.abs(ms[Rs]),Math.abs($s[Rs])),Us=ms[Ps-1]/zs,Ys=ms[Ps-2]/zs,Ks=$s[Ps-2]/zs,qs=ms[Rs]/zs,_l=$s[Rs]/zs,Js=((Ys+Us)*(Ys-Us)+Ks*Ks)/2,Vs=Us*Ks*(Us*Ks);let Zs=0;(Js!==0||Vs!==0)&&(Js<0?Zs=0-Math.sqrt(Js*Js+Vs):Zs=Math.sqrt(Js*Js+Vs),Zs=Vs/(Js+Zs));let Sl=(qs+Us)*(qs-Us)+Zs,Il=qs*_l;for(let Nl=Rs;Nl<Ps-1;Nl++){let Tl=hypotenuse(Sl,Il);Tl===0&&(Tl=Number.MIN_VALUE);let _c=Sl/Tl,l0=Il/Tl;if(Nl!==Rs&&($s[Nl-1]=Tl),Sl=_c*ms[Nl]+l0*$s[Nl],$s[Nl]=_c*$s[Nl]-l0*ms[Nl],Il=l0*ms[Nl+1],ms[Nl+1]=_c*ms[Nl+1],hs)for(let g0=0;g0<os;g0++)Tl=_c*Ms.get(g0,Nl)+l0*Ms.get(g0,Nl+1),Ms.set(g0,Nl+1,-l0*Ms.get(g0,Nl)+_c*Ms.get(g0,Nl+1)),Ms.set(g0,Nl,Tl);if(Tl=hypotenuse(Sl,Il),Tl===0&&(Tl=Number.MIN_VALUE),_c=Sl/Tl,l0=Il/Tl,ms[Nl]=Tl,Sl=_c*$s[Nl]+l0*ms[Nl+1],ms[Nl+1]=-l0*$s[Nl]+_c*ms[Nl+1],Il=l0*$s[Nl+1],$s[Nl+1]=_c*$s[Nl+1],fs&&Nl<as-1)for(let g0=0;g0<as;g0++)Tl=_c*Ss.get(g0,Nl)+l0*Ss.get(g0,Nl+1),Ss.set(g0,Nl+1,-l0*Ss.get(g0,Nl)+_c*Ss.get(g0,Nl+1)),Ss.set(g0,Nl,Tl)}$s[Ps-2]=Sl;break}case 4:{if(ms[Rs]<=0&&(ms[Rs]=ms[Rs]<0?-ms[Rs]:0,hs))for(let zs=0;zs<=Ds;zs++)Ms.set(zs,Rs,-Ms.get(zs,Rs));for(;Rs<Ds&&!(ms[Rs]>=ms[Rs+1]);){let zs=ms[Rs];if(ms[Rs]=ms[Rs+1],ms[Rs+1]=zs,hs&&Rs<os-1)for(let Us=0;Us<os;Us++)zs=Ms.get(Us,Rs+1),Ms.set(Us,Rs+1,Ms.get(Us,Rs)),Ms.set(Us,Rs,zs);if(fs&&Rs<as-1)for(let Us=0;Us<as;Us++)zs=Ss.get(Us,Rs+1),Ss.set(Us,Rs+1,Ss.get(Us,Rs)),Ss.set(Us,Rs,zs);Rs++}Ps--;break}}}if(vs){let Rs=Ms;Ms=Ss,Ss=Rs}this.m=as,this.n=os,this.s=ms,this.U=Ss,this.V=Ms}solve(ts){let rs=ts,as=this.threshold,os=this.s.length,is=Matrix.zeros(os,os);for(let ys=0;ys<os;ys++)Math.abs(this.s[ys])<=as?is.set(ys,ys,0):is.set(ys,ys,1/this.s[ys]);let us=this.U,ls=this.rightSingularVectors,fs=ls.mmul(is),hs=ls.rows,vs=us.rows,gs=Matrix.zeros(hs,vs);for(let ys=0;ys<hs;ys++)for(let xs=0;xs<vs;xs++){let ms=0;for(let Ss=0;Ss<os;Ss++)ms+=fs.get(ys,Ss)*us.get(xs,Ss);gs.set(ys,xs,ms)}return gs.mmul(rs)}solveForDiagonal(ts){return this.solve(Matrix.diag(ts))}inverse(){let ts=this.V,rs=this.threshold,as=ts.rows,os=ts.columns,is=new Matrix(as,this.s.length);for(let vs=0;vs<as;vs++)for(let gs=0;gs<os;gs++)Math.abs(this.s[gs])>rs&&is.set(vs,gs,ts.get(vs,gs)/this.s[gs]);let us=this.U,ls=us.rows,fs=us.columns,hs=new Matrix(as,ls);for(let vs=0;vs<as;vs++)for(let gs=0;gs<ls;gs++){let ys=0;for(let xs=0;xs<fs;xs++)ys+=is.get(vs,xs)*us.get(gs,xs);hs.set(vs,gs,ys)}return hs}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let ts=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,rs=0,as=this.s;for(let os=0,is=as.length;os<is;os++)as[os]>ts&&rs++;return rs}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Matrix.diag(this.s)}}function inverse(ns,ts=!1){return ns=WrapperMatrix2D.checkMatrix(ns),ts?new SingularValueDecomposition(ns).inverse():solve(ns,Matrix.eye(ns.rows))}function solve(ns,ts,rs=!1){return ns=WrapperMatrix2D.checkMatrix(ns),ts=WrapperMatrix2D.checkMatrix(ts),rs?new SingularValueDecomposition(ns).solve(ts):ns.isSquare()?new LuDecomposition(ns).solve(ts):new QrDecomposition(ns).solve(ts)}function determinant(ns){if(ns=Matrix.checkMatrix(ns),ns.isSquare()){let ts,rs,as,os;if(ns.columns===2)return ts=ns.get(0,0),rs=ns.get(0,1),as=ns.get(1,0),os=ns.get(1,1),ts*os-rs*as;if(ns.columns===3){let is,us,ls;return is=new MatrixSelectionView(ns,[1,2],[1,2]),us=new MatrixSelectionView(ns,[1,2],[0,2]),ls=new MatrixSelectionView(ns,[1,2],[0,1]),ts=ns.get(0,0),rs=ns.get(0,1),as=ns.get(0,2),ts*determinant(is)-rs*determinant(us)+as*determinant(ls)}else return new LuDecomposition(ns).determinant}else throw Error("determinant can only be calculated for a square matrix")}function xrange(ns,ts){let rs=[];for(let as=0;as<ns;as++)as!==ts&&rs.push(as);return rs}function dependenciesOneRow(ns,ts,rs,as=1e-9,os=1e-9){if(ns>os)return new Array(ts.rows+1).fill(0);{let is=ts.addRow(rs,[0]);for(let us=0;us<is.rows;us++)Math.abs(is.get(us,0))<as&&is.set(us,0,0);return is.to1DArray()}}function linearDependencies(ns,ts={}){const{thresholdValue:rs=1e-9,thresholdError:as=1e-9}=ts;ns=Matrix.checkMatrix(ns);let os=ns.rows,is=new Matrix(os,os);for(let us=0;us<os;us++){let ls=Matrix.columnVector(ns.getRow(us)),fs=ns.subMatrixRow(xrange(os,us)).transpose(),vs=new SingularValueDecomposition(fs).solve(ls),gs=Matrix.sub(ls,fs.mmul(vs)).abs().max();is.setRow(us,dependenciesOneRow(gs,vs,us,rs,as))}return is}function pseudoInverse(ns,ts=Number.EPSILON){ns=Matrix.checkMatrix(ns);let rs=new SingularValueDecomposition(ns,{autoTranspose:!0}),as=rs.leftSingularVectors,os=rs.rightSingularVectors,is=rs.diagonal;for(let us=0;us<is.length;us++)Math.abs(is[us])>ts?is[us]=1/is[us]:is[us]=0;return os.mmul(Matrix.diag(is).mmul(as.transpose()))}function covariance(ns,ts=ns,rs={}){ns=new Matrix(ns);let as=!1;if(typeof ts=="object"&&!Matrix.isMatrix(ts)&&!Array.isArray(ts)?(rs=ts,ts=ns,as=!0):ts=new Matrix(ts),ns.rows!==ts.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:os=!0}=rs;os&&(ns=ns.center("column"),as||(ts=ts.center("column")));const is=ns.transpose().mmul(ts);for(let us=0;us<is.rows;us++)for(let ls=0;ls<is.columns;ls++)is.set(us,ls,is.get(us,ls)*(1/(ns.rows-1)));return is}function correlation(ns,ts=ns,rs={}){ns=new Matrix(ns);let as=!1;if(typeof ts=="object"&&!Matrix.isMatrix(ts)&&!Array.isArray(ts)?(rs=ts,ts=ns,as=!0):ts=new Matrix(ts),ns.rows!==ts.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:os=!0,scale:is=!0}=rs;os&&(ns.center("column"),as||ts.center("column")),is&&(ns.scale("column"),as||ts.scale("column"));const us=ns.standardDeviation("column",{unbiased:!0}),ls=as?us:ts.standardDeviation("column",{unbiased:!0}),fs=ns.transpose().mmul(ts);for(let hs=0;hs<fs.rows;hs++)for(let vs=0;vs<fs.columns;vs++)fs.set(hs,vs,fs.get(hs,vs)*(1/(us[hs]*ls[vs]))*(1/(ns.rows-1)));return fs}class EigenvalueDecomposition{constructor(ts,rs={}){const{assumeSymmetric:as=!1}=rs;if(ts=WrapperMatrix2D.checkMatrix(ts),!ts.isSquare())throw new Error("Matrix is not a square matrix");let os=ts.columns,is=new Matrix(os,os),us=new Float64Array(os),ls=new Float64Array(os),fs=ts,hs,vs,gs=!1;if(as?gs=!0:gs=ts.isSymmetric(),gs){for(hs=0;hs<os;hs++)for(vs=0;vs<os;vs++)is.set(hs,vs,fs.get(hs,vs));tred2(os,ls,us,is),tql2(os,ls,us,is)}else{let ys=new Matrix(os,os),xs=new Float64Array(os);for(vs=0;vs<os;vs++)for(hs=0;hs<os;hs++)ys.set(hs,vs,fs.get(hs,vs));orthes(os,ys,xs,is),hqr2(os,ls,us,is,ys)}this.n=os,this.e=ls,this.d=us,this.V=is}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let ts=this.n,rs=this.e,as=this.d,os=new Matrix(ts,ts),is,us;for(is=0;is<ts;is++){for(us=0;us<ts;us++)os.set(is,us,0);os.set(is,is,as[is]),rs[is]>0?os.set(is,is+1,rs[is]):rs[is]<0&&os.set(is,is-1,rs[is])}return os}}function tred2(ns,ts,rs,as){let os,is,us,ls,fs,hs,vs,gs;for(fs=0;fs<ns;fs++)rs[fs]=as.get(ns-1,fs);for(ls=ns-1;ls>0;ls--){for(gs=0,us=0,hs=0;hs<ls;hs++)gs=gs+Math.abs(rs[hs]);if(gs===0)for(ts[ls]=rs[ls-1],fs=0;fs<ls;fs++)rs[fs]=as.get(ls-1,fs),as.set(ls,fs,0),as.set(fs,ls,0);else{for(hs=0;hs<ls;hs++)rs[hs]/=gs,us+=rs[hs]*rs[hs];for(os=rs[ls-1],is=Math.sqrt(us),os>0&&(is=-is),ts[ls]=gs*is,us=us-os*is,rs[ls-1]=os-is,fs=0;fs<ls;fs++)ts[fs]=0;for(fs=0;fs<ls;fs++){for(os=rs[fs],as.set(fs,ls,os),is=ts[fs]+as.get(fs,fs)*os,hs=fs+1;hs<=ls-1;hs++)is+=as.get(hs,fs)*rs[hs],ts[hs]+=as.get(hs,fs)*os;ts[fs]=is}for(os=0,fs=0;fs<ls;fs++)ts[fs]/=us,os+=ts[fs]*rs[fs];for(vs=os/(us+us),fs=0;fs<ls;fs++)ts[fs]-=vs*rs[fs];for(fs=0;fs<ls;fs++){for(os=rs[fs],is=ts[fs],hs=fs;hs<=ls-1;hs++)as.set(hs,fs,as.get(hs,fs)-(os*ts[hs]+is*rs[hs]));rs[fs]=as.get(ls-1,fs),as.set(ls,fs,0)}}rs[ls]=us}for(ls=0;ls<ns-1;ls++){if(as.set(ns-1,ls,as.get(ls,ls)),as.set(ls,ls,1),us=rs[ls+1],us!==0){for(hs=0;hs<=ls;hs++)rs[hs]=as.get(hs,ls+1)/us;for(fs=0;fs<=ls;fs++){for(is=0,hs=0;hs<=ls;hs++)is+=as.get(hs,ls+1)*as.get(hs,fs);for(hs=0;hs<=ls;hs++)as.set(hs,fs,as.get(hs,fs)-is*rs[hs])}}for(hs=0;hs<=ls;hs++)as.set(hs,ls+1,0)}for(fs=0;fs<ns;fs++)rs[fs]=as.get(ns-1,fs),as.set(ns-1,fs,0);as.set(ns-1,ns-1,1),ts[0]=0}function tql2(ns,ts,rs,as){let os,is,us,ls,fs,hs,vs,gs,ys,xs,ms,Ss,Ms,$s,bs,Cs;for(us=1;us<ns;us++)ts[us-1]=ts[us];ts[ns-1]=0;let As=0,Is=0,ks=Number.EPSILON;for(hs=0;hs<ns;hs++){for(Is=Math.max(Is,Math.abs(rs[hs])+Math.abs(ts[hs])),vs=hs;vs<ns&&!(Math.abs(ts[vs])<=ks*Is);)vs++;if(vs>hs)do{for(os=rs[hs],gs=(rs[hs+1]-os)/(2*ts[hs]),ys=hypotenuse(gs,1),gs<0&&(ys=-ys),rs[hs]=ts[hs]/(gs+ys),rs[hs+1]=ts[hs]*(gs+ys),xs=rs[hs+1],is=os-rs[hs],us=hs+2;us<ns;us++)rs[us]-=is;for(As=As+is,gs=rs[vs],ms=1,Ss=ms,Ms=ms,$s=ts[hs+1],bs=0,Cs=0,us=vs-1;us>=hs;us--)for(Ms=Ss,Ss=ms,Cs=bs,os=ms*ts[us],is=ms*gs,ys=hypotenuse(gs,ts[us]),ts[us+1]=bs*ys,bs=ts[us]/ys,ms=gs/ys,gs=ms*rs[us]-bs*os,rs[us+1]=is+bs*(ms*os+bs*rs[us]),fs=0;fs<ns;fs++)is=as.get(fs,us+1),as.set(fs,us+1,bs*as.get(fs,us)+ms*is),as.set(fs,us,ms*as.get(fs,us)-bs*is);gs=-bs*Cs*Ms*$s*ts[hs]/xs,ts[hs]=bs*gs,rs[hs]=ms*gs}while(Math.abs(ts[hs])>ks*Is);rs[hs]=rs[hs]+As,ts[hs]=0}for(us=0;us<ns-1;us++){for(fs=us,gs=rs[us],ls=us+1;ls<ns;ls++)rs[ls]<gs&&(fs=ls,gs=rs[ls]);if(fs!==us)for(rs[fs]=rs[us],rs[us]=gs,ls=0;ls<ns;ls++)gs=as.get(ls,us),as.set(ls,us,as.get(ls,fs)),as.set(ls,fs,gs)}}function orthes(ns,ts,rs,as){let os=0,is=ns-1,us,ls,fs,hs,vs,gs,ys;for(gs=os+1;gs<=is-1;gs++){for(ys=0,hs=gs;hs<=is;hs++)ys=ys+Math.abs(ts.get(hs,gs-1));if(ys!==0){for(fs=0,hs=is;hs>=gs;hs--)rs[hs]=ts.get(hs,gs-1)/ys,fs+=rs[hs]*rs[hs];for(ls=Math.sqrt(fs),rs[gs]>0&&(ls=-ls),fs=fs-rs[gs]*ls,rs[gs]=rs[gs]-ls,vs=gs;vs<ns;vs++){for(us=0,hs=is;hs>=gs;hs--)us+=rs[hs]*ts.get(hs,vs);for(us=us/fs,hs=gs;hs<=is;hs++)ts.set(hs,vs,ts.get(hs,vs)-us*rs[hs])}for(hs=0;hs<=is;hs++){for(us=0,vs=is;vs>=gs;vs--)us+=rs[vs]*ts.get(hs,vs);for(us=us/fs,vs=gs;vs<=is;vs++)ts.set(hs,vs,ts.get(hs,vs)-us*rs[vs])}rs[gs]=ys*rs[gs],ts.set(gs,gs-1,ys*ls)}}for(hs=0;hs<ns;hs++)for(vs=0;vs<ns;vs++)as.set(hs,vs,hs===vs?1:0);for(gs=is-1;gs>=os+1;gs--)if(ts.get(gs,gs-1)!==0){for(hs=gs+1;hs<=is;hs++)rs[hs]=ts.get(hs,gs-1);for(vs=gs;vs<=is;vs++){for(ls=0,hs=gs;hs<=is;hs++)ls+=rs[hs]*as.get(hs,vs);for(ls=ls/rs[gs]/ts.get(gs,gs-1),hs=gs;hs<=is;hs++)as.set(hs,vs,as.get(hs,vs)+ls*rs[hs])}}}function hqr2(ns,ts,rs,as,os){let is=ns-1,us=0,ls=ns-1,fs=Number.EPSILON,hs=0,vs=0,gs=0,ys=0,xs=0,ms=0,Ss=0,Ms=0,$s,bs,Cs,As,Is,ks,Ps,Ds,Fs,Rs,js,zs,Us,Ys,Ks;for($s=0;$s<ns;$s++)for(($s<us||$s>ls)&&(rs[$s]=os.get($s,$s),ts[$s]=0),bs=Math.max($s-1,0);bs<ns;bs++)vs=vs+Math.abs(os.get($s,bs));for(;is>=us;){for(As=is;As>us&&(ms=Math.abs(os.get(As-1,As-1))+Math.abs(os.get(As,As)),ms===0&&(ms=vs),!(Math.abs(os.get(As,As-1))<fs*ms));)As--;if(As===is)os.set(is,is,os.get(is,is)+hs),rs[is]=os.get(is,is),ts[is]=0,is--,Ms=0;else if(As===is-1){if(Ps=os.get(is,is-1)*os.get(is-1,is),gs=(os.get(is-1,is-1)-os.get(is,is))/2,ys=gs*gs+Ps,Ss=Math.sqrt(Math.abs(ys)),os.set(is,is,os.get(is,is)+hs),os.set(is-1,is-1,os.get(is-1,is-1)+hs),Ds=os.get(is,is),ys>=0){for(Ss=gs>=0?gs+Ss:gs-Ss,rs[is-1]=Ds+Ss,rs[is]=rs[is-1],Ss!==0&&(rs[is]=Ds-Ps/Ss),ts[is-1]=0,ts[is]=0,Ds=os.get(is,is-1),ms=Math.abs(Ds)+Math.abs(Ss),gs=Ds/ms,ys=Ss/ms,xs=Math.sqrt(gs*gs+ys*ys),gs=gs/xs,ys=ys/xs,bs=is-1;bs<ns;bs++)Ss=os.get(is-1,bs),os.set(is-1,bs,ys*Ss+gs*os.get(is,bs)),os.set(is,bs,ys*os.get(is,bs)-gs*Ss);for($s=0;$s<=is;$s++)Ss=os.get($s,is-1),os.set($s,is-1,ys*Ss+gs*os.get($s,is)),os.set($s,is,ys*os.get($s,is)-gs*Ss);for($s=us;$s<=ls;$s++)Ss=as.get($s,is-1),as.set($s,is-1,ys*Ss+gs*as.get($s,is)),as.set($s,is,ys*as.get($s,is)-gs*Ss)}else rs[is-1]=Ds+gs,rs[is]=Ds+gs,ts[is-1]=Ss,ts[is]=-Ss;is=is-2,Ms=0}else{if(Ds=os.get(is,is),Fs=0,Ps=0,As<is&&(Fs=os.get(is-1,is-1),Ps=os.get(is,is-1)*os.get(is-1,is)),Ms===10){for(hs+=Ds,$s=us;$s<=is;$s++)os.set($s,$s,os.get($s,$s)-Ds);ms=Math.abs(os.get(is,is-1))+Math.abs(os.get(is-1,is-2)),Ds=Fs=.75*ms,Ps=-.4375*ms*ms}if(Ms===30&&(ms=(Fs-Ds)/2,ms=ms*ms+Ps,ms>0)){for(ms=Math.sqrt(ms),Fs<Ds&&(ms=-ms),ms=Ds-Ps/((Fs-Ds)/2+ms),$s=us;$s<=is;$s++)os.set($s,$s,os.get($s,$s)-ms);hs+=ms,Ds=Fs=Ps=.964}for(Ms=Ms+1,Is=is-2;Is>=As&&(Ss=os.get(Is,Is),xs=Ds-Ss,ms=Fs-Ss,gs=(xs*ms-Ps)/os.get(Is+1,Is)+os.get(Is,Is+1),ys=os.get(Is+1,Is+1)-Ss-xs-ms,xs=os.get(Is+2,Is+1),ms=Math.abs(gs)+Math.abs(ys)+Math.abs(xs),gs=gs/ms,ys=ys/ms,xs=xs/ms,!(Is===As||Math.abs(os.get(Is,Is-1))*(Math.abs(ys)+Math.abs(xs))<fs*(Math.abs(gs)*(Math.abs(os.get(Is-1,Is-1))+Math.abs(Ss)+Math.abs(os.get(Is+1,Is+1))))));)Is--;for($s=Is+2;$s<=is;$s++)os.set($s,$s-2,0),$s>Is+2&&os.set($s,$s-3,0);for(Cs=Is;Cs<=is-1&&(Ys=Cs!==is-1,Cs!==Is&&(gs=os.get(Cs,Cs-1),ys=os.get(Cs+1,Cs-1),xs=Ys?os.get(Cs+2,Cs-1):0,Ds=Math.abs(gs)+Math.abs(ys)+Math.abs(xs),Ds!==0&&(gs=gs/Ds,ys=ys/Ds,xs=xs/Ds)),Ds!==0);Cs++)if(ms=Math.sqrt(gs*gs+ys*ys+xs*xs),gs<0&&(ms=-ms),ms!==0){for(Cs!==Is?os.set(Cs,Cs-1,-ms*Ds):As!==Is&&os.set(Cs,Cs-1,-os.get(Cs,Cs-1)),gs=gs+ms,Ds=gs/ms,Fs=ys/ms,Ss=xs/ms,ys=ys/gs,xs=xs/gs,bs=Cs;bs<ns;bs++)gs=os.get(Cs,bs)+ys*os.get(Cs+1,bs),Ys&&(gs=gs+xs*os.get(Cs+2,bs),os.set(Cs+2,bs,os.get(Cs+2,bs)-gs*Ss)),os.set(Cs,bs,os.get(Cs,bs)-gs*Ds),os.set(Cs+1,bs,os.get(Cs+1,bs)-gs*Fs);for($s=0;$s<=Math.min(is,Cs+3);$s++)gs=Ds*os.get($s,Cs)+Fs*os.get($s,Cs+1),Ys&&(gs=gs+Ss*os.get($s,Cs+2),os.set($s,Cs+2,os.get($s,Cs+2)-gs*xs)),os.set($s,Cs,os.get($s,Cs)-gs),os.set($s,Cs+1,os.get($s,Cs+1)-gs*ys);for($s=us;$s<=ls;$s++)gs=Ds*as.get($s,Cs)+Fs*as.get($s,Cs+1),Ys&&(gs=gs+Ss*as.get($s,Cs+2),as.set($s,Cs+2,as.get($s,Cs+2)-gs*xs)),as.set($s,Cs,as.get($s,Cs)-gs),as.set($s,Cs+1,as.get($s,Cs+1)-gs*ys)}}}if(vs!==0){for(is=ns-1;is>=0;is--)if(gs=rs[is],ys=ts[is],ys===0)for(As=is,os.set(is,is,1),$s=is-1;$s>=0;$s--){for(Ps=os.get($s,$s)-gs,xs=0,bs=As;bs<=is;bs++)xs=xs+os.get($s,bs)*os.get(bs,is);if(ts[$s]<0)Ss=Ps,ms=xs;else if(As=$s,ts[$s]===0?os.set($s,is,Ps!==0?-xs/Ps:-xs/(fs*vs)):(Ds=os.get($s,$s+1),Fs=os.get($s+1,$s),ys=(rs[$s]-gs)*(rs[$s]-gs)+ts[$s]*ts[$s],ks=(Ds*ms-Ss*xs)/ys,os.set($s,is,ks),os.set($s+1,is,Math.abs(Ds)>Math.abs(Ss)?(-xs-Ps*ks)/Ds:(-ms-Fs*ks)/Ss)),ks=Math.abs(os.get($s,is)),fs*ks*ks>1)for(bs=$s;bs<=is;bs++)os.set(bs,is,os.get(bs,is)/ks)}else if(ys<0)for(As=is-1,Math.abs(os.get(is,is-1))>Math.abs(os.get(is-1,is))?(os.set(is-1,is-1,ys/os.get(is,is-1)),os.set(is-1,is,-(os.get(is,is)-gs)/os.get(is,is-1))):(Ks=cdiv(0,-os.get(is-1,is),os.get(is-1,is-1)-gs,ys),os.set(is-1,is-1,Ks[0]),os.set(is-1,is,Ks[1])),os.set(is,is-1,0),os.set(is,is,1),$s=is-2;$s>=0;$s--){for(Rs=0,js=0,bs=As;bs<=is;bs++)Rs=Rs+os.get($s,bs)*os.get(bs,is-1),js=js+os.get($s,bs)*os.get(bs,is);if(Ps=os.get($s,$s)-gs,ts[$s]<0)Ss=Ps,xs=Rs,ms=js;else if(As=$s,ts[$s]===0?(Ks=cdiv(-Rs,-js,Ps,ys),os.set($s,is-1,Ks[0]),os.set($s,is,Ks[1])):(Ds=os.get($s,$s+1),Fs=os.get($s+1,$s),zs=(rs[$s]-gs)*(rs[$s]-gs)+ts[$s]*ts[$s]-ys*ys,Us=(rs[$s]-gs)*2*ys,zs===0&&Us===0&&(zs=fs*vs*(Math.abs(Ps)+Math.abs(ys)+Math.abs(Ds)+Math.abs(Fs)+Math.abs(Ss))),Ks=cdiv(Ds*xs-Ss*Rs+ys*js,Ds*ms-Ss*js-ys*Rs,zs,Us),os.set($s,is-1,Ks[0]),os.set($s,is,Ks[1]),Math.abs(Ds)>Math.abs(Ss)+Math.abs(ys)?(os.set($s+1,is-1,(-Rs-Ps*os.get($s,is-1)+ys*os.get($s,is))/Ds),os.set($s+1,is,(-js-Ps*os.get($s,is)-ys*os.get($s,is-1))/Ds)):(Ks=cdiv(-xs-Fs*os.get($s,is-1),-ms-Fs*os.get($s,is),Ss,ys),os.set($s+1,is-1,Ks[0]),os.set($s+1,is,Ks[1]))),ks=Math.max(Math.abs(os.get($s,is-1)),Math.abs(os.get($s,is))),fs*ks*ks>1)for(bs=$s;bs<=is;bs++)os.set(bs,is-1,os.get(bs,is-1)/ks),os.set(bs,is,os.get(bs,is)/ks)}for($s=0;$s<ns;$s++)if($s<us||$s>ls)for(bs=$s;bs<ns;bs++)as.set($s,bs,os.get($s,bs));for(bs=ns-1;bs>=us;bs--)for($s=us;$s<=ls;$s++){for(Ss=0,Cs=us;Cs<=Math.min(bs,ls);Cs++)Ss=Ss+as.get($s,Cs)*os.get(Cs,bs);as.set($s,bs,Ss)}}}function cdiv(ns,ts,rs,as){let os,is;return Math.abs(rs)>Math.abs(as)?(os=as/rs,is=rs+os*as,[(ns+os*ts)/is,(ts-os*ns)/is]):(os=rs/as,is=as+os*rs,[(os*ns+ts)/is,(os*ts-ns)/is])}class CholeskyDecomposition{constructor(ts){if(ts=WrapperMatrix2D.checkMatrix(ts),!ts.isSymmetric())throw new Error("Matrix is not symmetric");let rs=ts,as=rs.rows,os=new Matrix(as,as),is=!0,us,ls,fs;for(ls=0;ls<as;ls++){let hs=0;for(fs=0;fs<ls;fs++){let vs=0;for(us=0;us<fs;us++)vs+=os.get(fs,us)*os.get(ls,us);vs=(rs.get(ls,fs)-vs)/os.get(fs,fs),os.set(ls,fs,vs),hs=hs+vs*vs}for(hs=rs.get(ls,ls)-hs,is&=hs>0,os.set(ls,ls,Math.sqrt(Math.max(hs,0))),fs=ls+1;fs<as;fs++)os.set(ls,fs,0)}this.L=os,this.positiveDefinite=!!is}isPositiveDefinite(){return this.positiveDefinite}solve(ts){ts=WrapperMatrix2D.checkMatrix(ts);let rs=this.L,as=rs.rows;if(ts.rows!==as)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let os=ts.columns,is=ts.clone(),us,ls,fs;for(fs=0;fs<as;fs++)for(ls=0;ls<os;ls++){for(us=0;us<fs;us++)is.set(fs,ls,is.get(fs,ls)-is.get(us,ls)*rs.get(fs,us));is.set(fs,ls,is.get(fs,ls)/rs.get(fs,fs))}for(fs=as-1;fs>=0;fs--)for(ls=0;ls<os;ls++){for(us=fs+1;us<as;us++)is.set(fs,ls,is.get(fs,ls)-is.get(us,ls)*rs.get(us,fs));is.set(fs,ls,is.get(fs,ls)/rs.get(fs,fs))}return is}get lowerTriangularMatrix(){return this.L}}class nipals{constructor(ts,rs={}){ts=WrapperMatrix2D.checkMatrix(ts);let{Y:as}=rs;const{scaleScores:os=!1,maxIterations:is=1e3,terminationCriteria:us=1e-10}=rs;let ls;if(as){if(Array.isArray(as)&&typeof as[0]=="number"?as=Matrix.columnVector(as):as=WrapperMatrix2D.checkMatrix(as),!as.isColumnVector()||as.rows!==ts.rows)throw new Error("Y must be a column vector of length X.rows");ls=as}else ls=ts.getColumnVector(0);let fs=1,hs,vs,gs,ys;for(let xs=0;xs<is&&fs>us;xs++)gs=ts.transpose().mmul(ls).div(ls.transpose().mmul(ls).get(0,0)),gs=gs.div(gs.norm()),hs=ts.mmul(gs).div(gs.transpose().mmul(gs).get(0,0)),xs>0&&(fs=hs.clone().sub(ys).pow(2).sum()),ys=hs.clone(),as?(vs=as.transpose().mmul(hs).div(hs.transpose().mmul(hs).get(0,0)),vs=vs.div(vs.norm()),ls=as.mmul(vs).div(vs.transpose().mmul(vs).get(0,0))):ls=hs;if(as){let xs=ts.transpose().mmul(hs).div(hs.transpose().mmul(hs).get(0,0));xs=xs.div(xs.norm());let ms=ts.clone().sub(hs.clone().mmul(xs.transpose())),Ss=ls.transpose().mmul(hs).div(hs.transpose().mmul(hs).get(0,0)),Ms=as.clone().sub(hs.clone().mulS(Ss.get(0,0)).mmul(vs.transpose()));this.t=hs,this.p=xs.transpose(),this.w=gs.transpose(),this.q=vs,this.u=ls,this.s=hs.transpose().mmul(hs),this.xResidual=ms,this.yResidual=Ms,this.betas=Ss}else this.w=gs.transpose(),this.s=hs.transpose().mmul(hs).sqrt(),os?this.t=hs.clone().div(this.s.get(0,0)):this.t=hs,this.xResidual=ts.sub(hs.mmul(gs.transpose()))}}const src=Object.freeze(Object.defineProperty({__proto__:null,AbstractMatrix,CHO:CholeskyDecomposition,CholeskyDecomposition,EVD:EigenvalueDecomposition,EigenvalueDecomposition,LU:LuDecomposition,LuDecomposition,Matrix,MatrixColumnSelectionView,MatrixColumnView,MatrixFlipColumnView,MatrixFlipRowView,MatrixRowSelectionView,MatrixRowView,MatrixSelectionView,MatrixSubView,MatrixTransposeView,NIPALS:nipals,Nipals:nipals,QR:QrDecomposition,QrDecomposition,SVD:SingularValueDecomposition,SingularValueDecomposition,WrapperMatrix1D,WrapperMatrix2D,correlation,covariance,default:Matrix,determinant,inverse,linearDependencies,pseudoInverse,solve,wrap},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(src);Object.defineProperty(mds$1,"__esModule",{value:!0});var ml_matrix_1$1=require$$0,MDS=function(){function ns(ts){this.distances=ts.distances,this.dimension=ts.dimension||2,this.linkDistance=ts.linkDistance}return ns.prototype.layout=function(){var ts=this,rs=ts.dimension,as=ts.distances,os=ts.linkDistance;try{var is=ml_matrix_1$1.Matrix.mul(ml_matrix_1$1.Matrix.pow(as,2),-.5),us=is.mean("row"),ls=is.mean("column"),fs=is.mean();is.add(fs).subRowVector(us).subColumnVector(ls);var hs=new ml_matrix_1$1.SingularValueDecomposition(is),vs=ml_matrix_1$1.Matrix.sqrt(hs.diagonalMatrix).diagonal();return hs.leftSingularVectors.toJSON().map(function(Ss){return ml_matrix_1$1.Matrix.mul([Ss],[vs]).toJSON()[0].splice(0,rs)})}catch{for(var gs=[],ys=0;ys<as.length;ys++){var xs=Math.random()*os,ms=Math.random()*os;gs.push([xs,ms])}return gs}},ns}();mds$1.default=MDS;var radialNonoverlapForce={};Object.defineProperty(radialNonoverlapForce,"__esModule",{value:!0});var SPEED_DIVISOR$1=800,RadialNonoverlapForce=function(){function ns(ts){this.disp=[],this.positions=ts.positions,this.adjMatrix=ts.adjMatrix,this.focusID=ts.focusID,this.radii=ts.radii,this.iterations=ts.iterations||10,this.height=ts.height||10,this.width=ts.width||10,this.speed=ts.speed||100,this.gravity=ts.gravity||10,this.nodeSizeFunc=ts.nodeSizeFunc,this.k=ts.k||5,this.strictRadial=ts.strictRadial,this.nodes=ts.nodes}return ns.prototype.layout=function(){var ts=this,rs=ts.positions,as=[],os=ts.iterations,is=ts.width/10;ts.maxDisplace=is,ts.disp=as;for(var us=0;us<os;us++)rs.forEach(function(ls,fs){as[fs]={x:0,y:0}}),ts.getRepulsion(),ts.updatePositions();return rs},ns.prototype.getRepulsion=function(){var ts=this,rs=ts.positions,as=ts.nodes,os=ts.disp,is=ts.k,us=ts.radii||[];rs.forEach(function(ls,fs){os[fs]={x:0,y:0},rs.forEach(function(hs,vs){if(fs!==vs&&us[fs]===us[vs]){var gs=ls[0]-hs[0],ys=ls[1]-hs[1],xs=Math.sqrt(gs*gs+ys*ys);if(xs===0){xs=1;var ms=fs>vs?1:-1;gs=.01*ms,ys=.01*ms}if(xs<ts.nodeSizeFunc(as[fs])/2+ts.nodeSizeFunc(as[vs])/2){var Ss=is*is/xs;os[fs].x+=gs/xs*Ss,os[fs].y+=ys/xs*Ss}}})})},ns.prototype.updatePositions=function(){var ts=this,rs=ts.positions,as=ts.disp,os=ts.speed,is=ts.strictRadial,us=ts.focusID,ls=ts.maxDisplace||ts.width/10;is&&as.forEach(function(hs,vs){var gs=rs[vs][0]-rs[us][0],ys=rs[vs][1]-rs[us][1],xs=Math.sqrt(gs*gs+ys*ys),ms=ys/xs,Ss=-gs/xs,Ms=Math.sqrt(hs.x*hs.x+hs.y*hs.y),$s=Math.acos((ms*hs.x+Ss*hs.y)/Ms);$s>Math.PI/2&&($s-=Math.PI/2,ms*=-1,Ss*=-1);var bs=Math.cos($s)*Ms;hs.x=ms*bs,hs.y=Ss*bs});var fs=ts.radii;rs.forEach(function(hs,vs){if(vs!==us){var gs=Math.sqrt(as[vs].x*as[vs].x+as[vs].y*as[vs].y);if(gs>0&&vs!==us){var ys=Math.min(ls*(os/SPEED_DIVISOR$1),gs);if(hs[0]+=as[vs].x/gs*ys,hs[1]+=as[vs].y/gs*ys,is){var xs=hs[0]-rs[us][0],ms=hs[1]-rs[us][1],Ss=Math.sqrt(xs*xs+ms*ms);xs=xs/Ss*fs[vs],ms=ms/Ss*fs[vs],hs[0]=rs[us][0]+xs,hs[1]=rs[us][1]+ms}}}})},ns}();radialNonoverlapForce.default=RadialNonoverlapForce;var __extends$l=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(ns){return ns&&ns.__esModule?ns:{default:ns}};Object.defineProperty(radial,"__esModule",{value:!0});radial.RadialLayout=void 0;var util_1$7=requireUtil(),base_1$8=base$1,mds_1=__importDefault$4(mds$1),radialNonoverlapForce_1=__importDefault$4(radialNonoverlapForce);function getWeightMatrix(ns){for(var ts=ns.length,rs=ns[0].length,as=[],os=0;os<ts;os++){for(var is=[],us=0;us<rs;us++)ns[os][us]!==0?is.push(1/(ns[os][us]*ns[os][us])):is.push(0);as.push(is)}return as}function getIndexById(ns,ts){var rs=-1;return ns.forEach(function(as,os){as.id===ts&&(rs=os)}),rs}function getEDistance(ns,ts){return Math.sqrt((ns[0]-ts[0])*(ns[0]-ts[0])+(ns[1]-ts[1])*(ns[1]-ts[1]))}var RadialLayout=function(ns){__extends$l(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.maxIteration=1e3,as.focusNode=null,as.unitRadius=null,as.linkDistance=50,as.preventOverlap=!1,as.strictRadial=!0,as.maxPreventOverlapIteration=200,as.sortStrength=10,as.nodes=[],as.edges=[],as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},ts.prototype.execute=function(){var rs=this,as=rs.nodes,os=rs.edges||[];if(!as||as.length===0){rs.onLayoutEnd&&rs.onLayoutEnd();return}!rs.width&&typeof window<"u"&&(rs.width=window.innerWidth),!rs.height&&typeof window<"u"&&(rs.height=window.innerHeight),rs.center||(rs.center=[rs.width/2,rs.height/2]);var is=rs.center;if(as.length===1){as[0].x=is[0],as[0].y=is[1],rs.onLayoutEnd&&rs.onLayoutEnd();return}var us=rs.linkDistance,ls=null;if((0,util_1$7.isString)(rs.focusNode)){for(var fs=!1,hs=0;hs<as.length;hs++)as[hs].id===rs.focusNode&&(ls=as[hs],rs.focusNode=ls,fs=!0,hs=as.length);fs||(ls=null)}else ls=rs.focusNode;ls||(ls=as[0],rs.focusNode=ls);var vs=getIndexById(as,ls.id);vs<0&&(vs=0),rs.focusIndex=vs;var gs=(0,util_1$7.getAdjMatrix)({nodes:as,edges:os},!1),ys=(0,util_1$7.floydWarshall)(gs),xs=rs.maxToFocus(ys,vs);rs.handleInfinity(ys,vs,xs+1),rs.distances=ys;var ms=ys[vs],Ss=rs.width||500,Ms=rs.height||500,$s=Ss-is[0]>is[0]?is[0]:Ss-is[0],bs=Ms-is[1]>is[1]?is[1]:Ms-is[1];$s===0&&($s=Ss/2),bs===0&&(bs=Ms/2);var Cs=bs>$s?$s:bs,As=Math.max.apply(Math,ms),Is=[];ms.forEach(function(Js,Vs){rs.unitRadius||(rs.unitRadius=Cs/As),Is[Vs]=Js*rs.unitRadius}),rs.radii=Is;var ks=rs.eIdealDisMatrix();rs.eIdealDistances=ks;var Ps=getWeightMatrix(ks);rs.weights=Ps;var Ds=new mds_1.default({linkDistance:us,distances:ks}),Fs=Ds.layout();Fs.forEach(function(Js){(0,util_1$7.isNaN)(Js[0])&&(Js[0]=Math.random()*us),(0,util_1$7.isNaN)(Js[1])&&(Js[1]=Math.random()*us)}),rs.positions=Fs,Fs.forEach(function(Js,Vs){as[Vs].x=Js[0]+is[0],as[Vs].y=Js[1]+is[1]}),Fs.forEach(function(Js){Js[0]-=Fs[vs][0],Js[1]-=Fs[vs][1]}),rs.run();var Rs=rs.preventOverlap,js=rs.nodeSize,zs,Us=rs.strictRadial;if(Rs){var Ys=rs.nodeSpacing,Ks;(0,util_1$7.isNumber)(Ys)?Ks=function(){return Ys}:(0,util_1$7.isFunction)(Ys)?Ks=Ys:Ks=function(){return 0},js?(0,util_1$7.isArray)(js)?zs=function(Js){var Vs=js[0]>js[1]?js[0]:js[1];return Vs+Ks(Js)}:zs=function(Js){return js+Ks(Js)}:zs=function(Js){if(Js.size){if((0,util_1$7.isArray)(Js.size)){var Vs=Js.size[0]>Js.size[1]?Js.size[0]:Js.size[1];return Vs+Ks(Js)}if((0,util_1$7.isObject)(Js.size)){var Vs=Js.size.width>Js.size.height?Js.size.width:Js.size.height;return Vs+Ks(Js)}return Js.size+Ks(Js)}return 10+Ks(Js)};var qs={nodes:as,nodeSizeFunc:zs,adjMatrix:gs,positions:Fs,radii:Is,height:Ms,width:Ss,strictRadial:Us,focusID:vs,iterations:rs.maxPreventOverlapIteration||200,k:Fs.length/4.5},_l=new radialNonoverlapForce_1.default(qs);Fs=_l.layout()}return Fs.forEach(function(Js,Vs){as[Vs].x=Js[0]+is[0],as[Vs].y=Js[1]+is[1]}),rs.onLayoutEnd&&rs.onLayoutEnd(),{nodes:as,edges:os}},ts.prototype.run=function(){for(var rs=this,as=rs.maxIteration,os=rs.positions||[],is=rs.weights||[],us=rs.eIdealDistances||[],ls=rs.radii||[],fs=0;fs<=as;fs++){var hs=fs/as;rs.oneIteration(hs,os,ls,us,is)}},ts.prototype.oneIteration=function(rs,as,os,is,us){var ls=this,fs=1-rs,hs=ls.focusIndex;as.forEach(function(vs,gs){var ys=getEDistance(vs,[0,0]),xs=ys===0?0:1/ys;if(gs!==hs){var ms=0,Ss=0,Ms=0;as.forEach(function(bs,Cs){if(gs!==Cs){var As=getEDistance(vs,bs),Is=As===0?0:1/As,ks=is[Cs][gs];Ms+=us[gs][Cs],ms+=us[gs][Cs]*(bs[0]+ks*(vs[0]-bs[0])*Is),Ss+=us[gs][Cs]*(bs[1]+ks*(vs[1]-bs[1])*Is)}});var $s=os[gs]===0?0:1/os[gs];Ms*=fs,Ms+=rs*$s*$s,ms*=fs,ms+=rs*$s*vs[0]*xs,vs[0]=ms/Ms,Ss*=fs,Ss+=rs*$s*vs[1]*xs,vs[1]=Ss/Ms}})},ts.prototype.eIdealDisMatrix=function(){var rs=this,as=rs.nodes;if(!as)return[];var os=rs.distances,is=rs.linkDistance,us=rs.radii||[],ls=rs.unitRadius||50,fs=[];return os&&os.forEach(function(hs,vs){var gs=[];hs.forEach(function(ys,xs){if(vs===xs)gs.push(0);else if(us[vs]===us[xs])if(rs.sortBy==="data")gs.push(ys*(Math.abs(vs-xs)*rs.sortStrength)/(us[vs]/ls));else if(rs.sortBy){var ms=as[vs][rs.sortBy]||0,Ss=as[xs][rs.sortBy]||0;(0,util_1$7.isString)(ms)&&(ms=ms.charCodeAt(0)),(0,util_1$7.isString)(Ss)&&(Ss=Ss.charCodeAt(0)),gs.push(ys*(Math.abs(ms-Ss)*rs.sortStrength)/(us[vs]/ls))}else gs.push(ys*is/(us[vs]/ls));else{var Ms=(is+ls)/2;gs.push(ys*Ms)}}),fs.push(gs)}),fs},ts.prototype.handleInfinity=function(rs,as,os){for(var is=rs.length,us=0;us<is;us++)if(rs[as][us]===1/0){rs[as][us]=os,rs[us][as]=os;for(var ls=0;ls<is;ls++)rs[us][ls]!==1/0&&rs[as][ls]===1/0&&(rs[as][ls]=os+rs[us][ls],rs[ls][as]=os+rs[us][ls])}for(var us=0;us<is;us++)if(us!==as){for(var ls=0;ls<is;ls++)if(rs[us][ls]===1/0){var fs=Math.abs(rs[as][us]-rs[as][ls]);fs=fs===0?1:fs,rs[us][ls]=fs}}},ts.prototype.maxToFocus=function(rs,as){for(var os=0,is=0;is<rs[as].length;is++)rs[as][is]!==1/0&&(os=rs[as][is]>os?rs[as][is]:os);return os},ts.prototype.getType=function(){return"radial"},ts}(base_1$8.Base);radial.RadialLayout=RadialLayout;(function(ns){var ts=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(as,os,is,us){us===void 0&&(us=is);var ls=Object.getOwnPropertyDescriptor(os,is);(!ls||("get"in ls?!os.__esModule:ls.writable||ls.configurable))&&(ls={enumerable:!0,get:function(){return os[is]}}),Object.defineProperty(as,us,ls)}:function(as,os,is,us){us===void 0&&(us=is),as[us]=os[is]}),rs=commonjsGlobal&&commonjsGlobal.__exportStar||function(as,os){for(var is in as)is!=="default"&&!Object.prototype.hasOwnProperty.call(os,is)&&ts(os,as,is)};Object.defineProperty(ns,"__esModule",{value:!0}),rs(radial,ns)})(radial$1);var concentric={},__extends$k=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}();Object.defineProperty(concentric,"__esModule",{value:!0});concentric.ConcentricLayout=void 0;var util_1$6=requireUtil(),base_1$7=base$1,ConcentricLayout=function(ns){__extends$k(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.nodeSize=30,as.minNodeSpacing=10,as.nodeSpacing=10,as.preventOverlap=!1,as.equidistant=!1,as.startAngle=3/2*Math.PI,as.clockwise=!0,as.sortBy="degree",as.nodes=[],as.edges=[],as.width=300,as.height=300,as.onLayoutEnd=function(){},as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},ts.prototype.execute=function(){var rs,as,os=this,is=os.nodes,us=os.edges,ls=is.length;if(ls===0){(rs=os.onLayoutEnd)===null||rs===void 0||rs.call(os);return}!os.width&&typeof window<"u"&&(os.width=window.innerWidth),!os.height&&typeof window<"u"&&(os.height=window.innerHeight),os.center||(os.center=[os.width/2,os.height/2]);var fs=os.center;if(ls===1){is[0].x=fs[0],is[0].y=fs[1],(as=os.onLayoutEnd)===null||as===void 0||as.call(os);return}var hs=os.nodeSize,vs=os.nodeSpacing,gs=[],ys,xs=0;(0,util_1$6.isArray)(hs)?ys=Math.max(hs[0],hs[1]):ys=hs,(0,util_1$6.isArray)(vs)?xs=Math.max(vs[0],vs[1]):(0,util_1$6.isNumber)(vs)&&(xs=vs),is.forEach(function(Us){gs.push(Us);var Ys=ys;(0,util_1$6.isArray)(Us.size)?Ys=Math.max(Us.size[0],Us.size[1]):(0,util_1$6.isNumber)(Us.size)?Ys=Us.size:(0,util_1$6.isObject)(Us.size)&&(Ys=Math.max(Us.size.width,Us.size.height)),ys=Math.max(ys,Ys),(0,util_1$6.isFunction)(vs)&&(xs=Math.max(vs(Us),xs))}),os.clockwise=os.counterclockwise!==void 0?!os.counterclockwise:os.clockwise;var ms={},Ss={};if(gs.forEach(function(Us,Ys){ms[Us.id]=Us,Ss[Us.id]=Ys}),(os.sortBy==="degree"||!(0,util_1$6.isString)(os.sortBy)||gs[0][os.sortBy]===void 0)&&(os.sortBy="degree",!(0,util_1$6.isNumber)(is[0].degree))){var Ms=(0,util_1$6.getDegree)(is.length,Ss,us);gs.forEach(function(Us,Ys){Us.degree=Ms[Ys].all})}gs.sort(function(Us,Ys){return Ys[os.sortBy]-Us[os.sortBy]}),os.maxValueNode=gs[0],os.maxLevelDiff=os.maxLevelDiff||os.maxValueNode[os.sortBy]/4;var $s=[[]],bs=$s[0];gs.forEach(function(Us){if(bs.length>0){var Ys=Math.abs(bs[0][os.sortBy]-Us[os.sortBy]);os.maxLevelDiff&&Ys>=os.maxLevelDiff&&(bs=[],$s.push(bs))}bs.push(Us)});var Cs=ys+(xs||os.minNodeSpacing);if(!os.preventOverlap){var As=$s.length>0&&$s[0].length>1,Is=Math.min(os.width,os.height)/2-Cs,ks=Is/($s.length+(As?1:0));Cs=Math.min(Cs,ks)}var Ps=0;if($s.forEach(function(Us){var Ys=os.sweep;Ys===void 0&&(Ys=2*Math.PI-2*Math.PI/Us.length);var Ks=Us.dTheta=Ys/Math.max(1,Us.length-1);if(Us.length>1&&os.preventOverlap){var qs=Math.cos(Ks)-Math.cos(0),_l=Math.sin(Ks)-Math.sin(0),Js=Math.sqrt(Cs*Cs/(qs*qs+_l*_l));Ps=Math.max(Js,Ps)}Us.r=Ps,Ps+=Cs}),os.equidistant){for(var Ds=0,Fs=0,Rs=0;Rs<$s.length;Rs++){var js=$s[Rs],zs=js.r-Fs;Ds=Math.max(Ds,zs)}Fs=0,$s.forEach(function(Us,Ys){Ys===0&&(Fs=Us.r),Us.r=Fs,Fs+=Ds})}return $s.forEach(function(Us){var Ys=Us.dTheta,Ks=Us.r;Us.forEach(function(qs,_l){var Js=os.startAngle+(os.clockwise?1:-1)*Ys*_l;qs.x=fs[0]+Ks*Math.cos(Js),qs.y=fs[1]+Ks*Math.sin(Js)})}),os.onLayoutEnd&&os.onLayoutEnd(),{nodes:is,edges:us}},ts.prototype.getType=function(){return"concentric"},ts}(base_1$7.Base);concentric.ConcentricLayout=ConcentricLayout;var mds={},__extends$j=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}();Object.defineProperty(mds,"__esModule",{value:!0});mds.MDSLayout=void 0;var ml_matrix_1=require$$0,util_1$5=requireUtil(),base_1$6=base$1,MDSLayout=function(ns){__extends$j(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.center=[0,0],as.linkDistance=50,as.nodes=[],as.edges=[],as.onLayoutEnd=function(){},as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},ts.prototype.execute=function(){var rs=this,as=rs.nodes,os=rs.edges,is=os===void 0?[]:os,us=rs.center;if(!as||as.length===0){rs.onLayoutEnd&&rs.onLayoutEnd();return}if(as.length===1){as[0].x=us[0],as[0].y=us[1],rs.onLayoutEnd&&rs.onLayoutEnd();return}var ls=rs.linkDistance,fs=(0,util_1$5.getAdjMatrix)({nodes:as,edges:is},!1),hs=(0,util_1$5.floydWarshall)(fs);rs.handleInfinity(hs);var vs=(0,util_1$5.scaleMatrix)(hs,ls);rs.scaledDistances=vs;var gs=rs.runMDS();return rs.positions=gs,gs.forEach(function(ys,xs){as[xs].x=ys[0]+us[0],as[xs].y=ys[1]+us[1]}),rs.onLayoutEnd&&rs.onLayoutEnd(),{nodes:as,edges:is}},ts.prototype.runMDS=function(){var rs=this,as=2,os=rs.scaledDistances,is=ml_matrix_1.Matrix.mul(ml_matrix_1.Matrix.pow(os,2),-.5),us=is.mean("row"),ls=is.mean("column"),fs=is.mean();is.add(fs).subRowVector(us).subColumnVector(ls);var hs=new ml_matrix_1.SingularValueDecomposition(is),vs=ml_matrix_1.Matrix.sqrt(hs.diagonalMatrix).diagonal();return hs.leftSingularVectors.toJSON().map(function(gs){return ml_matrix_1.Matrix.mul([gs],[vs]).toJSON()[0].splice(0,as)})},ts.prototype.handleInfinity=function(rs){var as=-999999;rs.forEach(function(os){os.forEach(function(is){is!==1/0&&as<is&&(as=is)})}),rs.forEach(function(os,is){os.forEach(function(us,ls){us===1/0&&(rs[is][ls]=as)})})},ts.prototype.getType=function(){return"mds"},ts}(base_1$6.Base);mds.MDSLayout=MDSLayout;var fruchterman$1={},__extends$i=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}();Object.defineProperty(fruchterman$1,"__esModule",{value:!0});fruchterman$1.FruchtermanLayout=void 0;var base_1$5=base$1,util_1$4=requireUtil(),SPEED_DIVISOR=800,FruchtermanLayout=function(ns){__extends$i(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.maxIteration=1e3,as.workerEnabled=!1,as.gravity=10,as.speed=5,as.clustering=!1,as.clusterGravity=10,as.nodes=[],as.edges=[],as.width=300,as.height=300,as.nodeMap={},as.nodeIdxMap={},as.onLayoutEnd=function(){},as.tick=function(){},as.animate=!0,as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},ts.prototype.execute=function(){var rs=this,as,os,is=this,us=is.nodes;if(is.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(is.timeInterval),!us||us.length===0){(as=is.onLayoutEnd)===null||as===void 0||as.call(is);return}!is.width&&typeof window<"u"&&(is.width=window.innerWidth),!is.height&&typeof window<"u"&&(is.height=window.innerHeight),is.center||(is.center=[is.width/2,is.height/2]);var ls=is.center;if(us.length===1){us[0].x=ls[0],us[0].y=ls[1],(os=is.onLayoutEnd)===null||os===void 0||os.call(is);return}var fs={},hs={};return us.forEach(function(vs,gs){(0,util_1$4.isNumber)(vs.x)||(vs.x=Math.random()*rs.width),(0,util_1$4.isNumber)(vs.y)||(vs.y=Math.random()*rs.height),fs[vs.id]=vs,hs[vs.id]=gs}),is.nodeMap=fs,is.nodeIdxMap=hs,is.run()},ts.prototype.run=function(){var rs,as=this,os=as.nodes;if(os){var is=as.edges,us=as.maxIteration,ls=as.workerEnabled,fs=as.clustering,hs=as.animate,vs={};if(fs&&os.forEach(function(xs){vs[xs.cluster]===void 0&&(vs[xs.cluster]={name:xs.cluster,cx:0,cy:0,count:0})}),ls||!hs){for(var gs=0;gs<us;gs++)as.runOneStep(vs);(rs=as.onLayoutEnd)===null||rs===void 0||rs.call(as)}else{if(typeof window>"u")return;var ys=0;this.timeInterval=window.setInterval(function(){var xs;as.runOneStep(vs),ys++,ys>=us&&((xs=as.onLayoutEnd)===null||xs===void 0||xs.call(as),window.clearInterval(as.timeInterval))},0)}return{nodes:os,edges:is}}},ts.prototype.runOneStep=function(rs){var as,os=this,is=os.nodes;if(is){var us=os.edges,ls=os.center,fs=os.gravity,hs=os.speed,vs=os.clustering,gs=os.height*os.width,ys=Math.sqrt(gs)/10,xs=gs/(is.length+1),ms=Math.sqrt(xs),Ss=[];if(is.forEach(function(bs,Cs){Ss[Cs]={x:0,y:0}}),os.applyCalculate(is,us,Ss,ms,xs),vs){for(var Ms in rs)rs[Ms].cx=0,rs[Ms].cy=0,rs[Ms].count=0;is.forEach(function(bs){var Cs=rs[bs.cluster];(0,util_1$4.isNumber)(bs.x)&&(Cs.cx+=bs.x),(0,util_1$4.isNumber)(bs.y)&&(Cs.cy+=bs.y),Cs.count++});for(var Ms in rs)rs[Ms].cx/=rs[Ms].count,rs[Ms].cy/=rs[Ms].count;var $s=os.clusterGravity||fs;is.forEach(function(bs,Cs){if(!(!(0,util_1$4.isNumber)(bs.x)||!(0,util_1$4.isNumber)(bs.y))){var As=rs[bs.cluster],Is=Math.sqrt((bs.x-As.cx)*(bs.x-As.cx)+(bs.y-As.cy)*(bs.y-As.cy)),ks=ms*$s;Ss[Cs].x-=ks*(bs.x-As.cx)/Is,Ss[Cs].y-=ks*(bs.y-As.cy)/Is}})}is.forEach(function(bs,Cs){if(!(!(0,util_1$4.isNumber)(bs.x)||!(0,util_1$4.isNumber)(bs.y))){var As=.01*ms*fs;Ss[Cs].x-=As*(bs.x-ls[0]),Ss[Cs].y-=As*(bs.y-ls[1])}}),is.forEach(function(bs,Cs){if((0,util_1$4.isNumber)(bs.fx)&&(0,util_1$4.isNumber)(bs.fy)){bs.x=bs.fx,bs.y=bs.fy;return}if(!(!(0,util_1$4.isNumber)(bs.x)||!(0,util_1$4.isNumber)(bs.y))){var As=Math.sqrt(Ss[Cs].x*Ss[Cs].x+Ss[Cs].y*Ss[Cs].y);if(As>0){var Is=Math.min(ys*(hs/SPEED_DIVISOR),As);bs.x+=Ss[Cs].x/As*Is,bs.y+=Ss[Cs].y/As*Is}}}),(as=os.tick)===null||as===void 0||as.call(os)}},ts.prototype.applyCalculate=function(rs,as,os,is,us){var ls=this;ls.calRepulsive(rs,os,us),as&&ls.calAttractive(as,os,is)},ts.prototype.calRepulsive=function(rs,as,os){rs.forEach(function(is,us){as[us]={x:0,y:0},rs.forEach(function(ls,fs){if(us!==fs&&!(!(0,util_1$4.isNumber)(is.x)||!(0,util_1$4.isNumber)(ls.x)||!(0,util_1$4.isNumber)(is.y)||!(0,util_1$4.isNumber)(ls.y))){var hs=is.x-ls.x,vs=is.y-ls.y,gs=hs*hs+vs*vs;if(gs===0){gs=1;var ys=us>fs?1:-1;hs=.01*ys,vs=.01*ys}var xs=os/gs;as[us].x+=hs*xs,as[us].y+=vs*xs}})})},ts.prototype.calAttractive=function(rs,as,os){var is=this;rs.forEach(function(us){var ls=(0,util_1$4.getEdgeTerminal)(us,"source"),fs=(0,util_1$4.getEdgeTerminal)(us,"target");if(!(!ls||!fs)){var hs=is.nodeIdxMap[ls],vs=is.nodeIdxMap[fs];if(hs!==vs){var gs=is.nodeMap[ls],ys=is.nodeMap[fs];if(!(!(0,util_1$4.isNumber)(ys.x)||!(0,util_1$4.isNumber)(gs.x)||!(0,util_1$4.isNumber)(ys.y)||!(0,util_1$4.isNumber)(gs.y))){var xs=ys.x-gs.x,ms=ys.y-gs.y,Ss=Math.sqrt(xs*xs+ms*ms),Ms=Ss*Ss/os;as[vs].x-=xs/Ss*Ms,as[vs].y-=ms/Ss*Ms,as[hs].x+=xs/Ss*Ms,as[hs].y+=ms/Ss*Ms}}}})},ts.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},ts.prototype.destroy=function(){var rs=this;rs.stop(),rs.tick=null,rs.nodes=null,rs.edges=null,rs.destroyed=!0},ts.prototype.getType=function(){return"fruchterman"},ts}(base_1$5.Base);fruchterman$1.FruchtermanLayout=FruchtermanLayout;var fruchterman={};function asyncGeneratorStep(ns,ts,rs,as,os,is,us){try{var ls=ns[is](us),fs=ls.value}catch(hs){rs(hs);return}ls.done?ts(fs):Promise.resolve(fs).then(as,os)}function _asyncToGenerator(ns){return function(){var ts=this,rs=arguments;return new Promise(function(as,os){var is=ns.apply(ts,rs);function us(fs){asyncGeneratorStep(is,as,os,us,ls,"next",fs)}function ls(fs){asyncGeneratorStep(is,as,os,us,ls,"throw",fs)}us(void 0)})}}function _typeof$6(ns){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ts){return typeof ts}:function(ts){return ts&&typeof Symbol=="function"&&ts.constructor===Symbol&&ts!==Symbol.prototype?"symbol":typeof ts},_typeof$6(ns)}function _toPrimitive(ns,ts){if(_typeof$6(ns)!=="object"||ns===null)return ns;var rs=ns[Symbol.toPrimitive];if(rs!==void 0){var as=rs.call(ns,ts||"default");if(_typeof$6(as)!=="object")return as;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ts==="string"?String:Number)(ns)}function _toPropertyKey(ns){var ts=_toPrimitive(ns,"string");return _typeof$6(ts)==="symbol"?ts:String(ts)}function _defineProperty$2(ns,ts,rs){return ts=_toPropertyKey(ts),ts in ns?Object.defineProperty(ns,ts,{value:rs,enumerable:!0,configurable:!0,writable:!0}):ns[ts]=rs,ns}function _classCallCheck$1(ns,ts){if(!(ns instanceof ts))throw new TypeError("Cannot call a class as a function")}function _defineProperties(ns,ts){for(var rs=0;rs<ts.length;rs++){var as=ts[rs];as.enumerable=as.enumerable||!1,as.configurable=!0,"value"in as&&(as.writable=!0),Object.defineProperty(ns,_toPropertyKey(as.key),as)}}function _createClass$1(ns,ts,rs){return ts&&_defineProperties(ns.prototype,ts),rs&&_defineProperties(ns,rs),Object.defineProperty(ns,"prototype",{writable:!1}),ns}var freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),_root=root$1,root=_root,Symbol$3=root.Symbol,_Symbol=Symbol$3,Symbol$2=_Symbol,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty,nativeObjectToString$1=objectProto$2.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag$1(ns){var ts=hasOwnProperty$2.call(ns,symToStringTag$1),rs=ns[symToStringTag$1];try{ns[symToStringTag$1]=void 0;var as=!0}catch{}var os=nativeObjectToString$1.call(ns);return as&&(ts?ns[symToStringTag$1]=rs:delete ns[symToStringTag$1]),os}var _getRawTag=getRawTag$1,objectProto$1=Object.prototype,nativeObjectToString=objectProto$1.toString;function objectToString$1(ns){return nativeObjectToString.call(ns)}var _objectToString=objectToString$1,Symbol$1=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag$3(ns){return ns==null?ns===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(ns)?getRawTag(ns):objectToString(ns)}var _baseGetTag=baseGetTag$3,MAX_SAFE_INTEGER=9007199254740991;function isLength$1(ns){return typeof ns=="number"&&ns>-1&&ns%1==0&&ns<=MAX_SAFE_INTEGER}var isLength_1=isLength$1;function isObjectLike$3(ns){return ns!=null&&typeof ns=="object"}var isObjectLike_1=isObjectLike$3,baseGetTag$2=_baseGetTag,isLength=isLength_1,isObjectLike$2=isObjectLike_1,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$1]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;function baseIsTypedArray$1(ns){return isObjectLike$2(ns)&&isLength(ns.length)&&!!typedArrayTags[baseGetTag$2(ns)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$1(ns){return function(ts){return ns(ts)}}var _baseUnary=baseUnary$1,_nodeUtil={exports:{}};_nodeUtil.exports;(function(ns,ts){var rs=_freeGlobal,as=ts&&!ts.nodeType&&ts,os=as&&!0&&ns&&!ns.nodeType&&ns,is=os&&os.exports===as,us=is&&rs.process,ls=function(){try{var fs=os&&os.require&&os.require("util").types;return fs||us&&us.binding&&us.binding("util")}catch{}}();ns.exports=ls})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray;const _isTypedArray=getDefaultExportFromCjs(isTypedArray_1);var baseGetTag$1=_baseGetTag,isObjectLike$1=isObjectLike_1,numberTag="[object Number]";function isNumber(ns){return typeof ns=="number"||isObjectLike$1(ns)&&baseGetTag$1(ns)==numberTag}var isNumber_1=isNumber;const _isNumber=getDefaultExportFromCjs(isNumber_1);var isArray=Array.isArray,isArray_1=isArray;const _isArray=getDefaultExportFromCjs(isArray_1);var regeneratorRuntime$1={exports:{}},_typeof$5={exports:{}};(function(ns){function ts(rs){"@babel/helpers - typeof";return ns.exports=ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(as){return typeof as}:function(as){return as&&typeof Symbol=="function"&&as.constructor===Symbol&&as!==Symbol.prototype?"symbol":typeof as},ns.exports.__esModule=!0,ns.exports.default=ns.exports,ts(rs)}ns.exports=ts,ns.exports.__esModule=!0,ns.exports.default=ns.exports})(_typeof$5);var _typeofExports=_typeof$5.exports;(function(ns){var ts=_typeofExports.default;function rs(){ns.exports=rs=function(){return os},ns.exports.__esModule=!0,ns.exports.default=ns.exports;var as,os={},is=Object.prototype,us=is.hasOwnProperty,ls=Object.defineProperty||function(Vs,Zs,Sl){Vs[Zs]=Sl.value},fs=typeof Symbol=="function"?Symbol:{},hs=fs.iterator||"@@iterator",vs=fs.asyncIterator||"@@asyncIterator",gs=fs.toStringTag||"@@toStringTag";function ys(Vs,Zs,Sl){return Object.defineProperty(Vs,Zs,{value:Sl,enumerable:!0,configurable:!0,writable:!0}),Vs[Zs]}try{ys({},"")}catch{ys=function(Sl,Il,Nl){return Sl[Il]=Nl}}function xs(Vs,Zs,Sl,Il){var Nl=Zs&&Zs.prototype instanceof As?Zs:As,Tl=Object.create(Nl.prototype),_c=new _l(Il||[]);return ls(Tl,"_invoke",{value:Us(Vs,Sl,_c)}),Tl}function ms(Vs,Zs,Sl){try{return{type:"normal",arg:Vs.call(Zs,Sl)}}catch(Il){return{type:"throw",arg:Il}}}os.wrap=xs;var Ss="suspendedStart",Ms="suspendedYield",$s="executing",bs="completed",Cs={};function As(){}function Is(){}function ks(){}var Ps={};ys(Ps,hs,function(){return this});var Ds=Object.getPrototypeOf,Fs=Ds&&Ds(Ds(Js([])));Fs&&Fs!==is&&us.call(Fs,hs)&&(Ps=Fs);var Rs=ks.prototype=As.prototype=Object.create(Ps);function js(Vs){["next","throw","return"].forEach(function(Zs){ys(Vs,Zs,function(Sl){return this._invoke(Zs,Sl)})})}function zs(Vs,Zs){function Sl(Nl,Tl,_c,l0){var g0=ms(Vs[Nl],Vs,Tl);if(g0.type!=="throw"){var R0=g0.arg,V0=R0.value;return V0&&ts(V0)=="object"&&us.call(V0,"__await")?Zs.resolve(V0.__await).then(function(U0){Sl("next",U0,_c,l0)},function(U0){Sl("throw",U0,_c,l0)}):Zs.resolve(V0).then(function(U0){R0.value=U0,_c(R0)},function(U0){return Sl("throw",U0,_c,l0)})}l0(g0.arg)}var Il;ls(this,"_invoke",{value:function(Tl,_c){function l0(){return new Zs(function(g0,R0){Sl(Tl,_c,g0,R0)})}return Il=Il?Il.then(l0,l0):l0()}})}function Us(Vs,Zs,Sl){var Il=Ss;return function(Nl,Tl){if(Il===$s)throw new Error("Generator is already running");if(Il===bs){if(Nl==="throw")throw Tl;return{value:as,done:!0}}for(Sl.method=Nl,Sl.arg=Tl;;){var _c=Sl.delegate;if(_c){var l0=Ys(_c,Sl);if(l0){if(l0===Cs)continue;return l0}}if(Sl.method==="next")Sl.sent=Sl._sent=Sl.arg;else if(Sl.method==="throw"){if(Il===Ss)throw Il=bs,Sl.arg;Sl.dispatchException(Sl.arg)}else Sl.method==="return"&&Sl.abrupt("return",Sl.arg);Il=$s;var g0=ms(Vs,Zs,Sl);if(g0.type==="normal"){if(Il=Sl.done?bs:Ms,g0.arg===Cs)continue;return{value:g0.arg,done:Sl.done}}g0.type==="throw"&&(Il=bs,Sl.method="throw",Sl.arg=g0.arg)}}}function Ys(Vs,Zs){var Sl=Zs.method,Il=Vs.iterator[Sl];if(Il===as)return Zs.delegate=null,Sl==="throw"&&Vs.iterator.return&&(Zs.method="return",Zs.arg=as,Ys(Vs,Zs),Zs.method==="throw")||Sl!=="return"&&(Zs.method="throw",Zs.arg=new TypeError("The iterator does not provide a '"+Sl+"' method")),Cs;var Nl=ms(Il,Vs.iterator,Zs.arg);if(Nl.type==="throw")return Zs.method="throw",Zs.arg=Nl.arg,Zs.delegate=null,Cs;var Tl=Nl.arg;return Tl?Tl.done?(Zs[Vs.resultName]=Tl.value,Zs.next=Vs.nextLoc,Zs.method!=="return"&&(Zs.method="next",Zs.arg=as),Zs.delegate=null,Cs):Tl:(Zs.method="throw",Zs.arg=new TypeError("iterator result is not an object"),Zs.delegate=null,Cs)}function Ks(Vs){var Zs={tryLoc:Vs[0]};1 in Vs&&(Zs.catchLoc=Vs[1]),2 in Vs&&(Zs.finallyLoc=Vs[2],Zs.afterLoc=Vs[3]),this.tryEntries.push(Zs)}function qs(Vs){var Zs=Vs.completion||{};Zs.type="normal",delete Zs.arg,Vs.completion=Zs}function _l(Vs){this.tryEntries=[{tryLoc:"root"}],Vs.forEach(Ks,this),this.reset(!0)}function Js(Vs){if(Vs||Vs===""){var Zs=Vs[hs];if(Zs)return Zs.call(Vs);if(typeof Vs.next=="function")return Vs;if(!isNaN(Vs.length)){var Sl=-1,Il=function Nl(){for(;++Sl<Vs.length;)if(us.call(Vs,Sl))return Nl.value=Vs[Sl],Nl.done=!1,Nl;return Nl.value=as,Nl.done=!0,Nl};return Il.next=Il}}throw new TypeError(ts(Vs)+" is not iterable")}return Is.prototype=ks,ls(Rs,"constructor",{value:ks,configurable:!0}),ls(ks,"constructor",{value:Is,configurable:!0}),Is.displayName=ys(ks,gs,"GeneratorFunction"),os.isGeneratorFunction=function(Vs){var Zs=typeof Vs=="function"&&Vs.constructor;return!!Zs&&(Zs===Is||(Zs.displayName||Zs.name)==="GeneratorFunction")},os.mark=function(Vs){return Object.setPrototypeOf?Object.setPrototypeOf(Vs,ks):(Vs.__proto__=ks,ys(Vs,gs,"GeneratorFunction")),Vs.prototype=Object.create(Rs),Vs},os.awrap=function(Vs){return{__await:Vs}},js(zs.prototype),ys(zs.prototype,vs,function(){return this}),os.AsyncIterator=zs,os.async=function(Vs,Zs,Sl,Il,Nl){Nl===void 0&&(Nl=Promise);var Tl=new zs(xs(Vs,Zs,Sl,Il),Nl);return os.isGeneratorFunction(Zs)?Tl:Tl.next().then(function(_c){return _c.done?_c.value:Tl.next()})},js(Rs),ys(Rs,gs,"Generator"),ys(Rs,hs,function(){return this}),ys(Rs,"toString",function(){return"[object Generator]"}),os.keys=function(Vs){var Zs=Object(Vs),Sl=[];for(var Il in Zs)Sl.push(Il);return Sl.reverse(),function Nl(){for(;Sl.length;){var Tl=Sl.pop();if(Tl in Zs)return Nl.value=Tl,Nl.done=!1,Nl}return Nl.done=!0,Nl}},os.values=Js,_l.prototype={constructor:_l,reset:function(Zs){if(this.prev=0,this.next=0,this.sent=this._sent=as,this.done=!1,this.delegate=null,this.method="next",this.arg=as,this.tryEntries.forEach(qs),!Zs)for(var Sl in this)Sl.charAt(0)==="t"&&us.call(this,Sl)&&!isNaN(+Sl.slice(1))&&(this[Sl]=as)},stop:function(){this.done=!0;var Zs=this.tryEntries[0].completion;if(Zs.type==="throw")throw Zs.arg;return this.rval},dispatchException:function(Zs){if(this.done)throw Zs;var Sl=this;function Il(R0,V0){return _c.type="throw",_c.arg=Zs,Sl.next=R0,V0&&(Sl.method="next",Sl.arg=as),!!V0}for(var Nl=this.tryEntries.length-1;Nl>=0;--Nl){var Tl=this.tryEntries[Nl],_c=Tl.completion;if(Tl.tryLoc==="root")return Il("end");if(Tl.tryLoc<=this.prev){var l0=us.call(Tl,"catchLoc"),g0=us.call(Tl,"finallyLoc");if(l0&&g0){if(this.prev<Tl.catchLoc)return Il(Tl.catchLoc,!0);if(this.prev<Tl.finallyLoc)return Il(Tl.finallyLoc)}else if(l0){if(this.prev<Tl.catchLoc)return Il(Tl.catchLoc,!0)}else{if(!g0)throw new Error("try statement without catch or finally");if(this.prev<Tl.finallyLoc)return Il(Tl.finallyLoc)}}}},abrupt:function(Zs,Sl){for(var Il=this.tryEntries.length-1;Il>=0;--Il){var Nl=this.tryEntries[Il];if(Nl.tryLoc<=this.prev&&us.call(Nl,"finallyLoc")&&this.prev<Nl.finallyLoc){var Tl=Nl;break}}Tl&&(Zs==="break"||Zs==="continue")&&Tl.tryLoc<=Sl&&Sl<=Tl.finallyLoc&&(Tl=null);var _c=Tl?Tl.completion:{};return _c.type=Zs,_c.arg=Sl,Tl?(this.method="next",this.next=Tl.finallyLoc,Cs):this.complete(_c)},complete:function(Zs,Sl){if(Zs.type==="throw")throw Zs.arg;return Zs.type==="break"||Zs.type==="continue"?this.next=Zs.arg:Zs.type==="return"?(this.rval=this.arg=Zs.arg,this.method="return",this.next="end"):Zs.type==="normal"&&Sl&&(this.next=Sl),Cs},finish:function(Zs){for(var Sl=this.tryEntries.length-1;Sl>=0;--Sl){var Il=this.tryEntries[Sl];if(Il.finallyLoc===Zs)return this.complete(Il.completion,Il.afterLoc),qs(Il),Cs}},catch:function(Zs){for(var Sl=this.tryEntries.length-1;Sl>=0;--Sl){var Il=this.tryEntries[Sl];if(Il.tryLoc===Zs){var Nl=Il.completion;if(Nl.type==="throw"){var Tl=Nl.arg;qs(Il)}return Tl}}throw new Error("illegal catch attempt")},delegateYield:function(Zs,Sl,Il){return this.delegate={iterator:Js(Zs),resultName:Sl,nextLoc:Il},this.method==="next"&&(this.arg=as),Cs}},os}ns.exports=rs,ns.exports.__esModule=!0,ns.exports.default=ns.exports})(regeneratorRuntime$1);var regeneratorRuntimeExports=regeneratorRuntime$1.exports,runtime=regeneratorRuntimeExports(),regenerator=runtime;try{regeneratorRuntime=runtime}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=runtime:Function("r","regeneratorRuntime = r")(runtime)}const _regeneratorRuntime=getDefaultExportFromCjs(regenerator);var entitySequence=1;function createEntity(){return entitySequence++}var gl;(function(ns){ns[ns.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",ns[ns.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",ns[ns.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",ns[ns.POINTS=0]="POINTS",ns[ns.LINES=1]="LINES",ns[ns.LINE_LOOP=2]="LINE_LOOP",ns[ns.LINE_STRIP=3]="LINE_STRIP",ns[ns.TRIANGLES=4]="TRIANGLES",ns[ns.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",ns[ns.TRIANGLE_FAN=6]="TRIANGLE_FAN",ns[ns.ZERO=0]="ZERO",ns[ns.ONE=1]="ONE",ns[ns.SRC_COLOR=768]="SRC_COLOR",ns[ns.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",ns[ns.SRC_ALPHA=770]="SRC_ALPHA",ns[ns.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",ns[ns.DST_ALPHA=772]="DST_ALPHA",ns[ns.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",ns[ns.DST_COLOR=774]="DST_COLOR",ns[ns.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",ns[ns.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",ns[ns.FUNC_ADD=32774]="FUNC_ADD",ns[ns.BLEND_EQUATION=32777]="BLEND_EQUATION",ns[ns.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",ns[ns.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",ns[ns.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",ns[ns.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",ns[ns.MAX_EXT=32776]="MAX_EXT",ns[ns.MIN_EXT=32775]="MIN_EXT",ns[ns.BLEND_DST_RGB=32968]="BLEND_DST_RGB",ns[ns.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",ns[ns.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",ns[ns.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",ns[ns.CONSTANT_COLOR=32769]="CONSTANT_COLOR",ns[ns.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",ns[ns.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",ns[ns.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",ns[ns.BLEND_COLOR=32773]="BLEND_COLOR",ns[ns.ARRAY_BUFFER=34962]="ARRAY_BUFFER",ns[ns.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",ns[ns.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",ns[ns.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",ns[ns.STREAM_DRAW=35040]="STREAM_DRAW",ns[ns.STATIC_DRAW=35044]="STATIC_DRAW",ns[ns.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",ns[ns.BUFFER_SIZE=34660]="BUFFER_SIZE",ns[ns.BUFFER_USAGE=34661]="BUFFER_USAGE",ns[ns.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",ns[ns.FRONT=1028]="FRONT",ns[ns.BACK=1029]="BACK",ns[ns.FRONT_AND_BACK=1032]="FRONT_AND_BACK",ns[ns.CULL_FACE=2884]="CULL_FACE",ns[ns.BLEND=3042]="BLEND",ns[ns.DITHER=3024]="DITHER",ns[ns.STENCIL_TEST=2960]="STENCIL_TEST",ns[ns.DEPTH_TEST=2929]="DEPTH_TEST",ns[ns.SCISSOR_TEST=3089]="SCISSOR_TEST",ns[ns.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",ns[ns.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",ns[ns.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",ns[ns.NO_ERROR=0]="NO_ERROR",ns[ns.INVALID_ENUM=1280]="INVALID_ENUM",ns[ns.INVALID_VALUE=1281]="INVALID_VALUE",ns[ns.INVALID_OPERATION=1282]="INVALID_OPERATION",ns[ns.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",ns[ns.CW=2304]="CW",ns[ns.CCW=2305]="CCW",ns[ns.LINE_WIDTH=2849]="LINE_WIDTH",ns[ns.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",ns[ns.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",ns[ns.CULL_FACE_MODE=2885]="CULL_FACE_MODE",ns[ns.FRONT_FACE=2886]="FRONT_FACE",ns[ns.DEPTH_RANGE=2928]="DEPTH_RANGE",ns[ns.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",ns[ns.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",ns[ns.DEPTH_FUNC=2932]="DEPTH_FUNC",ns[ns.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",ns[ns.STENCIL_FUNC=2962]="STENCIL_FUNC",ns[ns.STENCIL_FAIL=2964]="STENCIL_FAIL",ns[ns.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",ns[ns.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",ns[ns.STENCIL_REF=2967]="STENCIL_REF",ns[ns.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",ns[ns.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",ns[ns.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",ns[ns.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",ns[ns.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",ns[ns.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",ns[ns.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",ns[ns.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",ns[ns.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",ns[ns.VIEWPORT=2978]="VIEWPORT",ns[ns.SCISSOR_BOX=3088]="SCISSOR_BOX",ns[ns.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",ns[ns.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",ns[ns.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",ns[ns.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",ns[ns.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",ns[ns.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",ns[ns.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",ns[ns.RED_BITS=3410]="RED_BITS",ns[ns.GREEN_BITS=3411]="GREEN_BITS",ns[ns.BLUE_BITS=3412]="BLUE_BITS",ns[ns.ALPHA_BITS=3413]="ALPHA_BITS",ns[ns.DEPTH_BITS=3414]="DEPTH_BITS",ns[ns.STENCIL_BITS=3415]="STENCIL_BITS",ns[ns.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",ns[ns.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",ns[ns.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",ns[ns.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",ns[ns.SAMPLES=32937]="SAMPLES",ns[ns.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",ns[ns.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",ns[ns.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",ns[ns.DONT_CARE=4352]="DONT_CARE",ns[ns.FASTEST=4353]="FASTEST",ns[ns.NICEST=4354]="NICEST",ns[ns.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",ns[ns.BYTE=5120]="BYTE",ns[ns.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",ns[ns.SHORT=5122]="SHORT",ns[ns.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",ns[ns.INT=5124]="INT",ns[ns.UNSIGNED_INT=5125]="UNSIGNED_INT",ns[ns.FLOAT=5126]="FLOAT",ns[ns.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",ns[ns.ALPHA=6406]="ALPHA",ns[ns.RGB=6407]="RGB",ns[ns.RGBA=6408]="RGBA",ns[ns.LUMINANCE=6409]="LUMINANCE",ns[ns.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",ns[ns.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",ns[ns.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",ns[ns.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",ns[ns.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",ns[ns.VERTEX_SHADER=35633]="VERTEX_SHADER",ns[ns.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",ns[ns.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",ns[ns.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",ns[ns.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",ns[ns.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",ns[ns.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",ns[ns.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",ns[ns.SHADER_TYPE=35663]="SHADER_TYPE",ns[ns.DELETE_STATUS=35712]="DELETE_STATUS",ns[ns.LINK_STATUS=35714]="LINK_STATUS",ns[ns.VALIDATE_STATUS=35715]="VALIDATE_STATUS",ns[ns.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",ns[ns.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",ns[ns.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",ns[ns.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",ns[ns.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",ns[ns.NEVER=512]="NEVER",ns[ns.LESS=513]="LESS",ns[ns.EQUAL=514]="EQUAL",ns[ns.LEQUAL=515]="LEQUAL",ns[ns.GREATER=516]="GREATER",ns[ns.NOTEQUAL=517]="NOTEQUAL",ns[ns.GEQUAL=518]="GEQUAL",ns[ns.ALWAYS=519]="ALWAYS",ns[ns.KEEP=7680]="KEEP",ns[ns.REPLACE=7681]="REPLACE",ns[ns.INCR=7682]="INCR",ns[ns.DECR=7683]="DECR",ns[ns.INVERT=5386]="INVERT",ns[ns.INCR_WRAP=34055]="INCR_WRAP",ns[ns.DECR_WRAP=34056]="DECR_WRAP",ns[ns.VENDOR=7936]="VENDOR",ns[ns.RENDERER=7937]="RENDERER",ns[ns.VERSION=7938]="VERSION",ns[ns.NEAREST=9728]="NEAREST",ns[ns.LINEAR=9729]="LINEAR",ns[ns.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",ns[ns.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",ns[ns.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",ns[ns.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",ns[ns.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",ns[ns.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",ns[ns.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",ns[ns.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",ns[ns.TEXTURE_2D=3553]="TEXTURE_2D",ns[ns.TEXTURE=5890]="TEXTURE",ns[ns.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",ns[ns.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",ns[ns.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",ns[ns.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",ns[ns.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",ns[ns.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",ns[ns.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",ns[ns.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",ns[ns.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",ns[ns.TEXTURE0=33984]="TEXTURE0",ns[ns.TEXTURE1=33985]="TEXTURE1",ns[ns.TEXTURE2=33986]="TEXTURE2",ns[ns.TEXTURE3=33987]="TEXTURE3",ns[ns.TEXTURE4=33988]="TEXTURE4",ns[ns.TEXTURE5=33989]="TEXTURE5",ns[ns.TEXTURE6=33990]="TEXTURE6",ns[ns.TEXTURE7=33991]="TEXTURE7",ns[ns.TEXTURE8=33992]="TEXTURE8",ns[ns.TEXTURE9=33993]="TEXTURE9",ns[ns.TEXTURE10=33994]="TEXTURE10",ns[ns.TEXTURE11=33995]="TEXTURE11",ns[ns.TEXTURE12=33996]="TEXTURE12",ns[ns.TEXTURE13=33997]="TEXTURE13",ns[ns.TEXTURE14=33998]="TEXTURE14",ns[ns.TEXTURE15=33999]="TEXTURE15",ns[ns.TEXTURE16=34e3]="TEXTURE16",ns[ns.TEXTURE17=34001]="TEXTURE17",ns[ns.TEXTURE18=34002]="TEXTURE18",ns[ns.TEXTURE19=34003]="TEXTURE19",ns[ns.TEXTURE20=34004]="TEXTURE20",ns[ns.TEXTURE21=34005]="TEXTURE21",ns[ns.TEXTURE22=34006]="TEXTURE22",ns[ns.TEXTURE23=34007]="TEXTURE23",ns[ns.TEXTURE24=34008]="TEXTURE24",ns[ns.TEXTURE25=34009]="TEXTURE25",ns[ns.TEXTURE26=34010]="TEXTURE26",ns[ns.TEXTURE27=34011]="TEXTURE27",ns[ns.TEXTURE28=34012]="TEXTURE28",ns[ns.TEXTURE29=34013]="TEXTURE29",ns[ns.TEXTURE30=34014]="TEXTURE30",ns[ns.TEXTURE31=34015]="TEXTURE31",ns[ns.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",ns[ns.REPEAT=10497]="REPEAT",ns[ns.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",ns[ns.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",ns[ns.FLOAT_VEC2=35664]="FLOAT_VEC2",ns[ns.FLOAT_VEC3=35665]="FLOAT_VEC3",ns[ns.FLOAT_VEC4=35666]="FLOAT_VEC4",ns[ns.INT_VEC2=35667]="INT_VEC2",ns[ns.INT_VEC3=35668]="INT_VEC3",ns[ns.INT_VEC4=35669]="INT_VEC4",ns[ns.BOOL=35670]="BOOL",ns[ns.BOOL_VEC2=35671]="BOOL_VEC2",ns[ns.BOOL_VEC3=35672]="BOOL_VEC3",ns[ns.BOOL_VEC4=35673]="BOOL_VEC4",ns[ns.FLOAT_MAT2=35674]="FLOAT_MAT2",ns[ns.FLOAT_MAT3=35675]="FLOAT_MAT3",ns[ns.FLOAT_MAT4=35676]="FLOAT_MAT4",ns[ns.SAMPLER_2D=35678]="SAMPLER_2D",ns[ns.SAMPLER_CUBE=35680]="SAMPLER_CUBE",ns[ns.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",ns[ns.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",ns[ns.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",ns[ns.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",ns[ns.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",ns[ns.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",ns[ns.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",ns[ns.COMPILE_STATUS=35713]="COMPILE_STATUS",ns[ns.LOW_FLOAT=36336]="LOW_FLOAT",ns[ns.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",ns[ns.HIGH_FLOAT=36338]="HIGH_FLOAT",ns[ns.LOW_INT=36339]="LOW_INT",ns[ns.MEDIUM_INT=36340]="MEDIUM_INT",ns[ns.HIGH_INT=36341]="HIGH_INT",ns[ns.FRAMEBUFFER=36160]="FRAMEBUFFER",ns[ns.RENDERBUFFER=36161]="RENDERBUFFER",ns[ns.RGBA4=32854]="RGBA4",ns[ns.RGB5_A1=32855]="RGB5_A1",ns[ns.RGB565=36194]="RGB565",ns[ns.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",ns[ns.STENCIL_INDEX=6401]="STENCIL_INDEX",ns[ns.STENCIL_INDEX8=36168]="STENCIL_INDEX8",ns[ns.DEPTH_STENCIL=34041]="DEPTH_STENCIL",ns[ns.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",ns[ns.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",ns[ns.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",ns[ns.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",ns[ns.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",ns[ns.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",ns[ns.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",ns[ns.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",ns[ns.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",ns[ns.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",ns[ns.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",ns[ns.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",ns[ns.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",ns[ns.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",ns[ns.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",ns[ns.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",ns[ns.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",ns[ns.NONE=0]="NONE",ns[ns.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",ns[ns.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",ns[ns.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",ns[ns.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",ns[ns.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",ns[ns.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",ns[ns.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",ns[ns.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",ns[ns.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",ns[ns.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",ns[ns.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",ns[ns.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",ns[ns.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",ns[ns.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",ns[ns.COPY_SRC=1]="COPY_SRC",ns[ns.COPY_DST=2]="COPY_DST",ns[ns.SAMPLED=4]="SAMPLED",ns[ns.STORAGE=8]="STORAGE",ns[ns.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(gl||(gl={}));var ConfigService=function(){function ns(){_classCallCheck$1(this,ns),this.config=void 0}return _createClass$1(ns,[{key:"get",value:function(){return this.config}},{key:"set",value:function(rs){this.config=rs}}]),ns}(),AST_TOKEN_TYPES;(function(ns){ns.Void="Void",ns.Boolean="Boolean",ns.Float="Float",ns.Uint32="Uint32",ns.Int32="Int32",ns.Vector="Vector",ns.Vector2Float="vec2<f32>",ns.Vector3Float="vec3<f32>",ns.Vector4Float="vec4<f32>",ns.Vector2Boolean="vec2<bool>",ns.Vector3Boolean="vec3<bool>",ns.Vector4Boolean="vec4<bool>",ns.Vector2Uint="vec2<u32>",ns.Vector3Uint="vec3<u32>",ns.Vector4Uint="vec4<u32>",ns.Vector2Int="vec2<i32>",ns.Vector3Int="vec3<i32>",ns.Vector4Int="vec4<i32>",ns.Matrix="Matrix",ns.Matrix3x3Float="mat3x3<f32>",ns.Matrix4x4Float="mat4x4<i32>",ns.Struct="Struct",ns.FloatArray="Float[]",ns.Vector4FloatArray="vec4<f32>[]"})(AST_TOKEN_TYPES||(AST_TOKEN_TYPES={}));var AST_NODE_TYPES;(function(ns){ns.Program="Program",ns.Identifier="Identifier",ns.VariableDeclaration="VariableDeclaration",ns.BlockStatement="BlockStatement",ns.ReturnStatement="ReturnStatement",ns.FunctionDeclaration="FunctionDeclaration",ns.VariableDeclarator="VariableDeclarator",ns.AssignmentExpression="AssignmentExpression",ns.LogicalExpression="LogicalExpression",ns.BinaryExpression="BinaryExpression",ns.ArrayExpression="ArrayExpression",ns.UnaryExpression="UnaryExpression",ns.UpdateExpression="UpdateExpression",ns.FunctionExpression="FunctionExpression",ns.MemberExpression="MemberExpression",ns.ConditionalExpression="ConditionalExpression",ns.ExpressionStatement="ExpressionStatement",ns.CallExpression="CallExpression",ns.NumThreadStatement="NumThreadStatement",ns.StorageStatement="StorageStatement",ns.DoWhileStatement="DoWhileStatement",ns.WhileStatement="WhileStatement",ns.ForStatement="ForStatement",ns.BreakStatement="BreakStatement",ns.ContinueStatement="ContinueStatement",ns.IfStatement="IfStatement",ns.ImportedFunctionStatement="ImportedFunctionStatement"})(AST_NODE_TYPES||(AST_NODE_TYPES={}));var STORAGE_CLASS;(function(ns){ns.Input="Input",ns.Output="Output",ns.Uniform="Uniform",ns.Workgroup="Workgroup",ns.UniformConstant="UniformConstant",ns.Image="Image",ns.StorageBuffer="StorageBuffer",ns.Private="Private",ns.Function="Function"})(STORAGE_CLASS||(STORAGE_CLASS={}));var Target;(function(ns){ns.GLSL100="GLSL100",ns.GLSL450="GLSL450",ns.WGSL="WGSL"})(Target||(Target={}));var DefineValuePlaceholder="__DefineValuePlaceholder__";function createCanvas(){if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function ownKeys$3(ns,ts){var rs=Object.keys(ns);if(Object.getOwnPropertySymbols){var as=Object.getOwnPropertySymbols(ns);ts&&(as=as.filter(function(os){return Object.getOwnPropertyDescriptor(ns,os).enumerable})),rs.push.apply(rs,as)}return rs}function _objectSpread$2(ns){for(var ts=1;ts<arguments.length;ts++){var rs=arguments[ts]!=null?arguments[ts]:{};ts%2?ownKeys$3(Object(rs),!0).forEach(function(as){_defineProperty$2(ns,as,rs[as])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ns,Object.getOwnPropertyDescriptors(rs)):ownKeys$3(Object(rs)).forEach(function(as){Object.defineProperty(ns,as,Object.getOwnPropertyDescriptor(rs,as))})}return ns}var Kernel=function(){function ns(ts,rs){_classCallCheck$1(this,ns),this.engine=ts,this.configService=rs,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return _createClass$1(ns,[{key:"init",value:function(){var rs=this.configService.get(),as=rs.canvas,os=rs.engineOptions;this.initPromise=this.engine.init(_objectSpread$2({canvas:as||createCanvas(),antialiasing:!1},os))}},{key:"setBundle",value:function(rs){this.compiledBundle=JSON.parse(JSON.stringify(rs))}},{key:"setDispatch",value:function(rs){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=rs),this}},{key:"setMaxIteration",value:function(rs){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=rs),this}},{key:"setBinding",value:function(rs,as){var os=this;if(typeof rs=="string"){var is=_isNumber(as)||_isTypedArray(as)||_isArray(as);if(this.compiledBundle&&this.compiledBundle.context){var us=this.compiledBundle.context.defines.find(function(fs){return fs.name===rs});if(us)return us.value=as,this;var ls=this.compiledBundle.context.uniforms.find(function(fs){return fs.name===rs});ls&&(is?(ls.data=as,ls.isReferer=!1,ls.storageClass===STORAGE_CLASS.Uniform?this.model&&this.model.updateUniform(rs,as):this.model&&this.model.updateBuffer(rs,as)):(ls.isReferer=!0,ls.data=as))}}else Object.keys(rs).forEach(function(fs){os.setBinding(fs,rs[fs])});return this}},{key:"execute",value:function(){var ts=_asyncToGenerator(_regeneratorRuntime.mark(function as(){var os=this,is,us,ls=arguments;return _regeneratorRuntime.wrap(function(hs){for(;;)switch(hs.prev=hs.next){case 0:if(is=ls.length>0&&ls[0]!==void 0?ls[0]:1,!this.dirty){hs.next=6;break}return this.compiledBundle.context&&(is>1?this.compiledBundle.context.maxIteration=is:this.compiledBundle.context.maxIteration++),hs.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(vs){var gs=vs.isReferer;return gs}).forEach(function(vs){var gs=vs.data,ys=vs.name;os.model.confirmInput(gs.model,ys)}),us=0;us<is;us++)this.model.run();return this.engine.endFrame(),hs.abrupt("return",this);case 12:case"end":return hs.stop()}},as,this)}));function rs(){return ts.apply(this,arguments)}return rs}()},{key:"getOutput",value:function(){var ts=_asyncToGenerator(_regeneratorRuntime.mark(function as(){return _regeneratorRuntime.wrap(function(is){for(;;)switch(is.prev=is.next){case 0:return is.abrupt("return",this.model.readData());case 1:case"end":return is.stop()}},as,this)}));function rs(){return ts.apply(this,arguments)}return rs}()},{key:"compile",value:function(){var ts=_asyncToGenerator(_regeneratorRuntime.mark(function as(){var os,is,us;return _regeneratorRuntime.wrap(function(fs){for(;;)switch(fs.prev=fs.next){case 0:return fs.next=2,this.initPromise;case 2:return os=_objectSpread$2({},this.compiledBundle.context),is=this.engine.supportWebGPU?this.engine.useWGSL?Target.WGSL:Target.GLSL450:Target.GLSL100,us=this.compiledBundle.shaders[is],os.defines.filter(function(hs){return hs.runtime}).forEach(function(hs){var vs="".concat(DefineValuePlaceholder).concat(hs.name);us=us.replace(vs,"".concat(hs.value))}),os.shader=us,os.uniforms.forEach(function(hs){if(!hs.data&&hs.storageClass===STORAGE_CLASS.StorageBuffer){var vs=1;hs.type===AST_TOKEN_TYPES.FloatArray?vs=1:hs.type===AST_TOKEN_TYPES.Vector4FloatArray&&(vs=4),hs.data=new Float32Array(os.output.length*vs).fill(0)}}),this.compiledBundle.context=os,fs.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=fs.sent;case 12:case"end":return fs.stop()}},as,this)}));function rs(){return ts.apply(this,arguments)}return rs}()}]),ns}(),regl$1={exports:{}};(function(ns,ts){(function(rs,as){ns.exports=as()})(commonjsGlobal,function(){var rs=function(Ws){return Ws instanceof Uint8Array||Ws instanceof Uint16Array||Ws instanceof Uint32Array||Ws instanceof Int8Array||Ws instanceof Int16Array||Ws instanceof Int32Array||Ws instanceof Float32Array||Ws instanceof Float64Array||Ws instanceof Uint8ClampedArray},as=function(Ws,Qs){for(var Al=Object.keys(Qs),Jl=0;Jl<Al.length;++Jl)Ws[Al[Jl]]=Qs[Al[Jl]];return Ws},os=`
`;function is(Ws){return typeof atob<"u"?atob(Ws):"base64:"+Ws}function us(Ws){var Qs=new Error("(regl) "+Ws);throw console.error(Qs),Qs}function ls(Ws,Qs){Ws||us(Qs)}function fs(Ws){return Ws?": "+Ws:""}function hs(Ws,Qs,Al){Ws in Qs||us("unknown parameter ("+Ws+")"+fs(Al)+". possible values: "+Object.keys(Qs).join())}function vs(Ws,Qs){rs(Ws)||us("invalid parameter type"+fs(Qs)+". must be a typed array")}function gs(Ws,Qs){switch(Qs){case"number":return typeof Ws=="number";case"object":return typeof Ws=="object";case"string":return typeof Ws=="string";case"boolean":return typeof Ws=="boolean";case"function":return typeof Ws=="function";case"undefined":return typeof Ws>"u";case"symbol":return typeof Ws=="symbol"}}function ys(Ws,Qs,Al){gs(Ws,Qs)||us("invalid parameter type"+fs(Al)+". expected "+Qs+", got "+typeof Ws)}function xs(Ws,Qs){Ws>=0&&(Ws|0)===Ws||us("invalid parameter type, ("+Ws+")"+fs(Qs)+". must be a nonnegative integer")}function ms(Ws,Qs,Al){Qs.indexOf(Ws)<0&&us("invalid value"+fs(Al)+". must be one of: "+Qs)}var Ss=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function Ms(Ws){Object.keys(Ws).forEach(function(Qs){Ss.indexOf(Qs)<0&&us('invalid regl constructor argument "'+Qs+'". must be one of '+Ss)})}function $s(Ws,Qs){for(Ws=Ws+"";Ws.length<Qs;)Ws=" "+Ws;return Ws}function bs(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function Cs(Ws,Qs){this.number=Ws,this.line=Qs,this.errors=[]}function As(Ws,Qs,Al){this.file=Ws,this.line=Qs,this.message=Al}function Is(){var Ws=new Error,Qs=(Ws.stack||Ws).toString(),Al=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Qs);if(Al)return Al[1];var Jl=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Qs);return Jl?Jl[1]:"unknown"}function ks(){var Ws=new Error,Qs=(Ws.stack||Ws).toString(),Al=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Qs);if(Al)return Al[1];var Jl=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Qs);return Jl?Jl[1]:"unknown"}function Ps(Ws,Qs){var Al=Ws.split(`
`),Jl=1,u0=0,Ql={unknown:new bs,0:new bs};Ql.unknown.name=Ql[0].name=Qs||Is(),Ql.unknown.lines.push(new Cs(0,""));for(var e0=0;e0<Al.length;++e0){var m0=Al[e0],x0=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(m0);if(x0)switch(x0[1]){case"line":var C0=/(\d+)(\s+\d+)?/.exec(x0[2]);C0&&(Jl=C0[1]|0,C0[2]&&(u0=C0[2]|0,u0 in Ql||(Ql[u0]=new bs)));break;case"define":var E0=/SHADER_NAME(_B64)?\s+(.*)$/.exec(x0[2]);E0&&(Ql[u0].name=E0[1]?is(E0[2]):E0[2]);break}Ql[u0].lines.push(new Cs(Jl++,m0))}return Object.keys(Ql).forEach(function(T0){var O0=Ql[T0];O0.lines.forEach(function(_0){O0.index[_0.number]=_0})}),Ql}function Ds(Ws){var Qs=[];return Ws.split(`
`).forEach(function(Al){if(!(Al.length<5)){var Jl=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Al);Jl?Qs.push(new As(Jl[1]|0,Jl[2]|0,Jl[3].trim())):Al.length>0&&Qs.push(new As("unknown",0,Al))}}),Qs}function Fs(Ws,Qs){Qs.forEach(function(Al){var Jl=Ws[Al.file];if(Jl){var u0=Jl.index[Al.line];if(u0){u0.errors.push(Al),Jl.hasErrors=!0;return}}Ws.unknown.hasErrors=!0,Ws.unknown.lines[0].errors.push(Al)})}function Rs(Ws,Qs,Al,Jl,u0){if(!Ws.getShaderParameter(Qs,Ws.COMPILE_STATUS)){var Ql=Ws.getShaderInfoLog(Qs),e0=Jl===Ws.FRAGMENT_SHADER?"fragment":"vertex";_l(Al,"string",e0+" shader source must be a string",u0);var m0=Ps(Al,u0),x0=Ds(Ql);Fs(m0,x0),Object.keys(m0).forEach(function(C0){var E0=m0[C0];if(!E0.hasErrors)return;var T0=[""],O0=[""];function _0(A0,Hl){T0.push(A0),O0.push(Hl||"")}_0("file number "+C0+": "+E0.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),E0.lines.forEach(function(A0){if(A0.errors.length>0){_0($s(A0.number,4)+"|  ","background-color:yellow; font-weight:bold"),_0(A0.line+os,"color:red; background-color:yellow; font-weight:bold");var Hl=0;A0.errors.forEach(function(t0){var $0=t0.message,F0=/^\s*'(.*)'\s*:\s*(.*)$/.exec($0);if(F0){var h0=F0[1];switch($0=F0[2],h0){case"assign":h0="=";break}Hl=Math.max(A0.line.indexOf(h0,Hl),0)}else Hl=0;_0($s("| ",6)),_0($s("^^^",Hl+3)+os,"font-weight:bold"),_0($s("| ",6)),_0($0+os,"font-weight:bold")}),_0($s("| ",6)+os)}else _0($s(A0.number,4)+"|  "),_0(A0.line+os,"color:red")}),typeof document<"u"&&!window.chrome?(O0[0]=T0.join("%c"),console.log.apply(console,O0)):console.log(T0.join(""))}),ls.raise("Error compiling "+e0+" shader, "+m0[0].name)}}function js(Ws,Qs,Al,Jl,u0){if(!Ws.getProgramParameter(Qs,Ws.LINK_STATUS)){var Ql=Ws.getProgramInfoLog(Qs),e0=Ps(Al,u0),m0=Ps(Jl,u0),x0='Error linking program with vertex shader, "'+m0[0].name+'", and fragment shader "'+e0[0].name+'"';typeof document<"u"?console.log("%c"+x0+os+"%c"+Ql,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(x0+os+Ql),ls.raise(x0)}}function zs(Ws){Ws._commandRef=Is()}function Us(Ws,Qs,Al,Jl){zs(Ws);function u0(x0){return x0?Jl.id(x0):0}Ws._fragId=u0(Ws.static.frag),Ws._vertId=u0(Ws.static.vert);function Ql(x0,C0){Object.keys(C0).forEach(function(E0){x0[Jl.id(E0)]=!0})}var e0=Ws._uniformSet={};Ql(e0,Qs.static),Ql(e0,Qs.dynamic);var m0=Ws._attributeSet={};Ql(m0,Al.static),Ql(m0,Al.dynamic),Ws._hasCount="count"in Ws.static||"count"in Ws.dynamic||"elements"in Ws.static||"elements"in Ws.dynamic}function Ys(Ws,Qs){var Al=ks();us(Ws+" in command "+(Qs||Is())+(Al==="unknown"?"":" called from "+Al))}function Ks(Ws,Qs,Al){Ws||Ys(Qs,Al||Is())}function qs(Ws,Qs,Al,Jl){Ws in Qs||Ys("unknown parameter ("+Ws+")"+fs(Al)+". possible values: "+Object.keys(Qs).join(),Jl||Is())}function _l(Ws,Qs,Al,Jl){gs(Ws,Qs)||Ys("invalid parameter type"+fs(Al)+". expected "+Qs+", got "+typeof Ws,Jl||Is())}function Js(Ws){Ws()}function Vs(Ws,Qs,Al){Ws.texture?ms(Ws.texture._texture.internalformat,Qs,"unsupported texture format for attachment"):ms(Ws.renderbuffer._renderbuffer.format,Al,"unsupported renderbuffer format for attachment")}var Zs=33071,Sl=9728,Il=9984,Nl=9985,Tl=9986,_c=9987,l0=5120,g0=5121,R0=5122,V0=5123,U0=5124,tv=5125,Os=5126,ov=32819,$v=32820,Lv=33635,Jv=34042,Yv=36193,Pv={};Pv[l0]=Pv[g0]=1,Pv[R0]=Pv[V0]=Pv[Yv]=Pv[Lv]=Pv[ov]=Pv[$v]=2,Pv[U0]=Pv[tv]=Pv[Os]=Pv[Jv]=4;function jv(Ws,Qs){return Ws===$v||Ws===ov||Ws===Lv?2:Ws===Jv?4:Pv[Ws]*Qs}function wp(Ws){return!(Ws&Ws-1)&&!!Ws}function j0(Ws,Qs,Al){var Jl,u0=Qs.width,Ql=Qs.height,e0=Qs.channels;ls(u0>0&&u0<=Al.maxTextureSize&&Ql>0&&Ql<=Al.maxTextureSize,"invalid texture shape"),(Ws.wrapS!==Zs||Ws.wrapT!==Zs)&&ls(wp(u0)&&wp(Ql),"incompatible wrap mode for texture, both width and height must be power of 2"),Qs.mipmask===1?u0!==1&&Ql!==1&&ls(Ws.minFilter!==Il&&Ws.minFilter!==Tl&&Ws.minFilter!==Nl&&Ws.minFilter!==_c,"min filter requires mipmap"):(ls(wp(u0)&&wp(Ql),"texture must be a square power of 2 to support mipmapping"),ls(Qs.mipmask===(u0<<1)-1,"missing or incomplete mipmap data")),Qs.type===Os&&(Al.extensions.indexOf("oes_texture_float_linear")<0&&ls(Ws.minFilter===Sl&&Ws.magFilter===Sl,"filter not supported, must enable oes_texture_float_linear"),ls(!Ws.genMipmaps,"mipmap generation not supported with float textures"));var m0=Qs.images;for(Jl=0;Jl<16;++Jl)if(m0[Jl]){var x0=u0>>Jl,C0=Ql>>Jl;ls(Qs.mipmask&1<<Jl,"missing mipmap data");var E0=m0[Jl];if(ls(E0.width===x0&&E0.height===C0,"invalid shape for mip images"),ls(E0.format===Qs.format&&E0.internalformat===Qs.internalformat&&E0.type===Qs.type,"incompatible type for mip image"),!E0.compressed)if(E0.data){var T0=Math.ceil(jv(E0.type,e0)*x0/E0.unpackAlignment)*E0.unpackAlignment;ls(E0.data.byteLength===T0*C0,"invalid data for image, buffer size is inconsistent with image format")}else E0.element||E0.copy}else Ws.genMipmaps||ls((Qs.mipmask&1<<Jl)===0,"extra mipmap data");Qs.compressed&&ls(!Ws.genMipmaps,"mipmap generation for compressed images not supported")}function Ul(Ws,Qs,Al,Jl){var u0=Ws.width,Ql=Ws.height,e0=Ws.channels;ls(u0>0&&u0<=Jl.maxTextureSize&&Ql>0&&Ql<=Jl.maxTextureSize,"invalid texture shape"),ls(u0===Ql,"cube map must be square"),ls(Qs.wrapS===Zs&&Qs.wrapT===Zs,"wrap mode not supported by cube map");for(var m0=0;m0<Al.length;++m0){var x0=Al[m0];ls(x0.width===u0&&x0.height===Ql,"inconsistent cube map face shape"),Qs.genMipmaps&&(ls(!x0.compressed,"can not generate mipmap for compressed textures"),ls(x0.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var C0=x0.images,E0=0;E0<16;++E0){var T0=C0[E0];if(T0){var O0=u0>>E0,_0=Ql>>E0;ls(x0.mipmask&1<<E0,"missing mipmap data"),ls(T0.width===O0&&T0.height===_0,"invalid shape for mip images"),ls(T0.format===Ws.format&&T0.internalformat===Ws.internalformat&&T0.type===Ws.type,"incompatible type for mip image"),T0.compressed||(T0.data?ls(T0.data.byteLength===O0*_0*Math.max(jv(T0.type,e0),T0.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):T0.element||T0.copy)}}}}var Xs=as(ls,{optional:Js,raise:us,commandRaise:Ys,command:Ks,parameter:hs,commandParameter:qs,constructor:Ms,type:ys,commandType:_l,isTypedArray:vs,nni:xs,oneOf:ms,shaderError:Rs,linkError:js,callSite:ks,saveCommandRef:zs,saveDrawInfo:Us,framebufferFormat:Vs,guessCommand:Is,texture2D:j0,textureCube:Ul}),d0=0,M0=0,i0=5,k0=6;function P0(Ws,Qs){this.id=d0++,this.type=Ws,this.data=Qs}function B0(Ws){return Ws.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function G0(Ws){if(Ws.length===0)return[];var Qs=Ws.charAt(0),Al=Ws.charAt(Ws.length-1);if(Ws.length>1&&Qs===Al&&(Qs==='"'||Qs==="'"))return['"'+B0(Ws.substr(1,Ws.length-2))+'"'];var Jl=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ws);if(Jl)return G0(Ws.substr(0,Jl.index)).concat(G0(Jl[1])).concat(G0(Ws.substr(Jl.index+Jl[0].length)));var u0=Ws.split(".");if(u0.length===1)return['"'+B0(Ws)+'"'];for(var Ql=[],e0=0;e0<u0.length;++e0)Ql=Ql.concat(G0(u0[e0]));return Ql}function rv(Ws){return"["+G0(Ws).join("][")+"]"}function xv(Ws,Qs){return new P0(Ws,rv(Qs+""))}function qv(Ws){return typeof Ws=="function"&&!Ws._reglType||Ws instanceof P0}function Ev(Ws,Qs){if(typeof Ws=="function")return new P0(M0,Ws);if(typeof Ws=="number"||typeof Ws=="boolean")return new P0(i0,Ws);if(Array.isArray(Ws))return new P0(k0,Ws.map((Al,Jl)=>Ev(Al,Qs+"["+Jl+"]")));if(Ws instanceof P0)return Ws;Xs(!1,"invalid option type in uniform "+Qs)}var Kv={DynamicVariable:P0,define:xv,isDynamic:qv,unbox:Ev,accessor:rv},Xv={next:typeof requestAnimationFrame=="function"?function(Ws){return requestAnimationFrame(Ws)}:function(Ws){return setTimeout(Ws,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ws){return cancelAnimationFrame(Ws)}:clearTimeout},ap=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function tp(){var Ws={"":0},Qs=[""];return{id:function(Al){var Jl=Ws[Al];return Jl||(Jl=Ws[Al]=Qs.length,Qs.push(Al),Jl)},str:function(Al){return Qs[Al]}}}function Lp(Ws,Qs,Al){var Jl=document.createElement("canvas");as(Jl.style,{border:0,margin:0,padding:0,top:0,left:0}),Ws.appendChild(Jl),Ws===document.body&&(Jl.style.position="absolute",as(Ws.style,{margin:0,padding:0}));function u0(){var m0=window.innerWidth,x0=window.innerHeight;if(Ws!==document.body){var C0=Ws.getBoundingClientRect();m0=C0.right-C0.left,x0=C0.bottom-C0.top}Jl.width=Al*m0,Jl.height=Al*x0,as(Jl.style,{width:m0+"px",height:x0+"px"})}var Ql;Ws!==document.body&&typeof ResizeObserver=="function"?(Ql=new ResizeObserver(function(){setTimeout(u0)}),Ql.observe(Ws)):window.addEventListener("resize",u0,!1);function e0(){Ql?Ql.disconnect():window.removeEventListener("resize",u0),Ws.removeChild(Jl)}return u0(),{canvas:Jl,onDestroy:e0}}function zv(Ws,Qs){function Al(Jl){try{return Ws.getContext(Jl,Qs)}catch{return null}}return Al("webgl")||Al("experimental-webgl")||Al("webgl-experimental")}function yp(Ws){return typeof Ws.nodeName=="string"&&typeof Ws.appendChild=="function"&&typeof Ws.getBoundingClientRect=="function"}function c1(Ws){return typeof Ws.drawArrays=="function"||typeof Ws.drawElements=="function"}function $p(Ws){return typeof Ws=="string"?Ws.split():(Xs(Array.isArray(Ws),"invalid extension array"),Ws)}function d1(Ws){return typeof Ws=="string"?(Xs(typeof document<"u","not supported outside of DOM"),document.querySelector(Ws)):Ws}function A2(Ws){var Qs=Ws||{},Al,Jl,u0,Ql,e0={},m0=[],x0=[],C0=typeof window>"u"?1:window.devicePixelRatio,E0=!1,T0=function(A0){A0&&Xs.raise(A0)},O0=function(){};if(typeof Qs=="string"?(Xs(typeof document<"u","selector queries only supported in DOM enviroments"),Al=document.querySelector(Qs),Xs(Al,"invalid query string for element")):typeof Qs=="object"?yp(Qs)?Al=Qs:c1(Qs)?(Ql=Qs,u0=Ql.canvas):(Xs.constructor(Qs),"gl"in Qs?Ql=Qs.gl:"canvas"in Qs?u0=d1(Qs.canvas):"container"in Qs&&(Jl=d1(Qs.container)),"attributes"in Qs&&(e0=Qs.attributes,Xs.type(e0,"object","invalid context attributes")),"extensions"in Qs&&(m0=$p(Qs.extensions)),"optionalExtensions"in Qs&&(x0=$p(Qs.optionalExtensions)),"onDone"in Qs&&(Xs.type(Qs.onDone,"function","invalid or missing onDone callback"),T0=Qs.onDone),"profile"in Qs&&(E0=!!Qs.profile),"pixelRatio"in Qs&&(C0=+Qs.pixelRatio,Xs(C0>0,"invalid pixel ratio"))):Xs.raise("invalid arguments to regl"),Al&&(Al.nodeName.toLowerCase()==="canvas"?u0=Al:Jl=Al),!Ql){if(!u0){Xs(typeof document<"u","must manually specify webgl context outside of DOM environments");var _0=Lp(Jl||document.body,T0,C0);if(!_0)return null;u0=_0.canvas,O0=_0.onDestroy}e0.premultipliedAlpha===void 0&&(e0.premultipliedAlpha=!0),Ql=zv(u0,e0)}return Ql?{gl:Ql,canvas:u0,container:Jl,extensions:m0,optionalExtensions:x0,pixelRatio:C0,profile:E0,onDone:T0,onDestroy:O0}:(O0(),T0("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function I2(Ws,Qs){var Al={};function Jl(e0){Xs.type(e0,"string","extension name must be string");var m0=e0.toLowerCase(),x0;try{x0=Al[m0]=Ws.getExtension(m0)}catch{}return!!x0}for(var u0=0;u0<Qs.extensions.length;++u0){var Ql=Qs.extensions[u0];if(!Jl(Ql))return Qs.onDestroy(),Qs.onDone('"'+Ql+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Qs.optionalExtensions.forEach(Jl),{extensions:Al,restore:function(){Object.keys(Al).forEach(function(e0){if(Al[e0]&&!Jl(e0))throw new Error("(regl): error restoring extension "+e0)})}}}function Cp(Ws,Qs){for(var Al=Array(Ws),Jl=0;Jl<Ws;++Jl)Al[Jl]=Qs(Jl);return Al}var A1=5120,g2=5121,om=5122,k2=5123,sm=5124,s1=5125,Z0=5126;function h1(Ws){for(var Qs=16;Qs<=1<<28;Qs*=16)if(Ws<=Qs)return Qs;return 0}function lv(Ws){var Qs,Al;return Qs=(Ws>65535)<<4,Ws>>>=Qs,Al=(Ws>255)<<3,Ws>>>=Al,Qs|=Al,Al=(Ws>15)<<2,Ws>>>=Al,Qs|=Al,Al=(Ws>3)<<1,Ws>>>=Al,Qs|=Al,Qs|Ws>>1}function rp(){var Ws=Cp(8,function(){return[]});function Qs(Ql){var e0=h1(Ql),m0=Ws[lv(e0)>>2];return m0.length>0?m0.pop():new ArrayBuffer(e0)}function Al(Ql){Ws[lv(Ql.byteLength)>>2].push(Ql)}function Jl(Ql,e0){var m0=null;switch(Ql){case A1:m0=new Int8Array(Qs(e0),0,e0);break;case g2:m0=new Uint8Array(Qs(e0),0,e0);break;case om:m0=new Int16Array(Qs(2*e0),0,e0);break;case k2:m0=new Uint16Array(Qs(2*e0),0,e0);break;case sm:m0=new Int32Array(Qs(4*e0),0,e0);break;case s1:m0=new Uint32Array(Qs(4*e0),0,e0);break;case Z0:m0=new Float32Array(Qs(4*e0),0,e0);break;default:return null}return m0.length!==e0?m0.subarray(0,e0):m0}function u0(Ql){Al(Ql.buffer)}return{alloc:Qs,free:Al,allocType:Jl,freeType:u0}}var nv=rp();nv.zero=rp();var fp=3408,Tp=3410,r2=3411,v1=3412,p1=3413,j1=3414,n2=3415,yv=33901,Mx=33902,f_=3379,c_=3386,bx=34921,Cx=36347,Tx=36348,d_=35661,Gm=35660,vy=34930,py=36349,h_=34076,v_=34024,Z$=7936,pS=7937,Ax=7938,Q$=35724,D0=34047,gS=36063,mS=34852,gy=3553,Ix=34067,yS=34069,_S=33984,jm=6408,p_=5126,kx=5121,q0=36160,Kp=36053,Lx=36064,g_=16384,xS=function(Ws,Qs){var Al=1;Qs.ext_texture_filter_anisotropic&&(Al=Ws.getParameter(D0));var Jl=1,u0=1;Qs.webgl_draw_buffers&&(Jl=Ws.getParameter(mS),u0=Ws.getParameter(gS));var Ql=!!Qs.oes_texture_float;if(Ql){var e0=Ws.createTexture();Ws.bindTexture(gy,e0),Ws.texImage2D(gy,0,jm,1,1,0,jm,p_,null);var m0=Ws.createFramebuffer();if(Ws.bindFramebuffer(q0,m0),Ws.framebufferTexture2D(q0,Lx,gy,e0,0),Ws.bindTexture(gy,null),Ws.checkFramebufferStatus(q0)!==Kp)Ql=!1;else{Ws.viewport(0,0,1,1),Ws.clearColor(1,0,0,1),Ws.clear(g_);var x0=nv.allocType(p_,4);Ws.readPixels(0,0,1,1,jm,p_,x0),Ws.getError()?Ql=!1:(Ws.deleteFramebuffer(m0),Ws.deleteTexture(e0),Ql=x0[0]===1),nv.freeType(x0)}}var C0=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),E0=!0;if(!C0){var T0=Ws.createTexture(),O0=nv.allocType(kx,36);Ws.activeTexture(_S),Ws.bindTexture(Ix,T0),Ws.texImage2D(yS,0,jm,3,3,0,jm,kx,O0),nv.freeType(O0),Ws.bindTexture(Ix,null),Ws.deleteTexture(T0),E0=!Ws.getError()}return{colorBits:[Ws.getParameter(Tp),Ws.getParameter(r2),Ws.getParameter(v1),Ws.getParameter(p1)],depthBits:Ws.getParameter(j1),stencilBits:Ws.getParameter(n2),subpixelBits:Ws.getParameter(fp),extensions:Object.keys(Qs).filter(function(_0){return!!Qs[_0]}),maxAnisotropic:Al,maxDrawbuffers:Jl,maxColorAttachments:u0,pointSizeDims:Ws.getParameter(yv),lineWidthDims:Ws.getParameter(Mx),maxViewportDims:Ws.getParameter(c_),maxCombinedTextureUnits:Ws.getParameter(d_),maxCubeMapSize:Ws.getParameter(h_),maxRenderbufferSize:Ws.getParameter(v_),maxTextureUnits:Ws.getParameter(vy),maxTextureSize:Ws.getParameter(f_),maxAttributes:Ws.getParameter(bx),maxVertexUniforms:Ws.getParameter(Cx),maxVertexTextureUnits:Ws.getParameter(Gm),maxVaryingVectors:Ws.getParameter(Tx),maxFragmentUniforms:Ws.getParameter(py),glsl:Ws.getParameter(Q$),renderer:Ws.getParameter(pS),vendor:Ws.getParameter(Z$),version:Ws.getParameter(Ax),readFloat:Ql,npotTextureCube:E0}};function g1(Ws){return!!Ws&&typeof Ws=="object"&&Array.isArray(Ws.shape)&&Array.isArray(Ws.stride)&&typeof Ws.offset=="number"&&Ws.shape.length===Ws.stride.length&&(Array.isArray(Ws.data)||rs(Ws.data))}var u1=function(Ws){return Object.keys(Ws).map(function(Qs){return Ws[Qs]})},my={shape:SS,flatten:ES};function Px(Ws,Qs,Al){for(var Jl=0;Jl<Qs;++Jl)Al[Jl]=Ws[Jl]}function i2(Ws,Qs,Al,Jl){for(var u0=0,Ql=0;Ql<Qs;++Ql)for(var e0=Ws[Ql],m0=0;m0<Al;++m0)Jl[u0++]=e0[m0]}function z1(Ws,Qs,Al,Jl,u0,Ql){for(var e0=Ql,m0=0;m0<Qs;++m0)for(var x0=Ws[m0],C0=0;C0<Al;++C0)for(var E0=x0[C0],T0=0;T0<Jl;++T0)u0[e0++]=E0[T0]}function m_(Ws,Qs,Al,Jl,u0){for(var Ql=1,e0=Al+1;e0<Qs.length;++e0)Ql*=Qs[e0];var m0=Qs[Al];if(Qs.length-Al===4){var x0=Qs[Al+1],C0=Qs[Al+2],E0=Qs[Al+3];for(e0=0;e0<m0;++e0)z1(Ws[e0],x0,C0,E0,Jl,u0),u0+=Ql}else for(e0=0;e0<m0;++e0)m_(Ws[e0],Qs,Al+1,Jl,u0),u0+=Ql}function ES(Ws,Qs,Al,Jl){var u0=1;if(Qs.length)for(var Ql=0;Ql<Qs.length;++Ql)u0*=Qs[Ql];else u0=0;var e0=Jl||nv.allocType(Al,u0);switch(Qs.length){case 0:break;case 1:Px(Ws,Qs[0],e0);break;case 2:i2(Ws,Qs[0],Qs[1],e0);break;case 3:z1(Ws,Qs[0],Qs[1],Qs[2],e0,0);break;default:m_(Ws,Qs,0,e0,0)}return e0}function SS(Ws){for(var Qs=[],Al=Ws;Al.length;Al=Al[0])Qs.push(Al.length);return Qs}var Up={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},wS=5120,$S=5122,MS=5124,bS=5121,Ox=5123,CS=5125,y_=5126,TS=5126,Mv={int8:wS,int16:$S,int32:MS,uint8:bS,uint16:Ox,uint32:CS,float:y_,float32:TS},AS=35048,IS=35040,yy={dynamic:AS,stream:IS,static:35044},__=my.flatten,Nx=my.shape,Dx=35044,kS=35040,x_=5121,_y=5126,m2=[];m2[5120]=1,m2[5122]=2,m2[5124]=4,m2[5121]=1,m2[5123]=2,m2[5125]=4,m2[5126]=4;function xy(Ws){return Up[Object.prototype.toString.call(Ws)]|0}function Rx(Ws,Qs){for(var Al=0;Al<Qs.length;++Al)Ws[Al]=Qs[Al]}function Bx(Ws,Qs,Al,Jl,u0,Ql,e0){for(var m0=0,x0=0;x0<Al;++x0)for(var C0=0;C0<Jl;++C0)Ws[m0++]=Qs[u0*x0+Ql*C0+e0]}function LS(Ws,Qs,Al,Jl){var u0=0,Ql={};function e0(Hl){this.id=u0++,this.buffer=Ws.createBuffer(),this.type=Hl,this.usage=Dx,this.byteLength=0,this.dimension=1,this.dtype=x_,this.persistentData=null,Al.profile&&(this.stats={size:0})}e0.prototype.bind=function(){Ws.bindBuffer(this.type,this.buffer)},e0.prototype.destroy=function(){O0(this)};var m0=[];function x0(Hl,t0){var $0=m0.pop();return $0||($0=new e0(Hl)),$0.bind(),T0($0,t0,kS,0,1,!1),$0}function C0(Hl){m0.push(Hl)}function E0(Hl,t0,$0){Hl.byteLength=t0.byteLength,Ws.bufferData(Hl.type,t0,$0)}function T0(Hl,t0,$0,F0,h0,z0){var p0;if(Hl.usage=$0,Array.isArray(t0)){if(Hl.dtype=F0||_y,t0.length>0){var L0;if(Array.isArray(t0[0])){p0=Nx(t0);for(var v0=1,I0=1;I0<p0.length;++I0)v0*=p0[I0];Hl.dimension=v0,L0=__(t0,p0,Hl.dtype),E0(Hl,L0,$0),z0?Hl.persistentData=L0:nv.freeType(L0)}else if(typeof t0[0]=="number"){Hl.dimension=h0;var ev=nv.allocType(Hl.dtype,t0.length);Rx(ev,t0),E0(Hl,ev,$0),z0?Hl.persistentData=ev:nv.freeType(ev)}else rs(t0[0])?(Hl.dimension=t0[0].length,Hl.dtype=F0||xy(t0[0])||_y,L0=__(t0,[t0.length,t0[0].length],Hl.dtype),E0(Hl,L0,$0),z0?Hl.persistentData=L0:nv.freeType(L0)):Xs.raise("invalid buffer data")}}else if(rs(t0))Hl.dtype=F0||xy(t0),Hl.dimension=h0,E0(Hl,t0,$0),z0&&(Hl.persistentData=new Uint8Array(new Uint8Array(t0.buffer)));else if(g1(t0)){p0=t0.shape;var hv=t0.stride,N0=t0.offset,S0=0,c0=0,cv=0,mv=0;p0.length===1?(S0=p0[0],c0=1,cv=hv[0],mv=0):p0.length===2?(S0=p0[0],c0=p0[1],cv=hv[0],mv=hv[1]):Xs.raise("invalid shape"),Hl.dtype=F0||xy(t0.data)||_y,Hl.dimension=c0;var Y0=nv.allocType(Hl.dtype,S0*c0);Bx(Y0,t0.data,S0,c0,cv,mv,N0),E0(Hl,Y0,$0),z0?Hl.persistentData=Y0:nv.freeType(Y0)}else t0 instanceof ArrayBuffer?(Hl.dtype=x_,Hl.dimension=h0,E0(Hl,t0,$0),z0&&(Hl.persistentData=new Uint8Array(new Uint8Array(t0)))):Xs.raise("invalid buffer data")}function O0(Hl){Qs.bufferCount--,Jl(Hl);var t0=Hl.buffer;Xs(t0,"buffer must not be deleted already"),Ws.deleteBuffer(t0),Hl.buffer=null,delete Ql[Hl.id]}function _0(Hl,t0,$0,F0){Qs.bufferCount++;var h0=new e0(t0);Ql[h0.id]=h0;function z0(v0){var I0=Dx,ev=null,hv=0,N0=0,S0=1;return Array.isArray(v0)||rs(v0)||g1(v0)||v0 instanceof ArrayBuffer?ev=v0:typeof v0=="number"?hv=v0|0:v0&&(Xs.type(v0,"object","buffer arguments must be an object, a number or an array"),"data"in v0&&(Xs(ev===null||Array.isArray(ev)||rs(ev)||g1(ev),"invalid data for buffer"),ev=v0.data),"usage"in v0&&(Xs.parameter(v0.usage,yy,"invalid buffer usage"),I0=yy[v0.usage]),"type"in v0&&(Xs.parameter(v0.type,Mv,"invalid buffer type"),N0=Mv[v0.type]),"dimension"in v0&&(Xs.type(v0.dimension,"number","invalid dimension"),S0=v0.dimension|0),"length"in v0&&(Xs.nni(hv,"buffer length must be a nonnegative integer"),hv=v0.length|0)),h0.bind(),ev?T0(h0,ev,I0,N0,S0,F0):(hv&&Ws.bufferData(h0.type,hv,I0),h0.dtype=N0||x_,h0.usage=I0,h0.dimension=S0,h0.byteLength=hv),Al.profile&&(h0.stats.size=h0.byteLength*m2[h0.dtype]),z0}function p0(v0,I0){Xs(I0+v0.byteLength<=h0.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+v0.byteLength+" starting from offset "+I0+" to a buffer of size "+h0.byteLength),Ws.bufferSubData(h0.type,I0,v0)}function L0(v0,I0){var ev=(I0||0)|0,hv;if(h0.bind(),rs(v0)||v0 instanceof ArrayBuffer)p0(v0,ev);else if(Array.isArray(v0)){if(v0.length>0)if(typeof v0[0]=="number"){var N0=nv.allocType(h0.dtype,v0.length);Rx(N0,v0),p0(N0,ev),nv.freeType(N0)}else if(Array.isArray(v0[0])||rs(v0[0])){hv=Nx(v0);var S0=__(v0,hv,h0.dtype);p0(S0,ev),nv.freeType(S0)}else Xs.raise("invalid buffer data")}else if(g1(v0)){hv=v0.shape;var c0=v0.stride,cv=0,mv=0,Y0=0,Av=0;hv.length===1?(cv=hv[0],mv=1,Y0=c0[0],Av=0):hv.length===2?(cv=hv[0],mv=hv[1],Y0=c0[0],Av=c0[1]):Xs.raise("invalid shape");var vv=Array.isArray(v0.data)?h0.dtype:xy(v0.data),bv=nv.allocType(vv,cv*mv);Bx(bv,v0.data,cv,mv,Y0,Av,v0.offset),p0(bv,ev),nv.freeType(bv)}else Xs.raise("invalid data for buffer subdata");return z0}return $0||z0(Hl),z0._reglType="buffer",z0._buffer=h0,z0.subdata=L0,Al.profile&&(z0.stats=h0.stats),z0.destroy=function(){O0(h0)},z0}function A0(){u1(Ql).forEach(function(Hl){Hl.buffer=Ws.createBuffer(),Ws.bindBuffer(Hl.type,Hl.buffer),Ws.bufferData(Hl.type,Hl.persistentData||Hl.byteLength,Hl.usage)})}return Al.profile&&(Qs.getTotalBufferSize=function(){var Hl=0;return Object.keys(Ql).forEach(function(t0){Hl+=Ql[t0].stats.size}),Hl}),{create:_0,createStream:x0,destroyStream:C0,clear:function(){u1(Ql).forEach(O0),m0.forEach(O0)},getBuffer:function(Hl){return Hl&&Hl._buffer instanceof e0?Hl._buffer:null},restore:A0,_initBuffer:T0}}var PS=0,OS=0,NS=1,DS=1,RS=4,BS=4,um={points:PS,point:OS,lines:NS,line:DS,triangles:RS,triangle:BS,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},GS=0,jS=1,zm=4,zS=5120,lm=5121,Fx=5122,fm=5123,Gx=5124,L2=5125,E_=34963,US=35040,HS=35044;function WS(Ws,Qs,Al,Jl){var u0={},Ql=0,e0={uint8:lm,uint16:fm};Qs.oes_element_index_uint&&(e0.uint32=L2);function m0(A0){this.id=Ql++,u0[this.id]=this,this.buffer=A0,this.primType=zm,this.vertCount=0,this.type=0}m0.prototype.bind=function(){this.buffer.bind()};var x0=[];function C0(A0){var Hl=x0.pop();return Hl||(Hl=new m0(Al.create(null,E_,!0,!1)._buffer)),T0(Hl,A0,US,-1,-1,0,0),Hl}function E0(A0){x0.push(A0)}function T0(A0,Hl,t0,$0,F0,h0,z0){A0.buffer.bind();var p0;if(Hl){var L0=z0;!z0&&(!rs(Hl)||g1(Hl)&&!rs(Hl.data))&&(L0=Qs.oes_element_index_uint?L2:fm),Al._initBuffer(A0.buffer,Hl,t0,L0,3)}else Ws.bufferData(E_,h0,t0),A0.buffer.dtype=p0||lm,A0.buffer.usage=t0,A0.buffer.dimension=3,A0.buffer.byteLength=h0;if(p0=z0,!z0){switch(A0.buffer.dtype){case lm:case zS:p0=lm;break;case fm:case Fx:p0=fm;break;case L2:case Gx:p0=L2;break;default:Xs.raise("unsupported type for element array")}A0.buffer.dtype=p0}A0.type=p0,Xs(p0!==L2||!!Qs.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var v0=F0;v0<0&&(v0=A0.buffer.byteLength,p0===fm?v0>>=1:p0===L2&&(v0>>=2)),A0.vertCount=v0;var I0=$0;if($0<0){I0=zm;var ev=A0.buffer.dimension;ev===1&&(I0=GS),ev===2&&(I0=jS),ev===3&&(I0=zm)}A0.primType=I0}function O0(A0){Jl.elementsCount--,Xs(A0.buffer!==null,"must not double destroy elements"),delete u0[A0.id],A0.buffer.destroy(),A0.buffer=null}function _0(A0,Hl){var t0=Al.create(null,E_,!0),$0=new m0(t0._buffer);Jl.elementsCount++;function F0(h0){if(!h0)t0(),$0.primType=zm,$0.vertCount=0,$0.type=lm;else if(typeof h0=="number")t0(h0),$0.primType=zm,$0.vertCount=h0|0,$0.type=lm;else{var z0=null,p0=HS,L0=-1,v0=-1,I0=0,ev=0;Array.isArray(h0)||rs(h0)||g1(h0)?z0=h0:(Xs.type(h0,"object","invalid arguments for elements"),"data"in h0&&(z0=h0.data,Xs(Array.isArray(z0)||rs(z0)||g1(z0),"invalid data for element buffer")),"usage"in h0&&(Xs.parameter(h0.usage,yy,"invalid element buffer usage"),p0=yy[h0.usage]),"primitive"in h0&&(Xs.parameter(h0.primitive,um,"invalid element buffer primitive"),L0=um[h0.primitive]),"count"in h0&&(Xs(typeof h0.count=="number"&&h0.count>=0,"invalid vertex count for elements"),v0=h0.count|0),"type"in h0&&(Xs.parameter(h0.type,e0,"invalid buffer type"),ev=e0[h0.type]),"length"in h0?I0=h0.length|0:(I0=v0,ev===fm||ev===Fx?I0*=2:(ev===L2||ev===Gx)&&(I0*=4))),T0($0,z0,p0,L0,v0,I0,ev)}return F0}return F0(A0),F0._reglType="elements",F0._elements=$0,F0.subdata=function(h0,z0){return t0.subdata(h0,z0),F0},F0.destroy=function(){O0($0)},F0}return{create:_0,createStream:C0,destroyStream:E0,getElements:function(A0){return typeof A0=="function"&&A0._elements instanceof m0?A0._elements:null},clear:function(){u1(u0).forEach(O0)}}}var jx=new Float32Array(1),VS=new Uint32Array(jx.buffer),YS=5123;function zx(Ws){for(var Qs=nv.allocType(YS,Ws.length),Al=0;Al<Ws.length;++Al)if(isNaN(Ws[Al]))Qs[Al]=65535;else if(Ws[Al]===1/0)Qs[Al]=31744;else if(Ws[Al]===-1/0)Qs[Al]=64512;else{jx[0]=Ws[Al];var Jl=VS[0],u0=Jl>>>31<<15,Ql=(Jl<<1>>>24)-127,e0=Jl>>13&1023;if(Ql<-24)Qs[Al]=u0;else if(Ql<-14){var m0=-14-Ql;Qs[Al]=u0+(e0+1024>>m0)}else Ql>15?Qs[Al]=u0+31744:Qs[Al]=u0+(Ql+15<<10)+e0}return Qs}function vp(Ws){return Array.isArray(Ws)||rs(Ws)}var Ux=function(Ws){return!(Ws&Ws-1)&&!!Ws},XS=34467,U1=3553,S_=34067,Ey=34069,P2=6408,w_=6406,Sy=6407,Um=6409,wy=6410,Hx=32854,$_=32855,Wx=36194,qS=32819,KS=32820,ZS=33635,QS=34042,M_=6402,$y=34041,b_=35904,C_=35906,cm=36193,T_=33776,A_=33777,I_=33778,k_=33779,Vx=35986,Yx=35987,L_=34798,P_=35840,O_=35841,N_=35842,D_=35843,R_=36196,dm=5121,B_=5123,F_=5125,Hm=5126,Pp=10242,JS=10243,ew=10497,m1=33071,Xx=33648,qx=10240,Kx=10241,My=9728,O2=9729,np=9984,I1=9985,by=9986,y2=9987,tw=33170,Cy=4352,rw=4353,Zx=4354,k1=34046,ep=3317,Qx=37440,Jx=37441,nw=37443,eE=37444,hm=33984,iw=[np,by,I1,y2],Ty=[0,Um,wy,Sy,P2],y1={};y1[Um]=y1[w_]=y1[M_]=1,y1[$y]=y1[wy]=2,y1[Sy]=y1[b_]=3,y1[P2]=y1[C_]=4;function vm(Ws){return"[object "+Ws+"]"}var G_=vm("HTMLCanvasElement"),l1=vm("OffscreenCanvas"),H1=vm("CanvasRenderingContext2D"),Dp=vm("ImageBitmap"),j_=vm("HTMLImageElement"),z_=vm("HTMLVideoElement"),N2=Object.keys(Up).concat([G_,l1,H1,Dp,j_,z_]),Zp=[];Zp[dm]=1,Zp[Hm]=4,Zp[cm]=2,Zp[B_]=2,Zp[F_]=4;var hp=[];hp[Hx]=2,hp[$_]=2,hp[Wx]=2,hp[$y]=4,hp[T_]=.5,hp[A_]=.5,hp[I_]=1,hp[k_]=1,hp[Vx]=.5,hp[Yx]=1,hp[L_]=1,hp[P_]=.5,hp[O_]=.25,hp[N_]=.5,hp[D_]=.25,hp[R_]=.5;function Ay(Ws){return Array.isArray(Ws)&&(Ws.length===0||typeof Ws[0]=="number")}function Iy(Ws){if(!Array.isArray(Ws))return!1;var Qs=Ws.length;return!(Qs===0||!vp(Ws[0]))}function D2(Ws){return Object.prototype.toString.call(Ws)}function tE(Ws){return D2(Ws)===G_}function rE(Ws){return D2(Ws)===l1}function U_(Ws){return D2(Ws)===H1}function H_(Ws){return D2(Ws)===Dp}function nE(Ws){return D2(Ws)===j_}function L1(Ws){return D2(Ws)===z_}function ky(Ws){if(!Ws)return!1;var Qs=D2(Ws);return N2.indexOf(Qs)>=0?!0:Ay(Ws)||Iy(Ws)||g1(Ws)}function R2(Ws){return Up[Object.prototype.toString.call(Ws)]|0}function Wm(Ws,Qs){var Al=Qs.length;switch(Ws.type){case dm:case B_:case F_:case Hm:var Jl=nv.allocType(Ws.type,Al);Jl.set(Qs),Ws.data=Jl;break;case cm:Ws.data=zx(Qs);break;default:Xs.raise("unsupported texture type, must specify a typed array")}}function W_(Ws,Qs){return nv.allocType(Ws.type===cm?Hm:Ws.type,Qs)}function iE(Ws,Qs){Ws.type===cm?(Ws.data=zx(Qs),nv.freeType(Qs)):Ws.data=Qs}function Ap(Ws,Qs,Al,Jl,u0,Ql){for(var e0=Ws.width,m0=Ws.height,x0=Ws.channels,C0=e0*m0*x0,E0=W_(Ws,C0),T0=0,O0=0;O0<m0;++O0)for(var _0=0;_0<e0;++_0)for(var A0=0;A0<x0;++A0)E0[T0++]=Qs[Al*_0+Jl*O0+u0*A0+Ql];iE(Ws,E0)}function x1(Ws,Qs,Al,Jl,u0,Ql){var e0;if(typeof hp[Ws]<"u"?e0=hp[Ws]:e0=y1[Ws]*Zp[Qs],Ql&&(e0*=6),u0){for(var m0=0,x0=Al;x0>=1;)m0+=e0*x0*x0,x0/=2;return m0}else return e0*Al*Jl}function B2(Ws,Qs,Al,Jl,u0,Ql,e0){var m0={"don't care":Cy,"dont care":Cy,nice:Zx,fast:rw},x0={repeat:ew,clamp:m1,mirror:Xx},C0={nearest:My,linear:O2},E0=as({mipmap:y2,"nearest mipmap nearest":np,"linear mipmap nearest":I1,"nearest mipmap linear":by,"linear mipmap linear":y2},C0),T0={none:0,browser:eE},O0={uint8:dm,rgba4:qS,rgb565:ZS,"rgb5 a1":KS},_0={alpha:w_,luminance:Um,"luminance alpha":wy,rgb:Sy,rgba:P2,rgba4:Hx,"rgb5 a1":$_,rgb565:Wx},A0={};Qs.ext_srgb&&(_0.srgb=b_,_0.srgba=C_),Qs.oes_texture_float&&(O0.float32=O0.float=Hm),Qs.oes_texture_half_float&&(O0.float16=O0["half float"]=cm),Qs.webgl_depth_texture&&(as(_0,{depth:M_,"depth stencil":$y}),as(O0,{uint16:B_,uint32:F_,"depth stencil":QS})),Qs.webgl_compressed_texture_s3tc&&as(A0,{"rgb s3tc dxt1":T_,"rgba s3tc dxt1":A_,"rgba s3tc dxt3":I_,"rgba s3tc dxt5":k_}),Qs.webgl_compressed_texture_atc&&as(A0,{"rgb atc":Vx,"rgba atc explicit alpha":Yx,"rgba atc interpolated alpha":L_}),Qs.webgl_compressed_texture_pvrtc&&as(A0,{"rgb pvrtc 4bppv1":P_,"rgb pvrtc 2bppv1":O_,"rgba pvrtc 4bppv1":N_,"rgba pvrtc 2bppv1":D_}),Qs.webgl_compressed_texture_etc1&&(A0["rgb etc1"]=R_);var Hl=Array.prototype.slice.call(Ws.getParameter(XS));Object.keys(A0).forEach(function(Cl){var _f=A0[Cl];Hl.indexOf(_f)>=0&&(_0[Cl]=_f)});var t0=Object.keys(_0);Al.textureFormats=t0;var $0=[];Object.keys(_0).forEach(function(Cl){var _f=_0[Cl];$0[_f]=Cl});var F0=[];Object.keys(O0).forEach(function(Cl){var _f=O0[Cl];F0[_f]=Cl});var h0=[];Object.keys(C0).forEach(function(Cl){var _f=C0[Cl];h0[_f]=Cl});var z0=[];Object.keys(E0).forEach(function(Cl){var _f=E0[Cl];z0[_f]=Cl});var p0=[];Object.keys(x0).forEach(function(Cl){var _f=x0[Cl];p0[_f]=Cl});var L0=t0.reduce(function(Cl,_f){var Zl=_0[_f];return Zl===Um||Zl===w_||Zl===Um||Zl===wy||Zl===M_||Zl===$y||Qs.ext_srgb&&(Zl===b_||Zl===C_)?Cl[Zl]=Zl:Zl===$_||_f.indexOf("rgba")>=0?Cl[Zl]=P2:Cl[Zl]=Sy,Cl},{});function v0(){this.internalformat=P2,this.format=P2,this.type=dm,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=eE,this.width=0,this.height=0,this.channels=0}function I0(Cl,_f){Cl.internalformat=_f.internalformat,Cl.format=_f.format,Cl.type=_f.type,Cl.compressed=_f.compressed,Cl.premultiplyAlpha=_f.premultiplyAlpha,Cl.flipY=_f.flipY,Cl.unpackAlignment=_f.unpackAlignment,Cl.colorSpace=_f.colorSpace,Cl.width=_f.width,Cl.height=_f.height,Cl.channels=_f.channels}function ev(Cl,_f){if(!(typeof _f!="object"||!_f)){if("premultiplyAlpha"in _f&&(Xs.type(_f.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Cl.premultiplyAlpha=_f.premultiplyAlpha),"flipY"in _f&&(Xs.type(_f.flipY,"boolean","invalid texture flip"),Cl.flipY=_f.flipY),"alignment"in _f&&(Xs.oneOf(_f.alignment,[1,2,4,8],"invalid texture unpack alignment"),Cl.unpackAlignment=_f.alignment),"colorSpace"in _f&&(Xs.parameter(_f.colorSpace,T0,"invalid colorSpace"),Cl.colorSpace=T0[_f.colorSpace]),"type"in _f){var Zl=_f.type;Xs(Qs.oes_texture_float||!(Zl==="float"||Zl==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Xs(Qs.oes_texture_half_float||!(Zl==="half float"||Zl==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Xs(Qs.webgl_depth_texture||!(Zl==="uint16"||Zl==="uint32"||Zl==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Xs.parameter(Zl,O0,"invalid texture type"),Cl.type=O0[Zl]}var H0=Cl.width,Iv=Cl.height,$l=Cl.channels,xl=!1;"shape"in _f?(Xs(Array.isArray(_f.shape)&&_f.shape.length>=2,"shape must be an array"),H0=_f.shape[0],Iv=_f.shape[1],_f.shape.length===3&&($l=_f.shape[2],Xs($l>0&&$l<=4,"invalid number of channels"),xl=!0),Xs(H0>=0&&H0<=Al.maxTextureSize,"invalid width"),Xs(Iv>=0&&Iv<=Al.maxTextureSize,"invalid height")):("radius"in _f&&(H0=Iv=_f.radius,Xs(H0>=0&&H0<=Al.maxTextureSize,"invalid radius")),"width"in _f&&(H0=_f.width,Xs(H0>=0&&H0<=Al.maxTextureSize,"invalid width")),"height"in _f&&(Iv=_f.height,Xs(Iv>=0&&Iv<=Al.maxTextureSize,"invalid height")),"channels"in _f&&($l=_f.channels,Xs($l>0&&$l<=4,"invalid number of channels"),xl=!0)),Cl.width=H0|0,Cl.height=Iv|0,Cl.channels=$l|0;var Pl=!1;if("format"in _f){var zl=_f.format;Xs(Qs.webgl_depth_texture||!(zl==="depth"||zl==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Xs.parameter(zl,_0,"invalid texture format");var Vl=Cl.internalformat=_0[zl];Cl.format=L0[Vl],zl in O0&&("type"in _f||(Cl.type=O0[zl])),zl in A0&&(Cl.compressed=!0),Pl=!0}!xl&&Pl?Cl.channels=y1[Cl.format]:xl&&!Pl?Cl.channels!==Ty[Cl.format]&&(Cl.format=Cl.internalformat=Ty[Cl.channels]):Pl&&xl&&Xs(Cl.channels===y1[Cl.format],"number of channels inconsistent with specified format")}}function hv(Cl){Ws.pixelStorei(Qx,Cl.flipY),Ws.pixelStorei(Jx,Cl.premultiplyAlpha),Ws.pixelStorei(nw,Cl.colorSpace),Ws.pixelStorei(ep,Cl.unpackAlignment)}function N0(){v0.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function S0(Cl,_f){var Zl=null;if(ky(_f)?Zl=_f:_f&&(Xs.type(_f,"object","invalid pixel data type"),ev(Cl,_f),"x"in _f&&(Cl.xOffset=_f.x|0),"y"in _f&&(Cl.yOffset=_f.y|0),ky(_f.data)&&(Zl=_f.data)),Xs(!Cl.compressed||Zl instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),_f.copy){Xs(!Zl,"can not specify copy and data field for the same texture");var H0=u0.viewportWidth,Iv=u0.viewportHeight;Cl.width=Cl.width||H0-Cl.xOffset,Cl.height=Cl.height||Iv-Cl.yOffset,Cl.needsCopy=!0,Xs(Cl.xOffset>=0&&Cl.xOffset<H0&&Cl.yOffset>=0&&Cl.yOffset<Iv&&Cl.width>0&&Cl.width<=H0&&Cl.height>0&&Cl.height<=Iv,"copy texture read out of bounds")}else if(!Zl)Cl.width=Cl.width||1,Cl.height=Cl.height||1,Cl.channels=Cl.channels||4;else if(rs(Zl))Cl.channels=Cl.channels||4,Cl.data=Zl,!("type"in _f)&&Cl.type===dm&&(Cl.type=R2(Zl));else if(Ay(Zl))Cl.channels=Cl.channels||4,Wm(Cl,Zl),Cl.alignment=1,Cl.needsFree=!0;else if(g1(Zl)){var $l=Zl.data;!Array.isArray($l)&&Cl.type===dm&&(Cl.type=R2($l));var xl=Zl.shape,Pl=Zl.stride,zl,Vl,Dl,Ol,Bl,Ml;xl.length===3?(Dl=xl[2],Ml=Pl[2]):(Xs(xl.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Dl=1,Ml=1),zl=xl[0],Vl=xl[1],Ol=Pl[0],Bl=Pl[1],Cl.alignment=1,Cl.width=zl,Cl.height=Vl,Cl.channels=Dl,Cl.format=Cl.internalformat=Ty[Dl],Cl.needsFree=!0,Ap(Cl,$l,Ol,Bl,Ml,Zl.offset)}else if(tE(Zl)||rE(Zl)||U_(Zl))tE(Zl)||rE(Zl)?Cl.element=Zl:Cl.element=Zl.canvas,Cl.width=Cl.element.width,Cl.height=Cl.element.height,Cl.channels=4;else if(H_(Zl))Cl.element=Zl,Cl.width=Zl.width,Cl.height=Zl.height,Cl.channels=4;else if(nE(Zl))Cl.element=Zl,Cl.width=Zl.naturalWidth,Cl.height=Zl.naturalHeight,Cl.channels=4;else if(L1(Zl))Cl.element=Zl,Cl.width=Zl.videoWidth,Cl.height=Zl.videoHeight,Cl.channels=4;else if(Iy(Zl)){var Ll=Cl.width||Zl[0].length,El=Cl.height||Zl.length,Fl=Cl.channels;vp(Zl[0][0])?Fl=Fl||Zl[0][0].length:Fl=Fl||1;for(var Yl=my.shape(Zl),o0=1,s0=0;s0<Yl.length;++s0)o0*=Yl[s0];var n0=W_(Cl,o0);my.flatten(Zl,Yl,"",n0),iE(Cl,n0),Cl.alignment=1,Cl.width=Ll,Cl.height=El,Cl.channels=Fl,Cl.format=Cl.internalformat=Ty[Fl],Cl.needsFree=!0}Cl.type===Hm?Xs(Al.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Cl.type===cm&&Xs(Al.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function c0(Cl,_f,Zl){var H0=Cl.element,Iv=Cl.data,$l=Cl.internalformat,xl=Cl.format,Pl=Cl.type,zl=Cl.width,Vl=Cl.height;hv(Cl),H0?Ws.texImage2D(_f,Zl,xl,xl,Pl,H0):Cl.compressed?Ws.compressedTexImage2D(_f,Zl,$l,zl,Vl,0,Iv):Cl.needsCopy?(Jl(),Ws.copyTexImage2D(_f,Zl,xl,Cl.xOffset,Cl.yOffset,zl,Vl,0)):Ws.texImage2D(_f,Zl,xl,zl,Vl,0,xl,Pl,Iv||null)}function cv(Cl,_f,Zl,H0,Iv){var $l=Cl.element,xl=Cl.data,Pl=Cl.internalformat,zl=Cl.format,Vl=Cl.type,Dl=Cl.width,Ol=Cl.height;hv(Cl),$l?Ws.texSubImage2D(_f,Iv,Zl,H0,zl,Vl,$l):Cl.compressed?Ws.compressedTexSubImage2D(_f,Iv,Zl,H0,Pl,Dl,Ol,xl):Cl.needsCopy?(Jl(),Ws.copyTexSubImage2D(_f,Iv,Zl,H0,Cl.xOffset,Cl.yOffset,Dl,Ol)):Ws.texSubImage2D(_f,Iv,Zl,H0,Dl,Ol,zl,Vl,xl)}var mv=[];function Y0(){return mv.pop()||new N0}function Av(Cl){Cl.needsFree&&nv.freeType(Cl.data),N0.call(Cl),mv.push(Cl)}function vv(){v0.call(this),this.genMipmaps=!1,this.mipmapHint=Cy,this.mipmask=0,this.images=Array(16)}function bv(Cl,_f,Zl){var H0=Cl.images[0]=Y0();Cl.mipmask=1,H0.width=Cl.width=_f,H0.height=Cl.height=Zl,H0.channels=Cl.channels=4}function Uv(Cl,_f){var Zl=null;if(ky(_f))Zl=Cl.images[0]=Y0(),I0(Zl,Cl),S0(Zl,_f),Cl.mipmask=1;else if(ev(Cl,_f),Array.isArray(_f.mipmap))for(var H0=_f.mipmap,Iv=0;Iv<H0.length;++Iv)Zl=Cl.images[Iv]=Y0(),I0(Zl,Cl),Zl.width>>=Iv,Zl.height>>=Iv,S0(Zl,H0[Iv]),Cl.mipmask|=1<<Iv;else Zl=Cl.images[0]=Y0(),I0(Zl,Cl),S0(Zl,_f),Cl.mipmask=1;I0(Cl,Cl.images[0]),Cl.compressed&&(Cl.internalformat===T_||Cl.internalformat===A_||Cl.internalformat===I_||Cl.internalformat===k_)&&Xs(Cl.width%4===0&&Cl.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function xp(Cl,_f){for(var Zl=Cl.images,H0=0;H0<Zl.length;++H0){if(!Zl[H0])return;c0(Zl[H0],_f,H0)}}var Ip=[];function Nv(){var Cl=Ip.pop()||new vv;v0.call(Cl),Cl.mipmask=0;for(var _f=0;_f<16;++_f)Cl.images[_f]=null;return Cl}function Ep(Cl){for(var _f=Cl.images,Zl=0;Zl<_f.length;++Zl)_f[Zl]&&Av(_f[Zl]),_f[Zl]=null;Ip.push(Cl)}function op(){this.minFilter=My,this.magFilter=My,this.wrapS=m1,this.wrapT=m1,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Cy}function Sp(Cl,_f){if("min"in _f){var Zl=_f.min;Xs.parameter(Zl,E0),Cl.minFilter=E0[Zl],iw.indexOf(Cl.minFilter)>=0&&!("faces"in _f)&&(Cl.genMipmaps=!0)}if("mag"in _f){var H0=_f.mag;Xs.parameter(H0,C0),Cl.magFilter=C0[H0]}var Iv=Cl.wrapS,$l=Cl.wrapT;if("wrap"in _f){var xl=_f.wrap;typeof xl=="string"?(Xs.parameter(xl,x0),Iv=$l=x0[xl]):Array.isArray(xl)&&(Xs.parameter(xl[0],x0),Xs.parameter(xl[1],x0),Iv=x0[xl[0]],$l=x0[xl[1]])}else{if("wrapS"in _f){var Pl=_f.wrapS;Xs.parameter(Pl,x0),Iv=x0[Pl]}if("wrapT"in _f){var zl=_f.wrapT;Xs.parameter(zl,x0),$l=x0[zl]}}if(Cl.wrapS=Iv,Cl.wrapT=$l,"anisotropic"in _f){var Vl=_f.anisotropic;Xs(typeof Vl=="number"&&Vl>=1&&Vl<=Al.maxAnisotropic,"aniso samples must be between 1 and "),Cl.anisotropic=_f.anisotropic}if("mipmap"in _f){var Dl=!1;switch(typeof _f.mipmap){case"string":Xs.parameter(_f.mipmap,m0,"invalid mipmap hint"),Cl.mipmapHint=m0[_f.mipmap],Cl.genMipmaps=!0,Dl=!0;break;case"boolean":Dl=Cl.genMipmaps=_f.mipmap;break;case"object":Xs(Array.isArray(_f.mipmap),"invalid mipmap type"),Cl.genMipmaps=!1,Dl=!0;break;default:Xs.raise("invalid mipmap type")}Dl&&!("min"in _f)&&(Cl.minFilter=np)}}function Mp(Cl,_f){Ws.texParameteri(_f,Kx,Cl.minFilter),Ws.texParameteri(_f,qx,Cl.magFilter),Ws.texParameteri(_f,Pp,Cl.wrapS),Ws.texParameteri(_f,JS,Cl.wrapT),Qs.ext_texture_filter_anisotropic&&Ws.texParameteri(_f,k1,Cl.anisotropic),Cl.genMipmaps&&(Ws.hint(tw,Cl.mipmapHint),Ws.generateMipmap(_f))}var bp=0,kp={},Np=Al.maxTextureUnits,pp=Array(Np).map(function(){return null});function dv(Cl){v0.call(this),this.mipmask=0,this.internalformat=P2,this.id=bp++,this.refCount=1,this.target=Cl,this.texture=Ws.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new op,e0.profile&&(this.stats={size:0})}function up(Cl){Ws.activeTexture(hm),Ws.bindTexture(Cl.target,Cl.texture)}function Dv(){var Cl=pp[0];Cl?Ws.bindTexture(Cl.target,Cl.texture):Ws.bindTexture(U1,null)}function _d(Cl){var _f=Cl.texture;Xs(_f,"must not double destroy texture");var Zl=Cl.unit,H0=Cl.target;Zl>=0&&(Ws.activeTexture(hm+Zl),Ws.bindTexture(H0,null),pp[Zl]=null),Ws.deleteTexture(_f),Cl.texture=null,Cl.params=null,Cl.pixels=null,Cl.refCount=0,delete kp[Cl.id],Ql.textureCount--}as(dv.prototype,{bind:function(){var Cl=this;Cl.bindCount+=1;var _f=Cl.unit;if(_f<0){for(var Zl=0;Zl<Np;++Zl){var H0=pp[Zl];if(H0){if(H0.bindCount>0)continue;H0.unit=-1}pp[Zl]=Cl,_f=Zl;break}_f>=Np&&Xs.raise("insufficient number of texture units"),e0.profile&&Ql.maxTextureUnits<_f+1&&(Ql.maxTextureUnits=_f+1),Cl.unit=_f,Ws.activeTexture(hm+_f),Ws.bindTexture(Cl.target,Cl.texture)}return _f},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&_d(this)}});function Ov(Cl,_f){var Zl=new dv(U1);kp[Zl.id]=Zl,Ql.textureCount++;function H0(xl,Pl){var zl=Zl.texInfo;op.call(zl);var Vl=Nv();return typeof xl=="number"?typeof Pl=="number"?bv(Vl,xl|0,Pl|0):bv(Vl,xl|0,xl|0):xl?(Xs.type(xl,"object","invalid arguments to regl.texture"),Sp(zl,xl),Uv(Vl,xl)):bv(Vl,1,1),zl.genMipmaps&&(Vl.mipmask=(Vl.width<<1)-1),Zl.mipmask=Vl.mipmask,I0(Zl,Vl),Xs.texture2D(zl,Vl,Al),Zl.internalformat=Vl.internalformat,H0.width=Vl.width,H0.height=Vl.height,up(Zl),xp(Vl,U1),Mp(zl,U1),Dv(),Ep(Vl),e0.profile&&(Zl.stats.size=x1(Zl.internalformat,Zl.type,Vl.width,Vl.height,zl.genMipmaps,!1)),H0.format=$0[Zl.internalformat],H0.type=F0[Zl.type],H0.mag=h0[zl.magFilter],H0.min=z0[zl.minFilter],H0.wrapS=p0[zl.wrapS],H0.wrapT=p0[zl.wrapT],H0}function Iv(xl,Pl,zl,Vl){Xs(!!xl,"must specify image data");var Dl=Pl|0,Ol=zl|0,Bl=Vl|0,Ml=Y0();return I0(Ml,Zl),Ml.width=0,Ml.height=0,S0(Ml,xl),Ml.width=Ml.width||(Zl.width>>Bl)-Dl,Ml.height=Ml.height||(Zl.height>>Bl)-Ol,Xs(Zl.type===Ml.type&&Zl.format===Ml.format&&Zl.internalformat===Ml.internalformat,"incompatible format for texture.subimage"),Xs(Dl>=0&&Ol>=0&&Dl+Ml.width<=Zl.width&&Ol+Ml.height<=Zl.height,"texture.subimage write out of bounds"),Xs(Zl.mipmask&1<<Bl,"missing mipmap data"),Xs(Ml.data||Ml.element||Ml.needsCopy,"missing image data"),up(Zl),cv(Ml,U1,Dl,Ol,Bl),Dv(),Av(Ml),H0}function $l(xl,Pl){var zl=xl|0,Vl=Pl|0||zl;if(zl===Zl.width&&Vl===Zl.height)return H0;H0.width=Zl.width=zl,H0.height=Zl.height=Vl,up(Zl);for(var Dl=0;Zl.mipmask>>Dl;++Dl){var Ol=zl>>Dl,Bl=Vl>>Dl;if(!Ol||!Bl)break;Ws.texImage2D(U1,Dl,Zl.format,Ol,Bl,0,Zl.format,Zl.type,null)}return Dv(),e0.profile&&(Zl.stats.size=x1(Zl.internalformat,Zl.type,zl,Vl,!1,!1)),H0}return H0(Cl,_f),H0.subimage=Iv,H0.resize=$l,H0._reglType="texture2d",H0._texture=Zl,e0.profile&&(H0.stats=Zl.stats),H0.destroy=function(){Zl.decRef()},H0}function Gv(Cl,_f,Zl,H0,Iv,$l){var xl=new dv(S_);kp[xl.id]=xl,Ql.cubeCount++;var Pl=new Array(6);function zl(Ol,Bl,Ml,Ll,El,Fl){var Yl,o0=xl.texInfo;for(op.call(o0),Yl=0;Yl<6;++Yl)Pl[Yl]=Nv();if(typeof Ol=="number"||!Ol){var s0=Ol|0||1;for(Yl=0;Yl<6;++Yl)bv(Pl[Yl],s0,s0)}else if(typeof Ol=="object")if(Bl)Uv(Pl[0],Ol),Uv(Pl[1],Bl),Uv(Pl[2],Ml),Uv(Pl[3],Ll),Uv(Pl[4],El),Uv(Pl[5],Fl);else if(Sp(o0,Ol),ev(xl,Ol),"faces"in Ol){var n0=Ol.faces;for(Xs(Array.isArray(n0)&&n0.length===6,"cube faces must be a length 6 array"),Yl=0;Yl<6;++Yl)Xs(typeof n0[Yl]=="object"&&!!n0[Yl],"invalid input for cube map face"),I0(Pl[Yl],xl),Uv(Pl[Yl],n0[Yl])}else for(Yl=0;Yl<6;++Yl)Uv(Pl[Yl],Ol);else Xs.raise("invalid arguments to cube map");for(I0(xl,Pl[0]),Al.npotTextureCube||Xs(Ux(xl.width)&&Ux(xl.height),"your browser does not support non power or two texture dimensions"),o0.genMipmaps?xl.mipmask=(Pl[0].width<<1)-1:xl.mipmask=Pl[0].mipmask,Xs.textureCube(xl,o0,Pl,Al),xl.internalformat=Pl[0].internalformat,zl.width=Pl[0].width,zl.height=Pl[0].height,up(xl),Yl=0;Yl<6;++Yl)xp(Pl[Yl],Ey+Yl);for(Mp(o0,S_),Dv(),e0.profile&&(xl.stats.size=x1(xl.internalformat,xl.type,zl.width,zl.height,o0.genMipmaps,!0)),zl.format=$0[xl.internalformat],zl.type=F0[xl.type],zl.mag=h0[o0.magFilter],zl.min=z0[o0.minFilter],zl.wrapS=p0[o0.wrapS],zl.wrapT=p0[o0.wrapT],Yl=0;Yl<6;++Yl)Ep(Pl[Yl]);return zl}function Vl(Ol,Bl,Ml,Ll,El){Xs(!!Bl,"must specify image data"),Xs(typeof Ol=="number"&&Ol===(Ol|0)&&Ol>=0&&Ol<6,"invalid face");var Fl=Ml|0,Yl=Ll|0,o0=El|0,s0=Y0();return I0(s0,xl),s0.width=0,s0.height=0,S0(s0,Bl),s0.width=s0.width||(xl.width>>o0)-Fl,s0.height=s0.height||(xl.height>>o0)-Yl,Xs(xl.type===s0.type&&xl.format===s0.format&&xl.internalformat===s0.internalformat,"incompatible format for texture.subimage"),Xs(Fl>=0&&Yl>=0&&Fl+s0.width<=xl.width&&Yl+s0.height<=xl.height,"texture.subimage write out of bounds"),Xs(xl.mipmask&1<<o0,"missing mipmap data"),Xs(s0.data||s0.element||s0.needsCopy,"missing image data"),up(xl),cv(s0,Ey+Ol,Fl,Yl,o0),Dv(),Av(s0),zl}function Dl(Ol){var Bl=Ol|0;if(Bl!==xl.width){zl.width=xl.width=Bl,zl.height=xl.height=Bl,up(xl);for(var Ml=0;Ml<6;++Ml)for(var Ll=0;xl.mipmask>>Ll;++Ll)Ws.texImage2D(Ey+Ml,Ll,xl.format,Bl>>Ll,Bl>>Ll,0,xl.format,xl.type,null);return Dv(),e0.profile&&(xl.stats.size=x1(xl.internalformat,xl.type,zl.width,zl.height,!1,!0)),zl}}return zl(Cl,_f,Zl,H0,Iv,$l),zl.subimage=Vl,zl.resize=Dl,zl._reglType="textureCube",zl._texture=xl,e0.profile&&(zl.stats=xl.stats),zl.destroy=function(){xl.decRef()},zl}function gp(){for(var Cl=0;Cl<Np;++Cl)Ws.activeTexture(hm+Cl),Ws.bindTexture(U1,null),pp[Cl]=null;u1(kp).forEach(_d),Ql.cubeCount=0,Ql.textureCount=0}e0.profile&&(Ql.getTotalTextureSize=function(){var Cl=0;return Object.keys(kp).forEach(function(_f){Cl+=kp[_f].stats.size}),Cl});function q1(){for(var Cl=0;Cl<Np;++Cl){var _f=pp[Cl];_f&&(_f.bindCount=0,_f.unit=-1,pp[Cl]=null)}u1(kp).forEach(function(Zl){Zl.texture=Ws.createTexture(),Ws.bindTexture(Zl.target,Zl.texture);for(var H0=0;H0<32;++H0)if(Zl.mipmask&1<<H0)if(Zl.target===U1)Ws.texImage2D(U1,H0,Zl.internalformat,Zl.width>>H0,Zl.height>>H0,0,Zl.internalformat,Zl.type,null);else for(var Iv=0;Iv<6;++Iv)Ws.texImage2D(Ey+Iv,H0,Zl.internalformat,Zl.width>>H0,Zl.height>>H0,0,Zl.internalformat,Zl.type,null);Mp(Zl.texInfo,Zl.target)})}function l2(){for(var Cl=0;Cl<Np;++Cl){var _f=pp[Cl];_f&&(_f.bindCount=0,_f.unit=-1,pp[Cl]=null),Ws.activeTexture(hm+Cl),Ws.bindTexture(U1,null),Ws.bindTexture(S_,null)}}return{create2D:Ov,createCube:Gv,clear:gp,getTexture:function(Cl){return null},restore:q1,refresh:l2}}var Qp=36161,a2=32854,P1=32855,F2=36194,Ly=33189,aE=36168,oE=34041,Py=35907,Oy=34836,sE=34842,V_=34843,Jp=[];Jp[a2]=2,Jp[P1]=2,Jp[F2]=2,Jp[Ly]=2,Jp[aE]=1,Jp[oE]=4,Jp[Py]=4,Jp[Oy]=16,Jp[sE]=8,Jp[V_]=6;function uE(Ws,Qs,Al){return Jp[Ws]*Qs*Al}var lE=function(Ws,Qs,Al,Jl,u0){var Ql={rgba4:a2,rgb565:F2,"rgb5 a1":P1,depth:Ly,stencil:aE,"depth stencil":oE};Qs.ext_srgb&&(Ql.srgba=Py),Qs.ext_color_buffer_half_float&&(Ql.rgba16f=sE,Ql.rgb16f=V_),Qs.webgl_color_buffer_float&&(Ql.rgba32f=Oy);var e0=[];Object.keys(Ql).forEach(function(_0){var A0=Ql[_0];e0[A0]=_0});var m0=0,x0={};function C0(_0){this.id=m0++,this.refCount=1,this.renderbuffer=_0,this.format=a2,this.width=0,this.height=0,u0.profile&&(this.stats={size:0})}C0.prototype.decRef=function(){--this.refCount<=0&&E0(this)};function E0(_0){var A0=_0.renderbuffer;Xs(A0,"must not double destroy renderbuffer"),Ws.bindRenderbuffer(Qp,null),Ws.deleteRenderbuffer(A0),_0.renderbuffer=null,_0.refCount=0,delete x0[_0.id],Jl.renderbufferCount--}function T0(_0,A0){var Hl=new C0(Ws.createRenderbuffer());x0[Hl.id]=Hl,Jl.renderbufferCount++;function t0(F0,h0){var z0=0,p0=0,L0=a2;if(typeof F0=="object"&&F0){var v0=F0;if("shape"in v0){var I0=v0.shape;Xs(Array.isArray(I0)&&I0.length>=2,"invalid renderbuffer shape"),z0=I0[0]|0,p0=I0[1]|0}else"radius"in v0&&(z0=p0=v0.radius|0),"width"in v0&&(z0=v0.width|0),"height"in v0&&(p0=v0.height|0);"format"in v0&&(Xs.parameter(v0.format,Ql,"invalid renderbuffer format"),L0=Ql[v0.format])}else typeof F0=="number"?(z0=F0|0,typeof h0=="number"?p0=h0|0:p0=z0):F0?Xs.raise("invalid arguments to renderbuffer constructor"):z0=p0=1;if(Xs(z0>0&&p0>0&&z0<=Al.maxRenderbufferSize&&p0<=Al.maxRenderbufferSize,"invalid renderbuffer size"),!(z0===Hl.width&&p0===Hl.height&&L0===Hl.format))return t0.width=Hl.width=z0,t0.height=Hl.height=p0,Hl.format=L0,Ws.bindRenderbuffer(Qp,Hl.renderbuffer),Ws.renderbufferStorage(Qp,L0,z0,p0),Xs(Ws.getError()===0,"invalid render buffer format"),u0.profile&&(Hl.stats.size=uE(Hl.format,Hl.width,Hl.height)),t0.format=e0[Hl.format],t0}function $0(F0,h0){var z0=F0|0,p0=h0|0||z0;return z0===Hl.width&&p0===Hl.height||(Xs(z0>0&&p0>0&&z0<=Al.maxRenderbufferSize&&p0<=Al.maxRenderbufferSize,"invalid renderbuffer size"),t0.width=Hl.width=z0,t0.height=Hl.height=p0,Ws.bindRenderbuffer(Qp,Hl.renderbuffer),Ws.renderbufferStorage(Qp,Hl.format,z0,p0),Xs(Ws.getError()===0,"invalid render buffer format"),u0.profile&&(Hl.stats.size=uE(Hl.format,Hl.width,Hl.height))),t0}return t0(_0,A0),t0.resize=$0,t0._reglType="renderbuffer",t0._renderbuffer=Hl,u0.profile&&(t0.stats=Hl.stats),t0.destroy=function(){Hl.decRef()},t0}u0.profile&&(Jl.getTotalRenderbufferSize=function(){var _0=0;return Object.keys(x0).forEach(function(A0){_0+=x0[A0].stats.size}),_0});function O0(){u1(x0).forEach(function(_0){_0.renderbuffer=Ws.createRenderbuffer(),Ws.bindRenderbuffer(Qp,_0.renderbuffer),Ws.renderbufferStorage(Qp,_0.format,_0.width,_0.height)}),Ws.bindRenderbuffer(Qp,null)}return{create:T0,clear:function(){u1(x0).forEach(E0)},restore:O0}},E1=36160,G2=36161,_2=3553,Ny=34069,Dy=36064,fE=36096,Ry=36128,cE=33306,dE=36053,aw=36054,ow=36055,sw=36057,uw=36061,lw=36193,hE=5121,fw=5126,vE=6407,pE=6408,cw=6402,gE=[vE,pE],Y_=[];Y_[pE]=4,Y_[vE]=3;var By=[];By[hE]=1,By[fw]=4,By[lw]=2;var mE=32854,pm=32855,gm=36194,yE=33189,dw=36168,_E=34041,hw=35907,vw=34836,pw=34842,gw=34843,mw=[mE,pm,gm,hw,pw,gw,vw],mm={};mm[dE]="complete",mm[aw]="incomplete attachment",mm[sw]="incomplete dimensions",mm[ow]="incomplete, missing attachment",mm[uw]="unsupported";function yw(Ws,Qs,Al,Jl,u0,Ql){var e0={cur:null,next:null,dirty:!1,setFBO:null},m0=["rgba"],x0=["rgba4","rgb565","rgb5 a1"];Qs.ext_srgb&&x0.push("srgba"),Qs.ext_color_buffer_half_float&&x0.push("rgba16f","rgb16f"),Qs.webgl_color_buffer_float&&x0.push("rgba32f");var C0=["uint8"];Qs.oes_texture_half_float&&C0.push("half float","float16"),Qs.oes_texture_float&&C0.push("float","float32");function E0(N0,S0,c0){this.target=N0,this.texture=S0,this.renderbuffer=c0;var cv=0,mv=0;S0?(cv=S0.width,mv=S0.height):c0&&(cv=c0.width,mv=c0.height),this.width=cv,this.height=mv}function T0(N0){N0&&(N0.texture&&N0.texture._texture.decRef(),N0.renderbuffer&&N0.renderbuffer._renderbuffer.decRef())}function O0(N0,S0,c0){if(N0)if(N0.texture){var cv=N0.texture._texture,mv=Math.max(1,cv.width),Y0=Math.max(1,cv.height);Xs(mv===S0&&Y0===c0,"inconsistent width/height for supplied texture"),cv.refCount+=1}else{var Av=N0.renderbuffer._renderbuffer;Xs(Av.width===S0&&Av.height===c0,"inconsistent width/height for renderbuffer"),Av.refCount+=1}}function _0(N0,S0){S0&&(S0.texture?Ws.framebufferTexture2D(E1,N0,S0.target,S0.texture._texture.texture,0):Ws.framebufferRenderbuffer(E1,N0,G2,S0.renderbuffer._renderbuffer.renderbuffer))}function A0(N0){var S0=_2,c0=null,cv=null,mv=N0;typeof N0=="object"&&(mv=N0.data,"target"in N0&&(S0=N0.target|0)),Xs.type(mv,"function","invalid attachment data");var Y0=mv._reglType;return Y0==="texture2d"?(c0=mv,Xs(S0===_2)):Y0==="textureCube"?(c0=mv,Xs(S0>=Ny&&S0<Ny+6,"invalid cube map target")):Y0==="renderbuffer"?(cv=mv,S0=G2):Xs.raise("invalid regl object for attachment"),new E0(S0,c0,cv)}function Hl(N0,S0,c0,cv,mv){if(c0){var Y0=Jl.create2D({width:N0,height:S0,format:cv,type:mv});return Y0._texture.refCount=0,new E0(_2,Y0,null)}else{var Av=u0.create({width:N0,height:S0,format:cv});return Av._renderbuffer.refCount=0,new E0(G2,null,Av)}}function t0(N0){return N0&&(N0.texture||N0.renderbuffer)}function $0(N0,S0,c0){N0&&(N0.texture?N0.texture.resize(S0,c0):N0.renderbuffer&&N0.renderbuffer.resize(S0,c0),N0.width=S0,N0.height=c0)}var F0=0,h0={};function z0(){this.id=F0++,h0[this.id]=this,this.framebuffer=Ws.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function p0(N0){N0.colorAttachments.forEach(T0),T0(N0.depthAttachment),T0(N0.stencilAttachment),T0(N0.depthStencilAttachment)}function L0(N0){var S0=N0.framebuffer;Xs(S0,"must not double destroy framebuffer"),Ws.deleteFramebuffer(S0),N0.framebuffer=null,Ql.framebufferCount--,delete h0[N0.id]}function v0(N0){var S0;Ws.bindFramebuffer(E1,N0.framebuffer);var c0=N0.colorAttachments;for(S0=0;S0<c0.length;++S0)_0(Dy+S0,c0[S0]);for(S0=c0.length;S0<Al.maxColorAttachments;++S0)Ws.framebufferTexture2D(E1,Dy+S0,_2,null,0);Ws.framebufferTexture2D(E1,cE,_2,null,0),Ws.framebufferTexture2D(E1,fE,_2,null,0),Ws.framebufferTexture2D(E1,Ry,_2,null,0),_0(fE,N0.depthAttachment),_0(Ry,N0.stencilAttachment),_0(cE,N0.depthStencilAttachment);var cv=Ws.checkFramebufferStatus(E1);!Ws.isContextLost()&&cv!==dE&&Xs.raise("framebuffer configuration not supported, status = "+mm[cv]),Ws.bindFramebuffer(E1,e0.next?e0.next.framebuffer:null),e0.cur=e0.next,Ws.getError()}function I0(N0,S0){var c0=new z0;Ql.framebufferCount++;function cv(Y0,Av){var vv;Xs(e0.next!==c0,"can not update framebuffer which is currently in use");var bv=0,Uv=0,xp=!0,Ip=!0,Nv=null,Ep=!0,op="rgba",Sp="uint8",Mp=1,bp=null,kp=null,Np=null,pp=!1;if(typeof Y0=="number")bv=Y0|0,Uv=Av|0||bv;else if(!Y0)bv=Uv=1;else{Xs.type(Y0,"object","invalid arguments for framebuffer");var dv=Y0;if("shape"in dv){var up=dv.shape;Xs(Array.isArray(up)&&up.length>=2,"invalid shape for framebuffer"),bv=up[0],Uv=up[1]}else"radius"in dv&&(bv=Uv=dv.radius),"width"in dv&&(bv=dv.width),"height"in dv&&(Uv=dv.height);("color"in dv||"colors"in dv)&&(Nv=dv.color||dv.colors,Array.isArray(Nv)&&Xs(Nv.length===1||Qs.webgl_draw_buffers,"multiple render targets not supported")),Nv||("colorCount"in dv&&(Mp=dv.colorCount|0,Xs(Mp>0,"invalid color buffer count")),"colorTexture"in dv&&(Ep=!!dv.colorTexture,op="rgba4"),"colorType"in dv&&(Sp=dv.colorType,Ep?(Xs(Qs.oes_texture_float||!(Sp==="float"||Sp==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Xs(Qs.oes_texture_half_float||!(Sp==="half float"||Sp==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Sp==="half float"||Sp==="float16"?(Xs(Qs.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),op="rgba16f"):(Sp==="float"||Sp==="float32")&&(Xs(Qs.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),op="rgba32f"),Xs.oneOf(Sp,C0,"invalid color type")),"colorFormat"in dv&&(op=dv.colorFormat,m0.indexOf(op)>=0?Ep=!0:x0.indexOf(op)>=0?Ep=!1:Ep?Xs.oneOf(dv.colorFormat,m0,"invalid color format for texture"):Xs.oneOf(dv.colorFormat,x0,"invalid color format for renderbuffer"))),("depthTexture"in dv||"depthStencilTexture"in dv)&&(pp=!!(dv.depthTexture||dv.depthStencilTexture),Xs(!pp||Qs.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in dv&&(typeof dv.depth=="boolean"?xp=dv.depth:(bp=dv.depth,Ip=!1)),"stencil"in dv&&(typeof dv.stencil=="boolean"?Ip=dv.stencil:(kp=dv.stencil,xp=!1)),"depthStencil"in dv&&(typeof dv.depthStencil=="boolean"?xp=Ip=dv.depthStencil:(Np=dv.depthStencil,xp=!1,Ip=!1))}var Dv=null,_d=null,Ov=null,Gv=null;if(Array.isArray(Nv))Dv=Nv.map(A0);else if(Nv)Dv=[A0(Nv)];else for(Dv=new Array(Mp),vv=0;vv<Mp;++vv)Dv[vv]=Hl(bv,Uv,Ep,op,Sp);Xs(Qs.webgl_draw_buffers||Dv.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Xs(Dv.length<=Al.maxColorAttachments,"too many color attachments, not supported"),bv=bv||Dv[0].width,Uv=Uv||Dv[0].height,bp?_d=A0(bp):xp&&!Ip&&(_d=Hl(bv,Uv,pp,"depth","uint32")),kp?Ov=A0(kp):Ip&&!xp&&(Ov=Hl(bv,Uv,!1,"stencil","uint8")),Np?Gv=A0(Np):!bp&&!kp&&Ip&&xp&&(Gv=Hl(bv,Uv,pp,"depth stencil","depth stencil")),Xs(!!bp+!!kp+!!Np<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var gp=null;for(vv=0;vv<Dv.length;++vv)if(O0(Dv[vv],bv,Uv),Xs(!Dv[vv]||Dv[vv].texture&&gE.indexOf(Dv[vv].texture._texture.format)>=0||Dv[vv].renderbuffer&&mw.indexOf(Dv[vv].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+vv+" is invalid"),Dv[vv]&&Dv[vv].texture){var q1=Y_[Dv[vv].texture._texture.format]*By[Dv[vv].texture._texture.type];gp===null?gp=q1:Xs(gp===q1,"all color attachments much have the same number of bits per pixel.")}return O0(_d,bv,Uv),Xs(!_d||_d.texture&&_d.texture._texture.format===cw||_d.renderbuffer&&_d.renderbuffer._renderbuffer.format===yE,"invalid depth attachment for framebuffer object"),O0(Ov,bv,Uv),Xs(!Ov||Ov.renderbuffer&&Ov.renderbuffer._renderbuffer.format===dw,"invalid stencil attachment for framebuffer object"),O0(Gv,bv,Uv),Xs(!Gv||Gv.texture&&Gv.texture._texture.format===_E||Gv.renderbuffer&&Gv.renderbuffer._renderbuffer.format===_E,"invalid depth-stencil attachment for framebuffer object"),p0(c0),c0.width=bv,c0.height=Uv,c0.colorAttachments=Dv,c0.depthAttachment=_d,c0.stencilAttachment=Ov,c0.depthStencilAttachment=Gv,cv.color=Dv.map(t0),cv.depth=t0(_d),cv.stencil=t0(Ov),cv.depthStencil=t0(Gv),cv.width=c0.width,cv.height=c0.height,v0(c0),cv}function mv(Y0,Av){Xs(e0.next!==c0,"can not resize a framebuffer which is currently in use");var vv=Math.max(Y0|0,1),bv=Math.max(Av|0||vv,1);if(vv===c0.width&&bv===c0.height)return cv;for(var Uv=c0.colorAttachments,xp=0;xp<Uv.length;++xp)$0(Uv[xp],vv,bv);return $0(c0.depthAttachment,vv,bv),$0(c0.stencilAttachment,vv,bv),$0(c0.depthStencilAttachment,vv,bv),c0.width=cv.width=vv,c0.height=cv.height=bv,v0(c0),cv}return cv(N0,S0),as(cv,{resize:mv,_reglType:"framebuffer",_framebuffer:c0,destroy:function(){L0(c0),p0(c0)},use:function(Y0){e0.setFBO({framebuffer:cv},Y0)}})}function ev(N0){var S0=Array(6);function c0(mv){var Y0;Xs(S0.indexOf(e0.next)<0,"can not update framebuffer which is currently in use");var Av={color:null},vv=0,bv=null,Uv="rgba",xp="uint8",Ip=1;if(typeof mv=="number")vv=mv|0;else if(!mv)vv=1;else{Xs.type(mv,"object","invalid arguments for framebuffer");var Nv=mv;if("shape"in Nv){var Ep=Nv.shape;Xs(Array.isArray(Ep)&&Ep.length>=2,"invalid shape for framebuffer"),Xs(Ep[0]===Ep[1],"cube framebuffer must be square"),vv=Ep[0]}else"radius"in Nv&&(vv=Nv.radius|0),"width"in Nv?(vv=Nv.width|0,"height"in Nv&&Xs(Nv.height===vv,"must be square")):"height"in Nv&&(vv=Nv.height|0);("color"in Nv||"colors"in Nv)&&(bv=Nv.color||Nv.colors,Array.isArray(bv)&&Xs(bv.length===1||Qs.webgl_draw_buffers,"multiple render targets not supported")),bv||("colorCount"in Nv&&(Ip=Nv.colorCount|0,Xs(Ip>0,"invalid color buffer count")),"colorType"in Nv&&(Xs.oneOf(Nv.colorType,C0,"invalid color type"),xp=Nv.colorType),"colorFormat"in Nv&&(Uv=Nv.colorFormat,Xs.oneOf(Nv.colorFormat,m0,"invalid color format for texture"))),"depth"in Nv&&(Av.depth=Nv.depth),"stencil"in Nv&&(Av.stencil=Nv.stencil),"depthStencil"in Nv&&(Av.depthStencil=Nv.depthStencil)}var op;if(bv)if(Array.isArray(bv))for(op=[],Y0=0;Y0<bv.length;++Y0)op[Y0]=bv[Y0];else op=[bv];else{op=Array(Ip);var Sp={radius:vv,format:Uv,type:xp};for(Y0=0;Y0<Ip;++Y0)op[Y0]=Jl.createCube(Sp)}for(Av.color=Array(op.length),Y0=0;Y0<op.length;++Y0){var Mp=op[Y0];Xs(typeof Mp=="function"&&Mp._reglType==="textureCube","invalid cube map"),vv=vv||Mp.width,Xs(Mp.width===vv&&Mp.height===vv,"invalid cube map shape"),Av.color[Y0]={target:Ny,data:op[Y0]}}for(Y0=0;Y0<6;++Y0){for(var bp=0;bp<op.length;++bp)Av.color[bp].target=Ny+Y0;Y0>0&&(Av.depth=S0[0].depth,Av.stencil=S0[0].stencil,Av.depthStencil=S0[0].depthStencil),S0[Y0]?S0[Y0](Av):S0[Y0]=I0(Av)}return as(c0,{width:vv,height:vv,color:op})}function cv(mv){var Y0,Av=mv|0;if(Xs(Av>0&&Av<=Al.maxCubeMapSize,"invalid radius for cube fbo"),Av===c0.width)return c0;var vv=c0.color;for(Y0=0;Y0<vv.length;++Y0)vv[Y0].resize(Av);for(Y0=0;Y0<6;++Y0)S0[Y0].resize(Av);return c0.width=c0.height=Av,c0}return c0(N0),as(c0,{faces:S0,resize:cv,_reglType:"framebufferCube",destroy:function(){S0.forEach(function(mv){mv.destroy()})}})}function hv(){e0.cur=null,e0.next=null,e0.dirty=!0,u1(h0).forEach(function(N0){N0.framebuffer=Ws.createFramebuffer(),v0(N0)})}return as(e0,{getFramebuffer:function(N0){if(typeof N0=="function"&&N0._reglType==="framebuffer"){var S0=N0._framebuffer;if(S0 instanceof z0)return S0}return null},create:I0,createCube:ev,clear:function(){u1(h0).forEach(L0)},restore:hv})}var _w=5126,xE=34962;function X_(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=_w,this.offset=0,this.stride=0,this.divisor=0}function xw(Ws,Qs,Al,Jl,u0){for(var Ql=Al.maxAttributes,e0=new Array(Ql),m0=0;m0<Ql;++m0)e0[m0]=new X_;var x0=0,C0={},E0={Record:X_,scope:{},state:e0,currentVAO:null,targetVAO:null,restore:O0()?h0:function(){},createVAO:z0,getVAO:A0,destroyBuffer:T0,setVAO:O0()?Hl:t0,clear:O0()?$0:function(){}};function T0(p0){for(var L0=0;L0<e0.length;++L0){var v0=e0[L0];v0.buffer===p0&&(Ws.disableVertexAttribArray(L0),v0.buffer=null)}}function O0(){return Qs.oes_vertex_array_object}function _0(){return Qs.angle_instanced_arrays}function A0(p0){return typeof p0=="function"&&p0._vao?p0._vao:null}function Hl(p0){if(p0!==E0.currentVAO){var L0=O0();p0?L0.bindVertexArrayOES(p0.vao):L0.bindVertexArrayOES(null),E0.currentVAO=p0}}function t0(p0){if(p0!==E0.currentVAO){if(p0)p0.bindAttrs();else for(var L0=_0(),v0=0;v0<e0.length;++v0){var I0=e0[v0];I0.buffer?(Ws.enableVertexAttribArray(v0),Ws.vertexAttribPointer(v0,I0.size,I0.type,I0.normalized,I0.stride,I0.offfset),L0&&I0.divisor&&L0.vertexAttribDivisorANGLE(v0,I0.divisor)):(Ws.disableVertexAttribArray(v0),Ws.vertexAttrib4f(v0,I0.x,I0.y,I0.z,I0.w))}E0.currentVAO=p0}}function $0(){u1(C0).forEach(function(p0){p0.destroy()})}function F0(){this.id=++x0,this.attributes=[];var p0=O0();p0?this.vao=p0.createVertexArrayOES():this.vao=null,C0[this.id]=this,this.buffers=[]}F0.prototype.bindAttrs=function(){for(var p0=_0(),L0=this.attributes,v0=0;v0<L0.length;++v0){var I0=L0[v0];I0.buffer?(Ws.enableVertexAttribArray(v0),Ws.bindBuffer(xE,I0.buffer.buffer),Ws.vertexAttribPointer(v0,I0.size,I0.type,I0.normalized,I0.stride,I0.offset),p0&&I0.divisor&&p0.vertexAttribDivisorANGLE(v0,I0.divisor)):(Ws.disableVertexAttribArray(v0),Ws.vertexAttrib4f(v0,I0.x,I0.y,I0.z,I0.w))}for(var ev=L0.length;ev<Ql;++ev)Ws.disableVertexAttribArray(ev)},F0.prototype.refresh=function(){var p0=O0();p0&&(p0.bindVertexArrayOES(this.vao),this.bindAttrs(),E0.currentVAO=this)},F0.prototype.destroy=function(){if(this.vao){var p0=O0();this===E0.currentVAO&&(E0.currentVAO=null,p0.bindVertexArrayOES(null)),p0.deleteVertexArrayOES(this.vao),this.vao=null}C0[this.id]&&(delete C0[this.id],Jl.vaoCount-=1)};function h0(){var p0=O0();p0&&u1(C0).forEach(function(L0){L0.refresh()})}function z0(p0){var L0=new F0;Jl.vaoCount+=1;function v0(I0){Xs(Array.isArray(I0),"arguments to vertex array constructor must be an array"),Xs(I0.length<Ql,"too many attributes"),Xs(I0.length>0,"must specify at least one attribute");var ev={},hv=L0.attributes;hv.length=I0.length;for(var N0=0;N0<I0.length;++N0){var S0=I0[N0],c0=hv[N0]=new X_,cv=S0.data||S0;if(Array.isArray(cv)||rs(cv)||g1(cv)){var mv;L0.buffers[N0]&&(mv=L0.buffers[N0],rs(cv)&&mv._buffer.byteLength>=cv.byteLength?mv.subdata(cv):(mv.destroy(),L0.buffers[N0]=null)),L0.buffers[N0]||(mv=L0.buffers[N0]=u0.create(S0,xE,!1,!0)),c0.buffer=u0.getBuffer(mv),c0.size=c0.buffer.dimension|0,c0.normalized=!1,c0.type=c0.buffer.dtype,c0.offset=0,c0.stride=0,c0.divisor=0,c0.state=1,ev[N0]=1}else u0.getBuffer(S0)?(c0.buffer=u0.getBuffer(S0),c0.size=c0.buffer.dimension|0,c0.normalized=!1,c0.type=c0.buffer.dtype,c0.offset=0,c0.stride=0,c0.divisor=0,c0.state=1):u0.getBuffer(S0.buffer)?(c0.buffer=u0.getBuffer(S0.buffer),c0.size=(+S0.size||c0.buffer.dimension)|0,c0.normalized=!!S0.normalized||!1,"type"in S0?(Xs.parameter(S0.type,Mv,"invalid buffer type"),c0.type=Mv[S0.type]):c0.type=c0.buffer.dtype,c0.offset=(S0.offset||0)|0,c0.stride=(S0.stride||0)|0,c0.divisor=(S0.divisor||0)|0,c0.state=1,Xs(c0.size>=1&&c0.size<=4,"size must be between 1 and 4"),Xs(c0.offset>=0,"invalid offset"),Xs(c0.stride>=0&&c0.stride<=255,"stride must be between 0 and 255"),Xs(c0.divisor>=0,"divisor must be positive"),Xs(!c0.divisor||!!Qs.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in S0?(Xs(N0>0,"first attribute must not be a constant"),c0.x=+S0.x||0,c0.y=+S0.y||0,c0.z=+S0.z||0,c0.w=+S0.w||0,c0.state=2):Xs(!1,"invalid attribute spec for location "+N0)}for(var Y0=0;Y0<L0.buffers.length;++Y0)!ev[Y0]&&L0.buffers[Y0]&&(L0.buffers[Y0].destroy(),L0.buffers[Y0]=null);return L0.refresh(),v0}return v0.destroy=function(){for(var I0=0;I0<L0.buffers.length;++I0)L0.buffers[I0]&&L0.buffers[I0].destroy();L0.buffers.length=0,L0.destroy()},v0._vao=L0,v0._reglType="vao",v0(p0)}return E0}var EE=35632,Ew=35633,Sw=35718,ww=35721;function $w(Ws,Qs,Al,Jl){var u0={},Ql={};function e0(Hl,t0,$0,F0){this.name=Hl,this.id=t0,this.location=$0,this.info=F0}function m0(Hl,t0){for(var $0=0;$0<Hl.length;++$0)if(Hl[$0].id===t0.id){Hl[$0].location=t0.location;return}Hl.push(t0)}function x0(Hl,t0,$0){var F0=Hl===EE?u0:Ql,h0=F0[t0];if(!h0){var z0=Qs.str(t0);h0=Ws.createShader(Hl),Ws.shaderSource(h0,z0),Ws.compileShader(h0),Xs.shaderError(Ws,h0,z0,Hl,$0),F0[t0]=h0}return h0}var C0={},E0=[],T0=0;function O0(Hl,t0){this.id=T0++,this.fragId=Hl,this.vertId=t0,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Jl.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function _0(Hl,t0,$0){var F0,h0,z0=x0(EE,Hl.fragId),p0=x0(Ew,Hl.vertId),L0=Hl.program=Ws.createProgram();if(Ws.attachShader(L0,z0),Ws.attachShader(L0,p0),$0)for(F0=0;F0<$0.length;++F0){var v0=$0[F0];Ws.bindAttribLocation(L0,v0[0],v0[1])}Ws.linkProgram(L0),Xs.linkError(Ws,L0,Qs.str(Hl.fragId),Qs.str(Hl.vertId),t0);var I0=Ws.getProgramParameter(L0,Sw);Jl.profile&&(Hl.stats.uniformsCount=I0);var ev=Hl.uniforms;for(F0=0;F0<I0;++F0)if(h0=Ws.getActiveUniform(L0,F0),h0)if(h0.size>1)for(var hv=0;hv<h0.size;++hv){var N0=h0.name.replace("[0]","["+hv+"]");m0(ev,new e0(N0,Qs.id(N0),Ws.getUniformLocation(L0,N0),h0))}else m0(ev,new e0(h0.name,Qs.id(h0.name),Ws.getUniformLocation(L0,h0.name),h0));var S0=Ws.getProgramParameter(L0,ww);Jl.profile&&(Hl.stats.attributesCount=S0);var c0=Hl.attributes;for(F0=0;F0<S0;++F0)h0=Ws.getActiveAttrib(L0,F0),h0&&m0(c0,new e0(h0.name,Qs.id(h0.name),Ws.getAttribLocation(L0,h0.name),h0))}Jl.profile&&(Al.getMaxUniformsCount=function(){var Hl=0;return E0.forEach(function(t0){t0.stats.uniformsCount>Hl&&(Hl=t0.stats.uniformsCount)}),Hl},Al.getMaxAttributesCount=function(){var Hl=0;return E0.forEach(function(t0){t0.stats.attributesCount>Hl&&(Hl=t0.stats.attributesCount)}),Hl});function A0(){u0={},Ql={};for(var Hl=0;Hl<E0.length;++Hl)_0(E0[Hl],null,E0[Hl].attributes.map(function(t0){return[t0.location,t0.name]}))}return{clear:function(){var Hl=Ws.deleteShader.bind(Ws);u1(u0).forEach(Hl),u0={},u1(Ql).forEach(Hl),Ql={},E0.forEach(function(t0){Ws.deleteProgram(t0.program)}),E0.length=0,C0={},Al.shaderCount=0},program:function(Hl,t0,$0,F0){Xs.command(Hl>=0,"missing vertex shader",$0),Xs.command(t0>=0,"missing fragment shader",$0);var h0=C0[t0];h0||(h0=C0[t0]={});var z0=h0[Hl];if(z0&&(z0.refCount++,!F0))return z0;var p0=new O0(t0,Hl);return Al.shaderCount++,_0(p0,$0,F0),z0||(h0[Hl]=p0),E0.push(p0),as(p0,{destroy:function(){if(p0.refCount--,p0.refCount<=0){Ws.deleteProgram(p0.program);var L0=E0.indexOf(p0);E0.splice(L0,1),Al.shaderCount--}h0[p0.vertId].refCount<=0&&(Ws.deleteShader(Ql[p0.vertId]),delete Ql[p0.vertId],delete C0[p0.fragId][p0.vertId]),Object.keys(C0[p0.fragId]).length||(Ws.deleteShader(u0[p0.fragId]),delete u0[p0.fragId],delete C0[p0.fragId])}})},restore:A0,shader:x0,frag:-1,vert:-1}}var Mw=6408,Vm=5121,bw=3333,Fy=5126;function Cw(Ws,Qs,Al,Jl,u0,Ql,e0){function m0(E0){var T0;Qs.next===null?(Xs(u0.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),T0=Vm):(Xs(Qs.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),T0=Qs.next.colorAttachments[0].texture._texture.type,Ql.oes_texture_float?(Xs(T0===Vm||T0===Fy,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),T0===Fy&&Xs(e0.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Xs(T0===Vm,"Reading from a framebuffer is only allowed for the type 'uint8'"));var O0=0,_0=0,A0=Jl.framebufferWidth,Hl=Jl.framebufferHeight,t0=null;rs(E0)?t0=E0:E0&&(Xs.type(E0,"object","invalid arguments to regl.read()"),O0=E0.x|0,_0=E0.y|0,Xs(O0>=0&&O0<Jl.framebufferWidth,"invalid x offset for regl.read"),Xs(_0>=0&&_0<Jl.framebufferHeight,"invalid y offset for regl.read"),A0=(E0.width||Jl.framebufferWidth-O0)|0,Hl=(E0.height||Jl.framebufferHeight-_0)|0,t0=E0.data||null),t0&&(T0===Vm?Xs(t0 instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):T0===Fy&&Xs(t0 instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Xs(A0>0&&A0+O0<=Jl.framebufferWidth,"invalid width for read pixels"),Xs(Hl>0&&Hl+_0<=Jl.framebufferHeight,"invalid height for read pixels"),Al();var $0=A0*Hl*4;return t0||(T0===Vm?t0=new Uint8Array($0):T0===Fy&&(t0=t0||new Float32Array($0))),Xs.isTypedArray(t0,"data buffer for regl.read() must be a typedarray"),Xs(t0.byteLength>=$0,"data buffer for regl.read() too small"),Ws.pixelStorei(bw,4),Ws.readPixels(O0,_0,A0,Hl,Mw,T0,t0),t0}function x0(E0){var T0;return Qs.setFBO({framebuffer:E0.framebuffer},function(){T0=m0(E0)}),T0}function C0(E0){return!E0||!("framebuffer"in E0)?m0(E0):x0(E0)}return C0}function ym(Ws){return Array.prototype.slice.call(Ws)}function _m(Ws){return ym(Ws).join("")}function Tw(){var Ws=0,Qs=[],Al=[];function Jl(T0){for(var O0=0;O0<Al.length;++O0)if(Al[O0]===T0)return Qs[O0];var _0="g"+Ws++;return Qs.push(_0),Al.push(T0),_0}function u0(){var T0=[];function O0(){T0.push.apply(T0,ym(arguments))}var _0=[];function A0(){var Hl="v"+Ws++;return _0.push(Hl),arguments.length>0&&(T0.push(Hl,"="),T0.push.apply(T0,ym(arguments)),T0.push(";")),Hl}return as(O0,{def:A0,toString:function(){return _m([_0.length>0?"var "+_0.join(",")+";":"",_m(T0)])}})}function Ql(){var T0=u0(),O0=u0(),_0=T0.toString,A0=O0.toString;function Hl(t0,$0){O0(t0,$0,"=",T0.def(t0,$0),";")}return as(function(){T0.apply(T0,ym(arguments))},{def:T0.def,entry:T0,exit:O0,save:Hl,set:function(t0,$0,F0){Hl(t0,$0),T0(t0,$0,"=",F0,";")},toString:function(){return _0()+A0()}})}function e0(){var T0=_m(arguments),O0=Ql(),_0=Ql(),A0=O0.toString,Hl=_0.toString;return as(O0,{then:function(){return O0.apply(O0,ym(arguments)),this},else:function(){return _0.apply(_0,ym(arguments)),this},toString:function(){var t0=Hl();return t0&&(t0="else{"+t0+"}"),_m(["if(",T0,"){",A0(),"}",t0])}})}var m0=u0(),x0={};function C0(T0,O0){var _0=[];function A0(){var h0="a"+_0.length;return _0.push(h0),h0}O0=O0||0;for(var Hl=0;Hl<O0;++Hl)A0();var t0=Ql(),$0=t0.toString,F0=x0[T0]=as(t0,{arg:A0,toString:function(){return _m(["function(",_0.join(),"){",$0(),"}"])}});return F0}function E0(){var T0=['"use strict";',m0,"return {"];Object.keys(x0).forEach(function(A0){T0.push('"',A0,'":',x0[A0].toString(),",")}),T0.push("}");var O0=_m(T0).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),_0=Function.apply(null,Qs.concat(O0));return _0.apply(null,Al)}return{global:m0,link:Jl,block:u0,proc:C0,scope:Ql,cond:e0,compile:E0}}var xm="xyzw".split(""),SE=5121,Em=1,q_=2,K_=0,Z_=1,Q_=2,J_=3,Gy=4,wE=5,$E=6,ME="dither",bE="blend.enable",CE="blend.color",ex="blend.equation",S1="blend.func",jy="depth.enable",TE="depth.func",AE="depth.range",IE="depth.mask",tx="colorMask",kE="cull.enable",LE="cull.face",rx="frontFace",nx="lineWidth",PE="polygonOffset.enable",ix="polygonOffset.offset",OE="sample.alpha",NE="sample.enable",ax="sample.coverage",DE="stencil.enable",RE="stencil.mask",ox="stencil.func",sx="stencil.opFront",Ym="stencil.opBack",BE="scissor.enable",zy="scissor.box",o2="viewport",Xm="profile",j2="framebuffer",qm="vert",Km="frag",z2="elements",U2="primitive",x2="count",Uy="offset",Hy="instances",Zm="vao",Fp="Width",ux="Height",Sm=j2+Fp,Rp=j2+ux,s2=o2+Fp,lx=o2+ux,FE="drawingBuffer",GE=FE+Fp,jE=FE+ux,Aw=[S1,ex,ox,sx,Ym,ax,o2,zy,ix],H2=34962,zE=34963,fx=35632,Iw=35633,UE=3553,w1=34067,kw=2884,Lw=3042,Pw=3024,Ow=2960,Nw=2929,Dw=3089,Rw=32823,Bw=32926,Fw=32928,cx=5126,Wy=35664,Vy=35665,Yy=35666,dx=5124,Xy=35667,qy=35668,Ky=35669,hx=35670,Zy=35671,Qy=35672,Jy=35673,Qm=35674,Jm=35675,ey=35676,ty=35678,ry=35680,HE=4,ny=1028,O1=1029,WE=2304,$1=2305,W2=32775,Op=32776,u2=519,W1=7680,E2=0,V1=1,iy=32774,Gw=513,VE=36160,jw=36064,Y1={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},YE=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],wm={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},S2={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},XE={frag:fx,vert:Iw},vx={cw:WE,ccw:$1};function e_(Ws){return Array.isArray(Ws)||rs(Ws)||g1(Ws)}function Zv(Ws){return Ws.sort(function(Qs,Al){return Qs===o2?-1:Al===o2?1:Qs<Al?-1:1})}function Hp(Ws,Qs,Al,Jl){this.thisDep=Ws,this.contextDep=Qs,this.propDep=Al,this.append=Jl}function X1(Ws){return Ws&&!(Ws.thisDep||Ws.contextDep||Ws.propDep)}function _p(Ws){return new Hp(!1,!1,!1,Ws)}function e1(Ws,Qs){var Al=Ws.type;if(Al===K_){var Jl=Ws.data.length;return new Hp(!0,Jl>=1,Jl>=2,Qs)}else if(Al===Gy){var u0=Ws.data;return new Hp(u0.thisDep,u0.contextDep,u0.propDep,Qs)}else{if(Al===wE)return new Hp(!1,!1,!1,Qs);if(Al===$E){for(var Ql=!1,e0=!1,m0=!1,x0=0;x0<Ws.data.length;++x0){var C0=Ws.data[x0];if(C0.type===Z_)m0=!0;else if(C0.type===Q_)e0=!0;else if(C0.type===J_)Ql=!0;else if(C0.type===K_){Ql=!0;var E0=C0.data;E0>=1&&(e0=!0),E0>=2&&(m0=!0)}else C0.type===Gy&&(Ql=Ql||C0.data.thisDep,e0=e0||C0.data.contextDep,m0=m0||C0.data.propDep)}return new Hp(Ql,e0,m0,Qs)}else return new Hp(Al===J_,Al===Q_,Al===Z_,Qs)}}var Qv=new Hp(!1,!1,!1,function(){});function zw(Ws,Qs,Al,Jl,u0,Ql,e0,m0,x0,C0,E0,T0,O0,_0,A0){var Hl=C0.Record,t0={add:32774,subtract:32778,"reverse subtract":32779};Al.ext_blend_minmax&&(t0.min=W2,t0.max=Op);var $0=Al.angle_instanced_arrays,F0=Al.webgl_draw_buffers,h0={dirty:!0,profile:A0.profile},z0={},p0=[],L0={},v0={};function I0($l){return $l.replace(".","_")}function ev($l,xl,Pl){var zl=I0($l);p0.push($l),z0[zl]=h0[zl]=!!Pl,L0[zl]=xl}function hv($l,xl,Pl){var zl=I0($l);p0.push($l),Array.isArray(Pl)?(h0[zl]=Pl.slice(),z0[zl]=Pl.slice()):h0[zl]=z0[zl]=Pl,v0[zl]=xl}ev(ME,Pw),ev(bE,Lw),hv(CE,"blendColor",[0,0,0,0]),hv(ex,"blendEquationSeparate",[iy,iy]),hv(S1,"blendFuncSeparate",[V1,E2,V1,E2]),ev(jy,Nw,!0),hv(TE,"depthFunc",Gw),hv(AE,"depthRange",[0,1]),hv(IE,"depthMask",!0),hv(tx,tx,[!0,!0,!0,!0]),ev(kE,kw),hv(LE,"cullFace",O1),hv(rx,rx,$1),hv(nx,nx,1),ev(PE,Rw),hv(ix,"polygonOffset",[0,0]),ev(OE,Bw),ev(NE,Fw),hv(ax,"sampleCoverage",[1,!1]),ev(DE,Ow),hv(RE,"stencilMask",-1),hv(ox,"stencilFunc",[u2,0,-1]),hv(sx,"stencilOpSeparate",[ny,W1,W1,W1]),hv(Ym,"stencilOpSeparate",[O1,W1,W1,W1]),ev(BE,Dw),hv(zy,"scissor",[0,0,Ws.drawingBufferWidth,Ws.drawingBufferHeight]),hv(o2,o2,[0,0,Ws.drawingBufferWidth,Ws.drawingBufferHeight]);var N0={gl:Ws,context:O0,strings:Qs,next:z0,current:h0,draw:T0,elements:Ql,buffer:u0,shader:E0,attributes:C0.state,vao:C0,uniforms:x0,framebuffer:m0,extensions:Al,timer:_0,isBufferArgs:e_},S0={primTypes:um,compareFuncs:wm,blendFuncs:Y1,blendEquations:t0,stencilOps:S2,glTypes:Mv,orientationType:vx};Xs.optional(function(){N0.isArrayLike=vp}),F0&&(S0.backBuffer=[O1],S0.drawBuffer=Cp(Jl.maxDrawbuffers,function($l){return $l===0?[0]:Cp($l,function(xl){return jw+xl})}));var c0=0;function cv(){var $l=Tw(),xl=$l.link,Pl=$l.global;$l.id=c0++,$l.batchId="0";var zl=xl(N0),Vl=$l.shared={props:"a0"};Object.keys(N0).forEach(function(Ll){Vl[Ll]=Pl.def(zl,".",Ll)}),Xs.optional(function(){$l.CHECK=xl(Xs),$l.commandStr=Xs.guessCommand(),$l.command=xl($l.commandStr),$l.assert=function(Ll,El,Fl){Ll("if(!(",El,"))",this.CHECK,".commandRaise(",xl(Fl),",",this.command,");")},S0.invalidBlendCombinations=YE});var Dl=$l.next={},Ol=$l.current={};Object.keys(v0).forEach(function(Ll){Array.isArray(h0[Ll])&&(Dl[Ll]=Pl.def(Vl.next,".",Ll),Ol[Ll]=Pl.def(Vl.current,".",Ll))});var Bl=$l.constants={};Object.keys(S0).forEach(function(Ll){Bl[Ll]=Pl.def(JSON.stringify(S0[Ll]))}),$l.invoke=function(Ll,El){switch(El.type){case K_:var Fl=["this",Vl.context,Vl.props,$l.batchId];return Ll.def(xl(El.data),".call(",Fl.slice(0,Math.max(El.data.length+1,4)),")");case Z_:return Ll.def(Vl.props,El.data);case Q_:return Ll.def(Vl.context,El.data);case J_:return Ll.def("this",El.data);case Gy:return El.data.append($l,Ll),El.data.ref;case wE:return El.data.toString();case $E:return El.data.map(function(Yl){return $l.invoke(Ll,Yl)})}},$l.attribCache={};var Ml={};return $l.scopeAttrib=function(Ll){var El=Qs.id(Ll);if(El in Ml)return Ml[El];var Fl=C0.scope[El];Fl||(Fl=C0.scope[El]=new Hl);var Yl=Ml[El]=xl(Fl);return Yl},$l}function mv($l){var xl=$l.static,Pl=$l.dynamic,zl;if(Xm in xl){var Vl=!!xl[Xm];zl=_p(function(Ol,Bl){return Vl}),zl.enable=Vl}else if(Xm in Pl){var Dl=Pl[Xm];zl=e1(Dl,function(Ol,Bl){return Ol.invoke(Bl,Dl)})}return zl}function Y0($l,xl){var Pl=$l.static,zl=$l.dynamic;if(j2 in Pl){var Vl=Pl[j2];return Vl?(Vl=m0.getFramebuffer(Vl),Xs.command(Vl,"invalid framebuffer object"),_p(function(Ol,Bl){var Ml=Ol.link(Vl),Ll=Ol.shared;Bl.set(Ll.framebuffer,".next",Ml);var El=Ll.context;return Bl.set(El,"."+Sm,Ml+".width"),Bl.set(El,"."+Rp,Ml+".height"),Ml})):_p(function(Ol,Bl){var Ml=Ol.shared;Bl.set(Ml.framebuffer,".next","null");var Ll=Ml.context;return Bl.set(Ll,"."+Sm,Ll+"."+GE),Bl.set(Ll,"."+Rp,Ll+"."+jE),"null"})}else if(j2 in zl){var Dl=zl[j2];return e1(Dl,function(Ol,Bl){var Ml=Ol.invoke(Bl,Dl),Ll=Ol.shared,El=Ll.framebuffer,Fl=Bl.def(El,".getFramebuffer(",Ml,")");Xs.optional(function(){Ol.assert(Bl,"!"+Ml+"||"+Fl,"invalid framebuffer object")}),Bl.set(El,".next",Fl);var Yl=Ll.context;return Bl.set(Yl,"."+Sm,Fl+"?"+Fl+".width:"+Yl+"."+GE),Bl.set(Yl,"."+Rp,Fl+"?"+Fl+".height:"+Yl+"."+jE),Fl})}else return null}function Av($l,xl,Pl){var zl=$l.static,Vl=$l.dynamic;function Dl(Ml){if(Ml in zl){var Ll=zl[Ml];Xs.commandType(Ll,"object","invalid "+Ml,Pl.commandStr);var El=!0,Fl=Ll.x|0,Yl=Ll.y|0,o0,s0;return"width"in Ll?(o0=Ll.width|0,Xs.command(o0>=0,"invalid "+Ml,Pl.commandStr)):El=!1,"height"in Ll?(s0=Ll.height|0,Xs.command(s0>=0,"invalid "+Ml,Pl.commandStr)):El=!1,new Hp(!El&&xl&&xl.thisDep,!El&&xl&&xl.contextDep,!El&&xl&&xl.propDep,function(J0,_v){var X0=J0.shared.context,iv=o0;"width"in Ll||(iv=_v.def(X0,".",Sm,"-",Fl));var gv=s0;return"height"in Ll||(gv=_v.def(X0,".",Rp,"-",Yl)),[Fl,Yl,iv,gv]})}else if(Ml in Vl){var n0=Vl[Ml],w0=e1(n0,function(J0,_v){var X0=J0.invoke(_v,n0);Xs.optional(function(){J0.assert(_v,X0+"&&typeof "+X0+'==="object"',"invalid "+Ml)});var iv=J0.shared.context,gv=_v.def(X0,".x|0"),Hv=_v.def(X0,".y|0"),cp=_v.def('"width" in ',X0,"?",X0,".width|0:","(",iv,".",Sm,"-",gv,")"),Wp=_v.def('"height" in ',X0,"?",X0,".height|0:","(",iv,".",Rp,"-",Hv,")");return Xs.optional(function(){J0.assert(_v,cp+">=0&&"+Wp+">=0","invalid "+Ml)}),[gv,Hv,cp,Wp]});return xl&&(w0.thisDep=w0.thisDep||xl.thisDep,w0.contextDep=w0.contextDep||xl.contextDep,w0.propDep=w0.propDep||xl.propDep),w0}else return xl?new Hp(xl.thisDep,xl.contextDep,xl.propDep,function(J0,_v){var X0=J0.shared.context;return[0,0,_v.def(X0,".",Sm),_v.def(X0,".",Rp)]}):null}var Ol=Dl(o2);if(Ol){var Bl=Ol;Ol=new Hp(Ol.thisDep,Ol.contextDep,Ol.propDep,function(Ml,Ll){var El=Bl.append(Ml,Ll),Fl=Ml.shared.context;return Ll.set(Fl,"."+s2,El[2]),Ll.set(Fl,"."+lx,El[3]),El})}return{viewport:Ol,scissor_box:Dl(zy)}}function vv($l,xl){var Pl=$l.static,zl=typeof Pl[Km]=="string"&&typeof Pl[qm]=="string";if(zl){if(Object.keys(xl.dynamic).length>0)return null;var Vl=xl.static,Dl=Object.keys(Vl);if(Dl.length>0&&typeof Vl[Dl[0]]=="number"){for(var Ol=[],Bl=0;Bl<Dl.length;++Bl)Xs(typeof Vl[Dl[Bl]]=="number","must specify all vertex attribute locations when using vaos"),Ol.push([Vl[Dl[Bl]]|0,Dl[Bl]]);return Ol}}return null}function bv($l,xl,Pl){var zl=$l.static,Vl=$l.dynamic;function Dl(El){if(El in zl){var Fl=Qs.id(zl[El]);Xs.optional(function(){E0.shader(XE[El],Fl,Xs.guessCommand())});var Yl=_p(function(){return Fl});return Yl.id=Fl,Yl}else if(El in Vl){var o0=Vl[El];return e1(o0,function(s0,n0){var w0=s0.invoke(n0,o0),J0=n0.def(s0.shared.strings,".id(",w0,")");return Xs.optional(function(){n0(s0.shared.shader,".shader(",XE[El],",",J0,",",s0.command,");")}),J0})}return null}var Ol=Dl(Km),Bl=Dl(qm),Ml=null,Ll;return X1(Ol)&&X1(Bl)?(Ml=E0.program(Bl.id,Ol.id,null,Pl),Ll=_p(function(El,Fl){return El.link(Ml)})):Ll=new Hp(Ol&&Ol.thisDep||Bl&&Bl.thisDep,Ol&&Ol.contextDep||Bl&&Bl.contextDep,Ol&&Ol.propDep||Bl&&Bl.propDep,function(El,Fl){var Yl=El.shared.shader,o0;Ol?o0=Ol.append(El,Fl):o0=Fl.def(Yl,".",Km);var s0;Bl?s0=Bl.append(El,Fl):s0=Fl.def(Yl,".",qm);var n0=Yl+".program("+s0+","+o0;return Xs.optional(function(){n0+=","+El.command}),Fl.def(n0+")")}),{frag:Ol,vert:Bl,progVar:Ll,program:Ml}}function Uv($l,xl){var Pl=$l.static,zl=$l.dynamic;function Vl(){if(z2 in Pl){var El=Pl[z2];e_(El)?El=Ql.getElements(Ql.create(El,!0)):El&&(El=Ql.getElements(El),Xs.command(El,"invalid elements",xl.commandStr));var Fl=_p(function(o0,s0){if(El){var n0=o0.link(El);return o0.ELEMENTS=n0,n0}return o0.ELEMENTS=null,null});return Fl.value=El,Fl}else if(z2 in zl){var Yl=zl[z2];return e1(Yl,function(o0,s0){var n0=o0.shared,w0=n0.isBufferArgs,J0=n0.elements,_v=o0.invoke(s0,Yl),X0=s0.def("null"),iv=s0.def(w0,"(",_v,")"),gv=o0.cond(iv).then(X0,"=",J0,".createStream(",_v,");").else(X0,"=",J0,".getElements(",_v,");");return Xs.optional(function(){o0.assert(gv.else,"!"+_v+"||"+X0,"invalid elements")}),s0.entry(gv),s0.exit(o0.cond(iv).then(J0,".destroyStream(",X0,");")),o0.ELEMENTS=X0,X0})}return null}var Dl=Vl();function Ol(){if(U2 in Pl){var El=Pl[U2];return Xs.commandParameter(El,um,"invalid primitve",xl.commandStr),_p(function(Yl,o0){return um[El]})}else if(U2 in zl){var Fl=zl[U2];return e1(Fl,function(Yl,o0){var s0=Yl.constants.primTypes,n0=Yl.invoke(o0,Fl);return Xs.optional(function(){Yl.assert(o0,n0+" in "+s0,"invalid primitive, must be one of "+Object.keys(um))}),o0.def(s0,"[",n0,"]")})}else if(Dl)return X1(Dl)?Dl.value?_p(function(Yl,o0){return o0.def(Yl.ELEMENTS,".primType")}):_p(function(){return HE}):new Hp(Dl.thisDep,Dl.contextDep,Dl.propDep,function(Yl,o0){var s0=Yl.ELEMENTS;return o0.def(s0,"?",s0,".primType:",HE)});return null}function Bl(El,Fl){if(El in Pl){var Yl=Pl[El]|0;return Xs.command(!Fl||Yl>=0,"invalid "+El,xl.commandStr),_p(function(s0,n0){return Fl&&(s0.OFFSET=Yl),Yl})}else if(El in zl){var o0=zl[El];return e1(o0,function(s0,n0){var w0=s0.invoke(n0,o0);return Fl&&(s0.OFFSET=w0,Xs.optional(function(){s0.assert(n0,w0+">=0","invalid "+El)})),w0})}else if(Fl&&Dl)return _p(function(s0,n0){return s0.OFFSET="0",0});return null}var Ml=Bl(Uy,!0);function Ll(){if(x2 in Pl){var El=Pl[x2]|0;return Xs.command(typeof El=="number"&&El>=0,"invalid vertex count",xl.commandStr),_p(function(){return El})}else if(x2 in zl){var Fl=zl[x2];return e1(Fl,function(s0,n0){var w0=s0.invoke(n0,Fl);return Xs.optional(function(){s0.assert(n0,"typeof "+w0+'==="number"&&'+w0+">=0&&"+w0+"===("+w0+"|0)","invalid vertex count")}),w0})}else if(Dl)if(X1(Dl)){if(Dl)return Ml?new Hp(Ml.thisDep,Ml.contextDep,Ml.propDep,function(s0,n0){var w0=n0.def(s0.ELEMENTS,".vertCount-",s0.OFFSET);return Xs.optional(function(){s0.assert(n0,w0+">=0","invalid vertex offset/element buffer too small")}),w0}):_p(function(s0,n0){return n0.def(s0.ELEMENTS,".vertCount")});var Yl=_p(function(){return-1});return Xs.optional(function(){Yl.MISSING=!0}),Yl}else{var o0=new Hp(Dl.thisDep||Ml.thisDep,Dl.contextDep||Ml.contextDep,Dl.propDep||Ml.propDep,function(s0,n0){var w0=s0.ELEMENTS;return s0.OFFSET?n0.def(w0,"?",w0,".vertCount-",s0.OFFSET,":-1"):n0.def(w0,"?",w0,".vertCount:-1")});return Xs.optional(function(){o0.DYNAMIC=!0}),o0}return null}return{elements:Dl,primitive:Ol(),count:Ll(),instances:Bl(Hy,!1),offset:Ml}}function xp($l,xl){var Pl=$l.static,zl=$l.dynamic,Vl={};return p0.forEach(function(Dl){var Ol=I0(Dl);function Bl(Ml,Ll){if(Dl in Pl){var El=Ml(Pl[Dl]);Vl[Ol]=_p(function(){return El})}else if(Dl in zl){var Fl=zl[Dl];Vl[Ol]=e1(Fl,function(Yl,o0){return Ll(Yl,o0,Yl.invoke(o0,Fl))})}}switch(Dl){case kE:case bE:case ME:case DE:case jy:case BE:case PE:case OE:case NE:case IE:return Bl(function(Ml){return Xs.commandType(Ml,"boolean",Dl,xl.commandStr),Ml},function(Ml,Ll,El){return Xs.optional(function(){Ml.assert(Ll,"typeof "+El+'==="boolean"',"invalid flag "+Dl,Ml.commandStr)}),El});case TE:return Bl(function(Ml){return Xs.commandParameter(Ml,wm,"invalid "+Dl,xl.commandStr),wm[Ml]},function(Ml,Ll,El){var Fl=Ml.constants.compareFuncs;return Xs.optional(function(){Ml.assert(Ll,El+" in "+Fl,"invalid "+Dl+", must be one of "+Object.keys(wm))}),Ll.def(Fl,"[",El,"]")});case AE:return Bl(function(Ml){return Xs.command(vp(Ml)&&Ml.length===2&&typeof Ml[0]=="number"&&typeof Ml[1]=="number"&&Ml[0]<=Ml[1],"depth range is 2d array",xl.commandStr),Ml},function(Ml,Ll,El){Xs.optional(function(){Ml.assert(Ll,Ml.shared.isArrayLike+"("+El+")&&"+El+".length===2&&typeof "+El+'[0]==="number"&&typeof '+El+'[1]==="number"&&'+El+"[0]<="+El+"[1]","depth range must be a 2d array")});var Fl=Ll.def("+",El,"[0]"),Yl=Ll.def("+",El,"[1]");return[Fl,Yl]});case S1:return Bl(function(Ml){Xs.commandType(Ml,"object","blend.func",xl.commandStr);var Ll="srcRGB"in Ml?Ml.srcRGB:Ml.src,El="srcAlpha"in Ml?Ml.srcAlpha:Ml.src,Fl="dstRGB"in Ml?Ml.dstRGB:Ml.dst,Yl="dstAlpha"in Ml?Ml.dstAlpha:Ml.dst;return Xs.commandParameter(Ll,Y1,Ol+".srcRGB",xl.commandStr),Xs.commandParameter(El,Y1,Ol+".srcAlpha",xl.commandStr),Xs.commandParameter(Fl,Y1,Ol+".dstRGB",xl.commandStr),Xs.commandParameter(Yl,Y1,Ol+".dstAlpha",xl.commandStr),Xs.command(YE.indexOf(Ll+", "+Fl)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Ll+", "+Fl+")",xl.commandStr),[Y1[Ll],Y1[Fl],Y1[El],Y1[Yl]]},function(Ml,Ll,El){var Fl=Ml.constants.blendFuncs;Xs.optional(function(){Ml.assert(Ll,El+"&&typeof "+El+'==="object"',"invalid blend func, must be an object")});function Yl(X0,iv){var gv=Ll.def('"',X0,iv,'" in ',El,"?",El,".",X0,iv,":",El,".",X0);return Xs.optional(function(){Ml.assert(Ll,gv+" in "+Fl,"invalid "+Dl+"."+X0+iv+", must be one of "+Object.keys(Y1))}),gv}var o0=Yl("src","RGB"),s0=Yl("dst","RGB");Xs.optional(function(){var X0=Ml.constants.invalidBlendCombinations;Ml.assert(Ll,X0+".indexOf("+o0+'+", "+'+s0+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var n0=Ll.def(Fl,"[",o0,"]"),w0=Ll.def(Fl,"[",Yl("src","Alpha"),"]"),J0=Ll.def(Fl,"[",s0,"]"),_v=Ll.def(Fl,"[",Yl("dst","Alpha"),"]");return[n0,J0,w0,_v]});case ex:return Bl(function(Ml){if(typeof Ml=="string")return Xs.commandParameter(Ml,t0,"invalid "+Dl,xl.commandStr),[t0[Ml],t0[Ml]];if(typeof Ml=="object")return Xs.commandParameter(Ml.rgb,t0,Dl+".rgb",xl.commandStr),Xs.commandParameter(Ml.alpha,t0,Dl+".alpha",xl.commandStr),[t0[Ml.rgb],t0[Ml.alpha]];Xs.commandRaise("invalid blend.equation",xl.commandStr)},function(Ml,Ll,El){var Fl=Ml.constants.blendEquations,Yl=Ll.def(),o0=Ll.def(),s0=Ml.cond("typeof ",El,'==="string"');return Xs.optional(function(){function n0(w0,J0,_v){Ml.assert(w0,_v+" in "+Fl,"invalid "+J0+", must be one of "+Object.keys(t0))}n0(s0.then,Dl,El),Ml.assert(s0.else,El+"&&typeof "+El+'==="object"',"invalid "+Dl),n0(s0.else,Dl+".rgb",El+".rgb"),n0(s0.else,Dl+".alpha",El+".alpha")}),s0.then(Yl,"=",o0,"=",Fl,"[",El,"];"),s0.else(Yl,"=",Fl,"[",El,".rgb];",o0,"=",Fl,"[",El,".alpha];"),Ll(s0),[Yl,o0]});case CE:return Bl(function(Ml){return Xs.command(vp(Ml)&&Ml.length===4,"blend.color must be a 4d array",xl.commandStr),Cp(4,function(Ll){return+Ml[Ll]})},function(Ml,Ll,El){return Xs.optional(function(){Ml.assert(Ll,Ml.shared.isArrayLike+"("+El+")&&"+El+".length===4","blend.color must be a 4d array")}),Cp(4,function(Fl){return Ll.def("+",El,"[",Fl,"]")})});case RE:return Bl(function(Ml){return Xs.commandType(Ml,"number",Ol,xl.commandStr),Ml|0},function(Ml,Ll,El){return Xs.optional(function(){Ml.assert(Ll,"typeof "+El+'==="number"',"invalid stencil.mask")}),Ll.def(El,"|0")});case ox:return Bl(function(Ml){Xs.commandType(Ml,"object",Ol,xl.commandStr);var Ll=Ml.cmp||"keep",El=Ml.ref||0,Fl="mask"in Ml?Ml.mask:-1;return Xs.commandParameter(Ll,wm,Dl+".cmp",xl.commandStr),Xs.commandType(El,"number",Dl+".ref",xl.commandStr),Xs.commandType(Fl,"number",Dl+".mask",xl.commandStr),[wm[Ll],El,Fl]},function(Ml,Ll,El){var Fl=Ml.constants.compareFuncs;Xs.optional(function(){function n0(){Ml.assert(Ll,Array.prototype.join.call(arguments,""),"invalid stencil.func")}n0(El+"&&typeof ",El,'==="object"'),n0('!("cmp" in ',El,")||(",El,".cmp in ",Fl,")")});var Yl=Ll.def('"cmp" in ',El,"?",Fl,"[",El,".cmp]",":",W1),o0=Ll.def(El,".ref|0"),s0=Ll.def('"mask" in ',El,"?",El,".mask|0:-1");return[Yl,o0,s0]});case sx:case Ym:return Bl(function(Ml){Xs.commandType(Ml,"object",Ol,xl.commandStr);var Ll=Ml.fail||"keep",El=Ml.zfail||"keep",Fl=Ml.zpass||"keep";return Xs.commandParameter(Ll,S2,Dl+".fail",xl.commandStr),Xs.commandParameter(El,S2,Dl+".zfail",xl.commandStr),Xs.commandParameter(Fl,S2,Dl+".zpass",xl.commandStr),[Dl===Ym?O1:ny,S2[Ll],S2[El],S2[Fl]]},function(Ml,Ll,El){var Fl=Ml.constants.stencilOps;Xs.optional(function(){Ml.assert(Ll,El+"&&typeof "+El+'==="object"',"invalid "+Dl)});function Yl(o0){return Xs.optional(function(){Ml.assert(Ll,'!("'+o0+'" in '+El+")||("+El+"."+o0+" in "+Fl+")","invalid "+Dl+"."+o0+", must be one of "+Object.keys(S2))}),Ll.def('"',o0,'" in ',El,"?",Fl,"[",El,".",o0,"]:",W1)}return[Dl===Ym?O1:ny,Yl("fail"),Yl("zfail"),Yl("zpass")]});case ix:return Bl(function(Ml){Xs.commandType(Ml,"object",Ol,xl.commandStr);var Ll=Ml.factor|0,El=Ml.units|0;return Xs.commandType(Ll,"number",Ol+".factor",xl.commandStr),Xs.commandType(El,"number",Ol+".units",xl.commandStr),[Ll,El]},function(Ml,Ll,El){Xs.optional(function(){Ml.assert(Ll,El+"&&typeof "+El+'==="object"',"invalid "+Dl)});var Fl=Ll.def(El,".factor|0"),Yl=Ll.def(El,".units|0");return[Fl,Yl]});case LE:return Bl(function(Ml){var Ll=0;return Ml==="front"?Ll=ny:Ml==="back"&&(Ll=O1),Xs.command(!!Ll,Ol,xl.commandStr),Ll},function(Ml,Ll,El){return Xs.optional(function(){Ml.assert(Ll,El+'==="front"||'+El+'==="back"',"invalid cull.face")}),Ll.def(El,'==="front"?',ny,":",O1)});case nx:return Bl(function(Ml){return Xs.command(typeof Ml=="number"&&Ml>=Jl.lineWidthDims[0]&&Ml<=Jl.lineWidthDims[1],"invalid line width, must be a positive number between "+Jl.lineWidthDims[0]+" and "+Jl.lineWidthDims[1],xl.commandStr),Ml},function(Ml,Ll,El){return Xs.optional(function(){Ml.assert(Ll,"typeof "+El+'==="number"&&'+El+">="+Jl.lineWidthDims[0]+"&&"+El+"<="+Jl.lineWidthDims[1],"invalid line width")}),El});case rx:return Bl(function(Ml){return Xs.commandParameter(Ml,vx,Ol,xl.commandStr),vx[Ml]},function(Ml,Ll,El){return Xs.optional(function(){Ml.assert(Ll,El+'==="cw"||'+El+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Ll.def(El+'==="cw"?'+WE+":"+$1)});case tx:return Bl(function(Ml){return Xs.command(vp(Ml)&&Ml.length===4,"color.mask must be length 4 array",xl.commandStr),Ml.map(function(Ll){return!!Ll})},function(Ml,Ll,El){return Xs.optional(function(){Ml.assert(Ll,Ml.shared.isArrayLike+"("+El+")&&"+El+".length===4","invalid color.mask")}),Cp(4,function(Fl){return"!!"+El+"["+Fl+"]"})});case ax:return Bl(function(Ml){Xs.command(typeof Ml=="object"&&Ml,Ol,xl.commandStr);var Ll="value"in Ml?Ml.value:1,El=!!Ml.invert;return Xs.command(typeof Ll=="number"&&Ll>=0&&Ll<=1,"sample.coverage.value must be a number between 0 and 1",xl.commandStr),[Ll,El]},function(Ml,Ll,El){Xs.optional(function(){Ml.assert(Ll,El+"&&typeof "+El+'==="object"',"invalid sample.coverage")});var Fl=Ll.def('"value" in ',El,"?+",El,".value:1"),Yl=Ll.def("!!",El,".invert");return[Fl,Yl]})}}),Vl}function Ip($l,xl){var Pl=$l.static,zl=$l.dynamic,Vl={};return Object.keys(Pl).forEach(function(Dl){var Ol=Pl[Dl],Bl;if(typeof Ol=="number"||typeof Ol=="boolean")Bl=_p(function(){return Ol});else if(typeof Ol=="function"){var Ml=Ol._reglType;Ml==="texture2d"||Ml==="textureCube"?Bl=_p(function(Ll){return Ll.link(Ol)}):Ml==="framebuffer"||Ml==="framebufferCube"?(Xs.command(Ol.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Dl+'"',xl.commandStr),Bl=_p(function(Ll){return Ll.link(Ol.color[0])})):Xs.commandRaise('invalid data for uniform "'+Dl+'"',xl.commandStr)}else vp(Ol)?Bl=_p(function(Ll){var El=Ll.global.def("[",Cp(Ol.length,function(Fl){return Xs.command(typeof Ol[Fl]=="number"||typeof Ol[Fl]=="boolean","invalid uniform "+Dl,Ll.commandStr),Ol[Fl]}),"]");return El}):Xs.commandRaise('invalid or missing data for uniform "'+Dl+'"',xl.commandStr);Bl.value=Ol,Vl[Dl]=Bl}),Object.keys(zl).forEach(function(Dl){var Ol=zl[Dl];Vl[Dl]=e1(Ol,function(Bl,Ml){return Bl.invoke(Ml,Ol)})}),Vl}function Nv($l,xl){var Pl=$l.static,zl=$l.dynamic,Vl={};return Object.keys(Pl).forEach(function(Dl){var Ol=Pl[Dl],Bl=Qs.id(Dl),Ml=new Hl;if(e_(Ol))Ml.state=Em,Ml.buffer=u0.getBuffer(u0.create(Ol,H2,!1,!0)),Ml.type=0;else{var Ll=u0.getBuffer(Ol);if(Ll)Ml.state=Em,Ml.buffer=Ll,Ml.type=0;else if(Xs.command(typeof Ol=="object"&&Ol,"invalid data for attribute "+Dl,xl.commandStr),"constant"in Ol){var El=Ol.constant;Ml.buffer="null",Ml.state=q_,typeof El=="number"?Ml.x=El:(Xs.command(vp(El)&&El.length>0&&El.length<=4,"invalid constant for attribute "+Dl,xl.commandStr),xm.forEach(function(J0,_v){_v<El.length&&(Ml[J0]=El[_v])}))}else{e_(Ol.buffer)?Ll=u0.getBuffer(u0.create(Ol.buffer,H2,!1,!0)):Ll=u0.getBuffer(Ol.buffer),Xs.command(!!Ll,'missing buffer for attribute "'+Dl+'"',xl.commandStr);var Fl=Ol.offset|0;Xs.command(Fl>=0,'invalid offset for attribute "'+Dl+'"',xl.commandStr);var Yl=Ol.stride|0;Xs.command(Yl>=0&&Yl<256,'invalid stride for attribute "'+Dl+'", must be integer betweeen [0, 255]',xl.commandStr);var o0=Ol.size|0;Xs.command(!("size"in Ol)||o0>0&&o0<=4,'invalid size for attribute "'+Dl+'", must be 1,2,3,4',xl.commandStr);var s0=!!Ol.normalized,n0=0;"type"in Ol&&(Xs.commandParameter(Ol.type,Mv,"invalid type for attribute "+Dl,xl.commandStr),n0=Mv[Ol.type]);var w0=Ol.divisor|0;"divisor"in Ol&&(Xs.command(w0===0||$0,'cannot specify divisor for attribute "'+Dl+'", instancing not supported',xl.commandStr),Xs.command(w0>=0,'invalid divisor for attribute "'+Dl+'"',xl.commandStr)),Xs.optional(function(){var J0=xl.commandStr,_v=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Ol).forEach(function(X0){Xs.command(_v.indexOf(X0)>=0,'unknown parameter "'+X0+'" for attribute pointer "'+Dl+'" (valid parameters are '+_v+")",J0)})}),Ml.buffer=Ll,Ml.state=Em,Ml.size=o0,Ml.normalized=s0,Ml.type=n0||Ll.dtype,Ml.offset=Fl,Ml.stride=Yl,Ml.divisor=w0}}Vl[Dl]=_p(function(J0,_v){var X0=J0.attribCache;if(Bl in X0)return X0[Bl];var iv={isStream:!1};return Object.keys(Ml).forEach(function(gv){iv[gv]=Ml[gv]}),Ml.buffer&&(iv.buffer=J0.link(Ml.buffer),iv.type=iv.type||iv.buffer+".dtype"),X0[Bl]=iv,iv})}),Object.keys(zl).forEach(function(Dl){var Ol=zl[Dl];function Bl(Ml,Ll){var El=Ml.invoke(Ll,Ol),Fl=Ml.shared,Yl=Ml.constants,o0=Fl.isBufferArgs,s0=Fl.buffer;Xs.optional(function(){Ml.assert(Ll,El+"&&(typeof "+El+'==="object"||typeof '+El+'==="function")&&('+o0+"("+El+")||"+s0+".getBuffer("+El+")||"+s0+".getBuffer("+El+".buffer)||"+o0+"("+El+'.buffer)||("constant" in '+El+"&&(typeof "+El+'.constant==="number"||'+Fl.isArrayLike+"("+El+".constant))))",'invalid dynamic attribute "'+Dl+'"')});var n0={isStream:Ll.def(!1)},w0=new Hl;w0.state=Em,Object.keys(w0).forEach(function(iv){n0[iv]=Ll.def(""+w0[iv])});var J0=n0.buffer,_v=n0.type;Ll("if(",o0,"(",El,")){",n0.isStream,"=true;",J0,"=",s0,".createStream(",H2,",",El,");",_v,"=",J0,".dtype;","}else{",J0,"=",s0,".getBuffer(",El,");","if(",J0,"){",_v,"=",J0,".dtype;",'}else if("constant" in ',El,"){",n0.state,"=",q_,";","if(typeof "+El+'.constant === "number"){',n0[xm[0]],"=",El,".constant;",xm.slice(1).map(function(iv){return n0[iv]}).join("="),"=0;","}else{",xm.map(function(iv,gv){return n0[iv]+"="+El+".constant.length>"+gv+"?"+El+".constant["+gv+"]:0;"}).join(""),"}}else{","if(",o0,"(",El,".buffer)){",J0,"=",s0,".createStream(",H2,",",El,".buffer);","}else{",J0,"=",s0,".getBuffer(",El,".buffer);","}",_v,'="type" in ',El,"?",Yl.glTypes,"[",El,".type]:",J0,".dtype;",n0.normalized,"=!!",El,".normalized;");function X0(iv){Ll(n0[iv],"=",El,".",iv,"|0;")}return X0("size"),X0("offset"),X0("stride"),X0("divisor"),Ll("}}"),Ll.exit("if(",n0.isStream,"){",s0,".destroyStream(",J0,");","}"),n0}Vl[Dl]=e1(Ol,Bl)}),Vl}function Ep($l,xl){var Pl=$l.static,zl=$l.dynamic;if(Zm in Pl){var Vl=Pl[Zm];return Vl!==null&&C0.getVAO(Vl)===null&&(Vl=C0.createVAO(Vl)),_p(function(Ol){return Ol.link(C0.getVAO(Vl))})}else if(Zm in zl){var Dl=zl[Zm];return e1(Dl,function(Ol,Bl){var Ml=Ol.invoke(Bl,Dl);return Bl.def(Ol.shared.vao+".getVAO("+Ml+")")})}return null}function op($l){var xl=$l.static,Pl=$l.dynamic,zl={};return Object.keys(xl).forEach(function(Vl){var Dl=xl[Vl];zl[Vl]=_p(function(Ol,Bl){return typeof Dl=="number"||typeof Dl=="boolean"?""+Dl:Ol.link(Dl)})}),Object.keys(Pl).forEach(function(Vl){var Dl=Pl[Vl];zl[Vl]=e1(Dl,function(Ol,Bl){return Ol.invoke(Bl,Dl)})}),zl}function Sp($l,xl,Pl,zl,Vl){var Dl=$l.static,Ol=$l.dynamic;Xs.optional(function(){var X0=[j2,qm,Km,z2,U2,Uy,x2,Hy,Xm,Zm].concat(p0);function iv(gv){Object.keys(gv).forEach(function(Hv){Xs.command(X0.indexOf(Hv)>=0,'unknown parameter "'+Hv+'"',Vl.commandStr)})}iv(Dl),iv(Ol)});var Bl=vv($l,xl),Ml=Y0($l),Ll=Av($l,Ml,Vl),El=Uv($l,Vl),Fl=xp($l,Vl),Yl=bv($l,Vl,Bl);function o0(X0){var iv=Ll[X0];iv&&(Fl[X0]=iv)}o0(o2),o0(I0(zy));var s0=Object.keys(Fl).length>0,n0={framebuffer:Ml,draw:El,shader:Yl,state:Fl,dirty:s0,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(n0.profile=mv($l),n0.uniforms=Ip(Pl,Vl),n0.drawVAO=n0.scopeVAO=Ep($l),!n0.drawVAO&&Yl.program&&!Bl&&Al.angle_instanced_arrays){var w0=!0,J0=Yl.program.attributes.map(function(X0){var iv=xl.static[X0];return w0=w0&&!!iv,iv});if(w0&&J0.length>0){var _v=C0.getVAO(C0.createVAO(J0));n0.drawVAO=new Hp(null,null,null,function(X0,iv){return X0.link(_v)}),n0.useVAO=!0}}return Bl?n0.useVAO=!0:n0.attributes=Nv(xl,Vl),n0.context=op(zl),n0}function Mp($l,xl,Pl){var zl=$l.shared,Vl=zl.context,Dl=$l.scope();Object.keys(Pl).forEach(function(Ol){xl.save(Vl,"."+Ol);var Bl=Pl[Ol],Ml=Bl.append($l,xl);Array.isArray(Ml)?Dl(Vl,".",Ol,"=[",Ml.join(),"];"):Dl(Vl,".",Ol,"=",Ml,";")}),xl(Dl)}function bp($l,xl,Pl,zl){var Vl=$l.shared,Dl=Vl.gl,Ol=Vl.framebuffer,Bl;F0&&(Bl=xl.def(Vl.extensions,".webgl_draw_buffers"));var Ml=$l.constants,Ll=Ml.drawBuffer,El=Ml.backBuffer,Fl;Pl?Fl=Pl.append($l,xl):Fl=xl.def(Ol,".next"),zl||xl("if(",Fl,"!==",Ol,".cur){"),xl("if(",Fl,"){",Dl,".bindFramebuffer(",VE,",",Fl,".framebuffer);"),F0&&xl(Bl,".drawBuffersWEBGL(",Ll,"[",Fl,".colorAttachments.length]);"),xl("}else{",Dl,".bindFramebuffer(",VE,",null);"),F0&&xl(Bl,".drawBuffersWEBGL(",El,");"),xl("}",Ol,".cur=",Fl,";"),zl||xl("}")}function kp($l,xl,Pl){var zl=$l.shared,Vl=zl.gl,Dl=$l.current,Ol=$l.next,Bl=zl.current,Ml=zl.next,Ll=$l.cond(Bl,".dirty");p0.forEach(function(El){var Fl=I0(El);if(!(Fl in Pl.state)){var Yl,o0;if(Fl in Ol){Yl=Ol[Fl],o0=Dl[Fl];var s0=Cp(h0[Fl].length,function(w0){return Ll.def(Yl,"[",w0,"]")});Ll($l.cond(s0.map(function(w0,J0){return w0+"!=="+o0+"["+J0+"]"}).join("||")).then(Vl,".",v0[Fl],"(",s0,");",s0.map(function(w0,J0){return o0+"["+J0+"]="+w0}).join(";"),";"))}else{Yl=Ll.def(Ml,".",Fl);var n0=$l.cond(Yl,"!==",Bl,".",Fl);Ll(n0),Fl in L0?n0($l.cond(Yl).then(Vl,".enable(",L0[Fl],");").else(Vl,".disable(",L0[Fl],");"),Bl,".",Fl,"=",Yl,";"):n0(Vl,".",v0[Fl],"(",Yl,");",Bl,".",Fl,"=",Yl,";")}}}),Object.keys(Pl.state).length===0&&Ll(Bl,".dirty=false;"),xl(Ll)}function Np($l,xl,Pl,zl){var Vl=$l.shared,Dl=$l.current,Ol=Vl.current,Bl=Vl.gl;Zv(Object.keys(Pl)).forEach(function(Ml){var Ll=Pl[Ml];if(!(zl&&!zl(Ll))){var El=Ll.append($l,xl);if(L0[Ml]){var Fl=L0[Ml];X1(Ll)?El?xl(Bl,".enable(",Fl,");"):xl(Bl,".disable(",Fl,");"):xl($l.cond(El).then(Bl,".enable(",Fl,");").else(Bl,".disable(",Fl,");")),xl(Ol,".",Ml,"=",El,";")}else if(vp(El)){var Yl=Dl[Ml];xl(Bl,".",v0[Ml],"(",El,");",El.map(function(o0,s0){return Yl+"["+s0+"]="+o0}).join(";"),";")}else xl(Bl,".",v0[Ml],"(",El,");",Ol,".",Ml,"=",El,";")}})}function pp($l,xl){$0&&($l.instancing=xl.def($l.shared.extensions,".angle_instanced_arrays"))}function dv($l,xl,Pl,zl,Vl){var Dl=$l.shared,Ol=$l.stats,Bl=Dl.current,Ml=Dl.timer,Ll=Pl.profile;function El(){return typeof performance>"u"?"Date.now()":"performance.now()"}var Fl,Yl;function o0(X0){Fl=xl.def(),X0(Fl,"=",El(),";"),typeof Vl=="string"?X0(Ol,".count+=",Vl,";"):X0(Ol,".count++;"),_0&&(zl?(Yl=xl.def(),X0(Yl,"=",Ml,".getNumPendingQueries();")):X0(Ml,".beginQuery(",Ol,");"))}function s0(X0){X0(Ol,".cpuTime+=",El(),"-",Fl,";"),_0&&(zl?X0(Ml,".pushScopeStats(",Yl,",",Ml,".getNumPendingQueries(),",Ol,");"):X0(Ml,".endQuery();"))}function n0(X0){var iv=xl.def(Bl,".profile");xl(Bl,".profile=",X0,";"),xl.exit(Bl,".profile=",iv,";")}var w0;if(Ll){if(X1(Ll)){Ll.enable?(o0(xl),s0(xl.exit),n0("true")):n0("false");return}w0=Ll.append($l,xl),n0(w0)}else w0=xl.def(Bl,".profile");var J0=$l.block();o0(J0),xl("if(",w0,"){",J0,"}");var _v=$l.block();s0(_v),xl.exit("if(",w0,"){",_v,"}")}function up($l,xl,Pl,zl,Vl){var Dl=$l.shared;function Ol(Ml){switch(Ml){case Wy:case Xy:case Zy:return 2;case Vy:case qy:case Qy:return 3;case Yy:case Ky:case Jy:return 4;default:return 1}}function Bl(Ml,Ll,El){var Fl=Dl.gl,Yl=xl.def(Ml,".location"),o0=xl.def(Dl.attributes,"[",Yl,"]"),s0=El.state,n0=El.buffer,w0=[El.x,El.y,El.z,El.w],J0=["buffer","normalized","offset","stride"];function _v(){xl("if(!",o0,".buffer){",Fl,".enableVertexAttribArray(",Yl,");}");var iv=El.type,gv;if(El.size?gv=xl.def(El.size,"||",Ll):gv=Ll,xl("if(",o0,".type!==",iv,"||",o0,".size!==",gv,"||",J0.map(function(cp){return o0+"."+cp+"!=="+El[cp]}).join("||"),"){",Fl,".bindBuffer(",H2,",",n0,".buffer);",Fl,".vertexAttribPointer(",[Yl,gv,iv,El.normalized,El.stride,El.offset],");",o0,".type=",iv,";",o0,".size=",gv,";",J0.map(function(cp){return o0+"."+cp+"="+El[cp]+";"}).join(""),"}"),$0){var Hv=El.divisor;xl("if(",o0,".divisor!==",Hv,"){",$l.instancing,".vertexAttribDivisorANGLE(",[Yl,Hv],");",o0,".divisor=",Hv,";}")}}function X0(){xl("if(",o0,".buffer){",Fl,".disableVertexAttribArray(",Yl,");",o0,".buffer=null;","}if(",xm.map(function(iv,gv){return o0+"."+iv+"!=="+w0[gv]}).join("||"),"){",Fl,".vertexAttrib4f(",Yl,",",w0,");",xm.map(function(iv,gv){return o0+"."+iv+"="+w0[gv]+";"}).join(""),"}")}s0===Em?_v():s0===q_?X0():(xl("if(",s0,"===",Em,"){"),_v(),xl("}else{"),X0(),xl("}"))}zl.forEach(function(Ml){var Ll=Ml.name,El=Pl.attributes[Ll],Fl;if(El){if(!Vl(El))return;Fl=El.append($l,xl)}else{if(!Vl(Qv))return;var Yl=$l.scopeAttrib(Ll);Xs.optional(function(){$l.assert(xl,Yl+".state","missing attribute "+Ll)}),Fl={},Object.keys(new Hl).forEach(function(o0){Fl[o0]=xl.def(Yl,".",o0)})}Bl($l.link(Ml),Ol(Ml.info.type),Fl)})}function Dv($l,xl,Pl,zl,Vl){for(var Dl=$l.shared,Ol=Dl.gl,Bl,Ml=0;Ml<zl.length;++Ml){var Ll=zl[Ml],El=Ll.name,Fl=Ll.info.type,Yl=Pl.uniforms[El],o0=$l.link(Ll),s0=o0+".location",n0;if(Yl){if(!Vl(Yl))continue;if(X1(Yl)){var w0=Yl.value;if(Xs.command(w0!==null&&typeof w0<"u",'missing uniform "'+El+'"',$l.commandStr),Fl===ty||Fl===ry){Xs.command(typeof w0=="function"&&(Fl===ty&&(w0._reglType==="texture2d"||w0._reglType==="framebuffer")||Fl===ry&&(w0._reglType==="textureCube"||w0._reglType==="framebufferCube")),"invalid texture for uniform "+El,$l.commandStr);var J0=$l.link(w0._texture||w0.color[0]._texture);xl(Ol,".uniform1i(",s0,",",J0+".bind());"),xl.exit(J0,".unbind();")}else if(Fl===Qm||Fl===Jm||Fl===ey){Xs.optional(function(){Xs.command(vp(w0),"invalid matrix for uniform "+El,$l.commandStr),Xs.command(Fl===Qm&&w0.length===4||Fl===Jm&&w0.length===9||Fl===ey&&w0.length===16,"invalid length for matrix uniform "+El,$l.commandStr)});var _v=$l.global.def("new Float32Array(["+Array.prototype.slice.call(w0)+"])"),X0=2;Fl===Jm?X0=3:Fl===ey&&(X0=4),xl(Ol,".uniformMatrix",X0,"fv(",s0,",false,",_v,");")}else{switch(Fl){case cx:Xs.commandType(w0,"number","uniform "+El,$l.commandStr),Bl="1f";break;case Wy:Xs.command(vp(w0)&&w0.length===2,"uniform "+El,$l.commandStr),Bl="2f";break;case Vy:Xs.command(vp(w0)&&w0.length===3,"uniform "+El,$l.commandStr),Bl="3f";break;case Yy:Xs.command(vp(w0)&&w0.length===4,"uniform "+El,$l.commandStr),Bl="4f";break;case hx:Xs.commandType(w0,"boolean","uniform "+El,$l.commandStr),Bl="1i";break;case dx:Xs.commandType(w0,"number","uniform "+El,$l.commandStr),Bl="1i";break;case Zy:Xs.command(vp(w0)&&w0.length===2,"uniform "+El,$l.commandStr),Bl="2i";break;case Xy:Xs.command(vp(w0)&&w0.length===2,"uniform "+El,$l.commandStr),Bl="2i";break;case Qy:Xs.command(vp(w0)&&w0.length===3,"uniform "+El,$l.commandStr),Bl="3i";break;case qy:Xs.command(vp(w0)&&w0.length===3,"uniform "+El,$l.commandStr),Bl="3i";break;case Jy:Xs.command(vp(w0)&&w0.length===4,"uniform "+El,$l.commandStr),Bl="4i";break;case Ky:Xs.command(vp(w0)&&w0.length===4,"uniform "+El,$l.commandStr),Bl="4i";break}xl(Ol,".uniform",Bl,"(",s0,",",vp(w0)?Array.prototype.slice.call(w0):w0,");")}continue}else n0=Yl.append($l,xl)}else{if(!Vl(Qv))continue;n0=xl.def(Dl.uniforms,"[",Qs.id(El),"]")}Fl===ty?(Xs(!Array.isArray(n0),"must specify a scalar prop for textures"),xl("if(",n0,"&&",n0,'._reglType==="framebuffer"){',n0,"=",n0,".color[0];","}")):Fl===ry&&(Xs(!Array.isArray(n0),"must specify a scalar prop for cube maps"),xl("if(",n0,"&&",n0,'._reglType==="framebufferCube"){',n0,"=",n0,".color[0];","}")),Xs.optional(function(){function Wp(N1,QE){$l.assert(xl,N1,'bad data or missing for uniform "'+El+'".  '+QE)}function mx(N1){Xs(!Array.isArray(n0),"must not specify an array type for uniform"),Wp("typeof "+n0+'==="'+N1+'"',"invalid type, expected "+N1)}function M1(N1,QE){Array.isArray(n0)?Xs(n0.length===N1,"must have length "+N1):Wp(Dl.isArrayLike+"("+n0+")&&"+n0+".length==="+N1,"invalid vector, should have length "+N1,$l.commandStr)}function ZE(N1){Xs(!Array.isArray(n0),"must not specify a value type"),Wp("typeof "+n0+'==="function"&&'+n0+'._reglType==="texture'+(N1===UE?"2d":"Cube")+'"',"invalid texture type",$l.commandStr)}switch(Fl){case dx:mx("number");break;case Xy:M1(2);break;case qy:M1(3);break;case Ky:M1(4);break;case cx:mx("number");break;case Wy:M1(2);break;case Vy:M1(3);break;case Yy:M1(4);break;case hx:mx("boolean");break;case Zy:M1(2);break;case Qy:M1(3);break;case Jy:M1(4);break;case Qm:M1(4);break;case Jm:M1(9);break;case ey:M1(16);break;case ty:ZE(UE);break;case ry:ZE(w1);break}});var iv=1;switch(Fl){case ty:case ry:var gv=xl.def(n0,"._texture");xl(Ol,".uniform1i(",s0,",",gv,".bind());"),xl.exit(gv,".unbind();");continue;case dx:case hx:Bl="1i";break;case Xy:case Zy:Bl="2i",iv=2;break;case qy:case Qy:Bl="3i",iv=3;break;case Ky:case Jy:Bl="4i",iv=4;break;case cx:Bl="1f";break;case Wy:Bl="2f",iv=2;break;case Vy:Bl="3f",iv=3;break;case Yy:Bl="4f",iv=4;break;case Qm:Bl="Matrix2fv";break;case Jm:Bl="Matrix3fv";break;case ey:Bl="Matrix4fv";break}if(xl(Ol,".uniform",Bl,"(",s0,","),Bl.charAt(0)==="M"){var Hv=Math.pow(Fl-Qm+2,2),cp=$l.global.def("new Float32Array(",Hv,")");Array.isArray(n0)?xl("false,(",Cp(Hv,function(Wp){return cp+"["+Wp+"]="+n0[Wp]}),",",cp,")"):xl("false,(Array.isArray(",n0,")||",n0," instanceof Float32Array)?",n0,":(",Cp(Hv,function(Wp){return cp+"["+Wp+"]="+n0+"["+Wp+"]"}),",",cp,")")}else iv>1?xl(Cp(iv,function(Wp){return Array.isArray(n0)?n0[Wp]:n0+"["+Wp+"]"})):(Xs(!Array.isArray(n0),"uniform value must not be an array"),xl(n0));xl(");")}}function _d($l,xl,Pl,zl){var Vl=$l.shared,Dl=Vl.gl,Ol=Vl.draw,Bl=zl.draw;function Ml(){var gv=Bl.elements,Hv,cp=xl;return gv?((gv.contextDep&&zl.contextDynamic||gv.propDep)&&(cp=Pl),Hv=gv.append($l,cp)):Hv=cp.def(Ol,".",z2),Hv&&cp("if("+Hv+")"+Dl+".bindBuffer("+zE+","+Hv+".buffer.buffer);"),Hv}function Ll(){var gv=Bl.count,Hv,cp=xl;return gv?((gv.contextDep&&zl.contextDynamic||gv.propDep)&&(cp=Pl),Hv=gv.append($l,cp),Xs.optional(function(){gv.MISSING&&$l.assert(xl,"false","missing vertex count"),gv.DYNAMIC&&$l.assert(cp,Hv+">=0","missing vertex count")})):(Hv=cp.def(Ol,".",x2),Xs.optional(function(){$l.assert(cp,Hv+">=0","missing vertex count")})),Hv}var El=Ml();function Fl(gv){var Hv=Bl[gv];return Hv?Hv.contextDep&&zl.contextDynamic||Hv.propDep?Hv.append($l,Pl):Hv.append($l,xl):xl.def(Ol,".",gv)}var Yl=Fl(U2),o0=Fl(Uy),s0=Ll();if(typeof s0=="number"){if(s0===0)return}else Pl("if(",s0,"){"),Pl.exit("}");var n0,w0;$0&&(n0=Fl(Hy),w0=$l.instancing);var J0=El+".type",_v=Bl.elements&&X1(Bl.elements);function X0(){function gv(){Pl(w0,".drawElementsInstancedANGLE(",[Yl,s0,J0,o0+"<<(("+J0+"-"+SE+")>>1)",n0],");")}function Hv(){Pl(w0,".drawArraysInstancedANGLE(",[Yl,o0,s0,n0],");")}El?_v?gv():(Pl("if(",El,"){"),gv(),Pl("}else{"),Hv(),Pl("}")):Hv()}function iv(){function gv(){Pl(Dl+".drawElements("+[Yl,s0,J0,o0+"<<(("+J0+"-"+SE+")>>1)"]+");")}function Hv(){Pl(Dl+".drawArrays("+[Yl,o0,s0]+");")}El?_v?gv():(Pl("if(",El,"){"),gv(),Pl("}else{"),Hv(),Pl("}")):Hv()}$0&&(typeof n0!="number"||n0>=0)?typeof n0=="string"?(Pl("if(",n0,">0){"),X0(),Pl("}else if(",n0,"<0){"),iv(),Pl("}")):X0():iv()}function Ov($l,xl,Pl,zl,Vl){var Dl=cv(),Ol=Dl.proc("body",Vl);return Xs.optional(function(){Dl.commandStr=xl.commandStr,Dl.command=Dl.link(xl.commandStr)}),$0&&(Dl.instancing=Ol.def(Dl.shared.extensions,".angle_instanced_arrays")),$l(Dl,Ol,Pl,zl),Dl.compile().body}function Gv($l,xl,Pl,zl){pp($l,xl),Pl.useVAO?Pl.drawVAO?xl($l.shared.vao,".setVAO(",Pl.drawVAO.append($l,xl),");"):xl($l.shared.vao,".setVAO(",$l.shared.vao,".targetVAO);"):(xl($l.shared.vao,".setVAO(null);"),up($l,xl,Pl,zl.attributes,function(){return!0})),Dv($l,xl,Pl,zl.uniforms,function(){return!0}),_d($l,xl,xl,Pl)}function gp($l,xl){var Pl=$l.proc("draw",1);pp($l,Pl),Mp($l,Pl,xl.context),bp($l,Pl,xl.framebuffer),kp($l,Pl,xl),Np($l,Pl,xl.state),dv($l,Pl,xl,!1,!0);var zl=xl.shader.progVar.append($l,Pl);if(Pl($l.shared.gl,".useProgram(",zl,".program);"),xl.shader.program)Gv($l,Pl,xl,xl.shader.program);else{Pl($l.shared.vao,".setVAO(null);");var Vl=$l.global.def("{}"),Dl=Pl.def(zl,".id"),Ol=Pl.def(Vl,"[",Dl,"]");Pl($l.cond(Ol).then(Ol,".call(this,a0);").else(Ol,"=",Vl,"[",Dl,"]=",$l.link(function(Bl){return Ov(Gv,$l,xl,Bl,1)}),"(",zl,");",Ol,".call(this,a0);"))}Object.keys(xl.state).length>0&&Pl($l.shared.current,".dirty=true;")}function q1($l,xl,Pl,zl){$l.batchId="a1",pp($l,xl);function Vl(){return!0}up($l,xl,Pl,zl.attributes,Vl),Dv($l,xl,Pl,zl.uniforms,Vl),_d($l,xl,xl,Pl)}function l2($l,xl,Pl,zl){pp($l,xl);var Vl=Pl.contextDep,Dl=xl.def(),Ol="a0",Bl="a1",Ml=xl.def();$l.shared.props=Ml,$l.batchId=Dl;var Ll=$l.scope(),El=$l.scope();xl(Ll.entry,"for(",Dl,"=0;",Dl,"<",Bl,";++",Dl,"){",Ml,"=",Ol,"[",Dl,"];",El,"}",Ll.exit);function Fl(J0){return J0.contextDep&&Vl||J0.propDep}function Yl(J0){return!Fl(J0)}if(Pl.needsContext&&Mp($l,El,Pl.context),Pl.needsFramebuffer&&bp($l,El,Pl.framebuffer),Np($l,El,Pl.state,Fl),Pl.profile&&Fl(Pl.profile)&&dv($l,El,Pl,!1,!0),zl)Pl.useVAO?Pl.drawVAO?Fl(Pl.drawVAO)?El($l.shared.vao,".setVAO(",Pl.drawVAO.append($l,El),");"):Ll($l.shared.vao,".setVAO(",Pl.drawVAO.append($l,Ll),");"):Ll($l.shared.vao,".setVAO(",$l.shared.vao,".targetVAO);"):(Ll($l.shared.vao,".setVAO(null);"),up($l,Ll,Pl,zl.attributes,Yl),up($l,El,Pl,zl.attributes,Fl)),Dv($l,Ll,Pl,zl.uniforms,Yl),Dv($l,El,Pl,zl.uniforms,Fl),_d($l,Ll,El,Pl);else{var o0=$l.global.def("{}"),s0=Pl.shader.progVar.append($l,El),n0=El.def(s0,".id"),w0=El.def(o0,"[",n0,"]");El($l.shared.gl,".useProgram(",s0,".program);","if(!",w0,"){",w0,"=",o0,"[",n0,"]=",$l.link(function(J0){return Ov(q1,$l,Pl,J0,2)}),"(",s0,");}",w0,".call(this,a0[",Dl,"],",Dl,");")}}function Cl($l,xl){var Pl=$l.proc("batch",2);$l.batchId="0",pp($l,Pl);var zl=!1,Vl=!0;Object.keys(xl.context).forEach(function(o0){zl=zl||xl.context[o0].propDep}),zl||(Mp($l,Pl,xl.context),Vl=!1);var Dl=xl.framebuffer,Ol=!1;Dl?(Dl.propDep?zl=Ol=!0:Dl.contextDep&&zl&&(Ol=!0),Ol||bp($l,Pl,Dl)):bp($l,Pl,null),xl.state.viewport&&xl.state.viewport.propDep&&(zl=!0);function Bl(o0){return o0.contextDep&&zl||o0.propDep}kp($l,Pl,xl),Np($l,Pl,xl.state,function(o0){return!Bl(o0)}),(!xl.profile||!Bl(xl.profile))&&dv($l,Pl,xl,!1,"a1"),xl.contextDep=zl,xl.needsContext=Vl,xl.needsFramebuffer=Ol;var Ml=xl.shader.progVar;if(Ml.contextDep&&zl||Ml.propDep)l2($l,Pl,xl,null);else{var Ll=Ml.append($l,Pl);if(Pl($l.shared.gl,".useProgram(",Ll,".program);"),xl.shader.program)l2($l,Pl,xl,xl.shader.program);else{Pl($l.shared.vao,".setVAO(null);");var El=$l.global.def("{}"),Fl=Pl.def(Ll,".id"),Yl=Pl.def(El,"[",Fl,"]");Pl($l.cond(Yl).then(Yl,".call(this,a0,a1);").else(Yl,"=",El,"[",Fl,"]=",$l.link(function(o0){return Ov(l2,$l,xl,o0,2)}),"(",Ll,");",Yl,".call(this,a0,a1);"))}}Object.keys(xl.state).length>0&&Pl($l.shared.current,".dirty=true;")}function _f($l,xl){var Pl=$l.proc("scope",3);$l.batchId="a2";var zl=$l.shared,Vl=zl.current;Mp($l,Pl,xl.context),xl.framebuffer&&xl.framebuffer.append($l,Pl),Zv(Object.keys(xl.state)).forEach(function(Ol){var Bl=xl.state[Ol],Ml=Bl.append($l,Pl);vp(Ml)?Ml.forEach(function(Ll,El){Pl.set($l.next[Ol],"["+El+"]",Ll)}):Pl.set(zl.next,"."+Ol,Ml)}),dv($l,Pl,xl,!0,!0),[z2,Uy,x2,Hy,U2].forEach(function(Ol){var Bl=xl.draw[Ol];Bl&&Pl.set(zl.draw,"."+Ol,""+Bl.append($l,Pl))}),Object.keys(xl.uniforms).forEach(function(Ol){var Bl=xl.uniforms[Ol].append($l,Pl);Array.isArray(Bl)&&(Bl="["+Bl.join()+"]"),Pl.set(zl.uniforms,"["+Qs.id(Ol)+"]",Bl)}),Object.keys(xl.attributes).forEach(function(Ol){var Bl=xl.attributes[Ol].append($l,Pl),Ml=$l.scopeAttrib(Ol);Object.keys(new Hl).forEach(function(Ll){Pl.set(Ml,"."+Ll,Bl[Ll])})}),xl.scopeVAO&&Pl.set(zl.vao,".targetVAO",xl.scopeVAO.append($l,Pl));function Dl(Ol){var Bl=xl.shader[Ol];Bl&&Pl.set(zl.shader,"."+Ol,Bl.append($l,Pl))}Dl(qm),Dl(Km),Object.keys(xl.state).length>0&&(Pl(Vl,".dirty=true;"),Pl.exit(Vl,".dirty=true;")),Pl("a1(",$l.shared.context,",a0,",$l.batchId,");")}function Zl($l){if(!(typeof $l!="object"||vp($l))){for(var xl=Object.keys($l),Pl=0;Pl<xl.length;++Pl)if(Kv.isDynamic($l[xl[Pl]]))return!0;return!1}}function H0($l,xl,Pl){var zl=xl.static[Pl];if(!zl||!Zl(zl))return;var Vl=$l.global,Dl=Object.keys(zl),Ol=!1,Bl=!1,Ml=!1,Ll=$l.global.def("{}");Dl.forEach(function(Fl){var Yl=zl[Fl];if(Kv.isDynamic(Yl)){typeof Yl=="function"&&(Yl=zl[Fl]=Kv.unbox(Yl));var o0=e1(Yl,null);Ol=Ol||o0.thisDep,Ml=Ml||o0.propDep,Bl=Bl||o0.contextDep}else{switch(Vl(Ll,".",Fl,"="),typeof Yl){case"number":Vl(Yl);break;case"string":Vl('"',Yl,'"');break;case"object":Array.isArray(Yl)&&Vl("[",Yl.join(),"]");break;default:Vl($l.link(Yl));break}Vl(";")}});function El(Fl,Yl){Dl.forEach(function(o0){var s0=zl[o0];if(Kv.isDynamic(s0)){var n0=Fl.invoke(Yl,s0);Yl(Ll,".",o0,"=",n0,";")}})}xl.dynamic[Pl]=new Kv.DynamicVariable(Gy,{thisDep:Ol,contextDep:Bl,propDep:Ml,ref:Ll,append:El}),delete xl.static[Pl]}function Iv($l,xl,Pl,zl,Vl){var Dl=cv();Dl.stats=Dl.link(Vl),Object.keys(xl.static).forEach(function(Bl){H0(Dl,xl,Bl)}),Aw.forEach(function(Bl){H0(Dl,$l,Bl)});var Ol=Sp($l,xl,Pl,zl,Dl);return gp(Dl,Ol),_f(Dl,Ol),Cl(Dl,Ol),as(Dl.compile(),{destroy:function(){Ol.shader.program.destroy()}})}return{next:z0,current:h0,procs:function(){var $l=cv(),xl=$l.proc("poll"),Pl=$l.proc("refresh"),zl=$l.block();xl(zl),Pl(zl);var Vl=$l.shared,Dl=Vl.gl,Ol=Vl.next,Bl=Vl.current;zl(Bl,".dirty=false;"),bp($l,xl),bp($l,Pl,null,!0);var Ml;$0&&(Ml=$l.link($0)),Al.oes_vertex_array_object&&Pl($l.link(Al.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Ll=0;Ll<Jl.maxAttributes;++Ll){var El=Pl.def(Vl.attributes,"[",Ll,"]"),Fl=$l.cond(El,".buffer");Fl.then(Dl,".enableVertexAttribArray(",Ll,");",Dl,".bindBuffer(",H2,",",El,".buffer.buffer);",Dl,".vertexAttribPointer(",Ll,",",El,".size,",El,".type,",El,".normalized,",El,".stride,",El,".offset);").else(Dl,".disableVertexAttribArray(",Ll,");",Dl,".vertexAttrib4f(",Ll,",",El,".x,",El,".y,",El,".z,",El,".w);",El,".buffer=null;"),Pl(Fl),$0&&Pl(Ml,".vertexAttribDivisorANGLE(",Ll,",",El,".divisor);")}return Pl($l.shared.vao,".currentVAO=null;",$l.shared.vao,".setVAO(",$l.shared.vao,".targetVAO);"),Object.keys(L0).forEach(function(Yl){var o0=L0[Yl],s0=zl.def(Ol,".",Yl),n0=$l.block();n0("if(",s0,"){",Dl,".enable(",o0,")}else{",Dl,".disable(",o0,")}",Bl,".",Yl,"=",s0,";"),Pl(n0),xl("if(",s0,"!==",Bl,".",Yl,"){",n0,"}")}),Object.keys(v0).forEach(function(Yl){var o0=v0[Yl],s0=h0[Yl],n0,w0,J0=$l.block();if(J0(Dl,".",o0,"("),vp(s0)){var _v=s0.length;n0=$l.global.def(Ol,".",Yl),w0=$l.global.def(Bl,".",Yl),J0(Cp(_v,function(X0){return n0+"["+X0+"]"}),");",Cp(_v,function(X0){return w0+"["+X0+"]="+n0+"["+X0+"];"}).join("")),xl("if(",Cp(_v,function(X0){return n0+"["+X0+"]!=="+w0+"["+X0+"]"}).join("||"),"){",J0,"}")}else n0=zl.def(Ol,".",Yl),w0=zl.def(Bl,".",Yl),J0(n0,");",Bl,".",Yl,"=",n0,";"),xl("if(",n0,"!==",w0,"){",J0,"}");Pl(J0)}),$l.compile()}(),compile:Iv}}function Uw(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var qE=34918,fv=34919,px=35007,Hw=function(Ws,Qs){if(!Qs.ext_disjoint_timer_query)return null;var Al=[];function Jl(){return Al.pop()||Qs.ext_disjoint_timer_query.createQueryEXT()}function u0($0){Al.push($0)}var Ql=[];function e0($0){var F0=Jl();Qs.ext_disjoint_timer_query.beginQueryEXT(px,F0),Ql.push(F0),_0(Ql.length-1,Ql.length,$0)}function m0(){Qs.ext_disjoint_timer_query.endQueryEXT(px)}function x0(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var C0=[];function E0(){return C0.pop()||new x0}function T0($0){C0.push($0)}var O0=[];function _0($0,F0,h0){var z0=E0();z0.startQueryIndex=$0,z0.endQueryIndex=F0,z0.sum=0,z0.stats=h0,O0.push(z0)}var A0=[],Hl=[];function t0(){var $0,F0,h0=Ql.length;if(h0!==0){Hl.length=Math.max(Hl.length,h0+1),A0.length=Math.max(A0.length,h0+1),A0[0]=0,Hl[0]=0;var z0=0;for($0=0,F0=0;F0<Ql.length;++F0){var p0=Ql[F0];Qs.ext_disjoint_timer_query.getQueryObjectEXT(p0,fv)?(z0+=Qs.ext_disjoint_timer_query.getQueryObjectEXT(p0,qE),u0(p0)):Ql[$0++]=p0,A0[F0+1]=z0,Hl[F0+1]=$0}for(Ql.length=$0,$0=0,F0=0;F0<O0.length;++F0){var L0=O0[F0],v0=L0.startQueryIndex,I0=L0.endQueryIndex;L0.sum+=A0[I0]-A0[v0];var ev=Hl[v0],hv=Hl[I0];hv===ev?(L0.stats.gpuTime+=L0.sum/1e6,T0(L0)):(L0.startQueryIndex=ev,L0.endQueryIndex=hv,O0[$0++]=L0)}O0.length=$0}}return{beginQuery:e0,endQuery:m0,pushScopeStats:_0,update:t0,getNumPendingQueries:function(){return Ql.length},clear:function(){Al.push.apply(Al,Ql);for(var $0=0;$0<Al.length;$0++)Qs.ext_disjoint_timer_query.deleteQueryEXT(Al[$0]);Ql.length=0,Al.length=0},restore:function(){Ql.length=0,Al.length=0}}},Ww=16384,Vw=256,Yw=1024,Xw=34962,gx="webglcontextlost",KE="webglcontextrestored",Tv=1,qw=2,Kw=3;function Fv(Ws,Qs){for(var Al=0;Al<Ws.length;++Al)if(Ws[Al]===Qs)return Al;return-1}function Zw(Ws){var Qs=A2(Ws);if(!Qs)return null;var Al=Qs.gl,Jl=Al.getContextAttributes(),u0=Al.isContextLost(),Ql=I2(Al,Qs);if(!Ql)return null;var e0=tp(),m0=Uw(),x0=Ql.extensions,C0=Hw(Al,x0),E0=ap(),T0=Al.drawingBufferWidth,O0=Al.drawingBufferHeight,_0={tick:0,time:0,viewportWidth:T0,viewportHeight:O0,framebufferWidth:T0,framebufferHeight:O0,drawingBufferWidth:T0,drawingBufferHeight:O0,pixelRatio:Qs.pixelRatio},A0={},Hl={elements:null,primitive:4,count:-1,offset:0,instances:-1},t0=xS(Al,x0),$0=LS(Al,m0,Qs,h0),F0=xw(Al,x0,t0,m0,$0);function h0(_d){return F0.destroyBuffer(_d)}var z0=WS(Al,x0,$0,m0),p0=$w(Al,e0,m0,Qs),L0=B2(Al,x0,t0,function(){ev.procs.poll()},_0,m0,Qs),v0=lE(Al,x0,t0,m0,Qs),I0=yw(Al,x0,t0,L0,v0,m0),ev=zw(Al,e0,x0,t0,$0,z0,L0,I0,A0,F0,p0,Hl,_0,C0,Qs),hv=Cw(Al,I0,ev.procs.poll,_0,Jl,x0,t0),N0=ev.next,S0=Al.canvas,c0=[],cv=[],mv=[],Y0=[Qs.onDestroy],Av=null;function vv(){if(c0.length===0){C0&&C0.update(),Av=null;return}Av=Xv.next(vv),Np();for(var _d=c0.length-1;_d>=0;--_d){var Ov=c0[_d];Ov&&Ov(_0,null,0)}Al.flush(),C0&&C0.update()}function bv(){!Av&&c0.length>0&&(Av=Xv.next(vv))}function Uv(){Av&&(Xv.cancel(vv),Av=null)}function xp(_d){_d.preventDefault(),u0=!0,Uv(),cv.forEach(function(Ov){Ov()})}function Ip(_d){Al.getError(),u0=!1,Ql.restore(),p0.restore(),$0.restore(),L0.restore(),v0.restore(),I0.restore(),F0.restore(),C0&&C0.restore(),ev.procs.refresh(),bv(),mv.forEach(function(Ov){Ov()})}S0&&(S0.addEventListener(gx,xp,!1),S0.addEventListener(KE,Ip,!1));function Nv(){c0.length=0,Uv(),S0&&(S0.removeEventListener(gx,xp),S0.removeEventListener(KE,Ip)),p0.clear(),I0.clear(),v0.clear(),L0.clear(),z0.clear(),$0.clear(),F0.clear(),C0&&C0.clear(),Y0.forEach(function(_d){_d()})}function Ep(_d){Xs(!!_d,"invalid args to regl({...})"),Xs.type(_d,"object","invalid args to regl({...})");function Ov(Vl){var Dl=as({},Vl);delete Dl.uniforms,delete Dl.attributes,delete Dl.context,delete Dl.vao,"stencil"in Dl&&Dl.stencil.op&&(Dl.stencil.opBack=Dl.stencil.opFront=Dl.stencil.op,delete Dl.stencil.op);function Ol(Bl){if(Bl in Dl){var Ml=Dl[Bl];delete Dl[Bl],Object.keys(Ml).forEach(function(Ll){Dl[Bl+"."+Ll]=Ml[Ll]})}}return Ol("blend"),Ol("depth"),Ol("cull"),Ol("stencil"),Ol("polygonOffset"),Ol("scissor"),Ol("sample"),"vao"in Vl&&(Dl.vao=Vl.vao),Dl}function Gv(Vl,Dl){var Ol={},Bl={};return Object.keys(Vl).forEach(function(Ml){var Ll=Vl[Ml];if(Kv.isDynamic(Ll)){Bl[Ml]=Kv.unbox(Ll,Ml);return}else if(Dl&&Array.isArray(Ll)){for(var El=0;El<Ll.length;++El)if(Kv.isDynamic(Ll[El])){Bl[Ml]=Kv.unbox(Ll,Ml);return}}Ol[Ml]=Ll}),{dynamic:Bl,static:Ol}}var gp=Gv(_d.context||{},!0),q1=Gv(_d.uniforms||{},!0),l2=Gv(_d.attributes||{},!1),Cl=Gv(Ov(_d),!1),_f={gpuTime:0,cpuTime:0,count:0},Zl=ev.compile(Cl,l2,q1,gp,_f),H0=Zl.draw,Iv=Zl.batch,$l=Zl.scope,xl=[];function Pl(Vl){for(;xl.length<Vl;)xl.push(null);return xl}function zl(Vl,Dl){var Ol;if(u0&&Xs.raise("context lost"),typeof Vl=="function")return $l.call(this,null,Vl,0);if(typeof Dl=="function")if(typeof Vl=="number")for(Ol=0;Ol<Vl;++Ol)$l.call(this,null,Dl,Ol);else if(Array.isArray(Vl))for(Ol=0;Ol<Vl.length;++Ol)$l.call(this,Vl[Ol],Dl,Ol);else return $l.call(this,Vl,Dl,0);else if(typeof Vl=="number"){if(Vl>0)return Iv.call(this,Pl(Vl|0),Vl|0)}else if(Array.isArray(Vl)){if(Vl.length)return Iv.call(this,Vl,Vl.length)}else return H0.call(this,Vl)}return as(zl,{stats:_f,destroy:function(){Zl.destroy()}})}var op=I0.setFBO=Ep({framebuffer:Kv.define.call(null,Tv,"framebuffer")});function Sp(_d,Ov){var Gv=0;ev.procs.poll();var gp=Ov.color;gp&&(Al.clearColor(+gp[0]||0,+gp[1]||0,+gp[2]||0,+gp[3]||0),Gv|=Ww),"depth"in Ov&&(Al.clearDepth(+Ov.depth),Gv|=Vw),"stencil"in Ov&&(Al.clearStencil(Ov.stencil|0),Gv|=Yw),Xs(!!Gv,"called regl.clear with no buffer specified"),Al.clear(Gv)}function Mp(_d){if(Xs(typeof _d=="object"&&_d,"regl.clear() takes an object as input"),"framebuffer"in _d)if(_d.framebuffer&&_d.framebuffer_reglType==="framebufferCube")for(var Ov=0;Ov<6;++Ov)op(as({framebuffer:_d.framebuffer.faces[Ov]},_d),Sp);else op(_d,Sp);else Sp(null,_d)}function bp(_d){Xs.type(_d,"function","regl.frame() callback must be a function"),c0.push(_d);function Ov(){var Gv=Fv(c0,_d);Xs(Gv>=0,"cannot cancel a frame twice");function gp(){var q1=Fv(c0,gp);c0[q1]=c0[c0.length-1],c0.length-=1,c0.length<=0&&Uv()}c0[Gv]=gp}return bv(),{cancel:Ov}}function kp(){var _d=N0.viewport,Ov=N0.scissor_box;_d[0]=_d[1]=Ov[0]=Ov[1]=0,_0.viewportWidth=_0.framebufferWidth=_0.drawingBufferWidth=_d[2]=Ov[2]=Al.drawingBufferWidth,_0.viewportHeight=_0.framebufferHeight=_0.drawingBufferHeight=_d[3]=Ov[3]=Al.drawingBufferHeight}function Np(){_0.tick+=1,_0.time=dv(),kp(),ev.procs.poll()}function pp(){L0.refresh(),kp(),ev.procs.refresh(),C0&&C0.update()}function dv(){return(ap()-E0)/1e3}pp();function up(_d,Ov){Xs.type(Ov,"function","listener callback must be a function");var Gv;switch(_d){case"frame":return bp(Ov);case"lost":Gv=cv;break;case"restore":Gv=mv;break;case"destroy":Gv=Y0;break;default:Xs.raise("invalid event, must be one of frame,lost,restore,destroy")}return Gv.push(Ov),{cancel:function(){for(var gp=0;gp<Gv.length;++gp)if(Gv[gp]===Ov){Gv[gp]=Gv[Gv.length-1],Gv.pop();return}}}}var Dv=as(Ep,{clear:Mp,prop:Kv.define.bind(null,Tv),context:Kv.define.bind(null,qw),this:Kv.define.bind(null,Kw),draw:Ep({}),buffer:function(_d){return $0.create(_d,Xw,!1,!1)},elements:function(_d){return z0.create(_d,!1)},texture:L0.create2D,cube:L0.createCube,renderbuffer:v0.create,framebuffer:I0.create,framebufferCube:I0.createCube,vao:F0.createVAO,attributes:Jl,frame:bp,on:up,limits:t0,hasExtension:function(_d){return t0.extensions.indexOf(_d.toLowerCase())>=0},read:hv,destroy:Nv,_gl:Al,_refresh:pp,poll:function(){Np(),C0&&C0.update()},now:dv,stats:m0});return Qs.onDone(null,Dv),Dv}return Zw})})(regl$1);var reglExports=regl$1.exports;const regl=getDefaultExportFromCjs(reglExports);var ReglAttribute=function(){function ns(ts,rs){_classCallCheck$1(this,ns),this.attribute=void 0,this.buffer=void 0;var as=rs.buffer,os=rs.offset,is=rs.stride,us=rs.normalized,ls=rs.size,fs=rs.divisor;this.buffer=as,this.attribute={buffer:as.get(),offset:os||0,stride:is||0,normalized:us||!1,divisor:fs||0},ls&&(this.attribute.size=ls)}return _createClass$1(ns,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(rs){this.buffer.subData(rs)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),ns}(),_primitiveMap,_usageMap,_dataTypeMap,_formatMap,_mipmapMap,_filterMap,_wrapModeMap,_colorSpaceMap,_depthFuncMap,_blendEquationMap,_blendFuncMap,_stencilFuncMap,_stencilOpMap,_cullFaceMap,primitiveMap=(_primitiveMap={},_defineProperty$2(_primitiveMap,gl.POINTS,"points"),_defineProperty$2(_primitiveMap,gl.LINES,"lines"),_defineProperty$2(_primitiveMap,gl.LINE_LOOP,"line loop"),_defineProperty$2(_primitiveMap,gl.LINE_STRIP,"line strip"),_defineProperty$2(_primitiveMap,gl.TRIANGLES,"triangles"),_defineProperty$2(_primitiveMap,gl.TRIANGLE_FAN,"triangle fan"),_defineProperty$2(_primitiveMap,gl.TRIANGLE_STRIP,"triangle strip"),_primitiveMap),usageMap=(_usageMap={},_defineProperty$2(_usageMap,gl.STATIC_DRAW,"static"),_defineProperty$2(_usageMap,gl.DYNAMIC_DRAW,"dynamic"),_defineProperty$2(_usageMap,gl.STREAM_DRAW,"stream"),_usageMap),dataTypeMap=(_dataTypeMap={},_defineProperty$2(_dataTypeMap,gl.BYTE,"int8"),_defineProperty$2(_dataTypeMap,gl.UNSIGNED_INT,"int16"),_defineProperty$2(_dataTypeMap,gl.INT,"int32"),_defineProperty$2(_dataTypeMap,gl.UNSIGNED_BYTE,"uint8"),_defineProperty$2(_dataTypeMap,gl.UNSIGNED_SHORT,"uint16"),_defineProperty$2(_dataTypeMap,gl.UNSIGNED_INT,"uint32"),_defineProperty$2(_dataTypeMap,gl.FLOAT,"float"),_dataTypeMap),formatMap=(_formatMap={},_defineProperty$2(_formatMap,gl.ALPHA,"alpha"),_defineProperty$2(_formatMap,gl.LUMINANCE,"luminance"),_defineProperty$2(_formatMap,gl.LUMINANCE_ALPHA,"luminance alpha"),_defineProperty$2(_formatMap,gl.RGB,"rgb"),_defineProperty$2(_formatMap,gl.RGBA,"rgba"),_defineProperty$2(_formatMap,gl.RGBA4,"rgba4"),_defineProperty$2(_formatMap,gl.RGB5_A1,"rgb5 a1"),_defineProperty$2(_formatMap,gl.RGB565,"rgb565"),_defineProperty$2(_formatMap,gl.DEPTH_COMPONENT,"depth"),_defineProperty$2(_formatMap,gl.DEPTH_STENCIL,"depth stencil"),_formatMap),mipmapMap=(_mipmapMap={},_defineProperty$2(_mipmapMap,gl.DONT_CARE,"dont care"),_defineProperty$2(_mipmapMap,gl.NICEST,"nice"),_defineProperty$2(_mipmapMap,gl.FASTEST,"fast"),_mipmapMap),filterMap=(_filterMap={},_defineProperty$2(_filterMap,gl.NEAREST,"nearest"),_defineProperty$2(_filterMap,gl.LINEAR,"linear"),_defineProperty$2(_filterMap,gl.LINEAR_MIPMAP_LINEAR,"mipmap"),_defineProperty$2(_filterMap,gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),_defineProperty$2(_filterMap,gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),_defineProperty$2(_filterMap,gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),_filterMap),wrapModeMap=(_wrapModeMap={},_defineProperty$2(_wrapModeMap,gl.REPEAT,"repeat"),_defineProperty$2(_wrapModeMap,gl.CLAMP_TO_EDGE,"clamp"),_defineProperty$2(_wrapModeMap,gl.MIRRORED_REPEAT,"mirror"),_wrapModeMap),colorSpaceMap=(_colorSpaceMap={},_defineProperty$2(_colorSpaceMap,gl.NONE,"none"),_defineProperty$2(_colorSpaceMap,gl.BROWSER_DEFAULT_WEBGL,"browser"),_colorSpaceMap),depthFuncMap=(_depthFuncMap={},_defineProperty$2(_depthFuncMap,gl.NEVER,"never"),_defineProperty$2(_depthFuncMap,gl.ALWAYS,"always"),_defineProperty$2(_depthFuncMap,gl.LESS,"less"),_defineProperty$2(_depthFuncMap,gl.LEQUAL,"lequal"),_defineProperty$2(_depthFuncMap,gl.GREATER,"greater"),_defineProperty$2(_depthFuncMap,gl.GEQUAL,"gequal"),_defineProperty$2(_depthFuncMap,gl.EQUAL,"equal"),_defineProperty$2(_depthFuncMap,gl.NOTEQUAL,"notequal"),_depthFuncMap),blendEquationMap=(_blendEquationMap={},_defineProperty$2(_blendEquationMap,gl.FUNC_ADD,"add"),_defineProperty$2(_blendEquationMap,gl.MIN_EXT,"min"),_defineProperty$2(_blendEquationMap,gl.MAX_EXT,"max"),_defineProperty$2(_blendEquationMap,gl.FUNC_SUBTRACT,"subtract"),_defineProperty$2(_blendEquationMap,gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),_blendEquationMap),blendFuncMap=(_blendFuncMap={},_defineProperty$2(_blendFuncMap,gl.ZERO,"zero"),_defineProperty$2(_blendFuncMap,gl.ONE,"one"),_defineProperty$2(_blendFuncMap,gl.SRC_COLOR,"src color"),_defineProperty$2(_blendFuncMap,gl.ONE_MINUS_SRC_COLOR,"one minus src color"),_defineProperty$2(_blendFuncMap,gl.SRC_ALPHA,"src alpha"),_defineProperty$2(_blendFuncMap,gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),_defineProperty$2(_blendFuncMap,gl.DST_COLOR,"dst color"),_defineProperty$2(_blendFuncMap,gl.ONE_MINUS_DST_COLOR,"one minus dst color"),_defineProperty$2(_blendFuncMap,gl.DST_ALPHA,"dst alpha"),_defineProperty$2(_blendFuncMap,gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),_defineProperty$2(_blendFuncMap,gl.CONSTANT_COLOR,"constant color"),_defineProperty$2(_blendFuncMap,gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),_defineProperty$2(_blendFuncMap,gl.CONSTANT_ALPHA,"constant alpha"),_defineProperty$2(_blendFuncMap,gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),_defineProperty$2(_blendFuncMap,gl.SRC_ALPHA_SATURATE,"src alpha saturate"),_blendFuncMap),stencilFuncMap=(_stencilFuncMap={},_defineProperty$2(_stencilFuncMap,gl.NEVER,"never"),_defineProperty$2(_stencilFuncMap,gl.ALWAYS,"always"),_defineProperty$2(_stencilFuncMap,gl.LESS,"less"),_defineProperty$2(_stencilFuncMap,gl.LEQUAL,"lequal"),_defineProperty$2(_stencilFuncMap,gl.GREATER,"greater"),_defineProperty$2(_stencilFuncMap,gl.GEQUAL,"gequal"),_defineProperty$2(_stencilFuncMap,gl.EQUAL,"equal"),_defineProperty$2(_stencilFuncMap,gl.NOTEQUAL,"notequal"),_stencilFuncMap),stencilOpMap=(_stencilOpMap={},_defineProperty$2(_stencilOpMap,gl.ZERO,"zero"),_defineProperty$2(_stencilOpMap,gl.KEEP,"keep"),_defineProperty$2(_stencilOpMap,gl.REPLACE,"replace"),_defineProperty$2(_stencilOpMap,gl.INVERT,"invert"),_defineProperty$2(_stencilOpMap,gl.INCR,"increment"),_defineProperty$2(_stencilOpMap,gl.DECR,"decrement"),_defineProperty$2(_stencilOpMap,gl.INCR_WRAP,"increment wrap"),_defineProperty$2(_stencilOpMap,gl.DECR_WRAP,"decrement wrap"),_stencilOpMap),cullFaceMap=(_cullFaceMap={},_defineProperty$2(_cullFaceMap,gl.FRONT,"front"),_defineProperty$2(_cullFaceMap,gl.BACK,"back"),_cullFaceMap),ReglBuffer=function(){function ns(ts,rs){_classCallCheck$1(this,ns),this.buffer=void 0;var as=rs.data,os=rs.usage,is=rs.type;this.buffer=ts.buffer({data:as,usage:usageMap[os||gl.STATIC_DRAW],type:dataTypeMap[is||gl.UNSIGNED_BYTE]})}return _createClass$1(ns,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(rs){var as=rs.data,os=rs.offset;this.buffer.subdata(as,os)}}]),ns}();function _arrayLikeToArray$1(ns,ts){(ts==null||ts>ns.length)&&(ts=ns.length);for(var rs=0,as=new Array(ts);rs<ts;rs++)as[rs]=ns[rs];return as}function _arrayWithoutHoles$1(ns){if(Array.isArray(ns))return _arrayLikeToArray$1(ns)}function _iterableToArray$1(ns){if(typeof Symbol<"u"&&ns[Symbol.iterator]!=null||ns["@@iterator"]!=null)return Array.from(ns)}function _unsupportedIterableToArray$1(ns,ts){if(ns){if(typeof ns=="string")return _arrayLikeToArray$1(ns,ts);var rs=Object.prototype.toString.call(ns).slice(8,-1);if(rs==="Object"&&ns.constructor&&(rs=ns.constructor.name),rs==="Map"||rs==="Set")return Array.from(ns);if(rs==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rs))return _arrayLikeToArray$1(ns,ts)}}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray$1(ns){return _arrayWithoutHoles$1(ns)||_iterableToArray$1(ns)||_unsupportedIterableToArray$1(ns)||_nonIterableSpread$1()}function ownKeys$2(ns,ts){var rs=Object.keys(ns);if(Object.getOwnPropertySymbols){var as=Object.getOwnPropertySymbols(ns);ts&&(as=as.filter(function(os){return Object.getOwnPropertyDescriptor(ns,os).enumerable})),rs.push.apply(rs,as)}return rs}function _objectSpread$1(ns){for(var ts=1;ts<arguments.length;ts++){var rs=arguments[ts]!=null?arguments[ts]:{};ts%2?ownKeys$2(Object(rs),!0).forEach(function(as){_defineProperty$2(ns,as,rs[as])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ns,Object.getOwnPropertyDescriptors(rs)):ownKeys$2(Object(rs)).forEach(function(as){Object.defineProperty(ns,as,Object.getOwnPropertyDescriptor(rs,as))})}return ns}var quadVert=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,textureId=0,ReglComputeModel=function(){function ns(ts,rs){var as=this;_classCallCheck$1(this,ns),this.reGl=ts,this.context=rs,this.entity=createEntity(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var os={};this.context.uniforms.forEach(function(hs){var vs=hs.name,gs=hs.type,ys=hs.data,xs=hs.isReferer,ms=hs.storageClass;if(ms===STORAGE_CLASS.StorageBuffer){if(xs)as.textureCache[vs]={data:void 0},os["".concat(vs,"Size")]=function(){return ys.compiledBundle.context.output.textureSize};else{as.textureCache[vs]=as.calcDataTexture(vs,gs,ys);var Ss=as.textureCache[vs],Ms=Ss.textureWidth,$s=Ss.isOutput;os["".concat(vs,"Size")]=[Ms,Ms],$s&&(as.outputTextureName=vs,as.context.needPingpong&&(as.outputTextureName="".concat(vs,"Output"),as.textureCache[as.outputTextureName]=as.calcDataTexture(vs,gs,ys)))}os[vs]=function(){return as.textureCache[vs].texture}}else if(ms===STORAGE_CLASS.Uniform){if(ys&&(Array.isArray(ys)||_isTypedArray(ys))&&ys.length>16)throw new Error("invalid data type ".concat(gs));os[vs]=function(){return hs.data}}});var is=this.getOuputDataTexture(),us=is.textureWidth,ls=is.texelCount;os.u_OutputTextureSize=[us,us],os.u_OutputTexelCount=ls,this.context.output.textureSize=[us,us];var fs={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:os,vert:quadVert,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(fs)}return _createClass$1(ns,[{key:"run",value:function(){var rs=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){rs.computeCommand()})}},{key:"readData",value:function(){var ts=_asyncToGenerator(_regeneratorRuntime.mark(function as(){var os=this,is,us,ls,fs,hs,vs,gs,ys;return _regeneratorRuntime.wrap(function(ms){for(;;)switch(ms.prev=ms.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){is=os.reGl.read()}),!is){ms.next=6;break}if(us=this.getOuputDataTexture(),ls=us.originalDataLength,fs=us.elementsPerTexel,hs=us.typedArrayConstructor,vs=hs===void 0?Float32Array:hs,gs=[],fs!==4)for(ys=0;ys<is.length;ys+=4)fs===1?gs.push(is[ys]):fs===2?gs.push(is[ys],is[ys+1]):gs.push(is[ys],is[ys+1],is[ys+2]);else gs=is;return ms.abrupt("return",new vs(gs.slice(0,ls)));case 6:return ms.abrupt("return",new Float32Array);case 7:case"end":return ms.stop()}},as,this)}));function rs(){return ts.apply(this,arguments)}return rs}()},{key:"confirmInput",value:function(rs,as){var os;this.entity===rs.entity?(this.dynamicPingpong=!0,os=this):os=rs,this.textureCache[as].id=os.getOuputDataTexture().id,this.textureCache[as].texture=os.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(rs,as){var os=this.context.uniforms.find(function(fs){var hs=fs.name;return hs===rs});if(os){var is=this.calcDataTexture(rs,os.type,as),us=is.texture,ls=is.data;this.textureCache[rs].data=ls,this.textureCache[rs].texture=us}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var rs=this.context.output.name;this.textureCache[rs].id=this.getOuputDataTexture().id,this.textureCache[rs].texture=this.getOuputDataTexture().texture}var as=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=as}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var rs=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=rs}},{key:"cloneDataTexture",value:function(rs){var as=rs.data,os=rs.textureWidth;return _objectSpread$1(_objectSpread$1({},rs),{},{id:textureId++,texture:this.reGl.texture({width:os,height:os,data:as,type:"float"})})}},{key:"calcDataTexture",value:function(rs,as,os){var is=1;as===AST_TOKEN_TYPES.Vector4FloatArray&&(is=4);for(var us=[],ls=0;ls<os.length;ls+=is)is===1?us.push(os[ls],0,0,0):is===2?us.push(os[ls],os[ls+1],0,0):is===3?us.push(os[ls],os[ls+1],os[ls+2],0):is===4&&us.push(os[ls],os[ls+1],os[ls+2],os[ls+3]);var fs=os.length,hs=Math.ceil(fs/is),vs=Math.ceil(Math.sqrt(hs)),gs=vs*vs;hs<gs&&us.push.apply(us,_toConsumableArray$1(new Array((gs-hs)*4).fill(0)));var ys=this.reGl.texture({width:vs,height:vs,data:us,type:"float"});return{id:textureId++,data:us,originalDataLength:fs,typedArrayConstructor:_isTypedArray(os)?os.constructor:void 0,textureWidth:vs,texture:ys,texelCount:hs,elementsPerTexel:is,isOutput:rs===this.context.output.name}}}]),ns}(),ReglElements=function(){function ns(ts,rs){_classCallCheck$1(this,ns),this.elements=void 0;var as=rs.data,os=rs.usage,is=rs.type,us=rs.count;this.elements=ts.elements({data:as,usage:usageMap[os||gl.STATIC_DRAW],type:dataTypeMap[is||gl.UNSIGNED_BYTE],count:us})}return _createClass$1(ns,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(rs){var as=rs.data;this.elements.subdata(as)}},{key:"destroy",value:function(){this.elements.destroy()}}]),ns}(),ReglFramebuffer=function(){function ns(ts,rs){_classCallCheck$1(this,ns),this.framebuffer=void 0;var as=rs.width,os=rs.height,is=rs.color,us=rs.colors;rs.depth,rs.stencil;var ls={width:as,height:os};Array.isArray(us)&&(ls.colors=us.map(function(fs){return fs.get()})),is&&typeof is!="boolean"&&(ls.color=is.get()),this.framebuffer=ts.framebuffer(ls)}return _createClass$1(ns,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(rs){var as=rs.width,os=rs.height;this.framebuffer.resize(as,os)}}]),ns}();function overArg$1(ns,ts){return function(rs){return ns(ts(rs))}}var _overArg=overArg$1,overArg=_overArg,getPrototype$1=overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype$1,baseGetTag=_baseGetTag,getPrototype=_getPrototype,isObjectLike=isObjectLike_1,objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$1=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(ns){if(!isObjectLike(ns)||baseGetTag(ns)!=objectTag)return!1;var ts=getPrototype(ns);if(ts===null)return!0;var rs=hasOwnProperty$1.call(ts,"constructor")&&ts.constructor;return typeof rs=="function"&&rs instanceof rs&&funcToString.call(rs)==objectCtorString}var isPlainObject_1=isPlainObject;const _isPlainObject=getDefaultExportFromCjs(isPlainObject_1);function extractUniforms(ns){var ts={};return Object.keys(ns).forEach(function(rs){extractUniformsRecursively(rs,ns[rs],ts,"")}),ts}function extractUniformsRecursively(ns,ts,rs,as){if(ts===null||typeof ts=="number"||typeof ts=="boolean"||Array.isArray(ts)&&typeof ts[0]=="number"||_isTypedArray(ts)||ts===""||ts.resize!==void 0){rs["".concat(as&&as+".").concat(ns)]=ts;return}_isPlainObject(ts)&&Object.keys(ts).forEach(function(os){extractUniformsRecursively(os,ts[os],rs,"".concat(as&&as+".").concat(ns))}),Array.isArray(ts)&&ts.forEach(function(os,is){Object.keys(os).forEach(function(us){extractUniformsRecursively(us,os[us],rs,"".concat(as&&as+".").concat(ns,"[").concat(is,"]"))})})}function ownKeys$1(ns,ts){var rs=Object.keys(ns);if(Object.getOwnPropertySymbols){var as=Object.getOwnPropertySymbols(ns);ts&&(as=as.filter(function(os){return Object.getOwnPropertyDescriptor(ns,os).enumerable})),rs.push.apply(rs,as)}return rs}function _objectSpread(ns){for(var ts=1;ts<arguments.length;ts++){var rs=arguments[ts]!=null?arguments[ts]:{};ts%2?ownKeys$1(Object(rs),!0).forEach(function(as){_defineProperty$2(ns,as,rs[as])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ns,Object.getOwnPropertyDescriptors(rs)):ownKeys$1(Object(rs)).forEach(function(as){Object.defineProperty(ns,as,Object.getOwnPropertyDescriptor(rs,as))})}return ns}var ReglModel=function(){function ns(ts,rs){_classCallCheck$1(this,ns),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=ts;var as=rs.vs,os=rs.fs,is=rs.defines,us=rs.attributes,ls=rs.uniforms,fs=rs.primitive,hs=rs.count,vs=rs.elements,gs=rs.depth,ys=rs.blend,xs=rs.stencil,ms=rs.cull,Ss=rs.instances,Ms=rs.scissor,$s=rs.viewport,bs={};ls&&(this.uniforms=extractUniforms(ls),Object.keys(ls).forEach(function(ks){bs[ks]=ts.prop(ks)}));var Cs={};Object.keys(us).forEach(function(ks){Cs[ks]=us[ks].get()});var As=is&&this.generateDefines(is)||"",Is={attributes:Cs,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(As,`
`).concat(os),uniforms:bs,vert:`
`.concat(As,`
`).concat(as),primitive:primitiveMap[fs===void 0?gl.TRIANGLES:fs]};Ss&&(Is.instances=Ss),hs&&(Is.count=hs),vs&&(Is.elements=vs.get()),Ms&&(Is.scissor=Ms),$s&&(Is.viewport=$s),this.initDepthDrawParams({depth:gs},Is),this.initBlendDrawParams({blend:ys},Is),this.initStencilDrawParams({stencil:xs},Is),this.initCullDrawParams({cull:ms},Is),this.drawCommand=ts(Is)}return _createClass$1(ns,[{key:"addUniforms",value:function(rs){this.uniforms=_objectSpread(_objectSpread({},this.uniforms),extractUniforms(rs))}},{key:"draw",value:function(rs){var as=_objectSpread(_objectSpread({},this.uniforms),extractUniforms(rs.uniforms||{})),os={};Object.keys(as).forEach(function(is){var us=_typeof$6(as[is]);us==="boolean"||us==="number"||Array.isArray(as[is])||as[is].BYTES_PER_ELEMENT?os[is]=as[is]:us==="string"||(os[is]=as[is].get())}),this.drawCommand(os)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(rs,as){var os=rs.depth;os&&(as.depth={enable:os.enable===void 0?!0:!!os.enable,mask:os.mask===void 0?!0:!!os.mask,func:depthFuncMap[os.func||gl.LESS],range:os.range||[0,1]})}},{key:"initBlendDrawParams",value:function(rs,as){var os=rs.blend;if(os){var is=os.enable,us=os.func,ls=os.equation,fs=os.color,hs=fs===void 0?[0,0,0,0]:fs;as.blend={enable:!!is,func:{srcRGB:blendFuncMap[us&&us.srcRGB||gl.SRC_ALPHA],srcAlpha:blendFuncMap[us&&us.srcAlpha||gl.SRC_ALPHA],dstRGB:blendFuncMap[us&&us.dstRGB||gl.ONE_MINUS_SRC_ALPHA],dstAlpha:blendFuncMap[us&&us.dstAlpha||gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:blendEquationMap[ls&&ls.rgb||gl.FUNC_ADD],alpha:blendEquationMap[ls&&ls.alpha||gl.FUNC_ADD]},color:hs}}}},{key:"initStencilDrawParams",value:function(rs,as){var os=rs.stencil;if(os){var is=os.enable,us=os.mask,ls=us===void 0?-1:us,fs=os.func,hs=fs===void 0?{cmp:gl.ALWAYS,ref:0,mask:-1}:fs,vs=os.opFront,gs=vs===void 0?{fail:gl.KEEP,zfail:gl.KEEP,zpass:gl.KEEP}:vs,ys=os.opBack,xs=ys===void 0?{fail:gl.KEEP,zfail:gl.KEEP,zpass:gl.KEEP}:ys;as.stencil={enable:!!is,mask:ls,func:_objectSpread(_objectSpread({},hs),{},{cmp:stencilFuncMap[hs.cmp]}),opFront:{fail:stencilOpMap[gs.fail],zfail:stencilOpMap[gs.zfail],zpass:stencilOpMap[gs.zpass]},opBack:{fail:stencilOpMap[xs.fail],zfail:stencilOpMap[xs.zfail],zpass:stencilOpMap[xs.zpass]}}}}},{key:"initCullDrawParams",value:function(rs,as){var os=rs.cull;if(os){var is=os.enable,us=os.face,ls=us===void 0?gl.BACK:us;as.cull={enable:!!is,face:cullFaceMap[ls]}}}},{key:"generateDefines",value:function(rs){return Object.keys(rs).map(function(as){return"#define ".concat(as," ").concat(Number(rs[as]))}).join(`
`)}}]),ns}(),ReglTexture2D=function(){function ns(ts,rs){_classCallCheck$1(this,ns),this.texture=void 0,this.width=void 0,this.height=void 0;var as=rs.data,os=rs.type,is=os===void 0?gl.UNSIGNED_BYTE:os,us=rs.width,ls=rs.height,fs=rs.flipY,hs=fs===void 0?!1:fs,vs=rs.format,gs=vs===void 0?gl.RGBA:vs,ys=rs.mipmap,xs=ys===void 0?!1:ys,ms=rs.wrapS,Ss=ms===void 0?gl.CLAMP_TO_EDGE:ms,Ms=rs.wrapT,$s=Ms===void 0?gl.CLAMP_TO_EDGE:Ms,bs=rs.aniso,Cs=bs===void 0?0:bs,As=rs.alignment,Is=As===void 0?1:As,ks=rs.premultiplyAlpha,Ps=ks===void 0?!1:ks,Ds=rs.mag,Fs=Ds===void 0?gl.NEAREST:Ds,Rs=rs.min,js=Rs===void 0?gl.NEAREST:Rs,zs=rs.colorSpace,Us=zs===void 0?gl.BROWSER_DEFAULT_WEBGL:zs;this.width=us,this.height=ls;var Ys={width:us,height:ls,type:dataTypeMap[is],format:formatMap[gs],wrapS:wrapModeMap[Ss],wrapT:wrapModeMap[$s],mag:filterMap[Fs],min:filterMap[js],alignment:Is,flipY:hs,colorSpace:colorSpaceMap[Us],premultiplyAlpha:Ps,aniso:Cs};as&&(Ys.data=as),typeof xs=="number"?Ys.mipmap=mipmapMap[xs]:typeof xs=="boolean"&&(Ys.mipmap=xs),this.texture=ts.texture(Ys)}return _createClass$1(ns,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(rs){var as=rs.width,os=rs.height;this.texture.resize(as,os),this.width=as,this.height=os}},{key:"destroy",value:function(){this.texture.destroy()}}]),ns}(),WebGLEngine=function(){function ns(){var ts=this;_classCallCheck$1(this,ns),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var rs=_asyncToGenerator(_regeneratorRuntime.mark(function as(os){return _regeneratorRuntime.wrap(function(us){for(;;)switch(us.prev=us.next){case 0:if(!os.uniforms){us.next=3;break}return us.next=3,Promise.all(Object.keys(os.uniforms).map(function(){var ls=_asyncToGenerator(_regeneratorRuntime.mark(function fs(hs){var vs;return _regeneratorRuntime.wrap(function(ys){for(;;)switch(ys.prev=ys.next){case 0:if(!(os.uniforms[hs]&&os.uniforms[hs].load!==void 0)){ys.next=5;break}return ys.next=3,os.uniforms[hs].load();case 3:vs=ys.sent,os.uniforms[hs]=vs;case 5:case"end":return ys.stop()}},fs)}));return function(fs){return ls.apply(this,arguments)}}()));case 3:return us.abrupt("return",new ReglModel(ts.gl,os));case 4:case"end":return us.stop()}},as)}));return function(as){return rs.apply(this,arguments)}}(),this.createAttribute=function(rs){return new ReglAttribute(ts.gl,rs)},this.createBuffer=function(rs){return new ReglBuffer(ts.gl,rs)},this.createElements=function(rs){return new ReglElements(ts.gl,rs)},this.createTexture2D=function(rs){return new ReglTexture2D(ts.gl,rs)},this.createFramebuffer=function(rs){return new ReglFramebuffer(ts.gl,rs)},this.useFramebuffer=function(rs,as){ts.gl({framebuffer:rs?rs.get():null})(as)},this.createComputeModel=function(){var rs=_asyncToGenerator(_regeneratorRuntime.mark(function as(os){return _regeneratorRuntime.wrap(function(us){for(;;)switch(us.prev=us.next){case 0:return us.abrupt("return",new ReglComputeModel(ts.gl,os));case 1:case"end":return us.stop()}},as)}));return function(as){return rs.apply(this,arguments)}}(),this.clear=function(rs){var as=rs.color,os=rs.depth,is=rs.stencil,us=rs.framebuffer,ls=us===void 0?null:us,fs={color:as,depth:os,stencil:is};fs.framebuffer=ls===null?ls:ls.get(),ts.gl.clear(fs)},this.setScissor=function(rs){ts.gl&&ts.gl._gl&&(rs.enable&&rs.box?(ts.gl._gl.enable(gl.SCISSOR_TEST),ts.gl._gl.scissor(rs.box.x,rs.box.y,rs.box.width,rs.box.height)):ts.gl._gl.disable(gl.SCISSOR_TEST),ts.gl._refresh())},this.viewport=function(rs){var as=rs.x,os=rs.y,is=rs.width,us=rs.height;ts.gl&&ts.gl._gl&&(ts.gl._gl.viewport(as,os,is,us),ts.gl._refresh())},this.readPixels=function(rs){var as=rs.framebuffer,os=rs.x,is=rs.y,us=rs.width,ls=rs.height,fs={x:os,y:is,width:us,height:ls};return as&&(fs.framebuffer=as.get()),ts.gl.read(fs)},this.getCanvas=function(){return ts.$canvas},this.getGLContext=function(){return ts.gl._gl},this.destroy=function(){ts.gl&&(ts.gl.destroy(),ts.inited=!1)}}return _createClass$1(ns,[{key:"init",value:function(){var ts=_asyncToGenerator(_regeneratorRuntime.mark(function as(os){return _regeneratorRuntime.wrap(function(us){for(;;)switch(us.prev=us.next){case 0:if(!this.inited){us.next=2;break}return us.abrupt("return");case 2:return this.$canvas=os.canvas,us.next=5,new Promise(function(ls,fs){regl({canvas:os.canvas,attributes:{alpha:!0,antialias:os.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(vs,gs){(vs||!gs)&&fs(vs),ls(gs)}})});case 5:this.gl=us.sent,this.inited=!0;case 7:case"end":return us.stop()}},as,this)}));function rs(as){return ts.apply(this,arguments)}return rs}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),ns}(),World=function(){function ns(){_classCallCheck$1(this,ns),this.engine=void 0,this.configService=new ConfigService}return _createClass$1(ns,[{key:"setConfig",value:function(rs){this.configService.set(rs)}},{key:"setEngine",value:function(rs){this.engine=rs}},{key:"createEntity",value:function(){return createEntity()}},{key:"createKernel",value:function(rs){var as=new Kernel(this.engine,this.configService);return typeof rs=="string"?as.setBundle(JSON.parse(rs)):as.setBundle(rs),as.init(),as}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var rs=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},as=new ns;return as.setConfig(rs),as.setEngine(new WebGLEngine),as}}]),ns}();const es=Object.freeze(Object.defineProperty({__proto__:null,Kernel,World},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(es);var gpu={};Object.defineProperty(gpu,"__esModule",{value:!0});gpu.arrayToTextureData=gpu.attributesToTextureData=gpu.buildTextureDataWithTwoEdgeAttr=gpu.buildTextureData=gpu.proccessToFunc=void 0;var _1=requireUtil(),math_1$1=math,proccessToFunc$1=function(ns,ts){var rs;return ns?(0,_1.isNumber)(ns)?rs=function(){return ns}:rs=ns:rs=function(){return ts||1},rs};gpu.proccessToFunc=proccessToFunc$1;var buildTextureData$1=function(ns,ts){var rs=[],as=[],os={},is=0;for(is=0;is<ns.length;is++){var us=ns[is];os[us.id]=is,rs.push(us.x),rs.push(us.y),rs.push(0),rs.push(0),as.push([])}for(is=0;is<ts.length;is++){var ls=ts[is],fs=(0,math_1$1.getEdgeTerminal)(ls,"source"),hs=(0,math_1$1.getEdgeTerminal)(ls,"target");!isNaN(os[fs])&&!isNaN(os[hs])&&(as[os[fs]].push(os[hs]),as[os[hs]].push(os[fs]))}var vs=0;for(is=0;is<ns.length;is++){var gs=rs.length,ys=as[is],xs=ys.length;rs[is*4+2]=gs,rs[is*4+3]=xs,vs=Math.max(vs,xs);for(var ms=0;ms<xs;++ms){var Ss=ys[ms];rs.push(+Ss)}}for(;rs.length%4!==0;)rs.push(0);return{maxEdgePerVetex:vs,array:new Float32Array(rs)}};gpu.buildTextureData=buildTextureData$1;var buildTextureDataWithTwoEdgeAttr$1=function(ns,ts,rs,as){var os=[],is=[],us={},ls=0;for(ls=0;ls<ns.length;ls++){var fs=ns[ls];us[fs.id]=ls,os.push(fs.x),os.push(fs.y),os.push(0),os.push(0),is.push([])}for(ls=0;ls<ts.length;ls++){var hs=ts[ls],vs=(0,math_1$1.getEdgeTerminal)(hs,"source"),gs=(0,math_1$1.getEdgeTerminal)(hs,"target");is[us[vs]].push(us[gs]),is[us[vs]].push(rs(hs)),is[us[vs]].push(as(hs)),is[us[vs]].push(0),is[us[gs]].push(us[vs]),is[us[gs]].push(rs(hs)),is[us[gs]].push(as(hs)),is[us[gs]].push(0)}var ys=0;for(ls=0;ls<ns.length;ls++){var xs=os.length,ms=is[ls],Ss=ms.length;os[ls*4+2]=xs+1048576*Ss/4,os[ls*4+3]=0,ys=Math.max(ys,Ss/4);for(var Ms=0;Ms<Ss;++Ms){var $s=ms[Ms];os.push(+$s)}}for(;os.length%4!==0;)os.push(0);return{maxEdgePerVetex:ys,array:new Float32Array(os)}};gpu.buildTextureDataWithTwoEdgeAttr=buildTextureDataWithTwoEdgeAttr$1;var attributesToTextureData$1=function(ns,ts){var rs=[],as=ns.length,os={};return ts.forEach(function(is){ns.forEach(function(us,ls){if(os[is[us]]===void 0&&(os[is[us]]=Object.keys(os).length),rs.push(os[is[us]]),ls===as-1)for(;rs.length%4!==0;)rs.push(0)})}),{array:new Float32Array(rs),count:Object.keys(os).length}};gpu.attributesToTextureData=attributesToTextureData$1;var arrayToTextureData$1=function(ns){for(var ts=[],rs=ns.length,as=ns[0].length,os=function(us){ns.forEach(function(ls,fs){if(ts.push(ls[us]),fs===rs-1)for(;ts.length%4!==0;)ts.push(0)})},is=0;is<as;is++)os(is);return new Float32Array(ts)};gpu.arrayToTextureData=arrayToTextureData$1;var fruchtermanShader={};Object.defineProperty(fruchtermanShader,"__esModule",{value:!0});fruchtermanShader.clusterBundle=fruchtermanShader.clusterCode=fruchtermanShader.fruchtermanBundle=fruchtermanShader.fruchtermanCode=void 0;fruchtermanShader.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`;fruchtermanShader.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}';fruchtermanShader.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`;fruchtermanShader.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var __extends$h=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(ns,ts,rs,as){function os(is){return is instanceof rs?is:new rs(function(us){us(is)})}return new(rs||(rs=Promise))(function(is,us){function ls(vs){try{hs(as.next(vs))}catch(gs){us(gs)}}function fs(vs){try{hs(as.throw(vs))}catch(gs){us(gs)}}function hs(vs){vs.done?is(vs.value):os(vs.value).then(ls,fs)}hs((as=as.apply(ns,ts||[])).next())})},__generator$1=commonjsGlobal&&commonjsGlobal.__generator||function(ns,ts){var rs={label:0,sent:function(){if(is[0]&1)throw is[1];return is[1]},trys:[],ops:[]},as,os,is,us;return us={next:ls(0),throw:ls(1),return:ls(2)},typeof Symbol=="function"&&(us[Symbol.iterator]=function(){return this}),us;function ls(hs){return function(vs){return fs([hs,vs])}}function fs(hs){if(as)throw new TypeError("Generator is already executing.");for(;us&&(us=0,hs[0]&&(rs=0)),rs;)try{if(as=1,os&&(is=hs[0]&2?os.return:hs[0]?os.throw||((is=os.return)&&is.call(os),0):os.next)&&!(is=is.call(os,hs[1])).done)return is;switch(os=0,is&&(hs=[hs[0]&2,is.value]),hs[0]){case 0:case 1:is=hs;break;case 4:return rs.label++,{value:hs[1],done:!1};case 5:rs.label++,os=hs[1],hs=[0];continue;case 7:hs=rs.ops.pop(),rs.trys.pop();continue;default:if(is=rs.trys,!(is=is.length>0&&is[is.length-1])&&(hs[0]===6||hs[0]===2)){rs=0;continue}if(hs[0]===3&&(!is||hs[1]>is[0]&&hs[1]<is[3])){rs.label=hs[1];break}if(hs[0]===6&&rs.label<is[1]){rs.label=is[1],is=hs;break}if(is&&rs.label<is[2]){rs.label=is[2],rs.ops.push(hs);break}is[2]&&rs.ops.pop(),rs.trys.pop();continue}hs=ts.call(ns,rs)}catch(vs){hs=[6,vs],os=0}finally{as=is=0}if(hs[0]&5)throw hs[1];return{value:hs[0]?hs[1]:void 0,done:!0}}};Object.defineProperty(fruchterman,"__esModule",{value:!0});fruchterman.FruchtermanGPULayout=void 0;var base_1$4=base$1,util_1$3=requireUtil(),g_webgpu_1$1=require$$2,gpu_1$1=gpu,fruchtermanShader_1=fruchtermanShader,constants_1$1=constants,FruchtermanGPULayout=function(ns){__extends$h(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.maxIteration=1e3,as.gravity=10,as.speed=1,as.clustering=!1,as.clusterField="cluster",as.clusterGravity=10,as.workerEnabled=!1,as.nodes=[],as.edges=[],as.width=300,as.height=300,as.nodeMap={},as.nodeIdxMap={},as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},ts.prototype.execute=function(){return __awaiter$1(this,void 0,void 0,function(){var rs,as,os,is,us,ls=this;return __generator$1(this,function(fs){switch(fs.label){case 0:return rs=this,as=rs.nodes,!as||as.length===0?(rs.onLayoutEnd&&rs.onLayoutEnd(),[2]):(!rs.width&&typeof window<"u"&&(rs.width=window.innerWidth),!rs.height&&typeof window<"u"&&(rs.height=window.innerHeight),rs.center||(rs.center=[rs.width/2,rs.height/2]),os=rs.center,as.length===1?(as[0].x=os[0],as[0].y=os[1],rs.onLayoutEnd&&rs.onLayoutEnd(),[2]):(is={},us={},as.forEach(function(hs,vs){(0,util_1$3.isNumber)(hs.x)||(hs.x=Math.random()*ls.width),(0,util_1$3.isNumber)(hs.y)||(hs.y=Math.random()*ls.height),is[hs.id]=hs,us[hs.id]=vs}),rs.nodeMap=is,rs.nodeIdxMap=us,[4,rs.run()]));case 1:return fs.sent(),[2]}})})},ts.prototype.executeWithWorker=function(rs,as){return __awaiter$1(this,void 0,void 0,function(){var os,is,us,ls,fs,hs=this;return __generator$1(this,function(vs){switch(vs.label){case 0:return os=this,is=os.nodes,us=os.center,!is||is.length===0?[2]:is.length===1?(is[0].x=us[0],is[0].y=us[1],[2]):(ls={},fs={},is.forEach(function(gs,ys){(0,util_1$3.isNumber)(gs.x)||(gs.x=Math.random()*hs.width),(0,util_1$3.isNumber)(gs.y)||(gs.y=Math.random()*hs.height),ls[gs.id]=gs,fs[gs.id]=ys}),os.nodeMap=ls,os.nodeIdxMap=fs,[4,os.run(rs,as)]);case 1:return vs.sent(),[2]}})})},ts.prototype.run=function(rs,as){return __awaiter$1(this,void 0,void 0,function(){var os,is,us,ls,fs,hs,vs,gs,ys,xs,ms,Ss,Ms,$s,bs,Cs,As,Is,ks,Ps,Ds,Fs,Rs,js,zs,Us,Ys=this;return __generator$1(this,function(Ks){switch(Ks.label){case 0:for(os=this,is=os.nodes,us=os.edges,ls=os.maxIteration,fs=os.center,hs=os.height*os.width,vs=Math.sqrt(hs)/10,gs=hs/(is.length+1),ys=Math.sqrt(gs),xs=os.speed,ms=os.clustering,Ss=(0,gpu_1$1.attributesToTextureData)([os.clusterField],is),Ms=Ss.array,$s=Ss.count,is.forEach(function(qs,_l){var Js=0,Vs=0;(0,util_1$3.isNumber)(qs.fx)&&(0,util_1$3.isNumber)(qs.fy)&&(Js=qs.fx||.001,Vs=qs.fy||.001),Ms[4*_l+1]=Js,Ms[4*_l+2]=Vs}),bs=is.length,Cs=(0,gpu_1$1.buildTextureData)(is,us),As=Cs.maxEdgePerVetex,Is=Cs.array,ks=os.workerEnabled,ks?Ps=g_webgpu_1$1.World.create({canvas:rs,engineOptions:{supportCompute:!0}}):Ps=g_webgpu_1$1.World.create({engineOptions:{supportCompute:!0}}),Ds=os.onLayoutEnd,Fs=[],Rs=0;Rs<$s;Rs++)Fs.push(0,0,0,0);return js=Ps.createKernel(fruchtermanShader_1.fruchtermanBundle).setDispatch([bs,1,1]).setBinding({u_Data:Is,u_K:ys,u_K2:gs,u_Gravity:os.gravity,u_ClusterGravity:os.clusterGravity||os.gravity||1,u_Speed:xs,u_MaxDisplace:vs,u_Clustering:ms?1:0,u_Center:fs,u_AttributeArray:Ms,u_ClusterCenters:Fs,MAX_EDGE_PER_VERTEX:As,VERTEX_COUNT:bs}),ms&&(zs=Ps.createKernel(fruchtermanShader_1.clusterBundle).setDispatch([$s,1,1]).setBinding({u_Data:Is,u_NodeAttributes:Ms,u_ClusterCenters:Fs,VERTEX_COUNT:bs,CLUSTER_COUNT:$s})),Us=function(){return __awaiter$1(Ys,void 0,void 0,function(){var qs,_l;return __generator$1(this,function(Js){switch(Js.label){case 0:qs=0,Js.label=1;case 1:return qs<ls?[4,js.execute()]:[3,6];case 2:return Js.sent(),ms?(zs.setBinding({u_Data:js}),[4,zs.execute()]):[3,4];case 3:Js.sent(),js.setBinding({u_ClusterCenters:zs}),Js.label=4;case 4:js.setBinding({u_MaxDisplace:vs*=.99}),Js.label=5;case 5:return qs++,[3,1];case 6:return[4,js.getOutput()];case 7:return _l=Js.sent(),rs?as.postMessage({type:constants_1$1.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:_l}):is.forEach(function(Vs,Zs){var Sl=_l[4*Zs],Il=_l[4*Zs+1];Vs.x=Sl,Vs.y=Il}),Ds&&Ds(),[2]}})})},[4,Us()];case 1:return Ks.sent(),[2]}})})},ts.prototype.getType=function(){return"fruchterman-gpu"},ts}(base_1$4.Base);fruchterman.FruchtermanGPULayout=FruchtermanGPULayout;var gForce={},gForceShader={};Object.defineProperty(gForceShader,"__esModule",{value:!0});gForceShader.aveMovementBundle=gForceShader.aveMovementCode=gForceShader.gForceBundle=gForceShader.gForceCode=void 0;gForceShader.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i 节点的第 p 条边开始的小格子位置
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // 大格子，大格子位置=小个子位置 / 4，
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // 每个节点属性占两个数组中各一格
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`;gForceShader.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}';gForceShader.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`;gForceShader.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var __extends$g=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(ns,ts,rs,as){function os(is){return is instanceof rs?is:new rs(function(us){us(is)})}return new(rs||(rs=Promise))(function(is,us){function ls(vs){try{hs(as.next(vs))}catch(gs){us(gs)}}function fs(vs){try{hs(as.throw(vs))}catch(gs){us(gs)}}function hs(vs){vs.done?is(vs.value):os(vs.value).then(ls,fs)}hs((as=as.apply(ns,ts||[])).next())})},__generator=commonjsGlobal&&commonjsGlobal.__generator||function(ns,ts){var rs={label:0,sent:function(){if(is[0]&1)throw is[1];return is[1]},trys:[],ops:[]},as,os,is,us;return us={next:ls(0),throw:ls(1),return:ls(2)},typeof Symbol=="function"&&(us[Symbol.iterator]=function(){return this}),us;function ls(hs){return function(vs){return fs([hs,vs])}}function fs(hs){if(as)throw new TypeError("Generator is already executing.");for(;us&&(us=0,hs[0]&&(rs=0)),rs;)try{if(as=1,os&&(is=hs[0]&2?os.return:hs[0]?os.throw||((is=os.return)&&is.call(os),0):os.next)&&!(is=is.call(os,hs[1])).done)return is;switch(os=0,is&&(hs=[hs[0]&2,is.value]),hs[0]){case 0:case 1:is=hs;break;case 4:return rs.label++,{value:hs[1],done:!1};case 5:rs.label++,os=hs[1],hs=[0];continue;case 7:hs=rs.ops.pop(),rs.trys.pop();continue;default:if(is=rs.trys,!(is=is.length>0&&is[is.length-1])&&(hs[0]===6||hs[0]===2)){rs=0;continue}if(hs[0]===3&&(!is||hs[1]>is[0]&&hs[1]<is[3])){rs.label=hs[1];break}if(hs[0]===6&&rs.label<is[1]){rs.label=is[1],is=hs;break}if(is&&rs.label<is[2]){rs.label=is[2],rs.ops.push(hs);break}is[2]&&rs.ops.pop(),rs.trys.pop();continue}hs=ts.call(ns,rs)}catch(vs){hs=[6,vs],os=0}finally{as=is=0}if(hs[0]&5)throw hs[1];return{value:hs[0]?hs[1]:void 0,done:!0}}};Object.defineProperty(gForce,"__esModule",{value:!0});gForce.GForceGPULayout=void 0;var base_1$3=base$1,util_1$2=requireUtil(),g_webgpu_1=require$$2,gpu_1=gpu,math_1=math,gForceShader_1=gForceShader,constants_1=constants,GForceGPULayout=function(ns){__extends$g(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.maxIteration=1e3,as.edgeStrength=200,as.nodeStrength=1e3,as.coulombDisScale=.005,as.damping=.9,as.maxSpeed=1e3,as.minMovement=.5,as.interval=.02,as.factor=1,as.linkDistance=1,as.gravity=10,as.workerEnabled=!1,as.nodes=[],as.edges=[],as.width=300,as.height=300,as.nodeMap={},as.nodeIdxMap={},as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},ts.prototype.execute=function(){return __awaiter(this,void 0,void 0,function(){var rs,as,os,is,us;return __generator(this,function(ls){switch(ls.label){case 0:return rs=this,as=rs.nodes,!as||as.length===0?(rs.onLayoutEnd&&rs.onLayoutEnd(),[2]):(!rs.width&&typeof window<"u"&&(rs.width=window.innerWidth),!rs.height&&typeof window<"u"&&(rs.height=window.innerHeight),rs.center||(rs.center=[rs.width/2,rs.height/2]),os=rs.center,as.length===1?(as[0].x=os[0],as[0].y=os[1],rs.onLayoutEnd&&rs.onLayoutEnd(),[2]):(is={},us={},as.forEach(function(fs,hs){(0,util_1$2.isNumber)(fs.x)||(fs.x=Math.random()*rs.width),(0,util_1$2.isNumber)(fs.y)||(fs.y=Math.random()*rs.height),is[fs.id]=fs,us[fs.id]=hs}),rs.nodeMap=is,rs.nodeIdxMap=us,rs.nodeStrength=(0,gpu_1.proccessToFunc)(rs.nodeStrength,1),rs.edgeStrength=(0,gpu_1.proccessToFunc)(rs.edgeStrength,1),[4,rs.run()]));case 1:return ls.sent(),[2]}})})},ts.prototype.executeWithWorker=function(rs,as){var os=this,is=os.nodes,us=os.center;if(!(!is||is.length===0)){if(is.length===1){is[0].x=us[0],is[0].y=us[1];return}var ls={},fs={};is.forEach(function(hs,vs){(0,util_1$2.isNumber)(hs.x)||(hs.x=Math.random()*os.width),(0,util_1$2.isNumber)(hs.y)||(hs.y=Math.random()*os.height),ls[hs.id]=hs,fs[hs.id]=vs}),os.nodeMap=ls,os.nodeIdxMap=fs,os.nodeStrength=(0,gpu_1.proccessToFunc)(os.nodeStrength,1),os.edgeStrength=(0,gpu_1.proccessToFunc)(os.edgeStrength,1),os.run(rs,as)}},ts.prototype.run=function(rs,as){return __awaiter(this,void 0,void 0,function(){var os,is,us,ls,fs,hs,vs,gs,ys,xs,ms,Ss,Ms,$s,bs,Cs,As,Is,ks,Ps,Ds,Fs,Rs,js,zs,Us,Ys,Ks=this;return __generator(this,function(qs){switch(qs.label){case 0:for(os=this,is=os.nodes,us=os.edges,ls=os.maxIteration,!os.width&&typeof window<"u"&&(os.width=window.innerWidth),!os.height&&typeof window<"u"&&(os.height=window.innerHeight),fs=is.length,os.linkDistance=(0,gpu_1.proccessToFunc)(os.linkDistance),os.edgeStrength=(0,gpu_1.proccessToFunc)(os.edgeStrength),hs=(0,gpu_1.buildTextureDataWithTwoEdgeAttr)(is,us,os.linkDistance,os.edgeStrength),vs=hs.maxEdgePerVetex,gs=hs.array,os.degrees=(0,math_1.getDegree)(is.length,os.nodeIdxMap,us).map(function(_l){return _l.all}),ys=[],xs=[],ms=[],Ss=[],Ms=[],$s=[],bs=[],os.getMass||(os.getMass=function(_l){return os.degrees[os.nodeIdxMap[_l.id]]||1}),Cs=os.gravity,As=os.center,is.forEach(function(_l,Js){ys.push(os.getMass(_l)),xs.push(os.nodeStrength(_l)),os.degrees[Js]||(os.degrees[Js]=0);var Vs=[As[0],As[1],Cs];if(os.getCenter){var Zs=os.getCenter(_l,os.degrees[Js]);Zs&&(0,util_1$2.isNumber)(Zs[0])&&(0,util_1$2.isNumber)(Zs[1])&&(0,util_1$2.isNumber)(Zs[2])&&(Vs=Zs)}ms.push(Vs[0]),Ss.push(Vs[1]),Ms.push(Vs[2]),(0,util_1$2.isNumber)(_l.fx)&&(0,util_1$2.isNumber)(_l.fy)?($s.push(_l.fx||.001),bs.push(_l.fy||.001)):($s.push(0),bs.push(0))}),Is=(0,gpu_1.arrayToTextureData)([ys,os.degrees,xs,$s]),ks=(0,gpu_1.arrayToTextureData)([ms,Ss,Ms,bs]),Ps=os.workerEnabled,Ps?Ds=g_webgpu_1.World.create({canvas:rs,engineOptions:{supportCompute:!0}}):Ds=g_webgpu_1.World.create({engineOptions:{supportCompute:!0}}),Fs=os.onLayoutEnd,Rs=[],gs.forEach(function(_l){Rs.push(_l)}),js=0;js<4;js++)Rs.push(0);return zs=Ds.createKernel(gForceShader_1.gForceBundle).setDispatch([fs,1,1]).setBinding({u_Data:gs,u_damping:os.damping,u_maxSpeed:os.maxSpeed,u_minMovement:os.minMovement,u_coulombDisScale:os.coulombDisScale,u_factor:os.factor,u_NodeAttributeArray1:Is,u_NodeAttributeArray2:ks,MAX_EDGE_PER_VERTEX:vs,VERTEX_COUNT:fs,u_AveMovement:Rs,u_interval:os.interval}),Us=Ds.createKernel(gForceShader_1.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:gs,VERTEX_COUNT:fs,u_AveMovement:[0,0,0,0]}),Ys=function(){return __awaiter(Ks,void 0,void 0,function(){var _l,Js,Vs;return __generator(this,function(Zs){switch(Zs.label){case 0:_l=0,Zs.label=1;case 1:return _l<ls?[4,zs.execute()]:[3,5];case 2:return Zs.sent(),Us.setBinding({u_Data:zs}),[4,Us.execute()];case 3:Zs.sent(),Js=Math.max(.02,os.interval-_l*.002),zs.setBinding({u_interval:Js,u_AveMovement:Us}),Zs.label=4;case 4:return _l++,[3,1];case 5:return[4,zs.getOutput()];case 6:return Vs=Zs.sent(),rs?as.postMessage({type:constants_1.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Vs}):is.forEach(function(Sl,Il){var Nl=Vs[4*Il],Tl=Vs[4*Il+1];Sl.x=Nl,Sl.y=Tl}),Fs&&Fs(),[2]}})})},[4,Ys()];case 1:return qs.sent(),[2]}})})},ts.prototype.getType=function(){return"gForce-gpu"},ts}(base_1$3.Base);gForce.GForceGPULayout=GForceGPULayout;var comboForce={},__extends$f=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}();Object.defineProperty(comboForce,"__esModule",{value:!0});comboForce.ComboForceLayout=void 0;var base_1$2=base$1,util_1$1=requireUtil(),ComboForceLayout=function(ns){__extends$f(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.center=[0,0],as.maxIteration=100,as.gravity=10,as.comboGravity=10,as.linkDistance=10,as.alpha=1,as.alphaMin=.001,as.alphaDecay=1-Math.pow(as.alphaMin,1/300),as.alphaTarget=0,as.velocityDecay=.6,as.edgeStrength=.6,as.nodeStrength=30,as.preventOverlap=!1,as.preventNodeOverlap=!1,as.preventComboOverlap=!1,as.collideStrength=void 0,as.nodeCollideStrength=.5,as.comboCollideStrength=.5,as.comboSpacing=20,as.comboPadding=10,as.optimizeRangeFactor=1,as.onTick=function(){},as.onLayoutEnd=function(){},as.depthAttractiveForceScale=1,as.depthRepulsiveForceScale=2,as.nodes=[],as.edges=[],as.combos=[],as.comboTrees=[],as.width=300,as.height=300,as.bias=[],as.nodeMap={},as.oriComboMap={},as.indexMap={},as.comboMap={},as.previousLayouted=!1,as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},ts.prototype.execute=function(){var rs=this,as=rs.nodes,os=rs.center;if(rs.comboTree={id:"comboTreeRoot",depth:-1,children:rs.comboTrees},!as||as.length===0){rs.onLayoutEnd&&rs.onLayoutEnd();return}if(as.length===1){as[0].x=os[0],as[0].y=os[1],rs.onLayoutEnd&&rs.onLayoutEnd();return}rs.initVals(),rs.run(),rs.onLayoutEnd&&rs.onLayoutEnd()},ts.prototype.run=function(){var rs=this,as=rs.nodes,os=rs.previousLayouted?rs.maxIteration/5:rs.maxIteration;!rs.width&&typeof window<"u"&&(rs.width=window.innerWidth),!rs.height&&typeof window<"u"&&(rs.height=window.innerHeight);var is=rs.center,us=rs.velocityDecay,ls=rs.comboMap;rs.previousLayouted||rs.initPos(ls);for(var fs=function(ys){var xs=[];as.forEach(function(ms,Ss){xs[Ss]={x:0,y:0}}),rs.applyCalculate(xs),rs.applyComboCenterForce(xs),as.forEach(function(ms,Ss){!(0,util_1$1.isNumber)(ms.x)||!(0,util_1$1.isNumber)(ms.y)||(ms.x+=xs[Ss].x*us,ms.y+=xs[Ss].y*us)}),rs.alpha+=(rs.alphaTarget-rs.alpha)*rs.alphaDecay,rs.onTick()},hs=0;hs<os;hs++)fs();var vs=[0,0];as.forEach(function(ys){!(0,util_1$1.isNumber)(ys.x)||!(0,util_1$1.isNumber)(ys.y)||(vs[0]+=ys.x,vs[1]+=ys.y)}),vs[0]/=as.length,vs[1]/=as.length;var gs=[is[0]-vs[0],is[1]-vs[1]];as.forEach(function(ys,xs){!(0,util_1$1.isNumber)(ys.x)||!(0,util_1$1.isNumber)(ys.y)||(ys.x+=gs[0],ys.y+=gs[1])}),rs.combos.forEach(function(ys){var xs=ls[ys.id];xs&&xs.empty&&(ys.x=xs.cx||ys.x,ys.y=xs.cy||ys.y)}),rs.previousLayouted=!0},ts.prototype.initVals=function(){var rs=this,as=rs.edges,os=rs.nodes,is=rs.combos,us={},ls={},fs={};os.forEach(function(_l,Js){ls[_l.id]=_l,fs[_l.id]=Js}),rs.nodeMap=ls,rs.indexMap=fs;var hs={};is.forEach(function(_l){hs[_l.id]=_l}),rs.oriComboMap=hs,rs.comboMap=rs.getComboMap();var vs=rs.preventOverlap;rs.preventComboOverlap=rs.preventComboOverlap||vs,rs.preventNodeOverlap=rs.preventNodeOverlap||vs;var gs=rs.collideStrength;gs&&(rs.comboCollideStrength=gs,rs.nodeCollideStrength=gs),rs.comboCollideStrength=rs.comboCollideStrength?rs.comboCollideStrength:0,rs.nodeCollideStrength=rs.nodeCollideStrength?rs.nodeCollideStrength:0;for(var ys=0;ys<as.length;++ys){var xs=(0,util_1$1.getEdgeTerminal)(as[ys],"source"),ms=(0,util_1$1.getEdgeTerminal)(as[ys],"target");us[xs]?us[xs]++:us[xs]=1,us[ms]?us[ms]++:us[ms]=1}for(var Ss=[],ys=0;ys<as.length;++ys){var xs=(0,util_1$1.getEdgeTerminal)(as[ys],"source"),ms=(0,util_1$1.getEdgeTerminal)(as[ys],"target");Ss[ys]=us[xs]/(us[xs]+us[ms])}this.bias=Ss;var Ms=rs.nodeSize,$s=rs.nodeSpacing,bs,Cs;if((0,util_1$1.isNumber)($s)?Cs=function(){return $s}:(0,util_1$1.isFunction)($s)?Cs=$s:Cs=function(){return 0},this.nodeSpacing=Cs,!Ms)bs=function(_l){if(_l.size){if((0,util_1$1.isArray)(_l.size)){var Js=_l.size[0]>_l.size[1]?_l.size[0]:_l.size[1];return Js/2}if((0,util_1$1.isObject)(_l.size)){var Js=_l.size.width>_l.size.height?_l.size.width:_l.size.height;return Js/2}return _l.size/2}return 10};else if((0,util_1$1.isFunction)(Ms))bs=function(_l){return Ms(_l)};else if((0,util_1$1.isArray)(Ms)){var As=Ms[0]>Ms[1]?Ms[0]:Ms[1],Is=As/2;bs=function(_l){return Is}}else{var ks=Ms/2;bs=function(_l){return ks}}this.nodeSize=bs;var Ps=rs.comboSpacing,Ds;(0,util_1$1.isNumber)(Ps)?Ds=function(){return Ps}:(0,util_1$1.isFunction)(Ps)?Ds=Ps:Ds=function(){return 0},this.comboSpacing=Ds;var Fs=rs.comboPadding,Rs;(0,util_1$1.isNumber)(Fs)?Rs=function(){return Fs}:(0,util_1$1.isArray)(Fs)?Rs=function(){return Math.max.apply(null,Fs)}:(0,util_1$1.isFunction)(Fs)?Rs=Fs:Rs=function(){return 0},this.comboPadding=Rs;var js=this.linkDistance,zs;js||(js=10),(0,util_1$1.isNumber)(js)?zs=function(_l){return js}:zs=js,this.linkDistance=zs;var Us=this.edgeStrength,Ys;Us||(Us=1),(0,util_1$1.isNumber)(Us)?Ys=function(_l){return Us}:Ys=Us,this.edgeStrength=Ys;var Ks=this.nodeStrength,qs;Ks||(Ks=30),(0,util_1$1.isNumber)(Ks)?qs=function(_l){return Ks}:qs=Ks,this.nodeStrength=qs},ts.prototype.initPos=function(rs){var as=this,os=as.nodes;os.forEach(function(is,us){var ls=is.comboId,fs=rs[ls];ls&&fs?(is.x=fs.cx+100/(us+1),is.y=fs.cy+100/(us+1)):(is.x=100/(us+1),is.y=100/(us+1))})},ts.prototype.getComboMap=function(){var rs=this,as=rs.nodeMap,os=rs.comboTrees,is=rs.oriComboMap,us={};return(os||[]).forEach(function(ls){var fs=[];(0,util_1$1.traverseTreeUp)(ls,function(hs){if(hs.itemType==="node"||!is[hs.id])return!0;if(us[hs.id]===void 0){var vs={id:hs.id,name:hs.id,cx:0,cy:0,count:0,depth:rs.oriComboMap[hs.id].depth||0,children:[]};us[hs.id]=vs}var gs=hs.children;gs&&gs.forEach(function(ms){if(!us[ms.id]&&!as[ms.id])return!0;fs.push(ms)});var ys=us[hs.id];if(ys.cx=0,ys.cy=0,fs.length===0){ys.empty=!0;var xs=is[hs.id];ys.cx=xs.x,ys.cy=xs.y}return fs.forEach(function(ms){if(ys.count++,ms.itemType!=="node"){var Ss=us[ms.id];(0,util_1$1.isNumber)(Ss.cx)&&(ys.cx+=Ss.cx),(0,util_1$1.isNumber)(Ss.cy)&&(ys.cy+=Ss.cy);return}var Ms=as[ms.id];Ms&&((0,util_1$1.isNumber)(Ms.x)&&(ys.cx+=Ms.x),(0,util_1$1.isNumber)(Ms.y)&&(ys.cy+=Ms.y))}),ys.cx/=ys.count||1,ys.cy/=ys.count||1,ys.children=fs,!0})}),us},ts.prototype.applyComboCenterForce=function(rs){var as=this,os=as.gravity,is=as.comboGravity||os,us=this.alpha,ls=as.comboTrees,fs=as.indexMap,hs=as.nodeMap,vs=as.comboMap;(ls||[]).forEach(function(gs){(0,util_1$1.traverseTreeUp)(gs,function(ys){if(ys.itemType==="node")return!0;var xs=vs[ys.id];if(!xs)return!0;var ms=vs[ys.id],Ss=(ms.depth+1)/10*.5,Ms=ms.cx,$s=ms.cy;return ms.cx=0,ms.cy=0,ms.children.forEach(function(bs){if(bs.itemType!=="node"){var Cs=vs[bs.id];Cs&&(0,util_1$1.isNumber)(Cs.cx)&&(ms.cx+=Cs.cx),Cs&&(0,util_1$1.isNumber)(Cs.cy)&&(ms.cy+=Cs.cy);return}var As=hs[bs.id],Is=As.x-Ms||.005,ks=As.y-$s||.005,Ps=Math.sqrt(Is*Is+ks*ks),Ds=fs[As.id],Fs=is*us/Ps*Ss;rs[Ds].x-=Is*Fs,rs[Ds].y-=ks*Fs,(0,util_1$1.isNumber)(As.x)&&(ms.cx+=As.x),(0,util_1$1.isNumber)(As.y)&&(ms.cy+=As.y)}),ms.cx/=ms.count||1,ms.cy/=ms.count||1,!0})})},ts.prototype.applyCalculate=function(rs){var as=this,os=as.comboMap,is=as.nodes,us={};is.forEach(function(fs,hs){is.forEach(function(vs,gs){if(!(hs<gs)){var ys=fs.x-vs.x||.005,xs=fs.y-vs.y||.005,ms=ys*ys+xs*xs,Ss=Math.sqrt(ms);ms<1&&(ms=Ss),us["".concat(fs.id,"-").concat(vs.id)]={vx:ys,vy:xs,vl2:ms,vl:Ss},us["".concat(vs.id,"-").concat(fs.id)]={vl2:ms,vl:Ss,vx:-ys,vy:-xs}}})}),as.updateComboSizes(os),as.calRepulsive(rs,us),as.calAttractive(rs,us);var ls=as.preventComboOverlap;ls&&as.comboNonOverlapping(rs,os)},ts.prototype.updateComboSizes=function(rs){var as=this,os=as.comboTrees,is=as.nodeMap,us=as.nodeSize,ls=as.comboSpacing,fs=as.comboPadding;(os||[]).forEach(function(hs){var vs=[];(0,util_1$1.traverseTreeUp)(hs,function(gs){if(gs.itemType==="node")return!0;var ys=rs[gs.id];if(!ys)return!1;var xs=gs.children;xs&&xs.forEach(function(Ms){!rs[Ms.id]&&!is[Ms.id]||vs.push(Ms)}),ys.minX=1/0,ys.minY=1/0,ys.maxX=-1/0,ys.maxY=-1/0,vs.forEach(function(Ms){if(Ms.itemType!=="node")return!0;var $s=is[Ms.id];if(!$s)return!0;var bs=us($s),Cs=$s.x-bs,As=$s.y-bs,Is=$s.x+bs,ks=$s.y+bs;ys.minX>Cs&&(ys.minX=Cs),ys.minY>As&&(ys.minY=As),ys.maxX<Is&&(ys.maxX=Is),ys.maxY<ks&&(ys.maxY=ks)});var ms=as.oriComboMap[gs.id].size||10;(0,util_1$1.isArray)(ms)&&(ms=ms[0]);var Ss=Math.max(ys.maxX-ys.minX,ys.maxY-ys.minY,ms);return ys.r=Ss/2+ls(ys)/2+fs(ys),!0})})},ts.prototype.comboNonOverlapping=function(rs,as){var os=this,is=os.comboTree,us=os.comboCollideStrength,ls=os.indexMap,fs=os.nodeMap;(0,util_1$1.traverseTreeUp)(is,function(hs){if(!as[hs.id]&&!fs[hs.id]&&hs.id!=="comboTreeRoot")return!1;var vs=hs.children;return vs&&vs.length>1&&vs.forEach(function(gs,ys){if(gs.itemType==="node")return!1;var xs=as[gs.id];xs&&vs.forEach(function(ms,Ss){if(ys<=Ss||ms.itemType==="node")return!1;var Ms=as[ms.id];if(!Ms)return!1;var $s=xs.cx-Ms.cx||.005,bs=xs.cy-Ms.cy||.005,Cs=$s*$s+bs*bs,As=xs.r||1,Is=Ms.r||1,ks=As+Is,Ps=Is*Is,Ds=As*As;if(Cs<ks*ks){var Fs=gs.children;if(!Fs||Fs.length===0)return!1;var Rs=ms.children;if(!Rs||Rs.length===0)return!1;var js=Math.sqrt(Cs),zs=(ks-js)/js*us,Us=$s*zs,Ys=bs*zs,Ks=Ps/(Ds+Ps),qs=1-Ks;Fs.forEach(function(_l){if(_l.itemType!=="node")return!1;if(fs[_l.id]){var Js=ls[_l.id];Rs.forEach(function(Vs){if(Vs.itemType!=="node"||!fs[Vs.id])return!1;var Zs=ls[Vs.id];rs[Js].x+=Us*Ks,rs[Js].y+=Ys*Ks,rs[Zs].x-=Us*qs,rs[Zs].y-=Ys*qs})}})}})}),!0})},ts.prototype.calRepulsive=function(rs,as){var os=this,is=os.nodes,us=os.width*os.optimizeRangeFactor,ls=os.nodeStrength,fs=os.alpha,hs=os.nodeCollideStrength,vs=os.preventNodeOverlap,gs=os.nodeSize,ys=os.nodeSpacing,xs=os.depthRepulsiveForceScale,ms=os.center;is.forEach(function(Ss,Ms){if(!(!Ss.x||!Ss.y)){if(ms){var $s=os.gravity,bs=Ss.x-ms[0]||.005,Cs=Ss.y-ms[1]||.005,As=Math.sqrt(bs*bs+Cs*Cs);rs[Ms].x-=bs*$s*fs/As,rs[Ms].y-=Cs*$s*fs/As}is.forEach(function(Is,ks){if(Ms!==ks&&!(!Is.x||!Is.y)){var Ps=as["".concat(Ss.id,"-").concat(Is.id)],Ds=Ps.vl2,Fs=Ps.vl;if(!(Fs>us)){var Rs=as["".concat(Ss.id,"-").concat(Is.id)],js=Rs.vx,zs=Rs.vy,Us=Math.log(Math.abs(Is.depth-Ss.depth)/10)+1||1;Us=Us<1?1:Us,Is.comboId!==Ss.comboId&&(Us+=1);var Ys=Us?Math.pow(xs,Us):1,Ks=ls(Is)*fs/Ds*Ys;if(rs[Ms].x+=js*Ks,rs[Ms].y+=zs*Ks,Ms<ks&&vs){var qs=gs(Ss)+ys(Ss)||1,_l=gs(Is)+ys(Is)||1,Js=qs+_l;if(Ds<Js*Js){var Vs=(Js-Fs)/Fs*hs,Zs=_l*_l,Sl=Zs/(qs*qs+Zs),Il=js*Vs,Nl=zs*Vs;rs[Ms].x+=Il*Sl,rs[Ms].y+=Nl*Sl,Sl=1-Sl,rs[ks].x-=Il*Sl,rs[ks].y-=Nl*Sl}}}}})}})},ts.prototype.calAttractive=function(rs,as){var os=this,is=os.edges,us=os.linkDistance,ls=os.alpha,fs=os.edgeStrength,hs=os.bias,vs=os.depthAttractiveForceScale;is.forEach(function(gs,ys){var xs=(0,util_1$1.getEdgeTerminal)(gs,"source"),ms=(0,util_1$1.getEdgeTerminal)(gs,"target");if(!(!xs||!ms||xs===ms)){var Ss=os.indexMap[xs],Ms=os.indexMap[ms],$s=os.nodeMap[xs],bs=os.nodeMap[ms];if(!(!$s||!bs)){var Cs=$s.depth===bs.depth?0:Math.log(Math.abs($s.depth-bs.depth)/10);$s.comboId===bs.comboId&&(Cs=Cs/2);var As=Cs?Math.pow(vs,Cs):1;if($s.comboId!==bs.comboId&&As===1?As=vs/2:$s.comboId===bs.comboId&&(As=2),!(!(0,util_1$1.isNumber)(bs.x)||!(0,util_1$1.isNumber)($s.x)||!(0,util_1$1.isNumber)(bs.y)||!(0,util_1$1.isNumber)($s.y))){var Is=as["".concat(ms,"-").concat(xs)],ks=Is.vl,Ps=Is.vx,Ds=Is.vy,Fs=(ks-us(gs))/ks*ls*fs(gs)*As,Rs=Ps*Fs,js=Ds*Fs,zs=hs[ys];rs[Ms].x-=Rs*zs,rs[Ms].y-=js*zs,rs[Ss].x+=Rs*(1-zs),rs[Ss].y+=js*(1-zs)}}}})},ts.prototype.getType=function(){return"comboForce"},ts}(base_1$2.Base);comboForce.ComboForceLayout=ComboForceLayout;var comboCombined={},hasRequiredComboCombined;function requireComboCombined(){if(hasRequiredComboCombined)return comboCombined;hasRequiredComboCombined=1;var ns=commonjsGlobal&&commonjsGlobal.__extends||function(){var ls=function(fs,hs){return ls=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(vs,gs){vs.__proto__=gs}||function(vs,gs){for(var ys in gs)Object.prototype.hasOwnProperty.call(gs,ys)&&(vs[ys]=gs[ys])},ls(fs,hs)};return function(fs,hs){if(typeof hs!="function"&&hs!==null)throw new TypeError("Class extends value "+String(hs)+" is not a constructor or null");ls(fs,hs);function vs(){this.constructor=fs}fs.prototype=hs===null?Object.create(hs):(vs.prototype=hs.prototype,new vs)}}(),ts=commonjsGlobal&&commonjsGlobal.__assign||function(){return ts=Object.assign||function(ls){for(var fs,hs=1,vs=arguments.length;hs<vs;hs++){fs=arguments[hs];for(var gs in fs)Object.prototype.hasOwnProperty.call(fs,gs)&&(ls[gs]=fs[gs])}return ls},ts.apply(this,arguments)};Object.defineProperty(comboCombined,"__esModule",{value:!0}),comboCombined.ComboCombinedLayout=void 0;var rs=constants,as=base$1,os=requireUtil(),is=requireLayout(),us=function(ls){ns(fs,ls);function fs(hs){var vs=ls.call(this)||this;return vs.center=[0,0],vs.nodes=[],vs.edges=[],vs.combos=[],vs.comboEdges=[],vs.comboPadding=10,vs.comboTrees=[],vs.updateCfg(hs),vs}return fs.prototype.getDefaultCfg=function(){return{}},fs.prototype.execute=function(){var hs=this,vs=hs.nodes,gs=hs.center;if(!vs||vs.length===0){hs.onLayoutEnd&&hs.onLayoutEnd();return}if(vs.length===1){vs[0].x=gs[0],vs[0].y=gs[1],hs.onLayoutEnd&&hs.onLayoutEnd();return}hs.initVals(),hs.run(),hs.onLayoutEnd&&hs.onLayoutEnd()},fs.prototype.run=function(){var hs,vs=this,gs=vs.nodes,ys=vs.edges,xs=vs.combos,ms=vs.comboEdges,Ss=vs.center,Ms={};gs.forEach(function(Ks){Ms[Ks.id]=Ks});var $s={};xs.forEach(function(Ks){$s[Ks.id]=Ks});var bs=vs.getInnerGraphs(Ms),Cs=[],As=[],Is={},ks=!0;this.comboTrees.forEach(function(Ks){var qs=bs[Ks.id];if(qs){var _l=ts(ts({},Ks),{x:qs.x||$s[Ks.id].x,y:qs.y||$s[Ks.id].y,fx:qs.fx||$s[Ks.id].fx,fy:qs.fy||$s[Ks.id].fy,mass:qs.mass||$s[Ks.id].mass,size:qs.size});As.push(_l),!isNaN(_l.x)&&_l.x!==0&&!isNaN(_l.y)&&_l.y!==0?ks=!1:(_l.x=Math.random()*100,_l.y=Math.random()*100),Cs.push(Ks.id),(0,os.traverseTreeUp)(Ks,function(Js){return Js.id!==Ks.id&&(Is[Js.id]=Ks.id),!0})}}),gs.forEach(function(Ks){if(!(Ks.comboId&&$s[Ks.comboId])){var qs=ts({},Ks);As.push(qs),!isNaN(qs.x)&&qs.x!==0&&!isNaN(qs.y)&&qs.y!==0?ks=!1:(qs.x=Math.random()*100,qs.y=Math.random()*100),Cs.push(Ks.id)}});var Ps=[];if(ys.concat(ms).forEach(function(Ks){var qs=Is[Ks.source]||Ks.source,_l=Is[Ks.target]||Ks.target;qs!==_l&&Cs.includes(qs)&&Cs.includes(_l)&&Ps.push({source:qs,target:_l})}),As!=null&&As.length){if(As.length===1)As[0].x=Ss[0],As[0].y=Ss[1];else{var Ds={nodes:As,edges:Ps},Fs=this.outerLayout||new is.GForceLayout({gravity:1,factor:4,linkDistance:function(Ks,qs,_l){var Js,Vs,Zs=((((Js=qs.size)===null||Js===void 0?void 0:Js[0])||30)+(((Vs=_l.size)===null||Vs===void 0?void 0:Vs[0])||30))/2;return Math.min(Zs*1.5,700)}}),Rs=(hs=Fs.getType)===null||hs===void 0?void 0:hs.call(Fs);if(Fs.updateCfg({center:Ss,kg:5,preventOverlap:!0,animate:!1}),ks&&rs.FORCE_LAYOUT_TYPE_MAP[Rs]){var js=As.length<100?new is.MDSLayout:new is.GridLayout;js.layout(Ds)}Fs.layout(Ds)}As.forEach(function(Ks){var qs=bs[Ks.id];if(!qs){var _l=Ms[Ks.id];_l&&(_l.x=Ks.x,_l.y=Ks.y);return}qs.visited=!0,qs.x=Ks.x,qs.y=Ks.y,qs.nodes.forEach(function(Js){Js.x+=Ks.x,Js.y+=Ks.y})})}for(var zs=Object.keys(bs),Us=function(Ks){var qs=zs[Ks],_l=bs[qs];if(!_l)return"continue";_l.nodes.forEach(function(Js){_l.visited||(Js.x+=_l.x||0,Js.y+=_l.y||0),Ms[Js.id]&&(Ms[Js.id].x=Js.x,Ms[Js.id].y=Js.y)}),$s[qs]&&($s[qs].x=_l.x,$s[qs].y=_l.y)},Ys=zs.length-1;Ys>=0;Ys--)Us(Ys);return{nodes:gs,edges:ys,combos:xs,comboEdges:ms}},fs.prototype.getInnerGraphs=function(hs){var vs=this,gs=vs.comboTrees,ys=vs.nodeSize,xs=vs.edges,ms=vs.comboPadding,Ss=vs.spacing,Ms={},$s=this.innerLayout||new is.ConcentricLayout({type:"concentric",sortBy:"id"});return $s.center=[0,0],$s.preventOverlap=!0,$s.nodeSpacing=Ss,(gs||[]).forEach(function(bs){(0,os.traverseTreeUp)(bs,function(Cs){var As,Is=(ms==null?void 0:ms(Cs))||10;if((0,os.isArray)(Is)&&(Is=Math.max.apply(Math,Is)),!((As=Cs.children)===null||As===void 0)&&As.length){var Ps=Cs.children.map(function(Vs){if(Vs.itemType==="combo")return Ms[Vs.id];var Zs=hs[Vs.id]||{};return ts(ts({},Zs),Vs)}),Ds=Ps.map(function(Vs){return Vs.id}),Fs={nodes:Ps,edges:xs.filter(function(Vs){return Ds.includes(Vs.source)&&Ds.includes(Vs.target)})},Rs=1/0;Ps.forEach(function(Vs){var Zs;Vs.size||(Vs.size=((Zs=Ms[Vs.id])===null||Zs===void 0?void 0:Zs.size)||(ys==null?void 0:ys(Vs))||[30,30]),(0,os.isNumber)(Vs.size)&&(Vs.size=[Vs.size,Vs.size]),Rs>Vs.size[0]&&(Rs=Vs.size[0]),Rs>Vs.size[1]&&(Rs=Vs.size[1])}),$s.layout(Fs);var js=(0,os.getLayoutBBox)(Ps),zs=js.minX,Us=js.minY,Ys=js.maxX,Ks=js.maxY,qs={x:(Ys+zs)/2,y:(Ks+Us)/2};Fs.nodes.forEach(function(Vs){Vs.x-=qs.x,Vs.y-=qs.y});var _l=Math.max(Ys-zs,Rs)+Is*2,Js=Math.max(Ks-Us,Rs)+Is*2;Ms[Cs.id]={id:Cs.id,nodes:Ps,size:[_l,Js]}}else if(Cs.itemType==="combo"){var ks=Is?[Is*2,Is*2]:[30,30];Ms[Cs.id]={id:Cs.id,nodes:[],size:ks}}return!0})}),Ms},fs.prototype.initVals=function(){var hs=this,vs=hs.nodeSize,gs=hs.spacing,ys,xs;if((0,os.isNumber)(gs)?xs=function(){return gs}:(0,os.isFunction)(gs)?xs=gs:xs=function(){return 0},this.spacing=xs,!vs)ys=function(Cs){var As=xs(Cs);if(Cs.size){if((0,os.isArray)(Cs.size)){var Is=Cs.size[0]>Cs.size[1]?Cs.size[0]:Cs.size[1];return(Is+As)/2}if((0,os.isObject)(Cs.size)){var Is=Cs.size.width>Cs.size.height?Cs.size.width:Cs.size.height;return(Is+As)/2}return(Cs.size+As)/2}return 10+As/2};else if((0,os.isFunction)(vs))ys=function(Cs){var As=vs(Cs),Is=xs(Cs);if((0,os.isArray)(Cs.size)){var ks=Cs.size[0]>Cs.size[1]?Cs.size[0]:Cs.size[1];return(ks+Is)/2}return((As||10)+Is)/2};else if((0,os.isArray)(vs)){var ms=vs[0]>vs[1]?vs[0]:vs[1],Ss=ms/2;ys=function(Cs){return Ss+xs(Cs)/2}}else{var Ms=vs/2;ys=function(Cs){return Ms+xs(Cs)/2}}this.nodeSize=ys;var $s=hs.comboPadding,bs;(0,os.isNumber)($s)?bs=function(){return $s}:(0,os.isArray)($s)?bs=function(){return Math.max.apply(null,$s)}:(0,os.isFunction)($s)?bs=$s:bs=function(){return 0},this.comboPadding=bs},fs.prototype.getType=function(){return"comboCombined"},fs}(as.Base);return comboCombined.ComboCombinedLayout=us,comboCombined}var forceAtlas2={},body={};Object.defineProperty(body,"__esModule",{value:!0});var Body=function(){function ns(ts){this.id=ts.id||0,this.rx=ts.rx,this.ry=ts.ry,this.fx=0,this.fy=0,this.mass=ts.mass,this.degree=ts.degree,this.g=ts.g||0}return ns.prototype.distanceTo=function(ts){var rs=this.rx-ts.rx,as=this.ry-ts.ry;return Math.hypot(rs,as)},ns.prototype.setPos=function(ts,rs){this.rx=ts,this.ry=rs},ns.prototype.resetForce=function(){this.fx=0,this.fy=0},ns.prototype.addForce=function(ts){var rs=ts.rx-this.rx,as=ts.ry-this.ry,os=Math.hypot(rs,as);os=os<1e-4?1e-4:os;var is=this.g*(this.degree+1)*(ts.degree+1)/os;this.fx+=is*rs/os,this.fy+=is*as/os},ns.prototype.in=function(ts){return ts.contains(this.rx,this.ry)},ns.prototype.add=function(ts){var rs=this.mass+ts.mass,as=(this.rx*this.mass+ts.rx*ts.mass)/rs,os=(this.ry*this.mass+ts.ry*ts.mass)/rs,is=this.degree+ts.degree,us={rx:as,ry:os,mass:rs,degree:is};return new ns(us)},ns}();body.default=Body;var quad={};Object.defineProperty(quad,"__esModule",{value:!0});var Quad=function(){function ns(ts){this.xmid=ts.xmid,this.ymid=ts.ymid,this.length=ts.length,this.massCenter=ts.massCenter||[0,0],this.mass=ts.mass||1}return ns.prototype.getLength=function(){return this.length},ns.prototype.contains=function(ts,rs){var as=this.length/2;return ts<=this.xmid+as&&ts>=this.xmid-as&&rs<=this.ymid+as&&rs>=this.ymid-as},ns.prototype.NW=function(){var ts=this.xmid-this.length/4,rs=this.ymid+this.length/4,as=this.length/2,os={xmid:ts,ymid:rs,length:as},is=new ns(os);return is},ns.prototype.NE=function(){var ts=this.xmid+this.length/4,rs=this.ymid+this.length/4,as=this.length/2,os={xmid:ts,ymid:rs,length:as},is=new ns(os);return is},ns.prototype.SW=function(){var ts=this.xmid-this.length/4,rs=this.ymid-this.length/4,as=this.length/2,os={xmid:ts,ymid:rs,length:as},is=new ns(os);return is},ns.prototype.SE=function(){var ts=this.xmid+this.length/4,rs=this.ymid-this.length/4,as=this.length/2,os={xmid:ts,ymid:rs,length:as},is=new ns(os);return is},ns}();quad.default=Quad;var quadTree={};Object.defineProperty(quadTree,"__esModule",{value:!0});var QuadTree=function(){function ns(ts){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,ts!=null&&(this.quad=ts)}return ns.prototype.insert=function(ts){if(this.body==null){this.body=ts;return}this._isExternal()?(this.quad&&(this.NW=new ns(this.quad.NW()),this.NE=new ns(this.quad.NE()),this.SW=new ns(this.quad.SW()),this.SE=new ns(this.quad.SE())),this._putBody(this.body),this._putBody(ts),this.body=this.body.add(ts)):(this.body=this.body.add(ts),this._putBody(ts))},ns.prototype._putBody=function(ts){this.quad&&(ts.in(this.quad.NW())&&this.NW?this.NW.insert(ts):ts.in(this.quad.NE())&&this.NE?this.NE.insert(ts):ts.in(this.quad.SW())&&this.SW?this.SW.insert(ts):ts.in(this.quad.SE())&&this.SE&&this.SE.insert(ts))},ns.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},ns.prototype.updateForce=function(ts){if(!(this.body==null||ts===this.body))if(this._isExternal())ts.addForce(this.body);else{var rs=this.quad?this.quad.getLength():0,as=this.body.distanceTo(ts);rs/as<this.theta?ts.addForce(this.body):(this.NW&&this.NW.updateForce(ts),this.NE&&this.NE.updateForce(ts),this.SW&&this.SW.updateForce(ts),this.SE&&this.SE.updateForce(ts))}},ns}();quadTree.default=QuadTree;var __extends$e=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(ns){return ns&&ns.__esModule?ns:{default:ns}};Object.defineProperty(forceAtlas2,"__esModule",{value:!0});forceAtlas2.ForceAtlas2Layout=void 0;var base_1$1=base$1,util_1=requireUtil(),body_1=__importDefault$3(body),quad_1=__importDefault$3(quad),quadTree_1=__importDefault$3(quadTree),ForceAtlas2Layout=function(ns){__extends$e(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.center=[0,0],as.width=300,as.height=300,as.nodes=[],as.edges=[],as.kr=5,as.kg=1,as.mode="normal",as.preventOverlap=!1,as.dissuadeHubs=!1,as.barnesHut=void 0,as.maxIteration=0,as.ks=.1,as.ksmax=10,as.tao=.1,as.onLayoutEnd=function(){},as.prune=void 0,as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{}},ts.prototype.execute=function(){var rs=this,as=rs.nodes,os=rs.onLayoutEnd,is=rs.prune,us=rs.maxIteration;!rs.width&&typeof window<"u"&&(rs.width=window.innerWidth),!rs.height&&typeof window<"u"&&(rs.height=window.innerHeight);for(var ls=[],fs=as.length,hs=0;hs<fs;hs+=1){var vs=as[hs],gs=10,ys=10;(0,util_1.isNumber)(vs.size)&&(gs=vs.size,ys=vs.size),(0,util_1.isArray)(vs.size)?(isNaN(vs.size[0])||(gs=vs.size[0]),isNaN(vs.size[1])||(ys=vs.size[1])):(0,util_1.isObject)(vs.size)&&(gs=vs.size.width,ys=vs.size.height),rs.getWidth&&!isNaN(rs.getWidth(vs))&&(ys=rs.getWidth(vs)),rs.getHeight&&!isNaN(rs.getHeight(vs))&&(gs=rs.getHeight(vs));var xs=Math.max(gs,ys);ls.push(xs)}rs.barnesHut===void 0&&fs>250&&(rs.barnesHut=!0),rs.prune===void 0&&fs>100&&(rs.prune=!0),this.maxIteration===0&&!rs.prune?(us=250,fs<=200&&fs>100?us=1e3:fs>200&&(us=1200),this.maxIteration=us):this.maxIteration===0&&is&&(us=100,fs<=200&&fs>100?us=500:fs>200&&(us=950),this.maxIteration=us),rs.kr||(rs.kr=50,fs>100&&fs<=500?rs.kr=20:fs>500&&(rs.kr=1)),rs.kg||(rs.kg=20,fs>100&&fs<=500?rs.kg=10:fs>500&&(rs.kg=1)),this.nodes=rs.updateNodesByForces(ls),os()},ts.prototype.updateNodesByForces=function(rs){for(var as=this,os=as.edges,is=as.maxIteration,us=as.nodes,ls=os.filter(function(Ps){var Ds=(0,util_1.getEdgeTerminal)(Ps,"source"),Fs=(0,util_1.getEdgeTerminal)(Ps,"target");return Ds!==Fs}),fs=us.length,hs=ls.length,vs=[],gs={},ys={},xs=[],ms=0;ms<fs;ms+=1)gs[us[ms].id]=ms,vs[ms]=0,(us[ms].x===void 0||isNaN(us[ms].x))&&(us[ms].x=Math.random()*1e3),(us[ms].y===void 0||isNaN(us[ms].y))&&(us[ms].y=Math.random()*1e3),xs.push({x:us[ms].x,y:us[ms].y});for(var ms=0;ms<hs;ms+=1){for(var Ss=void 0,Ms=void 0,$s=0,bs=0,Cs=0;Cs<fs;Cs+=1){var As=(0,util_1.getEdgeTerminal)(ls[ms],"source"),Is=(0,util_1.getEdgeTerminal)(ls[ms],"target");us[Cs].id===As?(Ss=us[Cs],$s=Cs):us[Cs].id===Is&&(Ms=us[Cs],bs=Cs),ys[ms]={sourceIdx:$s,targetIdx:bs}}Ss&&(vs[gs[Ss.id]]+=1),Ms&&(vs[gs[Ms.id]]+=1)}var ks=is;if(us=this.iterate(ks,gs,ys,hs,vs,rs),as.prune){for(var Cs=0;Cs<hs;Cs+=1)vs[ys[Cs].sourceIdx]<=1?(us[ys[Cs].sourceIdx].x=us[ys[Cs].targetIdx].x,us[ys[Cs].sourceIdx].y=us[ys[Cs].targetIdx].y):vs[ys[Cs].targetIdx]<=1&&(us[ys[Cs].targetIdx].x=us[ys[Cs].sourceIdx].x,us[ys[Cs].targetIdx].y=us[ys[Cs].sourceIdx].y);as.prune=!1,as.barnesHut=!1,ks=100,us=this.iterate(ks,gs,ys,hs,vs,rs)}return us},ts.prototype.iterate=function(rs,as,os,is,us,ls){for(var fs=this,hs=fs.nodes,vs=fs.kr,gs=fs.preventOverlap,ys=fs.barnesHut,xs=hs.length,ms=0,Ss=100,Ms=rs,$s=50,bs=[],Cs=[],As=[],Is=0;Is<xs;Is+=1)if(bs[2*Is]=0,bs[2*Is+1]=0,ys){var ks={id:Is,rx:hs[Is].x,ry:hs[Is].y,mass:1,g:vs,degree:us[Is]};As[Is]=new body_1.default(ks)}for(;Ms>0;){for(var Is=0;Is<xs;Is+=1)Cs[2*Is]=bs[2*Is],Cs[2*Is+1]=bs[2*Is+1],bs[2*Is]=0,bs[2*Is+1]=0;bs=this.getAttrForces(Ms,$s,is,as,os,us,ls,bs),ys&&(gs&&Ms>$s||!gs)?bs=this.getOptRepGraForces(bs,As,us):bs=this.getRepGraForces(Ms,$s,bs,Ss,ls,us);var Ps=this.updatePos(bs,Cs,ms,us);hs=Ps.nodes,ms=Ps.sg,Ms--,fs.tick&&fs.tick()}return hs},ts.prototype.getAttrForces=function(rs,as,os,is,us,ls,fs,hs){for(var vs=this,gs=vs.nodes,ys=vs.preventOverlap,xs=vs.dissuadeHubs,ms=vs.mode,Ss=vs.prune,Ms=0;Ms<os;Ms+=1){var $s=gs[us[Ms].sourceIdx],bs=us[Ms].sourceIdx,Cs=gs[us[Ms].targetIdx],As=us[Ms].targetIdx;if(!(Ss&&(ls[bs]<=1||ls[As]<=1))){var Is=[Cs.x-$s.x,Cs.y-$s.y],ks=Math.hypot(Is[0],Is[1]);ks=ks<1e-4?1e-4:ks,Is[0]=Is[0]/ks,Is[1]=Is[1]/ks,ys&&rs<as&&(ks=ks-fs[bs]-fs[As]);var Ps=ks,Ds=Ps;ms==="linlog"&&(Ps=Math.log(1+ks),Ds=Ps),xs&&(Ps=ks/ls[bs],Ds=ks/ls[As]),ys&&rs<as&&ks<=0?(Ps=0,Ds=0):ys&&rs<as&&ks>0&&(Ps=ks,Ds=ks),hs[2*is[$s.id]]+=Ps*Is[0],hs[2*is[Cs.id]]-=Ds*Is[0],hs[2*is[$s.id]+1]+=Ps*Is[1],hs[2*is[Cs.id]+1]-=Ds*Is[1]}}return hs},ts.prototype.getRepGraForces=function(rs,as,os,is,us,ls){for(var fs=this,hs=fs.nodes,vs=fs.preventOverlap,gs=fs.kr,ys=fs.kg,xs=fs.center,ms=fs.prune,Ss=hs.length,Ms=0;Ms<Ss;Ms+=1){for(var $s=Ms+1;$s<Ss;$s+=1)if(!(ms&&(ls[Ms]<=1||ls[$s]<=1))){var bs=[hs[$s].x-hs[Ms].x,hs[$s].y-hs[Ms].y],Cs=Math.hypot(bs[0],bs[1]);Cs=Cs<1e-4?1e-4:Cs,bs[0]=bs[0]/Cs,bs[1]=bs[1]/Cs,vs&&rs<as&&(Cs=Cs-us[Ms]-us[$s]);var As=gs*(ls[Ms]+1)*(ls[$s]+1)/Cs;vs&&rs<as&&Cs<0?As=is*(ls[Ms]+1)*(ls[$s]+1):vs&&rs<as&&Cs===0?As=0:vs&&rs<as&&Cs>0&&(As=gs*(ls[Ms]+1)*(ls[$s]+1)/Cs),os[2*Ms]-=As*bs[0],os[2*$s]+=As*bs[0],os[2*Ms+1]-=As*bs[1],os[2*$s+1]+=As*bs[1]}var Is=[hs[Ms].x-xs[0],hs[Ms].y-xs[1]],ks=Math.hypot(Is[0],Is[1]);Is[0]=Is[0]/ks,Is[1]=Is[1]/ks;var Ps=ys*(ls[Ms]+1);os[2*Ms]-=Ps*Is[0],os[2*Ms+1]-=Ps*Is[1]}return os},ts.prototype.getOptRepGraForces=function(rs,as,os){for(var is=this,us=is.nodes,ls=is.kg,fs=is.center,hs=is.prune,vs=us.length,gs=9e10,ys=-9e10,xs=9e10,ms=-9e10,Ss=0;Ss<vs;Ss+=1)hs&&os[Ss]<=1||(as[Ss].setPos(us[Ss].x,us[Ss].y),us[Ss].x>=ys&&(ys=us[Ss].x),us[Ss].x<=gs&&(gs=us[Ss].x),us[Ss].y>=ms&&(ms=us[Ss].y),us[Ss].y<=xs&&(xs=us[Ss].y));for(var Ms=Math.max(ys-gs,ms-xs),$s={xmid:(ys+gs)/2,ymid:(ms+xs)/2,length:Ms,massCenter:fs,mass:vs},bs=new quad_1.default($s),Cs=new quadTree_1.default(bs),Ss=0;Ss<vs;Ss+=1)hs&&os[Ss]<=1||as[Ss].in(bs)&&Cs.insert(as[Ss]);for(var Ss=0;Ss<vs;Ss+=1)if(!(hs&&os[Ss]<=1)){as[Ss].resetForce(),Cs.updateForce(as[Ss]),rs[2*Ss]-=as[Ss].fx,rs[2*Ss+1]-=as[Ss].fy;var As=[us[Ss].x-fs[0],us[Ss].y-fs[1]],Is=Math.hypot(As[0],As[1]);Is=Is<1e-4?1e-4:Is,As[0]=As[0]/Is,As[1]=As[1]/Is;var ks=ls*(os[Ss]+1);rs[2*Ss]-=ks*As[0],rs[2*Ss+1]-=ks*As[1]}return rs},ts.prototype.updatePos=function(rs,as,os,is){for(var us=this,ls=us.nodes,fs=us.ks,hs=us.tao,vs=us.prune,gs=us.ksmax,ys=ls.length,xs=[],ms=[],Ss=0,Ms=0,$s=0;$s<ys;$s+=1)if(!(vs&&is[$s]<=1)){var bs=[rs[2*$s]-as[2*$s],rs[2*$s+1]-as[2*$s+1]],Cs=Math.hypot(bs[0],bs[1]),As=[rs[2*$s]+as[2*$s],rs[2*$s+1]+as[2*$s+1]],Is=Math.hypot(As[0],As[1]);xs[$s]=Cs,ms[$s]=Is/2,Ss+=(is[$s]+1)*xs[$s],Ms+=(is[$s]+1)*ms[$s]}var ks=os;os=hs*Ms/Ss,ks!==0&&(os=os>1.5*ks?1.5*ks:os);for(var $s=0;$s<ys;$s+=1)if(!(vs&&is[$s]<=1)&&!((0,util_1.isNumber)(ls[$s].fx)&&(0,util_1.isNumber)(ls[$s].fy))){var Ps=fs*os/(1+os*Math.sqrt(xs[$s])),Ds=Math.hypot(rs[2*$s],rs[2*$s+1]);Ds=Ds<1e-4?1e-4:Ds;var Fs=gs/Ds;Ps=Ps>Fs?Fs:Ps;var Rs=Ps*rs[2*$s],js=Ps*rs[2*$s+1];ls[$s].x+=Rs,ls[$s].y+=js}return{nodes:ls,sg:os}},ts}(base_1$1.Base);forceAtlas2.ForceAtlas2Layout=ForceAtlas2Layout;var er={},core={},forceGrid={},grid={},__assign$d=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$d=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$d.apply(this,arguments)};Object.defineProperty(grid,"__esModule",{value:!0});var Grid$2=function(){function ns(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return ns.prototype.init=function(ts,rs,as){this.cells=[],this.CELL_W=as.CELL_W||ns.DEFAULT_CELL_W,this.CELL_H=as.CELL_H||ns.DEFAULT_CELL_H,this.columnNum=Math.ceil(ts/this.CELL_W),this.rowNum=Math.ceil(rs/this.CELL_H),ns.MIN_DIST=Math.pow(ts,2)+Math.pow(rs,2);for(var os=0;os<this.columnNum;os++){for(var is=[],us=0;us<this.rowNum;us++){var ls={dx:os,dy:us,x:os*this.CELL_W,y:us*this.CELL_H,occupied:!1};is.push(ls)}this.cells.push(is)}},ns.prototype.findGridByNodeId=function(ts){for(var rs,as,os=0;os<this.columnNum;os++)for(var is=0;is<this.rowNum;is++)if(this.cells[os][is].node&&((as=(rs=this.cells[os][is])===null||rs===void 0?void 0:rs.node)===null||as===void 0?void 0:as.id)===ts)return{column:os,row:is};return null},ns.prototype.sqdist=function(ts,rs){return Math.pow(ts.x-rs.x,2)+Math.pow(ts.y-rs.y,2)},ns.prototype.occupyNearest=function(ts){for(var rs=ns.MIN_DIST,as,os=null,is=0;is<this.columnNum;is++)for(var us=0;us<this.rowNum;us++)!this.cells[is][us].occupied&&(as=this.sqdist(ts,this.cells[is][us]))<rs&&(rs=as,os=this.cells[is][us]);return os&&(os.occupied=!0),os},ns.prototype.insertColumn=function(ts,rs){if(!(rs<=0)){for(var as=0;as<rs;as++){this.cells[as+this.columnNum]=[];for(var os=0;os<this.rowNum;os++)this.cells[as+this.columnNum][os]={dx:as,dy:os,x:as*this.CELL_W,y:os*this.CELL_H,occupied:!1,node:null}}for(var as=this.columnNum-1;as>ts;as--)for(var os=0;os<this.rowNum;os++)this.cells[as+rs][os]=__assign$d(__assign$d({},this.cells[as][os]),{x:(as+rs)*this.CELL_W,y:os*this.CELL_H}),this.cells[as][os]={x:as*this.CELL_W,y:os*this.CELL_H,occupied:!0,node:null};for(var os=0;os<this.additionColumn.length;os++)this.additionColumn[os]>=ts&&(this.additionColumn[os]+=rs);for(var as=0;as<rs;as++)this.additionColumn.push(ts+as+1);this.columnNum+=rs}},ns.prototype.insertRow=function(ts,rs){if(!(rs<=0)){for(var as=0;as<rs;as++)for(var os=0;os<this.columnNum;os++)this.cells[os][as+this.rowNum]={dx:os,dy:as,x:os*this.CELL_W,y:as*this.CELL_H,occupied:!1,node:null};for(var os=0;os<this.columnNum;os++)for(var as=this.rowNum-1;as>ts;as--)this.cells[os][as+rs]=__assign$d(__assign$d({},this.cells[os][as]),{dx:os,dy:as+rs,x:os*this.CELL_W,y:(as+rs)*this.CELL_H}),this.cells[os][as]={dx:os,dy:as,x:os*this.CELL_W,y:as*this.CELL_H,occupied:!1,node:null};for(var as=0;as<this.additionRow.length;as++)this.additionRow[as]>=ts&&(this.additionRow[as]+=rs);for(var os=0;os<rs;os++)this.additionRow.push(ts+os+1);this.rowNum+=rs}},ns.prototype.getNodes=function(){for(var ts=[],rs=0;rs<this.columnNum;rs++)for(var as=0;as<this.rowNum;as++)this.cells[rs][as].node&&ts.push(this.cells[rs][as]);return ts},ns.MIN_DIST=50,ns.DEFAULT_CELL_W=80,ns.DEFAULT_CELL_H=80,ns}();grid.default=Grid$2;var __importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(ns){return ns&&ns.__esModule?ns:{default:ns}};Object.defineProperty(forceGrid,"__esModule",{value:!0});var grid_1=__importDefault$2(grid);function layout$4(ns,ts){if(!ns.nodes||ns.nodes.length===0)return ns;var rs=ts.width,as=ts.height,os=ts.nodeMinGap,is=1e4,us=1e4;ns.nodes.forEach(function(bs){var Cs=bs.size[0]||50,As=bs.size[1]||50;is=Math.min(Cs,is),us=Math.min(As,us)});var ls=new grid_1.default;ls.init(rs,as,{CELL_H:us,CELL_W:is}),ns.nodes.forEach(function(bs){var Cs=ls.occupyNearest(bs);Cs&&(Cs.node={id:bs.id,size:bs.size},bs.x=Cs.x,bs.y=Cs.y,bs.dx=Cs.dx,bs.dy=Cs.dy)});for(var fs=0;fs<ns.nodes.length;fs++){var hs=ns.nodes[fs],vs=ls.findGridByNodeId(hs.id);if(!vs)throw new Error("can not find node cell");var gs=vs.column,ys=vs.row;if(hs.size[0]+os>is){for(var xs=Math.ceil((hs.size[0]+os)/is)-1,ms=xs,Ss=0;Ss<xs;Ss++){var Ms=ls.additionColumn.indexOf(gs+Ss+1)>-1;if(Ms&&!ls.cells[gs+Ss+1][ys].node)ms--;else break}ls.insertColumn(gs,ms)}if(hs.size[1]+os>us){for(var xs=Math.ceil((hs.size[1]+os)/us)-1,ms=xs,Ss=0;Ss<xs;Ss++){var Ms=ls.additionRow.indexOf(ys+Ss+1)>-1;if(Ms&&!ls.cells[gs][ys+Ss+1].node)ms--;else break}ls.insertRow(ys,ms)}}for(var fs=0;fs<ls.columnNum;fs++)for(var $s=function(Cs){var As=ls.cells[fs][Cs];if(As.node){var Is=ns.nodes.find(function(ks){var Ps;return ks.id===((Ps=As==null?void 0:As.node)===null||Ps===void 0?void 0:Ps.id)});Is&&(Is.x=As.x+Is.size[0]/2,Is.y=As.y+Is.size[1]/2)}},Ss=0;Ss<ls.rowNum;Ss++)$s(Ss)}forceGrid.default=layout$4;var mysqlWorkbench={};Object.defineProperty(mysqlWorkbench,"__esModule",{value:!0});var graphWidth=1200,graphHeight=800,OVERLAP_QUOT=1e7,MIN_DIST=10,M_PI=3.141592653589793,M_PI_2=1.5707963267948966,PI_38=M_PI*.375,PI_58=M_PI*.625,nodeEdgeMap=new Map,CELL_W=10,CELL_H=10,T$1=.8,T_MIN=.1,R$1=.5;function distanceToNode(ns,ts,rs){var as=ns.x-ns.size[0]/2,os=ns.y-ns.size[1]/2,is=ns.x+ns.size[0]/2,us=ns.y+ns.size[1]/2,ls=ts.x-ts.size[0]/2,fs=ts.y-ts.size[1]/2,hs=ts.x+ts.size[0]/2,vs=ts.y+ts.size[1]/2,gs=ns.x,ys=ns.y,xs=ts.x,ms=ts.y,Ss=xs-gs,Ms=Math.atan2(Ss,ms-ys),$s=0,bs=0,Cs=0,As=0;Ms>M_PI_2?(bs=os-vs,$s=ls-is,Cs=parseFloat(bs?(bs/Math.cos(Ms)).toFixed(2):$s.toFixed(2)),As=parseFloat($s?($s/Math.sin(Ms)).toFixed(2):bs.toFixed(2))):0<Ms&&Ms<=M_PI_2?(bs=fs-us,$s=ls-is,bs>$s?Cs=As=parseFloat(bs?(bs/Math.cos(Ms)).toFixed(2):$s.toFixed(2)):Cs=As=parseFloat($s?($s/Math.sin(Ms)).toFixed(2):bs.toFixed(2))):Ms<-M_PI_2?(bs=os-vs,$s=-(hs-as),bs>$s?Cs=As=parseFloat(bs?(bs/Math.cos(Ms)).toFixed(2):$s.toFixed(2)):Cs=As=parseFloat($s?($s/Math.sin(Ms)).toFixed(2):bs.toFixed(2))):(bs=fs-us,Math.abs(Ss)>(is-as)/2?$s=as-hs:$s=Ss,bs>$s?Cs=As=parseFloat(bs?(bs/Math.cos(Ms)).toFixed(2):$s.toFixed(2)):Cs=As=parseFloat($s&&Ms!==0?($s/Math.sin(Ms)).toFixed(2):bs.toFixed(2)));var Is=parseFloat(Ms.toFixed(2)),ks=rs;return rs&&(ks=PI_38<Is&&Is<PI_58),{distance:Math.abs(Cs<As?Cs:As),isHoriz:ks}}function calcNodePair(ns,ts){var rs=nodeEdgeMap.get(ns.id)||[],as=rs.find(function(qs){return qs.source===ts.id||qs.target===ts.id}),os=ns.size[0]*ns.size[1],is=ts.size[0]*ts.size[1],us=os>is?ts:ns,ls=os>is?ns:ts,fs=us.x-us.size[0]/2,hs=us.y-us.size[1]/2,vs=us.x+us.size[0]/2,gs=us.y+us.size[1]/2,ys=ls.x-ls.size[0]/2,xs=ls.y-ls.size[1]/2,ms=ls.x+ls.size[0]/2,Ss=ls.y+ls.size[1]/2,Ms=us.x,$s=us.y,bs=ls.x,Cs=ls.y,As=vs>=ys&&ms>=fs&&gs>=xs&&Ss>=hs,Is=0,ks=0;if(As){ks=Math.sqrt(Math.pow(bs-Ms,2)+Math.pow(Cs-$s,2));var Ps=fs>ys?fs:ys,Ds=hs>xs?hs:xs,Fs=vs<ms?vs:ms,Rs=gs<Ss?gs:Ss,js=Fs-Ps,zs=Rs-Ds,Us=js*zs;ks===0&&(ks=1e-7),Is=MIN_DIST*1/ks*100+Us,Is*=OVERLAP_QUOT}else{var Ys=!1,Ks=distanceToNode(us,ls,Ys);ks=Ks.distance,Ys=Ks.isHoriz,ks<=MIN_DIST?ks!==0?as?Is+=MIN_DIST+OVERLAP_QUOT*1/ks:Is+=MIN_DIST+OVERLAP_QUOT*MIN_DIST/ks:Is+=OVERLAP_QUOT:(Is+=ks,as&&(Is+=ks*ks))}return Is}function calcEnergy(ns){for(var ts=0,rs=0;rs<ns.length;rs++){var as=ns[rs];(as.x<0||as.y<0||as.x>graphWidth||as.y>graphHeight)&&(ts+=1e12);for(var os=rs+1;os<ns.length;os++)ts+=calcNodePair(as,ns[os])}return ts}function isCorrectPosition(ns,ts,rs,as){var os=new Map;rs.forEach(function(Ms,$s){os.set(Ms.id,Ms)});var is=as.filter(function(Ms){return Ms.source===ns.id||Ms.target===ns.id})||[],us=[];is.forEach(function(Ms){var $s=Ms.source===ns.id?Ms.target:Ms.source,bs=os.get($s);bs&&us.push(bs)});for(var ls=!0,fs=0;fs<us.length;fs++){var hs=us[fs],vs=Math.atan((ns.y-hs.y)/(hs.x-ns.y))*180,gs=Math.atan((ts.y-hs.y)/(hs.x-ts.y))*180,ys=vs<30||vs>150,xs=gs<30||gs>150,ms=vs>70&&vs<110,Ss=gs>70&&gs<110;if(ys&&!xs||vs*gs<0){ls=!1;break}else if(ms&&!Ss||vs*gs<0){ls=!1;break}else if((hs.x-ns.x)*(hs.x-ts.x)<0){ls=!1;break}else if((hs.y-ns.y)*(hs.y-ts.y)<0){ls=!1;break}}return ls}function shuffle(ns,ts){for(var rs=!1,as=1,os=CELL_W*as,is=CELL_H*as,us=[os,-os,0,0],ls=[0,0,is,-is],fs=0;fs<ns.length;++fs)for(var hs=ns[fs],vs=calcNodeEnergy(hs,ns),gs=0;gs<us.length;gs++){var ys=isCorrectPosition(hs,{x:hs.x+us[gs],y:hs.y+ls[gs]},ns,ts);if(ys){hs.x+=us[gs],hs.y+=ls[gs];var xs=calcNodeEnergy(hs,ns),ms=Math.random();xs<vs||ms<T$1&&ms>T_MIN?(vs=xs,rs=!0):(hs.x-=us[gs],hs.y-=ls[gs])}}return T$1>T_MIN&&(T$1*=R$1),rs?calcEnergy(ns):0}function calcNodeEnergy(ns,ts){var rs=0;(ns.x<0||ns.y<0||ns.x+ns.size[0]+20>graphWidth||ns.y+ns.size[1]+20>graphHeight)&&(rs+=1e12);for(var as=0;as<ts.length;++as)ns.id!==ts[as].id&&(rs+=calcNodePair(ns,ts[as]));return rs}function layout$3(ns,ts){if(ns.length===0)return{nodes:ns,edges:ts};ns.forEach(function(hs){var vs=ts.filter(function(gs){return gs.source===hs.id||gs.target===hs.id});nodeEdgeMap.set(hs,vs)}),ns.sort(function(hs,vs){var gs,ys;return((gs=nodeEdgeMap.get(hs.id))===null||gs===void 0?void 0:gs.length)-((ys=nodeEdgeMap.get(vs.id))===null||ys===void 0?void 0:ys.length)});for(var rs=calcEnergy(ns),as=20,os=1,is=0,us=50,ls=0;as>0&&(ls++,!(ls>=us));){var fs=shuffle(ns,ts);fs!==0&&(is=fs),os=is-rs,rs=is,os===0?--as:as=20}return ns.forEach(function(hs){hs.x=hs.x-hs.size[0]/2,hs.y=hs.y-hs.size[1]/2}),{nodes:ns,edges:ts}}mysqlWorkbench.default=layout$3;var __assign$c=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$c=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$c.apply(this,arguments)},__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ns,ts,rs,as){as===void 0&&(as=rs);var os=Object.getOwnPropertyDescriptor(ts,rs);(!os||("get"in os?!ts.__esModule:os.writable||os.configurable))&&(os={enumerable:!0,get:function(){return ts[rs]}}),Object.defineProperty(ns,as,os)}:function(ns,ts,rs,as){as===void 0&&(as=rs),ns[as]=ts[rs]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(ns,ts){Object.defineProperty(ns,"default",{enumerable:!0,value:ts})}:function(ns,ts){ns.default=ts}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(ns){if(ns&&ns.__esModule)return ns;var ts={};if(ns!=null)for(var rs in ns)rs!=="default"&&Object.prototype.hasOwnProperty.call(ns,rs)&&__createBinding(ts,ns,rs);return __setModuleDefault(ts,ns),ts},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(ns){return ns&&ns.__esModule?ns:{default:ns}};Object.defineProperty(core,"__esModule",{value:!0});var d3Force=__importStar(require$$0$2),forceGrid_1=__importDefault$1(forceGrid),mysqlWorkbench_1=__importDefault$1(mysqlWorkbench),dagre_1=dagre$1;function layout$2(ns,ts){var rs=ns.nodes,as=ns.edges,os=ts.width,is=ts.height;if(!(rs!=null&&rs.length))return Promise.resolve();var us=[];rs.forEach(function(ms){var Ss=as.filter(function($s){return $s.source===ms.id||$s.target===ms.id});if(Ss.length>1){var Ms=__assign$c({},ms);delete Ms.size,us.push(Ms)}});var ls=[];as.forEach(function(ms){var Ss=us.find(function($s){return $s.id===ms.source}),Ms=us.find(function($s){return $s.id===ms.target});Ss&&Ms&&ls.push(ms)});var fs=new dagre_1.DagreLayout({type:"dagre",ranksep:ts.nodeMinGap,nodesep:ts.nodeMinGap}),hs=fs.layout({nodes:us,edges:ls}).nodes;rs.forEach(function(ms){var Ss=(hs||[]).find(function(Ms){return Ms.id===ms.id});ms.x=(Ss==null?void 0:Ss.x)||os/2,ms.y=(Ss==null?void 0:Ss.y)||is/2});var vs=JSON.parse(JSON.stringify(rs)),gs=JSON.parse(JSON.stringify(as)),ys=d3Force.forceSimulation().nodes(vs).force("link",d3Force.forceLink(gs).id(function(ms){return ms.id}).distance(function(ms){var Ss=ls.find(function(Ms){return Ms.source===ms.source&&Ms.target===ms.target});return Ss?30:20})).force("charge",d3Force.forceManyBody()).force("center",d3Force.forceCenter(os/2,is/2)).force("x",d3Force.forceX(os/2)).force("y",d3Force.forceY(is/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),xs=new Promise(function(ms){ys.on("end",function(){rs.forEach(function(Is){var ks=vs.find(function(Ps){return Ps.id===Is.id});ks&&(Is.x=ks.x,Is.y=ks.y)});var Ss=Math.min.apply(Math,rs.map(function(Is){return Is.x})),Ms=Math.max.apply(Math,rs.map(function(Is){return Is.x})),$s=Math.min.apply(Math,rs.map(function(Is){return Is.y})),bs=Math.max.apply(Math,rs.map(function(Is){return Is.y})),Cs=os/(Ms-Ss),As=is/(bs-$s);rs.forEach(function(Is){Is.x!==void 0&&Cs<1&&(Is.x=(Is.x-Ss)*Cs),Is.y!==void 0&&As<1&&(Is.y=(Is.y-$s)*As)}),rs.forEach(function(Is){Is.sizeTemp=Is.size,Is.size=[10,10]}),(0,mysqlWorkbench_1.default)(rs,as),rs.forEach(function(Is){Is.size=Is.sizeTemp||[],delete Is.sizeTemp}),(0,forceGrid_1.default)({nodes:rs,edges:as},ts),ms()})});return xs}core.default=layout$2;var __extends$d=commonjsGlobal&&commonjsGlobal.__extends||function(){var ns=function(ts,rs){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(as,os){as.__proto__=os}||function(as,os){for(var is in os)Object.prototype.hasOwnProperty.call(os,is)&&(as[is]=os[is])},ns(ts,rs)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(ns){return ns&&ns.__esModule?ns:{default:ns}};Object.defineProperty(er,"__esModule",{value:!0});er.ERLayout=void 0;var base_1=base$1,core_1=__importDefault(core),ERLayout=function(ns){__extends$d(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.width=300,as.height=300,as.nodeMinGap=50,as.onLayoutEnd=function(){},rs&&as.updateCfg(rs),as}return ts.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},ts.prototype.execute=function(){var rs=this,as=rs.nodes,os=rs.edges;return as==null||as.forEach(function(is){is.size||(is.size=[50,50])}),(0,core_1.default)({nodes:as,edges:os},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){rs.onLayoutEnd&&rs.onLayoutEnd()})},ts.prototype.getType=function(){return"er"},ts}(base_1.Base);er.ERLayout=ERLayout;var layout$1={},hasRequiredLayout$1;function requireLayout$1(){if(hasRequiredLayout$1)return layout$1;hasRequiredLayout$1=1,Object.defineProperty(layout$1,"__esModule",{value:!0}),layout$1.Layouts=layout$1.Layout=void 0;var ns=registy,ts=grid$1,rs=random,as=force2,os=gForce$1,is=force$1,us=circular,ls=dagre$1,fs=radial$1,hs=concentric,vs=mds,gs=fruchterman$1,ys=fruchterman,xs=gForce,ms=comboForce,Ss=requireComboCombined(),Ms=forceAtlas2,$s=er,bs=dagreCompound,Cs=requireUtil(),As=function(){function Is(ks){var Ps=(0,ns.getLayoutByName)(ks.type);this.layoutInstance=new Ps(ks)}return Is.prototype.layout=function(ks){return this.layoutInstance.layout(ks)},Is.prototype.updateCfg=function(ks){this.layoutInstance.updateCfg(ks)},Is.prototype.init=function(ks){this.correctLayers(ks.nodes),this.layoutInstance.init(ks)},Is.prototype.correctLayers=function(ks){if(ks!=null&&ks.length){var Ps=1/0,Ds=[];if(ks.forEach(function(Rs){(0,Cs.isString)(Rs.layer)&&(Rs.layer=parseInt(Rs.layer,10)),!(Rs.layer===void 0||isNaN(Rs.layer))&&(Ds.push(Rs),Rs.layer<Ps&&(Ps=Rs.layer))}),Ps<=0){var Fs=Math.abs(Ps)+1;Ds.forEach(function(Rs){return Rs.layer+=Fs})}}},Is.prototype.execute=function(){this.layoutInstance.execute()},Is.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},Is.prototype.destroy=function(){return this.layoutInstance.destroy()},Is}();return layout$1.Layout=As,layout$1.Layouts={force:is.ForceLayout,fruchterman:gs.FruchtermanLayout,forceAtlas2:Ms.ForceAtlas2Layout,gForce:os.GForceLayout,force2:as.Force2Layout,dagre:ls.DagreLayout,dagreCompound:bs.DagreCompoundLayout,circular:us.CircularLayout,radial:fs.RadialLayout,concentric:hs.ConcentricLayout,grid:ts.GridLayout,mds:vs.MDSLayout,comboForce:ms.ComboForceLayout,comboCombined:Ss.ComboCombinedLayout,random:rs.RandomLayout,"gForce-gpu":xs.GForceGPULayout,"fruchterman-gpu":ys.FruchtermanGPULayout,er:$s.ERLayout},layout$1}var types={};Object.defineProperty(types,"__esModule",{value:!0});var hasRequiredLayout;function requireLayout(){return hasRequiredLayout||(hasRequiredLayout=1,function(ns){var ts=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ks,Ps,Ds,Fs){Fs===void 0&&(Fs=Ds);var Rs=Object.getOwnPropertyDescriptor(Ps,Ds);(!Rs||("get"in Rs?!Ps.__esModule:Rs.writable||Rs.configurable))&&(Rs={enumerable:!0,get:function(){return Ps[Ds]}}),Object.defineProperty(ks,Fs,Rs)}:function(ks,Ps,Ds,Fs){Fs===void 0&&(Fs=Ds),ks[Fs]=Ps[Ds]}),rs=commonjsGlobal&&commonjsGlobal.__exportStar||function(ks,Ps){for(var Ds in ks)Ds!=="default"&&!Object.prototype.hasOwnProperty.call(Ps,Ds)&&ts(Ps,ks,Ds)};Object.defineProperty(ns,"__esModule",{value:!0}),ns.ERLayout=ns.ForceAtlas2Layout=ns.ComboCombinedLayout=ns.ComboForceLayout=ns.GForceGPULayout=ns.FruchtermanGPULayout=ns.FruchtermanLayout=ns.MDSLayout=ns.ConcentricLayout=ns.RadialLayout=ns.DagreCompoundLayout=ns.DagreLayout=ns.CircularLayout=ns.ForceLayout=ns.Force2Layout=ns.GForceLayout=ns.RandomLayout=ns.GridLayout=ns.Layouts=ns.Layout=void 0;var as=grid$1;Object.defineProperty(ns,"GridLayout",{enumerable:!0,get:function(){return as.GridLayout}});var os=random;Object.defineProperty(ns,"RandomLayout",{enumerable:!0,get:function(){return os.RandomLayout}});var is=gForce$1;Object.defineProperty(ns,"GForceLayout",{enumerable:!0,get:function(){return is.GForceLayout}});var us=force2;Object.defineProperty(ns,"Force2Layout",{enumerable:!0,get:function(){return us.Force2Layout}});var ls=force$1;Object.defineProperty(ns,"ForceLayout",{enumerable:!0,get:function(){return ls.ForceLayout}});var fs=circular;Object.defineProperty(ns,"CircularLayout",{enumerable:!0,get:function(){return fs.CircularLayout}});var hs=dagre$1;Object.defineProperty(ns,"DagreLayout",{enumerable:!0,get:function(){return hs.DagreLayout}});var vs=dagreCompound;Object.defineProperty(ns,"DagreCompoundLayout",{enumerable:!0,get:function(){return vs.DagreCompoundLayout}});var gs=radial$1;Object.defineProperty(ns,"RadialLayout",{enumerable:!0,get:function(){return gs.RadialLayout}});var ys=concentric;Object.defineProperty(ns,"ConcentricLayout",{enumerable:!0,get:function(){return ys.ConcentricLayout}});var xs=mds;Object.defineProperty(ns,"MDSLayout",{enumerable:!0,get:function(){return xs.MDSLayout}});var ms=fruchterman$1;Object.defineProperty(ns,"FruchtermanLayout",{enumerable:!0,get:function(){return ms.FruchtermanLayout}});var Ss=fruchterman;Object.defineProperty(ns,"FruchtermanGPULayout",{enumerable:!0,get:function(){return Ss.FruchtermanGPULayout}});var Ms=gForce;Object.defineProperty(ns,"GForceGPULayout",{enumerable:!0,get:function(){return Ms.GForceGPULayout}});var $s=comboForce;Object.defineProperty(ns,"ComboForceLayout",{enumerable:!0,get:function(){return $s.ComboForceLayout}});var bs=requireComboCombined();Object.defineProperty(ns,"ComboCombinedLayout",{enumerable:!0,get:function(){return bs.ComboCombinedLayout}});var Cs=forceAtlas2;Object.defineProperty(ns,"ForceAtlas2Layout",{enumerable:!0,get:function(){return Cs.ForceAtlas2Layout}});var As=er;Object.defineProperty(ns,"ERLayout",{enumerable:!0,get:function(){return As.ERLayout}});var Is=requireLayout$1();Object.defineProperty(ns,"Layout",{enumerable:!0,get:function(){return Is.Layout}}),Object.defineProperty(ns,"Layouts",{enumerable:!0,get:function(){return Is.Layouts}}),rs(types,ns)}(layout$7)),layout$7}(function(ns){var ts=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(os,is,us,ls){ls===void 0&&(ls=us);var fs=Object.getOwnPropertyDescriptor(is,us);(!fs||("get"in fs?!is.__esModule:fs.writable||fs.configurable))&&(fs={enumerable:!0,get:function(){return is[us]}}),Object.defineProperty(os,ls,fs)}:function(os,is,us,ls){ls===void 0&&(ls=us),os[ls]=is[us]}),rs=commonjsGlobal&&commonjsGlobal.__exportStar||function(os,is){for(var us in os)us!=="default"&&!Object.prototype.hasOwnProperty.call(is,us)&&ts(is,os,us)};Object.defineProperty(ns,"__esModule",{value:!0}),ns.getLayoutByName=ns.unRegisterLayout=ns.registerLayout=void 0;var as=registy;Object.defineProperty(ns,"registerLayout",{enumerable:!0,get:function(){return as.registerLayout}}),Object.defineProperty(ns,"unRegisterLayout",{enumerable:!0,get:function(){return as.unRegisterLayout}}),Object.defineProperty(ns,"getLayoutByName",{enumerable:!0,get:function(){return as.getLayoutByName}}),rs(requireLayout(),ns)})(lib);var hierarchy={exports:{}};(function(ns,ts){(function(as,os){ns.exports=os()})(typeof self<"u"?self:commonjsGlobal,function(){return function(rs){var as={};function os(is){if(as[is])return as[is].exports;var us=as[is]={i:is,l:!1,exports:{}};return rs[is].call(us.exports,us,us.exports,os),us.l=!0,us.exports}return os.m=rs,os.c=as,os.d=function(is,us,ls){os.o(is,us)||Object.defineProperty(is,us,{configurable:!1,enumerable:!0,get:ls})},os.n=function(is){var us=is&&is.__esModule?function(){return is.default}:function(){return is};return os.d(us,"a",us),us},os.o=function(is,us){return Object.prototype.hasOwnProperty.call(is,us)},os.p="",os(os.s=36)}([function(rs,as,os){var is=os(3);as.a=function(us){return Array.isArray?Array.isArray(us):Object(is.a)(us,"Array")}},function(rs,as,os){var is=function(us){return us!==null&&typeof us!="function"&&isFinite(us.length)};as.a=is},function(rs,as,os){var is=os(3);as.a=function(us){return Object(is.a)(us,"Function")}},function(rs,as,os){var is={}.toString,us=function(ls,fs){return is.call(ls)==="[object "+fs+"]"};as.a=us},function(rs,as,os){var is=os(3);as.a=function(us){return Object(is.a)(us,"String")}},function(rs,as,os){var is=os(3),us=function(ls){return Object(is.a)(ls,"Number")};as.a=us},function(rs,as,os){var is=os(38),us=is.mix;function ls(fs,hs,vs,gs){return gs===void 0&&(gs="height"),vs==="center"?(fs[gs]+hs[gs])/2:fs.height}rs.exports={assign:us,getHeight:ls}},function(rs,as,os){var is=function(us){return us==null};as.a=is},function(rs,as,os){var is=os(0),us=os(12);function ls(fs,hs){if(fs){var vs;if(Object(is.a)(fs))for(var gs=0,ys=fs.length;gs<ys&&(vs=hs(fs[gs],gs),vs!==!1);gs++);else if(Object(us.a)(fs)){for(var xs in fs)if(fs.hasOwnProperty(xs)&&(vs=hs(fs[xs],xs),vs===!1))break}}}as.a=ls},function(rs,as,os){var is=os(7);as.a=function(us){return Object(is.a)(us)?"":us.toString()}},function(rs,as,os){var is=os(14),us=os(3),ls=function(fs){if(!Object(is.a)(fs)||!Object(us.a)(fs,"Object"))return!1;if(Object.getPrototypeOf(fs)===null)return!0;for(var hs=fs;Object.getPrototypeOf(hs)!==null;)hs=Object.getPrototypeOf(hs);return Object.getPrototypeOf(fs)===hs};as.a=ls},function(rs,as,os){var is=os(18),us=function(){function ls(hs,vs){vs===void 0&&(vs={});var gs=this;gs.options=vs,gs.rootNode=is(hs,vs)}var fs=ls.prototype;return fs.execute=function(){throw new Error("please override this method")},ls}();rs.exports=us},function(rs,as,os){as.a=function(is){var us=typeof is;return is!==null&&us==="object"||us==="function"}},function(rs,as,os){var is=os(1),us=function(ls,fs){return Object(is.a)(ls)?ls.indexOf(fs)>-1:!1};as.a=us},function(rs,as,os){var is=function(us){return typeof us=="object"&&us!==null};as.a=is},function(rs,as,os){var is=os(8),us=os(2),ls=Object.values?function(fs){return Object.values(fs)}:function(fs){var hs=[];return Object(is.a)(fs,function(vs,gs){Object(us.a)(fs)&&gs==="prototype"||hs.push(vs)}),hs};as.a=ls},function(rs,as,os){as.a=us;function is(ls,fs){for(var hs in fs)fs.hasOwnProperty(hs)&&hs!=="constructor"&&fs[hs]!==void 0&&(ls[hs]=fs[hs])}function us(ls,fs,hs,vs){return fs&&is(ls,fs),hs&&is(ls,hs),vs&&is(ls,vs),ls}},function(rs,as,os){var is=os(35),us=["LR","RL","TB","BT","H","V"],ls=["LR","RL","H"],fs=function(gs){return ls.indexOf(gs)>-1},hs=us[0];rs.exports=function(vs,gs,ys){var xs=gs.direction||hs;if(gs.isHorizontal=fs(xs),xs&&us.indexOf(xs)===-1)throw new TypeError("Invalid direction: "+xs);if(xs===us[0])ys(vs,gs);else if(xs===us[1])ys(vs,gs),vs.right2left();else if(xs===us[2])ys(vs,gs);else if(xs===us[3])ys(vs,gs),vs.bottom2top();else if(xs===us[4]||xs===us[5]){var ms=is(vs,gs),Ss=ms.left,Ms=ms.right;ys(Ss,gs),ys(Ms,gs),gs.isHorizontal?Ss.right2left():Ss.bottom2top(),Ms.translate(Ss.x-Ms.x,Ss.y-Ms.y),vs.x=Ss.x,vs.y=Ms.y;var $s=vs.getBoundingBox();gs.isHorizontal?$s.top<0&&vs.translate(0,-$s.top):$s.left<0&&vs.translate(-$s.left,0)}var bs=gs.fixedRoot;return bs===void 0&&(bs=!0),bs&&vs.translate(-(vs.x+vs.width/2+vs.hgap),-(vs.y+vs.height/2+vs.vgap)),vs}},function(rs,as,os){var is=os(6),us=18,ls=us*2,fs=us,hs={getId:function(xs){return xs.id||xs.name},getPreH:function(xs){return xs.preH||0},getPreV:function(xs){return xs.preV||0},getHGap:function(xs){return xs.hgap||fs},getVGap:function(xs){return xs.vgap||fs},getChildren:function(xs){return xs.children},getHeight:function(xs){return xs.height||ls},getWidth:function(xs){var ms=xs.label||" ";return xs.width||ms.split("").length*us}};function vs(ys,xs){var ms=this;if(ms.vgap=ms.hgap=0,ys instanceof vs)return ys;ms.data=ys;var Ss=xs.getHGap(ys),Ms=xs.getVGap(ys);return ms.preH=xs.getPreH(ys),ms.preV=xs.getPreV(ys),ms.width=xs.getWidth(ys),ms.height=xs.getHeight(ys),ms.width+=ms.preH,ms.height+=ms.preV,ms.id=xs.getId(ys),ms.x=ms.y=0,ms.depth=0,ms.children||(ms.children=[]),ms.addGap(Ss,Ms),ms}is.assign(vs.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(xs,ms){var Ss=this;Ss.hgap+=xs,Ss.vgap+=ms,Ss.width+=2*xs,Ss.height+=2*ms},eachNode:function(xs){for(var ms=this,Ss=[ms],Ms;Ms=Ss.shift();)xs(Ms),Ss=Ms.children.concat(Ss)},DFTraverse:function(xs){this.eachNode(xs)},BFTraverse:function(xs){for(var ms=this,Ss=[ms],Ms;Ms=Ss.shift();)xs(Ms),Ss=Ss.concat(Ms.children)},getBoundingBox:function(){var xs={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(ms){xs.left=Math.min(xs.left,ms.x),xs.top=Math.min(xs.top,ms.y),xs.width=Math.max(xs.width,ms.x+ms.width),xs.height=Math.max(xs.height,ms.y+ms.height)}),xs},translate:function(xs,ms){xs===void 0&&(xs=0),ms===void 0&&(ms=0),this.eachNode(function(Ss){Ss.x+=xs,Ss.y+=ms,Ss.x+=Ss.preH,Ss.y+=Ss.preV})},right2left:function(){var xs=this,ms=xs.getBoundingBox();xs.eachNode(function(Ss){Ss.x=Ss.x-(Ss.x-ms.left)*2-Ss.width}),xs.translate(ms.width,0)},bottom2top:function(){var xs=this,ms=xs.getBoundingBox();xs.eachNode(function(Ss){Ss.y=Ss.y-(Ss.y-ms.top)*2-Ss.height}),xs.translate(0,ms.height)}});function gs(ys,xs,ms){xs===void 0&&(xs={}),xs=is.assign({},hs,xs);var Ss=new vs(ys,xs),Ms=[Ss],$s;if(!ms&&!ys.collapsed){for(;$s=Ms.shift();)if(!$s.data.collapsed){var bs=xs.getChildren($s.data),Cs=bs?bs.length:0;if($s.children=new Array(Cs),bs&&Cs)for(var As=0;As<Cs;As++){var Is=new vs(bs[As],xs);$s.children[As]=Is,Ms.push(Is),Is.parent=$s,Is.depth=$s.depth+1}}}return Ss}rs.exports=gs},function(rs,as,os){var is=os(1),us=function(ls,fs){if(!Object(is.a)(ls))return ls;for(var hs=[],vs=0;vs<ls.length;vs++){var gs=ls[vs];fs(gs,vs)&&hs.push(gs)}return hs};as.a=us},function(rs,as,os){var is=os(7),us=os(21);function ls(fs,hs){var vs=Object(us.a)(hs),gs=vs.length;if(Object(is.a)(fs))return!gs;for(var ys=0;ys<gs;ys+=1){var xs=vs[ys];if(hs[xs]!==fs[xs]||!(xs in fs))return!1}return!0}as.a=ls},function(rs,as,os){var is=os(8),us=os(2),ls=Object.keys?function(fs){return Object.keys(fs)}:function(fs){var hs=[];return Object(is.a)(fs,function(vs,gs){Object(us.a)(fs)&&gs==="prototype"||hs.push(gs)}),hs};as.a=ls},function(rs,as,os){var is=os(0);as.a=function(us){if(Object(is.a)(us))return us.reduce(function(ls,fs){return Math.max(ls,fs)},us[0])}},function(rs,as,os){var is=os(0);as.a=function(us){if(Object(is.a)(us))return us.reduce(function(ls,fs){return Math.min(ls,fs)},us[0])}},function(rs,as,os){var is=os(1),us=Array.prototype.splice,ls=function(hs,vs){if(!Object(is.a)(hs))return[];for(var gs=hs?vs.length:0,ys=gs-1;gs--;){var xs=void 0,ms=vs[gs];(gs===ys||ms!==xs)&&(xs=ms,us.call(hs,ms,1))}return hs};as.a=ls},function(rs,as,os){var is=os(8),us=os(0),ls=os(10),fs=function(hs,vs,gs){if(!Object(us.a)(hs)&&!Object(ls.a)(hs))return hs;var ys=gs;return Object(is.a)(hs,function(xs,ms){ys=vs(ys,xs,ms)}),ys};as.a=fs},function(rs,as,os){as.a=is;function is(us,ls){ls===void 0&&(ls=new Map);var fs=[];if(Array.isArray(us))for(var hs=0,vs=us.length;hs<vs;hs++){var gs=us[hs];ls.has(gs)||(fs.push(gs),ls.set(gs,!0))}return fs}},function(rs,as,os){as.a=fs;var is=os(0),us=os(2),ls=os(28);function fs(hs,vs){if(!vs)return{0:hs};if(!Object(us.a)(vs)){var gs=Object(is.a)(vs)?vs:vs.replace(/\s+/g,"").split("*");vs=function(ys){for(var xs="_",ms=0,Ss=gs.length;ms<Ss;ms++)xs+=ys[gs[ms]]&&ys[gs[ms]].toString();return xs}}return Object(ls.a)(hs,vs)}},function(rs,as,os){var is=os(0),us=os(2),ls=Object.prototype.hasOwnProperty;function fs(hs,vs){if(!vs||!Object(is.a)(hs))return{};for(var gs={},ys=Object(us.a)(vs)?vs:function(Ms){return Ms[vs]},xs,ms=0;ms<hs.length;ms++){var Ss=hs[ms];xs=ys(Ss),ls.call(gs,xs)?gs[xs].push(Ss):gs[xs]=[Ss]}return gs}as.a=fs},function(rs,as,os){as.a=function(is,us){return is.hasOwnProperty(us)}},function(rs,as,os){var is={}.toString,us=function(ls){return is.call(ls).replace(/^\[object /,"").replace(/]$/,"")};as.a=us},function(rs,as,os){var is=Object.prototype,us=function(ls){var fs=ls&&ls.constructor,hs=typeof fs=="function"&&fs.prototype||is;return ls===hs};as.a=us},function(rs,as,os){var is=os(2);as.a=function(us,ls){if(!Object(is.a)(us))throw new TypeError("Expected a function");var fs=function(){for(var hs=[],vs=0;vs<arguments.length;vs++)hs[vs]=arguments[vs];var gs=ls?ls.apply(this,hs):hs[0],ys=fs.cache;if(ys.has(gs))return ys.get(gs);var xs=us.apply(this,hs);return ys.set(gs,xs),xs};return fs.cache=new Map,fs}},function(rs,as,os){var is=os(14),us=os(1),ls=os(4),fs=function(hs,vs){if(hs===vs)return!0;if(!hs||!vs||Object(ls.a)(hs)||Object(ls.a)(vs))return!1;if(Object(us.a)(hs)||Object(us.a)(vs)){if(hs.length!==vs.length)return!1;for(var gs=!0,ys=0;ys<hs.length&&(gs=fs(hs[ys],vs[ys]),!!gs);ys++);return gs}if(Object(is.a)(hs)||Object(is.a)(vs)){var xs=Object.keys(hs),ms=Object.keys(vs);if(xs.length!==ms.length)return!1;for(var gs=!0,ys=0;ys<xs.length&&(gs=fs(hs[xs[ys]],vs[xs[ys]]),!!gs);ys++);return gs}return!1};as.a=fs},function(rs,as,os){var is=os(116),us=os(15),ls=os(32),fs=os(4),hs;as.a=Object(ls.a)(function(vs,gs){gs===void 0&&(gs={});var ys=gs.fontSize,xs=gs.fontFamily,ms=gs.fontWeight,Ss=gs.fontStyle,Ms=gs.fontVariant;return hs||(hs=document.createElement("canvas").getContext("2d")),hs.font=[Ss,Ms,ms,ys+"px",xs].join(" "),hs.measureText(Object(fs.a)(vs)?vs:"").width},function(vs,gs){return gs===void 0&&(gs={}),Object(is.a)([vs],Object(us.a)(gs)).join("")})},function(rs,as,os){var is=os(18);rs.exports=function(us,ls){for(var fs=is(us.data,ls,!0),hs=is(us.data,ls,!0),vs=us.children.length,gs=Math.round(vs/2),ys=ls.getSide||function(Ms,$s){return $s<gs?"right":"left"},xs=0;xs<vs;xs++){var ms=us.children[xs],Ss=ys(ms,xs);Ss==="right"?hs.children.push(ms):fs.children.push(ms)}return fs.eachNode(function(Ms){Ms.isRoot()||(Ms.side="left")}),hs.eachNode(function(Ms){Ms.isRoot()||(Ms.side="right")}),{left:fs,right:hs}}},function(rs,as,os){var is={compactBox:os(37),dendrogram:os(120),indented:os(122),mindmap:os(124)};rs.exports=is},function(rs,as,os){function is(ms,Ss){ms.prototype=Object.create(Ss.prototype),ms.prototype.constructor=ms,us(ms,Ss)}function us(ms,Ss){return us=Object.setPrototypeOf?Object.setPrototypeOf.bind():function($s,bs){return $s.__proto__=bs,$s},us(ms,Ss)}var ls=os(11),fs=os(119),hs=os(17),vs=os(6),gs=function(ms){is(Ss,ms);function Ss(){return ms.apply(this,arguments)||this}var Ms=Ss.prototype;return Ms.execute=function(){var bs=this;return hs(bs.rootNode,bs.options,fs)},Ss}(ls),ys={};function xs(ms,Ss){return Ss=vs.assign({},ys,Ss),new gs(ms,Ss).execute()}rs.exports=xs},function(rs,as,os){Object.defineProperty(as,"__esModule",{value:!0});var is=os(13);os.d(as,"contains",function(){return is.a}),os.d(as,"includes",function(){return is.a});var us=os(39);os.d(as,"difference",function(){return us.a});var ls=os(40);os.d(as,"find",function(){return ls.a});var fs=os(41);os.d(as,"findIndex",function(){return fs.a});var hs=os(42);os.d(as,"firstValue",function(){return hs.a});var vs=os(43);os.d(as,"flatten",function(){return vs.a});var gs=os(44);os.d(as,"flattenDeep",function(){return gs.a});var ys=os(45);os.d(as,"getRange",function(){return ys.a});var xs=os(46);os.d(as,"pull",function(){return xs.a});var ms=os(24);os.d(as,"pullAt",function(){return ms.a});var Ss=os(25);os.d(as,"reduce",function(){return Ss.a});var Ms=os(47);os.d(as,"remove",function(){return Ms.a});var $s=os(48);os.d(as,"sortBy",function(){return $s.a});var bs=os(49);os.d(as,"union",function(){return bs.a});var Cs=os(26);os.d(as,"uniq",function(){return Cs.a});var As=os(50);os.d(as,"valuesOfKey",function(){return As.a});var Is=os(51);os.d(as,"head",function(){return Is.a});var ks=os(52);os.d(as,"last",function(){return ks.a});var Ps=os(53);os.d(as,"startsWith",function(){return Ps.a});var Ds=os(54);os.d(as,"endsWith",function(){return Ds.a});var Fs=os(19);os.d(as,"filter",function(){return Fs.a});var Rs=os(55);os.d(as,"every",function(){return Rs.a});var js=os(56);os.d(as,"some",function(){return js.a});var zs=os(57);os.d(as,"group",function(){return zs.a});var Us=os(28);os.d(as,"groupBy",function(){return Us.a});var Ys=os(27);os.d(as,"groupToMap",function(){return Ys.a});var Ks=os(58);os.d(as,"getWrapBehavior",function(){return Ks.a});var qs=os(59);os.d(as,"wrapBehavior",function(){return qs.a});var _l=os(60);os.d(as,"number2color",function(){return _l.a});var Js=os(61);os.d(as,"parseRadius",function(){return Js.a});var Vs=os(62);os.d(as,"clamp",function(){return Vs.a});var Zs=os(63);os.d(as,"fixedBase",function(){return Zs.a});var Sl=os(64);os.d(as,"isDecimal",function(){return Sl.a});var Il=os(65);os.d(as,"isEven",function(){return Il.a});var Nl=os(66);os.d(as,"isInteger",function(){return Nl.a});var Tl=os(67);os.d(as,"isNegative",function(){return Tl.a});var _c=os(68);os.d(as,"isNumberEqual",function(){return _c.a});var l0=os(69);os.d(as,"isOdd",function(){return l0.a});var g0=os(70);os.d(as,"isPositive",function(){return g0.a});var R0=os(22);os.d(as,"max",function(){return R0.a});var V0=os(71);os.d(as,"maxBy",function(){return V0.a});var U0=os(23);os.d(as,"min",function(){return U0.a});var tv=os(72);os.d(as,"minBy",function(){return tv.a});var Os=os(73);os.d(as,"mod",function(){return Os.a});var ov=os(74);os.d(as,"toDegree",function(){return ov.a});var $v=os(75);os.d(as,"toInteger",function(){return $v.a});var Lv=os(76);os.d(as,"toRadian",function(){return Lv.a});var Jv=os(77);os.d(as,"forIn",function(){return Jv.a});var Yv=os(29);os.d(as,"has",function(){return Yv.a});var Pv=os(78);os.d(as,"hasKey",function(){return Pv.a});var jv=os(79);os.d(as,"hasValue",function(){return jv.a});var wp=os(21);os.d(as,"keys",function(){return wp.a});var j0=os(20);os.d(as,"isMatch",function(){return j0.a});var Ul=os(15);os.d(as,"values",function(){return Ul.a});var Xs=os(80);os.d(as,"lowerCase",function(){return Xs.a});var d0=os(81);os.d(as,"lowerFirst",function(){return d0.a});var M0=os(82);os.d(as,"substitute",function(){return M0.a});var i0=os(83);os.d(as,"upperCase",function(){return i0.a});var k0=os(84);os.d(as,"upperFirst",function(){return k0.a});var P0=os(30);os.d(as,"getType",function(){return P0.a});var B0=os(85);os.d(as,"isArguments",function(){return B0.a});var G0=os(0);os.d(as,"isArray",function(){return G0.a});var rv=os(1);os.d(as,"isArrayLike",function(){return rv.a});var xv=os(86);os.d(as,"isBoolean",function(){return xv.a});var qv=os(87);os.d(as,"isDate",function(){return qv.a});var Ev=os(88);os.d(as,"isError",function(){return Ev.a});var Kv=os(2);os.d(as,"isFunction",function(){return Kv.a});var Xv=os(89);os.d(as,"isFinite",function(){return Xv.a});var ap=os(7);os.d(as,"isNil",function(){return ap.a});var tp=os(90);os.d(as,"isNull",function(){return tp.a});var Lp=os(5);os.d(as,"isNumber",function(){return Lp.a});var zv=os(12);os.d(as,"isObject",function(){return zv.a});var yp=os(14);os.d(as,"isObjectLike",function(){return yp.a});var c1=os(10);os.d(as,"isPlainObject",function(){return c1.a});var $p=os(31);os.d(as,"isPrototype",function(){return $p.a});var d1=os(91);os.d(as,"isRegExp",function(){return d1.a});var A2=os(4);os.d(as,"isString",function(){return A2.a});var I2=os(3);os.d(as,"isType",function(){return I2.a});var Cp=os(92);os.d(as,"isUndefined",function(){return Cp.a});var A1=os(93);os.d(as,"isElement",function(){return A1.a});var g2=os(94);os.d(as,"requestAnimationFrame",function(){return g2.a});var om=os(95);os.d(as,"clearAnimationFrame",function(){return om.a});var k2=os(96);os.d(as,"augment",function(){return k2.a});var sm=os(97);os.d(as,"clone",function(){return sm.a});var s1=os(98);os.d(as,"debounce",function(){return s1.a});var Z0=os(32);os.d(as,"memoize",function(){return Z0.a});var h1=os(99);os.d(as,"deepMix",function(){return h1.a});var lv=os(8);os.d(as,"each",function(){return lv.a});var rp=os(100);os.d(as,"extend",function(){return rp.a});var nv=os(101);os.d(as,"indexOf",function(){return nv.a});var fp=os(102);os.d(as,"isEmpty",function(){return fp.a});var Tp=os(33);os.d(as,"isEqual",function(){return Tp.a});var r2=os(103);os.d(as,"isEqualWith",function(){return r2.a});var v1=os(104);os.d(as,"map",function(){return v1.a});var p1=os(105);os.d(as,"mapValues",function(){return p1.a});var j1=os(16);os.d(as,"mix",function(){return j1.a}),os.d(as,"assign",function(){return j1.a});var n2=os(106);os.d(as,"get",function(){return n2.a});var yv=os(107);os.d(as,"set",function(){return yv.a});var Mx=os(108);os.d(as,"pick",function(){return Mx.a});var f_=os(109);os.d(as,"omit",function(){return f_.a});var c_=os(110);os.d(as,"throttle",function(){return c_.a});var bx=os(111);os.d(as,"toArray",function(){return bx.a});var Cx=os(9);os.d(as,"toString",function(){return Cx.a});var Tx=os(112);os.d(as,"uniqueId",function(){return Tx.a});var d_=os(113);os.d(as,"noop",function(){return d_.a});var Gm=os(114);os.d(as,"identity",function(){return Gm.a});var vy=os(115);os.d(as,"size",function(){return vy.a});var py=os(34);os.d(as,"measureTextWidth",function(){return py.a});var h_=os(117);os.d(as,"getEllipsisText",function(){return h_.a});var v_=os(118);os.d(as,"Cache",function(){return v_.a})},function(rs,as,os){var is=os(19),us=os(13),ls=function(fs,hs){return hs===void 0&&(hs=[]),Object(is.a)(fs,function(vs){return!Object(us.a)(hs,vs)})};as.a=ls},function(rs,as,os){var is=os(2),us=os(20),ls=os(0),fs=os(10);function hs(vs,gs){if(!Object(ls.a)(vs))return null;var ys;if(Object(is.a)(gs)&&(ys=gs),Object(fs.a)(gs)&&(ys=function(ms){return Object(us.a)(ms,gs)}),ys){for(var xs=0;xs<vs.length;xs+=1)if(ys(vs[xs]))return vs[xs]}return null}as.a=hs},function(rs,as,os){function is(us,ls,fs){fs===void 0&&(fs=0);for(var hs=fs;hs<us.length;hs++)if(ls(us[hs],hs))return hs;return-1}as.a=is},function(rs,as,os){var is=os(7),us=os(0),ls=function(fs,hs){for(var vs=null,gs=0;gs<fs.length;gs++){var ys=fs[gs],xs=ys[hs];if(!Object(is.a)(xs)){Object(us.a)(xs)?vs=xs[0]:vs=xs;break}}return vs};as.a=ls},function(rs,as,os){var is=os(0),us=function(ls){if(!Object(is.a)(ls))return[];for(var fs=[],hs=0;hs<ls.length;hs++)fs=fs.concat(ls[hs]);return fs};as.a=us},function(rs,as,os){var is=os(0),us=function(ls,fs){if(fs===void 0&&(fs=[]),!Object(is.a)(ls))fs.push(ls);else for(var hs=0;hs<ls.length;hs+=1)us(ls[hs],fs);return fs};as.a=us},function(rs,as,os){var is=os(0),us=os(22),ls=os(23),fs=function(hs){var vs=hs.filter(function(Ss){return!isNaN(Ss)});if(!vs.length)return{min:0,max:0};if(Object(is.a)(hs[0])){for(var gs=[],ys=0;ys<hs.length;ys++)gs=gs.concat(hs[ys]);vs=gs}var xs=Object(us.a)(vs),ms=Object(ls.a)(vs);return{min:ms,max:xs}};as.a=fs},function(rs,as,os){var is=Array.prototype,us=is.splice,ls=is.indexOf,fs=function(hs){for(var vs=[],gs=1;gs<arguments.length;gs++)vs[gs-1]=arguments[gs];for(var ys=0;ys<vs.length;ys++)for(var xs=vs[ys],ms=-1;(ms=ls.call(hs,xs))>-1;)us.call(hs,ms,1);return hs};as.a=fs},function(rs,as,os){var is=os(1),us=os(24),ls=function(fs,hs){var vs=[];if(!Object(is.a)(fs))return vs;for(var gs=-1,ys=[],xs=fs.length;++gs<xs;){var ms=fs[gs];hs(ms,gs,fs)&&(vs.push(ms),ys.push(gs))}return Object(us.a)(fs,ys),vs};as.a=ls},function(rs,as,os){var is=os(0),us=os(4),ls=os(2);function fs(hs,vs){var gs;if(Object(ls.a)(vs))gs=function(xs,ms){return vs(xs)-vs(ms)};else{var ys=[];Object(us.a)(vs)?ys.push(vs):Object(is.a)(vs)&&(ys=vs),gs=function(xs,ms){for(var Ss=0;Ss<ys.length;Ss+=1){var Ms=ys[Ss];if(xs[Ms]>ms[Ms])return 1;if(xs[Ms]<ms[Ms])return-1}return 0}}return hs.sort(gs),hs}as.a=fs},function(rs,as,os){var is=os(26),us=function(){for(var ls=[],fs=0;fs<arguments.length;fs++)ls[fs]=arguments[fs];return Object(is.a)([].concat.apply([],ls))};as.a=us},function(rs,as,os){var is=os(0),us=os(7);as.a=function(ls,fs){for(var hs=[],vs={},gs=0;gs<ls.length;gs++){var ys=ls[gs],xs=ys[fs];if(!Object(us.a)(xs)){Object(is.a)(xs)||(xs=[xs]);for(var ms=0;ms<xs.length;ms++){var Ss=xs[ms];vs[Ss]||(hs.push(Ss),vs[Ss]=!0)}}}return hs}},function(rs,as,os){as.a=us;var is=os(1);function us(ls){if(Object(is.a)(ls))return ls[0]}},function(rs,as,os){as.a=us;var is=os(1);function us(ls){if(Object(is.a)(ls)){var fs=ls;return fs[fs.length-1]}}},function(rs,as,os){var is=os(0),us=os(4);function ls(fs,hs){return Object(is.a)(fs)||Object(us.a)(fs)?fs[0]===hs:!1}as.a=ls},function(rs,as,os){var is=os(0),us=os(4);function ls(fs,hs){return Object(is.a)(fs)||Object(us.a)(fs)?fs[fs.length-1]===hs:!1}as.a=ls},function(rs,as,os){var is=function(us,ls){for(var fs=0;fs<us.length;fs++)if(!ls(us[fs],fs))return!1;return!0};as.a=is},function(rs,as,os){var is=function(us,ls){for(var fs=0;fs<us.length;fs++)if(ls(us[fs],fs))return!0;return!1};as.a=is},function(rs,as,os){var is=os(27);as.a=function(us,ls){if(!ls)return[us];var fs=Object(is.a)(us,ls),hs=[];for(var vs in fs)hs.push(fs[vs]);return hs}},function(rs,as,os){function is(us,ls){return us["_wrap_"+ls]}as.a=is},function(rs,as,os){function is(us,ls){if(us["_wrap_"+ls])return us["_wrap_"+ls];var fs=function(hs){us[ls](hs)};return us["_wrap_"+ls]=fs,fs}as.a=is},function(rs,as,os){var is={};function us(ls){var fs=is[ls];if(!fs){for(var hs=ls.toString(16),vs=hs.length;vs<6;vs++)hs="0"+hs;fs="#"+hs,is[ls]=fs}return fs}as.a=us},function(rs,as,os){var is=os(0);function us(ls){var fs=0,hs=0,vs=0,gs=0;return Object(is.a)(ls)?ls.length===1?fs=hs=vs=gs=ls[0]:ls.length===2?(fs=vs=ls[0],hs=gs=ls[1]):ls.length===3?(fs=ls[0],hs=gs=ls[1],vs=ls[2]):(fs=ls[0],hs=ls[1],vs=ls[2],gs=ls[3]):fs=hs=vs=gs=ls,{r1:fs,r2:hs,r3:vs,r4:gs}}as.a=us},function(rs,as,os){var is=function(us,ls,fs){return us<ls?ls:us>fs?fs:us};as.a=is},function(rs,as,os){var is=function(us,ls){var fs=ls.toString(),hs=fs.indexOf(".");if(hs===-1)return Math.round(us);var vs=fs.substr(hs+1).length;return vs>20&&(vs=20),parseFloat(us.toFixed(vs))};as.a=is},function(rs,as,os){var is=os(5),us=function(ls){return Object(is.a)(ls)&&ls%1!==0};as.a=us},function(rs,as,os){var is=os(5),us=function(ls){return Object(is.a)(ls)&&ls%2===0};as.a=us},function(rs,as,os){var is=os(5),us=Number.isInteger?Number.isInteger:function(ls){return Object(is.a)(ls)&&ls%1===0};as.a=us},function(rs,as,os){var is=os(5),us=function(ls){return Object(is.a)(ls)&&ls<0};as.a=us},function(rs,as,os){as.a=us;var is=1e-5;function us(ls,fs,hs){return hs===void 0&&(hs=is),Math.abs(ls-fs)<hs}},function(rs,as,os){var is=os(5),us=function(ls){return Object(is.a)(ls)&&ls%2!==0};as.a=us},function(rs,as,os){var is=os(5),us=function(ls){return Object(is.a)(ls)&&ls>0};as.a=us},function(rs,as,os){var is=os(0),us=os(2);as.a=function(ls,fs){if(Object(is.a)(ls)){for(var hs,vs=-1/0,gs=0;gs<ls.length;gs++){var ys=ls[gs],xs=Object(us.a)(fs)?fs(ys):ys[fs];xs>vs&&(hs=ys,vs=xs)}return hs}}},function(rs,as,os){var is=os(0),us=os(2);as.a=function(ls,fs){if(Object(is.a)(ls)){for(var hs,vs=1/0,gs=0;gs<ls.length;gs++){var ys=ls[gs],xs=Object(us.a)(fs)?fs(ys):ys[fs];xs<vs&&(hs=ys,vs=xs)}return hs}}},function(rs,as,os){var is=function(us,ls){return(us%ls+ls)%ls};as.a=is},function(rs,as,os){var is=180/Math.PI,us=function(ls){return is*ls};as.a=us},function(rs,as,os){as.a=parseInt},function(rs,as,os){var is=Math.PI/180,us=function(ls){return is*ls};as.a=us},function(rs,as,os){var is=os(8);as.a=is.a},function(rs,as,os){var is=os(29);as.a=is.a},function(rs,as,os){var is=os(13),us=os(15);as.a=function(ls,fs){return Object(is.a)(Object(us.a)(ls),fs)}},function(rs,as,os){var is=os(9),us=function(ls){return Object(is.a)(ls).toLowerCase()};as.a=us},function(rs,as,os){var is=os(9),us=function(ls){var fs=Object(is.a)(ls);return fs.charAt(0).toLowerCase()+fs.substring(1)};as.a=us},function(rs,as,os){function is(us,ls){return!us||!ls?us:us.replace(/\\?\{([^{}]+)\}/g,function(fs,hs){return fs.charAt(0)==="\\"?fs.slice(1):ls[hs]===void 0?"":ls[hs]})}as.a=is},function(rs,as,os){var is=os(9),us=function(ls){return Object(is.a)(ls).toUpperCase()};as.a=us},function(rs,as,os){var is=os(9),us=function(ls){var fs=Object(is.a)(ls);return fs.charAt(0).toUpperCase()+fs.substring(1)};as.a=us},function(rs,as,os){var is=os(3),us=function(ls){return Object(is.a)(ls,"Arguments")};as.a=us},function(rs,as,os){var is=os(3),us=function(ls){return Object(is.a)(ls,"Boolean")};as.a=us},function(rs,as,os){var is=os(3),us=function(ls){return Object(is.a)(ls,"Date")};as.a=us},function(rs,as,os){var is=os(3),us=function(ls){return Object(is.a)(ls,"Error")};as.a=us},function(rs,as,os){var is=os(5);as.a=function(us){return Object(is.a)(us)&&isFinite(us)}},function(rs,as,os){var is=function(us){return us===null};as.a=is},function(rs,as,os){var is=os(3),us=function(ls){return Object(is.a)(ls,"RegExp")};as.a=us},function(rs,as,os){var is=function(us){return us===void 0};as.a=is},function(rs,as,os){var is=function(us){return us instanceof Element||us instanceof HTMLDocument};as.a=is},function(rs,as,os){as.a=is;function is(us){var ls=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(fs){return setTimeout(fs,16)};return ls(us)}},function(rs,as,os){as.a=is;function is(us){var ls=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;ls(us)}},function(rs,as,os){var is=os(16),us=os(2),ls=function(){for(var fs=[],hs=0;hs<arguments.length;hs++)fs[hs]=arguments[hs];for(var vs=fs[0],gs=1;gs<fs.length;gs++){var ys=fs[gs];Object(us.a)(ys)&&(ys=ys.prototype),Object(is.a)(vs.prototype,ys)}};as.a=ls},function(rs,as,os){var is=os(0),us=function(ls){if(typeof ls!="object"||ls===null)return ls;var fs;if(Object(is.a)(ls)){fs=[];for(var hs=0,vs=ls.length;hs<vs;hs++)typeof ls[hs]=="object"&&ls[hs]!=null?fs[hs]=us(ls[hs]):fs[hs]=ls[hs]}else{fs={};for(var gs in ls)typeof ls[gs]=="object"&&ls[gs]!=null?fs[gs]=us(ls[gs]):fs[gs]=ls[gs]}return fs};as.a=us},function(rs,as,os){function is(us,ls,fs){var hs;return function(){var vs=this,gs=arguments,ys=function(){hs=null,fs||us.apply(vs,gs)},xs=fs&&!hs;clearTimeout(hs),hs=setTimeout(ys,ls),xs&&us.apply(vs,gs)}}as.a=is},function(rs,as,os){var is=os(0),us=os(10),ls=5;function fs(vs,gs,ys,xs){ys=ys||0,xs=xs||ls;for(var ms in gs)if(gs.hasOwnProperty(ms)){var Ss=gs[ms];Ss!==null&&Object(us.a)(Ss)?(Object(us.a)(vs[ms])||(vs[ms]={}),ys<xs?fs(vs[ms],Ss,ys+1,xs):vs[ms]=gs[ms]):Object(is.a)(Ss)?(vs[ms]=[],vs[ms]=vs[ms].concat(Ss)):Ss!==void 0&&(vs[ms]=Ss)}}var hs=function(vs){for(var gs=[],ys=1;ys<arguments.length;ys++)gs[ys-1]=arguments[ys];for(var xs=0;xs<gs.length;xs+=1)fs(vs,gs[xs]);return vs};as.a=hs},function(rs,as,os){var is=os(16),us=os(2),ls=function(fs,hs,vs,gs){Object(us.a)(hs)||(vs=hs,hs=fs,fs=function(){});var ys=Object.create?function(ms,Ss){return Object.create(ms,{constructor:{value:Ss}})}:function(ms,Ss){function Ms(){}Ms.prototype=ms;var $s=new Ms;return $s.constructor=Ss,$s},xs=ys(hs.prototype,fs);return fs.prototype=Object(is.a)(xs,fs.prototype),fs.superclass=ys(hs.prototype,hs),Object(is.a)(xs,vs),Object(is.a)(fs,gs),fs};as.a=ls},function(rs,as,os){var is=os(1),us=function(ls,fs){if(!Object(is.a)(ls))return-1;var hs=Array.prototype.indexOf;if(hs)return hs.call(ls,fs);for(var vs=-1,gs=0;gs<ls.length;gs++)if(ls[gs]===fs){vs=gs;break}return vs};as.a=us},function(rs,as,os){var is=os(7),us=os(1),ls=os(30),fs=os(31),hs=Object.prototype.hasOwnProperty;function vs(gs){if(Object(is.a)(gs))return!0;if(Object(us.a)(gs))return!gs.length;var ys=Object(ls.a)(gs);if(ys==="Map"||ys==="Set")return!gs.size;if(Object(fs.a)(gs))return!Object.keys(gs).length;for(var xs in gs)if(hs.call(gs,xs))return!1;return!0}as.a=vs},function(rs,as,os){var is=os(2),us=os(33);as.a=function(ls,fs,hs){return Object(is.a)(hs)?!!hs(ls,fs):Object(us.a)(ls,fs)}},function(rs,as,os){var is=os(1),us=function(ls,fs){if(!Object(is.a)(ls))return ls;for(var hs=[],vs=0;vs<ls.length;vs++){var gs=ls[vs];hs.push(fs(gs,vs))}return hs};as.a=us},function(rs,as,os){var is=os(7),us=os(12),ls=function(fs){return fs};as.a=function(fs,hs){hs===void 0&&(hs=ls);var vs={};return Object(us.a)(fs)&&!Object(is.a)(fs)&&Object.keys(fs).forEach(function(gs){vs[gs]=hs(fs[gs],gs)}),vs}},function(rs,as,os){var is=os(4);as.a=function(us,ls,fs){for(var hs=0,vs=Object(is.a)(ls)?ls.split("."):ls;us&&hs<vs.length;)us=us[vs[hs++]];return us===void 0||hs<vs.length?fs:us}},function(rs,as,os){var is=os(12),us=os(4),ls=os(5);as.a=function(fs,hs,vs){var gs=fs,ys=Object(us.a)(hs)?hs.split("."):hs;return ys.forEach(function(xs,ms){ms<ys.length-1?(Object(is.a)(gs[xs])||(gs[xs]=Object(ls.a)(ys[ms+1])?[]:{}),gs=gs[xs]):gs[xs]=vs}),fs}},function(rs,as,os){var is=os(8),us=os(10),ls=Object.prototype.hasOwnProperty;as.a=function(fs,hs){if(fs===null||!Object(us.a)(fs))return{};var vs={};return Object(is.a)(hs,function(gs){ls.call(fs,gs)&&(vs[gs]=fs[gs])}),vs}},function(rs,as,os){var is=os(25);as.a=function(us,ls){return Object(is.a)(us,function(fs,hs,vs){return ls.includes(vs)||(fs[vs]=hs),fs},{})}},function(rs,as,os){as.a=function(is,us,ls){var fs,hs,vs,gs,ys=0;ls||(ls={});var xs=function(){ys=ls.leading===!1?0:Date.now(),fs=null,gs=is.apply(hs,vs),fs||(hs=vs=null)},ms=function(){var Ss=Date.now();!ys&&ls.leading===!1&&(ys=Ss);var Ms=us-(Ss-ys);return hs=this,vs=arguments,Ms<=0||Ms>us?(fs&&(clearTimeout(fs),fs=null),ys=Ss,gs=is.apply(hs,vs),fs||(hs=vs=null)):!fs&&ls.trailing!==!1&&(fs=setTimeout(xs,Ms)),gs};return ms.cancel=function(){clearTimeout(fs),ys=0,fs=hs=vs=null},ms}},function(rs,as,os){var is=os(1);as.a=function(us){return Object(is.a)(us)?Array.prototype.slice.call(us):[]}},function(rs,as,os){var is={};as.a=function(us){return us=us||"g",is[us]?is[us]+=1:is[us]=1,us+is[us]}},function(rs,as,os){as.a=function(){}},function(rs,as,os){as.a=function(is){return is}},function(rs,as,os){as.a=ls;var is=os(7),us=os(1);function ls(fs){return Object(is.a)(fs)?0:Object(us.a)(fs)?fs.length:Object.keys(fs).length}},function(rs,as,os){as.a=is;function is(){for(var us=0,ls=0,fs=arguments.length;ls<fs;ls++)us+=arguments[ls].length;for(var hs=Array(us),vs=0,ls=0;ls<fs;ls++)for(var gs=arguments[ls],ys=0,xs=gs.length;ys<xs;ys++,vs++)hs[vs]=gs[ys];return hs}},function(rs,as,os){var is=os(4),us=os(9),ls=os(34);as.a=function(fs,hs,vs,gs){gs===void 0&&(gs="...");var ys=16,xs=Object(ls.a)(gs,vs),ms=Object(is.a)(fs)?fs:Object(us.a)(fs),Ss=hs,Ms=[],$s,bs;if(Object(ls.a)(fs,vs)<=hs)return fs;for(;$s=ms.substr(0,ys),bs=Object(ls.a)($s,vs),!(bs+xs>Ss&&bs>Ss);)if(Ms.push($s),Ss-=bs,ms=ms.substr(ys),!ms)return Ms.join("");for(;$s=ms.substr(0,1),bs=Object(ls.a)($s,vs),!(bs+xs>Ss);)if(Ms.push($s),Ss-=bs,ms=ms.substr(1),!ms)return Ms.join("");return""+Ms.join("")+gs}},function(rs,as,os){var is=function(){function us(){this.map={}}return us.prototype.has=function(ls){return this.map[ls]!==void 0},us.prototype.get=function(ls,fs){var hs=this.map[ls];return hs===void 0?fs:hs},us.prototype.set=function(ls,fs){this.map[ls]=fs},us.prototype.clear=function(){this.map={}},us.prototype.delete=function(ls){delete this.map[ls]},us.prototype.size=function(){return Object.keys(this.map).length},us}();as.a=is},function(rs,as){function os(vs,gs,ys,xs){xs===void 0&&(xs=[]);var ms=this;ms.w=vs||0,ms.h=gs||0,ms.y=ys||0,ms.x=0,ms.c=xs||[],ms.cs=xs.length,ms.prelim=0,ms.mod=0,ms.shift=0,ms.change=0,ms.tl=null,ms.tr=null,ms.el=null,ms.er=null,ms.msel=0,ms.mser=0}os.fromNode=function(vs,gs){if(!vs)return null;var ys=[];return vs.children.forEach(function(xs){ys.push(os.fromNode(xs,gs))}),gs?new os(vs.height,vs.width,vs.x,ys):new os(vs.width,vs.height,vs.y,ys)};function is(vs,gs,ys){ys?vs.y+=gs:vs.x+=gs,vs.children.forEach(function(xs){is(xs,gs,ys)})}function us(vs,gs){var ys=gs?vs.y:vs.x;return vs.children.forEach(function(xs){ys=Math.min(us(xs,gs),ys)}),ys}function ls(vs,gs){var ys=us(vs,gs);is(vs,-ys,gs)}function fs(vs,gs,ys){ys?gs.y=vs.x:gs.x=vs.x,vs.c.forEach(function(xs,ms){fs(xs,gs.children[ms],ys)})}function hs(vs,gs,ys){ys===void 0&&(ys=0),gs?(vs.x=ys,ys+=vs.width):(vs.y=ys,ys+=vs.height),vs.children.forEach(function(xs){hs(xs,gs,ys)})}rs.exports=function(vs,gs){gs===void 0&&(gs={});var ys=gs.isHorizontal;function xs(zs){if(zs.cs===0){ms(zs);return}xs(zs.c[0]);for(var Us=Rs(Cs(zs.c[0].el),0,null),Ys=1;Ys<zs.cs;++Ys){xs(zs.c[Ys]);var Ks=Cs(zs.c[Ys].er);Ss(zs,Ys,Us),Us=Rs(Ks,Ys,Us)}ks(zs),ms(zs)}function ms(zs){zs.cs===0?(zs.el=zs,zs.er=zs,zs.msel=zs.mser=0):(zs.el=zs.c[0].el,zs.msel=zs.c[0].msel,zs.er=zs.c[zs.cs-1].er,zs.mser=zs.c[zs.cs-1].mser)}function Ss(zs,Us,Ys){for(var Ks=zs.c[Us-1],qs=Ks.mod,_l=zs.c[Us],Js=_l.mod;Ks!==null&&_l!==null;){Cs(Ks)>Ys.low&&(Ys=Ys.nxt);var Vs=qs+Ks.prelim+Ks.w-(Js+_l.prelim);Vs>0&&(Js+=Vs,Ms(zs,Us,Ys.index,Vs));var Zs=Cs(Ks),Sl=Cs(_l);Zs<=Sl&&(Ks=bs(Ks),Ks!==null&&(qs+=Ks.mod)),Zs>=Sl&&(_l=$s(_l),_l!==null&&(Js+=_l.mod))}!Ks&&_l?As(zs,Us,_l,Js):Ks&&!_l&&Is(zs,Us,Ks,qs)}function Ms(zs,Us,Ys,Ks){zs.c[Us].mod+=Ks,zs.c[Us].msel+=Ks,zs.c[Us].mser+=Ks,Ds(zs,Us,Ys,Ks)}function $s(zs){return zs.cs===0?zs.tl:zs.c[0]}function bs(zs){return zs.cs===0?zs.tr:zs.c[zs.cs-1]}function Cs(zs){return zs.y+zs.h}function As(zs,Us,Ys,Ks){var qs=zs.c[0].el;qs.tl=Ys;var _l=Ks-Ys.mod-zs.c[0].msel;qs.mod+=_l,qs.prelim-=_l,zs.c[0].el=zs.c[Us].el,zs.c[0].msel=zs.c[Us].msel}function Is(zs,Us,Ys,Ks){var qs=zs.c[Us].er;qs.tr=Ys;var _l=Ks-Ys.mod-zs.c[Us].mser;qs.mod+=_l,qs.prelim-=_l,zs.c[Us].er=zs.c[Us-1].er,zs.c[Us].mser=zs.c[Us-1].mser}function ks(zs){zs.prelim=(zs.c[0].prelim+zs.c[0].mod+zs.c[zs.cs-1].mod+zs.c[zs.cs-1].prelim+zs.c[zs.cs-1].w)/2-zs.w/2}function Ps(zs,Us){Us+=zs.mod,zs.x=zs.prelim+Us,Fs(zs);for(var Ys=0;Ys<zs.cs;Ys++)Ps(zs.c[Ys],Us)}function Ds(zs,Us,Ys,Ks){if(Ys!==Us-1){var qs=Us-Ys;zs.c[Ys+1].shift+=Ks/qs,zs.c[Us].shift-=Ks/qs,zs.c[Us].change-=Ks-Ks/qs}}function Fs(zs){for(var Us=0,Ys=0,Ks=0;Ks<zs.cs;Ks++)Us+=zs.c[Ks].shift,Ys+=Us+zs.c[Ks].change,zs.c[Ks].mod+=Ys}function Rs(zs,Us,Ys){for(;Ys!==null&&zs>=Ys.low;)Ys=Ys.nxt;return{low:zs,index:Us,nxt:Ys}}hs(vs,ys);var js=os.fromNode(vs,ys);return xs(js),Ps(js,0),fs(js,vs,ys),ls(vs,ys),vs}},function(rs,as,os){function is(ms,Ss){ms.prototype=Object.create(Ss.prototype),ms.prototype.constructor=ms,us(ms,Ss)}function us(ms,Ss){return us=Object.setPrototypeOf?Object.setPrototypeOf.bind():function($s,bs){return $s.__proto__=bs,$s},us(ms,Ss)}var ls=os(11),fs=os(121),hs=os(17),vs=os(6),gs=function(ms){is(Ss,ms);function Ss(){return ms.apply(this,arguments)||this}var Ms=Ss.prototype;return Ms.execute=function(){var bs=this;return bs.rootNode.width=0,hs(bs.rootNode,bs.options,fs)},Ss}(ls),ys={};function xs(ms,Ss){return Ss=vs.assign({},ys,Ss),new gs(ms,Ss).execute()}rs.exports=xs},function(rs,as,os){var is=os(6);function us(hs,vs){vs===void 0&&(vs=[]);var gs=this;gs.x=gs.y=0,gs.leftChild=gs.rightChild=null,gs.height=0,gs.children=vs}var ls={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function fs(hs,vs,gs){gs?(vs.x=hs.x,vs.y=hs.y):(vs.x=hs.y,vs.y=hs.x),hs.children.forEach(function(ys,xs){fs(ys,vs.children[xs],gs)})}rs.exports=function(hs,vs){vs===void 0&&(vs={}),vs=is.assign({},ls,vs);var gs=0;function ys($s){if(!$s)return null;$s.width=0,$s.depth&&$s.depth>gs&&(gs=$s.depth);var bs=$s.children,Cs=bs.length,As=new us($s.height,[]);return bs.forEach(function(Is,ks){var Ps=ys(Is);As.children.push(Ps),ks===0&&(As.leftChild=Ps),ks===Cs-1&&(As.rightChild=Ps)}),As.originNode=$s,As.isLeaf=$s.isLeaf(),As}function xs($s){if($s.isLeaf||$s.children.length===0)$s.drawingDepth=gs;else{var bs=$s.children.map(function(As){return xs(As)}),Cs=Math.min.apply(null,bs);$s.drawingDepth=Cs-1}return $s.drawingDepth}var ms;function Ss($s){$s.x=$s.drawingDepth*vs.rankSep,$s.isLeaf?($s.y=0,ms&&($s.y=ms.y+ms.height+vs.nodeSep,$s.originNode.parent!==ms.originNode.parent&&($s.y+=vs.subTreeSep)),ms=$s):($s.children.forEach(function(bs){Ss(bs)}),$s.y=($s.leftChild.y+$s.rightChild.y)/2)}var Ms=ys(hs);return xs(Ms),Ss(Ms),fs(Ms,hs,vs.isHorizontal),hs}},function(rs,as,os){function is(Ms,$s){Ms.prototype=Object.create($s.prototype),Ms.prototype.constructor=Ms,us(Ms,$s)}function us(Ms,$s){return us=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Cs,As){return Cs.__proto__=As,Cs},us(Ms,$s)}var ls=os(11),fs=os(123),hs=os(35),vs=os(6),gs=["LR","RL","H"],ys=gs[0],xs=function(Ms){is($s,Ms);function $s(){return Ms.apply(this,arguments)||this}var bs=$s.prototype;return bs.execute=function(){var As=this,Is=As.options,ks=As.rootNode;Is.isHorizontal=!0;var Ps=Is.indent,Ds=Ps===void 0?20:Ps,Fs=Is.dropCap,Rs=Fs===void 0?!0:Fs,js=Is.direction,zs=js===void 0?ys:js,Us=Is.align;if(zs&&gs.indexOf(zs)===-1)throw new TypeError("Invalid direction: "+zs);if(zs===gs[0])fs(ks,Ds,Rs,Us);else if(zs===gs[1])fs(ks,Ds,Rs,Us),ks.right2left();else if(zs===gs[2]){var Ys=hs(ks,Is),Ks=Ys.left,qs=Ys.right;fs(Ks,Ds,Rs,Us),Ks.right2left(),fs(qs,Ds,Rs,Us);var _l=Ks.getBoundingBox();qs.translate(_l.width,0),ks.x=qs.x-ks.width/2}return ks},$s}(ls),ms={};function Ss(Ms,$s){return $s=vs.assign({},ms,$s),new xs(Ms,$s).execute()}rs.exports=Ss},function(rs,as,os){var is=os(6);function us(ls,fs,hs,vs,gs){var ys=typeof hs=="function"?hs(ls):hs*ls.depth;if(!vs)try{if(ls.id===ls.parent.children[0].id){ls.x+=ys,ls.y=fs?fs.y:0;return}}catch{}if(ls.x+=ys,fs){if(ls.y=fs.y+is.getHeight(fs,ls,gs),fs.parent&&ls.parent.id!==fs.parent.id){var xs=fs.parent,ms=xs.y+is.getHeight(xs,ls,gs);ls.y=ms>ls.y?ms:ls.y}}else ls.y=0}rs.exports=function(ls,fs,hs,vs){var gs=null;ls.eachNode(function(ys){us(ys,gs,fs,hs,vs),gs=ys})}},function(rs,as,os){function is(ms,Ss){ms.prototype=Object.create(Ss.prototype),ms.prototype.constructor=ms,us(ms,Ss)}function us(ms,Ss){return us=Object.setPrototypeOf?Object.setPrototypeOf.bind():function($s,bs){return $s.__proto__=bs,$s},us(ms,Ss)}var ls=os(11),fs=os(125),hs=os(17),vs=os(6),gs=function(ms){is(Ss,ms);function Ss(){return ms.apply(this,arguments)||this}var Ms=Ss.prototype;return Ms.execute=function(){var bs=this;return hs(bs.rootNode,bs.options,fs)},Ss}(ls),ys={};function xs(ms,Ss){return Ss=vs.assign({},ys,Ss),new gs(ms,Ss).execute()}rs.exports=xs},function(rs,as,os){var is=os(6);function us(hs,vs){var gs=0;return hs.children.length?hs.children.forEach(function(ys){gs+=us(ys,vs)}):gs=hs.height,hs._subTreeSep=vs.getSubTreeSep(hs.data),hs.totalHeight=Math.max(hs.height,gs)+2*hs._subTreeSep,hs.totalHeight}function ls(hs){var vs=hs.children,gs=vs.length;if(gs){vs.forEach(function($s){ls($s)});var ys=vs[0],xs=vs[gs-1],ms=xs.y-ys.y+xs.height,Ss=0;if(vs.forEach(function($s){Ss+=$s.totalHeight}),ms>hs.height)hs.y=ys.y+ms/2-hs.height/2;else if(vs.length!==1||hs.height>Ss){var Ms=hs.y+(hs.height-ms)/2-ys.y;vs.forEach(function($s){$s.translate(0,Ms)})}else hs.y=(ys.y+ys.height/2+xs.y+xs.height/2)/2-hs.height/2}}var fs={getSubTreeSep:function(){return 0}};rs.exports=function(hs,vs){vs===void 0&&(vs={}),vs=is.assign({},fs,vs),hs.parent={x:0,width:0,height:0,y:0},hs.BFTraverse(function(gs){gs.x=gs.parent.x+gs.parent.width}),hs.parent=null,us(hs,vs),hs.startY=0,hs.y=hs.totalHeight/2-hs.height/2,hs.eachNode(function(gs){var ys=gs.children,xs=ys.length;if(xs){var ms=ys[0];if(ms.startY=gs.startY+gs._subTreeSep,xs===1)ms.y=gs.y+gs.height/2-ms.height/2;else{ms.y=ms.startY+ms.totalHeight/2-ms.height/2;for(var Ss=1;Ss<xs;Ss++){var Ms=ys[Ss];Ms.startY=ys[Ss-1].startY+ys[Ss-1].totalHeight,Ms.y=Ms.startY+Ms.totalHeight/2-Ms.height/2}}}}),ls(hs)}}])})})(hierarchy);var hierarchyExports=hierarchy.exports;const Hierarchy=getDefaultExportFromCjs(hierarchyExports);var traverseTree$2=Util$1.traverseTree,proccessToFunc=function(ts,rs){var as;return ts?isNumber$3(ts)?as=function(is){return ts}:as=ts:as=function(is){return rs||1},as},buildTextureData=function(ts,rs){var as=[],os=[],is={},us=0;for(us=0;us<ts.length;us++){var ls=ts[us];is[ls.id]=us,as.push(ls.x),as.push(ls.y),as.push(0),as.push(0),os.push([])}for(us=0;us<rs.length;us++){var fs=rs[us];os[is[fs.source]].push(is[fs.target]),os[is[fs.target]].push(is[fs.source])}var hs=0;for(us=0;us<ts.length;us++){var vs=as.length,gs=os[us],ys=gs.length;as[us*4+2]=vs,as[us*4+3]=gs.length,hs=Math.max(hs,gs.length);for(var xs=0;xs<ys;++xs){var ms=gs[xs];as.push(+ms)}}for(;as.length%4!==0;)as.push(0);return{array:new Float32Array(as),maxEdgePerVetex:hs}},buildTextureDataWithOneEdgeAttr=function(ts,rs,as){var os=[],is=[],us={},ls=0;for(ls=0;ls<ts.length;ls++){var fs=ts[ls];us[fs.id]=ls,os.push(fs.x),os.push(fs.y),os.push(0),os.push(0),is.push([])}for(ls=0;ls<rs.length;ls++){var hs=rs[ls];is[us[hs.source]].push(us[hs.target]),is[us[hs.source]].push(as(hs)),is[us[hs.target]].push(us[hs.source]),is[us[hs.target]].push(as(hs))}var vs=0;for(ls=0;ls<ts.length;ls++){var gs=os.length,ys=is[ls],xs=ys.length;os[ls*4+2]=gs,os[ls*4+3]=xs/2,vs=Math.max(vs,xs/2);for(var ms=0;ms<xs;++ms){var Ss=ys[ms];os.push(+Ss)}}for(;os.length%4!==0;)os.push(0);return{array:new Float32Array(os),maxEdgePerVetex:vs}},buildTextureDataWithTwoEdgeAttr=function(ts,rs,as,os){var is=[],us=[],ls={},fs=0;for(fs=0;fs<ts.length;fs++){var hs=ts[fs];ls[hs.id]=fs,is.push(hs.x),is.push(hs.y),is.push(0),is.push(0),us.push([])}for(fs=0;fs<rs.length;fs++){var vs=rs[fs];us[ls[vs.source]].push(ls[vs.target]),us[ls[vs.source]].push(as(vs)),us[ls[vs.source]].push(os(vs)),us[ls[vs.source]].push(0),us[ls[vs.target]].push(ls[vs.source]),us[ls[vs.target]].push(as(vs)),us[ls[vs.target]].push(os(vs)),us[ls[vs.target]].push(0)}var gs=0;for(fs=0;fs<ts.length;fs++){var ys=is.length,xs=us[fs],ms=xs.length;is[fs*4+2]=ys+1048576*ms/4,is[fs*4+3]=0,gs=Math.max(gs,ms/4);for(var Ss=0;Ss<ms;++Ss){var Ms=xs[Ss];is.push(+Ms)}}for(;is.length%4!==0;)is.push(0);return{array:new Float32Array(is),maxEdgePerVetex:gs}},attributesToTextureData=function(ts,rs){var as=[],os=ts.length,is={};return rs.forEach(function(us){ts.forEach(function(ls,fs){if(is[us[ls]]===void 0&&(is[us[ls]]=Object.keys(is).length),as.push(is[us[ls]]),fs===os-1)for(;as.length%4!==0;)as.push(0)})}),{array:new Float32Array(as),count:Object.keys(is).length}},arrayToTextureData=function(ts){for(var rs=[],as=ts.length,os=ts[0].length,is=function(fs){ts.forEach(function(hs,vs){if(rs.push(hs[fs]),vs===as-1)for(;rs.length%4!==0;)rs.push(0)})},us=0;us<os;us++)is(us);return new Float32Array(rs)},radialLayout$2=function(ts,rs){var as=["V","TB","BT"],os={x:1/0,y:1/0},is={x:-1/0,y:-1/0},us="x",ls="y";rs&&as.indexOf(rs)>=0&&(ls="x",us="y");var fs=0;traverseTree$2(ts,function(gs){return fs++,gs.x>is.x&&(is.x=gs.x),gs.x<os.x&&(os.x=gs.x),gs.y>is.y&&(is.y=gs.y),gs.y<os.y&&(os.y=gs.y),!0});var hs=Math.PI*2/fs,vs=is[ls]-os[ls];return vs===0||traverseTree$2(ts,function(gs){var ys=(gs[ls]-os[ls])/vs*(Math.PI*2-hs)+hs,xs=Math.abs(us==="x"?gs.x-ts.x:gs.y-ts.y);return gs.x=xs*Math.cos(ys),gs.y=xs*Math.sin(ys),!0}),ts};const LayoutUtil=Object.freeze(Object.defineProperty({__proto__:null,arrayToTextureData,attributesToTextureData,buildTextureData,buildTextureDataWithOneEdgeAttr,buildTextureDataWithTwoEdgeAttr,proccessToFunc,radialLayout:radialLayout$2},Symbol.toStringTag,{value:"Module"}));var gpuDetector=function ns(){return typeof window>"u"||typeof document>"u"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var ts=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(ts.getContext("webgl")||ts.getContext("experimental-webgl")))}catch{return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var rs=document.createElement("div");return rs.id="webgl-error-message",rs.style.fontFamily="monospace",rs.style.fontSize="13px",rs.style.fontWeight="normal",rs.style.textAlign="center",rs.style.background="#fff",rs.style.color="#000",rs.style.padding="1.5em",rs.style.width="400px",rs.style.margin="5em auto 0",this.webgl||(rs.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),rs},addGetWebGLMessage:function(rs){rs=rs||{};var as=rs.parent!==void 0?rs.parent:document.body,os=rs.id!==void 0?rs.id:"oldie",is=ns().getWebGLErrorMessage();is.id=os,as.appendChild(is)}}};const GpuUtil=Object.freeze(Object.defineProperty({__proto__:null,gpuDetector},Symbol.toStringTag,{value:"Module"}));var getBrowserName=function(){var ts=navigator.userAgent.toLowerCase();return ts.indexOf("firefox")>-1?"firefox":ts.indexOf("safari")>-1?"safari":ts.indexOf("opr")>-1?"opera":ts.indexOf("chrome")>-1?"chrome":ts.indexOf("trident")>-1?"ie 11":ts.indexOf("ie")>-1?"ie":"unknown"};const BrowserUtil=Object.freeze(Object.defineProperty({__proto__:null,getBrowserName},Symbol.toStringTag,{value:"Module"}));var G6Util=__assign$h(__assign$h(__assign$h(__assign$h(__assign$h({},Util$1),ColorUtil),LayoutUtil),GpuUtil),BrowserUtil),radialLayout$1=G6Util.radialLayout,TreeLayout=function(){function ns(ts){this.type=ts.type,this.radial=ts.radial,this.config=ts}return ns.prototype.init=function(ts){var rs=this;if(this.data=ts,this.radial){this.layoutMethod=function(as){var os=Hierarchy[rs.type](as,rs.config);return radialLayout$1(os),os};return}this.layoutMethod=function(as){return Hierarchy[rs.type](as,rs.config)}},ns.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},ns.prototype.layout=function(ts){return this.init(ts),this.execute()},ns}();lib.registerLayout("grid",lib.GridLayout);lib.registerLayout("random",lib.RandomLayout);lib.registerLayout("force",lib.ForceLayout);lib.registerLayout("circular",lib.CircularLayout);lib.registerLayout("dagre",lib.DagreLayout);lib.registerLayout("dagreCompound",lib.DagreCompoundLayout);lib.registerLayout("radial",lib.RadialLayout);lib.registerLayout("concentric",lib.ConcentricLayout);lib.registerLayout("mds",lib.MDSLayout);lib.registerLayout("fruchterman",lib.FruchtermanLayout);lib.registerLayout("fruchterman-gpu",lib.FruchtermanGPULayout);lib.registerLayout("gForce",lib.GForceLayout);lib.registerLayout("force2",lib.Force2Layout);lib.registerLayout("gForce-gpu",lib.GForceGPULayout);lib.registerLayout("comboForce",lib.ComboForceLayout);lib.registerLayout("comboCombined",lib.ComboCombinedLayout);lib.registerLayout("forceAtlas2",lib.ForceAtlas2Layout);var registerLayout=function(ts,rs){rs.isCustomLayout=!0,lib.Layouts[ts]=lib.registerLayout(ts,rs)},WebWorker=function(){function ns(ts,rs){var as=ts.toString(),os=new Blob(["importScripts('".concat(rs,"');(").concat(as,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(os))}return ns}(),LayoutWorker=function(ts){ts===void 0&&(ts="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");function rs(){var os={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function is(ls){var fs=ls.data.type;return fs===os.RUN||fs===os.GPURUN}function us(ls){var fs=this,hs=ls.data.type;switch(hs){case os.RUN:{var vs=ls.data,gs=vs.nodes,ys=vs.edges,xs=vs.layoutCfg,ms=xs===void 0?{}:xs,Ss=ms.type,Ms=layout.getLayoutByName(Ss);if(!Ms){this.postMessage({type:os.ERROR,message:"layout ".concat(Ss," not found")});break}var $s;ms.onLayoutEnd=function(){fs.postMessage({type:os.END,nodes:gs}),$s==null||$s.destroy()},$s=new Ms(ms),$s.init({nodes:gs,edges:ys}),$s.execute();break}case os.GPURUN:{var bs=ls.data,Cs=bs.nodes,ys=bs.edges,As=bs.layoutCfg,ms=As===void 0?{}:As,Is=bs.canvas,Ss=ms.type,Ms=layout.getLayoutByName(Ss);if(!Ms){this.postMessage({type:os.ERROR,message:"layout ".concat(Ss," not found")});break}if(Ss.split("-")[1]!=="gpu"){this.postMessage({type:os.ERROR,message:"layout ".concat(Ss," does not support GPU")});break}var ks=new Ms(ms);ks.init({nodes:Cs,edges:ys}),ks.executeWithWorker(Is,this);break}}}onmessage=function(fs){is(fs)&&us(fs)}}var as=new WebWorker(rs,ts);return as},LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function _typeof$4(ns){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ts){return typeof ts}:function(ts){return ts&&typeof Symbol=="function"&&ts.constructor===Symbol&&ts!==Symbol.prototype?"symbol":typeof ts},_typeof$4(ns)}var mockRaf=function(ts){return setTimeout(ts,16)},mockCaf=function(ts){return clearTimeout(ts)},helper={requestAnimationFrame:function(ts){var rs=typeof window<"u"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||mockRaf;return rs(ts)},cancelAnimationFrame:function(ts){var rs=typeof window<"u"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||mockCaf;return rs(ts)}},GPU_LAYOUT_NAMES=["fruchterman","gForce"],LAYOUT_PIPES_ADJUST_NAMES=["force","grid","circular"],LayoutController$1=function(ns){__extends$x(ts,ns);function ts(rs){var as=ns.call(this,rs)||this;return as.graph=rs,as.layoutCfg=rs.get("layout")||{},as.layoutType=as.getLayoutType(),as.worker=null,as.workerData={},as.initLayout(),as}return ts.prototype.initLayout=function(){},ts.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker>"u"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=LayoutWorker(this.layoutCfg.workerScriptURL),this.worker)},ts.prototype.stopWorker=function(){var rs=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,rs.requestId&&(helper.cancelAnimationFrame(rs.requestId),rs.requestId=null),rs.requestId2&&(helper.cancelAnimationFrame(rs.requestId2),rs.requestId2=null))},ts.prototype.execLayoutMethod=function(rs,as){var os=this;return new Promise(function(is,us){return __awaiter$2(os,void 0,void 0,function(){var ls,fs,hs,vs,gs,Ss,ys,xs,ms,Ss,Ms;return __generator$2(this,function($s){switch($s.label){case 0:if(ls=this.graph,!ls||ls.get("destroyed"))return[2];fs=rs.type,rs.onLayoutEnd=function(){ls.emit("aftersublayout",{type:fs}),is()},fs&&this.isGPU&&(hasGPUVersion(fs)?fs="".concat(fs,"-gpu"):console.warn("The '".concat(fs,"' layout does not support GPU calculation for now, it will run in CPU."))),Util$1.isForce(fs)?(hs=rs.onTick,vs=rs.animate,gs=vs===void 0&&(fs==="force"||fs==="force2"),Ss=function(){hs&&hs(),(vs||gs)&&ls.refreshPositions()},rs.tick=Ss):(fs==="comboForce"||fs==="comboCombined")&&(rs.comboTrees=ls.get("comboTrees")),ys=!1;try{xs=new lib.Layouts[fs](rs),this.layoutMethods[as]&&this.layoutMethods[as].destroy(),this.layoutMethods[as]=xs}catch{console.warn("The layout method: '".concat(fs,"' does not exist! Please specify it first.")),us()}return ys=xs.enableTick,ys&&(ms=rs.onTick,Ss=function(){ms&&ms(),ls.refreshPositions()},xs.tick=Ss),Ms=this.filterLayoutData(this.data,rs),addLayoutOrder(Ms,as),xs.init(Ms),ls.emit("beforesublayout",{type:fs}),[4,xs.execute()];case 1:return $s.sent(),xs.isCustomLayout&&rs.onLayoutEnd&&rs.onLayoutEnd(),[2]}})})})},ts.prototype.updateLayoutMethod=function(rs,as){var os=this;return new Promise(function(is,us){return __awaiter$2(os,void 0,void 0,function(){var ls,fs,hs,vs,gs,ys,xs;return __generator$2(this,function(ms){switch(ms.label){case 0:return ls=this.graph,fs=as==null?void 0:as.type,as.onLayoutEnd=function(){ls.emit("aftersublayout",{type:fs}),is()},Util$1.isForce(fs)&&(hs=as.onTick,vs=as.animate,gs=vs===void 0&&(fs==="force"||fs==="force2"),ys=function(){hs==null||hs(),(vs||gs)&&ls.refreshPositions()},as.tick=ys),xs=this.filterLayoutData(this.data,as),rs.init(xs),rs.updateCfg(as),ls.emit("beforesublayout",{type:fs}),[4,rs.execute()];case 1:return ms.sent(),rs.isCustomLayout&&as.onLayoutEnd&&as.onLayoutEnd(),[2]}})})})},ts.prototype.layout=function(rs){var as=this,os,is=this.graph;if(!(!is||is.get("destroyed"))){this.data=this.setDataFromGraph();var us=this.data,ls=us.nodes,fs=us.hiddenNodes;if(!ls)return!1;var hs=is.get("width"),vs=is.get("height"),gs={};Object.assign(gs,{width:hs,height:vs,center:[hs/2,vs/2]},this.layoutCfg),this.layoutCfg=gs;var ys=gs.type,xs=!1;(os=this.layoutMethods)===null||os===void 0||os.forEach(function(Is){var ks;return xs=!!(!((ks=Is.nodes)===null||ks===void 0)&&ks.length)||xs});var ms=this.destoryLayoutMethods();is.emit("beforelayout");var Ss=Promise.resolve();xs&&ys&&(ms==null?void 0:ms.length)===1&&ms[0]===ys?this.tweakInit():Ss=this.initPositions(gs.center,ls);var Ms=this.initPositions(gs.center,fs);Ms.then(),this.isGPU=getGPUEnabled(gs,ys);var $s=gs.onLayoutEnd,bs=gs.layoutEndFormatted,Cs=gs.adjust;if(bs||(gs.layoutEndFormatted=!0,gs.onAllLayoutEnd=function(){return __awaiter$2(as,void 0,void 0,function(){return __generator$2(this,function(Is){switch(Is.label){case 0:return $s&&$s(ls),this.refreshLayout(),Cs&&gs.pipes?[4,this.adjustPipesBox(this.data,Cs)]:[3,2];case 1:Is.sent(),this.refreshLayout(),Is.label=2;case 2:return is.emit("afterlayout"),[2]}})})}),this.stopWorker(),gs.workerEnabled&&this.layoutWithWorker(this.data,rs))return!0;var As=!1;return gs.type?(As=!0,Ss=Ss.then(function(){return __awaiter$2(as,void 0,void 0,function(){return __generator$2(this,function(Is){switch(Is.label){case 0:return[4,this.execLayoutMethod(gs,0)];case 1:return[2,Is.sent()]}})})})):gs.pipes&&(As=!0,gs.pipes.forEach(function(Is,ks){Ss=Ss.then(function(){return __awaiter$2(as,void 0,void 0,function(){return __generator$2(this,function(Ps){switch(Ps.label){case 0:return[4,this.execLayoutMethod(Is,ks)];case 1:return[2,Ps.sent()]}})})})})),As?Ss.then(function(){gs.onAllLayoutEnd&&gs.onAllLayoutEnd(),rs&&rs()}).catch(function(Is){console.warn("graph layout failed,",Is)}):(is.refreshPositions(),rs==null||rs()),!1}},ts.prototype.tweakInit=function(){var rs=this,as=rs.data,os=rs.graph,is=as.nodes,us=as.edges;if(is!=null&&is.length){var ls={};is.forEach(function(vs){var gs=vs.x,ys=vs.y;!isNaN(gs)&&!isNaN(ys)&&(ls[vs.id]={x:gs,y:ys},vs.mass=vs.mass||2)}),us.forEach(function(vs){var gs=vs.source,ys=vs.target,xs=ls[gs],ms=ls[ys];!xs&&ms?ls[gs]={x:ms.x+(Math.random()-.5)*80,y:ms.y+(Math.random()-.5)*80}:!ms&&xs&&(ls[ys]={x:xs.x+(Math.random()-.5)*80,y:xs.y+(Math.random()-.5)*80})});var fs=os.get("width"),hs=os.get("height");is.forEach(function(vs){var gs=ls[vs.id]||{x:fs/2+(Math.random()-.5)*20,y:hs/2+(Math.random()-.5)*20};vs.x=gs.x,vs.y=gs.y})}},ts.prototype.initWithPreset=function(rs,as){var os=this;return new Promise(function(is,us){return __awaiter$2(os,void 0,void 0,function(){var ls,fs,hs,vs,gs,ys,xs;return __generator$2(this,function(ms){switch(ms.label){case 0:return ls=this,fs=ls.layoutCfg,hs=ls.data,vs=fs.preset,!(vs!=null&&vs.type)||!lib.Layouts[vs==null?void 0:vs.type]?(as==null||as(),is(),[2,!1]):(gs=getGPUEnabled(vs,vs.type),ys=gs?"".concat(vs.type,"-gpu"):vs.type,xs=new lib.Layouts[ys](vs),delete fs.preset,xs.init(hs),[4,xs.execute()]);case 1:return ms.sent(),rs==null||rs(),is(),[2,!0]}})})})},ts.prototype.layoutWithWorker=function(rs,as){var os=this,is=this,us=is.layoutCfg,ls=is.graph,fs=this.getWorker(),hs=this.workerData;if(!fs)return!1;hs.requestId=null,hs.requestId2=null,hs.currentTick=null,hs.currentTickData=null,ls.emit("beforelayout");var vs=Promise.resolve(),gs=!1;if(us.type)gs=!0,vs=vs.then(function(){return os.runWebworker(fs,rs,us)});else if(us.pipes){gs=!0;for(var ys=function($s){vs=vs.then(function(){return os.runWebworker(fs,rs,$s)})},xs=0,ms=us.pipes;xs<ms.length;xs++){var Ss=ms[xs];ys(Ss)}}return gs&&vs.then(function(){us.onAllLayoutEnd&&us.onAllLayoutEnd(),as==null||as()}).catch(function(Ms){console.error("layout failed",Ms)}),!0},ts.prototype.runWebworker=function(rs,as,os){var is=this,us=this.isGPU,ls=this.filterLayoutData(as,os),fs=ls.nodes,hs=ls.edges,vs=document.createElement("canvas"),gs=us&&typeof window<"u"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in vs,ys=filterObject(os,function(ms){return typeof ms!="function"});if(!gs)rs.postMessage({type:LAYOUT_MESSAGE.RUN,nodes:fs,edges:hs,layoutCfg:ys});else{var xs=vs.transferControlToOffscreen();ys.type="".concat(ys.type,"-gpu"),rs.postMessage({type:LAYOUT_MESSAGE.GPURUN,nodes:fs,edges:hs,layoutCfg:ys,canvas:xs},[xs])}return new Promise(function(ms,Ss){rs.onmessage=function(Ms){is.handleWorkerMessage(ms,Ss,Ms,ls,os)}})},ts.prototype.handleWorkerMessage=function(rs,as,os,is,us){var ls=this,fs=ls.graph,hs=ls.workerData,vs=os.data,gs=vs.type,ys=function(){us.onTick&&us.onTick()};switch(gs){case LAYOUT_MESSAGE.TICK:hs.currentTick=vs.currentTick,hs.currentTickData=vs,hs.requestId||(hs.requestId=helper.requestAnimationFrame(function(){updateLayoutPosition(is,vs),fs.refreshPositions(),ys(),vs.currentTick===vs.totalTicks?rs():hs.currentTick===vs.totalTicks&&(hs.requestId2=helper.requestAnimationFrame(function(){updateLayoutPosition(is,hs.currentTickData),fs.refreshPositions(),hs.requestId2=null,ys(),rs()})),hs.requestId=null}));break;case LAYOUT_MESSAGE.END:hs.currentTick==null&&(updateLayoutPosition(is,vs),rs());break;case LAYOUT_MESSAGE.GPUEND:hs.currentTick==null&&(updateGPUWorkerLayoutPosition(is,vs),rs());break;case LAYOUT_MESSAGE.ERROR:console.warn("Web-Worker layout error!",vs.message),as();break;default:as();break}},ts.prototype.updateLayoutCfg=function(rs){var as=this,os=this,is=os.graph,us=os.layoutMethods;if(!(!is||is.get("destroyed"))){var ls=rs.disableTriggerLayout,fs=__rest$2(rs,["disableTriggerLayout"]),hs=mix$1({},this.layoutCfg,fs);if(this.layoutCfg=hs,!ls){if(!(us!=null&&us.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(fs.workerEnabled&&this.layoutWithWorker(this.data,null))){is.emit("beforelayout");var vs=Promise.resolve(),gs=!1;(us==null?void 0:us.length)===1?(gs=!0,vs=vs.then(function(){return __awaiter$2(as,void 0,void 0,function(){return __generator$2(this,function(ys){switch(ys.label){case 0:return[4,this.updateLayoutMethod(us[0],hs)];case 1:return[2,ys.sent()]}})})})):us!=null&&us.length&&(gs=!0,us.forEach(function(ys,xs){var ms=hs.pipes[xs];vs=vs.then(function(){return __awaiter$2(as,void 0,void 0,function(){return __generator$2(this,function(Ss){switch(Ss.label){case 0:return[4,this.updateLayoutMethod(ys,ms)];case 1:return[2,Ss.sent()]}})})})})),gs&&vs.then(function(){hs.onAllLayoutEnd&&hs.onAllLayoutEnd()}).catch(function(ys){console.warn("layout failed",ys)})}}}},ts.prototype.adjustPipesBox=function(rs,as){var os=this;return new Promise(function(is){var us=rs.nodes;us!=null&&us.length||is(),LAYOUT_PIPES_ADJUST_NAMES.includes(as)||(console.warn("The adjust type ".concat(as," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),is());var ls={center:os.layoutCfg.center,nodeSize:function(ms){return Math.max(ms.height,ms.width)},preventOverlap:!0,onLayoutEnd:function(){}},fs=os.getLayoutBBox(us),hs=fs.groupNodes,vs=fs.layoutNodes,gs=clone$b(vs);ls.onLayoutEnd=function(){vs==null||vs.forEach(function(xs,ms){var Ss,Ms,$s,bs=xs.x-((Ss=gs[ms])===null||Ss===void 0?void 0:Ss.x),Cs=xs.y-((Ms=gs[ms])===null||Ms===void 0?void 0:Ms.y);($s=hs[ms])===null||$s===void 0||$s.forEach(function(As){As.x+=bs,As.y+=Cs})}),is()};var ys=new lib.Layouts[as](ls);ys.layout({nodes:vs})})},ts.prototype.destroy=function(){this.destoryLayoutMethods();var rs=this.worker;rs&&(rs.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},ts}(LayoutController$2);function updateLayoutPosition(ns,ts){for(var rs=ns.nodes,as=ts.nodes,os=rs.length,is=0;is<os;is++){var us=rs[is];us.x=as[is].x,us.y=as[is].y}}function filterObject(ns,ts){var rs={};return ns&&_typeof$4(ns)==="object"?(Object.keys(ns).forEach(function(as){ns.hasOwnProperty(as)&&ts(ns[as])&&(rs[as]=ns[as])}),rs):ns}function updateGPUWorkerLayoutPosition(ns,ts){for(var rs=ns.nodes,as=ts.vertexEdgeData,os=rs.length,is=0;is<os;is++){var us=rs[is],ls=as[4*is],fs=as[4*is+1];us.x=ls,us.y=fs}}function addLayoutOrder(ns,ts){var rs;if(!((rs=ns==null?void 0:ns.nodes)===null||rs===void 0)&&rs.length){var as=ns.nodes;as.forEach(function(os){os.layoutOrder=ts})}}function hasGPUVersion(ns){return GPU_LAYOUT_NAMES.includes(ns)}function getGPUEnabled(ns,ts){var rs=ts;ts&&ts.split("-")[1]==="gpu"&&(rs=ts.split("-")[0],ns.gpuEnabled=!0);var as=!1;return ns.gpuEnabled&&(as=!0,gpuDetector().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),as=!1)),as&&!hasGPUVersion(rs)&&(console.warn("The '".concat(rs,"' layout does not support GPU calculation for now, it will run in CPU.")),as=!1),as}var transform$9=transform$i,SVG$1="svg",Graph=function(ns){__extends$x(ts,ns);function ts(rs){var as=ns.call(this,rs)||this,os=as.get("defaultNode");return os||as.set("defaultNode",{type:"circle"}),os.type||(os.type="circle",as.set("defaultNode",os)),as.destroyed=!1,as}return ts.prototype.initLayoutController=function(){var rs=new LayoutController$1(this);this.set({layoutController:rs})},ts.prototype.initEventController=function(){var rs=new EventController$1(this);this.set({eventController:rs})},ts.prototype.initCanvas=function(){var rs=this.get("container");if(typeof rs=="string"&&(rs=document.getElementById(rs),this.set("container",rs)),!rs)throw new Error("invalid container");var as=rs.clientWidth,os=rs.clientHeight,is=this.get("width")||as,us=this.get("height")||os;!this.get("width")&&!this.get("height")&&(this.set("width",as),this.set("height",os));var ls=this.get("renderer"),fs;if(ls===SVG$1)fs=new Canvas({container:rs,width:is,height:us});else{var hs={container:rs,width:is,height:us},vs=this.get("pixelRatio");vs&&(hs.pixelRatio=vs,window.devicePixelRatio=vs),fs=new Canvas$1(hs)}this.set("canvas",fs)},ts.prototype.initPlugins=function(){var rs=this;each$1(rs.get("plugins"),function(as){!as.destroyed&&as.initPlugin&&as.initPlugin(rs)})},ts.prototype.downloadImageWatermark=function(rs,as,os,is){return __awaiter$2(this,void 0,void 0,function(){var us,ls,fs;return __generator$2(this,function(hs){switch(hs.label){case 0:return us=rs.style.backgroundImage,ls=us.slice(5,us.length-2),fs=new Image,fs.src=ls,[4,new Promise(function(vs){fs.onload=function(){var gs=as.createPattern(fs,"repeat");as.rect(0,0,os,is),as.fillStyle=gs,as.fill(),vs("")}})];case 1:return hs.sent(),[2]}})})},ts.prototype.asyncToDataUrl=function(rs,as,os,is,us,ls){var fs=this,hs=document.querySelector(".g6-graph-watermarker"),vs=this.get("canvas"),gs=vs.getRenderer(),ys=ls||vs.get("el"),xs="";rs||(rs="image/png"),setTimeout(function(){return __awaiter$2(fs,void 0,void 0,function(){var ms,Ss,Ms,$s,bs,Cs,As,Is,ks,Ps;return __generator$2(this,function(Ds){switch(Ds.label){case 0:return gs!=="svg"?[3,1]:(ms=ys.cloneNode(!0),Ss=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Ms=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Ss),Ms.replaceChild(ms,Ms.documentElement),$s=new XMLSerializer().serializeToString(Ms),xs="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent($s)),[3,4]);case 1:return bs=void 0,Cs=ys.getContext("2d"),As=is||this.get("width"),Is=us||this.get("height"),ks=void 0,hs?[4,this.downloadImageWatermark(hs,Cs,As,Is)]:[3,3];case 2:Ds.sent(),Ds.label=3;case 3:if(as){Ps=typeof window<"u"?window.devicePixelRatio:1;try{bs=Cs.getImageData(0,0,As*Ps,Is*Ps),ks=Cs.globalCompositeOperation,Cs.globalCompositeOperation="destination-over",Cs.fillStyle=as,Cs.fillRect(0,0,As,Is)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}xs=ys.toDataURL(rs),as&&(Cs.clearRect(0,0,As,Is),Cs.putImageData(bs,0,0),Cs.globalCompositeOperation=ks),Ds.label=4;case 4:return os&&os(xs),[2]}})})},16)},ts.prototype.toDataURL=function(rs,as){var os=this.get("canvas"),is=os.getRenderer(),us=os.get("el");rs||(rs="image/png");var ls="";if(is==="svg"){var fs=us.cloneNode(!0),hs=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),vs=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",hs);vs.replaceChild(fs,vs.documentElement);var gs=new XMLSerializer().serializeToString(vs);ls="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(gs))}else{var ys=void 0,xs=us.getContext("2d"),ms=Math.max(this.get("width"),500),Ss=Math.max(this.get("height"),500),Ms=void 0;if(as){var $s=typeof window<"u"&&window.devicePixelRatio||1;try{ys=xs.getImageData(0,0,ms*$s,Ss*$s),Ms=xs.globalCompositeOperation,xs.globalCompositeOperation="destination-over",xs.fillStyle=as,xs.fillRect(0,0,ms,Ss)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}ls=us.toDataURL(rs),as&&(xs.clearRect(0,0,ms,Ss),xs.putImageData(ys,0,0),xs.globalCompositeOperation=Ms)}return ls},ts.prototype.toFullDataURL=function(rs,as,os){var is=this.get("group").getCanvasBBox(),us=is.height,ls=is.width,fs=this.get("renderer"),hs=createDom('<div id="virtual-image"></div>'),vs=os?os.backgroundColor:void 0,gs=os?os.padding:void 0;gs?isNumber$3(gs)&&(gs=[gs,gs,gs,gs]):gs=[0,0,0,0];var ys=us+gs[0]+gs[2],xs=ls+gs[1]+gs[3],ms={container:hs,height:ys,width:xs,quickHit:!0},Ss=fs==="svg"?new Canvas(ms):new Canvas$1(ms),Ms=this.get("group"),$s=Ms.clone(),bs=clone$b($s.getMatrix());bs||(bs=[1,0,0,0,1,0,0,0,1]);var Cs=(is.maxX+is.minX)/2,As=(is.maxY+is.minY)/2;bs=transform$9(bs,[["t",-Cs,-As],["t",ls/2+gs[3],us/2+gs[0]]]),$s.resetMatrix(),$s.setMatrix(bs),Ss.add($s);var Is=Ss.get("el"),ks="";as||(as="image/png"),setTimeout(function(){if(fs==="svg"){var Ps=Is.cloneNode(!0),Ds=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Fs=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Ds);Fs.replaceChild(Ps,Fs.documentElement);var Rs=new XMLSerializer().serializeToString(Fs);ks="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(Rs))}else{var js=void 0,zs=Is.getContext("2d"),Us=void 0;if(vs){var Ys=typeof window<"u"?window.devicePixelRatio:1;try{js=zs.getImageData(0,0,xs*Ys,ys*Ys),Us=zs.globalCompositeOperation,zs.globalCompositeOperation="destination-over",zs.fillStyle=vs,zs.fillRect(0,0,xs,ys)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}ks=Is.toDataURL(as),vs&&(zs.clearRect(0,0,xs,ys),zs.putImageData(js,0,0),zs.globalCompositeOperation=Us)}rs&&rs(ks)},16)},ts.prototype.downloadFullImage=function(rs,as,os){var is=this,us=this.get("group").getCanvasBBox(),ls=us.height,fs=us.width,hs=this.get("renderer"),vs=createDom('<div id="virtual-image"></div>'),gs=document.querySelector(".g6-graph-watermarker"),ys=os?os.backgroundColor:void 0,xs=os?os.padding:void 0;xs?isNumber$3(xs)&&(xs=[xs,xs,xs,xs]):xs=[0,0,0,0];var ms=ls+xs[0]+xs[2],Ss=fs+xs[1]+xs[3];if(gs){var Ms=this.get("graphWaterMarker").cfg||{},$s=Ms.width,bs=Ms.height;ms=Math.ceil(ms/bs)*bs,Ss=Math.ceil(Ss/$s)*$s}var Cs={container:vs,height:ms,width:Ss},As=hs==="svg"?new Canvas(Cs):new Canvas$1(Cs),Is=this.get("group"),ks=cloneGElement(Is),Ps=clone$b(ks.getMatrix());Ps||(Ps=[1,0,0,0,1,0,0,0,1]);var Ds=(us.maxX+us.minX)/2,Fs=(us.maxY+us.minY)/2;Ps=transform$9(Ps,[["t",-Ds,-Fs],["t",fs/2+xs[3],ls/2+xs[0]]]),ks.resetMatrix(),ks.setMatrix(Ps),As.add(ks);var Rs=As.get("el");as||(as="image/png"),this.asyncToDataUrl(as,ys,function(js){var zs=document.createElement("a"),Us=(rs||"graph")+(hs==="svg"?".svg":".".concat(as.split("/")[1]));is.dataURLToImage(js,hs,zs,Us);var Ys=document.createEvent("MouseEvents");Ys.initEvent("click",!1,!1),zs.dispatchEvent(Ys)},Ss,ms,Rs)},ts.prototype.downloadImage=function(rs,as,os){var is=this,us=this;us.stopAnimate();var ls=us.get("canvas"),fs=ls.getRenderer();as||(as="image/png");var hs=(rs||"graph")+(fs==="svg"?".svg":".".concat(as.split("/")[1])),vs=document.createElement("a");us.asyncToDataUrl(as,os,function(gs){is.dataURLToImage(gs,fs,vs,hs);var ys=document.createEvent("MouseEvents");ys.initEvent("click",!1,!1),vs.dispatchEvent(ys)})},ts.prototype.dataURLToImage=function(rs,as,os,is){if(!rs||rs==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window<"u")if(window.Blob&&window.URL&&as!=="svg"){var us=rs.split(","),ls="";if(us&&us.length>0){var fs=us[0].match(/:(.*?);/);fs&&fs.length>=2&&(ls=fs[1])}for(var hs=atob(us[1]),vs=hs.length,gs=new Uint8Array(vs);vs--;)gs[vs]=hs.charCodeAt(vs);var ys=new Blob([gs],{type:ls});window.navigator.msSaveBlob?window.navigator.msSaveBlob(ys,is):os.addEventListener("click",function(){os.download=is,os.href=window.URL.createObjectURL(ys)})}else os.addEventListener("click",function(){os.download=is,os.href=rs})},ts.prototype.addPlugin=function(rs){var as=this;rs.destroyed||(as.get("plugins").push(rs),rs.initPlugin(as))},ts.prototype.removePlugin=function(rs){var as=this.get("plugins"),os=as.indexOf(rs);os>=0&&(rs.destroyPlugin(),as.splice(os,1))},ts.prototype.setImageWaterMarker=function(rs,as){rs===void 0&&(rs=Global$1.waterMarkerImage);var os=this.get("container");isString$2(os)&&(os=document.getElementById(os)),os.style.position||(os.style.position="relative");var is=this.get("graphWaterMarker"),us=deepMix$2({},Global$1.imageWaterMarkerConfig,as),ls=us.width,fs=us.height,hs=us.compatible,vs=us.image;if(!rs){var gs=hs?os:document.querySelector(".g6-graph-watermarker");gs&&(gs.style.cssText=void 0),is&&is.clear();return}if(is)is.clear();else{var ys={container:os,width:ls,height:fs,capture:!1},xs=this.get("pixelRatio");xs&&(ys.pixelRatio=xs,window.devicePixelRatio=xs),is=new Canvas$1(ys),this.set("graphWaterMarker",is)}is.get("el").style.display="none";var ms=is.get("context"),Ss=vs.rotate,Ms=vs.x,$s=vs.y;ms.rotate(-Ss*Math.PI/180);var bs=new Image;bs.crossOrigin="anonymous",bs.src=rs,bs.onload=function(){if(ms.drawImage(bs,Ms,$s,vs.width,vs.height),ms.rotate(Ss*Math.PI/180),hs)os.style.cssText="background-image: url(".concat(is.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var Cs=document.querySelector(".g6-graph-watermarker");Cs||(Cs=document.createElement("div"),Cs.className="g6-graph-watermarker"),Cs.className="g6-graph-watermarker",is.destroyed||(Cs.style.cssText="background-image: url(".concat(is.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),os.appendChild(Cs))}}},ts.prototype.setTextWaterMarker=function(rs,as){var os=this.get("container");isString$2(os)&&(os=document.getElementById(os)),os.style.position||(os.style.position="relative");var is=this.get("graphWaterMarker"),us=deepMix$2({},Global$1.textWaterMarkerConfig,as),ls=us.width,fs=us.height,hs=us.compatible,vs=us.text;if(!(rs!=null&&rs.length)){var gs=hs?os:document.querySelector(".g6-graph-watermarker");gs&&(gs.style.cssText=void 0),is&&is.clear();return}if(is)is.clear();else{var ys={container:os,width:ls,height:fs,capture:!1},xs=this.get("pixelRatio");xs&&(ys.pixelRatio=xs,window.devicePixelRatio=xs),is=new Canvas$1(ys),this.set("graphWaterMarker",is)}is.get("el").style.display="none";var ms=is.get("context"),Ss=vs.rotate,Ms=vs.fill,$s=vs.fontFamily,bs=vs.fontSize,Cs=vs.baseline,As=vs.x,Is=vs.y,ks=vs.lineHeight;ms.rotate(-Ss*Math.PI/180),ms.font="".concat(bs,"px ").concat($s),ms.fillStyle=Ms,ms.textBaseline=Cs;for(var Ps=isString$2(rs)?[rs]:rs,Ds=Ps.length-1;Ds>=0;Ds--)ms.fillText(Ps[Ds],As,Is+Ds*ks);if(ms.rotate(Ss*Math.PI/180),hs)os.style.cssText="background-image: url(".concat(is.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var Fs=document.querySelector(".g6-graph-watermarker");Fs||(Fs=document.createElement("div"),Fs.className="g6-graph-watermarker"),Fs.style.cssText="background-image: url(".concat(is.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),os.appendChild(Fs)}},ts.prototype.destroy=function(){var rs,as,os,is;each$1(this.get("plugins"),function(vs){vs.destroyPlugin()});var us=this.get("tooltips");if(us)for(var ls=0;ls<us.length;ls++){var fs=us[ls];if(fs){var hs=fs.parentElement;hs&&hs.removeChild(fs)}}(rs=this.get("eventController"))===null||rs===void 0||rs.destroy(),(as=this.get("layoutController"))===null||as===void 0||as.destroy(),(os=this.get("graphWaterMarker"))===null||os===void 0||os.destroy(),(is=document.querySelector(".g6-graph-watermarker"))===null||is===void 0||is.remove(),ns.prototype.destroy.call(this)},ts}(AbstractGraph$1);function _typeof$3(ns){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ts){return typeof ts}:function(ts){return ts&&typeof Symbol=="function"&&ts.constructor===Symbol&&ts!==Symbol.prototype?"symbol":typeof ts},_typeof$3(ns)}function traverseClone(ns,ts){if(ts===void 0&&(ts=new WeakMap),ns===null)return ns;if(ns instanceof Date)return new Date(ns);if(ns instanceof RegExp)return new RegExp(ns);if(_typeof$3(ns)!=="object")return ns;if(ts.get(ns))return ts.get(ns);var rs=Array.isArray(ns)?[]:{};ts.set(ns,rs);for(var as in ns)ns.hasOwnProperty(as)&&ns[as]!==void 0&&(rs[as]=traverseClone(ns[as],ts));return rs}function deepClone(ns){try{return structuredClone(ns)}catch{return traverseClone(ns)}}var radialLayout=G6Util.radialLayout,traverseTree$1=G6Util.traverseTree,TreeGraph=function(ns){__extends$x(ts,ns);function ts(rs){var as=ns.call(this,rs)||this;return as.layoutAnimating=!1,as.set("removeList",[]),as.set("layoutMethod",as.getLayout()),as}return ts.prototype.getLayout=function(){var rs=this.get("layout");return rs?typeof rs=="function"?rs:(rs.type||(rs.type="dendrogram"),rs.direction||(rs.direction=rs.type==="indented"?"LR":"TB"),rs.radial?function(as){var os=Hierarchy[rs.type](as,rs);return radialLayout(os),os}:function(as){return Hierarchy[rs.type](as,rs)}):null},ts.indexOfChild=function(rs,as){var os=-1;return each$1(rs,function(is,us){if(as===is.id)return os=us,!1}),os},ts.prototype.getDefaultCfg=function(){var rs=ns.prototype.getDefaultCfg.call(this);return rs.animate=!0,rs},ts.prototype.innerAddChild=function(rs,as,os){var is=this,us=rs.data;us&&(us.x=rs.x,us.y=rs.y,us.depth=rs.depth);var ls=is.addItem("node",us,!1);if(as){if(ls.set("parent",as),os){var fs=as.get("originAttrs");if(fs)ls.set("originAttrs",fs);else{var hs=as.getModel();ls.set("originAttrs",{x:hs.x,y:hs.y})}}var vs=as.get("children");vs?vs.push(ls):as.set("children",[ls]),is.addItem("edge",{source:as.get("id"),target:ls.get("id"),id:"".concat(as.get("id"),":").concat(ls.get("id"))},!1)}return each$1(rs.children||[],function(gs){is.innerAddChild(gs,ls,os)}),is.emit("afteraddchild",{item:ls,parent:as}),ls},ts.prototype.innerUpdateChild=function(rs,as,os){var is=this,us=is.findById(rs.id);if(!us){is.innerAddChild(rs,as,os);return}each$1(rs.children||[],function(ms){is.innerUpdateChild(ms,us,os)});var ls=us.get("children");if(ls){var fs=ls.length;if(fs>0)for(var hs=ls.length-1;hs>=0;hs--){var vs=ls[hs].getModel();ts.indexOfChild(rs.children||[],vs.id)===-1&&(is.innerRemoveChild(vs.id,{x:rs.x,y:rs.y},os),ls.splice(hs,1))}}var gs,ys;us.get("originAttrs")&&(gs=us.get("originAttrs").x,ys=us.get("originAttrs").y);var xs=us.getModel();os&&us.set("originAttrs",{x:xs.x,y:xs.y}),us.set("model",Object.assign(xs,rs.data)),(gs!==rs.x||ys!==rs.y)&&us.updatePosition({x:rs.x,y:rs.y})},ts.prototype.innerRemoveChild=function(rs,as,os){var is=this,us=is.findById(rs);if(us)if(each$1(us.get("children"),function(fs){is.innerRemoveChild(fs.getModel().id,as,os)}),os){var ls=us.getModel();us.set("to",as),us.set("originAttrs",{x:ls.x,y:ls.y}),is.get("removeList").push(us)}else is.removeItem(us,!1)},ts.prototype.changeData=function(rs,as){as===void 0&&(as=!0);var os=this;this.getNodes().map(function(is){return os.clearItemStates(is)}),this.getEdges().map(function(is){return os.clearItemStates(is)}),as&&this.get("enabledStack")&&this.pushStack("changedata",{before:os.get("originData"),after:rs||os.get("data")}),rs?(os.data(rs),os.render(!1)):os.layout(this.get("fitView"))},ts.prototype.changeLayout=function(rs){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var as=this;as.updateLayout(rs)},ts.prototype.updateLayout=function(rs,as,os,is){is===void 0&&(is=!0);var us=this;if(!rs){console.warn("layout cannot be null");return}if(is&&this.get("enabledStack")&&this.pushStack("layout",{before:us.get("layout"),after:rs}),us.set("layout",rs),us.set("layoutMethod",us.getLayout()),us.layout(),as){var ls=os;ls||(as==="begin"?ls={x:0,y:0}:ls={x:this.getWidth()/2,y:this.getHeight()/2}),ls=this.getPointByCanvas(ls.x,ls.y);var fs=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];ls.x=ls.x*fs[0]+fs[6],ls.y=ls.y*fs[0]+fs[7];var hs=this.getGroup().getCanvasBBox(),vs=hs.minX,gs=hs.maxX,ys=hs.minY,xs=hs.maxY,ms={x:(vs+gs)/2,y:(ys+xs)/2};as==="begin"&&(ms.x=vs,ms.y=ys),this.translate(ls.x-ms.x,ls.y-ms.y)}},ts.prototype.refreshLayout=function(rs){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var as=this;as.layout(rs)},ts.prototype.layout=function(rs){var as=this,os=this,is=os.get("data"),us=os.get("layoutMethod"),ls=os.get("layout"),fs=is;if(ls!=null&&ls.excludeInvisibles){is=clone$b(os.get("data"));var hs={};traverseTree$1(is,function(ys){var xs=ys.children;if(!(xs!=null&&xs.length))return!0;for(var ms=xs.length-1;ms>=0;ms--){var Ss=as.findById(xs[ms].id),Ms=Ss?!Ss.isVisible():xs[ms].visible===!1;Ms&&(hs[ys.id]=hs[ys.id]||[],hs[ys.id].push({idx:ms,child:xs.splice(ms,1)[0]}))}}),fs=us?us(is,os.get("layout")):is,traverseTree$1(fs,function(ys){var xs=hs[ys.id];if(xs!=null&&xs.length)for(var ms=xs.length-1;ms>=0;ms--){var Ss=xs[ms],Ms=Ss.idx,$s=Ss.child;ys.children.splice(Ms,0,$s)}})}else fs=us?us(is,os.get("layout")):is;var vs=os.get("animate");if(os.emit("beforerefreshlayout",{data:is,layoutData:fs}),os.emit("beforelayout"),os.innerUpdateChild(fs,void 0,vs),rs){var gs=os.get("viewController");gs.fitView()}vs?os.layoutAnimate(fs):(os.refresh(),os.paint()),os.emit("afterrefreshlayout",{data:is,layoutData:fs}),os.emit("afterlayout")},ts.prototype.addChild=function(rs,as,os){os===void 0&&(os=!0);var is=this;is.emit("beforeaddchild",{model:rs,parent:as}),isString$2(as)||(as=as.get("id"));var us=is.findDataById(as);if(us){us.children||(us.children=[]),us.children.push(rs);var ls=is.findById(as);ls.refresh(),is.changeData(void 0,os)}},ts.prototype.updateChildren=function(rs,as,os){os===void 0&&(os=!0);var is=this,us=is.findById(as);if(!as||!us){console.warn("Update children failed! There is no node with id '".concat(as,"'"));return}var ls=is.findDataById(as);ls.children=rs,us.refresh(),is.changeData(void 0,os)},ts.prototype.updateChild=function(rs,as,os){os===void 0&&(os=!0);var is=this;if(!as||!is.findById(as)){is.changeData(rs,os);return}var us=is.findDataById(as),ls=is.findById(rs.id);if(us.children||(us.children=[]),!ls)us.children.push(rs);else{var fs=ts.indexOfChild(us.children,rs.id);fs>-1&&(us.children[fs]=rs)}var hs=is.findById(as);hs==null||hs.refresh(),is.changeData(void 0,os)},ts.prototype.removeChild=function(rs,as){as===void 0&&(as=!0);var os=this,is=os.findById(rs),us;if(is?us=is==null?void 0:is.get("parent"):us=os.getNodes().find(function(gs){var ys=gs.getModel().children||[];return!!ys.find(function(xs){return xs.id===rs})}),us&&!us.destroyed){var ls=us.get("id"),fs=os.findDataById(ls),hs=fs&&fs.children||[],vs=ts.indexOfChild(hs,rs);hs.splice(vs,1),us.refresh()}os.changeData(void 0,as)},ts.prototype.findDataById=function(rs,as){var os=this;if(as||(as=os.get("data")),rs===as.id)return as;var is=null;return each$1(as.children||[],function(us){if(us.id===rs)return is=us,!1;if(is=os.findDataById(rs,us),is)return!1}),is},ts.prototype.layoutAnimate=function(rs,as){var os=this,is=this.get("animateCfg");os.emit("beforeanimate",{data:rs}),os.getEdges().forEach(function(us){var ls=us.get("model");ls.sourceAnchor||(ls.sourceAnchor=us.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(us){traverseTree$1(rs,function(ls){var fs=os.findById(ls.id);if(fs){var hs=fs.get("originAttrs"),vs=fs.get("model");if(hs||(hs={x:vs.x,y:vs.y},fs.set("originAttrs",hs)),as){var gs=as(fs,us,hs,rs);fs.set("model",Object.assign(vs,gs))}else vs.x=hs.x+(ls.x-hs.x)*us,vs.y=hs.y+(ls.y-hs.y)*us}return!0}),each$1(os.get("removeList"),function(ls){var fs=ls.getModel(),hs=ls.get("originAttrs"),vs=ls.get("to");fs.x=hs.x+(vs.x-hs.x)*us,fs.y=hs.y+(vs.y-hs.y)*us}),os.refreshPositions()},{duration:is.duration,easing:is.ease,callback:function(){each$1(os.getNodes(),function(ls){ls.set("originAttrs",null)}),each$1(os.get("removeList"),function(ls){os.removeItem(ls,!1)}),os.set("removeList",[]),is.callback&&is.callback(),os.emit("afteranimate",{data:rs})},delay:is.delay})},ts.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},ts.prototype.isLayoutAnimating=function(){return this.layoutAnimating},ts.prototype.render=function(rs){rs===void 0&&(rs=!0);var as=this,os=as.get("data");if(!os||!isObject$1(os)||!Object.keys(os).length)throw new Error("data must be defined first");as.clear(),rs&&this.get("enabledStack")&&this.clearStack(),as.emit("beforerender"),as.layout(this.get("fitView")),as.emit("afterrender")},ts.prototype.save=function(){return this.get("data")},ts.prototype.data=function(rs){ns.prototype.data.call(this,rs),this.set("originData",deepClone(rs))},ts}(Graph),PluginBase=function(){function ns(ts){this._cfgs=deepMix$2(this.getDefaultCfgs(),ts),this._events={},this.destroyed=!1}return ns.prototype.getDefaultCfgs=function(){return{}},ns.prototype.initPlugin=function(ts){var rs=this;rs.set("graph",ts);var as=rs.getEvents(),os={};each$1(as,function(is,us){var ls=wrapBehavior$1(rs,is);os[us]=ls,ts.on(us,ls)}),this._events=os,this.init()},ns.prototype.getEvents=function(){return{}},ns.prototype.get=function(ts){var rs;return(rs=this._cfgs)===null||rs===void 0?void 0:rs[ts]},ns.prototype.set=function(ts,rs){this._cfgs[ts]=rs},ns.prototype.destroy=function(){},ns.prototype.destroyPlugin=function(){this.destroy();var ts=this.get("graph"),rs=this._events;each$1(rs,function(as,os){ts.off(os,as)}),this._events=null,this._cfgs=null,this.destroyed=!0},ns}();const PluginBase$1=PluginBase;var __extends$c=function(){var ns=function(rs,as){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(os,is){os.__proto__=is}||function(os,is){for(var us in is)Object.prototype.hasOwnProperty.call(is,us)&&(os[us]=is[us])},ns(rs,as)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),GRID_PNG="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Grid=function(ns){__extends$c(ts,ns);function ts(rs){return ns.call(this,rs)||this}return ts.prototype.getDefaultCfgs=function(){return{img:GRID_PNG,follow:!0}},ts.prototype.init=function(){var rs=this.get("graph"),as=rs.get("container"),os=rs.get("canvas").get("el"),is=this.get("img")||GRID_PNG;is.includes("url(")||(is='url("'.concat(is,'")'));var us=createDom(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),ls=createDom(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(is,`;
        user-select: none
        '></div>`));this.set("container",us),this.set("gridContainer",ls),this.positionInit(),us.appendChild(ls),as.insertBefore(us,os)},ts.prototype.positionInit=function(){var rs=this.get("graph"),as=rs.get("minZoom"),os=rs.get("width"),is=rs.get("height");modifyCSS$1(this.get("container"),{width:"".concat(os,"px"),height:"".concat(is,"px")});var us=os*80/as,ls=is*80/as;modifyCSS$1(this.get("gridContainer"),{width:"".concat(us,"px"),height:"".concat(ls,"px"),left:"-".concat(us/2,"px"),top:"-".concat(ls/2,"px")})},ts.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},ts.prototype.updateGrid=function(rs){var as=this.get("gridContainer"),os=rs.matrix;os||(os=[1,0,0,0,1,0,0,0,1]);var is=this.get("follow"),us="matrix(".concat(os[0],", ").concat(os[1],", ").concat(os[3],", ").concat(os[4],", ").concat(is?os[6]:"0",", ").concat(is?os[7]:"0",")");modifyCSS$1(as,{transform:us})},ts.prototype.getContainer=function(){return this.get("container")},ts.prototype.destroy=function(){var rs=this.get("graph"),as=rs.get("container"),os=this.get("container");as.removeChild(os)},ts}(PluginBase$1);const Grid$1=Grid;var insertCss$2={exports:{}},containers=[],styleElements=[],usage="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function insertCss(ns,ts){if(ts=ts||{},ns===void 0)throw new Error(usage);var rs=ts.prepend===!0?"prepend":"append",as=ts.container!==void 0?ts.container:document.querySelector("head"),os=containers.indexOf(as);os===-1&&(os=containers.push(as)-1,styleElements[os]={});var is;return styleElements[os]!==void 0&&styleElements[os][rs]!==void 0?is=styleElements[os][rs]:(is=styleElements[os][rs]=createStyleElement(),rs==="prepend"?as.insertBefore(is,as.childNodes[0]):as.appendChild(is)),ns.charCodeAt(0)===65279&&(ns=ns.substr(1,ns.length)),is.styleSheet?is.styleSheet.cssText+=ns:is.textContent+=ns,is}function createStyleElement(){var ns=document.createElement("style");return ns.setAttribute("type","text/css"),ns}insertCss$2.exports=insertCss;insertCss$2.exports.insertCss=insertCss;var insertCssExports=insertCss$2.exports;const insertCss$1=getDefaultExportFromCjs(insertCssExports);var __extends$b=function(){var ns=function(rs,as){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(os,is){os.__proto__=is}||function(os,is){for(var us in is)Object.prototype.hasOwnProperty.call(is,us)&&(os[us]=is[us])},ns(rs,as)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}();typeof document<"u"&&insertCss$1(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var Menu=function(ns){__extends$b(ts,ns);function ts(rs){return ns.call(this,rs)||this}return ts.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(as){return`
          <ul class='g6-contextmenu-ul'>
            <li>菜单项1</li>
            <li>菜单项2</li>
          </ul>
        `},shouldBegin:function(as){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},ts.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},ts.prototype.init=function(){var rs=this.get("className"),as=createDom("<div class=".concat(rs||"g6-component-contextmenu","></div>"));modifyCSS$1(as,{top:"0px",position:"absolute",visibility:"hidden"});var os=this.get("container");os||(os=this.get("graph").get("container")),isString$2(os)&&(os=document.getElementById(os)),os.appendChild(as),this.set("menu",as)},ts.prototype.onMenuShow=function(rs){var as=this;rs.preventDefault();var os=this.get("itemTypes");if(rs.item){if(rs.item&&rs.item.getType&&os.indexOf(rs.item.getType())===-1){as.onMenuHide();return}}else if(os.indexOf("canvas")===-1){as.onMenuHide();return}var is=this.get("shouldBegin");if(is(rs)){var us=this.get("menu"),ls=this.get("getContent"),fs=this.get("graph"),hs=ls(rs,fs);isString$2(hs)?us.innerHTML=hs:us.innerHTML=hs.outerHTML,this.removeMenuEventListener();var vs=this.get("handleMenuClick");if(vs){var gs=function(Ds){vs(Ds.target,rs.item,fs)};this.set("handleMenuClickWrapper",gs),us.addEventListener("click",gs)}var ys=fs.get("width"),xs=fs.get("height"),ms=us.getBoundingClientRect(),Ss=this.get("offsetX")||0,Ms=this.get("offsetY")||0,$s=fs.getContainer().offsetTop,bs=fs.getContainer().offsetLeft,Cs=rs.canvasX+bs+Ss,As=rs.canvasY+$s+Ms;Cs+ms.width>ys&&(Cs=rs.canvasX-ms.width-Ss+bs),As+ms.height>xs&&(As=rs.canvasY-ms.height-Ms+$s),As<0&&(As=0),modifyCSS$1(us,{top:"".concat(As,"px"),left:"".concat(Cs,"px"),visibility:"visible"});var Is=this.get("trigger")==="click",ks=function(Ds){if(Is){Is=!1;return}as.onMenuHide()};document.body.addEventListener("click",ks),this.set("handler",ks)}},ts.prototype.removeMenuEventListener=function(){var rs=this.get("handleMenuClickWrapper"),as=this.get("handler");if(rs){var os=this.get("menu");os.removeEventListener("click",rs),this.set("handleMenuClickWrapper",null)}as&&document.body.removeEventListener("click",as)},ts.prototype.onMenuHide=function(){var rs=this.get("menu");rs&&modifyCSS$1(rs,{visibility:"hidden"}),this.removeMenuEventListener()},ts.prototype.destroy=function(){var rs=this.get("menu");if(this.removeMenuEventListener(),rs){var as=this.get("container");as||(as=this.get("graph").get("container")),isString$2(as)&&(as=document.getElementById(as)),as.removeChild(rs)}},ts}(PluginBase$1);const Menu$1=Menu;var __extends$a=function(){var ns=function(rs,as){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(os,is){os.__proto__=is}||function(os,is){for(var us in is)Object.prototype.hasOwnProperty.call(is,us)&&(os[us]=is[us])},ns(rs,as)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__assign$b=function(){return __assign$b=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$b.apply(this,arguments)},max$1=Math.max,transform$8=transform$i,DEFAULT_MODE="default",KEYSHAPE_MODE="keyShape",DELEGATE_MODE="delegate",SVG="svg",MiniMap=function(ns){__extends$a(ts,ns);function ts(rs){var as=ns.call(this,rs)||this;return as.handleUpdateCanvas=debounce$1(function(os){var is=as;is.destroyed||is.updateCanvas()},100,!1),as}return ts.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},ts.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},ts.prototype.disableRefresh=function(){this.set("refresh",!1)},ts.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},ts.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},ts.prototype.initViewport=function(){var rs=this,as=this._cfgs,os=as.size,is=as.graph;if(!this.destroyed){var us=this.get("canvas"),ls=us.get("container"),fs=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,hs=navigator.userAgent.toLowerCase().indexOf("safari")>-1,vs=createDom(`
      <div
        class=`.concat(as.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(hs||fs),`
      </div>`)),gs=0,ys=0,xs=!1,ms=0,Ss=0,Ms=0,$s=0,bs=0,Cs=0,As=hs||fs?"mousedown":"dragstart";vs.addEventListener(As,function(Ds){var Fs,Rs;if(Ds.dataTransfer){var js=new Image;js.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(Rs=(Fs=Ds.dataTransfer).setDragImage)===null||Rs===void 0||Rs.call(Fs,js,0,0);try{Ds.dataTransfer.setData("text/html","view-port-minimap")}catch{Ds.dataTransfer.setData("text","view-port-minimap")}}if(as.refresh=!1,Ds.target===vs){var zs=vs.style;ms=parseInt(zs.left,10),Ss=parseInt(zs.top,10),Ms=parseInt(zs.width,10),$s=parseInt(zs.height,10),!(Ms>os[0]||$s>os[1])&&(Cs=is.getZoom(),bs=rs.get("ratio"),xs=!0,gs=Ds.clientX,ys=Ds.clientY)}},!1);var Is=function(Fs){if(!(!xs||isNil$2(Fs.clientX)||isNil$2(Fs.clientY))){var Rs=gs-Fs.clientX,js=ys-Fs.clientY;(ms-Rs<0||ms-Rs+Ms>=os[0])&&(Rs=0),(Ss-js<0||Ss-js+$s>=os[1])&&(js=0),ms-=Rs,Ss-=js,modifyCSS$1(vs,{left:"".concat(ms,"px"),top:"".concat(Ss,"px")}),is.translate(Rs*Cs/bs,js*Cs/bs),gs=Fs.clientX,ys=Fs.clientY}};!hs&&!fs&&vs.addEventListener("drag",Is,!1);var ks=function(){xs=!1,as.refresh=!0},Ps=hs||fs?"mouseup":"dragend";vs.addEventListener(Ps,ks,!1),ls.addEventListener("mouseleave",ks),ls.addEventListener("mouseup",ks),(hs||fs)&&ls.addEventListener("mousemove",Is,!1),this.set("viewport",vs),ls.appendChild(vs)}},ts.prototype.updateViewport=function(){if(!this.destroyed){var rs=this.get("ratio"),as=this.get("totaldx"),os=this.get("totaldy"),is=this.get("graph"),us=this.get("size"),ls=is.get("canvas").get("el"),fs=is.get("width")||ls.scrollWidth||500,hs=is.get("height")||ls.scrollHeight||500,vs=is.getPointByCanvas(0,0),gs=is.getPointByCanvas(fs,hs),ys=this.get("viewport");ys||this.initViewport();var xs=(gs.x-vs.x)*rs,ms=(gs.y-vs.y)*rs,Ss=vs.x*rs+as,Ms=vs.y*rs+os,$s=Ss+xs,bs=Ms+ms;Ss<0&&(xs+=Ss,Ss=0),$s>us[0]&&(xs=xs-($s-us[0])),Ms<0&&(ms+=Ms,Ms=0),bs>us[1]&&(ms=ms-(bs-us[1])),this.set("ratio",rs);var Cs="".concat(Ss,"px"),As="".concat(Ms,"px");modifyCSS$1(ys,{left:Cs,top:As,width:"".concat(xs,"px"),height:"".concat(ms,"px")})}},ts.prototype.updateGraphShapes=function(){var rs=this._cfgs.graph,as=this.get("canvas"),os=rs.get("group");if(!os.destroyed){as.clear();var is;this.get("hideEdge")?(is=as.addGroup(),os.get("children").forEach(function(ls){ls.get("id").includes("-edge")||is.add(ls.clone())})):(is=os.clone(),is.resetMatrix(),as.add(is));var us=rs.get("renderer");us===SVG&&this.updateVisible(is)}},ts.prototype.updateVisible=function(rs){var as=this;if(!rs.isGroup()&&!rs.get("visible"))rs.hide();else{var os=rs.get("children");if(!os||!os.length)return;os.forEach(function(is){is.get("visible")||is.hide(),as.updateVisible(is)})}},ts.prototype.updateKeyShapes=function(){var rs=this,as=this._cfgs.graph,os=this.get("canvas"),is=os.get("children")[0]||os.addGroup();this.get("hideEdge")||each$1(as.getEdges(),function(fs){rs.updateOneEdgeKeyShape(fs,is)}),each$1(as.getNodes(),function(fs){rs.updateOneNodeKeyShape(fs,is)});var us=as.getCombos();if(us&&us.length){var ls=is.find(function(fs){return fs.get("name")==="comboGroup"})||is.addGroup({name:"comboGroup"});setTimeout(function(){rs.destroyed||(each$1(us,function(fs){rs.updateOneComboKeyShape(fs,ls)}),ls==null||ls.sort(),ls==null||ls.toBack(),rs.updateCanvas())},250)}this.clearDestroyedShapes()},ts.prototype.updateOneComboKeyShape=function(rs,as){if(!this.destroyed){var os=this.get("itemMap")||{},is=os[rs.get("id")],us=rs.getBBox(),ls=rs.get("keyShape").clone(),fs=ls.attr(),hs={x:us.centerX,y:us.centerY};is?hs=Object.assign(fs,hs):(is=ls,as.add(is));var vs=is.get("type");(vs==="rect"||vs==="image")&&(hs.x=us.minX,hs.y=us.minY),is.attr(hs),rs.isVisible()?is.show():is.hide(),is.exist=!0;var gs=rs.getModel().depth;isNaN(gs)||is.set("zIndex",gs),os[rs.get("id")]=is,this.set("itemMap",os)}},ts.prototype.updateOneNodeKeyShape=function(rs,as){var os=this.get("itemMap")||{},is=os[rs.get("id")],us=rs.getBBox(),ls=rs.get("keyShape").clone(),fs=ls.attr(),hs={x:us.centerX,y:us.centerY};is?(hs=Object.assign(fs,hs),is.toFront()):(is=ls,as.add(is));var vs=is.get("type");(vs==="rect"||vs==="image")&&(hs.x=us.minX,hs.y=us.minY),is.attr(hs),rs.isVisible()?is.show():is.hide(),is.exist=!0;var gs=rs.getModel().depth;isNaN(gs)||is.set("zIndex",gs),os[rs.get("id")]=is,this.set("itemMap",os)},ts.prototype.updateDelegateShapes=function(){var rs=this,as=this._cfgs.graph,os=this.get("canvas"),is=os.get("children")[0]||os.addGroup();this.get("hideEdge")||each$1(as.getEdges(),function(fs){rs.updateOneEdgeKeyShape(fs,is)}),each$1(as.getNodes(),function(fs){rs.updateOneNodeDelegateShape(fs,is)});var us=as.getCombos();if(us&&us.length){var ls=is.find(function(fs){return fs.get("name")==="comboGroup"})||is.addGroup({name:"comboGroup"});setTimeout(function(){rs.destroyed||(each$1(us,function(fs){rs.updateOneComboKeyShape(fs,ls)}),ls==null||ls.sort(),ls==null||ls.toBack(),rs.updateCanvas())},250)}this.clearDestroyedShapes()},ts.prototype.clearDestroyedShapes=function(){var rs=this.get("itemMap")||{},as=Object.keys(rs);if(!(!as||as.length===0))for(var os=as.length-1;os>=0;os--){var is=rs[as[os]],us=is.exist;is.exist=!1,us||(is.remove(),delete rs[as[os]])}},ts.prototype.updateOneEdgeKeyShape=function(rs,as){var os=this.get("itemMap")||{},is=os[rs.get("id")];if(is){var us=rs.get("keyShape").attr("path");is.attr("path",us)}else is=rs.get("keyShape").clone(),as.add(is);rs.isVisible()?is.show():is.hide(),is.exist=!0,os[rs.get("id")]=is,this.set("itemMap",os)},ts.prototype.updateOneNodeDelegateShape=function(rs,as){var os=this.get("delegateStyle"),is=this.get("itemMap")||{},us=is[rs.get("id")],ls=rs.getBBox();if(us){var fs={x:ls.minX,y:ls.minY,width:ls.width,height:ls.height};us.attr(fs),us.toFront()}else us=as.addShape("rect",{attrs:__assign$b({x:ls.minX,y:ls.minY,width:ls.width,height:ls.height},os),name:"minimap-node-shape"});rs.isVisible()?us.show():us.hide(),us.exist=!0,is[rs.get("id")]=us,this.set("itemMap",is)},ts.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},ts.prototype.initContainer=function(){var rs=this,as=rs.get("graph"),os=rs.get("size"),is=rs.get("className"),us=rs.get("container"),ls=createDom("<div class='".concat(is,"' style='width: ").concat(os[0],"px; height: ").concat(os[1],"px; overflow: hidden'></div>"));isString$2(us)&&(us=document.getElementById(us)),us?us.appendChild(ls):as.get("container").appendChild(ls),rs.set("container",ls);var fs=createDom('<div class="g6-minimap-container" style="position: relative;"></div>');ls.appendChild(fs),fs.addEventListener("dragenter",function(gs){gs.preventDefault()}),fs.addEventListener("dragover",function(gs){gs.preventDefault()});var hs,vs=as.get("renderer");vs===SVG?hs=new Canvas({container:fs,width:os[0],height:os[1]}):hs=new Canvas$1({container:fs,width:os[0],height:os[1]}),rs.set("canvas",hs),rs.updateCanvas()},ts.prototype.updateCanvas=function(){if(!this.destroyed){var rs=this.get("refresh");if(rs){var as=this.get("graph");if(!as.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var os=this.get("size"),is=this.get("canvas"),us=this.get("type"),ls=this.get("padding");if(!is.destroyed){switch(us){case DEFAULT_MODE:this.updateGraphShapes();break;case KEYSHAPE_MODE:this.updateKeyShapes();break;case DELEGATE_MODE:this.updateDelegateShapes();break}var fs=is.get("children")[0];if(fs){fs.resetMatrix();var hs=fs.getCanvasBBox(),vs=as.get("canvas").getCanvasBBox(),gs=as.getZoom()||1,ys=vs.width/gs,xs=vs.height/gs;Number.isFinite(hs.width)&&(ys=max$1(hs.width,ys),xs=max$1(hs.height,xs)),ys+=2*ls,xs+=2*ls;var ms=Math.min(os[0]/ys,os[1]/xs),Ss=[1,0,0,0,1,0,0,0,1],Ms=0,$s=0;Number.isFinite(hs.minX)&&(Ms=-hs.minX),Number.isFinite(hs.minY)&&($s=-hs.minY);var bs=(os[0]-(ys-2*ls)*ms)/2,Cs=(os[1]-(xs-2*ls)*ms)/2;Ss=transform$8(Ss,[["t",Ms,$s],["s",ms,ms],["t",bs,Cs]]),fs.setMatrix(Ss),this.set("ratio",ms),this.set("totaldx",bs+Ms*ms),this.set("totaldy",Cs+$s*ms),this.set("dx",bs),this.set("dy",Cs),this.updateViewport()}}}}}},ts.prototype.getCanvas=function(){return this.get("canvas")},ts.prototype.getViewport=function(){return this.get("viewport")},ts.prototype.getContainer=function(){return this.get("container")},ts.prototype.destroy=function(){var rs;(rs=this.get("canvas"))===null||rs===void 0||rs.destroy();var as=this.get("container");as!=null&&as.parentNode&&as.parentNode.removeChild(as)},ts}(PluginBase$1);const Minimap=MiniMap;var __extends$9=function(){var ns=function(rs,as){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(os,is){os.__proto__=is}||function(os,is){for(var us in is)Object.prototype.hasOwnProperty.call(is,us)&&(os[us]=is[us])},ns(rs,as)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}();function getEucliDis(ns,ts,rs){var as=ns.x-ts.x,os=ns.y-ts.y;return!rs||Math.abs(as)>rs||Math.abs(os)>rs?Math.sqrt(as*as+os*os):rs}function getDotProduct(ns,ts){return ns.x*ts.x+ns.y*ts.y}function projectPointToEdge(ns,ts){var rs=(ts.source.y-ts.target.y)/(ts.source.x-ts.target.x),as=(rs*rs*ts.source.x+rs*(ns.y-ts.source.y)+ns.x)/(rs*rs+1),os=rs*(as-ts.source.x)+ts.source.y;return{x:as,y:os}}var Bundling=function(ns){__extends$9(ts,ns);function ts(rs){return ns.call(this,rs)||this}return ts.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},ts.prototype.init=function(){var rs=this.get("graph"),as=this.get("onTick"),os=function(){as&&as(),rs.refreshPositions()};this.set("tick",os)},ts.prototype.bundling=function(rs){var as=this;if(as.set("data",rs),!as.isTicking()){var os=rs.edges||[],is=rs.nodes||[],us={},ls=!1;if(is.forEach(function(As){(As.x===null||!As.y===null||As.x===void 0||!As.y===void 0)&&(ls=!0),us[As.id]=As}),ls)throw new Error("please layout the graph or assign x and y for nodes first");as.set("nodeIdMap",us);var fs=as.get("divisions"),hs=as.get("divRate"),vs=as.divideEdges(fs);as.set("edgePoints",vs);var gs=as.getEdgeBundles();as.set("edgeBundles",gs);for(var ys=as.get("cycles"),xs=as.get("iterations"),ms=as.get("iterRate"),Ss=as.get("lambda"),Ms=0;Ms<ys;Ms++){for(var $s=function(Is){var ks=[];os.forEach(function(Ps,Ds){if(Ps.source!==Ps.target){var Fs=us[Ps.source],Rs=us[Ps.target];ks[Ds]=as.getEdgeForces({source:Fs,target:Rs},Ds,fs,Ss);for(var js=0;js<fs+1;js++)vs[Ds][js].x+=ks[Ds][js].x,vs[Ds][js].y+=ks[Ds][js].y}})},bs=0;bs<xs;bs++)$s(bs);Ss=Ss/2,fs*=hs,xs*=ms,vs=as.divideEdges(fs),as.set("edgePoints",vs)}os.forEach(function(As,Is){As.source!==As.target&&(As.type="polyline",As.controlPoints=vs[Is].slice(1,vs[Is].length-1))});var Cs=as.get("graph");Cs.refresh()}},ts.prototype.updateBundling=function(rs){var as=this,os=rs.data;if(os&&as.set("data",os),as.get("ticking")&&as.set("ticking",!1),Object.keys(rs).forEach(function(us){as.set(us,rs[us])}),rs.onTick){var is=this.get("graph");as.set("tick",function(){rs.onTick(),is.refresh()})}as.bundling(os)},ts.prototype.divideEdges=function(rs){var as=this,os=as.get("data").edges,is=as.get("nodeIdMap"),us=as.get("edgePoints");return(!us||us===void 0)&&(us=[]),os.forEach(function(ls,fs){var hs;(!us[fs]||us[fs]===void 0)&&(us[fs]=[]);var vs=is[ls.source],gs=is[ls.target];if(rs===1)us[fs].push({x:vs.x,y:vs.y}),us[fs].push({x:.5*(vs.x+gs.x),y:.5*(vs.y+gs.y)}),us[fs].push({x:gs.x,y:gs.y});else{var ys=0;!((hs=us[fs])===null||hs===void 0)&&hs.length?ys=as.getEdgeLength(us[fs]):ys=getEucliDis({x:vs.x,y:vs.y},{x:gs.x,y:gs.y});var xs=ys/(rs+1),ms=xs,Ss=[{x:vs.x,y:vs.y}];us[fs].forEach(function(Ms,$s){if($s!==0){for(var bs=getEucliDis(Ms,us[fs][$s-1]);bs>ms;){var Cs=ms/bs,As={x:us[fs][$s-1].x,y:us[fs][$s-1].y};As.x+=Cs*(Ms.x-us[fs][$s-1].x),As.y+=Cs*(Ms.y-us[fs][$s-1].y),Ss.push(As),bs-=ms,ms=xs}ms-=bs}}),Ss.push({x:gs.x,y:gs.y}),us[fs]=Ss}}),us},ts.prototype.getEdgeLength=function(rs){var as=0;return rs.forEach(function(os,is){is!==0&&(as+=getEucliDis(os,rs[is-1]))}),as},ts.prototype.getEdgeBundles=function(){var rs=this,as=rs.get("data"),os=as.edges||[],is=rs.get("bundleThreshold"),us=rs.get("nodeIdMap"),ls=rs.get("edgeBundles");return ls||(ls=[]),os.forEach(function(fs,hs){(!ls[hs]||ls[hs]===void 0)&&(ls[hs]=[])}),os.forEach(function(fs,hs){var vs=us[fs.source],gs=us[fs.target];os.forEach(function(ys,xs){if(!(xs<=hs)){var ms=us[ys.source],Ss=us[ys.target],Ms=rs.getBundleScore({source:vs,target:gs},{source:ms,target:Ss});Ms>=is&&(ls[hs].push(xs),ls[xs].push(hs))}})}),ls},ts.prototype.getBundleScore=function(rs,as){var os=this;rs.vx=rs.target.x-rs.source.x,rs.vy=rs.target.y-rs.source.y,as.vx=as.target.x-as.source.x,as.vy=as.target.y-as.source.y,rs.length=getEucliDis({x:rs.source.x,y:rs.source.y},{x:rs.target.x,y:rs.target.y}),as.length=getEucliDis({x:as.source.x,y:as.source.y},{x:as.target.x,y:as.target.y});var is=os.getAngleScore(rs,as),us=os.getScaleScore(rs,as),ls=os.getPositionScore(rs,as),fs=os.getVisibilityScore(rs,as);return is*us*ls*fs},ts.prototype.getAngleScore=function(rs,as){var os=getDotProduct({x:rs.vx,y:rs.vy},{x:as.vx,y:as.vy});return os/(rs.length*as.length)},ts.prototype.getScaleScore=function(rs,as){var os=(rs.length+as.length)/2,is=2/(os/Math.min(rs.length,as.length)+Math.max(rs.length,as.length)/os);return is},ts.prototype.getPositionScore=function(rs,as){var os=(rs.length+as.length)/2,is={x:(rs.source.x+rs.target.x)/2,y:(rs.source.y+rs.target.y)/2},us={x:(as.source.x+as.target.x)/2,y:(as.source.y+as.target.y)/2},ls=getEucliDis(is,us);return os/(os+ls)},ts.prototype.getVisibilityScore=function(rs,as){var os=this.getEdgeVisibility(rs,as),is=this.getEdgeVisibility(as,rs);return os<is?os:is},ts.prototype.getEdgeVisibility=function(rs,as){var os=projectPointToEdge(as.source,rs),is=projectPointToEdge(as.target,rs),us={x:(os.x+is.x)/2,y:(os.y+is.y)/2},ls={x:(rs.source.x+rs.target.x)/2,y:(rs.source.y+rs.target.y)/2};return Math.max(0,1-2*getEucliDis(us,ls)/getEucliDis(os,is))},ts.prototype.getEdgeForces=function(rs,as,os,is){for(var us=this,ls=us.get("edgePoints"),fs=us.get("K"),hs=fs/(getEucliDis(rs.source,rs.target)*(os+1)),vs=[{x:0,y:0}],gs=1;gs<os;gs++){var ys={x:0,y:0},xs=us.getSpringForce({pre:ls[as][gs-1],cur:ls[as][gs],next:ls[as][gs+1]},hs),ms=us.getElectrostaticForce(gs,as);ys.x=is*(xs.x+ms.x),ys.y=is*(xs.y+ms.y),vs.push(ys)}return vs.push({x:0,y:0}),vs},ts.prototype.getSpringForce=function(rs,as){var os=rs.pre.x+rs.next.x-2*rs.cur.x,is=rs.pre.y+rs.next.y-2*rs.cur.y;return os*=as,is*=as,{x:os,y:is}},ts.prototype.getElectrostaticForce=function(rs,as){var os=this,is=os.get("eps"),us=os.get("edgeBundles"),ls=os.get("edgePoints"),fs=us[as],hs={x:0,y:0};return fs.forEach(function(vs){var gs={x:ls[vs][rs].x-ls[as][rs].x,y:ls[vs][rs].y-ls[as][rs].y};if(Math.abs(gs.x)>is||Math.abs(gs.y)>is){var ys=getEucliDis(ls[vs][rs],ls[as][rs]),xs=1/ys;hs.x+=gs.x*xs,hs.y+=gs.y*xs}}),hs},ts.prototype.isTicking=function(){return this.get("ticking")},ts.prototype.getSimulation=function(){return this.get("forceSimulation")},ts.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),ns.prototype.destroy.call(this)},ts}(PluginBase$1);const Bundling$1=Bundling;var __extends$8=function(){var ns=function(rs,as){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(os,is){os.__proto__=is}||function(os,is){for(var us in is)Object.prototype.hasOwnProperty.call(is,us)&&(os[us]=is[us])},ns(rs,as)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__assign$a=function(){return __assign$a=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$a.apply(this,arguments)},DELTA$3=.05,lensDelegateStyle$1={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Fisheye$1=function(ns){__extends$8(ts,ns);function ts(rs){return ns.call(this,rs)||this}return ts.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:clone$b(lensDelegateStyle$1),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},ts.prototype.getEvents=function(){var rs;switch(this.get("trigger")){case"click":rs={click:"magnify"};break;case"drag":rs={click:"createDelegate"};break;default:rs={mousemove:"magnify"};break}return rs},ts.prototype.init=function(){var rs=this,as=rs.get("r");rs.set("cachedMagnifiedModels",[]),rs.set("cachedOriginPositions",{}),rs.set("r2",as*as);var os=rs.get("d");rs.set("molecularParam",(os+1)*as)},ts.prototype.createDelegate=function(rs){var as=this,os=this,is=os.get("delegate");(!is||is.destroyed)&&(os.magnify(rs),is=os.get("delegate"),is.on("dragstart",function(us){os.set("delegateCenterDiff",{x:is.attr("x")-us.x,y:is.attr("y")-us.y})}),is.on("drag",function(us){os.magnify(us)}),this.get("scaleDBy")==="wheel"&&is.on("mousewheel",function(us){as.scaleDByWheel(us)}),this.get("scaleRBy")==="wheel"&&is.on("mousewheel",function(us){os.scaleRByWheel(us)}))},ts.prototype.scaleRByWheel=function(rs){var as=this;if(!(!rs||!rs.originalEvent)){rs.preventDefault&&rs.preventDefault();var os=as.get("graph"),is,us=as.get("delegate"),ls=us?{x:us.attr("x"),y:us.attr("y")}:void 0,fs=ls||os.getPointByClient(rs.clientX,rs.clientY);rs.originalEvent.wheelDelta<0?is=1-DELTA$3:is=1/(1-DELTA$3);var hs=as.get("maxR"),vs=as.get("minR"),gs=as.get("r");(gs>(hs||os.get("height"))&&is>1||gs<(vs||os.get("height")*.05)&&is<1)&&(is=1),gs*=is,as.set("r",gs),as.set("r2",gs*gs);var ys=as.get("d");as.set("molecularParam",(ys+1)*gs),as.set("delegateCenterDiff",void 0),as.magnify(rs,fs)}},ts.prototype.scaleRByDrag=function(rs){var as=this;if(rs){var os=as.get("dragPrePos"),is=as.get("graph"),us,ls=is.getPointByClient(rs.clientX,rs.clientY);rs.x-os.x<0?us=1-DELTA$3:us=1/(1-DELTA$3);var fs=as.get("maxR"),hs=as.get("minR"),vs=as.get("r");(vs>(fs||is.get("height"))&&us>1||vs<(hs||is.get("height")*.05)&&us<1)&&(us=1),vs*=us,as.set("r",vs),as.set("r2",vs*vs);var gs=as.get("d");as.set("molecularParam",(gs+1)*vs),as.magnify(rs,ls),as.set("dragPrePos",{x:rs.x,y:rs.y})}},ts.prototype.scaleDByWheel=function(rs){var as=this;if(!(!rs&&!rs.originalEvent)){rs.preventDefault&&rs.preventDefault();var os=0;rs.originalEvent.wheelDelta<0?os=-.1:os=.1;var is=as.get("d"),us=is+os,ls=as.get("maxD"),fs=as.get("minD");if(us<ls&&us>fs){as.set("d",us);var hs=as.get("r");as.set("molecularParam",(us+1)*hs);var vs=as.get("delegate"),gs=vs?{x:vs.attr("x"),y:vs.attr("y")}:void 0;as.set("delegateCenterDiff",void 0),as.magnify(rs,gs)}}},ts.prototype.scaleDByDrag=function(rs){var as=this,os=as.get("dragPrePos"),is=rs.x-os.x>0?.1:-.1,us=as.get("d"),ls=us+is,fs=as.get("maxD"),hs=as.get("minD");if(ls<fs&&ls>hs){as.set("d",ls);var vs=as.get("r");as.set("molecularParam",(ls+1)*vs),as.magnify(rs)}as.set("dragPrePos",{x:rs.x,y:rs.y})},ts.prototype.magnify=function(rs,as){var os=this;os.restoreCache();var is=os.get("graph"),us=os.get("cachedMagnifiedModels"),ls=os.get("cachedOriginPositions"),fs=os.get("showLabel"),hs=os.get("r"),vs=os.get("r2"),gs=os.get("d"),ys=os.get("molecularParam"),xs=is.getNodes(),ms=xs.length,Ss=as?{x:as.x,y:as.y}:{x:rs.x,y:rs.y};os.get("dragging")&&(os.get("trigger")==="mousemove"||os.get("trigger")==="click")&&(Ss=os.get("cacheCenter"));var Ms=os.get("delegateCenterDiff");Ms&&(Ss.x+=Ms.x,Ss.y+=Ms.y),os.updateDelegate(Ss,hs);for(var $s=0;$s<ms;$s++){var bs=xs[$s].getModel(),Cs=bs.x,As=bs.y;if(!(isNaN(Cs)||isNaN(As))){var Is=(Cs-Ss.x)*(Cs-Ss.x)+(As-Ss.y)*(As-Ss.y);if(!isNaN(Is)&&Is<vs&&Is!==0){var ks=Math.sqrt(Is),Ps=ys*ks/(gs*ks+hs),Ds=(Cs-Ss.x)/ks,Fs=(As-Ss.y)/ks;if(bs.x=Ds*Ps+Ss.x,bs.y=Fs*Ps+Ss.y,ls[bs.id]||(ls[bs.id]={x:Cs,y:As,texts:[]}),us.push(bs),fs&&2*ks<hs)for(var Rs=xs[$s],js=Rs.getContainer(),zs=js.getChildren(),Us=zs.length,Ys=0;Ys<Us;Ys++){var Ks=zs[Ys];Ks.get("type")==="text"&&(ls[bs.id].texts.push({visible:Ks.get("visible"),shape:Ks}),Ks.set("visible",!0))}}}}is.refreshPositions()},ts.prototype.restoreCache=function(){for(var rs=this,as=rs.get("cachedMagnifiedModels"),os=rs.get("cachedOriginPositions"),is=as.length,us=0;us<is;us++){var ls=as[us],fs=ls.id,hs=os[fs];ls.x=hs.x,ls.y=hs.y;for(var vs=hs.texts.length,gs=0;gs<vs;gs++){var ys=hs.texts[gs];ys.shape.set("visible",ys.visible)}}rs.set("cachedMagnifiedModels",[]),rs.set("cachedOriginPositions",{})},ts.prototype.updateParams=function(rs){var as=this,os=rs.r,is=rs.d,us=rs.trigger,ls=rs.minD,fs=rs.maxD,hs=rs.minR,vs=rs.maxR,gs=rs.scaleDBy,ys=rs.scaleRBy;isNaN(rs.r)||(as.set("r",os),as.set("r2",os*os)),isNaN(is)||as.set("d",is),isNaN(fs)||as.set("maxD",fs),isNaN(ls)||as.set("minD",ls),isNaN(vs)||as.set("maxR",vs),isNaN(hs)||as.set("minR",hs);var xs=as.get("d"),ms=as.get("r");if(as.set("molecularParam",(xs+1)*ms),(us==="mousemove"||us==="click"||us==="drag")&&as.set("trigger",us),gs==="drag"||gs==="wheel"||gs==="unset"){as.set("scaleDBy",gs),as.get("delegate").remove(),as.get("delegate").destroy();var Ss=as.get("dPercentText");Ss&&(Ss.remove(),Ss.destroy())}if(ys==="drag"||ys==="wheel"||ys==="unset"){as.set("scaleRBy",ys),as.get("delegate").remove(),as.get("delegate").destroy();var Ss=as.get("dPercentText");Ss&&(Ss.remove(),Ss.destroy())}},ts.prototype.updateDelegate=function(rs,as){var os=this,is=this,us=is.get("graph"),ls=is.get("delegate");if(!ls||ls.destroyed){var fs=us.get("group"),hs=is.get("delegateStyle")||lensDelegateStyle$1;ls=fs.addShape("circle",{attrs:__assign$a({r:as/1.5,x:rs.x,y:rs.y},hs),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?ls.on("mousewheel",function(ms){is.scaleRByWheel(ms)}):this.get("scaleRBy")==="drag"&&(ls.on("dragstart",function(ms){is.set("dragging",!0),is.set("cacheCenter",{x:ms.x,y:ms.y}),is.set("dragPrePos",{x:ms.x,y:ms.y})}),ls.on("drag",function(ms){is.scaleRByDrag(ms)}),ls.on("dragend",function(ms){is.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?ls.on("mousewheel",function(ms){os.scaleDByWheel(ms)}):this.get("scaleDBy")==="drag"&&(ls.on("dragstart",function(ms){is.set("dragging",!0),is.set("cacheCenter",{x:ms.x,y:ms.y}),is.set("dragPrePos",{x:ms.x,y:ms.y})}),ls.on("drag",function(ms){os.scaleDByDrag(ms)}),ls.on("dragend",function(ms){is.set("dragging",!1)})))}else ls.attr({x:rs.x,y:rs.y,r:as/1.5});if(is.get("showDPercent")){var vs=Math.round((is.get("d")-is.get("minD"))/(is.get("maxD")-is.get("minD"))*100),gs=is.get("dPercentText"),ys=rs.y+as/1.5+16;if(!gs||gs.destroyed){var xs=us.get("group");gs=xs.addShape("text",{attrs:{text:"".concat(vs,"%"),x:rs.x,y:ys,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),is.set("dPercentText",gs)}else gs.attr({text:"".concat(vs,"%"),x:rs.x,y:ys})}is.set("delegate",ls)},ts.prototype.clear=function(){var rs=this.get("graph");this.restoreCache(),rs.refreshPositions();var as=this.get("delegate");as&&!as.destroyed&&(as.remove(),as.destroy());var os=this.get("dPercentText");os&&!os.destroyed&&(os.remove(),os.destroy())},ts.prototype.destroy=function(){this.clear()},ts}(PluginBase$1);const Fisheye$2=Fisheye$1;var __extends$7=function(){var ns=function(rs,as){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(os,is){os.__proto__=is}||function(os,is){for(var us in is)Object.prototype.hasOwnProperty.call(is,us)&&(os[us]=is[us])},ns(rs,as)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),DELTA$2=.05;typeof document<"u"&&insertCss$1(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var getEventPath=function(ts){if(!ts)return[];if(ts.composedPath)return ts.composedPath();for(var rs=[],as=ts.target;as;){if(rs.push(as),as.tagName==="HTML")return rs.push(document,window),rs;as=as.parentElement}return rs},ToolBar=function(ns){__extends$7(ts,ns);function ts(rs){return ns.call(this,rs)||this}return ts.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(as){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},ts.prototype.init=function(){var rs=this,as=this.get("graph"),os=this.get("getContent"),is=os(as),us=is;isString$2(is)&&(us=createDom(is));var ls=this.get("className");us.setAttribute("class",ls||"g6-component-toolbar");var fs=this.get("container");fs||(fs=this.get("graph").get("container")),isString$2(fs)&&(fs=document.getElementById(fs)),fs.appendChild(us),this.set("toolBar",us);var hs=this.get("handleClick");us.addEventListener("click",function(gs){var ys=getEventPath(gs).filter(function(ms){return ms.nodeName==="LI"});if(ys.length!==0){var xs=ys[0].getAttribute("code");xs&&(hs?hs(xs,as):rs.handleDefaultOperator(xs))}});var vs=this.get("position");vs&&modifyCSS$1(us,{top:"".concat(vs.y,"px"),left:"".concat(vs.x,"px")}),this.bindUndoRedo()},ts.prototype.bindUndoRedo=function(){var rs=this.get("graph"),as=document.querySelector('.g6-component-toolbar li[code="undo"]'),os=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),is=document.querySelector('.g6-component-toolbar li[code="redo"]'),us=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!as||!os||!is||!us||(as.setAttribute("style","cursor: not-allowed"),os.setAttribute("style","opacity: 0.4"),is.setAttribute("style","cursor: not-allowed"),us.setAttribute("style","opacity: 0.4"),rs.on("stackchange",function(ls){var fs=ls.undoStack,hs=ls.redoStack,vs=fs.length,gs=hs.length;vs===0?(as.setAttribute("style","cursor: not-allowed"),os.setAttribute("style","opacity: 0.4")):(as.removeAttribute("style"),os.removeAttribute("style")),gs===0?(is.setAttribute("style","cursor: not-allowed"),us.setAttribute("style","opacity: 0.4")):(is.removeAttribute("style"),us.removeAttribute("style"))}))},ts.prototype.undo=function(){var rs=this.get("graph"),as=rs.getUndoStack();if(!(!as||as.length===0)){var os=as.pop();if(os){var is=os.action;rs.pushStack(is,clone$b(os.data),"redo");var us=os.data.before;if(is==="add"&&(us=os.data.after),!us)return;switch(is){case"visible":{Object.keys(us).forEach(function(gs){var ys=us[gs];ys&&ys.forEach(function(xs){var ms=rs.findById(xs.id);xs.visible?rs.showItem(ms,!1):rs.hideItem(ms,!1)})});break}case"render":case"update":Object.keys(us).forEach(function(gs){var ys=us[gs];ys&&ys.forEach(function(xs){var ms=rs.findById(xs.id);delete xs.id,rs.updateItem(ms,xs,!1),ms.getType()==="combo"&&rs.updateCombo(ms)})});break;case"changedata":rs.changeData(us,!1);break;case"delete":{Object.keys(us).forEach(function(gs){var ys=us[gs];ys&&ys.forEach(function(xs){var ms=xs.itemType;delete xs.itemType,rs.addItem(ms,xs,!1)})});break}case"add":Object.keys(us).forEach(function(gs){var ys=us[gs];ys&&ys.forEach(function(xs){rs.removeItem(xs.id,!1)})});break;case"updateComboTree":Object.keys(us).forEach(function(gs){var ys=us[gs];ys&&ys.forEach(function(xs){rs.updateComboTree(xs.id,xs.parentId,!1)})});break;case"createCombo":var ls=os.data.after.combos,fs=ls[ls.length-1];Object.keys(us).forEach(function(gs){var ys=us[gs];ys&&ys.forEach(function(xs){rs.updateComboTree(xs.id,xs.parentId,!1)})}),rs.removeItem(fs.id,!1);break;case"uncombo":var hs=us.combos[us.combos.length-1],vs=us.nodes.concat(us.combos).map(function(gs){return gs.id}).filter(function(gs){return gs!==hs.id});rs.createCombo(hs,vs,!1);break;case"layout":rs.updateLayout(us,void 0,void 0,!1);break}}}},ts.prototype.redo=function(){var rs=this.get("graph"),as=rs.getRedoStack();if(!(!as||as.length===0)){var os=as.pop();if(os){var is=os.action,us=os.data.after;if(rs.pushStack(is,clone$b(os.data)),is==="delete"&&(us=os.data.before),!us)return;switch(is){case"visible":{Object.keys(us).forEach(function(vs){var gs=us[vs];gs&&gs.forEach(function(ys){var xs=rs.findById(ys.id);ys.visible?rs.showItem(xs,!1):rs.hideItem(xs,!1)})});break}case"render":case"update":Object.keys(us).forEach(function(vs){var gs=us[vs];gs&&gs.forEach(function(ys){var xs=rs.findById(ys.id);delete ys.id,rs.updateItem(xs,ys,!1),xs.getType()==="combo"&&rs.updateCombo(xs)})});break;case"changedata":rs.changeData(us,!1);break;case"delete":us.edges&&us.edges.forEach(function(vs){rs.removeItem(vs.id,!1)}),us.nodes&&us.nodes.forEach(function(vs){rs.removeItem(vs.id,!1)}),us.combos&&us.combos.forEach(function(vs){rs.removeItem(vs.id,!1)});break;case"add":{Object.keys(us).forEach(function(vs){var gs=us[vs];gs&&gs.forEach(function(ys){var xs=ys.itemType;delete ys.itemType,rs.addItem(xs,ys,!1)})});break}case"updateComboTree":Object.keys(us).forEach(function(vs){var gs=us[vs];gs&&gs.forEach(function(ys){rs.updateComboTree(ys.id,ys.parentId,!1)})});break;case"createCombo":var ls=us.combos[us.combos.length-1];rs.createCombo(ls,ls.children.map(function(vs){return vs.id}),!1);break;case"uncombo":var fs=os.data.before.combos,hs=fs[fs.length-1];rs.uncombo(hs.id,!1);break;case"layout":rs.updateLayout(us,void 0,void 0,!1);break}}}},ts.prototype.zoomOut=function(){var rs=this.get("graph"),as=rs.getZoom(),os=1/(1-DELTA$2*this.get("zoomSensitivity")),is=this.get("maxZoom")||rs.get("maxZoom");os*as>is||rs.zoomTo(as*os)},ts.prototype.zoomIn=function(){var rs=this.get("graph"),as=rs.getZoom(),os=1-DELTA$2*this.get("zoomSensitivity"),is=this.get("minZoom")||rs.get("minZoom");os*as<is||rs.zoomTo(as*os)},ts.prototype.realZoom=function(){var rs=this.get("graph");rs.zoomTo(1)},ts.prototype.autoZoom=function(){var rs=this.get("graph");rs.fitView([20,20])},ts.prototype.handleDefaultOperator=function(rs){switch(rs){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break}},ts.prototype.destroy=function(){var rs=this.get("toolBar");if(rs){var as=this.get("container");as||(as=this.get("graph").get("container")),isString$2(as)&&(as=document.getElementById(as)),as.removeChild(rs)}var os=this.get("handleClick");os&&rs.removeEventListener("click",os)},ts}(PluginBase$1);const ToolBar$1=ToolBar;var __extends$6=function(){var ns=function(rs,as){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(os,is){os.__proto__=is}||function(os,is){for(var us in is)Object.prototype.hasOwnProperty.call(is,us)&&(os[us]=is[us])},ns(rs,as)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}();typeof document<"u"&&insertCss$1(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var Tooltip$1=function(ns){__extends$6(ts,ns);function ts(rs){return ns.call(this,rs)||this}return ts.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(as){return`
          <h4 class='tooltip-type'>类型：`.concat(as.item.getType(),`</h4>
          <span class='tooltip-id'>ID：`).concat(as.item.getID(),`</span>
        `)},shouldBegin:function(as){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},ts.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},ts.prototype.init=function(){var rs=this,as=rs.get("className")||"g6-component-tooltip",os=createDom("<div class='".concat(as,"'></div>")),is=rs.get("container");is||(is=rs.get("graph").get("container")),isString$2(is)&&(is=document.getElementById(is)),modifyCSS$1(os,{position:"absolute",visibility:"hidden",display:"none"}),is.appendChild(os),rs.get("trigger")!=="click"&&(os.addEventListener("mouseenter",function(us){modifyCSS$1(os,{visibility:"visible",display:"unset"})}),os.addEventListener("mouseleave",function(us){rs.hideTooltip()})),rs.set("tooltip",os)},ts.prototype.onClick=function(rs){var as=this.get("itemTypes");if(!(rs.item&&rs.item.getType&&as.indexOf(rs.item.getType())===-1)){var os=rs.item,is=this.get("graph");this.currentTarget===os?(this.currentTarget=null,this.hideTooltip(),is.emit("tooltipchange",{item:rs.item,action:"hide"})):(this.currentTarget=os,this.showTooltip(rs),is.emit("tooltipchange",{item:rs.item,action:"show"}))}},ts.prototype.onMouseEnter=function(rs){var as=this.get("itemTypes");if(!(rs.item&&rs.item.getType&&as.indexOf(rs.item.getType())===-1)){var os=rs.item,is=this.get("graph");this.currentTarget=os,this.showTooltip(rs),is.emit("tooltipchange",{item:rs.item,action:"show"})}},ts.prototype.onMouseMove=function(rs){var as=this.get("itemTypes");rs.item&&rs.item.getType&&as.indexOf(rs.item.getType())===-1||!this.currentTarget||rs.item!==this.currentTarget||this.showTooltip(rs)},ts.prototype.onMouseLeave=function(){this.hideTooltip();var rs=this.get("graph");rs.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},ts.prototype.clearContainer=function(){var rs=this.get("tooltip");rs&&(rs.innerHTML="")},ts.prototype.showTooltip=function(rs){if(rs.item){var as=this.get("itemTypes");if(!(rs.item.getType&&as.indexOf(rs.item.getType())===-1)){var os=this.get("tooltip"),is=this.get("getContent"),us=is(rs);isString$2(us)?os.innerHTML=us:(this.clearContainer(),os.appendChild(us)),this.updatePosition(rs)}}},ts.prototype.hideTooltip=function(){var rs=this.get("tooltip");rs&&modifyCSS$1(rs,{visibility:"hidden",display:"none"})},ts.prototype.updatePosition=function(rs){var as=this.get("shouldBegin"),os=this.get("tooltip");if(!as(rs)){modifyCSS$1(os,{visibility:"hidden",display:"none"});return}var is=this.get("graph"),us=is.get("width"),ls=is.get("height"),fs=this.get("offsetX")||0,hs=this.get("offsetY")||0,vs=is.getPointByClient(rs.clientX,rs.clientY),gs=this.get("fixToNode"),ys=rs.item;if(ys.getType&&ys.getType()==="node"&&gs&&isArray$2(gs)&&gs.length>=2){var xs=ys.getBBox();vs={x:xs.minX+xs.width*gs[0],y:xs.minY+xs.height*gs[1]}}var ms=is.getCanvasByPoint(vs.x,vs.y),Ss=ms.x,Ms=ms.y,$s=is.getContainer(),bs={x:Ss+$s.offsetLeft+fs,y:Ms+$s.offsetTop+hs};modifyCSS$1(os,{visibility:"visible",display:"unset"});var Cs=os.getBoundingClientRect();Ss+Cs.width+fs>us&&(bs.x-=Cs.width+fs),Ms+Cs.height+hs>ls&&(bs.y-=Cs.height+hs,bs.y<0&&(bs.y=0)),modifyCSS$1(os,{left:"".concat(bs.x,"px"),top:"".concat(bs.y,"px")})},ts.prototype.hide=function(){this.onMouseLeave()},ts.prototype.destroy=function(){var rs=this.get("tooltip");if(rs){var as=this.get("container");as||(as=this.get("graph").get("container")),isString$2(as)&&(as=document.getElementById(as)),as.removeChild(rs)}},ts}(PluginBase$1);const Tooltip$2=Tooltip$1;var TIMELINE_START="timebarstartplay",TIMELINE_END="timebarendplay",VALUE_CHANGE="valuechange",TIMEBAR_CONFIG_CHANGE="timebarConfigChanged",PLAY_PAUSE_BTN="playPauseBtn",NEXT_STEP_BTN="nextStepBtn",PRE_STEP_BTN="preStepBtn",TimeBarTooltip=function(){function ns(ts){var rs=ts.x,as=rs===void 0?0:rs,os=ts.y,is=os===void 0?0:os,us=ts.container,ls=ts.text,fs=ts.padding,hs=fs===void 0?[4,4,4,4]:fs,vs=ts.className,gs=vs===void 0?"g6-component-timebar-tooltip":vs,ys=ts.backgroundColor,xs=ys===void 0?"#000":ys,ms=ts.textColor,Ss=ms===void 0?"#fff":ms,Ms=ts.opacity,$s=Ms===void 0?.8:Ms,bs=ts.fontSize,Cs=bs===void 0?12:bs;this.container=us,this.className=gs,this.backgroundColor=xs,this.textColor=Ss,this.x=as,this.y=is,this.text=ls,this.padding=hs,this.opacity=$s,this.fontSize=Cs,this.render()}return ns.prototype.render=function(){var ts=this,rs=ts.className;ts.x,ts.y;var as=ts.backgroundColor,os=ts.textColor,is=ts.text,us=ts.padding,ls=ts.opacity,fs=ts.fontSize,hs=ts.container,vs=createDom("<div class='".concat(rs,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(ls,'"></div>'));isString$2(hs)&&(hs=document.getElementById(hs)),hs.appendChild(vs),ts.parentHeight=hs.offsetHeight,ts.parentWidth=hs.offsetWidth,modifyCSS$1(vs,{visibility:"hidden",top:0,left:0});var gs=createDom(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(as,"; font-size: ").concat(fs,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(os,"; padding: ").concat(us[0],"px ").concat(us[1],"px ").concat(us[2],"px ").concat(us[3],"px'></div>"));gs.innerHTML=is,vs.appendChild(gs),ts.backgroundDOM=gs;var ys=createDom("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(as,"'></div>"));vs.appendChild(ys),ts.arrowDOM=ys,ts.container=vs},ns.prototype.show=function(ts){var rs=this,as=ts.text,os=ts.x;ts.y,ts.clientX,ts.clientY,rs.backgroundDOM.innerHTML=as;var is=rs.backgroundDOM.offsetWidth,us=rs.backgroundDOM.offsetHeight,ls=rs.arrowDOM.offsetWidth,fs=rs.arrowDOM.offsetHeight;modifyCSS$1(rs.container,{top:"".concat(-us-fs,"px"),left:"".concat(os,"px"),visibility:"visible"}),modifyCSS$1(rs.backgroundDOM,{marginLeft:"".concat(-is/2,"px")}),modifyCSS$1(rs.arrowDOM,{marginLeft:"".concat(-ls/2,"px"),top:"".concat(us,"px")});var hs=os-is/2,vs=os+is/2;hs<0?modifyCSS$1(rs.backgroundDOM,{marginLeft:"".concat(-is/2-hs,"px")}):vs>rs.parentWidth&&modifyCSS$1(rs.backgroundDOM,{marginLeft:"".concat(-is/2-vs+rs.parentWidth+12,"px")})},ns.prototype.hide=function(){modifyCSS$1(this.container,{top:0,left:0,visibility:"hidden"})},ns}();const TimeBarTooltip$1=TimeBarTooltip;var __assign$9=function(){return __assign$9=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$9.apply(this,arguments)},Button=function(){function ns(ts){this.config=deepMix$2({},ts),this.init()}return ns.prototype.update=function(ts){this.config=deepMix$2({},this.config,ts),this.updateElement(),this.renderMarker()},ns.prototype.init=function(){this.initElement(),this.renderMarker()},ns.prototype.initElement=function(){var ts=this.config,rs=ts.group,as=ts.style,os=as.scale,is=os===void 0?1:os,us=as.offsetX,ls=us===void 0?0:us,fs=as.offsetY,hs=fs===void 0?0:fs,vs=this.config.x+ls,gs=this.config.y+hs,ys=rs.addGroup({name:PLAY_PAUSE_BTN});this.startMarkerGroup=ys.addGroup({name:PLAY_PAUSE_BTN}),this.circle=rs.addShape("circle",{attrs:__assign$9({x:vs,y:gs,r:this.config.r*is},as),name:PLAY_PAUSE_BTN}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(vs,gs,is),fill:as.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=ys.addGroup({name:PLAY_PAUSE_BTN});var xs=.25*this.config.r*is,ms=.5*this.config.r*Math.sqrt(3)*is;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:vs-.375*this.config.r*is,y:gs-ms/2,width:xs,height:ms,fill:as.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:vs+1/8*this.config.r*is,y:gs-ms/2,width:xs,height:ms,fill:as.stroke||"#aaa",lineWidth:0}})},ns.prototype.updateElement=function(){var ts=this.config.style,rs=ts.scale,as=rs===void 0?1:rs,os=ts.offsetX,is=os===void 0?0:os,us=ts.offsetY,ls=us===void 0?0:us,fs=this.config.x+is,hs=this.config.y+ls;this.circle.attr("x",fs),this.circle.attr("y",hs),this.circle.attr("r",this.config.r*as),this.startMarker.attr("path",this.getStartMarkerPath(fs,hs,as));var vs=.25*this.config.r*as,gs=.5*this.config.r*Math.sqrt(3)*as;this.pauseLeftMarker.attr("x",fs-(1/4+1/8)*this.config.r*as),this.pauseLeftMarker.attr("y",hs-gs/2),this.pauseLeftMarker.attr("width",vs),this.pauseLeftMarker.attr("height",gs),this.pauseRightMarker.attr("x",fs+1/8*this.config.r*as),this.pauseRightMarker.attr("y",hs-gs/2),this.pauseRightMarker.attr("width",vs),this.pauseRightMarker.attr("height",gs)},ns.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},ns.prototype.getStartMarkerPath=function(ts,rs,as){var os=.5*this.config.r*Math.sqrt(3)*as;return[["M",ts-os/Math.sqrt(3)/2,rs-os/2],["L",ts+os/Math.sqrt(3),rs],["L",ts-os/Math.sqrt(3)/2,rs+os/2]]},ns}();const Button$1=Button;var __assign$8=function(){return __assign$8=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$8.apply(this,arguments)},transform$7=transform$i,DEFAULT_RECT_FILL="#aaa",DEFAULT_RECT_STROKE="green",DEFAULT_PLAYBTN_STYLE={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},DEFAULT_PREBTN_STYLE={fill:"#fff"},DEFAULT_NEXTBTN_STYLE={fill:"green"},DEFAULT_SPEED_CONTROLLER_STYLE={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},DEFAULT_TIMETYPE_CONTROLLER_STYLE={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},DEFAULT_CONTROLLER_CONFIG={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:DEFAULT_SPEED_CONTROLLER_STYLE,timeTypeControllerStyle:DEFAULT_TIMETYPE_CONTROLLER_STYLE},SPEED_CONTROLLER_OFFSET=110,TOGGLE_MODEL_OFFSET=50,TIME_TYPE={SINGLE:"single",RANGE:"range"},ControllerBtn=function(){function ns(ts){this.controllerCfg=deepMix$2({},DEFAULT_CONTROLLER_CONFIG,ts),this.group=ts.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||TIME_TYPE.RANGE,this.fontFamily=ts.fontFamily||"Arial, sans-serif",this.init()}return ns.prototype.init=function(){this.renderPlayButton()},ns.prototype.getNextMarkerPath=function(ts,rs,as){return[["M",ts,rs-as],["L",ts+as,rs],["L",ts,rs+as],["Z",ts,rs-as],["M",ts,rs],["L",ts-as,rs-as],["L",ts-as,rs+as],["Z"]]},ns.prototype.getPreMarkerPath=function(ts,rs,as){return[["M",ts,rs-as],["L",ts-as,rs],["L",ts,rs+as],["L",ts,rs-as],["M",ts,rs],["L",ts+as,rs-as],["L",ts+as,rs+as],["Z"]]},ns.prototype.renderPlayButton=function(){var ts=this.controllerCfg,rs=ts.width,as=ts.height,os=ts.x,is=ts.y,us=ts.hideTimeTypeController,ls=ts.fill,fs=ls===void 0?DEFAULT_RECT_FILL:ls,hs=ts.stroke,vs=hs===void 0?DEFAULT_RECT_STROKE:hs,gs=ts.containerStyle,ys=gs===void 0?{}:gs,xs=__assign$8(__assign$8({},DEFAULT_PLAYBTN_STYLE),ts.playBtnStyle||{}),ms=__assign$8(__assign$8({},DEFAULT_PREBTN_STYLE),ts.preBtnStyle||{}),Ss=__assign$8(__assign$8({},DEFAULT_NEXTBTN_STYLE),ts.nextBtnStyle||{}),Ms=as/2-5,$s=is+10,bs=this.controllerGroup.addShape("rect",{attrs:__assign$8({x:os,y:$s,width:rs,height:as,stroke:vs,fill:fs},ys),name:"container-rect"});this.playButton?this.playButton.update({x:rs/2,y:$s,r:Ms}):this.playButton=new Button$1({group:this.controllerGroup,x:rs/2,y:$s+Ms+5,r:Ms,isPlay:this.isPlay,style:xs});var Cs=ms.offsetX||0,As=ms.offsetY||0,Is=(ms.scale||1)*Ms;this.controllerGroup.addShape("path",{attrs:__assign$8({path:this.getPreMarkerPath(rs/2-5*Ms+Cs,$s+Ms+5+As,Is*.5)},ms),name:PRE_STEP_BTN});var ks=Ss.offsetX||0,Ps=Ss.offsetY||0,Ds=(Ss.scale||1)*Ms;this.controllerGroup.addShape("path",{attrs:__assign$8({path:this.getNextMarkerPath(rs/2+5*Ms+ks,$s+Ms+5+Ps,Ds*.5)},Ss),name:NEXT_STEP_BTN}),bs.toBack(),this.renderSpeedBtn(),us||this.renderToggleTime(),this.bindEvent();var Fs=this.controllerCfg.scale,Rs=Fs===void 0?1:Fs,js=this.controllerGroup.getCanvasBBox(),zs=(js.maxX+js.minX)/2,Us=(js.maxY+js.minY)/2,Ys=transform$7([1,0,0,0,1,0,0,0,1],[["t",-zs,-Us],["s",Rs,Rs],["t",zs,Us]]);this.controllerGroup.setMatrix(Ys)},ns.prototype.renderSpeedBtn=function(){var ts=this.controllerCfg,rs=ts.y,as=ts.width,os=ts.hideTimeTypeController,is=__assign$8(__assign$8({},DEFAULT_SPEED_CONTROLLER_STYLE),this.controllerCfg.speedControllerStyle||{}),us=is.scroller,ls=us===void 0?{}:us,fs=is.text,hs=fs===void 0?{}:fs,vs=is.pointer,gs=vs===void 0?{}:vs,ys=is.scale,xs=ys===void 0?1:ys,ms=is.offsetX,Ss=ms===void 0?0:ms,Ms=is.offsetY,$s=Ms===void 0?0:Ms,bs=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=bs;var Cs=5;this.speedAxisY=[19,22,26,32,39];for(var As=0;As<5;As++){var Is=rs+this.speedAxisY[As],ks=as-(os?TOGGLE_MODEL_OFFSET:SPEED_CONTROLLER_OFFSET);bs.addShape("line",{attrs:__assign$8({x1:ks,x2:ks+15,y1:Is,y2:Is},ls),speed:Cs,name:"speed-rect"}),this.speedAxisY[As]=Is,Cs=Cs-1}this.speedText=bs.addShape("text",{attrs:__assign$8({x:as-(os?TOGGLE_MODEL_OFFSET:SPEED_CONTROLLER_OFFSET)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},hs),name:"speed-text"}),this.speedPoint=bs.addShape("path",{attrs:__assign$8({path:this.getPointerPath(as-(os?TOGGLE_MODEL_OFFSET:SPEED_CONTROLLER_OFFSET),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},gs),name:"speed-pointer"});var Ps=this.speedGroup.getCanvasBBox(),Ds=(Ps.maxX+Ps.minX)/2,Fs=(Ps.maxY+Ps.minY)/2,Rs=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Rs=transform$7(Rs,[["t",-Ds,-Fs],["s",xs,xs],["t",Ds+Ss*xs,Fs+$s*xs]]),this.speedGroup.setMatrix(Rs)},ns.prototype.getPointerPath=function(ts,rs){return[["M",ts,rs],["L",ts-10,rs-4],["L",ts-10,rs+4],["Z"]]},ns.prototype.renderToggleTime=function(){var ts,rs,as=this.controllerCfg,os=as.width,is=as.defaultTimeType,us=__assign$8(__assign$8({},DEFAULT_TIMETYPE_CONTROLLER_STYLE),this.controllerCfg.timeTypeControllerStyle||{}),ls=us.scale,fs=ls===void 0?1:ls,hs=us.offsetX,vs=hs===void 0?0:hs,gs=us.offsetY,ys=gs===void 0?0:gs,xs=us.box,ms=xs===void 0?{}:xs,Ss=us.check,Ms=Ss===void 0?{}:Ss,$s=us.text,bs=$s===void 0?{}:$s;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var Cs=is===TIME_TYPE.SINGLE;this.toggleGroup.addShape("rect",{attrs:__assign$8({x:os-TOGGLE_MODEL_OFFSET,y:this.speedAxisY[0]+3.5},ms),isChecked:Cs,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:__assign$8({path:[["M",os-TOGGLE_MODEL_OFFSET+3,this.speedAxisY[1]+6],["L",os-TOGGLE_MODEL_OFFSET+7,this.speedAxisY[1]+10],["L",os-TOGGLE_MODEL_OFFSET+12,this.speedAxisY[1]+4]]},Ms),capture:!1,name:"check-icon"}),Cs||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:__assign$8({text:Cs?((ts=this.controllerCfg)===null||ts===void 0?void 0:ts.timeRangeControllerText)||"时间范围":((rs=this.controllerCfg)===null||rs===void 0?void 0:rs.timePointControllerText)||"单一时间",x:os-TOGGLE_MODEL_OFFSET+15,y:this.speedAxisY[0]+4,fontFamily:typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},bs),name:"checked-text"});var As=this.toggleGroup.getCanvasBBox(),Is=(As.maxX+As.minX)/2,ks=(As.maxY+As.minY)/2,Ps=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Ps=transform$7(Ps,[["t",-Is,-ks],["s",fs,fs],["t",Is+vs*fs,ks+ys*fs]]),this.toggleGroup.setMatrix(Ps)},ns.prototype.bindEvent=function(){var ts=this;this.speedGroup.on("speed-rect:click",function(rs){var as=rs.target.attr("y1"),os=ts.speedPoint.attr("matrix"),is=ts.speedAxisY.indexOf(os[7]||0),us=ts.speedAxisY.indexOf(as),ls=ts.speedAxisY[us]-ts.speedAxisY[is];os=transform$7(os,[["t",0,ls]]),ts.speedPoint.setMatrix(os),ts.currentSpeed=ts.speedAxisY.length-us,ts.speedText.attr("text","".concat(ts.currentSpeed,".0X")),ts.group.emit(TIMEBAR_CONFIG_CHANGE,{speed:ts.currentSpeed,type:ts.currentType})}),this.speedGroup.on("mousewheel",function(rs){rs.preventDefault();var as=ts.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],os=as[7],is=ts.speedAxisY.indexOf(os);if(is===-1){var us=1/0;ts.speedAxisY.forEach(function(fs,hs){var vs=Math.abs(fs-os);us>vs&&(us=vs,is=hs)})}rs.originalEvent.deltaY>0?is=Math.max(0,is-1):is=Math.min(ts.speedAxisY.length-1,is+1);var ls=ts.speedAxisY[is]-os;as=transform$7(as,[["t",0,ls]]),ts.speedPoint.setMatrix(as),ts.currentSpeed=ts.speedAxisY.length-is,ts.speedText.attr("text","".concat(ts.currentSpeed,".0X")),ts.group.emit(TIMEBAR_CONFIG_CHANGE,{speed:ts.currentSpeed,type:ts.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(rs){var as,os,is=rs.target.get("isChecked");is?(ts.checkedIcon.hide(),ts.checkedText.attr("text",((os=ts.controllerCfg)===null||os===void 0?void 0:os.timePointControllerText)||"单一时间"),ts.currentType=TIME_TYPE.RANGE):(ts.checkedIcon.show(),ts.checkedText.attr("text",((as=ts.controllerCfg)===null||as===void 0?void 0:as.timeRangeControllerText)||"时间范围"),ts.currentType=TIME_TYPE.SINGLE),rs.target.set("isChecked",!is),ts.group.emit(TIMEBAR_CONFIG_CHANGE,{type:ts.currentType,speed:ts.currentSpeed})})},ns.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},ns}();const ControllerBtn$1=ControllerBtn;var __assign$7=function(){return __assign$7=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$7.apply(this,arguments)},transform$6=transform$i,DEFAULT_SELECTEDTICK_STYLE={fill:"#5B8FF9"},DEFAULT_UNSELECTEDTICK_STYLE={fill:"#e6e8e9"},TimeBarSlice=function(){function ns(ts){this.frameCount=0,this.fontFamily="Arial, sans-serif";var rs=ts.graph,as=ts.canvas,os=ts.group,is=ts.width,us=ts.height,ls=ts.padding,fs=ts.data,hs=ts.start,vs=ts.end,gs=ts.x,ys=gs===void 0?0:gs,xs=ts.y,ms=xs===void 0?0:xs,Ss=ts.tickLabelFormatter,Ms=ts.selectedTickStyle,$s=Ms===void 0?DEFAULT_SELECTEDTICK_STYLE:Ms,bs=ts.unselectedTickStyle,Cs=bs===void 0?DEFAULT_UNSELECTEDTICK_STYLE:bs,As=ts.tooltipBackgroundColor,Is=ts.tooltipFomatter,ks=ts.tickLabelStyle,Ps=ts.controllerCfg,Ds=Ps===void 0?{speed:1}:Ps;this.graph=rs,this.group=os,this.sliceGroup=os.addGroup({name:"slice-group"}),this.canvas=as,this.width=is,this.height=us,this.padding=ls,this.data=fs,this.start=hs,this.end=vs,this.tickLabelFormatter=Ss,this.tickLabelStyle=ks||{},this.selectedTickStyle=$s,this.unselectedTickStyle=Cs,this.controllerCfg=Ds,this.currentSpeed=Ds.speed||1,this.x=ys,this.y=ms,this.tooltipBackgroundColor=As,this.tooltipFomatter=Is,this.fontFamily=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return ns.prototype.renderSlices=function(){var ts=this,rs=this,as=rs.width,os=rs.height,is=rs.padding,us=rs.data,ls=rs.start,fs=rs.end,hs=rs.tickLabelFormatter,vs=rs.selectedTickStyle,gs=rs.unselectedTickStyle,ys=rs.tickLabelStyle,xs=as-2*is,ms=10,Ss=4,Ms=3*is+Ss+ms,$s=os-Ms-2*is,bs=2,Cs=us.length,As=(xs-bs*(Cs-1))/Cs;this.tickWidth=As;var Is=this.sliceGroup,ks=[],Ps=[],Ds=Math.round(Cs*ls),Fs=Math.round(Cs*fs);this.startTickRectId=Ds,this.endTickRectId=Fs;var Rs=ys.rotate;delete ys.rotate,us.forEach(function(zs,Us){var Ys=Us>=Ds&&Us<=Fs,Ks=Ys?vs:gs,qs=Is.addShape("rect",{attrs:__assign$7({x:is+Us*(As+bs),y:is,width:As,height:$s},Ks),draggable:!0,name:"tick-rect-".concat(Us)}),_l=Is.addShape("rect",{attrs:{x:is+Us*As+bs*(2*Us-1)/2,y:is,width:Us===0||Us===Cs-1?As+bs/2:As+bs,height:$s,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(Us)});_l.toFront();var Js=qs.getBBox(),Vs=(Js.minX+Js.maxX)/2;ks.push({rect:qs,pickRect:_l,value:zs.date,x:Vs,y:Js.minY});var Zs;if(hs?(Zs=hs(zs),!isString$2(Zs)&&Zs&&(Zs=zs.date)):Us%Math.round(Cs/10)===0&&(Zs=zs.date),Zs){Ps.push(Zs);var Sl=Js.maxY+is*2;Is.addShape("line",{attrs:{stroke:"#BFBFBF",x1:Vs,y1:Sl,x2:Vs,y2:Sl+Ss},name:"tick-line"});var Il=Sl+Ss+is,Nl=Is.addShape("text",{attrs:__assign$7({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:Vs,y:Il,textAlign:"center",text:Zs,textBaseline:"top",fontSize:10,fontFamily:ts.fontFamily||"Arial, sans-serif"},ys),capture:!1,name:"tick-label"}),Tl=Nl.getBBox();if(Tl.maxX>as?Nl.attr("textAlign","right"):Tl.minX<0&&Nl.attr("textAlign","left"),isNumber$3(Rs)&&Ps.length!==10){var _c=transform$6([1,0,0,0,1,0,0,0,1],[["t",-Vs,-Il],["r",Rs],["t",Vs-5,Il+2]]);Nl.attr({textAlign:"left",matrix:_c})}Ps.length===1?Nl.attr({textAlign:"left"}):Ps.length===10&&Nl.attr({textAlign:"right"})}}),this.tickRects=ks;var js=this.group;this.currentSpeed=1,this.controllerBtnGroup=new ControllerBtn$1(__assign$7({group:js,x:this.x,y:this.y+os+5,width:as,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},ns.prototype.initEvent=function(){var ts=this,rs=this.sliceGroup;rs.on("click",function(vs){var gs=vs.target;if(!(gs.get("type")!=="rect"||!gs.get("name"))){var ys=parseInt(gs.get("name").split("-")[2],10);if(!isNaN(ys)){var xs=ts.tickRects,ms=ts.unselectedTickStyle;xs.forEach(function(bs){bs.rect.attr(ms)});var Ss=ts.selectedTickStyle;xs[ys].rect.attr(Ss),ts.startTickRectId=ys,ts.endTickRectId=ys;var Ms=xs.length,$s=ys/Ms;ts.graph.emit(VALUE_CHANGE,{value:[$s,$s]})}}}),rs.on("dragstart",function(vs){var gs=ts.tickRects,ys=ts.unselectedTickStyle;gs.forEach(function(bs){bs.rect.attr(ys)});var xs=vs.target,ms=parseInt(xs.get("name").split("-")[2],10),Ss=ts.selectedTickStyle;gs[ms].rect.attr(Ss),ts.startTickRectId=ms;var Ms=gs.length,$s=ms/Ms;ts.graph.emit(VALUE_CHANGE,{value:[$s,$s]}),ts.dragging=!0}),rs.on("dragover",function(vs){if(ts.dragging&&vs.target.get("type")==="rect"){for(var gs=parseInt(vs.target.get("name").split("-")[2],10),ys=ts.startTickRectId,xs=ts.tickRects,ms=ts.selectedTickStyle,Ss=ts.unselectedTickStyle,Ms=0;Ms<xs.length;Ms++){var $s=Ms>=ys&&Ms<=gs?ms:Ss;xs[Ms].rect.attr($s)}var bs=xs.length;ts.endTickRectId=gs;var Cs=ys/bs,As=gs/bs;ts.graph.emit(VALUE_CHANGE,{value:[Cs,As]})}}),rs.on("drop",function(vs){if(ts.dragging&&(ts.dragging=!1,vs.target.get("type")==="rect")){var gs=ts.startTickRectId,ys=parseInt(vs.target.get("name").split("-")[2],10);if(!(ys<gs)){var xs=ts.selectedTickStyle,ms=ts.tickRects;ms[ys].rect.attr(xs),ts.endTickRectId=ys;var Ss=ms.length,Ms=gs/Ss,$s=ys/Ss;ts.graph.emit(VALUE_CHANGE,{value:[Ms,$s]})}}});var as=this,os=as.tooltipBackgroundColor,is=as.tooltipFomatter,us=as.canvas,ls=new TimeBarTooltip$1({container:us.get("container"),backgroundColor:os}),fs=this.tickRects;fs.forEach(function(vs){var gs=vs.pickRect;gs.on("mouseenter",function(ys){var xs=ys.target;if(xs.get("type")==="rect"){var ms=parseInt(xs.get("name").split("-")[2],10),Ss=us.getClientByPoint(fs[ms].x,fs[ms].y);ls.show({x:fs[ms].x,y:fs[ms].y,clientX:Ss.x,clientY:Ss.y,text:is?is(fs[ms].value):fs[ms].value})}}),gs.on("mouseleave",function(ys){ls.hide()})});var hs=this.group;hs.on("".concat(PLAY_PAUSE_BTN,":click"),function(){ts.isPlay=!ts.isPlay,ts.changePlayStatus()}),hs.on("".concat(NEXT_STEP_BTN,":click"),function(){ts.updateStartEnd(1)}),hs.on("".concat(PRE_STEP_BTN,":click"),function(){ts.updateStartEnd(-1)}),hs.on(TIMEBAR_CONFIG_CHANGE,function(vs){vs.type;var gs=vs.speed;ts.currentSpeed=gs})},ns.prototype.changePlayStatus=function(ts){ts===void 0&&(ts=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(TIMELINE_START,null)):this.playHandler&&(typeof window<"u"&&window.cancelAnimationFrame(this.playHandler),ts&&this.graph.emit(TIMELINE_END,null))},ns.prototype.startPlay=function(){var ts=this;return typeof window<"u"?window.requestAnimationFrame(function(){var rs=ts.currentSpeed;ts.frameCount%(60/rs)===0&&(ts.frameCount=0,ts.updateStartEnd(1)),ts.frameCount++,ts.isPlay&&(ts.playHandler=ts.startPlay())}):void 0},ns.prototype.updateStartEnd=function(ts){var rs=this,as=this.tickRects,os=as.length,is=this.unselectedTickStyle,us=this.selectedTickStyle,ls=rs.endTickRectId;if(ts>0?rs.endTickRectId++:(as[rs.endTickRectId].rect.attr(is),rs.endTickRectId--),ls!==rs.startTickRectId)rs.endTickRectId<rs.startTickRectId&&(rs.startTickRectId=rs.endTickRectId);else{for(var fs=rs.startTickRectId;fs<=rs.endTickRectId-1;fs++)as[fs].rect.attr(is);rs.startTickRectId=rs.endTickRectId}if(as[rs.endTickRectId]){as[rs.endTickRectId].rect.attr(us);var hs=rs.startTickRectId/os,vs=rs.endTickRectId/os;this.graph.emit(VALUE_CHANGE,{value:[hs,vs]})}},ns.prototype.destory=function(){var ts=this.sliceGroup;ts.off("click"),ts.off("dragstart"),ts.off("dragover"),ts.off("drop"),this.tickRects.forEach(function(rs){var as=rs.pickRect;as.off("mouseenter"),as.off("mouseleave")}),this.tickRects.length=0,ts.off("".concat(PLAY_PAUSE_BTN,":click")),ts.off("".concat(NEXT_STEP_BTN,":click")),ts.off("".concat(PRE_STEP_BTN,":click")),ts.off(TIMEBAR_CONFIG_CHANGE),this.sliceGroup.destroy()},ns}();const TimeBarSlice$1=TimeBarSlice;var methodCache={};function getTickMethod(ns){return methodCache[ns]}function registerTickMethod(ns,ts){methodCache[ns]=ts}var Scale=function(){function ns(ts){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=ts,this.initCfg(),this.init()}return ns.prototype.translate=function(ts){return ts},ns.prototype.change=function(ts){mix$1(this.__cfg__,ts),this.init()},ns.prototype.clone=function(){return this.constructor(this.__cfg__)},ns.prototype.getTicks=function(){var ts=this;return map$6(this.ticks,function(rs,as){return isObject$1(rs)?rs:{text:ts.getText(rs,as),tickValue:rs,value:ts.scale(rs)}})},ns.prototype.getText=function(ts,rs){var as=this.formatter,os=as?as(ts,rs):ts;return isNil$2(os)||!isFunction$2(os.toString)?"":os.toString()},ns.prototype.getConfig=function(ts){return this.__cfg__[ts]},ns.prototype.init=function(){mix$1(this,this.__cfg__),this.setDomain(),isEmpty$1(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},ns.prototype.initCfg=function(){},ns.prototype.setDomain=function(){},ns.prototype.calculateTicks=function(){var ts=this.tickMethod,rs=[];if(isString$2(ts)){var as=getTickMethod(ts);if(!as)throw new Error("There is no method to to calculate ticks!");rs=as(this)}else isFunction$2(ts)&&(rs=ts(this));return rs},ns.prototype.rangeMin=function(){return this.range[0]},ns.prototype.rangeMax=function(){return this.range[1]},ns.prototype.calcPercent=function(ts,rs,as){return isNumber$3(ts)?(ts-rs)/(as-rs):NaN},ns.prototype.calcValue=function(ts,rs,as){return rs+ts*(as-rs)},ns}(),Category=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="cat",rs.isCategory=!0,rs}return ts.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var rs=0;rs<this.values.length;rs++)this.translateIndexMap.set(this.values[rs],rs)}},ts.prototype.translate=function(rs){this.buildIndexMap();var as=this.translateIndexMap.get(rs);return as===void 0&&(as=isNumber$3(rs)?rs:NaN),as},ts.prototype.scale=function(rs){var as=this.translate(rs),os=this.calcPercent(as,this.min,this.max);return this.calcValue(os,this.rangeMin(),this.rangeMax())},ts.prototype.invert=function(rs){var as=this.max-this.min,os=this.calcPercent(rs,this.rangeMin(),this.rangeMax()),is=Math.round(as*os)+this.min;return is<this.min||is>this.max?NaN:this.values[is]},ts.prototype.getText=function(rs){for(var as=[],os=1;os<arguments.length;os++)as[os-1]=arguments[os];var is=rs;return isNumber$3(rs)&&!this.values.includes(rs)&&(is=this.values[is]),ns.prototype.getText.apply(this,__spreadArrays([is],as))},ts.prototype.initCfg=function(){this.tickMethod="cat"},ts.prototype.setDomain=function(){if(isNil$2(this.getConfig("min"))&&(this.min=0),isNil$2(this.getConfig("max"))){var rs=this.values.length;this.max=rs>1?rs-1:rs}this.translateIndexMap&&(this.translateIndexMap=void 0)},ts}(Scale),token=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,twoDigitsOptional="\\d\\d?",twoDigits="\\d\\d",threeDigits="\\d{3}",fourDigits="\\d{4}",word="[^\\s]+",literal=/\[([^]*?)\]/gm;function shorten(ns,ts){for(var rs=[],as=0,os=ns.length;as<os;as++)rs.push(ns[as].substr(0,ts));return rs}var monthUpdate=function(ns){return function(ts,rs){var as=rs[ns].map(function(is){return is.toLowerCase()}),os=as.indexOf(ts.toLowerCase());return os>-1?os:null}};function assign(ns){for(var ts=[],rs=1;rs<arguments.length;rs++)ts[rs-1]=arguments[rs];for(var as=0,os=ts;as<os.length;as++){var is=os[as];for(var us in is)ns[us]=is[us]}return ns}var dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort=shorten(monthNames,3),dayNamesShort=shorten(dayNames,3),defaultI18n={dayNamesShort,dayNames,monthNamesShort,monthNames,amPm:["am","pm"],DoFn:function(ns){return ns+["th","st","nd","rd"][ns%10>3?0:(ns-ns%10!==10?1:0)*ns%10]}},globalI18n=assign({},defaultI18n),setGlobalDateI18n=function(ns){return globalI18n=assign(globalI18n,ns)},regexEscape=function(ns){return ns.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},pad=function(ns,ts){for(ts===void 0&&(ts=2),ns=String(ns);ns.length<ts;)ns="0"+ns;return ns},formatFlags={D:function(ns){return String(ns.getDate())},DD:function(ns){return pad(ns.getDate())},Do:function(ns,ts){return ts.DoFn(ns.getDate())},d:function(ns){return String(ns.getDay())},dd:function(ns){return pad(ns.getDay())},ddd:function(ns,ts){return ts.dayNamesShort[ns.getDay()]},dddd:function(ns,ts){return ts.dayNames[ns.getDay()]},M:function(ns){return String(ns.getMonth()+1)},MM:function(ns){return pad(ns.getMonth()+1)},MMM:function(ns,ts){return ts.monthNamesShort[ns.getMonth()]},MMMM:function(ns,ts){return ts.monthNames[ns.getMonth()]},YY:function(ns){return pad(String(ns.getFullYear()),4).substr(2)},YYYY:function(ns){return pad(ns.getFullYear(),4)},h:function(ns){return String(ns.getHours()%12||12)},hh:function(ns){return pad(ns.getHours()%12||12)},H:function(ns){return String(ns.getHours())},HH:function(ns){return pad(ns.getHours())},m:function(ns){return String(ns.getMinutes())},mm:function(ns){return pad(ns.getMinutes())},s:function(ns){return String(ns.getSeconds())},ss:function(ns){return pad(ns.getSeconds())},S:function(ns){return String(Math.round(ns.getMilliseconds()/100))},SS:function(ns){return pad(Math.round(ns.getMilliseconds()/10),2)},SSS:function(ns){return pad(ns.getMilliseconds(),3)},a:function(ns,ts){return ns.getHours()<12?ts.amPm[0]:ts.amPm[1]},A:function(ns,ts){return ns.getHours()<12?ts.amPm[0].toUpperCase():ts.amPm[1].toUpperCase()},ZZ:function(ns){var ts=ns.getTimezoneOffset();return(ts>0?"-":"+")+pad(Math.floor(Math.abs(ts)/60)*100+Math.abs(ts)%60,4)},Z:function(ns){var ts=ns.getTimezoneOffset();return(ts>0?"-":"+")+pad(Math.floor(Math.abs(ts)/60),2)+":"+pad(Math.abs(ts)%60,2)}},monthParse=function(ns){return+ns-1},emptyDigits=[null,twoDigitsOptional],emptyWord=[null,word],amPm=["isPm",word,function(ns,ts){var rs=ns.toLowerCase();return rs===ts.amPm[0]?0:rs===ts.amPm[1]?1:null}],timezoneOffset=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(ns){var ts=(ns+"").match(/([+-]|\d\d)/gi);if(ts){var rs=+ts[1]*60+parseInt(ts[2],10);return ts[0]==="+"?rs:-rs}return 0}],parseFlags={D:["day",twoDigitsOptional],DD:["day",twoDigits],Do:["day",twoDigitsOptional+word,function(ns){return parseInt(ns,10)}],M:["month",twoDigitsOptional,monthParse],MM:["month",twoDigits,monthParse],YY:["year",twoDigits,function(ns){var ts=new Date,rs=+(""+ts.getFullYear()).substr(0,2);return+(""+(+ns>68?rs-1:rs)+ns)}],h:["hour",twoDigitsOptional,void 0,"isPm"],hh:["hour",twoDigits,void 0,"isPm"],H:["hour",twoDigitsOptional],HH:["hour",twoDigits],m:["minute",twoDigitsOptional],mm:["minute",twoDigits],s:["second",twoDigitsOptional],ss:["second",twoDigits],YYYY:["year",fourDigits],S:["millisecond","\\d",function(ns){return+ns*100}],SS:["millisecond",twoDigits,function(ns){return+ns*10}],SSS:["millisecond",threeDigits],d:emptyDigits,dd:emptyDigits,ddd:emptyWord,dddd:emptyWord,MMM:["month",word,monthUpdate("monthNamesShort")],MMMM:["month",word,monthUpdate("monthNames")],a:amPm,A:amPm,ZZ:timezoneOffset,Z:timezoneOffset},globalMasks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},setGlobalDateMasks=function(ns){return assign(globalMasks,ns)},format=function(ns,ts,rs){if(ts===void 0&&(ts=globalMasks.default),rs===void 0&&(rs={}),typeof ns=="number"&&(ns=new Date(ns)),Object.prototype.toString.call(ns)!=="[object Date]"||isNaN(ns.getTime()))throw new Error("Invalid Date pass to format");ts=globalMasks[ts]||ts;var as=[];ts=ts.replace(literal,function(is,us){return as.push(us),"@@@"});var os=assign(assign({},globalI18n),rs);return ts=ts.replace(token,function(is){return formatFlags[is](ns,os)}),ts.replace(/@@@/g,function(){return as.shift()})};function parse(ns,ts,rs){if(rs===void 0&&(rs={}),typeof ts!="string")throw new Error("Invalid format in fecha parse");if(ts=globalMasks[ts]||ts,ns.length>1e3)return null;var as=new Date,os={year:as.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},is=[],us=[],ls=ts.replace(literal,function(As,Is){return us.push(regexEscape(Is)),"@@@"}),fs={},hs={};ls=regexEscape(ls).replace(token,function(As){var Is=parseFlags[As],ks=Is[0],Ps=Is[1],Ds=Is[3];if(fs[ks])throw new Error("Invalid format. "+ks+" specified twice in format");return fs[ks]=!0,Ds&&(hs[Ds]=!0),is.push(Is),"("+Ps+")"}),Object.keys(hs).forEach(function(As){if(!fs[As])throw new Error("Invalid format. "+As+" is required in specified format")}),ls=ls.replace(/@@@/g,function(){return us.shift()});var vs=ns.match(new RegExp(ls,"i"));if(!vs)return null;for(var gs=assign(assign({},globalI18n),rs),ys=1;ys<vs.length;ys++){var xs=is[ys-1],ms=xs[0],Ss=xs[2],Ms=Ss?Ss(vs[ys],gs):+vs[ys];if(Ms==null)return null;os[ms]=Ms}os.isPm===1&&os.hour!=null&&+os.hour!=12?os.hour=+os.hour+12:os.isPm===0&&+os.hour==12&&(os.hour=0);var $s;if(os.timezoneOffset==null){$s=new Date(os.year,os.month,os.day,os.hour,os.minute,os.second,os.millisecond);for(var bs=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],ys=0,Cs=bs.length;ys<Cs;ys++)if(fs[bs[ys][0]]&&os[bs[ys][0]]!==$s[bs[ys][1]]())return null}else if($s=new Date(Date.UTC(os.year,os.month,os.day,os.hour,os.minute-os.timezoneOffset,os.second,os.millisecond)),os.month>11||os.month<0||os.day>31||os.day<1||os.hour>23||os.hour<0||os.minute>59||os.minute<0||os.second>59||os.second<0)return null;return $s}var fecha={format,parse,defaultI18n,setGlobalDateI18n,setGlobalDateMasks};const fecha1=Object.freeze(Object.defineProperty({__proto__:null,assign,default:fecha,defaultI18n,format,parse,setGlobalDateI18n,setGlobalDateMasks},Symbol.toStringTag,{value:"Module"}));function bisector(ns){return function(ts,rs,as,os){for(var is=isNil$2(as)?0:as,us=isNil$2(os)?ts.length:os;is<us;){var ls=is+us>>>1;ns(ts[ls])>rs?us=ls:is=ls+1}return is}}var FORMAT_METHOD="format";function timeFormat(ns,ts){var rs=fecha1[FORMAT_METHOD]||fecha[FORMAT_METHOD];return rs(ns,ts)}function toTimeStamp(ns){return isString$2(ns)&&(ns.indexOf("T")>0?ns=new Date(ns).getTime():ns=new Date(ns.replace(/-/gi,"/")).getTime()),isDate$2(ns)&&(ns=ns.getTime()),ns}var SECOND=1e3,MINUTE=60*SECOND,HOUR=60*MINUTE,DAY=24*HOUR,MONTH=DAY*31,YEAR=DAY*365,intervals=[["HH:mm:ss",SECOND],["HH:mm:ss",SECOND*10],["HH:mm:ss",SECOND*30],["HH:mm",MINUTE],["HH:mm",MINUTE*10],["HH:mm",MINUTE*30],["HH",HOUR],["HH",HOUR*6],["HH",HOUR*12],["YYYY-MM-DD",DAY],["YYYY-MM-DD",DAY*4],["YYYY-WW",DAY*7],["YYYY-MM",MONTH],["YYYY-MM",MONTH*4],["YYYY-MM",MONTH*6],["YYYY",DAY*380]];function getTickInterval(ns,ts,rs){var as=(ts-ns)/rs,os=bisector(function(us){return us[1]})(intervals,as)-1,is=intervals[os];return os<0?is=intervals[0]:os>=intervals.length&&(is=last$1(intervals)),is}var TimeCat=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="timeCat",rs}return ts.prototype.translate=function(rs){rs=toTimeStamp(rs);var as=this.values.indexOf(rs);return as===-1&&(isNumber$3(rs)&&rs<this.values.length?as=rs:as=NaN),as},ts.prototype.getText=function(rs,as){var os=this.translate(rs);if(os>-1){var is=this.values[os],us=this.formatter;return is=us?us(is,as):timeFormat(is,this.mask),is}return rs},ts.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},ts.prototype.setDomain=function(){var rs=this.values;each$1(rs,function(as,os){rs[os]=toTimeStamp(as)}),rs.sort(function(as,os){return as-os}),ns.prototype.setDomain.call(this)},ts}(Category),Continuous=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.isContinuous=!0,rs}return ts.prototype.scale=function(rs){if(isNil$2(rs))return NaN;var as=this.rangeMin(),os=this.rangeMax(),is=this.max,us=this.min;if(is===us)return as;var ls=this.getScalePercent(rs);return as+ls*(os-as)},ts.prototype.init=function(){ns.prototype.init.call(this);var rs=this.ticks,as=head$1(rs),os=last$1(rs);as<this.min&&(this.min=as),os>this.max&&(this.max=os),isNil$2(this.minLimit)||(this.min=as),isNil$2(this.maxLimit)||(this.max=os)},ts.prototype.setDomain=function(){var rs=getRange$2(this.values),as=rs.min,os=rs.max;isNil$2(this.min)&&(this.min=as),isNil$2(this.max)&&(this.max=os),this.min>this.max&&(this.min=as,this.max=os)},ts.prototype.calculateTicks=function(){var rs=this,as=ns.prototype.calculateTicks.call(this);return this.nice||(as=filter$2(as,function(os){return os>=rs.min&&os<=rs.max})),as},ts.prototype.getScalePercent=function(rs){var as=this.max,os=this.min;return(rs-os)/(as-os)},ts.prototype.getInvertPercent=function(rs){return(rs-this.rangeMin())/(this.rangeMax()-this.rangeMin())},ts}(Scale),Linear=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="linear",rs.isLinear=!0,rs}return ts.prototype.invert=function(rs){var as=this.getInvertPercent(rs);return this.min+as*(this.max-this.min)},ts.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},ts}(Continuous);const Linear$1=Linear;function calBase(ns,ts){var rs=Math.E,as;return ts>=0?as=Math.pow(rs,Math.log(ts)/ns):as=Math.pow(rs,Math.log(-ts)/ns)*-1,as}function log(ns,ts){return ns===1?1:Math.log(ts)/Math.log(ns)}function getLogPositiveMin(ns,ts,rs){isNil$2(rs)&&(rs=Math.max.apply(null,ns));var as=rs;return each$1(ns,function(os){os>0&&os<as&&(as=os)}),as===rs&&(as=rs/ts),as>1&&(as=1),as}var Log=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="log",rs}return ts.prototype.invert=function(rs){var as=this.base,os=log(as,this.max),is=this.rangeMin(),us=this.rangeMax()-is,ls,fs=this.positiveMin;if(fs){if(rs===0)return 0;ls=log(as,fs/as);var hs=1/(os-ls)*us;if(rs<hs)return rs/hs*fs}else ls=log(as,this.min);var vs=(rs-is)/us,gs=vs*(os-ls)+ls;return Math.pow(as,gs)},ts.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},ts.prototype.setDomain=function(){ns.prototype.setDomain.call(this);var rs=this.min;if(rs<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");rs===0&&(this.positiveMin=getLogPositiveMin(this.values,this.base,this.max))},ts.prototype.getScalePercent=function(rs){var as=this.max,os=this.min;if(as===os||rs<=0)return 0;var is=this.base,us=this.positiveMin;us&&(os=us*1/is);var ls;return rs<us?ls=rs/us/(log(is,as)-log(is,os)):ls=(log(is,rs)-log(is,os))/(log(is,as)-log(is,os)),ls},ts}(Continuous),Pow=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="pow",rs}return ts.prototype.invert=function(rs){var as=this.getInvertPercent(rs),os=this.exponent,is=calBase(os,this.max),us=calBase(os,this.min),ls=as*(is-us)+us,fs=ls>=0?1:-1;return Math.pow(ls,os)*fs},ts.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},ts.prototype.getScalePercent=function(rs){var as=this.max,os=this.min;if(as===os)return 0;var is=this.exponent,us=(calBase(is,rs)-calBase(is,os))/(calBase(is,as)-calBase(is,os));return us},ts}(Continuous),Time=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="time",rs}return ts.prototype.getText=function(rs,as){var os=this.translate(rs),is=this.formatter;return is?is(os,as):timeFormat(os,this.mask)},ts.prototype.scale=function(rs){var as=rs;return(isString$2(as)||isDate$2(as))&&(as=this.translate(as)),ns.prototype.scale.call(this,as)},ts.prototype.translate=function(rs){return toTimeStamp(rs)},ts.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},ts.prototype.setDomain=function(){var rs=this.values,as=this.getConfig("min"),os=this.getConfig("max");if((!isNil$2(as)||!isNumber$3(as))&&(this.min=this.translate(this.min)),(!isNil$2(os)||!isNumber$3(os))&&(this.max=this.translate(this.max)),rs&&rs.length){var is=[],us=1/0,ls=us,fs=0;each$1(rs,function(hs){var vs=toTimeStamp(hs);if(isNaN(vs))throw new TypeError("Invalid Time: "+hs+" in time scale!");us>vs?(ls=us,us=vs):ls>vs&&(ls=vs),fs<vs&&(fs=vs),is.push(vs)}),rs.length>1&&(this.minTickInterval=ls-us),isNil$2(as)&&(this.min=us),isNil$2(os)&&(this.max=fs)}},ts}(Linear$1),Quantize=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="quantize",rs}return ts.prototype.invert=function(rs){var as=this.ticks,os=as.length,is=this.getInvertPercent(rs),us=Math.floor(is*(os-1));if(us>=os-1)return last$1(as);if(us<0)return head$1(as);var ls=as[us],fs=as[us+1],hs=us/(os-1),vs=(us+1)/(os-1);return ls+(is-hs)/(vs-hs)*(fs-ls)},ts.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},ts.prototype.calculateTicks=function(){var rs=ns.prototype.calculateTicks.call(this);return this.nice||(last$1(rs)!==this.max&&rs.push(this.max),head$1(rs)!==this.min&&rs.unshift(this.min)),rs},ts.prototype.getScalePercent=function(rs){var as=this.ticks;if(rs<head$1(as))return 0;if(rs>last$1(as))return 1;var os=0;return each$1(as,function(is,us){if(rs>=is)os=us;else return!1}),os/(as.length-1)},ts}(Continuous),Quantile=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="quantile",rs}return ts.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},ts}(Quantize),map={};function getClass(ns){return map[ns]}function registerClass(ns,ts){if(getClass(ns))throw new Error("type '"+ns+"' existed.");map[ns]=ts}var Identity=function(ns){__extends$x(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.type="identity",rs.isIdentity=!0,rs}return ts.prototype.calculateTicks=function(){return this.values},ts.prototype.scale=function(rs){return this.values[0]!==rs&&isNumber$3(rs)?rs:this.range[0]},ts.prototype.invert=function(rs){var as=this.range;return rs<as[0]||rs>as[1]?NaN:this.values[0]},ts}(Scale);function calculateCatTicks(ns){var ts=ns.values,rs=ns.tickInterval,as=ns.tickCount,os=ns.showLast;if(isNumber$3(rs)){var is=filter$2(ts,function(ms,Ss){return Ss%rs===0}),us=last$1(ts);return os&&last$1(is)!==us&&is.push(us),is}var ls=ts.length,fs=ns.min,hs=ns.max;if(isNil$2(fs)&&(fs=0),isNil$2(hs)&&(hs=ts.length-1),!isNumber$3(as)||as>=ls)return ts.slice(fs,hs+1);if(as<=0||hs<=0)return[];for(var vs=as===1?ls:Math.floor(ls/(as-1)),gs=[],ys=fs,xs=0;xs<as&&!(ys>=hs);xs++)ys=Math.min(fs+xs*vs,hs),xs===as-1&&os?gs.push(ts[hs]):gs.push(ts[ys]);return gs}function d3Linear(ns){var ts=ns.min,rs=ns.max,as=ns.nice,os=ns.tickCount,is=new D3Linear;return is.domain([ts,rs]),as&&is.nice(os),is.ticks(os)}var DEFAULT_COUNT=5,e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2),D3Linear=function(){function ns(){this._domain=[0,1]}return ns.prototype.domain=function(ts){return ts?(this._domain=Array.from(ts,Number),this):this._domain.slice()},ns.prototype.nice=function(ts){var rs,as;ts===void 0&&(ts=DEFAULT_COUNT);var os=this._domain.slice(),is=0,us=this._domain.length-1,ls=this._domain[is],fs=this._domain[us],hs;return fs<ls&&(rs=[fs,ls],ls=rs[0],fs=rs[1],as=[us,is],is=as[0],us=as[1]),hs=tickIncrement(ls,fs,ts),hs>0?(ls=Math.floor(ls/hs)*hs,fs=Math.ceil(fs/hs)*hs,hs=tickIncrement(ls,fs,ts)):hs<0&&(ls=Math.ceil(ls*hs)/hs,fs=Math.floor(fs*hs)/hs,hs=tickIncrement(ls,fs,ts)),hs>0?(os[is]=Math.floor(ls/hs)*hs,os[us]=Math.ceil(fs/hs)*hs,this.domain(os)):hs<0&&(os[is]=Math.ceil(ls*hs)/hs,os[us]=Math.floor(fs*hs)/hs,this.domain(os)),this},ns.prototype.ticks=function(ts){return ts===void 0&&(ts=DEFAULT_COUNT),d3ArrayTicks(this._domain[0],this._domain[this._domain.length-1],ts||DEFAULT_COUNT)},ns}();function d3ArrayTicks(ns,ts,rs){var as,os=-1,is,us,ls;if(ts=+ts,ns=+ns,rs=+rs,ns===ts&&rs>0)return[ns];if((as=ts<ns)&&(is=ns,ns=ts,ts=is),(ls=tickIncrement(ns,ts,rs))===0||!isFinite(ls))return[];if(ls>0)for(ns=Math.ceil(ns/ls),ts=Math.floor(ts/ls),us=new Array(is=Math.ceil(ts-ns+1));++os<is;)us[os]=(ns+os)*ls;else for(ns=Math.floor(ns*ls),ts=Math.ceil(ts*ls),us=new Array(is=Math.ceil(ns-ts+1));++os<is;)us[os]=(ns-os)/ls;return as&&us.reverse(),us}function tickIncrement(ns,ts,rs){var as=(ts-ns)/Math.max(0,rs),os=Math.floor(Math.log(as)/Math.LN10),is=as/Math.pow(10,os);return os>=0?(is>=e10?10:is>=e5?5:is>=e2?2:1)*Math.pow(10,os):-Math.pow(10,-os)/(is>=e10?10:is>=e5?5:is>=e2?2:1)}function snapMultiple(ns,ts,rs){var as;return rs==="ceil"?as=Math.ceil(ns/ts):rs==="floor"?as=Math.floor(ns/ts):as=Math.round(ns/ts),as*ts}function intervalTicks(ns,ts,rs){var as=snapMultiple(ns,rs,"floor"),os=snapMultiple(ts,rs,"ceil");as=fixedBase$2(as,rs),os=fixedBase$2(os,rs);for(var is=[],us=Math.max((os-as)/(Math.pow(2,12)-1),rs),ls=as;ls<=os;ls=ls+us){var fs=fixedBase$2(ls,us);is.push(fs)}return{min:as,max:os,ticks:is}}function strictLimit(ns,ts,rs){var as,os=ns.minLimit,is=ns.maxLimit,us=ns.min,ls=ns.max,fs=ns.tickCount,hs=fs===void 0?5:fs,vs=isNil$2(os)?isNil$2(ts)?us:ts:os,gs=isNil$2(is)?isNil$2(rs)?ls:rs:is;if(vs>gs&&(as=[vs,gs],gs=as[0],vs=as[1]),hs<=2)return[vs,gs];for(var ys=(gs-vs)/(hs-1),xs=[],ms=0;ms<hs;ms++)xs.push(vs+ys*ms);return xs}function d3LinearTickMethod(ns){var ts=ns.min,rs=ns.max,as=ns.tickInterval,os=ns.minLimit,is=ns.maxLimit,us=d3Linear(ns);return!isNil$2(os)||!isNil$2(is)?strictLimit(ns,head$1(us),last$1(us)):as?intervalTicks(ts,rs,as).ticks:us}function prettyNumber(ns){return Math.abs(ns)<1e-15?ns:parseFloat(ns.toFixed(15))}var DEFAULT_Q=[1,5,2,2.5,4,3],eps=Number.EPSILON*100;function mod(ns,ts){return(ns%ts+ts)%ts}function round(ns){return Math.round(ns*1e12)/1e12}function simplicity(ns,ts,rs,as,os,is){var us=size$1(ts),ls=indexOf$3(ts,ns),fs=0,hs=mod(as,is);return(hs<eps||is-hs<eps)&&as<=0&&os>=0&&(fs=1),1-ls/(us-1)-rs+fs}function simplicityMax(ns,ts,rs){var as=size$1(ts),os=indexOf$3(ts,ns),is=1;return 1-os/(as-1)-rs+is}function density(ns,ts,rs,as,os,is){var us=(ns-1)/(is-os),ls=(ts-1)/(Math.max(is,as)-Math.min(rs,os));return 2-Math.max(us/ls,ls/us)}function densityMax(ns,ts){return ns>=ts?2-(ns-1)/(ts-1):1}function coverage(ns,ts,rs,as){var os=ts-ns;return 1-.5*(Math.pow(ts-as,2)+Math.pow(ns-rs,2))/Math.pow(.1*os,2)}function coverageMax(ns,ts,rs){var as=ts-ns;if(rs>as){var os=(rs-as)/2;return 1-Math.pow(os,2)/Math.pow(.1*as,2)}return 1}function legibility(){return 1}function extended(ns,ts,rs,as,os,is){rs===void 0&&(rs=5),as===void 0&&(as=!0),os===void 0&&(os=DEFAULT_Q),is===void 0&&(is=[.25,.2,.5,.05]);var us=rs<0?0:Math.round(rs);if(Number.isNaN(ns)||Number.isNaN(ts)||typeof ns!="number"||typeof ts!="number"||!us)return{min:0,max:0,ticks:[]};if(ts-ns<1e-15||us===1)return{min:ns,max:ts,ticks:[ns]};if(ts-ns>1e148){var ls=rs||5,fs=(ts-ns)/ls;return{min:ns,max:ts,ticks:Array(ls).fill(null).map(function(Sl,Il){return prettyNumber(ns+fs*Il)})}}for(var hs={score:-2,lmin:0,lmax:0,lstep:0},vs=1;vs<1/0;){for(var gs=0;gs<os.length;gs+=1){var ys=os[gs],xs=simplicityMax(ys,os,vs);if(is[0]*xs+is[1]+is[2]+is[3]<hs.score){vs=1/0;break}for(var ms=2;ms<1/0;){var Ss=densityMax(ms,us);if(is[0]*xs+is[1]+is[2]*Ss+is[3]<hs.score)break;for(var Ms=(ts-ns)/(ms+1)/vs/ys,$s=Math.ceil(Math.log10(Ms));$s<1/0;){var bs=vs*ys*Math.pow(10,$s),Cs=coverageMax(ns,ts,bs*(ms-1));if(is[0]*xs+is[1]*Cs+is[2]*Ss+is[3]<hs.score)break;var As=Math.floor(ts/bs)*vs-(ms-1)*vs,Is=Math.ceil(ns/bs)*vs;if(As<=Is)for(var ls=Is-As,ks=0;ks<=ls;ks+=1){var Ps=As+ks,Ds=Ps*(bs/vs),Fs=Ds+bs*(ms-1),Rs=bs,js=simplicity(ys,os,vs,Ds,Fs,Rs),zs=coverage(ns,ts,Ds,Fs),Us=density(ms,us,ns,ts,Ds,Fs),Ys=legibility(),Ks=is[0]*js+is[1]*zs+is[2]*Us+is[3]*Ys;Ks>hs.score&&(!as||Ds<=ns&&Fs>=ts)&&(hs.lmin=Ds,hs.lmax=Fs,hs.lstep=Rs,hs.score=Ks)}$s+=1}ms+=1}}vs+=1}var qs=prettyNumber(hs.lmax),_l=prettyNumber(hs.lmin),Js=prettyNumber(hs.lstep),Vs=Math.floor(round((qs-_l)/Js))+1,Zs=new Array(Vs);Zs[0]=prettyNumber(_l);for(var gs=1;gs<Vs;gs++)Zs[gs]=prettyNumber(Zs[gs-1]+Js);return{min:Math.min(ns,head$1(Zs)),max:Math.max(ts,last$1(Zs)),ticks:Zs}}function linear(ns){var ts=ns.min,rs=ns.max,as=ns.tickCount,os=ns.nice,is=ns.tickInterval,us=ns.minLimit,ls=ns.maxLimit,fs=extended(ts,rs,as,os).ticks;return!isNil$2(us)||!isNil$2(ls)?strictLimit(ns,head$1(fs),last$1(fs)):is?intervalTicks(ts,rs,is).ticks:fs}function calculateLogTicks(ns){var ts=ns.base,rs=ns.tickCount,as=ns.min,os=ns.max,is=ns.values,us,ls=log(ts,os);if(as>0)us=Math.floor(log(ts,as));else{var fs=getLogPositiveMin(is,ts,os);us=Math.floor(log(ts,fs))}for(var hs=ls-us,vs=Math.ceil(hs/rs),gs=[],ys=us;ys<ls+vs;ys=ys+vs)gs.push(Math.pow(ts,ys));return as<=0&&gs.unshift(0),gs}function pretty(ns,ts,rs){if(rs===void 0&&(rs=5),ns===ts)return{max:ts,min:ns,ticks:[ns]};var as=rs<0?0:Math.round(rs);if(as===0)return{max:ts,min:ns,ticks:[]};var os=1.5,is=.5+1.5*os,us=ts-ns,ls=us/as,fs=Math.pow(10,Math.floor(Math.log10(ls))),hs=fs;2*fs-ls<os*(ls-hs)&&(hs=2*fs,5*fs-ls<is*(ls-hs)&&(hs=5*fs,10*fs-ls<os*(ls-hs)&&(hs=10*fs)));for(var vs=Math.ceil(ts/hs),gs=Math.floor(ns/hs),ys=Math.max(vs*hs,ts),xs=Math.min(gs*hs,ns),ms=Math.floor((ys-xs)/hs)+1,Ss=new Array(ms),Ms=0;Ms<ms;Ms++)Ss[Ms]=prettyNumber(xs+Ms*hs);return{min:xs,max:ys,ticks:Ss}}function calculatePowTicks(ns){var ts=ns.exponent,rs=ns.tickCount,as=Math.ceil(calBase(ts,ns.max)),os=Math.floor(calBase(ts,ns.min)),is=pretty(os,as,rs).ticks;return is.map(function(us){var ls=us>=0?1:-1;return Math.pow(us,ts)*ls})}function quantileSorted(ns,ts){var rs=ns.length*ts;return ts===1?ns[ns.length-1]:ts===0?ns[0]:rs%1!==0?ns[Math.ceil(rs)-1]:ns.length%2===0?(ns[rs-1]+ns[rs])/2:ns[rs]}function calculateTicks(ns){var ts=ns.tickCount,rs=ns.values;if(!rs||!rs.length)return[];for(var as=rs.slice().sort(function(ls,fs){return ls-fs}),os=[],is=0;is<ts;is++){var us=is/(ts-1);os.push(quantileSorted(as,us))}return os}function linearPretty(ns){var ts=ns.min,rs=ns.max,as=ns.tickCount,os=ns.tickInterval,is=ns.minLimit,us=ns.maxLimit,ls=pretty(ts,rs,as).ticks;return!isNil$2(is)||!isNil$2(us)?strictLimit(ns,head$1(ls),last$1(ls)):os?intervalTicks(ts,rs,os).ticks:ls}function calculateTimeTicks(ns){var ts=ns.min,rs=ns.max,as=ns.minTickInterval,os=ns.tickInterval,is=ns.tickCount;if(os)is=Math.ceil((rs-ts)/os);else{os=getTickInterval(ts,rs,is)[1];var us=(rs-ts)/os,ls=us/is;ls>1&&(os=os*Math.ceil(ls)),as&&os<as&&(os=as)}os=Math.max(Math.floor((rs-ts)/(Math.pow(2,12)-1)),os);for(var fs=[],hs=ts;hs<rs+os;hs+=os)fs.push(hs);return fs}function timeCat(ns){var ts=calculateCatTicks(__assign$h({showLast:!0},ns));return ts}function getYear(ns){return new Date(ns).getFullYear()}function createYear(ns){return new Date(ns,0,1).getTime()}function getMonth(ns){return new Date(ns).getMonth()}function diffMonth(ns,ts){var rs=getYear(ns),as=getYear(ts),os=getMonth(ns),is=getMonth(ts);return(as-rs)*12+(is-os)%12}function creatMonth(ns,ts){return new Date(ns,ts,1).getTime()}function diffDay(ns,ts){return Math.ceil((ts-ns)/DAY)}function diffHour(ns,ts){return Math.ceil((ts-ns)/HOUR)}function diffMinus(ns,ts){return Math.ceil((ts-ns)/(60*1e3))}function timePretty(ns){var ts=ns.min,rs=ns.max,as=ns.minTickInterval,os=ns.tickCount,is=ns.tickInterval,us=[];is||(is=(rs-ts)/os,as&&is<as&&(is=as)),is=Math.max(Math.floor((rs-ts)/(Math.pow(2,12)-1)),is);var ls=getYear(ts);if(is>YEAR)for(var fs=getYear(rs),hs=Math.ceil(is/YEAR),vs=ls;vs<=fs+hs;vs=vs+hs)us.push(createYear(vs));else if(is>MONTH)for(var gs=Math.ceil(is/MONTH),ys=getMonth(ts),xs=diffMonth(ts,rs),vs=0;vs<=xs+gs;vs=vs+gs)us.push(creatMonth(ls,vs+ys));else if(is>DAY)for(var ms=new Date(ts),Ss=ms.getFullYear(),Ms=ms.getMonth(),$s=ms.getDate(),bs=Math.ceil(is/DAY),Cs=diffDay(ts,rs),vs=0;vs<Cs+bs;vs=vs+bs)us.push(new Date(Ss,Ms,$s+vs).getTime());else if(is>HOUR)for(var ms=new Date(ts),Ss=ms.getFullYear(),Ms=ms.getMonth(),bs=ms.getDate(),As=ms.getHours(),Is=Math.ceil(is/HOUR),ks=diffHour(ts,rs),vs=0;vs<=ks+Is;vs=vs+Is)us.push(new Date(Ss,Ms,bs,As+vs).getTime());else if(is>MINUTE)for(var Ps=diffMinus(ts,rs),Ds=Math.ceil(is/MINUTE),vs=0;vs<=Ps+Ds;vs=vs+Ds)us.push(ts+vs*MINUTE);else{var Fs=is;Fs<SECOND&&(Fs=SECOND);for(var Rs=Math.floor(ts/SECOND)*SECOND,js=Math.ceil((rs-ts)/SECOND),zs=Math.ceil(Fs/SECOND),vs=0;vs<js+zs;vs=vs+zs)us.push(Rs+vs*SECOND)}return us.length>=512&&console.warn("Notice: current ticks length("+us.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+is+") is too small, increase the value to solve the problem!"),us}registerTickMethod("cat",calculateCatTicks);registerTickMethod("time-cat",timeCat);registerTickMethod("wilkinson-extended",linear);registerTickMethod("r-pretty",linearPretty);registerTickMethod("time",calculateTimeTicks);registerTickMethod("time-pretty",timePretty);registerTickMethod("log",calculateLogTicks);registerTickMethod("pow",calculatePowTicks);registerTickMethod("quantile",calculateTicks);registerTickMethod("d3-linear",d3LinearTickMethod);registerClass("cat",Category);registerClass("category",Category);registerClass("identity",Identity);registerClass("linear",Linear$1);registerClass("log",Log);registerClass("pow",Pow);registerClass("time",Time);registerClass("timeCat",TimeCat);registerClass("quantize",Quantize);registerClass("quantile",Quantile);var __spreadArray=function(ns,ts,rs){if(rs||arguments.length===2)for(var as=0,os=ts.length,is;as<os;as++)(is||!(as in ts))&&(is||(is=Array.prototype.slice.call(ts,0,as)),is[as]=ts[as]);return ns.concat(is||Array.prototype.slice.call(ts))};function pointsToPath(ns){return map$6(ns,function(ts,rs){var as=rs===0?"M":"L",os=ts[0],is=ts[1];return[as,os,is]})}function getLinePath(ns){return pointsToPath(ns)}function getSmoothLinePath(ns){if(ns.length<=2)return getLinePath(ns);var ts=[];each$1(ns,function(us){isEqual$3(us,ts.slice(ts.length-2))||ts.push(us[0],us[1])});var rs=catmullRom2Bezier(ts,!1),as=head$1(ns),os=as[0],is=as[1];return rs.unshift(["M",os,is]),rs}function dataToPath(ns,ts,rs,as){as===void 0&&(as=!0);var os=new Linear$1({values:ns}),is=new Category({values:map$6(ns,function(ls,fs){return fs})}),us=map$6(ns,function(ls,fs){return[is.scale(fs)*ts,rs-os.scale(ls)*rs]});return as?getSmoothLinePath(us):getLinePath(us)}function dataToRectPath(ns,ts,rs,as){as===void 0&&(as=5);for(var os=new Linear$1({values:ns}),is=new Category({values:map$6(ns,function(ys,xs){return xs})}),us=map$6(ns,function(ys,xs){return[is.scale(xs)*ts,rs-os.scale(ys)*rs]}),ls=[],fs=0;fs<us.length;fs++){var hs=us[fs],vs={x:hs[0],y:hs[1],y0:rs,size:as},gs=getRectPoints(vs);ls.push.apply(ls,gs)}return getRectPath(ls)}function getAreaLineY(ns,ts){var rs=new Linear$1({values:ns}),as=Math.max(0,rs.min);return ts-rs.scale(as)*ts}function linePathToAreaPath(ns,ts,rs,as){var os=__spreadArray([],ns,!0),is=getAreaLineY(as,rs);return os.push(["L",ts,is]),os.push(["L",0,is]),os.push(["Z"]),os}function getRectPoints(ns){var ts=ns.x,rs=ns.y,as=ns.y0,os=ns.size,is,us;isArray$2(rs)?(is=rs[0],us=rs[1]):(is=as,us=rs);var ls,fs;isArray$2(ts)?(ls=ts[0],fs=ts[1]):(ls=ts-os/2,fs=ts+os/2);var hs=[{x:ls,y:is},{x:ls,y:us}];return hs.push({x:fs,y:us},{x:fs,y:is}),hs}function getRectPath(ns,ts){ts===void 0&&(ts=!0);var rs=[],as=ns[0];rs.push(["M",as.x,as.y]);for(var os=1,is=ns.length;os<is;os++)rs.push(["L",ns[os].x,ns[os].y]);return ts&&(rs.push(["L",as.x,as.y]),rs.push(["z"])),rs}var __assign$6=function(){return __assign$6=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$6.apply(this,arguments)},LINE_STYLE={stroke:"#C5C5C5",strokeOpacity:.85},AREA_STYLE={fill:"#CACED4",opacity:.85},Trend=function(){function ns(ts){var rs=ts.x,as=rs===void 0?0:rs,os=ts.y,is=os===void 0?0:os,us=ts.width,ls=us===void 0?200:us,fs=ts.height,hs=fs===void 0?26:fs,vs=ts.smooth,gs=vs===void 0?!0:vs,ys=ts.isArea,xs=ys===void 0?!1:ys,ms=ts.data,Ss=ms===void 0?[]:ms,Ms=ts.lineStyle,$s=ts.areaStyle,bs=ts.group,Cs=ts.interval,As=Cs===void 0?null:Cs;this.group=bs,this.x=as,this.y=is,this.width=ls,this.height=hs,this.data=Ss,this.smooth=gs,this.isArea=xs,this.lineStyle=Object.assign({},LINE_STYLE,Ms),this.areaStyle=Object.assign({},AREA_STYLE,$s),this.intervalConfig=As,this.renderLine()}return ns.prototype.renderLine=function(){var ts=this,rs=ts.x,as=ts.y,os=ts.width,is=ts.height;ts.barWidth;var us=ts.data,ls=ts.smooth,fs=ts.isArea,hs=ts.lineStyle,vs=ts.areaStyle,gs=this.group.addGroup({name:"trend-group"});if(us){var ys=dataToPath(us,os,is,ls);if(gs.addShape("path",{attrs:__assign$6({path:ys},hs),name:"trend-line"}),fs){var xs=linePathToAreaPath(ys,os,is,us);gs.addShape("path",{attrs:__assign$6({path:xs},vs),name:"trend-area"})}}this.intervalConfig&&gs.addShape("path",{attrs:__assign$6({path:dataToRectPath(this.intervalConfig.data,os,is,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),gs.move(rs,as)},ns.prototype.destory=function(){this.group.destroy()},ns}();const Trend$1=Trend;var __assign$5=function(){return __assign$5=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$5.apply(this,arguments)},DEFAULT_STYLE={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},SIMPLE_DEFAULT_STYLE={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Handler=function(){function ns(ts){var rs=ts.group,as=ts.name,os=ts.type,is=ts.x,us=is===void 0?0:is,ls=ts.y,fs=ls===void 0?0:ls,hs=ts.width,vs=hs===void 0?2:hs,gs=ts.height,ys=gs===void 0?24:gs,xs=ts.style,ms=xs===void 0?{}:xs;this.group=rs,this.name=as,this.handleType=os,this.x=us,this.y=fs,this.width=vs,this.height=ys,os==="trend"?this.style=__assign$5(__assign$5({},DEFAULT_STYLE),ms):os==="simple"&&(this.style=__assign$5(__assign$5({},SIMPLE_DEFAULT_STYLE),ms)),this.renderHandle()}return ns.prototype.setX=function(ts){this.setXY(ts,void 0)},ns.prototype.setY=function(ts){this.setXY(void 0,ts)},ns.prototype.setXY=function(ts,rs){isNumber$3(ts)&&(this.x=ts),isNumber$3(rs)&&(this.y=rs),this.updateXY()},ns.prototype.renderHandle=function(){var ts=this,rs=ts.width,as=ts.height,os=ts.style,is=ts.name,us=os.fill,ls=os.stroke,fs=os.radius,hs=os.opacity,vs=os.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:rs,height:as,fill:us,stroke:ls,radius:fs,opacity:hs,cursor:vs},name:"".concat(is,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:rs/2,y:0,r:2*rs,fill:us,stroke:ls,radius:fs,opacity:hs,cursor:vs,lineAppendWidth:12},name:"".concat(is,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:rs/2,y:as,r:2*rs,fill:us,stroke:ls,radius:fs,opacity:hs,cursor:vs},name:"".concat(is,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:rs/2,y:as/2,r:2*rs,fill:us,stroke:ls,radius:fs,opacity:hs,cursor:vs,lineWidth:2},name:"".concat(is,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},ns.prototype.bindSimpleEvents=function(){var ts=this,rs=this.name;this.handleGroup.on("".concat(rs,"-handler:mouseenter"),function(){var as=ts.style.highLightFill;ts.topCircle.attr("fill",as)}),this.handleGroup.on("".concat(rs,"-handler:mouseleave"),function(){var as=ts.style.fill;ts.topCircle.attr("fill",as)})},ns.prototype.bindTrendEvents=function(){var ts=this,rs=this.name;this.handleGroup.on("".concat(rs,"-handler:mouseenter"),function(){var as=ts.style.highLightFill;ts.verticalLine.attr("fill",as),ts.topCircle.attr("fill",as),ts.bottomCircle.attr("fill",as)}),this.handleGroup.on("".concat(rs,"-handler:mouseleave"),function(){var as=ts.style.fill;ts.verticalLine.attr("fill",as),ts.topCircle.attr("fill",as),ts.bottomCircle.attr("fill",as)})},ns.prototype.show=function(){this.handleGroup.show()},ns.prototype.hide=function(){this.handleGroup.hide()},ns.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},ns}();const Handler$1=Handler;var __assign$4=function(){return __assign$4=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$4.apply(this,arguments)},transform$5=transform$i,BACKGROUND_STYLE={fill:"#416180",opacity:.05},SIMPLE_BACKGROUND_STYLE={fill:"#416180",opacity:.15,radius:5},FOREGROUND_STYLE={fill:"#5B8FF9",opacity:.3,cursor:"grab"},DEFAULT_HANDLER_WIDTH=2,HANDLER_STYLE={width:DEFAULT_HANDLER_WIDTH,height:24},TEXT_STYLE={textBaseline:"middle",fill:"#000",opacity:.45},TICK_LABEL_STYLE={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},TICK_LINE_STYLE={lineWidth:1,stroke:"#ccc"},TrendTimeBar=function(){function ns(ts){var rs=this;this.prevX=0,this.onMouseDown=function(Sl){return function(Il){rs.currentHandler=Sl;var Nl=Il.originalEvent;Nl.stopPropagation(),Nl.preventDefault(),rs.prevX=get$2(Nl,"touches.0.pageX",Nl.pageX);var Tl=rs.canvas.get("container");Tl.addEventListener("mousemove",rs.onMouseMove),Tl.addEventListener("mouseup",rs.onMouseUp),Tl.addEventListener("mouseleave",rs.onMouseUp),Tl.addEventListener("touchmove",rs.onMouseMove),Tl.addEventListener("touchend",rs.onMouseUp),Tl.addEventListener("touchcancel",rs.onMouseUp)}},this.onMouseMove=function(Sl){Sl.stopPropagation(),Sl.preventDefault();var Il=get$2(Sl,"touches.0.pageX",Sl.pageX),Nl=Il-rs.prevX,Tl=rs.adjustOffsetRange(Nl/rs.width);rs.updateStartEnd(Tl),rs.updateUI(),rs.prevX=Il},this.onMouseUp=function(){rs.currentHandler&&(rs.currentHandler=void 0);var Sl=rs.canvas.get("container");Sl&&(Sl.removeEventListener("mousemove",rs.onMouseMove),Sl.removeEventListener("mouseup",rs.onMouseUp),Sl.removeEventListener("mouseleave",rs.onMouseUp),Sl.removeEventListener("touchmove",rs.onMouseMove),Sl.removeEventListener("touchend",rs.onMouseUp),Sl.removeEventListener("touchcancel",rs.onMouseUp))};var as=ts.x,os=as===void 0?0:as,is=ts.y,us=is===void 0?0:is,ls=ts.width,fs=ls===void 0?100:ls,hs=ts.height,vs=ts.padding,gs=vs===void 0?10:vs,ys=ts.trendCfg,xs=ts.controllerCfg,ms=xs===void 0?{speed:1}:xs,Ss=ts.backgroundStyle,Ms=Ss===void 0?{}:Ss,$s=ts.foregroundStyle,bs=$s===void 0?{}:$s,Cs=ts.handlerStyle,As=Cs===void 0?{}:Cs,Is=ts.textStyle,ks=Is===void 0?{}:Is,Ps=ts.start,Ds=Ps===void 0?0:Ps,Fs=ts.end,Rs=Fs===void 0?1:Fs,js=ts.minText,zs=js===void 0?"":js,Us=ts.maxText,Ys=Us===void 0?"":Us,Ks=ts.group,qs=ts.graph,_l=ts.canvas,Js=ts.tick,Vs=Js===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(Il){return Il},ticks:[]}:Js,Zs=ts.type;this.graph=qs,this.canvas=_l,this.group=Ks,this.timeBarType=Zs,this.x=os,this.y=us,this.width=fs,this.height=hs,this.padding=gs,this.ticks=Vs.ticks,this.trendCfg=ys,this.controllerCfg=ms,this.currentSpeed=ms.speed||1,this.tickLabelFormatter=Vs.tickLabelFormatter,Zs==="trend"?this.backgroundStyle=__assign$4(__assign$4({},BACKGROUND_STYLE),Ms):Zs==="simple"&&(this.backgroundStyle=__assign$4(__assign$4({},SIMPLE_BACKGROUND_STYLE),Ms)),this.foregroundStyle=__assign$4(__assign$4({},FOREGROUND_STYLE),bs),this.handlerStyle=__assign$4(__assign$4({},HANDLER_STYLE),As),this.textStyle=__assign$4(__assign$4({},TEXT_STYLE),ks),this.tickLabelStyle=__assign$4(__assign$4({},TICK_LABEL_STYLE),Vs.tickLabelStyle),this.tickLineStyle=__assign$4(__assign$4({},TICK_LINE_STYLE),Vs.tickLineStyle),this.currentMode=ms.defaultTimeType||TIME_TYPE.RANGE,this.start=Ds,this.end=Rs,this.minText=zs,this.maxText=Ys,this.fontFamily=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return ns.prototype.update=function(ts){var rs=ts.x,as=ts.y,os=ts.width,is=ts.height,us=ts.minText,ls=ts.maxText,fs=ts.start,hs=ts.end;this.start=Math.min(1,Math.max(fs,0)),this.end=Math.min(1,Math.max(hs,0)),mix$1(this,{x:rs,y:as,width:os,height:is,minText:us,maxText:ls}),this.updateUI()},ns.prototype.setText=function(ts,rs){this.minTextShape.attr("text",ts),this.maxTextShape.attr("text",rs)},ns.prototype.renderSlider=function(){var ts=this,rs=this,as=rs.width,os=rs.height,is=rs.timeBarType;if(is==="trend"&&size$1(get$2(this.trendCfg,"data"))){var us=new Trend$1(__assign$4(__assign$4({x:this.x,y:this.y,width:as,height:os},this.trendCfg),{group:this.group}));this.trendComponent=us}var ls=this.group.addGroup({name:"slider-group"});ls.addShape("rect",{attrs:__assign$4({x:0,y:0,width:as,height:os},this.backgroundStyle),name:"background"});var fs=this.group.addGroup();is==="trend"?(this.minTextShape=fs.addShape("text",{attrs:__assign$4({x:0,y:os/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=fs.addShape("text",{attrs:__assign$4({y:os/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=fs.addShape("text",{attrs:__assign$4({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=fs.addShape("text",{attrs:__assign$4({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:__assign$4({x:0,y:this.y,height:os},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function($s){$s.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function($s){$s.target.attr("cursor",ts.foregroundStyle.cursor||"grab")});var hs=get$2(this.handlerStyle,"width",2),vs=get$2(this.handlerStyle,"height",24),gs=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new Handler$1({name:"minHandlerShape",group:gs,type:is,x:this.x,y:this.y,width:hs,height:vs,style:this.handlerStyle});var ys=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new Handler$1({name:"maxHandlerShape",group:ys,type:is,x:this.x,y:this.y,width:hs,height:vs,style:this.handlerStyle});var xs=this.ticks,ms=as/(xs.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function($s){$s.destroy()});var Ss=-1/0,Ms=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=xs.map(function($s,bs){ts.tickPosList.push(ts.x+bs*ms);var Cs;ts.tickLabelFormatter?(Cs=ts.tickLabelFormatter($s),!isString$2(Cs)&&Cs&&(Cs=$s.date)):Cs=$s.date;var As=ts.x+bs*ms,Is=ts.y+os+5,ks=ts.group.addShape("text",{attrs:__assign$4({x:As,y:Is,text:Cs,fontFamily:ts.fontFamily||"Arial, sans-serif"},ts.tickLabelStyle),name:"tick-label"});if(isNumber$3(Ms)&&bs!==xs.length-1){var Ps=transform$5([1,0,0,0,1,0,0,0,1],[["t",-As,-Is],["r",Ms],["t",As-5,Is+2]]);ks.attr({textAlign:"left",matrix:Ps})}bs===0?ks.attr({textAlign:"left"}):bs!==xs.length-1&&ks.attr({textAlign:"right"});var Ds=ts.group.addShape("line",{attrs:__assign$4({x1:ts.x+bs*ms,y1:ts.y+os+2,x2:ts.x+bs*ms,y2:ts.y+os+6},ts.tickLineStyle),name:"tick-line"});Ds.toBack();var Fs=ks.getBBox();return Fs.minX>Ss?(ks.show(),Ds.show(),Ss=Fs.minX+Fs.width+10):(ks.hide(),Ds.hide()),ks}),this.controllerBtnGroup=new ControllerBtn$1(__assign$4({group:this.group,x:this.x,y:this.y+os+25,width:as,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),ls.move(this.x,this.y),this.bindEvents(),this.currentMode===TIME_TYPE.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},ns.prototype.bindEvents=function(){var ts=this,rs=this.group.find(function(os){return os.get("name")==="minHandlerShape"});rs&&(rs.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),rs.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var as=this.group.find(function(os){return os.get("name")==="maxHandlerShape"});as&&(as.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),as.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(PLAY_PAUSE_BTN,":click"),function(){ts.isPlay=!ts.isPlay,ts.currentHandler=ts.maxHandlerShape,ts.changePlayStatus()}),this.group.on("".concat(NEXT_STEP_BTN,":click"),function(){ts.currentHandler=ts.maxHandlerShape,ts.updateStartEnd(.01),ts.updateUI()}),this.group.on("".concat(PRE_STEP_BTN,":click"),function(){ts.currentHandler=ts.maxHandlerShape,ts.updateStartEnd(-.01),ts.updateUI()}),this.group.on(TIMEBAR_CONFIG_CHANGE,function(os){var is=os.type,us=os.speed;ts.currentSpeed=us,ts.currentMode=is,is===TIME_TYPE.SINGLE?(ts.minHandlerShape.hide(),ts.foregroundShape.hide(),ts.minTextShape.hide()):is===TIME_TYPE.RANGE&&(ts.minHandlerShape.show(),ts.foregroundShape.show(),ts.minTextShape.show())})},ns.prototype.adjustTickIndex=function(ts){for(var rs=0;rs<this.tickPosList.length-1;rs++)if(this.tickPosList[rs]<=ts&&ts<=this.tickPosList[rs+1])return Math.abs(this.tickPosList[rs]-ts)<Math.abs(ts-this.tickPosList[rs+1])?rs:rs+1;return 0},ns.prototype.adjustOffsetRange=function(ts){switch(this.currentHandler){case this.minHandlerShape:{var rs=0-this.start,as=1-this.start;return Math.min(as,Math.max(rs,ts))}case this.maxHandlerShape:{var rs=0-this.end,as=1-this.end;return Math.min(as,Math.max(rs,ts))}case this.foregroundShape:{var rs=0-this.start,as=1-this.end;return Math.min(as,Math.max(rs,ts))}default:return 0}},ns.prototype.updateStartEnd=function(ts){var rs=this.ticks[this.adjustTickIndex(this.start*this.width)],as=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(rs):rs==null?void 0:rs.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(as):as==null?void 0:as.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=ts,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(rs):rs.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=ts,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(as):as.date;break;case this.foregroundShape:this.start+=ts,this.end+=ts,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(rs):rs.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(as):as.date;break}},ns.prototype.updateUI=function(){var ts=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var rs=this.x+this.start*this.width,as=this.x+this.end*this.width;this.foregroundShape.attr("x",rs),this.foregroundShape.attr("width",as-rs);var os=get$2(this.handlerStyle,"width",DEFAULT_HANDLER_WIDTH);this.setText(this.minText,this.maxText);var is=this.dodgeText([rs,as]),us=is[0],ls=is[1];this.minHandlerShape.setX(rs-os/2),each$1(us,function(fs,hs){return ts.minTextShape.attr(hs,fs)}),this.maxHandlerShape.setX(as-os/2),each$1(ls,function(fs,hs){return ts.maxTextShape.attr(hs,fs)}),this.currentMode===TIME_TYPE.RANGE?this.graph.emit(VALUE_CHANGE,{value:[this.start,this.end].sort()}):this.currentMode===TIME_TYPE.SINGLE&&this.graph.emit(VALUE_CHANGE,{value:[this.end,this.end]})},ns.prototype.dodgeText=function(ts){var rs,as,os=2,is=get$2(this.handlerStyle,"width",DEFAULT_HANDLER_WIDTH),us=this.minTextShape,ls=this.maxTextShape,fs=ts[0],hs=ts[1],vs=!1;fs>hs&&(rs=[hs,fs],fs=rs[0],hs=rs[1],as=[ls,us],us=as[0],ls=as[1],vs=!0);var gs=us.getBBox(),ys=ls.getBBox(),xs=null,ms=null;return this.timeBarType==="trend"?(xs=fs-gs.width<this.x+os?{x:fs+is/2+os,textAlign:"left"}:{x:fs-is/2-os,textAlign:"right"},ms=hs+ys.width>this.x+this.width?{x:hs-is/2-os,textAlign:"right"}:{x:hs+is/2+os,textAlign:"left"}):this.timeBarType==="simple"&&(xs=us.attr("x")>gs.width?{x:fs,textAlign:"center"}:{x:fs,textAlign:"left"},ms=ls.attr("x")>this.width-ys.width?{x:hs,textAlign:"right"}:{x:hs,textAlign:"center"}),vs?[ms,xs]:[xs,ms]},ns.prototype.startPlay=function(){var ts=this;return typeof window<"u"?window.requestAnimationFrame(function(){var rs=ts,as=rs.ticks,os=rs.width,is=ts.currentSpeed,us=os/as.length,ls=us/((10-is)*1e3/60),fs=ts.adjustOffsetRange(ls/ts.width);ts.updateStartEnd(fs),ts.updateUI(),ts.isPlay&&(ts.playHandler=ts.startPlay())}):void 0},ns.prototype.changePlayStatus=function(ts){ts===void 0&&(ts=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(TIMELINE_START,null)):this.playHandler&&(typeof window<"u"&&window.cancelAnimationFrame(this.playHandler),ts&&this.graph.emit(TIMELINE_END,null))},ns.prototype.destory=function(){this.graph.off(VALUE_CHANGE,function(){});var ts=this.group,rs=ts.find(function(os){return os.get("name")==="minHandlerShape"});rs&&(rs.off("minHandlerShape-handler:mousedown"),rs.off("minHandlerShape-handler:touchstart"),rs.destroy());var as=ts.find(function(os){return os.get("name")==="maxHandlerShape"});as&&(as.off("maxHandlerShape-handler:mousedown"),as.off("maxHandlerShape-handler:touchstart"),as.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),ts.off("".concat(PLAY_PAUSE_BTN,":click")),ts.off("".concat(NEXT_STEP_BTN,":click")),ts.off("".concat(PRE_STEP_BTN,":click")),ts.off(TIMEBAR_CONFIG_CHANGE),ts.destroy(),this.trendComponent&&this.trendComponent.destory()},ns}();const TrendTimeBar$1=TrendTimeBar;var __extends$5=function(){var ns=function(rs,as){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(os,is){os.__proto__=is}||function(os,is){for(var us in is)Object.prototype.hasOwnProperty.call(is,us)&&(os[us]=is[us])},ns(rs,as)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__assign$3=function(){return __assign$3=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$3.apply(this,arguments)},__rest$1=function(ns,ts){var rs={};for(var as in ns)Object.prototype.hasOwnProperty.call(ns,as)&&ts.indexOf(as)<0&&(rs[as]=ns[as]);if(ns!=null&&typeof Object.getOwnPropertySymbols=="function")for(var os=0,as=Object.getOwnPropertySymbols(ns);os<as.length;os++)ts.indexOf(as[os])<0&&Object.prototype.propertyIsEnumerable.call(ns,as[os])&&(rs[as[os]]=ns[as[os]]);return rs},DEFAULT_SIMPLE_HEIGHT=4,DEFAULT_TREND_HEIGHT=26,TimeBar$1=function(ns){__extends$5(ts,ns);function ts(rs){var as=ns.call(this,rs)||this;return as.afterrenderListener=function(os){return as.filterData({})},as.valueChangeListener=throttle$1(function(os){return as.filterData(os)},200,{trailing:!0,leading:!0}),as.changeData=function(os){var is=as.get("graph");as.cacheGraphData=is.get("data"),as.filterData({})},as}return ts.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},ts.prototype.initContainer=function(){var rs=this.get("graph"),as=this._cfgs,os=as.width,is=as.height,us=as.putInGraphContainer,ls=this.get("className")||"g6-component-timebar",fs=this.get("container"),hs;if(fs?(isString$2(fs)&&(fs=document.getElementById(fs)),hs=fs):(hs=createDom("<div class='".concat(ls,"'></div>")),modifyCSS$1(hs,{position:"relative"})),us){var vs=this.get("graph").get("container");vs.appendChild(hs)}this.set("timeBarContainer",hs);var gs,ys=rs.get("renderer");ys==="SVG"?gs=new Canvas({container:hs,width:os,height:is}):gs=new Canvas$1({container:hs,width:os,height:is}),this.get("containerCSS")&&modifyCSS$1(hs,this.get("containerCSS")),this.set("canvas",gs)},ts.prototype.init=function(){this.initContainer();var rs=this.get("canvas"),as=rs.addGroup({name:"timebar-group"});this.set("timeBarGroup",as),this.renderTrend(),this.initEvent();var os=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",os)},ts.prototype.play=function(){this.togglePlay(!0)},ts.prototype.pause=function(){this.togglePlay(!1)},ts.prototype.togglePlay=function(rs){var as=this.get("timebar");as&&(as.isPlay=!!rs,as.changePlayStatus())},ts.prototype.renderTrend=function(){var rs=this,as=this._cfgs,os=as.width,is=as.x,us=as.y,ls=as.padding,fs=as.type,hs=as.trend,vs=as.slider,gs=as.controllerCfg,ys=as.textStyle,xs=as.tick,ms=as.backgroundStyle,Ss=as.foregroundStyle,Ms=hs.data,$s=__rest$1(hs,["data"]),bs=os-2*ls,Cs=fs==="trend"?DEFAULT_TREND_HEIGHT:DEFAULT_SIMPLE_HEIGHT,As=this.get("graph"),Is=this.get("timeBarGroup"),ks=this.get("canvas"),Ps=null;if(fs==="trend"||fs==="simple"){var Ds=this.get("getValue");Ps=new TrendTimeBar$1(__assign$3(__assign$3({graph:As,canvas:ks,group:Is,type:fs,x:is+ls,y:fs==="trend"?us+ls:us+ls+15,width:bs,height:Cs,padding:ls,backgroundStyle:ms,foregroundStyle:Ss,trendCfg:__assign$3(__assign$3({},$s),{data:Ms.map(function(Rs){return(Ds==null?void 0:Ds(Rs))||Rs.value})})},vs),{tick:{ticks:Ms,tickLabelFormatter:xs.tickLabelFormatter,tickLabelStyle:xs.tickLabelStyle,tickLineStyle:xs.tickLineStyle},handlerStyle:__assign$3(__assign$3({},vs.handlerStyle),{height:vs.height||Cs}),controllerCfg:gs,textStyle:ys}))}else fs==="tick"&&(Ps=new TimeBarSlice$1(__assign$3({graph:As,canvas:ks,group:Is,x:is+ls,y:us+ls,width:os,height:42,padding:2,controllerCfg:gs},xs)));var Fs=function Rs(){var js=rs.get("timebar");js.draggingHandler=!1,js.isPlay&&(js.isPlay=!1,js.currentHandler=js.maxHandlerShape,js.changePlayStatus()),document.removeEventListener("mouseup",Rs)};ks.on("mousedown",function(Rs){(Rs.target.get("name")==="maxHandlerShape-handler"||Rs.target.get("name")==="minHandlerShape-handler"||Rs.target===Ps.foregroundShape)&&document.addEventListener("mouseup",Fs)}),this.set("timebar",Ps)},ts.prototype.filterData=function(rs){var as,os=rs.value;if(!os){os=[];var is=this._cfgs.type;!is||is==="trend"||is==="simple"?(os[0]=this._cfgs.slider.start,os[1]=this._cfgs.slider.end):is==="tick"&&(os[0]=this._cfgs.tick.start,os[1]=this._cfgs.tick.end)}var us=null,ls=this._cfgs.type;if(ls==="trend"||ls==="simple"?us=this._cfgs.trend.data:ls==="tick"&&(us=this._cfgs.tick.data),!us||us.length===0){console.warn("请配置 TimeBar 组件的数据");return}var fs=this.get("rangeChange"),hs=this.get("graph"),vs=Math.round(us.length*os[0]),gs=Math.round(us.length*os[1]);gs=gs>=us.length?us.length-1:gs,vs=vs>=us.length?us.length-1:vs;var ys=(as=this._cfgs.tick)===null||as===void 0?void 0:as.tickLabelFormatter,xs=ys?ys(us[vs]):us[vs].date,ms=ys?ys(us[gs]):us[gs].date;if(ls!=="tick"){var Ss=this.get("timebar");Ss.setText(xs,ms)}if(fs)fs(hs,xs,ms);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=hs.get("data"));var Ms=this.get("filterItemTypes"),$s=this.get("changeData"),bs=this.get("getDate"),Cs=this.get("shouldIgnore"),As=us[vs].date,Is=us[gs].date;if($s||$s===void 0){var ks=this.cacheGraphData.nodes,Ps=this.cacheGraphData.edges,Ds={},Fs={};hs.getNodes().forEach(function(Rs){return Ds[Rs.getID()]=!0}),hs.getEdges().forEach(function(Rs){return Fs[Rs.getID()]=!0}),Ms.includes("node")&&(ks==null||ks.forEach(function(Rs){var js=+((bs==null?void 0:bs(Rs))||Rs.date),zs=js>=As&&js<=Is||(Cs==null?void 0:Cs("node",Rs,{min:As,max:Is})),Us=Ds[Rs.id];Us&&!zs?(hs.removeItem(Rs.id),Ds[Rs.id]=!1):!Us&&zs&&(hs.addItem("node",Rs),Ds[Rs.id]=!0)}),Ps==null||Ps.forEach(function(Rs){var js=Ds[Rs.source]&&Ds[Rs.target]||(Cs==null?void 0:Cs("edge",Rs,{min:As,max:Is})),zs=!!hs.findById(Rs.id);zs&&!js?(hs.removeItem(Rs.id),Fs[Rs.id]=!1):!zs&&js?(hs.addItem("edge",Rs),Fs[Rs.id]=!0):zs||(Fs[Rs.id]=!1)})),(this.get("filterEdge")||Ms.includes("edge"))&&(Ps==null||Ps.filter(function(Rs){var js=+((bs==null?void 0:bs(Rs))||Rs.date),zs=js>=As&&js<=Is||(Cs==null?void 0:Cs("edge",Rs,{min:As,max:Is})),Us=Ds[Rs.source]&&Ds[Rs.target],Ys=zs&&Us,Ks=Fs[Rs.id];Ks&&!Ys?(Fs[Rs.id]=!1,hs.removeItem(Rs.id)):!Ks&&Ys&&(Fs[Rs.id]=!0,hs.addItem("edge",Rs))}))}else Ms.includes("node")&&hs.getNodes().forEach(function(Rs){var js=Rs.getModel();if(!(Cs!=null&&Cs("node",js,{min:As,max:Is}))){var zs=+((bs==null?void 0:bs(js))||js.date);zs<As||zs>Is?hs.hideItem(Rs):hs.showItem(Rs)}}),(this.get("filterEdge")||Ms.includes("edge"))&&hs.getEdges().forEach(function(Rs){var js=Rs.getModel();if(!(Cs!=null&&Cs("edge",js,{min:us[vs].date,max:us[gs].date}))){var zs=+((bs==null?void 0:bs(js))||js.date);if(zs<us[vs].date||zs>us[gs].date)hs.hideItem(Rs);else{var Us=Rs.getSource().isVisible(),Ys=Rs.getTarget().isVisible();Us&&Ys&&hs.showItem(Rs)}}})}},ts.prototype.initEvent=function(){var rs=this.get("graph");rs.on("afterchangedata",this.changeData),rs.on("afterrender",this.afterrenderListener),rs.on(VALUE_CHANGE,this.valueChangeListener)},ts.prototype.destroy=function(){var rs=this.get("graph");rs.off("afterchangedata",this.changeData),rs.off("afterrender",this.afterrenderListener),rs.off(VALUE_CHANGE,this.valueChangeListener);var as=this.get("timebar");as&&as.destory&&as.destory(),ns.prototype.destroy.call(this);var os=this.get("timeBarContainer");if(os){var is=this.get("container");is||(is=this.get("graph").get("container")),isString$2(is)&&(is=document.getElementById(is)),is===os&&(is=is.parentElement),is.removeChild(os)}},ts}(PluginBase$1);const TimeBar$2=TimeBar$1;var __extends$4=function(){var ns=function(rs,as){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(os,is){os.__proto__=is}||function(os,is){for(var us in is)Object.prototype.hasOwnProperty.call(is,us)&&(os[us]=is[us])},ns(rs,as)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),applyMatrix$1=Util$1.applyMatrix;function getImgNaturalDimension(ns,ts){var rs,as;if(ns.naturalWidth)rs=ns.naturalWidth,as=ns.naturalHeight;else{var os=new Image;os.src=ns.src,os.onload=function(){ts&&ts(os.width,os.height)}}return[rs,as]}var ImageMiniMap=function(ns){__extends$4(ts,ns);function ts(rs){return ns.call(this,rs)||this}return ts.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},ts.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},ts.prototype.disableRefresh=function(){this.set("refresh",!1)},ts.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},ts.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},ts.prototype.initViewport=function(){var rs=this,as=this._cfgs,os=as.graph;if(!this.destroyed){var is=this.get("container");isString$2(is)&&(is=document.getElementById(is));var us=createDom("<div class=".concat(as.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),ls=0,fs=0,hs=!1,vs=0,gs=0,ys=0,xs=0,ms=0,Ss=0;is.addEventListener("mousedown",function(Ms){if(as.refresh=!1,Ms.target===us){var $s=us.style;ys=parseInt($s.width,10),xs=parseInt($s.height,10);var bs=rs.get("width"),Cs=rs.get("height");ys>bs||xs>Cs||(Ss=os.getZoom(),ms=rs.get("ratio"),hs=!0,ls=Ms.clientX,fs=Ms.clientY)}},!1),is.addEventListener("mousemove",function(Ms){if(!(!hs||isNil$2(Ms.clientX)||isNil$2(Ms.clientY))){var $s=rs.get("width"),bs=rs.get("height"),Cs=us.style;vs=parseInt(Cs.left,10),gs=parseInt(Cs.top,10),ys=parseInt(Cs.width,10),xs=parseInt(Cs.height,10);var As=ls-Ms.clientX,Is=fs-Ms.clientY;vs-As<0?As=vs:vs-As+ys>=$s&&(As=0),gs-Is<0?Is=gs:gs-Is+xs>=bs&&(Is=0),vs-=As,gs-=Is,modifyCSS$1(us,{left:"".concat(vs,"px"),top:"".concat(gs,"px")}),os.translate(As*Ss/ms,Is*Ss/ms),ls=Ms.clientX,fs=Ms.clientY}},!1),is.addEventListener("mouseleave",function(){hs=!1,as.refresh=!0},!1),is.addEventListener("mouseup",function(){hs=!1,as.refresh=!0},!1),this.set("viewport",us),is.appendChild(us)}},ts.prototype.updateViewport=function(){if(!this.destroyed){var rs=this.get("ratio"),as=this.get("width"),os=this.get("height"),is=this.get("graph"),us=is.get("width"),ls=is.get("height"),fs=us/ls,hs=is.getGroup(),vs=hs.getCanvasBBox(),gs=[(vs.minX+vs.maxX)/2,(vs.minY+vs.maxY)/2],ys=[vs.maxX-vs.minX,vs.maxY-vs.minY],xs={centerX:gs[0],centerY:gs[1],width:0,height:0,minX:0,minY:0};vs[0]/vs[1]>fs?(xs.width=ys[0],xs.height=xs.width/fs):(xs.height=ys[1],xs.width=xs.height*fs),xs.minX=gs[0]-xs.width/2,xs.minY=gs[1]-xs.height/2;var ms=hs.getMatrix();ms||(ms=[1,0,0,0,1,0,0,0,1]);var Ss=invert$4([1,0,0,0,1,0,0,0,1],ms),Ms=applyMatrix$1({x:xs.minX,y:xs.minY},Ss),$s=is.getCanvasByPoint(Ms.x,Ms.y),bs=this.get("viewport");bs||this.initViewport();var Cs=us/xs.width,As=Cs*as,Is=Cs*os,ks=as*-$s.x/xs.width,Ps=os*-$s.y/xs.height,Ds=ks+As,Fs=Ps+Is;ks<0&&(As+=ks,ks=0),Ds>as&&(As=As-(Ds-as)),Ps<0&&(Is+=Ps,Ps=0),Fs>os&&(Is=Is-(Fs-os)),this.set("ratio",rs);var Rs="".concat(ks,"px"),js="".concat(Ps,"px");modifyCSS$1(bs,{left:Rs,top:js,width:"".concat(As,"px"),height:"".concat(Is,"px")})}},ts.prototype.init=function(){this.initContainer()},ts.prototype.initContainer=function(){var rs=this,as=rs.get("graph"),os=as.get("width"),is=as.get("height"),us=is/os,ls=rs.get("className"),fs=rs.get("container"),hs=rs.get("width"),vs=rs.get("height");!hs&&!vs&&(hs=200),hs?(vs=us*hs,rs.set("height",vs)):(hs=1/us*vs,rs.set("width",hs));var gs=createDom("<div class='".concat(ls,"' style='width: ").concat(hs,"px; height: ").concat(vs,"px; overflow: hidden; position: relative;'></div>"));isString$2(fs)&&(fs=document.getElementById(fs)),fs?fs.appendChild(gs):as.get("container").appendChild(gs),rs.set("container",gs);var ys=createDom('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');gs.appendChild(ys);var xs=createDom('<span style="display: table-cell; vertical-align: middle; "></span>');ys.appendChild(xs),rs.set("containerDOM",ys),rs.set("containerSpan",xs);var ms=createDom('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));rs.set("imgDOM",ms),rs.updateImgSize(),xs.appendChild(ms),rs.updateCanvas()},ts.prototype.updateImgSize=function(){var rs=this,as=rs.get("imgDOM"),os=rs.get("width"),is=rs.get("height");as.onload=function(){var us=getImgNaturalDimension(as);us[0]>us[1]?as.width=os:as.height=is}},ts.prototype.updateCanvas=function(){var rs=this.get("refresh");if(rs){var as=this.get("graph");if(!as.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var os=this.get("width"),is=as.get("canvas").getCanvasBBox(),us=is.width,ls=os/us;this.set("ratio",ls),this.updateViewport()}}},ts.prototype.getViewport=function(){return this.get("viewport")},ts.prototype.getContainer=function(){return this.get("container")},ts.prototype.updateGraphImg=function(rs){var as=this,os=as.get("imgDOM");os.remove(),as.set("graphImg",rs);var is=createDom('<img alt="" src="'.concat(rs,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));as.set("imgDOM",is),is.src=rs,as.updateImgSize();var us=as.get("containerSpan");us.appendChild(is),as.updateCanvas()},ts.prototype.destroy=function(){var rs=this.get("container");rs.parentNode.removeChild(rs)},ts}(PluginBase$1);const ImageMinimap$1=ImageMiniMap;var __extends$3=function(){var ns=function(rs,as){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(os,is){os.__proto__=is}||function(os,is){for(var us in is)Object.prototype.hasOwnProperty.call(is,us)&&(os[us]=is[us])},ns(rs,as)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__assign$2=function(){return __assign$2=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$2.apply(this,arguments)},distance$2=Util$1.distance,DELTA$1=.05,lensDelegateStyle={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},EdgeFilterLens$1=function(ns){__extends$3(ts,ns);function ts(rs){return ns.call(this,rs)||this}return ts.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:clone$b(lensDelegateStyle),showLabel:"edge",scaleRBy:"wheel"}},ts.prototype.getEvents=function(){var rs;switch(this.get("trigger")){case"click":rs={click:"filter"};break;case"drag":rs={click:"createDelegate"};break;default:rs={mousemove:"filter"};break}return rs},ts.prototype.init=function(){var rs=this,as=rs.get("showLabel"),os=as==="node"||as==="both",is=as==="edge"||as==="both";rs.set("showNodeLabel",os),rs.set("showEdgeLabel",is);var us=rs.get("shouldShow");us||rs.set("shouldShow",function(){return!0})},ts.prototype.createDelegate=function(rs){var as=this,os=as.get("delegate");(!os||os.destroyed)&&(as.filter(rs),os=as.get("delegate"),os.on("dragstart",function(is){}),os.on("drag",function(is){as.filter(is)}),this.get("scaleRBy")==="wheel"&&os.on("mousewheel",function(is){as.scaleRByWheel(is)}))},ts.prototype.scaleRByWheel=function(rs){var as=this;if(!(!rs||!rs.originalEvent)){rs.preventDefault&&rs.preventDefault();var os=as.get("graph"),is,us=as.get("delegate"),ls=us?{x:us.attr("x"),y:us.attr("y")}:void 0;ls||os.getPointByClient(rs.clientX,rs.clientY),rs.originalEvent.wheelDelta<0?is=1-DELTA$1:is=1/(1-DELTA$1);var fs=as.get("maxR"),hs=as.get("minR"),vs=as.get("r");(vs>(fs||os.get("height"))&&is>1||vs<(hs||os.get("height")*.05)&&is<1)&&(is=1),vs*=is,as.set("r",vs),as.filter(rs)}},ts.prototype.filter=function(rs){var as=this,os=as.get("graph"),is=os.getNodes(),us={},ls=as.get("r"),fs=as.get("type"),hs={x:rs.x,y:rs.y};as.updateDelegate(hs,ls);var vs=as.get("shouldShow"),gs=as.get("vShapes");gs&&gs.forEach(function($s){$s.remove(),$s.destroy()}),gs=[],is.forEach(function($s){var bs=$s.getModel(),Cs=bs.x,As=bs.y;distance$2({x:Cs,y:As},hs)<ls&&(us[bs.id]=$s)});var ys=os.getEdges(),xs=[];ys.forEach(function($s){var bs=$s.getModel(),Cs=bs.source,As=bs.target;vs(bs)&&(fs==="only-source"||fs==="one"?us[Cs]&&!us[As]&&xs.push($s):fs==="only-target"||fs==="one"?us[As]&&!us[Cs]&&xs.push($s):fs==="both"&&us[Cs]&&us[As]&&xs.push($s))});var ms=as.get("showNodeLabel"),Ss=as.get("showEdgelabel"),Ms=os.get("group");xs.forEach(function($s){var bs=$s.get("group").get("children");bs.forEach(function(Cs){var As=Cs.get("type"),Is=Ms.addShape(As,{attrs:Cs.attr()});gs.push(Is),ms&&As==="text"&&Is.set("visible",!0)})}),Object.keys(us).forEach(function($s){var bs=us[$s],Cs=bs.get("group").clone();if(Ms.add(Cs),gs.push(Cs),Ss)for(var As=Cs.get("children"),Is=0;Is<As.length;Is++){var ks=As[Is];ks.get("type")==="text"&&ks.set("visible",!0)}}),as.set("vShapes",gs)},ts.prototype.updateParams=function(rs){var as=this,os=rs.r,is=rs.trigger,us=rs.minR,ls=rs.maxR,fs=rs.scaleRBy,hs=rs.showLabel,vs=rs.shouldShow;if(isNaN(rs.r)||as.set("r",os),isNaN(ls)||as.set("maxR",ls),isNaN(us)||as.set("minR",us),(is==="mousemove"||is==="click")&&as.set("trigger",is),fs==="wheel"||fs==="unset"){as.set("scaleRBy",fs),as.get("delegate").remove(),as.get("delegate").destroy();var gs=as.get("dPercentText");gs&&(gs.remove(),gs.destroy())}(hs==="node"||hs==="both")&&as.set("showNodeLabel",!0),(hs==="edge"||hs==="both")&&as.set("showEdgeLabel",!0),vs&&as.set("shouldShow",vs)},ts.prototype.updateDelegate=function(rs,as){var os=this,is=os.get("graph"),us=os.get("delegate");if(!us||us.destroyed){var ls=is.get("group"),fs=os.get("delegateStyle")||lensDelegateStyle;us=ls.addShape("circle",{attrs:__assign$2({r:as,x:rs.x,y:rs.y},fs),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&us.on("mousewheel",function(hs){os.scaleRByWheel(hs)})}else us.attr({x:rs.x,y:rs.y,r:as});os.set("delegate",us)},ts.prototype.clear=function(){var rs=this,as=rs.get("vShapes");as&&as.forEach(function(is){is.remove(),is.destroy()}),as=[],rs.set("vShapes",as);var os=rs.get("delegate");os&&!os.destroyed&&(os.remove(),os.destroy())},ts.prototype.destroy=function(){this.clear()},ts}(PluginBase$1);const EdgeFilterLens$2=EdgeFilterLens$1;var __extends$2=function(){var ns=function(rs,as){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(os,is){os.__proto__=is}||function(os,is){for(var us in is)Object.prototype.hasOwnProperty.call(is,us)&&(os[us]=is[us])},ns(rs,as)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),pointLineDistance=Util$1.pointLineDistance,alignLineStyle={stroke:"#FA8C16",lineWidth:1},SnapLine$1=function(ns){__extends$2(ts,ns);function ts(rs){return ns.call(this,rs)||this}return ts.prototype.getDefaultCfgs=function(){return{line:alignLineStyle,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},ts.prototype.init=function(){},ts.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},ts.prototype.onDragStart=function(){this.initBoxLine()},ts.prototype.onDrag=function(rs){var as=rs.item,os=as.get("delegateShape")||as,is=os.getBBox(),us=as.getModel(),ls=us.x-is.x,fs=us.y-is.y;this.show({x:is.minX+ls,y:is.minY+fs},{width:is.width,height:is.height})},ts.prototype.onDragEnd=function(){this.destory()},ts.prototype.initBoxLine=function(){var rs=this._cfgs,as=rs.horizontalLines,os=rs.verticalLines,is=rs.itemAlignType,us=this.get("graph"),ls=us.getNodes();ls.forEach(function(fs){var hs=fs.getBBox(),vs=fs.get("id");is===!0||is==="horizontal"?(as["".concat(vs,"tltr")]=[hs.minX,hs.minY,hs.maxX,hs.minY,fs],as["".concat(vs,"lcrc")]=[hs.minX,hs.centerY,hs.maxX,hs.centerY,fs],as["".concat(vs,"blbr")]=[hs.minX,hs.maxY,hs.maxX,hs.maxY,fs]):is==="center"&&(as["".concat(vs,"lcrc")]=[hs.minX,hs.centerY,hs.maxX,hs.centerY,fs]),is===!0||is==="vertical"?(os["".concat(vs,"tlbl")]=[hs.minX,hs.minY,hs.minX,hs.maxY,fs],os["".concat(vs,"tcbc")]=[hs.centerX,hs.minY,hs.centerX,hs.maxY,fs],os["".concat(vs,"trbr")]=[hs.maxX,hs.minY,hs.maxX,hs.maxY,fs]):is==="center"&&(os["".concat(vs,"tcbc")]=[hs.centerX,hs.minY,hs.centerX,hs.maxY,fs])})},ts.prototype.show=function(rs,as){var os=mix$1({},rs);return this.itemAlign(rs,as,os),rs},ts.prototype.itemAlign=function(rs,as,os){var is=this,us=this._cfgs,ls=us.horizontalLines,fs=us.verticalLines,hs=us.tolerance,vs={x:os.x+as.width/2,y:os.y},gs={x:os.x+as.width/2,y:os.y+as.height/2},ys={x:os.x+as.width/2,y:os.y+as.height},xs={x:os.x,y:os.y+as.height/2},ms={x:os.x+as.width,y:os.y+as.height/2},Ss=[],Ms=[],$s=null;if(this.clearAlignLine(),each$1(ls,function(Cs){Cs[4].isVisible&&(Ss.push(is.getLineDisObject(Cs,vs)),Ss.push(is.getLineDisObject(Cs,gs)),Ss.push(is.getLineDisObject(Cs,ys)))}),each$1(fs,function(Cs){Cs[4].isVisible&&(Ms.push(is.getLineDisObject(Cs,xs)),Ms.push(is.getLineDisObject(Cs,gs)),Ms.push(is.getLineDisObject(Cs,ms)))}),Ss.sort(function(Cs,As){return Cs.dis-As.dis}),Ms.sort(function(Cs,As){return Cs.dis-As.dis}),Ss.length!==0&&Ss[0].dis<hs){rs.y=Ss[0].line[1]-Ss[0].point.y+os.y,$s={type:"item",horizontals:[Ss[0]]};for(var bs=1;bs<3;bs++)Ss[0].dis===Ss[bs].dis&&$s.horizontals.push(Ss[bs])}if(Ms.length!==0&&Ms[0].dis<hs){rs.x=Ms[0].line[0]-Ms[0].point.x+os.x,$s?$s.verticals=[Ms[0]]:$s={type:"item",verticals:[Ms[0]]};for(var bs=1;bs<3;bs++)Ms[0].dis===Ms[bs].dis&&$s.verticals.push(Ms[bs])}$s&&($s.bbox=as,this.addAlignLine($s))},ts.prototype.addAlignLine=function(rs){var as=rs.bbox,os=rs.type,is=rs.horizontals,us=rs.verticals,ls=this._cfgs,fs=ls.line,hs=ls.alignLines,vs=this.get("graph"),gs=vs.get("group");os==="item"&&(is&&each$1(is,function(ys){var xs=ys.line,ms=ys.point,Ss=(xs[0]+xs[2])/2,Ms,$s;ms.x<Ss?(Ms=ms.x-as.width/2,$s=Math.max(xs[0],xs[2])):(Ms=ms.x+as.width/2,$s=Math.min(xs[0],xs[2]));var bs=mix$1({x1:Ms,y1:xs[1],x2:$s,y2:xs[1]},fs),Cs=gs.addShape("line",{attrs:bs,capture:!1});hs.push(Cs)}),us&&each$1(us,function(ys){var xs=ys.line,ms=ys.point,Ss=(xs[1]+xs[3])/2,Ms,$s;ms.y<Ss?(Ms=ms.y-as.height/2,$s=Math.max(xs[1],xs[3])):(Ms=ms.y+as.height/2,$s=Math.min(xs[1],xs[3]));var bs=mix$1({x1:xs[0],y1:Ms,x2:xs[0],y2:$s},fs),Cs=gs.addShape("line",{attrs:bs,capture:!1});hs.push(Cs)}))},ts.prototype.getLineDisObject=function(rs,as){return{line:rs,point:as,dis:pointLineDistance(rs,as)}},ts.prototype.getContainer=function(){return this.get("container")},ts.prototype.clearAlignLine=function(){var rs=this._cfgs.alignLines;each$1(rs,function(as){as.remove()}),rs.length=0},ts.prototype.destory=function(){var rs=this._cfgs,as=rs.horizontalLines,os=rs.verticalLines,is=this.get("graph"),us=is.getNodes();us.forEach(function(ls){var fs=ls.get("id");delete as["".concat(fs,"tltr")],delete as["".concat(fs,"lcrc")],delete as["".concat(fs,"blbr")],delete os["".concat(fs,"tlbl")],delete os["".concat(fs,"tcbc")],delete os["".concat(fs,"trbr")]}),this.clearAlignLine()},ts}(PluginBase$1);const SnapLine$2=SnapLine$1;var __extends$1=function(){var ns=function(rs,as){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(os,is){os.__proto__=is}||function(os,is){for(var us in is)Object.prototype.hasOwnProperty.call(is,us)&&(os[us]=is[us])},ns(rs,as)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__assign$1=function(){return __assign$1=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign$1.apply(this,arguments)},ALLOW_EVENTS$9=["click","mouseenter"],Legend=function(ns){__extends$1(ts,ns);function ts(rs){return ns.call(this,rs)||this}return ts.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},ts.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var rs=this.get("filter")||{},as=rs.multiple;as&&rs.trigger==="mouseenter"&&this.set("multiple",!1);var os=this.get("align");if(!os){var is=this.get("position").split("-");is.includes("left")&&(os="left"),is.includes("right")?os="right":os="center",this.set("align",os)}var us=this.get("graph"),ls=us.get("container"),fs=createDom(`<div class='g6-legend-container' style="position: absolute;"></div>`);ls.appendChild(fs),this.set("container",fs);var hs=this.render();modifyCSS$1(fs,this.getContainerPos(hs)),this.bindEvents()},ts.prototype.getContainerPos=function(rs){rs===void 0&&(rs=[0,0]);var as=this,os=as.get("graph"),is=this.get("offsetX"),us=this.get("offsetY"),ls=this.get("margin"),fs=this.get("position").split("-"),hs={top:0,right:1,bottom:2,left:3},vs=0,gs=0,ys={left:(os.getWidth()-rs[0])/2+vs,top:(os.getHeight()-rs[1])/2+gs};return fs.forEach(function(xs){var ms=ls[hs[xs]],Ss=xs;switch(xs){case"top":ms+=gs;break;case"left":ms+=vs;break;case"bottom":ms=os.getHeight()-rs[1]-ms+gs,Ss="top";break;default:ms=os.getWidth()-rs[0]-ms+vs,Ss="left";break}ys[Ss]=ms}),ys.top+=us+os.getContainer().offsetTop,ys.left+=is+os.getContainer().offsetLeft,Object.keys(ys).forEach(function(xs){ys[xs]="".concat(ys[xs],"px")}),ys},ts.prototype.bindEvents=function(){var rs=this,as=rs.get("filter");if(!(!as||!as.enable)){var os=as.trigger||"click";ALLOW_EVENTS$9.includes(os)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),os="click");var is=rs.get("legendCanvas");os==="mouseenter"?(is.on("node-container:mouseenter",function(us){return rs.filterData(us)}),is.on("node-container:mouseleave",function(us){rs.clearFilter(),rs.clearActiveLegend()})):(is.on("node-container:click",function(us){return rs.filterData(us)}),is.on("click",function(us){us.target&&us.target.isCanvas&&us.target.isCanvas()&&(rs.clearFilter(),rs.clearActiveLegend())}))}},ts.prototype.changeData=function(rs){this.set("data",rs);var as=this.render();modifyCSS$1(this.get("container"),this.getContainerPos(as))},ts.prototype.activateLegend=function(rs){var as=this.get("filter"),os=as==null?void 0:as.multiple;os||this.clearActiveLegend();var is=rs.get("parent");is.get("active")?(is.set("active",!1),this.findLegendItemsByState("active").length&&is.set("inactive",!0)):(is.set("inactive",!1),is.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(gs){gs.set("inactive",!0)}):this.clearActiveLegend();var us=(as==null?void 0:as.legendStateStyles)||{},ls=(us==null?void 0:us.inactive)||{opacity:.5,"text-shape":{opacity:.5}},fs=ls["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(gs){var ys=gs.get("children"),xs=ys[0],ms=ys[1];xs.attr(__assign$1(__assign$1({},xs.get("oriAttrs")),ls)),ms.attr(__assign$1(__assign$1({},ms.get("oriAttrs")),fs))});var hs=(us==null?void 0:us.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},vs=hs["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(gs){var ys=gs.get("children"),xs=ys[0],ms=ys[1];xs.attr(__assign$1(__assign$1({},xs.get("oriAttrs")),hs)),ms.attr(__assign$1(__assign$1({},ms.get("oriAttrs")),vs))})},ts.prototype.findLegendItemsByState=function(rs,as,os){as===void 0&&(as="all"),os===void 0&&(os=!0);var is=this.get("legendCanvas").find(function(fs){return fs.get("name")==="root"}),us=is.find(function(fs){return fs.get("name")==="node-group"}),ls=is.find(function(fs){return fs.get("name")==="edge-group"});return as==="node"?us.get("children").filter(function(fs){return!!fs.get(rs)===os}):as==="edge"?ls.get("children").filter(function(fs){return!!fs.get(rs)===os}):us.get("children").filter(function(fs){return!!fs.get(rs)===os}).concat(ls.get("children").filter(function(fs){return!!fs.get(rs)===os}))},ts.prototype.clearActiveLegend=function(){var rs=this.get("legendCanvas"),as=rs.find(function(is){return is.get("name")==="root"}),os=[as.find(function(is){return is.get("name")==="node-group"}),as.find(function(is){return is.get("name")==="edge-group"})];os.forEach(function(is){is.get("children").forEach(function(us){us.set("active",!1),us.set("inactive",!1);var ls=us.get("children"),fs=ls[0],hs=ls[1];fs.attr(fs.get("oriAttrs")),hs.attr(hs.get("oriAttrs"))})})},ts.prototype.filterData=function(rs){var as=this.get("filter"),os=as==null?void 0:as.filterFunctions;if(!(!as||!os)){var is=this.get("legendCanvas"),us=this.get("graph"),ls=as.graphActiveState||"active",fs=as.graphInactiveState||"inactive",hs=as.multiple;this.clearFilter(),hs||this.clearActiveLegend(),this.activateLegend(rs.target);var vs=is.find(function($s){return $s.get("name")==="root"}),gs=vs.find(function($s){return $s.get("name")==="node-group"}),ys=vs.find(function($s){return $s.get("name")==="edge-group"}),xs=gs.get("children").filter(function($s){return $s.get("active")}),ms=ys.get("children").filter(function($s){return $s.get("active")}),Ss=0,Ms=["getNodes","getEdges"];Ms.forEach(function($s){us[$s]().forEach(function(bs){var Cs=!1,As=$s==="getNodes"?xs:ms;As.forEach(function(Is){var ks=os[Is.get("id")];Cs=Cs||ks(bs.getModel())}),Cs?(us.setItemState(bs,fs,!1),us.setItemState(bs,ls,!0),Ss++):(us.setItemState(bs,ls,!1),us.setItemState(bs,fs,!0))})}),Ss||Ms.forEach(function($s){us[$s]().forEach(function(bs){us.clearItemStates(bs,[fs])})})}},ts.prototype.clearFilter=function(){var rs=this.get("graph"),as=this.get("filter");if(as){var os=as.graphActiveState||"active",is=as.graphInactiveState||"inactive";rs.getNodes().forEach(function(us){rs.clearItemStates(us,[os,is])}),rs.getEdges().forEach(function(us){rs.clearItemStates(us,[os,is])})}},ts.prototype.render=function(){var rs=this;this.processData();var as=this.get("legendCanvas");as?as.clear():as=new Canvas$1({container:this.get("container"),width:200,height:200});var os=as.addGroup({name:"root"}),is=os.addGroup({name:"node-group"}),us=os.addGroup({name:"edge-group"});this.set("legendCanvas",as);var ls=this.get("itemsData"),fs=["nodes","edges"],hs=[is,us];fs.forEach(function(qs,_l){ls[qs].forEach(function(Js){var Vs,Zs=hs[_l].addGroup({id:Js.id,name:"node-container"}),Sl,Il=Js.type,Nl=rs.getShapeSize(Js),Tl=Nl.width,_c=Nl.height,l0=Nl.r,g0=rs.getStyle(qs.substr(0,4),Js);switch(Js.type){case"circle":Sl={r:l0,x:0,y:0};break;case"rect":Sl={width:Tl,height:_c,x:-Tl/2,y:-_c/2};break;case"ellipse":Sl={rx:Tl,ry:_c,x:0,y:0},Il="ellipse";break;case"line":Sl={x1:-Tl/2,y1:0,x2:Tl/2,y2:0},Il="line";break;case"quadratic":Sl={path:[["M",-Tl/2,0],["Q",0,Tl/2,Tl/2,0]]},Il="path";break;case"cubic":Sl={path:[["M",-Tl/2,0],["C",-Tl/6,Tl/2,Tl/6,-Tl/2,Tl/2,0]]},Il="path";break;case"diamond":Sl={path:[["M",0,-_c],["L",Tl,0],["L",0,_c],["L",-Tl,0],["Z"]]},Il="path";break;case"triangle":Sl={path:[["M",-Tl,_c],["L",0,-_c],["L",Tl,_c],["Z"]]},Il="path";break;case"star":Sl={path:Util$1.getStarPath(l0*3,l0*1.2)},Il="path";break;default:Sl={r:l0,x:0,y:0};break}var R0=Zs.addShape(Il,{attrs:__assign$1(__assign$1({},Sl),g0),name:"".concat(Js.type,"-node-keyShape"),oriAttrs:__assign$1({opacity:1},g0)});if(Js.label){var V0=R0.getBBox(),U0=((Vs=Js.labelCfg)===null||Vs===void 0?void 0:Vs.style)||{},tv=__assign$1({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},U0);Zs.addShape("text",{attrs:__assign$1({x:V0.maxX+4,y:0,text:Js.label},tv),className:"legend-label",name:"".concat(Js.type,"-node-text"),oriAttrs:tv})}})});var vs=this.get("padding"),gs,ys=os.find(function(qs){return qs.get("name")==="title-container"}),xs={height:0,maxY:0,width:0};if(this.get("title")){ys||(ys=os.addGroup({name:"title-container"}));var ms={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:vs[0]},Ss=this.get("titleConfig")||{},Ms=Object.assign(ms,Ss.style||{});gs=ys.addShape("text",{attrs:__assign$1({text:this.get("title")},Ms)}),xs=ys.getCanvasBBox(),ys.setMatrix([1,0,0,0,1,0,Ss.offsetX,Ss.offsetY,1])}this.layoutItems();var $s=os.getCanvasBBox(),bs=is.getCanvasBBox(),Cs=bs.minX<0?Math.abs(bs.minX)+vs[3]:vs[3],As=xs.maxY<bs.minY?Math.abs(xs.maxY-bs.minY)+vs[0]:xs.maxY+vs[0],Is=[1,0,0,0,1,0,Cs,As,1];is.setMatrix(Is),$s=os.getCanvasBBox();var ks=[$s.minX+$s.width+vs[1],$s.minY+$s.height+vs[2]];if(gs){var Ss=__assign$1({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));xs=ys.getCanvasBBox();var Ps=ys.getMatrix()||[1,0,0,0,1,0,0,0,1];Ss.position==="center"?Ps[6]=ks[0]/2+Ss.offsetX:Ss.position==="right"?(Ps[6]=ks[0]-vs[3]+Ss.offsetX,gs.attr({textAlign:"right"})):(Ps[6]=vs[3]+Ss.offsetX,gs.attr({textAlign:"left"})),ys.setMatrix(Ps),xs=ys.getCanvasBBox(),Cs=bs.minX<0?Math.abs(bs.minX)+vs[3]:vs[3],As=bs.minY<xs.maxY?Math.abs(xs.maxY-bs.minY)+vs[0]:xs.maxY+vs[0],Is=[1,0,0,0,1,0,Cs,As,1],is.setMatrix(Is);var Ds=[1,0,0,0,1,0,Cs,As,1];this.get("layout")==="vertical"?Ds[6]+=bs.maxX+this.get("horiSep"):Ds[7]+=bs.maxY+this.get("vertiSep"),us.setMatrix(Ds)}else{bs=is.getCanvasBBox();var Fs=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?Fs[6]+=Is[6]+bs.maxX+this.get("horiSep"):Fs[7]+=Is[7]+bs.maxY+this.get("vertiSep"),us.setMatrix(Fs)}$s=os.getCanvasBBox(),bs=is.getCanvasBBox(),Is=is.getMatrix()||[1,0,0,0,1,0,0,0,1];var Rs=us.getMatrix()||[1,0,0,0,1,0,0,0,1],js=us.getCanvasBBox();ks=[Math.max(bs.width+Is[6],js.width+Rs[6])+vs[1],Math.max(bs.height+Is[7],js.height+Rs[7])+vs[2]],as.changeSize(ks[0],ks[1]);var zs=this.get("containerStyle"),Us=os.getMatrix()||[1,0,0,0,1,0,0,0,1],Ys=Util$1.invertMatrix({x:0,y:0},Us),Ks=os.addShape("rect",{attrs:__assign$1({x:Ys.x+(zs.lineWidth||1),y:Ys.y+(zs.lineWidth||1),width:ks[0]-2*(zs.lineWidth||1),height:ks[1]-2*(zs.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},zs),name:"legend-back-rect",capture:!1});return Ks.toBack(),ks},ts.prototype.layoutItems=function(){var rs=this.get("legendCanvas"),as=this.get("horiSep"),os=this.get("vertiSep"),is=this.get("layout"),us=this.get("align"),ls=[0,0],fs=rs.find(function(Cs){return Cs.get("name")==="root"}),hs=fs.find(function(Cs){return Cs.get("name")==="node-group"}),vs=fs.find(function(Cs){return Cs.get("name")==="edge-group"}),gs={min:0,max:-1/0};hs.get("children").forEach(function(Cs,As){As===0&&(gs.min=ls[0]);var Is=Cs.get("children")[0],ks=Cs.getCanvasBBox(),Ps=Is.getBBox(),Ds=Ps.width,Fs=Ps.height,Rs=0,js=0;is==="vertical"?(Rs=ls[1],js=ls[0]+Ds/2,ls[0]=js+ks.height+os,ks.maxX+Rs+Ds/2):(Rs=ls[0]+Ds/2,js=ls[1],ls[0]=Rs+ks.width+as,ks.maxY+js+Fs/2),ls[0]>gs.max&&(gs.max=ls[0]),Cs.setMatrix([1,0,0,0,1,0,Rs,js,1])});var ys=gs.max-gs.min,xs={min:0,max:-1/0},ms=hs.getCanvasBBox();ls[0]=0,ls[1]=is==="vertical"?ms.maxX+as:ms.maxY+os,vs.get("children").forEach(function(Cs,As){As===0&&(xs.min=ls[0]);var Is=Cs.get("children")[0],ks=Cs.getCanvasBBox(),Ps=Is.getBBox(),Ds=Ps.width,Fs=Ps.height,Rs=0,js=0;is==="vertical"?(Rs=ls[1],js=ls[0],ls[0]=js+ks.height+os,Cs.setMatrix([1,0,0,0,1,0,0,js+Fs/2,1])):(Rs=ls[0],js=ls[1],ls[0]=Rs+ks.width+as,Cs.setMatrix([1,0,0,0,1,0,Rs+Ds/2,0,1])),ls[0]>xs.max&&(xs.max=ls[0])});var Ss=xs.max-xs.min;if(us&&us!==""&&us!=="left"){var Ms=ys-Ss,$s=us==="center"?Math.abs(Ms)/2:Math.abs(Ms),bs=Ms<0?hs:vs;bs.get("children").forEach(function(Cs){var As=Cs.getMatrix()||[1,0,0,0,1,0,0,0,1];is==="vertical"?As[7]+=$s:As[6]+=$s,Cs.setMatrix(As)})}},ts.prototype.processData=function(){var rs=this.get("data"),as={nodes:[],edges:[]};rs.nodes&&(rs.nodes.sort(function(os,is){return os.order-is.order}),rs.nodes.forEach(function(os){var is,us,ls,fs,hs,vs=os.size||[((is=os.style)===null||is===void 0?void 0:is.width)||((us=os.style)===null||us===void 0?void 0:us.r)||8,((ls=os.style)===null||ls===void 0?void 0:ls.height)||((fs=os.style)===null||fs===void 0?void 0:fs.r)||8],gs=((hs=os.labelCfg)===null||hs===void 0?void 0:hs.style)||{};as.nodes.push({id:os.id||uniqueId$5(),type:os.type||"circle",style:__assign$1({},os.style),order:os.order,label:os.label,itemType:"node",size:vs,labelCfg:{position:"right",style:__assign$1({fontFamily:"Arial"},gs)}})})),rs.edges&&(rs.edges.sort(function(os,is){return os.order-is.order}),rs.edges.forEach(function(os){var is,us,ls=os.type||"line";os.type==="cubic-horizontal"&&(ls="cubic");var fs=((is=os.labelCfg)===null||is===void 0?void 0:is.style)||{},hs=os.size||[((us=os.style)===null||us===void 0?void 0:us.width)||8,1];as.edges.push({id:os.id||uniqueId$5(),type:ls,size:hs,style:__assign$1({lineWidth:isArray$2(hs)?hs[1]:1},os.style),order:os.order,label:os.label,itemType:"edge",labelCfg:{position:"right",style:__assign$1({fontFamily:"Arial"},fs)}})})),this.set("itemsData",as)},ts.prototype.getContainer=function(){return this.get("container")},ts.prototype.formatArray=function(rs){var as=this.get(rs);if(isNumber$3(as))this.set(rs,[as,as,as,as]);else if(isArray$2(as))switch(as.length){case 0:this.set(rs,[0,0,0,0]);break;case 1:this.set(rs,[as[0],as[0],as[0],as[0]]);break;case 2:this.set(rs,[as[0],as[1],as[0],as[1]]);break;case 3:this.set(rs,[as[0],as[1],as[2],as[1]]);break}return this.get(rs)},ts.prototype.getShapeSize=function(rs){var as,os,is;return rs.size&&(isArray$2(rs.size)?(as=rs.size[0],os=rs.size[1]||rs.size[0],is=rs.size[0]/2):isNumber$3(rs.size)&&(as=rs.size,os=rs.size,is=rs.size/2)),rs.style&&(rs.style.width&&(as=rs.style.width),rs.style.height&&(os=rs.style.height),rs.style.r&&(is=rs.style.r)),is||(is=5),as||(as=is),os||(os=is),{width:as,height:os,r:is}},ts.prototype.getStyle=function(rs,as){var os=rs==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return __assign$1(__assign$1({},os),as.style||{})},ts.prototype.destroy=function(){var rs=this.get("legendCanvas");rs==null||rs.destroy();var as=this.get("graph"),os=as.get("container"),is=this.get("container");os.removeChild(is)},ts}(PluginBase$1);const Legend$1=Legend;var __extends=function(){var ns=function(rs,as){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(os,is){os.__proto__=is}||function(os,is){for(var us in is)Object.prototype.hasOwnProperty.call(is,us)&&(os[us]=is[us])},ns(rs,as)};return function(ts,rs){if(typeof rs!="function"&&rs!==null)throw new TypeError("Class extends value "+String(rs)+" is not a constructor or null");ns(ts,rs);function as(){this.constructor=ts}ts.prototype=rs===null?Object.create(rs):(as.prototype=rs.prototype,new as)}}(),__assign=function(){return __assign=Object.assign||function(ns){for(var ts,rs=1,as=arguments.length;rs<as;rs++){ts=arguments[rs];for(var os in ts)Object.prototype.hasOwnProperty.call(ts,os)&&(ns[os]=ts[os])}return ns},__assign.apply(this,arguments)},__rest=function(ns,ts){var rs={};for(var as in ns)Object.prototype.hasOwnProperty.call(ns,as)&&ts.indexOf(as)<0&&(rs[as]=ns[as]);if(ns!=null&&typeof Object.getOwnPropertySymbols=="function")for(var os=0,as=Object.getOwnPropertySymbols(ns);os<as.length;os++)ts.indexOf(as[os])<0&&Object.prototype.propertyIsEnumerable.call(ns,as[os])&&(rs[as[os]]=ns[as[os]]);return rs};typeof document<"u"&&insertCss$1(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var CANVAS_ANNOTATION_ID="canvas-annotation",Annotation$1=function(ns){__extends(ts,ns);function ts(rs){return ns.call(this,rs)||this}return ts.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},ts.prototype.getEvents=function(){var rs={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":rs=__assign(__assign({},rs),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return rs},ts.prototype.getDOMContent=function(rs){if(!this.destroyed){var as=rs.collapsed,os=rs.maxWidth,is=rs.title,us=is===void 0?"":is,ls=rs.content,fs=ls===void 0?"":ls,hs=rs.borderRadius,vs=hs===void 0?5:hs,gs=as?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",ys=as?"":" <p class='g6-annotation-content'>".concat(fs,"</p>"),xs="<p class='g6-annotation-close'>x</p>",ms=as?"".concat(vs,"px"):"".concat(vs,"px ").concat(vs,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(vs,"px; max-width: ").concat(os,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(ms,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(us,`</h4>
          `).concat(gs,`
          `).concat(xs,`
        </div>
        `).concat(ys,`
      </div>`)}},ts.prototype.init=function(){var rs=this;if(!rs.destroyed){var as=rs.get("graph"),os=as.getContainer(),is=rs.get("container"),us=this.get("containerCfg");us?(is=this.createContainer(),os.appendChild(is)):is=os,this.set("container",is);var ls=os.getBoundingClientRect(),fs=new Canvas$1({container:os,width:ls.right-ls.left,height:ls.bottom-ls.top});modifyCSS$1(fs.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",debounce$1(function(){return rs.resizeCanvas(rs)},100));var hs=fs.addGroup({id:"annotation-link-group"});rs.set("linkGroup",hs),rs.set("canvas",fs),rs.get("getTitle")||rs.set("getTitle",function(gs){var ys,xs=((ys=gs==null?void 0:gs.getModel)===null||ys===void 0?void 0:ys.call(gs))||{},ms=xs.label,Ss=xs.id;return ms||Ss||"-"}),rs.get("getContent")||rs.set("getContent",function(gs){var ys,xs;if(!gs)return"-";var ms=((ys=gs.getModel)===null||ys===void 0?void 0:ys.call(gs))||{},Ss=ms.label,Ms=ms.id,$s=(xs=gs.getType)===null||xs===void 0?void 0:xs.call(gs),bs=$s?"".concat($s,": "):"";return"".concat(bs).concat(Ss||Ms||"")});var vs=rs.get("defaultData");vs&&this.readData(vs)}},ts.prototype.createContainer=function(){var rs=this;if(!this.destroyed){var as=this.get("containerCfg"),os=this.get("graph"),is=os.getContainer(),us=is.getBoundingClientRect(),ls=us.left,fs=us.right,hs=us.top,vs=us.bottom,gs=vs-hs,ys=fs-ls,xs=as.position,ms=xs===void 0?"top":xs,Ss=as.offsetX,Ms=Ss===void 0?0:Ss,$s=as.offsetY,bs=$s===void 0?0:$s,Cs=__rest(as,["position","offsetX","offsetY"]),As=as.height,Is=As===void 0?"fit-content":As,ks=as.width,Ps=ks===void 0?os.getWidth():ks;Is==="100%"&&(Is=gs),Ps==="100%"&&(Ps=ys);var Ds="unset",Fs="unset",Rs={};switch(ms){case"right":Ds="".concat(gs,"px"),Rs={top:0,right:0},Rs.right+=ls+Ms,Rs.top+=hs+bs;break;case"bottom":Fs="".concat(ys,"px"),Rs={bottom:0,left:0},Rs.left+=ls+Ms,Rs.bottom+=hs+bs;break;case"top":Fs="".concat(ys,"px");case"left":Ds="".concat(gs,"px");default:Rs={top:0,left:0},Rs.left+=ls+Ms,Rs.top+=hs+bs;break}Object.keys(Rs).forEach(function(zs){Rs[zs]="".concat(Rs[zs],"px")});var js=createDom("<div class='".concat(as.className," g6-annotation-container'></div>"));return modifyCSS$1(js,__assign(__assign({position:"absolute",display:ms==="top"||ms==="bottom"?"inline-flex":"unset",width:isNumber$3(Ps)?"".concat(Ps,"px"):Ps,height:isNumber$3(Is)?"".concat(Is,"px"):Is,maxHeight:Ds,maxWidth:Fs,overflow:"scroll"},Rs),Cs)),is.appendChild(js),js.addEventListener("scroll",function(zs){rs.updateLinks()}),js}},ts.prototype.resizeCanvas=function(rs){clearTimeout(rs.resizeTimer),rs.resizeTimer=setTimeout(function(){if(!(!rs||rs.destroyed)){var as=rs.get("container").getBoundingClientRect(),os=as.right-as.left,is=as.bottom-as.top;rs.get("canvas").changeSize(os,is),rs.updateOutsideCards(rs)}},250)},ts.prototype.updateOutsideCards=function(rs){var as=rs||this,os=as.get("cardInfoMap")||{},is=as.get("graph"),us=is.getPointByCanvas(0,0),ls=is.getPointByCanvas(is.getWidth(),is.getHeight()),fs=is.getClientByPoint(us.x,us.y),hs=fs.x,vs=fs.y,gs=is.getClientByPoint(ls.x,ls.y),ys=gs.x,xs=gs.y;Object.values(os).forEach(function(ms){var Ss=ms.card;if(Ss){var Ms=Ss.style,$s=px2Num(Ms.left),bs=px2Num(Ms.top),Cs=Ss.getBoundingClientRect(),As=Cs.width,Is=Cs.height,ks=$s,Ps=bs;$s+As>ys-hs&&(ks=ys-hs-As),$s<0&&(ks=0),bs+Is>xs-vs&&(Ps=xs-vs-Is),bs<0&&(Ps=0),modifyCSS$1(Ss,{left:"".concat(ks,"px"),top:"".concat(Ps,"px")})}}),as.updateLinks()},ts.prototype.showAnnotation=function(rs){if(!this.destroyed){var as=rs.item;this.toggleAnnotation(as)}},ts.prototype.hideCards=function(){var rs=this;if(!rs.destroyed){var as=rs.get("cardInfoMap")||{};Object.keys(as).forEach(function(os){rs.hideCard(os)})}},ts.prototype.toggleAnnotation=function(rs,as){var os,is;as===void 0&&(as={});var us=this;if(!us.destroyed){var ls=us.get("cardInfoMap")||{},fs=us.get("graph"),hs=us.get("container"),vs=us.get("containerCfg"),gs=Object.assign({},us.get("cardCfg")||{},as),ys=gs.minHeight,xs=gs.minWidth,ms=gs.width,Ss=gs.height,Ms=gs.collapsed,$s=Ms===void 0?!1:Ms,bs=gs.x,Cs=gs.y,As=gs.title,Is=gs.content,ks=gs.maxTitleLength,Ps=gs.defaultBegin,Ds=__rest(gs,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),Fs=us.get("linkGroup"),Rs=this.get("rows")||[[]],js=(os=rs.isCanvas)===null||os===void 0?void 0:os.call(rs),zs=js?CANVAS_ANNOTATION_ID:rs.getID(),Us=ls[zs]||{},Ys=Us.card,Ks=Us.link,qs=Us.x,_l=Us.y,Js=Us.title,Vs=Us.content,Zs=this.get("getTitle"),Sl=this.get("getContent"),Il=this.get("getContentPlaceholder")||function(){return""},Nl=this.get("getTitlePlaceHolder")||function(){return""},Tl=Il(rs),_c=Nl(rs),l0=createDom(this.getDOMContent(__assign({itemId:zs,collapsed:$s,title:((is=Js||As||(Zs==null?void 0:Zs(rs)))===null||is===void 0?void 0:is.substr(0,ks))||_c,content:Vs||Is||(Sl==null?void 0:Sl(rs))||Tl},Ds))),g0=isNumber$3(ys)?"".concat(ys,"px"):ys;modifyCSS$1(l0,{minHeight:$s?"unset":g0,minWidth:isNumber$3(xs)?"".concat(xs,"px"):xs,height:Ss,width:ms});var R0=!!Ys;R0?(Ks==null||Ks.remove(!0),hs.replaceChild(l0,Ys)):hs.appendChild(l0);var V0;if(!vs){if(V0=hs.getBoundingClientRect()||{},bs!==void 0&&Cs!==void 0)qs=bs,_l=Cs;else if(!R0&&!js){var U0=V0.top,tv=Ps||{},Os=tv.left,ov=tv.right,$v=ov===void 0?16:ov,Lv=tv.top,Jv=Lv===void 0?8:Lv,Yv=tv.bottom,Pv=$v,jv=Jv;isNaN(Os)||(Pv=hs.scrollWidth-Os),isNaN(Yv)||(jv=hs.scrollHeight-Yv);var wp=isNumber$3(xs)?xs:100;qs=hs.scrollWidth-l0.scrollWidth-(Rs.length-1)*wp-Pv;var j0=Rs[Rs.length-1],Ul=(j0[j0.length-1]||{}).bbox;_l=(Ul==null?void 0:Ul.bottom)-U0||jv}modifyCSS$1(l0,{position:"absolute",left:"".concat(qs,"px"),top:"".concat(_l,"px"),cusor:vs?"unset":"move"})}this.bindListener(l0,zs);var Xs=l0.getBoundingClientRect();if(!js){var d0=getPathItem2Card(rs,Xs,fs,this.get("canvas")),M0=this.get("linkStyle");Ks=Fs.addShape("path",{attrs:__assign({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:d0},M0)})}if(ls[zs]=__assign(__assign({},ls[zs]||{}),{id:zs,collapsed:$s,card:l0,link:Ks,x:qs,y:_l,cardBBox:Xs,content:Vs||Is,title:Js||As,contentPlaceholder:Tl,titlePlaceholder:_c,isCanvas:js}),us.set("cardInfoMap",ls),vs)this.updateCardPositionsInConatainer(),this.updateLinks();else{var i0=!isNaN(bs)&&!isNaN(Cs);if(!R0&&!js&&!i0){var k0=V0.bottom,P0=k0===void 0?0:k0,U0=V0.top;Rs[Rs.length-1].push({id:zs,bbox:Xs}),Xs.top>P0-U0-Xs.height-16&&Rs.push([]),this.set("rows",Rs)}}this.updateCardSize(zs);var B0=this.get("onAnnotationChange");B0==null||B0(ls[zs],R0?"update":"create")}},ts.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var rs=this.get("cardInfoMap");if(rs){var as=this.get("container"),os=this.get("containerCfg").position,is=as.getBoundingClientRect().width,us=getComputedStyle(as),ls=px2Num(us.paddingLeft)+px2Num(us.paddingRight);is-=ls,Object.values(rs).forEach(function(fs){var hs=fs.card,vs=hs.getBoundingClientRect().width;switch(os){case"right":modifyCSS$1(hs,{marginLeft:is?"".concat(is-vs,"px"):"0px"});break;case"top":case"bottom":modifyCSS$1(hs,{marginLeft:"8px"})}})}}},ts.prototype.handleExpandCollapseCard=function(rs){if(!this.destroyed){var as=this.get("graph"),os=this.get("cardInfoMap");if(os){var is=os[rs].collapsed,us=as.findById(rs);if(us){var ls=this.get("cardCfg").collapseType;ls==="hide"&&!is?this.hideCard(rs):this.toggleAnnotation(us,{collapsed:!is}),os[rs]=__assign(__assign({},os[rs]),{collapsed:!is})}}}},ts.prototype.hideCard=function(rs){if(!this.destroyed){var as=this.get("cardInfoMap");if(!(!as||!as[rs])){var os=as[rs],is=os.card,us=os.link;modifyCSS$1(is,{display:"none"}),us==null||us.hide();var ls=this.get("onAnnotationChange");ls(as[rs],"hide")}}},ts.prototype.removeCard=function(rs){if(!this.destroyed){var as=this.get("cardInfoMap");if(as){var os=as[rs],is=os.card,us=os.link,ls=this.get("container");ls.removeChild(is),us==null||us.remove(!0),delete as[rs];var fs=this.get("onAnnotationChange");fs(os,"remove")}}},ts.prototype.bindListener=function(rs,as){var os=this;if(!this.destroyed){rs.addEventListener("mousemove",function(fs){var hs;if(fs.target.className==="g6-annotation-collapse"?hs="collapse":fs.target.className==="g6-annotation-expand"?hs="expand":fs.target.className==="g6-annotation-close"&&(hs="close"),hs){var vs=os.get("cardCfg").onMouseEnterIcon,gs=vs===void 0?function(){}:vs;gs(fs,as,hs)}}),rs.addEventListener("mouseout",function(fs){var hs;if(fs.target.className==="g6-annotation-collapse"?hs="collapse":fs.target.className==="g6-annotation-expand"?hs="expand":fs.target.className==="g6-annotation-close"&&(hs="close"),hs){var vs=os.get("cardCfg").onMouseLeaveIcon,gs=vs===void 0?function(){}:vs;gs(fs,as,hs)}}),rs.addEventListener("mouseenter",function(fs){var hs=os.get("cardInfoMap");if(hs){var vs=os.get("graph"),gs=vs.findById(as);if(gs){var ys=os.get("itemHighlightState");vs.setItemState(gs,ys,!0)}var xs=hs[as].link;if(xs){var ms=os.get("linkHighlightStyle")||{};xs.attr(ms)}}}),rs.addEventListener("mouseleave",function(fs){var hs=os.get("cardInfoMap");if(hs){var vs=os.get("graph"),gs=vs.findById(as);if(gs){var ys=os.get("itemHighlightState");vs.setItemState(gs,ys,!1)}var xs=hs[as].link;if(xs){var ms=os.get("linkHighlightStyle")||{};Object.keys(ms).forEach(function(Ms){xs.attr(Ms,void 0),xs.attr(Ms,void 0)});var Ss=os.get("linkStyle");xs.attr(Ss)}}}),rs.addEventListener("click",function(fs){var hs=(os.get("cardCfg")||{}).onClickIcon;if(fs.target.className==="g6-annotation-collapse"||fs.target.className==="g6-annotation-expand"){var vs=os.get("cardCfg").collapseType;vs==="hide"?os.hideCard(as):os.handleExpandCollapseCard(as),hs==null||hs(fs,as,fs.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(fs.target.className==="g6-annotation-close"){var gs=os.get("cardCfg").closeType;gs==="remove"?os.removeCard(as):os.hideCard(as),hs==null||hs(fs,as,"close")}});var is=this.get("editable");is&&rs.addEventListener("dblclick",function(fs){var hs=os.get("cardInfoMap"),vs=(os.get("cardCfg")||{}).maxTitleLength,gs=vs===void 0?20:vs;if(hs){var ys=fs.target,xs=ys.className;if(!(xs!=="g6-annotation-title"&&xs!=="g6-annotation-content")){var ms=xs==="g6-annotation-title"?ys.getBoundingClientRect():ys.parentNode.getBoundingClientRect(),Ss=ms.width,Ms=ms.height,$s=getComputedStyle(ys),bs=xs==="g6-annotation-title"?"input":"textarea",Cs=createDom("<".concat(bs,' class="').concat(xs,'-input" type="textarea" style="width:').concat(Ss,"px; height: ").concat(Ms,'px; min-width: 16px;"/>')),As=createDom('<div class="'.concat(xs,'-input-wrapper" style="width: ').concat(Ss,"px; height: ").concat(Ms,"px; min-width: 16px; margin-right: ").concat($s.marginRight,'" />'));As.appendChild(Cs),ys.parentNode.replaceChild(As,ys);var Is=hs[as],ks=Is.contentPlaceholder,Ps=Is.titlePlaceholder,Ds=Is.content,Fs=Is.title,Rs=Ds;xs==="g6-annotation-title"?(Cs.name="title",Cs.maxLength=gs,Rs=Fs):Cs.name="content",Rs?(Cs.innerHTML=ys.innerHTML,Cs.value=ys.innerHTML):Cs.placeholder=xs==="g6-annotation-title"?Ps:ks,Cs.focus(),Cs.addEventListener("blur",function(js){Cs.value&&(ys.innerHTML=Cs.value,Is[Cs.name||"title"]=Cs.value),As.parentNode.replaceChild(ys,As),os.updateCardSize(as);var zs=os.get("onAnnotationChange");zs==null||zs(Is,"update")})}}});var us=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];rs.draggable=!0,rs.addEventListener("dragstart",function(fs){var hs=fs.target.className;if(!us.includes(hs)){var vs=rs.style;os.set("dragging",{card:rs,x:fs.clientX,y:fs.clientY,left:px2Num(vs.left),top:px2Num(vs.top)})}}),rs.addEventListener("drag",function(fs){fs.preventDefault();var hs=os.get("cardInfoMap");if(hs){var vs=fs.clientX,gs=fs.clientY,ys=os.get("dragging");if(!(isNaN(vs)||isNaN(gs)||!ys)){var xs=ys.x,ms=ys.y,Ss=ys.left,Ms=ys.top,$s=ys.card,bs=vs-xs,Cs=gs-ms;Ss+=bs,Ms+=Cs;var As=os.get("graph"),Is=As.getPointByCanvas(0,0),ks=As.getPointByCanvas(As.getWidth(),As.getHeight()),Ps=As.getClientByPoint(Is.x,Is.y),Ds=Ps.x,Fs=Ps.y,Rs=As.getClientByPoint(ks.x,ks.y),js=Rs.x,zs=Rs.y,Us=$s.getBoundingClientRect(),Ys=Us.right-Us.left,Ks=Us.bottom-Us.top;(Ss>js-Ds-Ys&&bs>0||Ss<0&&bs<0)&&(Ss-=bs),(Ms>zs-Fs-Ks&&Cs>0||Ms<0&&Cs<0)&&(Ms-=Cs),modifyCSS$1($s,{left:"".concat(Ss,"px"),top:"".concat(Ms,"px"),visibility:"hidden"}),xs=vs,ms=gs;var qs=(hs[as]||{}).link;if(qs){var _l=As.findById(as);qs.attr("path",getPathItem2Card(_l,Us,As,os.get("canvas")))}os.set("dragging",{x:xs,y:ms,left:Ss,top:Ms,card:$s})}}});var ls=function(hs){var vs=os.get("cardInfoMap");if(vs){var gs=os.get("dragging");if(gs){var ys=gs.left,xs=gs.top,ms=gs.card;vs[as].x=ys,vs[as].y=xs,modifyCSS$1(ms,{visibility:"visible"}),os.set("dragging",!1);var Ss=os.get("rows");Ss==null||Ss.forEach(function($s){for(var bs=$s.length-1;bs>=0;bs--)$s[bs].id===as&&$s.splice(bs,1)});var Ms=os.get("onAnnotationChange");Ms==null||Ms(vs[as],"update")}}};rs.addEventListener("dragend",ls)}},ts.prototype.updateCardSize=function(rs){var as=this.get("cardInfoMap");if(as){var os=as[rs].card,is=os.getBoundingClientRect().width,us=os.getElementsByClassName("g6-annotation-title")[0];if(us){var ls=getComputedStyle(us),fs=px2Num(ls.marginLeft),hs=us.getBoundingClientRect().width;modifyCSS$1(us,{marginRight:"".concat(is-fs-24-16-hs,"px")})}}},ts.prototype.updateLink=function(rs){var as=rs.item;if(as){var os=this.get("cardInfoMap");if(os){var is=this.get("canvas"),us=this.get("graph"),ls=as.getID(),fs=os[ls]||{},hs=fs.link,vs=fs.card;if(hs){var gs=getPathItem2Card(as,vs.getBoundingClientRect(),us,is);hs.attr("path",gs)}}}},ts.prototype.updateLinks=function(){var rs=this;if(!this.destroyed){var as=this.get("cardInfoMap");if(as){var os=this.get("graph");Object.values(as).forEach(function(is){var us=is.id,ls=os.findById(us);rs.updateLink({item:ls})})}}},ts.prototype.onGraphDataChange=function(){var rs=this,as=this.get("cardInfoMap");if(as){var os=this.get("graph");Object.values(as).forEach(function(is){var us=is.id,ls=is.card,fs=is.isCanvas;if(!(!ls||fs||ls.style.display==="none")){var hs=os.findById(us);hs&&hs.isVisible()?rs.toggleAnnotation(hs):rs.hideCard(us)}})}},ts.prototype.onGraphItemVisibilityChange=function(rs){var as=rs.item,os=rs.visible;if(!(!as||as.destroyed)){var is=this.get("cardInfoMap");if(is){var us=as.getID();is[us]&&(os||this.hideCard(us))}}},ts.prototype.saveData=function(rs){rs===void 0&&(rs=!1);var as=this.get("cardInfoMap");if(as){var os=this.get("graph"),is=this.get("getTitle"),us=this.get("getContent"),ls=[];return Object.values(as).forEach(function(fs){var hs=fs.title,vs=fs.content,gs=fs.x,ys=fs.y,xs=fs.id,ms=fs.collapsed,Ss=fs.card;if(!(Ss&&Ss.style.display==="none"&&!rs)){var Ms=os.findById(xs)||os.get("canvas");ls.push({id:xs,x:gs,y:ys,collapsed:ms,title:hs||(is==null?void 0:is(Ms)),content:vs||(us==null?void 0:us(Ms)),visible:Ss&&Ss.style.display!=="none"})}}),ls}},ts.prototype.readData=function(rs){var as=this,os=this.get("graph");rs.forEach(function(is){var us=is.id,ls=is.x,fs=is.y,hs=is.title,vs=is.content,gs=is.collapsed,ys=is.visible,xs=os.findById(us);if(!xs&&us===CANVAS_ANNOTATION_ID&&(xs=os.get("canvas")),!xs){var ms=as.get("cardInfoMap")||{};ms[us]=is,as.set("cardInfoMap",ms);return}as.toggleAnnotation(xs,{x:ls,y:fs,title:hs,content:vs,collapsed:gs}),ys||as.hideCard(us)})},ts.prototype.clear=function(){var rs=this.get("cardInfoMap");if(rs){var as=this.get("container");Object.values(rs).forEach(function(os){var is=os.card,us=os.link;as.removeChild(is),us==null||us.remove(!0)}),this.set("cardInfoMap",{})}},ts.prototype.destroy=function(){var rs;this.clear(),(rs=this.get("canvas"))===null||rs===void 0||rs.destroy();var as=this.get("graph");!as||as.destroyed||(this.get("containerCfg")&&as.getContainer().removeChild(this.get("container")),this.destroyed=!0)},ts}(PluginBase$1);const Annotation$2=Annotation$1;var getPath=function(ts,rs){var as,os,is=1/0;Object.keys(ts).forEach(function(fs){var hs=ts[fs];Object.keys(rs).forEach(function(vs){var gs=rs[vs],ys=hs.x-gs.x,xs=hs.y-gs.y,ms=ys*ys+xs*xs;is>ms&&(is=ms,as=hs,os=gs)})});var us=20,ls=Util$1.getControlPoint(as,os,.5,us);return[["M",as.x,as.y],["Q",ls.x,ls.y,os.x,os.y]]},getPathItem2Card=function(ts,rs,as,os){var is,us,ls=ts.getType();if(ls==="edge")us=[ts.getKeyShape().getPoint(.5)];else{var fs=(is=ts.getKeyShape)===null||is===void 0?void 0:is.call(ts).getBBox(),hs=fs.minX,vs=fs.minY,gs=fs.maxX,ys=fs.maxY,xs=ts.getModel(),ms=xs.x,Ss=xs.y;hs+=ms,vs+=Ss,gs+=ms,ys+=Ss,us={left:{x:hs,y:(vs+ys)/2},right:{x:gs,y:(vs+ys)/2},top:{x:(hs+gs)/2,y:vs},bottom:{x:(hs+gs)/2,y:ys}}}Object.keys(us).forEach(function(Fs){var Rs=us[Fs],js=Rs.x,zs=Rs.y,Us=as.getClientByPoint(js,zs);us[Fs]=os.getPointByClient(Us.x,Us.y)});var Ms=rs.top,$s=Ms===void 0?0:Ms,bs=rs.left,Cs=bs===void 0?0:bs,As=rs.right,Is=As===void 0?0:As,ks=rs.bottom,Ps=ks===void 0?0:ks,Ds={left:os.getPointByClient(Cs,($s+Ps)/2),right:os.getPointByClient(Is,($s+Ps)/2),top:os.getPointByClient((Cs+Is)/2,$s),bottom:os.getPointByClient((Cs+Is)/2,Ps)};return getPath(us,Ds)},px2Num=function(ts){return Number(ts.replace(/\s+|px/gi,""))||0},Plugin={PluginBase:PluginBase$1,Menu:Menu$1,Grid:Grid$1,Minimap,Bundling:Bundling$1,ToolBar:ToolBar$1,Tooltip:Tooltip$2,Fisheye:Fisheye$2,TimeBar:TimeBar$2,ImageMinimap:ImageMinimap$1,EdgeFilterLens:EdgeFilterLens$2,SnapLine:SnapLine$2,Legend:Legend$1,Annotation:Annotation$2};const Plugin$1=Plugin;registerNode("circle",{options:{size:BaseGlobal$1.defaultNode.size,style:{x:0,y:0,stroke:BaseGlobal$1.defaultNode.style.stroke,fill:BaseGlobal$1.defaultNode.style.fill,lineWidth:BaseGlobal$1.defaultNode.style.lineWidth},labelCfg:{style:{fill:BaseGlobal$1.nodeLabel.style.fill,fontSize:BaseGlobal$1.nodeLabel.style.fontSize,fontFamily:BaseGlobal$1.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:BaseGlobal$1.defaultNode.linkPoints.size,lineWidth:BaseGlobal$1.defaultNode.linkPoints.lineWidth,fill:BaseGlobal$1.defaultNode.linkPoints.fill,stroke:BaseGlobal$1.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:__assign$h({},BaseGlobal$1.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).icon,os=as===void 0?{}:as,is=this.getShapeStyle(ts),us=deepMix$2({},os,ts.icon),ls="".concat(this.type,"-keyShape"),fs=rs.addShape("circle",{attrs:is,className:ls,name:ls,draggable:!0});rs.shapeMap[ls]=fs;var hs=us.width,vs=us.height,gs=us.show,ys=us.text;if(gs){var xs="".concat(this.type,"-icon");ys?rs.shapeMap[xs]=rs.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},us),className:xs,name:xs,draggable:!0}):rs.shapeMap[xs]=rs.addShape("image",{attrs:__assign$h({x:-hs/2,y:-vs/2},us),className:xs,name:xs,draggable:!0})}return this.drawLinkPoints(ts,rs),fs},drawLinkPoints:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).linkPoints;if(as){var os=as||{},is=os.top,us=os.left,ls=os.right,fs=os.bottom,hs=os.size,vs=os.r,gs=__rest$2(os,["top","left","right","bottom","size","r"]),ys=this.getSize(ts),xs=ys[0]/2;if(us){var ms="link-point-left";rs.shapeMap[ms]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:-xs,y:0,r:hs/2||vs||5}),className:ms,name:ms,isAnchorPoint:!0})}if(ls){var Ss="link-point-right";rs.shapeMap[Ss]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:xs,y:0,r:hs/2||vs||5}),className:Ss,name:Ss,isAnchorPoint:!0})}if(is){var Ms="link-point-top";rs.shapeMap[Ms]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:0,y:-xs,r:hs/2||vs||5}),className:Ms,name:Ms,isAnchorPoint:!0})}if(fs){var $s="link-point-bottom";rs.shapeMap[$s]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:0,y:xs,r:hs/2||vs||5}),className:$s,name:$s,isAnchorPoint:!0})}}},getShapeStyle:function(ts){var rs=(this.mergeStyle||this.getOptions(ts)).style,as={stroke:ts.color},os=deepMix$2({},rs,as),is=this.getSize(ts),us=is[0]/2,ls=__assign$h({x:0,y:0,r:us},os);return ls},update:function(ts,rs,as){var os=rs.getContainer(),is=this.getSize(ts),us=__assign$h({},ts.style);ts.style.stroke===void 0&&ts.color&&(us.stroke=ts.color),ts.style.r===void 0&&!isNaN(is[0])&&(us.r=is[0]/2),this.updateShape(ts,rs,us,!0,as),this.updateLinkPoints(ts,os)}},"single-node");registerNode("rect",{options:{size:[100,30],style:{radius:0,stroke:BaseGlobal$1.defaultNode.style.stroke,fill:BaseGlobal$1.defaultNode.style.fill,lineWidth:BaseGlobal$1.defaultNode.style.lineWidth},labelCfg:{style:{fill:BaseGlobal$1.nodeLabel.style.fill,fontSize:BaseGlobal$1.nodeLabel.style.fontSize,fontFamily:BaseGlobal$1.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:BaseGlobal$1.defaultNode.linkPoints.size,lineWidth:BaseGlobal$1.defaultNode.linkPoints.lineWidth,fill:BaseGlobal$1.defaultNode.linkPoints.fill,stroke:BaseGlobal$1.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:__assign$h({},BaseGlobal$1.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(ts,rs){var as=this.getShapeStyle(ts),os=rs.addShape("rect",{attrs:as,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return rs.shapeMap["".concat(this.type,"-keyShape")]=os,this.drawLinkPoints(ts,rs),os},drawLinkPoints:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).linkPoints,os=as===void 0?{}:as,is=os.top,us=os.left,ls=os.right,fs=os.bottom,hs=os.size,vs=os.r,gs=__rest$2(os,["top","left","right","bottom","size","r"]),ys=this.getSize(ts),xs=ys[0],ms=ys[1];us&&(rs.shapeMap["link-point-left"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:-xs/2,y:0,r:hs/2||vs||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),ls&&(rs.shapeMap["link-point-right"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:xs/2,y:0,r:hs/2||vs||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),is&&(rs.shapeMap["link-point-top"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:0,y:-ms/2,r:hs/2||vs||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),fs&&(rs.shapeMap["link-point-bottom"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:0,y:ms/2,r:hs/2||vs||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(ts){var rs=(this.mergeStyle||this.getOptions(ts)).style,as={stroke:ts.color},os=mix$1({},rs,as),is=this.getSize(ts),us=os.width||is[0],ls=os.height||is[1],fs=__assign$h({x:-us/2,y:-ls/2,width:us,height:ls},os);return fs},update:function(ts,rs,as){var os=rs.getContainer(),is=this.getOptions({}).style,us=this.getSize(ts),ls=rs.get("keyShape");ts.size||(us[0]=ls.attr("width")||is.width,us[1]=ls.attr("height")||is.height);var fs={stroke:ts.color,x:-us[0]/2,y:-us[1]/2,width:us[0],height:us[1]},hs=mix$1({},is,ls.attr(),fs);hs=mix$1(hs,ts.style),this.updateShape(ts,rs,hs,!1,as),this.updateLinkPoints(ts,os)}},"single-node");registerNode("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:BaseGlobal$1.defaultNode.style.stroke,fill:BaseGlobal$1.defaultNode.style.fill,lineWidth:BaseGlobal$1.defaultNode.style.lineWidth},labelCfg:{style:{fill:BaseGlobal$1.nodeLabel.style.fill,fontSize:BaseGlobal$1.nodeLabel.style.fontSize,fontFamily:BaseGlobal$1.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:BaseGlobal$1.defaultNode.linkPoints.size,lineWidth:BaseGlobal$1.defaultNode.linkPoints.lineWidth,fill:BaseGlobal$1.defaultNode.linkPoints.fill,stroke:BaseGlobal$1.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:__assign$h({},BaseGlobal$1.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).icon,os=as===void 0?{}:as,is=this.getShapeStyle(ts),us=rs.addShape("ellipse",{attrs:is,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});rs.shapeMap["ellipse-keyShape"]=us;var ls=os.width,fs=os.height,hs=os.show,vs=os.text;return hs&&(vs?rs.shapeMap["".concat(this.type,"-icon")]=rs.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},os),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):rs.shapeMap["".concat(this.type,"-icon")]=rs.addShape("image",{attrs:__assign$h({x:-ls/2,y:-fs/2},os),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(ts,rs),us},drawLinkPoints:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).linkPoints,os=as===void 0?{}:as,is=os.top,us=os.left,ls=os.right,fs=os.bottom,hs=os.size,vs=os.r,gs=__rest$2(os,["top","left","right","bottom","size","r"]),ys=this.getSize(ts),xs=ys[0]/2,ms=ys[1]/2;us&&(rs.shapeMap["link-point-left"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:-xs,y:0,r:hs/2||vs||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),ls&&(rs.shapeMap["link-point-right"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:xs,y:0,r:hs/2||vs||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),is&&(rs.shapeMap["link-point-top"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:0,y:-ms,r:hs/2||vs||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),fs&&(rs.shapeMap["link-point-bottom"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:0,y:ms,r:hs/2||vs||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(ts){var rs=(this.mergeStyle||this.getOptions(ts)).style,as={stroke:ts.color},os=mix$1({},rs,as),is=this.getSize(ts),us=is[0]/2,ls=is[1]/2,fs=__assign$h({x:0,y:0,rx:us,ry:ls},os);return fs},update:function(ts,rs,as){var os=rs.getContainer(),is=this.getOptions({}).style,us=this.getSize(ts),ls={stroke:ts.color,rx:us[0]/2,ry:us[1]/2},fs=rs.get("keyShape"),hs=mix$1({},is,fs.attr(),ls);hs=mix$1(hs,ts.style),this.updateShape(ts,rs,hs,!0,as),this.updateLinkPoints(ts,os)}},"single-node");registerNode("diamond",{options:{size:[80,80],style:{stroke:BaseGlobal$1.defaultNode.style.stroke,fill:BaseGlobal$1.defaultNode.style.fill,lineWidth:BaseGlobal$1.defaultNode.style.lineWidth},labelCfg:{style:{fill:BaseGlobal$1.nodeLabel.style.fill,fontSize:BaseGlobal$1.nodeLabel.style.fontSize,fontFamily:BaseGlobal$1.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:BaseGlobal$1.defaultNode.linkPoints.size,lineWidth:BaseGlobal$1.defaultNode.linkPoints.lineWidth,fill:BaseGlobal$1.defaultNode.linkPoints.fill,stroke:BaseGlobal$1.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:__assign$h({},BaseGlobal$1.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).icon,os=as===void 0?{}:as,is=this.getShapeStyle(ts),us=rs.addShape("path",{attrs:is,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});rs.shapeMap["".concat(this.type,"-keyShape")]=us;var ls=os.width,fs=os.height,hs=os.show,vs=os.text;return hs&&(vs?rs.shapeMap["".concat(this.type,"-icon")]=rs.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},os),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):rs.shapeMap["".concat(this.type,"-icon")]=rs.addShape("image",{attrs:__assign$h({x:-ls/2,y:-fs/2},os),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(ts,rs),us},drawLinkPoints:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).linkPoints,os=as===void 0?{}:as,is=os.top,us=os.left,ls=os.right,fs=os.bottom,hs=os.size,vs=os.r,gs=__rest$2(os,["top","left","right","bottom","size","r"]),ys=this.getSize(ts),xs=ys[0],ms=ys[1];us&&(rs.shapeMap["link-point-left"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:-xs/2,y:0,r:hs/2||vs||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),ls&&(rs.shapeMap["link-point-right"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:xs/2,y:0,r:hs/2||vs||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),is&&(rs.shapeMap["link-point-top"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:0,y:-ms/2,r:hs/2||vs||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),fs&&(rs.shapeMap["link-point-bottom"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:0,y:ms/2,r:hs/2||vs||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(ts){var rs=this.getSize(ts),as=rs[0],os=rs[1],is=[["M",0,-os/2],["L",as/2,0],["L",0,os/2],["L",-as/2,0],["Z"]];return is},getShapeStyle:function(ts){var rs=(this.mergeStyle||this.getOptions(ts)).style,as={stroke:ts.color},os=mix$1({},rs,as),is=this.getPath(ts),us=__assign$h({path:is},os);return us},update:function(ts,rs,as){var os=rs.getContainer(),is=this.getOptions({}).style,us=this.getPath(ts),ls={stroke:ts.color,path:us},fs=rs.get("keyShape"),hs=mix$1({},is,fs.attr(),ls);hs=mix$1(hs,ts.style),this.updateShape(ts,rs,hs,!0,as),this.updateLinkPoints(ts,os)}},"single-node");registerNode("triangle",{options:{size:40,direction:"up",style:{stroke:BaseGlobal$1.defaultNode.style.stroke,fill:BaseGlobal$1.defaultNode.style.fill,lineWidth:BaseGlobal$1.defaultNode.style.lineWidth},labelCfg:{style:{fill:BaseGlobal$1.nodeLabel.style.fill,fontSize:BaseGlobal$1.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:BaseGlobal$1.defaultNode.linkPoints.size,lineWidth:BaseGlobal$1.defaultNode.linkPoints.lineWidth,fill:BaseGlobal$1.defaultNode.linkPoints.fill,stroke:BaseGlobal$1.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:__assign$h({},BaseGlobal$1.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(ts,rs){var as=this.mergeStyle||this.getOptions(ts),os=as.icon,is=os===void 0?{}:os,us=as.direction,ls=this.getShapeStyle(ts),fs=ts.direction||us,hs=rs.addShape("path",{attrs:ls,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});rs.shapeMap["".concat(this.type,"-keyShape")]=hs;var vs=is.width,gs=is.height,ys=is.show,xs=is.offset,ms=is.text;if(ys)if(ms)rs.shapeMap["".concat(this.type,"-icon")]=rs.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},is),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var Ss=-vs/2,Ms=-gs/2;(fs==="up"||fs==="down")&&(Ms+=xs),(fs==="left"||fs==="right")&&(Ss+=xs),rs.shapeMap["".concat(this.type,"-icon")]=rs.addShape("image",{attrs:__assign$h({x:Ss,y:Ms},is),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(ts,rs),hs},drawLinkPoints:function(ts,rs){var as=this.mergeStyle||this.getOptions(ts),os=as.linkPoints,is=os===void 0?{}:os,us=as.direction,ls=ts.direction||us,fs=is.top,hs=is.left,vs=is.right,gs=is.bottom,ys=is.size,xs=is.r,ms=__rest$2(is,["top","left","right","bottom","size","r"]),Ss=this.getSize(ts),Ms=Ss[0];if(hs){var $s=null,bs=Ms*Math.sin(1/3*Math.PI),Cs=Ms*Math.sin(1/3*Math.PI);ls==="up"?$s=[-Cs,bs]:ls==="down"?$s=[-Cs,-bs]:ls==="left"&&($s=[-Cs,Cs-bs]),$s&&(rs.shapeMap["link-point-left"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},ms),{x:$s[0],y:$s[1],r:ys/2||xs||5}),className:"link-point-left",name:"link-point-left"}))}if(vs){var As=null,bs=Ms*Math.sin(1/3*Math.PI),Cs=Ms*Math.sin(1/3*Math.PI);ls==="up"?As=[Cs,bs]:ls==="down"?As=[Cs,-bs]:ls==="right"&&(As=[Cs,Cs-bs]),As&&(rs.shapeMap["link-point-right"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},ms),{x:As[0],y:As[1],r:ys/2||xs||5}),className:"link-point-right",name:"link-point-right"}))}if(fs){var Is=null,bs=Ms*Math.sin(1/3*Math.PI),Cs=Ms*Math.sin(1/3*Math.PI);ls==="up"?Is=[Cs-bs,-bs]:ls==="left"?Is=[Cs,-bs]:ls==="right"&&(Is=[-Cs,-bs]),Is&&(rs.shapeMap["link-point-top"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},ms),{x:Is[0],y:Is[1],r:ys/2||xs||5}),className:"link-point-top",name:"link-point-top"}))}if(gs){var ks=null,bs=Ms*Math.sin(1/3*Math.PI),Cs=Ms*Math.sin(1/3*Math.PI);ls==="down"?ks=[-Cs+bs,bs]:ls==="left"?ks=[Cs,bs]:ls==="right"&&(ks=[-Cs,bs]),ks&&(rs.shapeMap["link-point-bottom"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},ms),{x:ks[0],y:ks[1],r:ys/2||xs||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(ts){var rs=(this.mergeStyle||this.getOptions(ts)).direction,as=ts.direction||rs,os=this.getSize(ts),is=os[0],us=is*Math.sin(1/3*Math.PI),ls=is*Math.sin(1/3*Math.PI),fs=[["M",-ls,us],["L",0,-us],["L",ls,us],["Z"]];return as==="down"?fs=[["M",-ls,-us],["L",ls,-us],["L",0,us],["Z"]]:as==="left"?fs=[["M",-ls,ls-us],["L",ls,-ls],["L",ls,ls],["Z"]]:as==="right"&&(fs=[["M",ls,ls-us],["L",-ls,ls],["L",-ls,-ls],["Z"]]),fs},getShapeStyle:function(ts){var rs=(this.mergeStyle||this.getOptions(ts)).style,as={stroke:ts.color},os=mix$1({},rs,as),is=this.getPath(ts),us=__assign$h({path:is},os);return us},update:function(ts,rs,as){var os=rs.getContainer(),is=this.getOptions({}).style,us=this.getPath(ts),ls={stroke:ts.color,path:us},fs=rs.get("keyShape"),hs=mix$1({},is,fs.attr(),ls);hs=mix$1(hs,ts.style),this.updateShape(ts,rs,hs,!0,as),this.updateLinkPoints(ts,os)},updateLinkPoints:function(ts,rs){var as=this.getOptions({}),os=as.linkPoints,is=as.direction,us=ts.direction||is,ls=rs.shapeMap["link-point-left"]||rs.find(function(qs){return qs.get("className")==="link-point-left"}),fs=rs.shapeMap["link-point-right"]||rs.find(function(qs){return qs.get("className")==="link-point-right"}),hs=rs.shapeMap["link-point-top"]||rs.find(function(qs){return qs.get("className")==="link-point-top"}),vs=rs.shapeMap["link-point-bottom"]||rs.find(function(qs){return qs.get("className")==="link-point-bottom"}),gs=os,ys=ls||fs||hs||vs;ys&&(gs=ys.attr());var xs=mix$1({},gs,ts.linkPoints),ms=xs.fill,Ss=xs.stroke,Ms=xs.lineWidth,$s=xs.size/2;$s||($s=xs.r);var bs=ts.linkPoints?ts.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},Cs=bs.left,As=bs.right,Is=bs.top,ks=bs.bottom,Ps=this.getSize(ts),Ds=Ps[0],Fs={r:$s,fill:ms,stroke:Ss,lineWidth:Ms},Rs=null,js=Ds*Math.sin(1/3*Math.PI),zs=Ds*Math.sin(1/3*Math.PI);us==="up"?Rs=[-zs,js]:us==="down"?Rs=[-zs,-js]:us==="left"&&(Rs=[-zs,zs-js]),Rs&&(ls?!Cs&&Cs!==void 0?(ls.remove(),delete rs.shapeMap["link-point-left"]):ls.attr(__assign$h(__assign$h({},Fs),{x:Rs[0],y:Rs[1]})):Cs&&(rs.shapeMap["link-point-left"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},Fs),{x:Rs[0],y:Rs[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var Us=null;us==="up"?Us=[zs,js]:us==="down"?Us=[zs,-js]:us==="right"&&(Us=[zs,zs-js]),Us&&(fs?!As&&As!==void 0?(fs.remove(),delete rs.shapeMap["link-point-right"]):fs.attr(__assign$h(__assign$h({},Fs),{x:Us[0],y:Us[1]})):As&&(rs.shapeMap["link-point-right"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},Fs),{x:Us[0],y:Us[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var Ys=null;us==="up"?Ys=[zs-js,-js]:us==="left"?Ys=[zs,-js]:us==="right"&&(Ys=[-zs,-js]),Ys&&(hs?!Is&&Is!==void 0?(hs.remove(),delete rs.shapeMap["link-point-top"]):hs.attr(__assign$h(__assign$h({},Fs),{x:Ys[0],y:Ys[1]})):Is&&(rs.shapeMap["link-point-top"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},Fs),{x:Ys[0],y:Ys[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var Ks=null;us==="down"?Ks=[-zs+js,js]:us==="left"?Ks=[zs,js]:us==="right"&&(Ks=[-zs,js]),Ks&&(vs?!ks&&ks!==void 0?(vs.remove(),delete rs.shapeMap["link-point-bottom"]):vs.attr(__assign$h(__assign$h({},Fs),{x:Ks[0],y:Ks[1]})):ks&&(rs.shapeMap["link-point-bottom"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},Fs),{x:Ks[0],y:Ks[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node");registerNode("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:BaseGlobal$1.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:BaseGlobal$1.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:BaseGlobal$1.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).preRect,os=as===void 0?{}:as,is=this.getShapeStyle(ts),us=this.getSize(ts),ls=us[0],fs=us[1],hs=rs.addShape("rect",{attrs:is,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});rs.shapeMap["".concat(this.type,"-keyShape")]=hs;var vs=os.show,gs=__rest$2(os,["show"]);return vs&&(rs.shapeMap["pre-rect"]=rs.addShape("rect",{attrs:__assign$h({x:-ls/2,y:-fs/2,height:fs},gs),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(ts,rs),this.drawStateIcon(ts,rs),this.drawLinkPoints(ts,rs),hs},drawLogoIcon:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).logoIcon,os=as===void 0?{}:as,is=this.getSize(ts),us=is[0];if(os.show){var ls=os.width,fs=os.height,hs=os.x,vs=os.y,gs=os.offset,ys=os.text,xs=__rest$2(os,["width","height","x","y","offset","text"]);ys?rs.shapeMap["rect-logo-icon"]=rs.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},xs),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):rs.shapeMap["rect-logo-icon"]=rs.addShape("image",{attrs:__assign$h(__assign$h({},xs),{x:hs||-us/2+ls+gs,y:vs||-fs/2,width:ls,height:fs}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).stateIcon,os=as===void 0?{}:as,is=this.getSize(ts),us=is[0];if(os.show){var ls=os.width,fs=os.height,hs=os.x,vs=os.y,gs=os.offset,ys=os.text,xs=__rest$2(os,["width","height","x","y","offset","text"]);ys?rs.shapeMap["rect-state-icon"]=rs.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},xs),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):rs.shapeMap["rect-state-icon"]=rs.addShape("image",{attrs:__assign$h(__assign$h({},xs),{x:hs||us/2-ls+gs,y:vs||-fs/2,width:ls,height:fs}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).linkPoints,os=as===void 0?{}:as,is=os.top,us=os.left,ls=os.right,fs=os.bottom,hs=os.size,vs=os.r,gs=__rest$2(os,["top","left","right","bottom","size","r"]),ys=this.getSize(ts),xs=ys[0],ms=ys[1];us&&(rs.shapeMap["link-point-left"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:-xs/2,y:0,r:hs/2||vs||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),ls&&(rs.shapeMap["link-point-right"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:xs/2,y:0,r:hs/2||vs||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),is&&(rs.shapeMap["link-point-top"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:0,y:-ms/2,r:hs/2||vs||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),fs&&(rs.shapeMap["link-point-bottom"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},gs),{x:0,y:ms/2,r:hs/2||vs||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(ts,rs){var as=this.getOptions(ts),os=as.labelCfg,is=os===void 0?{}:os,us=as.logoIcon,ls=us===void 0?{}:us,fs=as.descriptionCfg,hs=fs===void 0?{}:fs,vs=this.getSize(ts),gs=vs[0],ys=null,xs=ls.show,ms=ls.width,Ss=-gs/2+is.offset;xs&&(Ss=-gs/2+ms+is.offset);var Ms=is.style,$s=hs.style,bs=hs.paddingTop;return isString$2(ts.description)?(ys=rs.addShape("text",{attrs:__assign$h(__assign$h({},Ms),{x:Ss,y:-5,text:ts.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),rs.shapeMap["text-shape"]=ys,rs.shapeMap["rect-description"]=rs.addShape("text",{attrs:__assign$h(__assign$h({},$s),{x:Ss,y:17+(bs||0),text:ts.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(ys=rs.addShape("text",{attrs:__assign$h(__assign$h({},Ms),{x:Ss,y:7,text:ts.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),rs.shapeMap["text-shape"]=ys),ys},getShapeStyle:function(ts){var rs=(this.mergeStyle||this.getOptions(ts)).style,as={stroke:ts.color},os=mix$1({},rs,as),is=this.getSize(ts),us=os.width||is[0],ls=os.height||is[1],fs=__assign$h({x:-us/2,y:-ls/2,width:us,height:ls},os);return fs},update:function(ts,rs){var as=this.mergeStyle||this.getOptions(ts),os=as.style,is=os===void 0?{}:os,us=as.labelCfg,ls=us===void 0?{}:us,fs=as.descriptionCfg,hs=fs===void 0?{}:fs,vs=this.getSize(ts),gs=vs[0],ys=vs[1],xs=rs.get("keyShape");xs.attr(__assign$h(__assign$h({},is),{x:-gs/2,y:-ys/2,width:gs,height:ys}));var ms=rs.getContainer(),Ss=ms.shapeMap["rect-logo-icon"]||ms.find(function(l0){return l0.get("className")==="rect-logo-icon"}),Ms=Ss?Ss.attr():{},$s=mix$1({},Ms,ts.logoIcon),bs=$s.width;bs===void 0&&(bs=this.options.logoIcon.width);var Cs=ts.logoIcon?ts.logoIcon.show:void 0,As=ls.offset,Is=-gs/2+bs+As;!Cs&&Cs!==void 0&&(Is=-gs/2+As);var ks=ms.shapeMap["node-label"]||ms.find(function(l0){return l0.get("className")==="node-label"}),Ps=ms.shapeMap["rect-description"]||ms.find(function(l0){return l0.get("className")==="rect-description"});if(ts.label)if(!ks)ms.shapeMap["node-label"]=ms.addShape("text",{attrs:__assign$h(__assign$h({},ls.style),{x:Is,y:ts.description?-5:7,text:ts.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var Ds=ts.labelCfg?ts.labelCfg.style:{},Fs=mix$1({},ks.attr(),Ds);ts.label&&(Fs.text=ts.label),Fs.x=Is,isString$2(ts.description)&&(Fs.y=-5),Ps&&(Ps.resetMatrix(),Ps.attr({x:Is})),ks.resetMatrix(),ks.attr(Fs)}if(isString$2(ts.description)){var Rs=hs.paddingTop;if(!Ps)ms.shapeMap["rect-description"]=ms.addShape("text",{attrs:__assign$h(__assign$h({},hs.style),{x:Is,y:17+(Rs||0),text:ts.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var Ds=ts.descriptionCfg?ts.descriptionCfg.style:{},js=mix$1({},Ps.attr(),Ds);isString$2(ts.description)&&(js.text=ts.description),js.x=Is,Ps.resetMatrix(),Ps.attr(__assign$h(__assign$h({},js),{y:17+(Rs||0)}))}}var zs=ms.shapeMap["pre-rect"]||ms.find(function(l0){return l0.get("className")==="pre-rect"});if(zs&&!zs.destroyed){var Us=mix$1({},zs.attr(),ts.preRect);zs.attr(__assign$h(__assign$h({},Us),{x:-gs/2,y:-ys/2,height:ys}))}if(Ss&&!Ss.destroyed)if(!Cs&&Cs!==void 0)Ss.remove(),delete ms.shapeMap["pre-rect"];else{var Ys=$s.width,Ks=$s.height,qs=$s.x,_l=$s.y,Js=$s.offset,Vs=__rest$2($s,["width","height","x","y","offset"]);Ss.attr(__assign$h(__assign$h({},Vs),{x:qs||-gs/2+Ys+Js,y:_l||-Ks/2,width:Ys,height:Ks}))}else Cs&&this.drawLogoIcon(ts,ms);var Zs=ms.shapeMap["rect-state-icon"]||ms.find(function(l0){return l0.get("className")==="rect-state-icon"}),Sl=Zs?Zs.attr():{},Il=mix$1({},Sl,ts.stateIcon);if(Zs){!Il.show&&Il.show!==void 0&&(Zs.remove(),delete ms.shapeMap["rect-state-icon"]);var Nl=Il.width,Ks=Il.height,qs=Il.x,_l=Il.y,Tl=Il.offset,_c=__rest$2(Il,["width","height","x","y","offset"]);Zs.attr(__assign$h(__assign$h({},_c),{x:qs||gs/2-Nl+Tl,y:_l||-Ks/2,width:Nl,height:Ks}))}else Il.show&&this.drawStateIcon(ts,ms);this.updateLinkPoints(ts,ms)},getOptions:function(ts,rs){return rs==="move"?ts:deepMix$2({},this.options,this.getCustomConfig(ts)||{},ts)}},"single-node");registerNode("star",{options:{size:60,style:{stroke:BaseGlobal$1.defaultNode.style.stroke,fill:BaseGlobal$1.defaultNode.style.fill,lineWidth:BaseGlobal$1.defaultNode.style.lineWidth},labelCfg:{style:{fill:BaseGlobal$1.nodeLabel.style.fill,fontSize:BaseGlobal$1.nodeLabel.style.fontSize,fontFamily:BaseGlobal$1.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:BaseGlobal$1.defaultNode.linkPoints.size,lineWidth:BaseGlobal$1.defaultNode.linkPoints.lineWidth,fill:BaseGlobal$1.defaultNode.linkPoints.fill,stroke:BaseGlobal$1.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:__assign$h({},BaseGlobal$1.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).icon,os=as===void 0?{}:as,is=this.getShapeStyle(ts),us=rs.addShape("path",{attrs:is,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});rs.shapeMap["".concat(this.type,"-keyShape")]=us;var ls=os.width,fs=os.height,hs=os.show,vs=os.text;return hs&&(vs?rs.shapeMap["".concat(this.type,"-icon")]=rs.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},os),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):rs.shapeMap["".concat(this.type,"-icon")]=rs.addShape("image",{attrs:__assign$h({x:-ls/2,y:-fs/2},os),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(ts,rs),us},drawLinkPoints:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).linkPoints,os=as===void 0?{}:as,is=os.top,us=os.left,ls=os.right,fs=os.leftBottom,hs=os.rightBottom,vs=os.size,gs=os.r,ys=__rest$2(os,["top","left","right","leftBottom","rightBottom","size","r"]),xs=this.getSize(ts),ms=xs[0];if(ls){var Ss=Math.cos(.1*Math.PI)*ms,Ms=Math.sin((18+72*0)/180*Math.PI)*ms;rs.shapeMap["link-point-right"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},ys),{x:Ss,y:-Ms,r:vs/2||gs||5}),className:"link-point-right",name:"link-point-right"})}if(is){var Ss=Math.cos(.5*Math.PI)*ms,Ms=Math.sin((18+72*1)/180*Math.PI)*ms;rs.shapeMap["link-point-top"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},ys),{x:Ss,y:-Ms,r:vs/2||gs||5}),className:"link-point-top",name:"link-point-top"})}if(us){var Ss=Math.cos(.9*Math.PI)*ms,Ms=Math.sin((18+72*2)/180*Math.PI)*ms;rs.shapeMap["link-point-left"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},ys),{x:Ss,y:-Ms,r:vs/2||gs||5}),className:"link-point-left",name:"link-point-left"})}if(fs){var Ss=Math.cos(1.3*Math.PI)*ms,Ms=Math.sin((18+72*3)/180*Math.PI)*ms;rs.shapeMap["link-point-bottom"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},ys),{x:Ss,y:-Ms,r:vs/2||gs||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(hs){var Ss=Math.cos(1.7*Math.PI)*ms,Ms=Math.sin((18+72*4)/180*Math.PI)*ms;rs.shapeMap["link-point-right-bottom"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},ys),{x:Ss,y:-Ms,r:vs/2||gs||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(ts){var rs=this.getSize(ts),as=rs[0],os=as*3/8,is=ts.innerR||os;return Util$1.getStarPath(as,is)},getShapeStyle:function(ts){var rs=(this.mergeStyle||this.getOptions(ts)).style,as={stroke:ts.color},os=mix$1({},rs,as),is=this.getPath(ts),us=__assign$h({path:is},os);return us},update:function(ts,rs,as){var os=rs.getContainer(),is=this.getOptions({}).style,us=this.getPath(ts),ls={stroke:ts.color,path:us},fs=rs.get("keyShape"),hs=mix$1({},is,fs.attr(),ls);hs=mix$1(hs,ts.style),this.updateShape(ts,rs,hs,!0,as),this.updateLinkPoints(ts,os)},updateLinkPoints:function(ts,rs){var as=this.getOptions({}).linkPoints,os=rs.shapeMap["link-point-left"]||rs.find(function(js){return js.get("className")==="link-point-left"}),is=rs.shapeMap["link-point-right"]||rs.find(function(js){return js.get("className")==="link-point-right"}),us=rs.shapeMap["link-point-top"]||rs.find(function(js){return js.get("className")==="link-point-top"}),ls=rs.shapeMap["link-point-left-bottom"]||rs.find(function(js){return js.get("className")==="link-point-left-bottom"}),fs=rs.shapeMap["link-point-left-bottom"]||rs.find(function(js){return js.get("className")==="link-point-right-bottom"}),hs=as,vs=os||is||us||ls||fs;vs&&(hs=vs.attr());var gs=mix$1({},hs,ts.linkPoints),ys=gs.fill,xs=gs.stroke,ms=gs.lineWidth,Ss=gs.size/2;Ss||(Ss=gs.r);var Ms=ts.linkPoints?ts.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},$s=Ms.left,bs=Ms.right,Cs=Ms.top,As=Ms.leftBottom,Is=Ms.rightBottom,ks=this.getSize(ts),Ps=ks[0],Ds={r:Ss,fill:ys,stroke:xs,lineWidth:ms},Fs=Math.cos((18+72*0)/180*Math.PI)*Ps,Rs=Math.sin((18+72*0)/180*Math.PI)*Ps;is?!bs&&bs!==void 0?(is.remove(),delete rs.shapeMap["link-point-right"]):is.attr(__assign$h(__assign$h({},Ds),{x:Fs,y:-Rs})):bs&&(rs.shapeMap["link-point-right"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},Ds),{x:Fs,y:-Rs}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),Fs=Math.cos((18+72*1)/180*Math.PI)*Ps,Rs=Math.sin((18+72*1)/180*Math.PI)*Ps,us?!Cs&&Cs!==void 0?(us.remove(),delete rs.shapeMap["link-point-top"]):us.attr(__assign$h(__assign$h({},Ds),{x:Fs,y:-Rs})):Cs&&(rs.shapeMap["link-point-top"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},Ds),{x:Fs,y:-Rs}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),Fs=Math.cos((18+72*2)/180*Math.PI)*Ps,Rs=Math.sin((18+72*2)/180*Math.PI)*Ps,os?!$s&&$s!==void 0?(os.remove(),delete rs.shapeMap["link-point-left"]):os.attr(__assign$h(__assign$h({},Ds),{x:Fs,y:-Rs})):$s&&(rs.shapeMap["link-point-left"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},Ds),{x:Fs,y:-Rs}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),Fs=Math.cos((18+72*3)/180*Math.PI)*Ps,Rs=Math.sin((18+72*3)/180*Math.PI)*Ps,ls?!As&&As!==void 0?(ls.remove(),delete rs.shapeMap["link-point-left-bottom"]):ls.attr(__assign$h(__assign$h({},Ds),{x:Fs,y:-Rs})):As&&(rs.shapeMap["link-point-left-bottom"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},Ds),{x:Fs,y:-Rs}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),Fs=Math.cos((18+72*4)/180*Math.PI)*Ps,Rs=Math.sin((18+72*4)/180*Math.PI)*Ps,fs?!Is&&Is!==void 0?(fs.remove(),delete rs.shapeMap["link-point-right-bottom"]):fs.attr(__assign$h(__assign$h({},Ds),{x:Fs,y:-Rs})):Is&&(rs.shapeMap["link-point-right-bottom"]=rs.addShape("circle",{attrs:__assign$h(__assign$h({},Ds),{x:Fs,y:-Rs}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var defaultSubjectColors=Util$1.defaultSubjectColors,FAN_NAME_PREFIX="fan-shape-";registerNode("donut",{options:{size:BaseGlobal$1.defaultNode.size,style:{x:0,y:0,stroke:BaseGlobal$1.defaultNode.style.stroke,fill:BaseGlobal$1.defaultNode.style.fill,lineWidth:BaseGlobal$1.defaultNode.style.lineWidth},labelCfg:{style:{fill:BaseGlobal$1.nodeLabel.style.fill,fontSize:BaseGlobal$1.nodeLabel.style.fontSize,fontFamily:BaseGlobal$1.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:BaseGlobal$1.defaultNode.linkPoints.size,lineWidth:BaseGlobal$1.defaultNode.linkPoints.lineWidth,fill:BaseGlobal$1.defaultNode.linkPoints.fill,stroke:BaseGlobal$1.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:__assign$h({},BaseGlobal$1.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(ts,rs){var as=(this.mergeStyle||this.getOptions(ts)).icon,os=as===void 0?{}:as,is=this.getShapeStyle(ts),us=deepMix$2({},os,ts.icon),ls=rs.addShape("circle",{attrs:is,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});rs.shapeMap["".concat(this.type,"-keyShape")]=ls;var fs=us.width,hs=us.height,vs=us.show,gs=us.text;return vs&&(gs?rs.shapeMap["".concat(this.type,"-icon")]=rs.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},us),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):rs.shapeMap["".concat(this.type,"-icon")]=rs.addShape("image",{attrs:__assign$h({x:-fs/2,y:-hs/2},us),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),drawFans(ts,rs,ls),this.drawLinkPoints(ts,rs),ls},updateShape:function(ts,rs,as,os,is){var us=rs.get("keyShape");us.attr(__assign$h({},as)),updateFans(ts,rs,us),this.updateLabel(ts,rs,is),os&&this.updateIcon(ts,rs)}},"circle");var drawFans=function(ts,rs,as){var os=ts.donutAttrs,is=os===void 0?{}:os,us=ts.donutColorMap,ls=us===void 0?{}:us,fs=Object.keys(is).length;if(is&&fs>1){var hs=getDonutConfig(is,ls),vs=hs.configs,gs=hs.totalValue;if(gs){var ys=getDonutSize(as),xs=ys.lineWidth,ms=ys.arcR,Ss=[ms,0],Ms=0;if(fs===1){drawFan(rs,{arcR:ms,arcBegin:Ss,beginAngle:Ms,config:vs[0],fanIndex:0,lineWidth:xs,totalValue:gs,drawWhole:!0});return}for(var $s=0;$s<vs.length;$s++){var bs=drawFan(rs,{arcR:ms,arcBegin:Ss,beginAngle:Ms,config:vs[$s],fanIndex:$s,lineWidth:xs,totalValue:gs});if(bs.shouldEnd)return;Ss=bs.arcBegin,Ms=bs.beginAngle}}}},drawFan=function(ts,rs){var as=rs.arcR,os=rs.arcBegin,is=rs.beginAngle,us=rs.config,ls=rs.fanIndex,fs=rs.lineWidth,hs=rs.totalValue,vs=rs.drawWhole,gs=vs===void 0?!1:vs,ys=rs.updateShape,xs=ys===void 0?void 0:ys,ms=us.value/hs;if(ms<.001)return{beginAngle:is,arcBegin:os,shape:void 0,shouldEnd:!1};var Ss,Ms,$s;if(gs||ms>.999)Ss=[as,1e-4],$s=1;else{var bs=ms*Math.PI*2;Ms=is+bs,Ss=[as*Math.cos(Ms),-as*Math.sin(Ms)],$s=bs>Math.PI?1:0}var Cs={path:[["M",os[0],os[1]],["A",as,as,0,$s,0,Ss[0],Ss[1]]],stroke:us.color||(xs==null?void 0:xs.attr("stroke"))||defaultSubjectColors[ls%defaultSubjectColors.length],lineWidth:fs};return xs?xs.attr(Cs):ts.shapeMap["".concat(FAN_NAME_PREFIX).concat(ls)]=ts.addShape("path",{attrs:Cs,name:"".concat(FAN_NAME_PREFIX).concat(ls),draggable:!0}),{beginAngle:Ms,arcBegin:Ss,shape:ts.shapeMap["".concat(FAN_NAME_PREFIX).concat(ls)],shouldEnd:gs||ms>.999}},updateFans=function(ts,rs,as){var os=ts.donutAttrs,is=ts.donutColorMap,us=is===void 0?{}:is,ls={},fs=rs.getContainer();if(os){var hs=getDonutConfig(os,us),vs=hs.configs,gs=hs.totalValue;if(gs)for(var ys=getDonutSize(as),xs=ys.lineWidth,ms=ys.arcR,Ss=[ms,0],Ms=0,$s=0;$s<vs.length;$s++){var bs="".concat(FAN_NAME_PREFIX).concat($s),Cs=drawFan(fs,{arcR:ms,arcBegin:Ss,beginAngle:Ms,config:vs[$s],fanIndex:$s,lineWidth:xs,totalValue:gs,drawWhole:vs.length===1,updateShape:fs.shapeMap[bs]});if(Cs.shape&&(ls[bs]=!0),Cs.shouldEnd)break;Ss=Cs.arcBegin,Ms=Cs.beginAngle}}var As=Object.keys(fs.shapeMap).filter(function(Is){return Is.includes(FAN_NAME_PREFIX)});As.forEach(function(Is){ls[Is]||(fs.shapeMap[Is].remove(!0),delete fs.shapeMap[Is])})},getDonutConfig=function(ts,rs){var as=0,os=[];return Object.keys(ts).forEach(function(is){var us=+ts[is];isNaN(us)||(os.push({key:is,value:us,color:rs[is]}),as+=us)}),{totalValue:as,configs:os}},getDonutSize=function(ts){var rs=ts.attr("r"),as=.6*rs,os=(rs+as)/2,is=rs-as;return{lineWidth:is,arcR:os}},getBBoxFromPoint=function(ts){var rs=ts.x,as=ts.y;return{x:rs,y:as,centerX:rs,centerY:as,minX:rs,minY:as,maxX:rs,maxY:as,height:0,width:0}},getBBoxFromPoints=function(ts){ts===void 0&&(ts=[]);var rs=[],as=[];ts.forEach(function(fs){rs.push(fs.x),as.push(fs.y)});var os=Math.min.apply(Math,rs),is=Math.max.apply(Math,rs),us=Math.min.apply(Math,as),ls=Math.max.apply(Math,as);return{centerX:(os+is)/2,centerY:(us+ls)/2,maxX:is,maxY:ls,minX:os,minY:us,height:ls-us,width:is-os}},filterConnectPoints=function(ts){for(var rs=[],as={},os=ts.length,is=os-1;is>=0;is--){var us=ts[is];us.id="".concat(us.x,"|||").concat(us.y),as[us.id]||(as[us.id]=us,rs.push(us))}return rs},simplifyPolyline=function(ts){return filterConnectPoints(ts)},getExpandedBBox=function(ts,rs){return ts.width||ts.height?{centerX:ts.centerX,centerY:ts.centerY,minX:ts.minX-rs,minY:ts.minY-rs,maxX:ts.maxX+rs,maxY:ts.maxY+rs,height:ts.height+2*rs,width:ts.width+2*rs}:ts},isHorizontalPort=function(ts,rs){var as=Math.abs(ts.x-rs.centerX),os=Math.abs(ts.y-rs.centerY);return as===0&&os===0?0:as/rs.width>os/rs.height},getExpandedBBoxPoint=function(ts,rs,as){var os=isHorizontalPort(rs,ts);if(os===0){var is=ts.centerX,us=ts.centerY;return as.y<rs.y?us=ts.minY:as.x>rs.x?is=ts.maxX:as.x<rs.x?is=ts.minX:as.x===rs.x&&(us=ts.maxY),{x:is,y:us}}return os?{x:rs.x>ts.centerX?ts.maxX:ts.minX,y:rs.y}:{x:rs.x,y:rs.y>ts.centerY?ts.maxY:ts.minY}},mergeBBox=function(ts,rs){var as=Math.min(ts.minX,rs.minX),os=Math.min(ts.minY,rs.minY),is=Math.max(ts.maxX,rs.maxX),us=Math.max(ts.maxY,rs.maxY);return{centerX:(as+is)/2,centerY:(os+us)/2,minX:as,minY:os,maxX:is,maxY:us,height:us-os,width:is-as}},getPointsFromBBox=function(ts){return[{x:ts.minX,y:ts.minY},{x:ts.maxX,y:ts.minY},{x:ts.maxX,y:ts.maxY},{x:ts.minX,y:ts.maxY}]},isPointOutsideBBox=function(ts,rs){var as=ts.x,os=ts.y;return as<rs.minX||as>rs.maxX||os<rs.minY||os>rs.maxY},getBBoxXCrossPoints=function(ts,rs){return rs<ts.minX||rs>ts.maxX?[]:[{x:rs,y:ts.minY},{x:rs,y:ts.maxY}]},getBBoxYCrossPoints=function(ts,rs){return rs<ts.minY||rs>ts.maxY?[]:[{x:ts.minX,y:rs},{x:ts.maxX,y:rs}]},getBBoxCrossPointsByPoint=function(ts,rs){return getBBoxXCrossPoints(ts,rs.x).concat(getBBoxYCrossPoints(ts,rs.y))},distance$1=function(ts,rs){return Math.abs(ts.x-rs.x)+Math.abs(ts.y-rs.y)},_costByPoints=function(ts,rs){var as=-2,os=0;return rs.forEach(function(is){is&&(ts.x===is.x&&(os+=as),ts.y===is.y&&(os+=as))}),os},heuristicCostEstimate=function(ts,rs,as,os,is){return distance$1(ts,rs)+distance$1(ts,as)+_costByPoints(ts,[rs,as,os,is])},reconstructPath=function ns(ts,rs,as,os,is){is===void 0&&(is=0),ts.unshift(rs[os]),as[os]&&as[os]!==os&&is<=100&&ns(ts,rs,as,as[os],is+1)},isSegmentsIntersected=function(ts,rs,as,os){var is=as.x-ts.x,us=as.y-ts.y,ls=os.x-ts.x,fs=os.y-ts.y,hs=as.x-rs.x,vs=as.y-rs.y,gs=os.x-rs.x,ys=os.y-rs.y,xs=is*fs-us*ls,ms=hs*ys-vs*gs,Ss=is*vs-us*hs,Ms=ls*ys-fs*gs;return xs*ms<=0&&Ss*Ms<=0},isSegmentCrossingBBox=function(ts,rs,as){if(as.width||as.height){var os=getPointsFromBBox(as),is=os[0],us=os[1],ls=os[2],fs=os[3];return isSegmentsIntersected(ts,rs,is,us)||isSegmentsIntersected(ts,rs,is,fs)||isSegmentsIntersected(ts,rs,us,ls)||isSegmentsIntersected(ts,rs,ls,fs)}return!1},getNeighborPoints=function(ts,rs,as,os){var is=[];return ts.forEach(function(us){if(us!==rs&&(us.x===rs.x||us.y===rs.y)){if(isSegmentCrossingBBox(us,rs,as)||isSegmentCrossingBBox(us,rs,os))return;is.push(us)}}),filterConnectPoints(is)},pathFinder$1=function(ts,rs,as,os,is,us,ls){var fs,hs=[],vs=(fs={},fs[rs.id]=rs,fs),gs={},ys={},xs={};ys[rs.id]=0,xs[rs.id]=heuristicCostEstimate(rs,as,rs);var ms=new SortedArray;ms.add({id:rs.id,value:xs[rs.id]});var Ss={};ts.forEach(function(Is){Ss[Is.id]=Is});for(var Ms;Object.keys(vs).length;){var $s=ms.minId(!1);if($s)Ms=vs[$s];else break;if(Ms===as){var bs=[];return reconstructPath(bs,Ss,gs,as.id),bs}delete vs[Ms.id],ms.remove(Ms.id),hs.push(Ms);var Cs=getNeighborPoints(ts,Ms,os,is),As=function(ks){ks.forEach(function(Ps){if(hs.indexOf(Ps)===-1){var Ds=Ps.id;vs[Ds]||(vs[Ds]=Ps);var Fs=xs[Ms.id]+distance$1(Ms,Ps);if(ys[Ds]&&Fs>=ys[Ds]){ms.add({id:Ds,value:xs[Ds]});return}gs[Ds]=Ms.id,ys[Ds]=Fs,xs[Ds]=ys[Ds]+heuristicCostEstimate(Ps,as,rs,us,ls),ms.add({id:Ds,value:xs[Ds]})}})};As(Cs)}return[rs,as]},isBending=function(ts,rs,as){return!(ts.x===rs.x&&rs.x===as.x||ts.y===rs.y&&rs.y===as.y)},getBorderRadiusPoints=function(ts,rs,as,os){var is=distance$1(ts,rs),us=distance$1(as,rs);is<os&&(os=is),us<os&&(os=us);var ls={x:rs.x-os/is*(rs.x-ts.x),y:rs.y-os/is*(rs.y-ts.y)},fs={x:rs.x-os/us*(rs.x-as.x),y:rs.y-os/us*(rs.y-as.y)};return[ls,fs]},getPathWithBorderRadiusByPolyline=function(ts,rs){var as=[],os=ts[0];return as.push("M".concat(os.x," ").concat(os.y)),ts.forEach(function(is,us){var ls=ts[us+1],fs=ts[us+2];if(ls&&fs)if(isBending(is,ls,fs)){var hs=getBorderRadiusPoints(is,ls,fs,rs),vs=hs[0],gs=hs[1];as.push("L".concat(vs.x," ").concat(vs.y)),as.push("Q".concat(ls.x," ").concat(ls.y," ").concat(gs.x," ").concat(gs.y)),as.push("L".concat(gs.x," ").concat(gs.y))}else as.push("L".concat(ls.x," ").concat(ls.y));else ls&&as.push("L".concat(ls.x," ").concat(ls.y))}),as.join("")},getPolylinePoints=function(ts,rs,as,os,is){var us,ls;if(!as||!as.getType())us=getBBoxFromPoint(ts);else if(as.getType()==="combo"){var fs=as.getKeyShape().getBBox();if(fs){var hs=as.getModel(),vs=hs.x,gs=hs.y;us={x:vs,y:gs,width:fs.width,height:fs.height,minX:fs.minX+vs,maxX:fs.maxX+vs,minY:fs.minY+gs,maxY:fs.maxY+gs},us.centerX=(us.minX+us.maxX)/2,us.centerY=(us.minY+us.maxY)/2}else us=getBBoxFromPoint(ts)}else us=as&&as.getBBox();if(!os||!os.getType())ls=getBBoxFromPoint(rs);else if(os.getType()==="combo"){var ys=os.getKeyShape().getBBox();if(ys){var xs=os.getModel(),ms=xs.x,Ss=xs.y;ls={x:ms,y:Ss,width:ys.width,height:ys.height,minX:ys.minX+ms,maxX:ys.maxX+ms,minY:ys.minY+Ss,maxY:ys.maxY+Ss},ls.centerX=(ls.minX+ls.maxX)/2,ls.centerY=(ls.minY+ls.maxY)/2}else ls=getBBoxFromPoint(rs)}else ls=os&&os.getBBox();var Ms=getExpandedBBox(us,is),$s=getExpandedBBox(ls,is),bs=getExpandedBBoxPoint(Ms,ts,rs),Cs=getExpandedBBoxPoint($s,rs,ts),As=getBBoxFromPoints([bs,Cs]),Is=mergeBBox(Ms,As),ks=mergeBBox($s,As),Ps=[];Ps=Ps.concat(getPointsFromBBox(Is)).concat(getPointsFromBBox(ks));var Ds={x:(ts.x+rs.x)/2,y:(ts.y+rs.y)/2};[As,Is,ks].forEach(function(Rs){Ps=Ps.concat(getBBoxCrossPointsByPoint(Rs,Ds).filter(function(js){return isPointOutsideBBox(js,Ms)&&isPointOutsideBBox(js,$s)}))}),[{x:bs.x,y:Cs.y},{x:Cs.x,y:bs.y}].forEach(function(Rs){isPointOutsideBBox(Rs,Ms)&&isPointOutsideBBox(Rs,$s)&&Ps.push(Rs)}),Ps.unshift(bs),Ps.push(Cs),Ps=filterConnectPoints(Ps);var Fs=pathFinder$1(Ps,bs,Cs,us,ls,ts,rs);return Fs.unshift(ts),Fs.push(rs),simplifyPolyline(Fs)},removeRedundantPoint=function(ts){if(!(ts!=null&&ts.length))return ts;for(var rs=ts[ts.length-1],as={x:rs.x,y:rs.y},os=[rs],is=[rs],us=ts.length-2;us>=0;us--){var ls=ts[us];if(ls.x===as.x?os.push(ls):(os=[ls],as.x=ls.x),ls.y===as.y?is.push(ls):(is=[ls],as.y=ls.y),os.length>2){var fs=ts.indexOf(os[1]);fs>-1&&ts.splice(fs,1);continue}if(is.length>2){var fs=ts.indexOf(is[1]);fs>-1&&ts.splice(fs,1)}}return ts},SortedArray=function(){function ns(){this.arr=[],this.map={},this.arr=[],this.map={}}return ns.prototype._innerAdd=function(ts,rs){for(var as=[0,rs-1];as[1]-as[0]>1;){var os=Math.floor((as[0]+as[1])/2);if(this.arr[os].value>ts.value)as[1]=os;else if(this.arr[os].value<ts.value)as[0]=os;else{this.arr.splice(os,0,ts),this.map[ts.id]=!0;return}}this.arr.splice(as[1],0,ts),this.map[ts.id]=!0},ns.prototype.add=function(ts){delete this.map[ts.id];var rs=this.arr.length;if(!rs){this.arr.push(ts),this.map[ts.id]=!0;return}if(this.arr[rs-1].value<ts.value){this.arr.push(ts),this.map[ts.id]=!0;return}this._innerAdd(ts,rs)},ns.prototype.remove=function(ts){this.map[ts]&&delete this.map[ts]},ns.prototype._clearAndGetMinId=function(){for(var ts,rs=this.arr.length-1;rs>=0;rs--)this.map[this.arr[rs].id]?ts=this.arr[rs].id:this.arr.splice(rs,1);return ts},ns.prototype._findFirstId=function(){for(;this.arr.length;){var ts=this.arr.shift();if(this.map[ts.id])return ts.id}},ns.prototype.minId=function(ts){return ts?this._clearAndGetMinId():this._findFirstId()},ns}(),manhattanDist=function(ts,rs){return Math.abs(ts.x-rs.x)+Math.abs(ts.y-rs.y)},simplePolyline=function(ts,rs,as,os,is){return simplifyPolyline(getPolylinePoints(ts,rs,as,os,is.offset))},defaultCfg={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:manhattanDist,fallbackRoute:simplePolyline},pos2GridIx=function(ts,rs){var as=Math.round(Math.abs(ts/rs)),os=ts<0?-1:1;return as<0?0:os*as},getObstacleMap=function(ts,rs,as){var os={};return ts.forEach(function(is){if(is)for(var us=getExpandedBBox(is.getBBox(),as),ls=pos2GridIx(us.minX,rs);ls<=pos2GridIx(us.maxX,rs);ls+=1)for(var fs=pos2GridIx(us.minY,rs);fs<=pos2GridIx(us.maxY,rs);fs+=1)os["".concat(ls,"|||").concat(fs)]=!0}),os},getDirectionAngle=function(ts,rs){var as=rs.x-ts.x,os=rs.y-ts.y;return as||os?Math.atan2(os,as):0},getAngleDiff=function(ts,rs){var as=Math.abs(ts-rs);return as>Math.PI?2*Math.PI-as:as},estimateCost=function(ts,rs,as){for(var os=1/0,is=0,us=rs.length;is<us;is++){var ls=as(ts,rs[is]);ls<os&&(os=ls)}return os},getBoxPoints=function(ts,rs,as,os,is){var us=[];if(!as)return[ts];var ls=is.directions,fs=is.offset,hs=as.getBBox(),vs=rs.x>hs.minX&&rs.x<hs.maxX&&rs.y>hs.minY&&rs.y<hs.maxY,gs=getExpandedBBox(hs,fs);for(var ys in gs)gs[ys]=pos2GridIx(gs[ys],is.gridSize);if(vs){for(var xs=0,ms=ls;xs<ms.length;xs++)for(var Ss=ms[xs],Ms=[[{x:gs.minX,y:gs.minY},{x:gs.maxX,y:gs.minY}],[{x:gs.minX,y:gs.minY},{x:gs.minX,y:gs.maxY}],[{x:gs.maxX,y:gs.minY},{x:gs.maxX,y:gs.maxY}],[{x:gs.minX,y:gs.maxY},{x:gs.maxX,y:gs.maxY}]],ys=0;ys<4;ys++){var $s=Ms[ys],bs=Util$1.getLineIntersect(ts,{x:ts.x+Ss.stepX*gs.width,y:ts.y+Ss.stepY*gs.height},$s[0],$s[1]);bs&&!isSegmentCrossingBBox(ts,bs,hs)&&(bs.id="".concat(bs.x,"|||").concat(bs.y),us.push(bs))}return us}var Cs=getExpandedBBoxPoint(gs,ts,os);return Cs.id="".concat(Cs.x,"|||").concat(Cs.y),[Cs]},getDirectionChange=function(ts,rs,as,os){var is=getDirectionAngle(ts,rs),us=as[ts.id];if(!us){var ls=getDirectionAngle(os,ts);return getAngleDiff(ls,is)}var fs=getDirectionAngle({x:us.x,y:us.y},ts);return getAngleDiff(fs,is)},getControlPoints=function(ts,rs,as,os,is,us,ls){var fs=[os],hs=os,vs=ts.id,gs=ts.x,ys=ts.y,xs={x:gs,y:ys,id:vs};getDirectionChange(xs,us,rs,as)&&(hs={x:us.x===os.x?os.x:xs.x*ls,y:us.y===os.y?os.y:xs.y*ls},fs.unshift(hs));for(var ms=rs[vs];ms&&ms.id!==vs;){var Ss={x:gs,y:ys,id:vs},Ms={x:ms.x,y:ms.y,id:ms.id},$s=getDirectionChange(Ms,Ss,rs,as);$s&&(hs={x:Ms.x===Ss.x?hs.x:Ms.x*ls,y:Ms.y===Ss.y?hs.y:Ms.y*ls},fs.unshift(hs)),vs=Ms.id,gs=Ms.x,ys=Ms.y,ms=rs[vs]}return fs[0].x=gs===as.x?is.x:hs.x,fs[0].y=ys===as.y?is.y:hs.y,fs.unshift(is),fs},pathFinder=function(ts,rs,as,os,is){if(isNaN(ts.x)||isNaN(rs.x))return[];var us=deepMix$2(defaultCfg,is);us.obstacles=us.obstacles||[];var ls=us.penalties,fs=us.gridSize,hs=getObstacleMap(us.obstacles.concat([as,os]),fs,us.offset),vs={x:pos2GridIx(ts.x,fs),y:pos2GridIx(ts.y,fs)},gs={x:pos2GridIx(rs.x,fs),y:pos2GridIx(rs.y,fs)};ts.id="".concat(vs.x,"|||").concat(vs.y),rs.id="".concat(gs.x,"|||").concat(gs.y);var ys=getBoxPoints(vs,ts,as,gs,us),xs=getBoxPoints(gs,rs,os,vs,us);ys.forEach(function(Vs){delete hs[Vs.id]}),xs.forEach(function(Vs){delete hs[Vs.id]});for(var ms={},Ss={},Ms={},$s={},bs={},Cs=new SortedArray,As=0;As<ys.length;As++){var Is=ys[As];ms[Is.id]=Is,$s[Is.id]=0,bs[Is.id]=estimateCost(Is,xs,us.distFunc),Cs.add({id:Is.id,value:bs[Is.id]})}var ks=us.maximumLoops,Ps,Ds,Fs,Rs,js,zs,Us=1/0,Ys={};for(xs.forEach(function(Vs){Ys["".concat(Vs.x,"|||").concat(Vs.y)]=!0}),Object.keys(ms).forEach(function(Vs){var Zs=ms[Vs].id;bs[Zs]<=Us&&(Us=bs[Zs],Ps=ms[Zs])});Object.keys(ms).length>0&&ks>0;){var Ks=Cs.minId((ks+1)%30===0);if(Ks)Ps=ms[Ks];else break;if(Ys["".concat(Ps.x,"|||").concat(Ps.y)])return getControlPoints(Ps,Ms,vs,rs,ts,gs,fs);delete ms[Ps.id],Cs.remove(Ps.id),Ss[Ps.id]=!0;for(var As=0;As<us.directions.length;As++){Ds=us.directions[As];var qs="".concat(Math.round(Ps.x)+Ds.stepX,"|||").concat(Math.round(Ps.y)+Ds.stepY);if(Fs={x:Ps.x+Ds.stepX,y:Ps.y+Ds.stepY,id:qs},!Ss[qs]&&(zs=getDirectionChange(Ps,Fs,Ms,vs),!(zs>us.maxAllowedDirectionChange)&&!hs[qs])){ms[qs]||(ms[qs]=Fs);var _l=ls[zs];Rs=us.distFunc(Ps,Fs)+(isNaN(_l)?fs:_l),js=$s[Ps.id]+Rs;var Js=$s[qs];Js&&js>=Js||(Ms[qs]=Ps,$s[qs]=js,bs[qs]=js+estimateCost(Fs,xs,us.distFunc),Cs.add({id:qs,value:bs[qs]}))}}ks-=1}return us.fallbackRoute(ts,rs,as,os,us)};registerEdge("polyline",{options:{color:BaseGlobal$1.defaultEdge.color,size:BaseGlobal$1.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:BaseGlobal$1.defaultEdge.style.stroke,lineAppendWidth:BaseGlobal$1.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:BaseGlobal$1.edgeLabel.style.fill,fontSize:BaseGlobal$1.edgeLabel.style.fontSize,fontFamily:BaseGlobal$1.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:__assign$h({},BaseGlobal$1.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(ts,rs){var as=this.getShapeStyle(ts);as.radius===0&&delete as.radius;var os=rs.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:as});return rs.shapeMap["edge-shape"]=os,os},getShapeStyle:function(ts){var rs=this.options.style,as={stroke:ts.color},os=mix$1({},rs,as,ts.style);ts=this.getPathPoints(ts),this.radius=os.radius,this.offset=os.offset;var is=ts.startPoint,us=ts.endPoint,ls=this.getControlPoints(ts),fs=[is];ls&&(fs=fs.concat(ls)),fs.push(us);var hs=ts.sourceNode,vs=ts.targetNode,gs=os.radius,ys=this.options.routeCfg,xs=mix$1({},ys,ts.routeCfg);xs.offset=os.offset;var ms=this.getPath(fs,hs,vs,gs,xs,!ls);(isArray$2(ms)&&ms.length<=1||isString$2(ms)&&ms.indexOf("L")===-1)&&(ms="M0 0, L0 0"),(isNaN(is.x)||isNaN(is.y)||isNaN(us.x)||isNaN(us.y))&&(ms="M0 0, L0 0");var Ss=mix$1({},BaseGlobal$1.defaultEdge.style,os,{lineWidth:ts.size,path:ms});return Ss},updateShapeStyle:function(ts,rs){var as=rs.getContainer();if(rs.isVisible()){var os={stroke:ts.color},is=as.shapeMap["edge-shape"]||as.find(function(As){return As.get("className")==="edge-shape"})||rs.getKeyShape(),us=ts.size;ts=this.getPathPoints(ts);var ls=ts.startPoint,fs=ts.endPoint,hs=this.getControlPoints(ts),vs=[ls];hs&&(vs=vs.concat(hs)),vs.push(fs);var gs=is.attr(),ys=mix$1({},os,gs,ts.style),xs=ts.sourceNode,ms=ts.targetNode,Ss=ys.radius,Ms=this.options.routeCfg,$s=mix$1({},Ms,ts.routeCfg);$s.offset=ys.offset;var bs=this.getPath(vs,xs,ms,Ss,$s,!hs);(isArray$2(bs)&&bs.length<=1||isString$2(bs)&&bs.indexOf("L")===-1)&&(bs="M0 0, L0 0"),(isNaN(ls.x)||isNaN(ls.y)||isNaN(fs.x)||isNaN(fs.y))&&(bs="M0 0, L0 0"),gs.endArrow&&ys.endArrow===!1&&(ts.style.endArrow={path:""}),gs.startArrow&&ys.startArrow===!1&&(ts.style.startArrow={path:""});var Cs=mix$1(os,is.attr(),{lineWidth:us,path:bs},ts.style);is&&is.attr(Cs)}},getPath:function(ts,rs,as,os,is,us){var ls=is.offset,fs=is.obstacles,hs=is.simple;if(!ls||ts.length>2||us===!1){if(os)return getPathWithBorderRadiusByPolyline(ts,os);var vs=[];return each$1(ts,function(ms,Ss){Ss===0?vs.push(["M",ms.x,ms.y]):vs.push(["L",ms.x,ms.y])}),vs}hs!==!1&&!(fs!=null&&fs.length)&&(hs=!0);var gs=hs?getPolylinePoints(ts[ts.length-1],ts[0],as,rs,ls):pathFinder(ts[0],ts[ts.length-1],rs,as,is);if(!gs||!gs.length)return"M0 0, L0 0";if(os){var ys=getPathWithBorderRadiusByPolyline(gs,os);return ys}gs=removeRedundantPoint(gs);var xs=Util$1.pointsToPolygon(gs);return xs}},"single-edge");var cloneEvent$1=G6Util.cloneEvent,isNaN$2=G6Util.isNaN,abs$1=Math.abs,DRAG_OFFSET=10,ALLOW_EVENTS$8=["shift","ctrl","alt","control"];const DragCanvas={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(ts){var rs=this.origin,as=+ts.clientX,os=+ts.clientY;if(!(isNaN$2(as)||isNaN$2(os))){var is=as-rs.x,us=os-rs.y;this.get("direction")==="x"?us=0:this.get("direction")==="y"&&(is=0),this.origin={x:as,y:os};var ls=this.graph.get("width"),fs=this.graph.get("height"),hs=this.graph.get("canvas").getCanvasBBox(),vs=this.scalableRange,gs=this.scalableRange;vs<1&&vs>-1&&(vs=ls*vs,gs=fs*gs),(hs.minX<=ls+vs&&hs.minX+is>ls+vs||hs.maxX+vs>=0&&hs.maxX+vs+is<0)&&(is=0),(hs.minY<=fs+gs&&hs.minY+us>fs+gs||hs.maxY+gs>=0&&hs.maxY+gs+us<0)&&(us=0),this.graph.translate(is,us)}},onTouchStart:function(ts){var rs=this,as=ts.originalEvent.touches,os=as[0],is=as[1];os&&is||(ts.preventDefault(),this.mousedown=!0,rs.onDragStart(ts))},onMouseDown:function(ts){this.mousedown=!0},onDragMove:function(ts){this.mousedown&&(this.dragstart?this.onDrag(ts):(this.dragstart=!0,this.onDragStart(ts)))},onDragStart:function(ts){var rs=this,as=ts.originalEvent;if(!(as&&ts.name!=="touchstart"&&as.button!==0)&&!(ts.name!=="touchstart"&&typeof window<"u"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(ts,this)&&!rs.keydown&&this.allowDrag(ts)){if(rs.origin={x:ts.clientX,y:ts.clientY},rs.dragging=!1,this.enableOptimize){for(var os=this.graph,is=os.getEdges(),us=0,ls=is.length;us<ls;us++){var fs=is[us].get("group").get("children");fs&&fs.forEach(function(Cs){Cs.set("ori-visibility",Cs.get("ori-visibility")||Cs.get("visible")),Cs.hide()})}for(var hs=os.getNodes(),vs=0,gs=hs.length;vs<gs;vs++)for(var ys=hs[vs].getContainer(),xs=ys.get("children"),ms=0,Ss=xs;ms<Ss.length;ms++){var Ms=Ss[ms],$s=Ms.get("isKeyShape");$s||(Ms.set("ori-visibility",Ms.get("ori-visibility")||Ms.get("visible")),Ms.hide())}}if(typeof window<"u"){var bs=this;this.handleDOMContextMenu=function(Cs){return bs.onMouseUp(Cs)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(ts){var rs=this,as=ts.originalEvent.touches,os=as[0],is=as[1];if(os&&is){this.onMouseUp(ts);return}ts.preventDefault(),rs.onDrag(ts)},onDrag:function(ts){if(this.mousedown){var rs=this.graph;if(!this.keydown&&this.allowDrag(ts)&&(ts=cloneEvent$1(ts),!!this.origin)){if(this.dragging)ts.type="drag",rs.emit("canvas:drag",ts);else{if(abs$1(this.origin.x-ts.clientX)+abs$1(this.origin.y-ts.clientY)<DRAG_OFFSET)return;this.shouldBegin(ts,this)&&(ts.type="dragstart",rs.emit("canvas:dragstart",ts),this.originPosition={x:ts.clientX,y:ts.clientY},this.dragging=!0)}this.shouldUpdate(ts,this)&&this.updateViewport(ts)}}},onMouseUp:function(ts){var rs,as;this.mousedown=!1,this.dragstart=!1;var os=this.graph;if(!this.keydown){var is=os.getZoom(),us=os.get("modeController"),ls=(as=(rs=us==null?void 0:us.modes[us.mode])===null||rs===void 0?void 0:rs.filter(function(Ps){return Ps.type==="zoom-canvas"}))===null||as===void 0?void 0:as[0],fs=ls?ls.optimizeZoom||.1:0;if(this.enableOptimize){for(var hs=os.getEdges(),vs=0,gs=hs.length;vs<gs;vs++){var ys=hs[vs].get("group").get("children");ys&&ys.forEach(function(Ps){var Ds=Ps.get("ori-visibility");Ps.set("ori-visibility",void 0),Ds&&Ps.show()})}if(is>fs)for(var xs=os.getNodes(),ms=0,Ss=xs.length;ms<Ss;ms++)for(var Ms=xs[ms].getContainer(),$s=Ms.get("children"),bs=0,Cs=$s;bs<Cs.length;bs++){var As=Cs[bs],Is=As.get("isKeyShape");if(!Is){var ks=As.get("ori-visibility");As.set("ori-visibility",void 0),ks&&As.show()}}}if(!this.dragging){this.origin=null;return}ts=cloneEvent$1(ts),this.shouldEnd(ts,this)&&this.updateViewport(ts),ts.type="dragend",ts.dx=ts.clientX-this.originPosition.x,ts.dy=ts.clientY-this.originPosition.y,os.emit("canvas:dragend",ts),this.endDrag(),typeof window<"u"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(ts){var rs=this,as=ts.key;as&&(ALLOW_EVENTS$8.indexOf(as.toLowerCase())>-1?rs.keydown=!0:rs.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(ts){var rs,as,os=ts.target,is=os&&os.isCanvas&&os.isCanvas();if(isBoolean$2(this.allowDragOnItem)&&!this.allowDragOnItem&&!is)return!1;if(isObject$1(this.allowDragOnItem)){var us=this.allowDragOnItem,ls=us.node,fs=us.edge,hs=us.combo,vs=(as=(rs=ts.item)===null||rs===void 0?void 0:rs.getType)===null||as===void 0?void 0:as.call(rs);if(!ls&&vs==="node"||!fs&&vs==="edge"||!hs&&vs==="combo")return!1}return!0}},DragNode={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(ts){if(!this.origin||!ts||ts.destroyed)return!1;var rs=ts.getType();return rs==="combo"},onTouchStart:function(ts){if(ts.item){var rs=this;try{var as=ts.originalEvent.touches,os=as[0],is=as[1];if(os&&is)return;ts.preventDefault()}catch{console.warn("Touch original event not exist!")}this.mousedown={item:ts.item,target:ts.target,origin:{x:ts.x,y:ts.y}},this.dragstart=!0,rs.onDragStart(ts)}},onTouchMove:function(ts){var rs=this;try{var as=ts.originalEvent.touches,os=as[0],is=as[1];if(os&&is){rs.onDragEnd(ts);return}ts.preventDefault()}catch{console.warn("Touch original event not exist!")}rs.onDrag(ts)},onMouseDown:function(ts){this.mousedown={item:ts.item,target:ts.target,origin:{x:ts.x,y:ts.y}},typeof window<"u"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(ts){var rs,as;if(((as=(rs=ts.item)===null||rs===void 0?void 0:rs.getType)===null||as===void 0?void 0:as.call(rs))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag(__assign$h(__assign$h({},ts),this.mousedown)):(this.dragstart=!0,this.onDragStart(ts)))},onDragStart:function(ts){var rs=this;if(this.currentShouldEnd=!0,!!this.shouldBegin(__assign$h(__assign$h({},ts),this.mousedown),this)){var as=this.mousedown,os=as.item,is=as.target;if(!(!os||os.destroyed||os.hasLocked())){var us=os.getContainer();if(us.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(os),is){var ls=is.get("isAnchorPoint");if(ls)return}var fs=this.graph;this.targets=[],this.targetCombo=null;var hs=fs.findAllByState("node",this.selectedState),vs=os.get("id"),gs=hs.filter(function(xs){var ms=xs.get("id");return vs===ms});if(gs.length===0?this.targets.push(os):hs.length>1?hs.forEach(function(xs){var ms=xs.hasLocked();ms||rs.targets.push(xs)}):this.targets.push(os),this.graph.get("enabledStack")&&this.enableStack){var ys=[];this.targets.forEach(function(xs){var ms=xs.getModel(),Ss=ms.x,Ms=ms.y,$s=ms.id;ys.push({x:Ss,y:Ms,id:$s})}),this.set("beforeDragNodes",ys)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(xs){var ms=xs.getEdges();ms.forEach(function(Ss){Ss.isVisible()&&(rs.hidenEdge[Ss.getID()]=!0,Ss.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(ts){var rs=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(ts,this))if(this.get("enableDelegate"))this.updateDelegate(ts);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:ts,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var as={};this.targets.map(function(os){rs.update(os,ts);var is=os.getModel().comboId;is&&(as[is]=rs.graph.findById(is))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(ts){var rs=this,as;if(this.mousedown=!1,this.dragstart=!1,typeof window<"u"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(as=this.cachedCaptureItems)===null||as===void 0||as.forEach(function(us){var ls=us.getContainer();ls.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(us){var ls=us.getEdges();ls.forEach(function(fs){rs.hidenEdge[fs.getID()]&&fs.show(),fs.refresh()})}),this.hidenEdge={};var os=this.graph;if(os.get("enabledStack")&&this.enableStack){var is={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(us){is.before.nodes.push(us)}),this.targets.forEach(function(us){var ls=us.getModel(),fs=ls.x,hs=ls.y,vs=ls.id;is.after.nodes.push({x:fs,y:hs,id:vs})}),os.pushStack("update",clone$b(is))}os.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(ts){var rs=ts.item;if(this.currentShouldEnd=this.shouldEnd(ts,rs,this),this.updatePositions(ts,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(rs))){var as=this.graph;if(this.comboActiveState&&as.setItemState(rs,this.comboActiveState,!1),this.targetCombo=rs,this.onlyChangeComboSize)as.updateCombos();else{var os=rs.getModel();this.targets.map(function(is){var us=is.getModel();us.comboId!==os.id&&as.updateComboTree(is,os.id)}),as.updateCombo(rs)}as.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(ts){var rs=this.graph;this.currentShouldEnd=this.shouldEnd(ts,void 0,this),this.updatePositions(ts,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(as){var os=as.getModel();os.comboId&&rs.updateComboTree(as)}))},onDropNode:function(ts){if(!(!this.targets||this.targets.length===0)){var rs=this,as=ts.item,os=rs.graph,is=as.getModel().comboId,us=is?os.findById(is):void 0;if(this.currentShouldEnd=this.shouldEnd(ts,us,this),this.updatePositions(ts,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(is){var ls=os.findById(is);rs.comboActiveState&&os.setItemState(ls,rs.comboActiveState,!1),this.targets.map(function(fs){var hs=fs.getModel();is!==hs.comboId&&os.updateComboTree(fs,is)}),os.updateCombo(ls)}else this.targets.map(function(fs){var hs=fs.getModel();hs.comboId&&os.updateComboTree(fs)});os.emit("dragnodeend",{items:this.targets,targetItem:as})}}},onDragEnter:function(ts){var rs=ts.item;if(this.validationCombo(rs)){var as=this.graph;this.comboActiveState&&as.setItemState(rs,this.comboActiveState,!0)}},onDragLeave:function(ts){var rs=ts.item;if(this.validationCombo(rs)){var as=this.graph;this.comboActiveState&&as.setItemState(rs,this.comboActiveState,!1)}},updatePositions:function(ts,rs){var as=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:ts,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):rs||this.targets.map(function(os){return as.update(os,ts)}):this.targets.map(function(os){return as.update(os,ts,rs)}))},update:function(ts,rs,as){var os=this.origin,is=ts.get("model"),us=ts.get("id");this.point[us]||(this.point[us]={x:is.x||0,y:is.y||0});var ls=rs.x-os.x+this.point[us].x,fs=rs.y-os.y+this.point[us].y;as&&(ls+=os.x-rs.x,fs+=os.y-rs.y);var hs={x:ls,y:fs};this.get("updateEdge")?this.graph.updateItem(ts,hs,!1):ts.updatePosition(hs)},debounceUpdate:debounce$1(function(ns){var ts=ns.targets,rs=ns.graph,as=ns.point,os=ns.origin,is=ns.evt,us=ns.updateEdge,ls=ns.onlyChangeComboSize,fs=ns.updateParentCombos;ts.map(function(hs){var vs=hs.get("model"),gs=hs.get("id");as[gs]||(as[gs]={x:vs.x||0,y:vs.y||0});var ys=is.x-os.x+as[gs].x,xs=is.y-os.y+as[gs].y,ms={x:ys,y:xs};us?rs.updateItem(hs,ms,!1):hs.updatePosition(ms)}),ls&&fs(rs,ts)},50,!0),updateDelegate:function(ts){var rs=this.graph;if(this.delegateRect){var ys=ts.x-this.origin.x+this.originPoint.minX,xs=ts.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:ys,y:xs})}else{var as=rs.get("group"),os=deepMix$2({},Global$1.delegateStyle,this.delegateStyle),is=this.calculationGroupPosition(ts),us=is.x,ls=is.y,fs=is.width,hs=is.height,vs=is.minX,gs=is.minY;this.originPoint={x:us,y:ls,width:fs,height:hs,minX:vs,minY:gs},this.delegateRect=as.addShape("rect",{attrs:__assign$h({width:fs,height:hs,x:us,y:ls},os),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(ts){var rs=this.targets;rs.length===0&&rs.push(ts.item);for(var as=1/0,os=-1/0,is=1/0,us=-1/0,ls=0;ls<rs.length;ls++){var fs=rs[ls],hs=fs.getBBox(),vs=hs.minX,gs=hs.minY,ys=hs.maxX,xs=hs.maxY;vs<as&&(as=vs),gs<is&&(is=gs),ys>os&&(os=ys),xs>us&&(us=xs)}var ms=Math.floor(as),Ss=Math.floor(is),Ms=Math.ceil(os)-Math.floor(as),$s=Math.ceil(us)-Math.floor(is);return{x:ms,y:Ss,width:Ms,height:$s,minX:as,minY:is}},updateParentCombos:function(ts,rs){var as=ts||this.graph,os=rs||this.targets,is={};os==null||os.forEach(function(us){var ls=us.getModel().comboId;ls&&(is[ls]=as.findById(ls))}),Object.values(is).forEach(function(us){us&&as.updateCombo(us)})}};var clickNodeId=null;const ActivateRelations={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldClearStatusOnSecond:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(ts){var rs=this;try{var as=ts.originalEvent.touches,os=as[0],is=as[1];if(os&&is)return;ts.preventDefault()}catch{console.warn("Touch original event not exist!")}rs.setAllItemStates(ts)},clearOnTouchStart:function(ts){var rs=this;try{var as=ts.originalEvent.touches,os=as[0],is=as[1];if(os&&is)return;ts.preventDefault()}catch{console.warn("Touch original event not exist!")}rs.clearActiveState(ts)},setAllItemStates:function(ts){clearTimeout(this.timer),this.throttleSetAllItemStates(ts,this)},clearActiveState:function(ts){var rs=this,as=this.shouldClearStatusOnSecond;as&&(clickNodeId=null),this.timer=setTimeout(function(){rs.throttleClearActiveState(ts,rs)},50)},throttleSetAllItemStates:throttle$1(function(ns,ts){var rs=ns.item,as=ts.graph;if(!(!as||as.destroyed)&&(ts.item=rs,!!ts.shouldUpdate(ns.item,{event:ns,action:"activate"},ts))){var os=ts.shouldClearStatusOnSecond,is=rs.getModel().id;if(clickNodeId===is&&os){ts.throttleClearActiveState(ns,ts),clickNodeId=null;return}for(var us=ts.activeState,ls=ts.inactiveState,fs=as.getNodes(),hs=as.getCombos(),vs=as.getEdges(),gs=as.get("vedges"),ys=fs.length,xs=hs.length,ms=vs.length,Ss=gs.length,Ms=ts.inactiveItems||{},$s=ts.activeItems||{},bs=0;bs<ys;bs++){var Cs=fs[bs],As=Cs.getID(),Is=Cs.hasState("selected");ts.resetSelected&&Is&&as.setItemState(Cs,"selected",!1),$s[As]&&(as.setItemState(Cs,us,!1),delete $s[As]),ls&&!Ms[As]&&(as.setItemState(Cs,ls,!0),Ms[As]=Cs)}for(var bs=0;bs<xs;bs++){var ks=hs[bs],Ps=ks.getID(),Is=ks.hasState("selected");ts.resetSelected&&Is&&as.setItemState(ks,"selected",!1),$s[Ps]&&(as.setItemState(ks,us,!1),delete $s[Ps]),ls&&!Ms[Ps]&&(as.setItemState(ks,ls,!0),Ms[Ps]=ks)}for(var bs=0;bs<ms;bs++){var Ds=vs[bs],Fs=Ds.getID();$s[Fs]&&(as.setItemState(Ds,us,!1),delete $s[Fs]),ls&&!Ms[Fs]&&(as.setItemState(Ds,ls,!0),Ms[Fs]=Ds)}for(var bs=0;bs<Ss;bs++){var Rs=gs[bs],js=Rs.getID();$s[js]&&(as.setItemState(Rs,us,!1),delete $s[js]),ls&&!Ms[js]&&(as.setItemState(Rs,ls,!0),Ms[js]=Rs)}if(rs&&!rs.destroyed){ls&&(as.setItemState(rs,ls,!1),delete Ms[rs.getID()]),$s[rs.getID()]||(as.setItemState(rs,us,!0),$s[rs.getID()]=rs);for(var zs=rs.getEdges(),Us=zs.length,bs=0;bs<Us;bs++){var Ds=zs[bs],Fs=Ds.getID(),Ys=void 0;Ds.getSource()===rs?Ys=Ds.getTarget():Ys=Ds.getSource();var Ks=Ys.getID();ls&&Ms[Ks]&&(as.setItemState(Ys,ls,!1),delete Ms[Ks]),$s[Ks]||(as.setItemState(Ys,us,!0),$s[Ks]=Ys),Ms[Fs]&&(as.setItemState(Ds,ls,!1),delete Ms[Fs]),$s[Fs]||(as.setItemState(Ds,us,!0),$s[Fs]=Ds),Ds.toFront()}}ts.activeItems=$s,ts.inactiveItems=Ms,os&&(clickNodeId=rs.getModel().id),as.emit("afteractivaterelations",{item:ns.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:throttle$1(function(ns,ts){var rs=ts.get("graph");if(!(!rs||rs.destroyed)&&ts.shouldUpdate(ns.item,{event:ns,action:"deactivate"},ts)){var as=ts.activeState,os=ts.inactiveState,is=ts.activeItems||{},us=ts.inactiveItems||{};Object.values(is).filter(function(ls){return!ls.destroyed}).forEach(function(ls){rs.clearItemStates(ls,as)}),Object.values(us).filter(function(ls){return!ls.destroyed}).forEach(function(ls){rs.clearItemStates(ls,os)}),ts.activeItems={},ts.inactiveItems={},rs.emit("afteractivaterelations",{item:ns.item||ts.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})};var min=Math.min,max=Math.max,abs=Math.abs,DEFAULT_TRIGGER$6="shift",ALLOW_EVENTS$7=["drag","shift","ctrl","alt","control"];const BrushSelect={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:DEFAULT_TRIGGER$6,includeEdges:!0,includeCombos:!1,selectOnCombo:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return ALLOW_EVENTS$7.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=DEFAULT_TRIGGER$6,console.warn("Behavior brush-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(ts){var rs=ts.item,as=this.brush,os=this.selectOnCombo,is=(rs==null?void 0:rs.getType())==="combo";is&&!os||!is&&rs||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),as||(as=this.createBrush()),this.originPoint={x:ts.canvasX,y:ts.canvasY},as.attr({width:0,height:0}),as.show(),this.dragging=!0)},onMouseMove:function(ts){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(ts))},onMouseUp:function(ts){this.graph,!(!this.brush&&!this.dragging)&&(this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(ts),this.dragging=!1))},clearStates:function(){var ts=this,rs=ts.graph,as=ts.selectedState,os=rs.findAllByState("node",as),is=rs.findAllByState("edge",as),us=rs.findAllByState("combo",as);os.forEach(function(ls){return rs.setItemState(ls,as,!1)}),is.forEach(function(ls){return rs.setItemState(ls,as,!1)}),us.forEach(function(ls){return rs.setItemState(ls,as,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),rs.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(ts,rs,as,os,is){var us=ts.getBBox();return us.centerX>=rs&&us.centerX<=as&&us.centerY>=os&&us.centerY<=is},getSelectedNodes:function(ts){var rs=this,as=this,os=as.graph,is=as.originPoint,us=as.shouldUpdate,ls=as.isBBoxCenterInRect,fs=this.selectedState,hs={x:ts.x,y:ts.y},vs=os.getPointByCanvas(is.x,is.y),gs=min(hs.x,vs.x),ys=max(hs.x,vs.x),xs=min(hs.y,vs.y),ms=max(hs.y,vs.y),Ss=[],Ms=[];os.getNodes().forEach(function(Cs){if(Cs.isVisible()&&ls(Cs,gs,ys,xs,ms)&&us(Cs,"select",rs)){Ss.push(Cs);var As=Cs.getModel();Ms.push(As.id),os.setItemState(Cs,fs,!0)}});var $s=[];this.includeEdges&&Ss.forEach(function(Cs){var As=Cs.getOutEdges();As.forEach(function(Is){if(Is.isVisible()){var ks=Is.getModel(),Ps=ks.source,Ds=ks.target;Ms.includes(Ps)&&Ms.includes(Ds)&&us(Is,"select",rs)&&($s.push(Is),os.setItemState(Is,rs.selectedState,!0))}})});var bs=[];this.includeCombos&&os.getCombos().forEach(function(Cs){if(Cs.isVisible()&&ls(Cs,gs,ys,xs,ms)&&us(Cs,"select",rs)){bs.push(Cs);var As=Cs.getModel();Ms.push(As.id),os.setItemState(Cs,fs,!0)}}),this.selectedEdges=$s,this.selectedNodes=Ss,this.selectedCombos=bs,this.onSelect&&this.onSelect(Ss,$s,bs),os.emit("nodeselectchange",{selectedItems:{nodes:Ss,edges:$s,combos:bs},select:!0})},createBrush:function(){var ts=this,rs=ts.graph.get("canvas").addShape("rect",{attrs:ts.brushStyle,capture:!1,name:"brush-shape"});return this.brush=rs,this.delegate=rs,rs},updateBrush:function(ts){var rs=this.originPoint;this.brush.attr({width:abs(ts.canvasX-rs.x),height:abs(ts.canvasY-rs.y),x:min(ts.canvasX,rs.x),y:min(ts.canvasY,rs.y)})},onKeyDown:function(ts){var rs=ts.key;if(rs){var as=this.trigger.toLowerCase(),os=rs.toLowerCase();os===as||os==="control"&&as==="ctrl"||os==="ctrl"&&as==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}};var DEFAULT_TRIGGER$5="shift",ALLOW_EVENTS$6=["shift","ctrl","alt","control"];const ClickSelect={getDefaultCfg:function(){return{multiple:!0,trigger:DEFAULT_TRIGGER$5,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var ts=this;return ALLOW_EVENTS$6.indexOf(ts.trigger.toLowerCase())>-1||(ts.trigger=DEFAULT_TRIGGER$5,console.warn("Behavior click-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),ts.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(ts){var rs=this,as=ts.item;if(!(!as||as.destroyed)){var os=as.getType(),is=rs.graph,us=rs.keydown,ls=rs.multiple,fs=rs.shouldUpdate,hs=rs.shouldBegin;if(hs(ts,rs)){if(!us||!ls){var vs=is.findAllByState("node",rs.selectedState).concat(is.findAllByState("edge",rs.selectedState)).concat(is.findAllByState("combo",rs.selectedState));each$1(vs,function(Ss){Ss!==as&&is.setItemState(Ss,rs.selectedState,!1)})}var gs=function(){switch(os){case"node":return rs.selectNode;case"edge":return rs.selectEdge;case"combo":return rs.selectCombo;default:return!1}}();if(!gs){var ys=is.findAllByState("node",rs.selectedState),xs=is.findAllByState("edge",rs.selectedState),ms=is.findAllByState("combo",rs.selectedState);is.emit("nodeselectchange",{selectedItems:{nodes:ys,edges:xs,combos:ms},select:!1});return}if(as.hasState(rs.selectedState)){fs(ts,rs)&&is.setItemState(as,rs.selectedState,!1);var ys=is.findAllByState("node",rs.selectedState),xs=is.findAllByState("edge",rs.selectedState),ms=is.findAllByState("combo",rs.selectedState);is.emit("nodeselectchange",{target:as,selectedItems:{nodes:ys,edges:xs,combos:ms},select:!1})}else{fs(ts,rs)&&is.setItemState(as,rs.selectedState,!0);var ys=is.findAllByState("node",rs.selectedState),xs=is.findAllByState("edge",rs.selectedState),ms=is.findAllByState("combo",rs.selectedState);is.emit("nodeselectchange",{target:as,selectedItems:{nodes:ys,edges:xs,combos:ms},select:!0})}}}},onCanvasClick:function(ts){var rs=this,as=this,os=as.graph,is=as.shouldBegin;if(is(ts,this)){var us=os.findAllByState("node",this.selectedState);each$1(us,function(hs){os.setItemState(hs,rs.selectedState,!1)});var ls=os.findAllByState("edge",this.selectedState);each$1(ls,function(hs){os.setItemState(hs,rs.selectedState,!1)});var fs=os.findAllByState("combo",this.selectedState);each$1(fs,function(hs){os.setItemState(hs,rs.selectedState,!1)}),os.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(ts){var rs=this,as=ts.key;as&&(as.toLowerCase()===this.trigger.toLowerCase()||as.toLowerCase()==="control"?rs.keydown=!0:rs.keydown=!1)},onKeyUp:function(){var ts=this;ts.keydown=!1}};var transform$4=transform$i,DELTA=.05;const ZoomCanvas={getDefaultCfg:function(){return this.isFireFox=getBrowserName()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var ts=this.fixSelectedItems;return ts.fixState||(ts.fixState="selected"),ts.fixAll&&(ts.fixLineWidth=!0,ts.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(ts){var rs=ts.originalEvent.touches,as=rs[0],os=rs[1];ts.preventDefault(),os&&(this.shouldBegin&&!this.shouldBegin(ts,this)||(this.startPoint={pageX:as.pageX,pageY:as.pageY},this.moveable=!0,os&&(this.endPoint={pageX:os.pageX,pageY:os.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(ts){if(this.moveable){ts.preventDefault();var rs=ts.originalEvent.touches,as=rs[0],os=rs[1];if(os){this.endPoint||(this.endPoint={pageX:os.pageX,pageY:os.pageY});var is=function(Ss,Ms){return Math.hypot(Ms.x-Ss.x,Ms.y-Ss.y)},us=is({x:as.pageX,y:as.pageY},{x:os.pageX,y:os.pageY})/is({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),ls=this.originScale*us;this.currentScale=ls;var fs=this.get("minZoom")||this.graph.get("minZoom"),hs=this.get("maxZoom")||this.graph.get("maxZoom");if(!(ls>hs||ls<fs)){var vs=this.get("animate"),gs=this.get("animateCfg"),ys=this.graph.get("canvas"),xs=ys.getPointByClient(ts.clientX,ts.clientY);this.graph.zoomTo(ls,{x:xs.x,y:xs.y},vs,gs),this.graph.emit("wheelzoom",ts)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(ts){var rs=this,as=this,os=as.graph,is=as.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(ts,this))&&this.shouldUpdate(ts,this)){ts.preventDefault();var us=os.get("canvas"),ls=us.getPointByClient(ts.clientX,ts.clientY),fs=this.get("sensitivity"),hs=os.getZoom(),vs=hs,gs=hs;this.isFireFox?ts.deltaY>0||ts.wheelDelta<0?vs=1-DELTA*fs:vs=1/(1-DELTA*fs):ts.wheelDelta<0?vs=1-DELTA*fs:vs=1/(1-DELTA*fs),gs=hs*vs;var ys=this.get("minZoom")||os.get("minZoom"),xs=this.get("maxZoom")||os.get("maxZoom");gs>xs?gs=xs:gs<ys&&(gs=ys);var ms=this.get("enableOptimize");if(ms){var Ss=this.get("optimizeZoom"),Ms=this.get("optimized"),$s=os.getNodes(),bs=os.getEdges(),Cs=$s.length,As=bs.length;if(!Ms){for(var Is=0;Is<Cs;Is++){var ks=$s[Is];if(!ks.destroyed)for(var Ps=ks.get("group").get("children"),Ds=Ps.length,Fs=0;Fs<Ds;Fs++){var Rs=Ps[Fs];!Rs.destoryed&&!Rs.get("isKeyShape")&&(Rs.set("ori-visibility",Rs.get("ori-visibility")||Rs.get("visible")),Rs.hide())}}for(var js=0;js<As;js++)for(var zs=bs[js],Ps=zs.get("group").get("children"),Ds=Ps.length,Fs=0;Fs<Ds;Fs++){var Rs=Ps[Fs];Rs.set("ori-visibility",Rs.get("ori-visibility")||Rs.get("visible")),Rs.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Us=setTimeout(function(){var j0=os.getZoom(),Ul=rs.get("optimized");if(Ul){rs.set("optimized",!1);for(var Xs=0;Xs<Cs;Xs++){var d0=$s[Xs],M0=d0.get("group").get("children"),i0=M0.length;if(j0<Ss){var k0=d0.getKeyShape(),P0=k0.get("ori-visibility");k0.set("ori-visibility",void 0),P0&&k0.show()}else for(var B0=0;B0<i0;B0++){var G0=M0[B0],P0=G0.get("ori-visibility");G0.set("ori-visibility",void 0),!G0.get("visible")&&P0&&P0&&G0.show()}}for(var rv=0;rv<As;rv++){var xv=bs[rv],M0=xv.get("group").get("children"),i0=M0.length;if(j0<Ss){var k0=xv.getKeyShape(),P0=k0.get("ori-visibility");k0.set("ori-visibility",void 0),P0&&k0.show()}else for(var B0=0;B0<i0;B0++){var G0=M0[B0];if(!G0.get("visible")){var P0=G0.get("ori-visibility");G0.set("ori-visibility",void 0),P0&&G0.show()}}}}},100);this.set("timeout",Us)}if(hs<=1){var Ys=void 0,Ks=void 0;if(is.fixAll||is.fixLineWidth||is.fixLabel){Ys=os.findAllByState("node",is.fixState),Ks=os.findAllByState("edge",is.fixState);for(var qs=hs/gs,_l=Ys.length,Js=0;Js<_l;Js++){var ks=Ys[Js],Vs=ks.getContainer(),Zs=ks.getModel(),Sl=ks.getOriginStyle(),Il=ks.getStateStyle(is.fixState),Nl=ks.get("shapeFactory").getShape(Zs.type).getStateStyle(is.fixState,ks)[is.fixState];if(is.fixAll){if(gs<=1){var Tl=clone$b(Vs.getMatrix());Tl||(Tl=[1,0,0,0,1,0,0,0,1]);var _c=ks.getModel(),l0=_c.x,g0=_c.y;Tl=transform$4(Tl,[["t",-l0,-g0],["s",qs,qs],["t",l0,g0]]),Vs.setMatrix(Tl)}}else for(var Ps=Vs.get("children"),Ds=Ps.length,Fs=0;Fs<Ds;Fs++){var Rs=Ps[Fs],R0=void 0,V0=void 0;if(is.fixLabel){var U0=Rs.get("type");if(U0==="text"){R0=Rs.attr("fontSize")||12;var tv=Il[Rs.get("name")],Os=Nl[Rs.get("name")],ov=tv?tv.fontSize:12,$v=Os?Os.fontSize:12,Lv=ov||$v||12;if(gs<=1&&Rs.attr("fontSize",Lv/gs),V0)break}}if(is.fixLineWidth&&Rs.get("isKeyShape")){V0=Rs.attr("lineWidth")||0;var Jv=Il.lineWidth||Nl.lineWidth||Sl.lineWidth||0;if(gs<=1&&Rs.attr("lineWidth",Jv/gs),R0)break}}}for(var Yv=Ks.length,Pv=0;Pv<Yv;Pv++)for(var zs=Ks[Pv],Vs=zs.getContainer(),Ps=Vs.get("children"),Zs=zs.getModel(),Il=zs.getStateStyle(is.fixState),Nl=zs.get("shapeFactory").getShape(Zs.type).getStateStyle(is.fixState,zs)[is.fixState],Ds=Ps.length,Fs=0;Fs<Ds;Fs++){var Rs=Ps[Fs],R0=void 0,V0=void 0;if(is.fixLabel||is.fixAll){var U0=Rs.get("type");if(U0==="text"){R0=Rs.attr("fontSize")||12;var tv=Il[Rs.get("name")],Os=Nl[Rs.get("name")],ov=tv?tv.fontSize:12,$v=Os?Os.fontSize:12,Lv=ov||$v||12;if(gs<=1&&Rs.attr("fontSize",Lv/gs),V0)break}}if((is.fixLineWidth||is.fixAll)&&Rs.get("isKeyShape")){V0=Rs.attr("lineWidth")||0;var Jv=Il.lineWidth||Nl.lineWidth||1;if(gs<=1&&Rs.attr("lineWidth",Jv/gs),R0)break}}}}var jv=this.get("animate"),wp=this.get("animateCfg");os.zoomTo(gs,{x:ls.x,y:ls.y},jv,wp),os.emit("wheelzoom",ts)}}},base={onMouseEnter:function(ts){var rs=ts.item;this.currentTarget=rs,this.showTooltip(ts),this.graph.emit("tooltipchange",{item:ts.item,action:"show"})},onMouseMove:function(ts){if(!this.shouldUpdate(ts,this)){this.hideTooltip();return}!this.currentTarget||ts.item!==this.currentTarget||this.updatePosition(ts)},onMouseLeave:function(ts){this.shouldEnd(ts,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(ts){var rs=this.container;if(!(!ts.item||ts.item.destroyed)){rs||(rs=this.createTooltip(this.graph.get("canvas")),this.container=rs);var as=this.formatText(ts.item.get("model"),ts);rs.innerHTML=as,modifyCSS$1(this.container,{visibility:"visible"}),this.updatePosition(ts)}},hideTooltip:function(){modifyCSS$1(this.container,{visibility:"hidden"})},updatePosition:function(ts){var rs=this.get("shouldBegin"),as=this,os=as.width,is=as.height,us=as.container,ls=as.graph;if(!rs(ts,this)){modifyCSS$1(us,{visibility:"hidden"});return}var fs=ls.getPointByClient(ts.clientX,ts.clientY),hs=ls.getCanvasByPoint(fs.x,fs.y),vs=hs.x,gs=hs.y,ys=us.getBoundingClientRect();vs>os/2?vs-=ys.width:vs+=this.offset,gs>is/2?gs-=ys.height:gs+=this.offset;var xs="".concat(vs,"px"),ms="".concat(gs,"px");modifyCSS$1(this.container,{left:xs,top:ms,visibility:"visible"})},createTooltip:function(ts){var rs=ts.get("el");rs.style.position="relative";var as=createDom('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return rs.parentNode.appendChild(as),modifyCSS$1(as,{position:"absolute",visibility:"visible"}),this.width=ts.get("width"),this.height=ts.get("height"),this.container=as,this.graph.get("tooltips").push(as),as}},Tooltip=__assign$h({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(rs){return rs.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},base),EdgeTooltip=__assign$h({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(rs){return"source: ".concat(rs.source," target: ").concat(rs.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},base);var DEFAULT_TRIGGER$4="click",ALLOW_EVENTS$5=["click","dblclick"];const CollapseExpand={getDefaultCfg:function(){return{trigger:DEFAULT_TRIGGER$4,onChange:function(){}}},getEvents:function(){var ts,rs;return ALLOW_EVENTS$5.includes(this.trigger)?rs=this.trigger:(rs=DEFAULT_TRIGGER$4,console.warn("Behavior collapse-expand 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),ts={},ts["node:".concat(rs)]="onNodeClick",ts.touchstart="onNodeClick",ts},onNodeClick:function(ts){var rs=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){rs.toggle(ts),clearTimeout(rs.timer),rs.timer=0},200)}else this.toggle(ts)},toggle:function(ts){var rs=ts.item;if(rs){var as=this.graph.findDataById(rs.get("id"));if(as){var os=as.children;if(!(!os||os.length===0)){var is=!as.collapsed;this.shouldBegin(ts,is,this)&&(as.collapsed=is,rs.getModel().collapsed=is,this.graph.emit("itemcollapsed",{item:ts.item,collapsed:is}),this.shouldUpdate(ts,is,this)&&(this.onChange(rs,is,this),this.graph.layout()))}}}}};var calculationItemsBBox$1=G6Util.calculationItemsBBox,traverseCombo=function ns(ts,rs){if(rs(ts)!==!1&&ts){var as=ts.get("combos");if(as.length===0)return!1;each$1(as,function(os){ns(os,rs)})}};const DragCombo={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(ts){var rs=ts.item;if(!rs||rs.destroyed||!this.shouldUpdate(ts,this))return!1;var as=rs.getType();return as==="combo"},onMouseDown:function(ts){this.origin={x:ts.x,y:ts.y}},onDragStart:function(ts){var rs=this,as=this.graph,os=ts.item;if(this.currentShouldEnd=!0,!!this.validationCombo(ts)){this.targets=[];var is=as.findAllByState("combo",this.selectedState),us=os.get("id"),ls=is.filter(function(hs){var vs=hs.get("id");return us===vs});ls.length===0?this.targets.push(os):this.targets=is;var fs=[];this.targets.forEach(function(hs){var vs=hs.getModel(),gs=vs.x,ys=vs.y,xs=vs.id;fs.push({x:gs,y:ys,id:xs})}),this.set("beforeDragItems",fs),this.activeState&&this.targets.map(function(hs){var vs=hs.getModel();if(vs.parentId){var gs=as.findById(vs.parentId);gs&&as.setItemState(gs,rs.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],traverseCombo(os,function(hs){if(hs.destroyed)return!1;var vs=hs.getModel();return rs.currentItemChildCombos.push(vs.id),!0})}},onDrag:function(ts){var rs=this;if(this.origin&&this.validationCombo(ts))if(this.enableDelegate)this.updateDelegate(ts);else{if(this.activeState){var as=this.graph,os=ts.item,is=os.getModel(),us=as.getCombos(),ls=os.getBBox(),fs=ls.centerX,hs=ls.centerY,vs=ls.width,gs=us.filter(function(ys){var xs=ys.getModel();return is.parentId,xs.id!==is.id&&!rs.currentItemChildCombos.includes(xs.id)});gs.map(function(ys){var xs=ys.getBBox(),ms=xs.centerX,Ss=xs.centerY,Ms=xs.width,$s=fs-ms,bs=hs-Ss,Cs=2*Math.sqrt($s*$s+bs*bs);vs+Ms-Cs>.8*vs?as.setItemState(ys,rs.activeState,!0):as.setItemState(ys,rs.activeState,!1)})}each$1(this.targets,function(ys){rs.updateCombo(ys,ts)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(ts,rs){var as=this;(this.enableDelegate||rs)&&each$1(this.targets,function(os){as.updateCombo(os,ts,rs)})},onDrop:function(ts){var rs=this,as=ts.item;if(this.currentShouldEnd=this.shouldEnd(ts,as,this),this.updatePositions(ts,!this.currentShouldEnd),!(!this.currentShouldEnd||!as||!this.targets||as.destroyed)){var os=this.graph,is=as.getModel();this.targets.map(function(us){var ls=us.getModel();ls.parentId!==is.id?(rs.activeState&&os.setItemState(as,rs.activeState,!1),rs.onlyChangeComboSize?os.updateCombo(us):os.updateComboTree(us,is.id,!1)):os.updateCombo(as)}),this.end(as,ts),this.endComparison=!0}},onNodeDrop:function(ts){var rs=this;if(!(!this.targets||this.targets.length===0)){var as=this.graph,os=ts.item,is=os.getModel().comboId,us=is?as.findById(is):void 0;if(this.currentShouldEnd=this.shouldEnd(ts,us,this),this.updatePositions(ts,!this.currentShouldEnd),!!this.currentShouldEnd){var ls;if(is){if(this.activeState){var fs=as.findById(is);as.setItemState(fs,this.activeState,!1)}this.targets.map(function(hs){rs.onlyChangeComboSize?as.updateCombo(hs):is!==hs.getID()&&(ls=as.findById(is),is!==hs.getModel().parentId&&as.updateComboTree(hs,is,!1))})}else this.targets.map(function(hs){if(rs.onlyChangeComboSize)as.updateCombo(hs);else{var vs=hs.getModel();vs.comboId&&as.updateComboTree(hs,void 0,!1)}});this.endComparison=!0,this.end(ls,ts)}}},onDragEnter:function(ts){if(this.origin&&this.validationCombo(ts)){var rs=ts.item,as=this.graph;this.activeState&&as.setItemState(rs,this.activeState,!0)}},onDragLeave:function(ts){if(this.origin&&this.validationCombo(ts)){var rs=ts.item,as=this.graph;this.activeState&&as.setItemState(rs,this.activeState,!1)}},onDragEnd:function(ts){if(!(!this.targets||this.targets.length===0)){var rs=ts.item;this.currentShouldEnd&&this.updatePositions(ts);var as=this.getParentCombo(rs.getModel().parentId),os=this.graph;as&&this.activeState&&os.setItemState(as,this.activeState,!1),this.end(void 0,ts)}},end:function(ts,rs){var as=this;if(this.origin){var os=this.graph;if(this.delegateShape){var is=os.get("delegateGroup");is.clear(),this.delegateShape=null}if(ts&&this.activeState&&os.setItemState(ts,this.activeState,!1),!ts){var us=os.get("enabledStack")&&this.enableStack,ls={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(fs){if(!as.onlyChangeComboSize)os.updateComboTree(fs,void 0,us);else{os.updateCombo(fs);var hs=fs.getModel(),vs=hs.x,gs=hs.y,ys=hs.id;ls.after.combos.push({x:vs,y:gs,id:ys}),os.pushStack("update",ls)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(ts,rs,as){var os=this;if(as===void 0&&(as={}),rs(ts,as)!==!1&&ts){var is=ts.get("combos");each$1(is,function(ls){os.traverse(ls,rs,as)});var us=ts.get("nodes");each$1(us,function(ls){os.traverse(ls,rs,as)})}},updateCombo:function(ts,rs,as){this.updateSingleItem(ts,rs,as);var os={};this.traverse(ts,function(is,us){return is.destroyed?!1:(is.getEdges().forEach(function(ls){return us[ls.getID()]=ls}),!0)},os),Object.values(os).forEach(function(is){return is.refresh()})},updateSingleItem:function(ts,rs,as){var os=this.origin,is=this.graph,us=ts.getModel(),ls=ts.get("id");this.point[ls]||(this.point[ls]={x:us.x,y:us.y});var fs=rs.x-os.x+this.point[ls].x,hs=rs.y-os.y+this.point[ls].y;as&&(fs+=os.x-rs.x,hs+=os.y-rs.y),is.updateItem(ts,{x:fs,y:hs},!1)},getParentCombo:function(ts){var rs=this.graph;if(ts){var as=rs.findById(ts);if(as)return as}},updateDelegate:function(ts){var rs=this.graph;if(this.delegateShape){var ys=ts.x-this.origin.x+this.originPoint.minX,xs=ts.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:ys,y:xs})}else{var as=rs.get("delegateGroup"),os=null;this.targets.length>1?os=calculationItemsBBox$1(this.targets):os=this.targets[0].getBBox();var is=os.x,us=os.y,ls=os.width,fs=os.height,hs=os.minX,vs=os.minY;this.originPoint={x:is,y:us,width:ls,height:fs,minX:hs,minY:vs};var gs=__assign$h(__assign$h({},Global$1.delegateStyle),this.delegateStyle);this.delegateShape=as.addShape("rect",{attrs:__assign$h({width:os.width,height:os.height,x:os.x,y:os.y},gs),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var ts=this,rs=ts.graph,as=ts.targets,os={};as==null||as.forEach(function(is){var us=is.getModel().parentId;us&&(os[us]=rs.findById(us))}),Object.values(os).forEach(function(is){is&&rs.updateCombo(is)})}};var DEFAULT_TRIGGER$3="dblclick",ALLOW_EVENTS$4=["click","dblclick"];const CollapseExpandCombo={getDefaultCfg:function(){return{trigger:DEFAULT_TRIGGER$3,relayout:!0}},getEvents:function(){var ts,rs;return ALLOW_EVENTS$4.includes(this.trigger)?rs=this.trigger:(rs=DEFAULT_TRIGGER$3,console.warn("Behavior collapse-expand-group 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),ts={},ts["combo:".concat(rs)]="onComboClick",ts},onComboClick:function(ts){var rs=ts.item,as=this,os=as.graph,is=as.relayout;if(!(!rs||rs.destroyed||rs.getType()!=="combo")){var us=rs.getModel(),ls=us.id;ls&&(os.collapseExpandCombo(ls),is&&os.get("layout")?os.layout():os.refreshPositions())}}};var isPolygonsIntersect$1=G6Util.isPolygonsIntersect,pathToPoints$1=G6Util.pathToPoints,DEFAULT_TRIGGER$2="shift",ALLOW_EVENTS$3=["drag","shift","ctrl","alt","control"],isItemIntersecPolygon=function(ts,rs){var as,os=ts.getKeyShape();if(ts.get("type")==="path")as=pathToPoints$1(os.attr("path"));else{var is=os.getCanvasBBox();as=[[is.minX,is.minY],[is.maxX,is.minY],[is.maxX,is.maxY],[is.minX,is.maxY]]}return isPolygonsIntersect$1(rs,as)};const LassoSelect={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:DEFAULT_TRIGGER$2,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return ALLOW_EVENTS$3.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=DEFAULT_TRIGGER$2,console.warn("Behavior lasso-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(ts){var rs=this.lasso,as=ts.item;as||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),rs||(rs=this.createLasso()),this.dragging=!0,this.originPoint={x:ts.x,y:ts.y},this.points.push(this.originPoint),rs.show())},onDragMove:function(ts){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:ts.x,y:ts.y}),this.updateLasso(ts)))},onDragEnd:function(ts){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var ts=this.points,rs=[];return ts.length&&(ts.forEach(function(as,os){os===0?rs.push(["M",as.x,as.y]):rs.push(["L",as.x,as.y])}),rs.push(["L",ts[0].x,ts[0].y])),rs},clearStates:function(ts){ts===void 0&&(ts="canvas:click");var rs=this,as=rs.graph,os=rs.selectedState,is=rs.shouldDeselect,us=as.findAllByState("node",os),ls=as.findAllByState("edge",os);(!is||is({action:ts,nodes:us,edges:ls}))&&(us.forEach(function(fs){return as.setItemState(fs,os,!1)}),ls.forEach(function(fs){return as.setItemState(fs,os,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],as.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var ts=this,rs=this,as=rs.graph,os=rs.shouldUpdate,is=this.points.map(function(vs){return[as.getCanvasByPoint(vs.x,vs.y).x,as.getCanvasByPoint(vs.x,vs.y).y]}),us=this.selectedState,ls=[],fs=[];as.getNodes().forEach(function(vs){if(vs.isVisible()&&isItemIntersecPolygon(vs,is)&&os(vs,"select",ts)){ls.push(vs);var gs=vs.getModel();fs.push(gs.id),as.setItemState(vs,us,!0)}});var hs=[];this.includeEdges&&ls.forEach(function(vs){var gs=vs.getOutEdges();gs.forEach(function(ys){if(ys.isVisible()){var xs=ys.getModel(),ms=xs.source,Ss=xs.target;fs.includes(ms)&&fs.includes(Ss)&&os(ys,"select",ts)&&(hs.push(ys),as.setItemState(ys,ts.selectedState,!0))}})}),this.selectedEdges=hs,this.selectedNodes=ls,this.onSelect&&this.onSelect(ls,hs),as.emit("nodeselectchange",{selectedItems:{nodes:ls,edges:hs},select:!0})},createLasso:function(){var ts=this,rs=ts.graph.get("delegateGroup").addShape("path",{attrs:__assign$h({path:[]},ts.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=rs,this.delegate=rs,this.points=[],rs},updateLasso:function(ts){var rs=this;this.lasso.attr({path:rs.getLassoPath()})},onKeyDown:function(ts){var rs=ts.key;rs&&(rs.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}};var DEFAULT_TRIGGER$1="click",ALLOW_EVENTS$2=["click","drag"],DEFAULT_KEY=void 0,ALLOW_KEYS=["shift","ctrl","control","alt","meta",void 0];const CreateEdge={getDefaultCfg:function(){return{trigger:DEFAULT_TRIGGER$1,key:DEFAULT_KEY,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var ts=this;ALLOW_EVENTS$2.indexOf(ts.trigger.toLowerCase())>-1||(ts.trigger=DEFAULT_TRIGGER$1,console.warn("Behavior create-edge 的 trigger 参数不合法，请输入 'click'，'drag'")),ts.key&&ALLOW_KEYS.indexOf(ts.key.toLowerCase())===-1&&(ts.trigger=DEFAULT_KEY,console.warn("Behavior create-edge 的 key 参数不合法，请输入 'shift'，'ctrl'，'alt'，'control'，或 undefined"));var rs;return ts.trigger==="drag"?rs={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:ts.trigger==="click"&&(rs={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),ts.key&&(rs.keydown="onKeyDown",rs.keyup="onKeyUp"),rs},onDragEnd:function(ts){var rs=this;if(!(rs.key&&!rs.keydown)){var as=ts.item;(!as||as.getID()===rs.source||as.getType()!=="node")&&rs.cancelCreating({item:rs.edge,x:ts.x,y:ts.y})}},onClick:function(ts){var rs=this;if(!(rs.key&&!rs.keydown)){var as=ts.item,os=rs.graph,is=as.getModel(),us=rs.getEdgeConfig;if(rs.addingEdge&&rs.edge){if(!rs.shouldEnd(ts,rs))return;var ls=void 0;us&&isFunction$2(us)?ls=us({source:rs.source,target:is.id},rs):ls=rs.edgeConfig;var fs=__assign$h({target:is.id},ls);if(rs.source===is.id&&(fs.type="loop"),os.emit("beforecreateedge",{}),os.updateItem(rs.edge,fs,!1),os.get("enabledStack")){var hs=__assign$h(__assign$h({},rs.edge.getModel()),{itemType:"edge"}),vs={};vs.edges=[hs],os.pushStack("add",{before:{},after:vs})}os.emit("aftercreateedge",{edge:rs.edge}),rs.edge.getKeyShape().set("capture",!0),rs.edge=null,rs.addingEdge=!1}else{if(!rs.shouldBegin(ts,rs))return;var ls=void 0;us&&isFunction$2(us)?ls=us({source:is.id,target:is.id},rs):ls=rs.edgeConfig,rs.edge=os.addItem("edge",__assign$h({source:is.id,target:is.id},ls),!1),rs.source=is.id,rs.addingEdge=!0,rs.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(ts){var rs=this;if(!(rs.key&&!rs.keydown)){rs.edge&&rs.edge.destroyed&&rs.cancelCreating({item:rs.edge});var as={x:ts.x,y:ts.y};if(!rs.graph.findById(rs.source)){rs.addingEdge=!1;return}rs.addingEdge&&rs.edge&&rs.graph.updateItem(rs.edge,{target:as},!1)}},cancelCreating:function(ts){var rs,as,os=this;if(!(os.key&&!os.keydown)){var is=os.graph,us=ts.item;if(os.addingEdge&&(os.edge===us||!((as=(rs=ts.target)===null||rs===void 0?void 0:rs.isCanvas)===null||as===void 0)&&as.call(rs))){os.edge&&!os.edge.destroyed&&is.removeItem(os.edge,!1),os.edge=null,os.addingEdge=!1;return}}},onKeyDown:function(ts){var rs=this,as=ts.key;as&&(as.toLowerCase()===rs.key.toLowerCase()?rs.keydown=!0:rs.keydown=!1)},onKeyUp:function(){var ts=this;ts.addingEdge&&ts.edge&&(ts.graph.removeItem(ts.edge,!1),ts.addingEdge=!1,ts.edge=null),this.keydown=!1}};var DEFAULT_TRIGGER="ctrl",ALLOW_EVENTS$1=["shift","ctrl","alt","control"],DEFAULT_COMBINED_KEY="1";const ShortcutsCall={getDefaultCfg:function(){return{trigger:DEFAULT_TRIGGER,combinedKey:DEFAULT_COMBINED_KEY,functionName:"fitView",functionParams:[]}},getEvents:function(){return ALLOW_EVENTS$1.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=DEFAULT_TRIGGER,console.warn("Behavior shortcuts-fit-view 的 trigger 参数 '".concat(this.trigger,"' 不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(ts){var rs=ts.key;if(rs){var as=this.trigger.toLowerCase(),os=rs.toLowerCase();this.triggerKeydown||(os===as||os==="control"&&as==="ctrl"||os==="ctrl"&&as==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var is=this.graph;if(!is[this.functionName])return console.warn("Behavior shortcuts-fit-view 的 functionName 参数 '".concat(this.functionName,"' 不合法，它不是 Graph 的一个函数名")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?is[this.functionName].apply(is,this.functionParams):is[this.functionName]();return}var us=this.combinedKey.toLowerCase();this.triggerKeydown&&(os===us||os==="control"&&us==="ctrl"||os==="ctrl"&&us==="control")&&(this.functionParams&&this.functionParams.length?is[this.functionName].apply(is,this.functionParams):is[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}};var ALLOW_EVENTS=["shift","ctrl","alt","control","meta"];const ScrollCanvas={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||ALLOW_EVENTS.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(ts){var rs=this;if(this.allowDrag(ts)){var as=this.graph,os=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];os.includes("control")&&os.push("ctrl");var is=os.some(function(Zs){return ts["".concat(Zs,"Key")]});if(is){var us=as.get("canvas"),ls=us.getPointByClient(ts.clientX,ts.clientY),fs=as.getZoom();ts.wheelDelta>0?fs=fs+fs*.05:fs=fs-fs*.05,as.zoomTo(fs,{x:ls.x,y:ls.y})}else{var hs=ts.deltaX||ts.movementX,vs=ts.deltaY||ts.movementY;!vs&&navigator.userAgent.indexOf("Firefox")>-1&&(vs=-ts.wheelDelta*125/3);var gs=this.graph.get("width"),ys=this.graph.get("height"),xs=this.graph.get("canvas").getCanvasBBox(),ms=this.scalableRange,Ss=this.scalableRange;ms<1&&ms>-1&&(ms=gs*ms,Ss=ys*Ss);var Ms=xs.minX,$s=xs.maxX,bs=xs.minY,Cs=xs.maxY;hs>0?$s<-ms?hs=0:$s-hs<-ms&&(hs=$s+ms):hs<0&&(Ms>gs+ms?hs=0:Ms-hs>gs+ms&&(hs=Ms-(gs+ms))),vs>0?Cs<-Ss?vs=0:Cs-vs<-Ss&&(vs=Cs+Ss):vs<0&&(bs>ys+Ss?vs=0:bs-vs>ys+Ss&&(vs=bs-(ys+Ss))),this.get("direction")==="x"?vs=0:this.get("direction")==="y"&&(hs=0),as.translate(-hs,-vs)}ts.preventDefault();var As=this.get("enableOptimize");if(As){var Is=this.get("optimizeZoom"),ks=this.get("optimized"),Ps=as.getNodes(),Ds=as.getEdges(),Fs=Ps.length,Rs=Ds.length;if(!ks){for(var js=0;js<Fs;js++){var zs=Ps[js];if(!zs.destroyed)for(var Us=zs.get("group").get("children"),Ys=Us.length,Ks=0;Ks<Ys;Ks++){var qs=Us[Ks];!qs.destoryed&&!qs.get("isKeyShape")&&(qs.set("ori-visibility",qs.get("ori-visibility")||qs.get("visible")),qs.hide())}}for(var _l=0;_l<Rs;_l++)for(var Js=Ds[_l],Us=Js.get("group").get("children"),Ys=Us.length,Ks=0;Ks<Ys;Ks++){var qs=Us[Ks];qs.set("ori-visibility",qs.get("ori-visibility")||qs.get("visible")),qs.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Vs=setTimeout(function(){var Zs=as.getZoom(),Sl=rs.get("optimized");if(Sl){rs.set("optimized",!1);for(var Il=0;Il<Fs;Il++){var Nl=Ps[Il],Tl=Nl.get("group").get("children"),_c=Tl.length;if(Zs<Is){var l0=Nl.getKeyShape(),g0=l0.get("ori-visibility");g0&&l0.show()}else for(var R0=0;R0<_c;R0++){var V0=Tl[R0],g0=V0.get("ori-visibility");!V0.get("visible")&&g0&&g0&&V0.show()}}for(var U0=0;U0<Rs;U0++){var tv=Ds[U0],Tl=tv.get("group").get("children"),_c=Tl.length;if(Zs<Is){var l0=tv.getKeyShape(),g0=l0.get("ori-visibility");g0&&l0.show()}else for(var R0=0;R0<_c;R0++){var V0=Tl[R0];if(!V0.get("visible")){var g0=V0.get("ori-visibility");g0&&V0.show()}}}}},100);this.set("timeout",Vs)}}},allowDrag:function(ts){var rs,as,os=ts.target,is=os&&os.isCanvas&&os.isCanvas();if(isBoolean$2(this.allowDragOnItem)&&!this.allowDragOnItem&&!is)return!1;if(isObject$1(this.allowDragOnItem)){var us=this.allowDragOnItem,ls=us.node,fs=us.edge,hs=us.combo,vs=(as=(rs=ts.item)===null||rs===void 0?void 0:rs.getType)===null||as===void 0?void 0:as.call(rs);if(!ls&&vs==="node"||!fs&&vs==="edge"||!hs&&vs==="combo")return!1}return!0}};var behaviors={"drag-canvas":DragCanvas,"zoom-canvas":ZoomCanvas,"drag-node":DragNode,"activate-relations":ActivateRelations,"brush-select":BrushSelect,"click-select":ClickSelect,"lasso-select":LassoSelect,tooltip:Tooltip,"edge-tooltip":EdgeTooltip,"collapse-expand":CollapseExpand,"drag-combo":DragCombo,"collapse-expand-combo":CollapseExpandCombo,"create-edge":CreateEdge,"shortcuts-call":ShortcutsCall,"scroll-canvas":ScrollCanvas};each$1(behaviors,function(ns,ts){registerBehavior(ts,ns)});var Algorithm=__assign$h(__assign$h({},AlgorithmSync),AlgorithmAsync);Plugin$1.Grid;Plugin$1.Minimap;Plugin$1.Bundling;Plugin$1.Menu;var Fisheye=Plugin$1.Fisheye;Plugin$1.ToolBar;Plugin$1.Tooltip;var TimeBar=Plugin$1.TimeBar,ImageMinimap=Plugin$1.ImageMinimap,EdgeFilterLens=Plugin$1.EdgeFilterLens,SnapLine=Plugin$1.SnapLine;Plugin$1.Legend;var Annotation=Plugin$1.Annotation;Global$1.version,lib.Layouts,Plugin$1.Minimap,Plugin$1.Grid,Plugin$1.Bundling,Plugin$1.Menu,Plugin$1.ToolBar,Plugin$1.Tooltip,Plugin$1.Legend;var react={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(ns){if(ns==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(ns)}function shouldUseNative(){try{if(!Object.assign)return!1;var ns=new String("abc");if(ns[5]="de",Object.getOwnPropertyNames(ns)[0]==="5")return!1;for(var ts={},rs=0;rs<10;rs++)ts["_"+String.fromCharCode(rs)]=rs;var as=Object.getOwnPropertyNames(ts).map(function(is){return ts[is]});if(as.join("")!=="0123456789")return!1;var os={};return"abcdefghijklmnopqrst".split("").forEach(function(is){os[is]=is}),Object.keys(Object.assign({},os)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(ns,ts){for(var rs,as=toObject(ns),os,is=1;is<arguments.length;is++){rs=Object(arguments[is]);for(var us in rs)hasOwnProperty.call(rs,us)&&(as[us]=rs[us]);if(getOwnPropertySymbols){os=getOwnPropertySymbols(rs);for(var ls=0;ls<os.length;ls++)propIsEnumerable.call(rs,os[ls])&&(as[os[ls]]=rs[os[ls]])}}return as};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=objectAssign,n=typeof Symbol=="function"&&Symbol.for,p=n?Symbol.for("react.element"):60103,q=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,t=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,v=n?Symbol.for("react.provider"):60109,w=n?Symbol.for("react.context"):60110,x=n?Symbol.for("react.forward_ref"):60112,y=n?Symbol.for("react.suspense"):60113,z=n?Symbol.for("react.memo"):60115,A=n?Symbol.for("react.lazy"):60116,B=typeof Symbol=="function"&&Symbol.iterator;function C(ns){for(var ts="https://reactjs.org/docs/error-decoder.html?invariant="+ns,rs=1;rs<arguments.length;rs++)ts+="&args[]="+encodeURIComponent(arguments[rs]);return"Minified React error #"+ns+"; visit "+ts+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function F(ns,ts,rs){this.props=ns,this.context=ts,this.refs=E,this.updater=rs||D}F.prototype.isReactComponent={};F.prototype.setState=function(ns,ts){if(typeof ns!="object"&&typeof ns!="function"&&ns!=null)throw Error(C(85));this.updater.enqueueSetState(this,ns,ts,"setState")};F.prototype.forceUpdate=function(ns){this.updater.enqueueForceUpdate(this,ns,"forceUpdate")};function G(){}G.prototype=F.prototype;function H(ns,ts,rs){this.props=ns,this.context=ts,this.refs=E,this.updater=rs||D}var I=H.prototype=new G;I.constructor=H;l(I,F.prototype);I.isPureReactComponent=!0;var J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};function M(ns,ts,rs){var as,os={},is=null,us=null;if(ts!=null)for(as in ts.ref!==void 0&&(us=ts.ref),ts.key!==void 0&&(is=""+ts.key),ts)K.call(ts,as)&&!L.hasOwnProperty(as)&&(os[as]=ts[as]);var ls=arguments.length-2;if(ls===1)os.children=rs;else if(1<ls){for(var fs=Array(ls),hs=0;hs<ls;hs++)fs[hs]=arguments[hs+2];os.children=fs}if(ns&&ns.defaultProps)for(as in ls=ns.defaultProps,ls)os[as]===void 0&&(os[as]=ls[as]);return{$$typeof:p,type:ns,key:is,ref:us,props:os,_owner:J.current}}function N(ns,ts){return{$$typeof:p,type:ns.type,key:ts,ref:ns.ref,props:ns.props,_owner:ns._owner}}function O(ns){return typeof ns=="object"&&ns!==null&&ns.$$typeof===p}function escape(ns){var ts={"=":"=0",":":"=2"};return"$"+(""+ns).replace(/[=:]/g,function(rs){return ts[rs]})}var P=/\/+/g,Q=[];function R(ns,ts,rs,as){if(Q.length){var os=Q.pop();return os.result=ns,os.keyPrefix=ts,os.func=rs,os.context=as,os.count=0,os}return{result:ns,keyPrefix:ts,func:rs,context:as,count:0}}function S(ns){ns.result=null,ns.keyPrefix=null,ns.func=null,ns.context=null,ns.count=0,10>Q.length&&Q.push(ns)}function T(ns,ts,rs,as){var os=typeof ns;(os==="undefined"||os==="boolean")&&(ns=null);var is=!1;if(ns===null)is=!0;else switch(os){case"string":case"number":is=!0;break;case"object":switch(ns.$$typeof){case p:case q:is=!0}}if(is)return rs(as,ns,ts===""?"."+U(ns,0):ts),1;if(is=0,ts=ts===""?".":ts+":",Array.isArray(ns))for(var us=0;us<ns.length;us++){os=ns[us];var ls=ts+U(os,us);is+=T(os,ls,rs,as)}else if(ns===null||typeof ns!="object"?ls=null:(ls=B&&ns[B]||ns["@@iterator"],ls=typeof ls=="function"?ls:null),typeof ls=="function")for(ns=ls.call(ns),us=0;!(os=ns.next()).done;)os=os.value,ls=ts+U(os,us++),is+=T(os,ls,rs,as);else if(os==="object")throw rs=""+ns,Error(C(31,rs==="[object Object]"?"object with keys {"+Object.keys(ns).join(", ")+"}":rs,""));return is}function V(ns,ts,rs){return ns==null?0:T(ns,"",ts,rs)}function U(ns,ts){return typeof ns=="object"&&ns!==null&&ns.key!=null?escape(ns.key):ts.toString(36)}function W(ns,ts){ns.func.call(ns.context,ts,ns.count++)}function aa(ns,ts,rs){var as=ns.result,os=ns.keyPrefix;ns=ns.func.call(ns.context,ts,ns.count++),Array.isArray(ns)?X(ns,as,rs,function(is){return is}):ns!=null&&(O(ns)&&(ns=N(ns,os+(!ns.key||ts&&ts.key===ns.key?"":(""+ns.key).replace(P,"$&/")+"/")+rs)),as.push(ns))}function X(ns,ts,rs,as,os){var is="";rs!=null&&(is=(""+rs).replace(P,"$&/")+"/"),ts=R(ts,is,as,os),V(ns,aa,ts),S(ts)}var Y={current:null};function Z(){var ns=Y.current;if(ns===null)throw Error(C(321));return ns}var ba={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J,IsSomeRendererActing:{current:!1},assign:l};react_production_min.Children={map:function(ns,ts,rs){if(ns==null)return ns;var as=[];return X(ns,as,null,ts,rs),as},forEach:function(ns,ts,rs){if(ns==null)return ns;ts=R(null,null,ts,rs),V(ns,W,ts),S(ts)},count:function(ns){return V(ns,function(){return null},null)},toArray:function(ns){var ts=[];return X(ns,ts,null,function(rs){return rs}),ts},only:function(ns){if(!O(ns))throw Error(C(143));return ns}};react_production_min.Component=F;react_production_min.Fragment=r;react_production_min.Profiler=u;react_production_min.PureComponent=H;react_production_min.StrictMode=t;react_production_min.Suspense=y;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba;react_production_min.cloneElement=function(ns,ts,rs){if(ns==null)throw Error(C(267,ns));var as=l({},ns.props),os=ns.key,is=ns.ref,us=ns._owner;if(ts!=null){if(ts.ref!==void 0&&(is=ts.ref,us=J.current),ts.key!==void 0&&(os=""+ts.key),ns.type&&ns.type.defaultProps)var ls=ns.type.defaultProps;for(fs in ts)K.call(ts,fs)&&!L.hasOwnProperty(fs)&&(as[fs]=ts[fs]===void 0&&ls!==void 0?ls[fs]:ts[fs])}var fs=arguments.length-2;if(fs===1)as.children=rs;else if(1<fs){ls=Array(fs);for(var hs=0;hs<fs;hs++)ls[hs]=arguments[hs+2];as.children=ls}return{$$typeof:p,type:ns.type,key:os,ref:is,props:as,_owner:us}};react_production_min.createContext=function(ns,ts){return ts===void 0&&(ts=null),ns={$$typeof:w,_calculateChangedBits:ts,_currentValue:ns,_currentValue2:ns,_threadCount:0,Provider:null,Consumer:null},ns.Provider={$$typeof:v,_context:ns},ns.Consumer=ns};react_production_min.createElement=M;react_production_min.createFactory=function(ns){var ts=M.bind(null,ns);return ts.type=ns,ts};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(ns){return{$$typeof:x,render:ns}};react_production_min.isValidElement=O;react_production_min.lazy=function(ns){return{$$typeof:A,_ctor:ns,_status:-1,_result:null}};react_production_min.memo=function(ns,ts){return{$$typeof:z,type:ns,compare:ts===void 0?null:ts}};react_production_min.useCallback=function(ns,ts){return Z().useCallback(ns,ts)};react_production_min.useContext=function(ns,ts){return Z().useContext(ns,ts)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(ns,ts){return Z().useEffect(ns,ts)};react_production_min.useImperativeHandle=function(ns,ts,rs){return Z().useImperativeHandle(ns,ts,rs)};react_production_min.useLayoutEffect=function(ns,ts){return Z().useLayoutEffect(ns,ts)};react_production_min.useMemo=function(ns,ts){return Z().useMemo(ns,ts)};react_production_min.useReducer=function(ns,ts,rs){return Z().useReducer(ns,ts,rs)};react_production_min.useRef=function(ns){return Z().useRef(ns)};react_production_min.useState=function(ns){return Z().useState(ns)};react_production_min.version="16.14.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);var CONSTANTS$1={ALIGN_COUNT:8,ALIGN_AUTO:0,ALIGN_FLEX_START:1,ALIGN_CENTER:2,ALIGN_FLEX_END:3,ALIGN_STRETCH:4,ALIGN_BASELINE:5,ALIGN_SPACE_BETWEEN:6,ALIGN_SPACE_AROUND:7,DIMENSION_COUNT:2,DIMENSION_WIDTH:0,DIMENSION_HEIGHT:1,DIRECTION_COUNT:3,DIRECTION_INHERIT:0,DIRECTION_LTR:1,DIRECTION_RTL:2,DISPLAY_COUNT:2,DISPLAY_FLEX:0,DISPLAY_NONE:1,EDGE_COUNT:9,EDGE_LEFT:0,EDGE_TOP:1,EDGE_RIGHT:2,EDGE_BOTTOM:3,EDGE_START:4,EDGE_END:5,EDGE_HORIZONTAL:6,EDGE_VERTICAL:7,EDGE_ALL:8,EXPERIMENTAL_FEATURE_COUNT:1,EXPERIMENTAL_FEATURE_WEB_FLEX_BASIS:0,FLEX_DIRECTION_COUNT:4,FLEX_DIRECTION_COLUMN:0,FLEX_DIRECTION_COLUMN_REVERSE:1,FLEX_DIRECTION_ROW:2,FLEX_DIRECTION_ROW_REVERSE:3,JUSTIFY_COUNT:6,JUSTIFY_FLEX_START:0,JUSTIFY_CENTER:1,JUSTIFY_FLEX_END:2,JUSTIFY_SPACE_BETWEEN:3,JUSTIFY_SPACE_AROUND:4,JUSTIFY_SPACE_EVENLY:5,LOG_LEVEL_COUNT:6,LOG_LEVEL_ERROR:0,LOG_LEVEL_WARN:1,LOG_LEVEL_INFO:2,LOG_LEVEL_DEBUG:3,LOG_LEVEL_VERBOSE:4,LOG_LEVEL_FATAL:5,MEASURE_MODE_COUNT:3,MEASURE_MODE_UNDEFINED:0,MEASURE_MODE_EXACTLY:1,MEASURE_MODE_AT_MOST:2,NODE_TYPE_COUNT:2,NODE_TYPE_DEFAULT:0,NODE_TYPE_TEXT:1,OVERFLOW_COUNT:3,OVERFLOW_VISIBLE:0,OVERFLOW_HIDDEN:1,OVERFLOW_SCROLL:2,POSITION_TYPE_COUNT:2,POSITION_TYPE_RELATIVE:0,POSITION_TYPE_ABSOLUTE:1,PRINT_OPTIONS_COUNT:3,PRINT_OPTIONS_LAYOUT:1,PRINT_OPTIONS_STYLE:2,PRINT_OPTIONS_CHILDREN:4,UNIT_COUNT:4,UNIT_UNDEFINED:0,UNIT_POINT:1,UNIT_PERCENT:2,UNIT_AUTO:3,WRAP_COUNT:3,WRAP_NO_WRAP:0,WRAP_WRAP:1,WRAP_WRAP_REVERSE:2},YGEnums=CONSTANTS$1,_extends=Object.assign||function(ns){for(var ts=1;ts<arguments.length;ts++){var rs=arguments[ts];for(var as in rs)Object.prototype.hasOwnProperty.call(rs,as)&&(ns[as]=rs[as])}return ns},_createClass=function(){function ns(ts,rs){for(var as=0;as<rs.length;as++){var os=rs[as];os.enumerable=os.enumerable||!1,os.configurable=!0,"value"in os&&(os.writable=!0),Object.defineProperty(ts,os.key,os)}}return function(ts,rs,as){return rs&&ns(ts.prototype,rs),as&&ns(ts,as),ts}}();function _defineProperty$1(ns,ts,rs){return ts in ns?Object.defineProperty(ns,ts,{value:rs,enumerable:!0,configurable:!0,writable:!0}):ns[ts]=rs,ns}function _classCallCheck(ns,ts){if(!(ns instanceof ts))throw new TypeError("Cannot call a class as a function")}var CONSTANTS=YGEnums,Layout=function(){function ns(ts,rs,as,os,is,us){_classCallCheck(this,ns),this.left=ts,this.right=rs,this.top=as,this.bottom=os,this.width=is,this.height=us}return _createClass(ns,[{key:"fromJS",value:function(rs){rs(this.left,this.right,this.top,this.bottom,this.width,this.height)}},{key:"toString",value:function(){return"<Layout#"+this.left+":"+this.right+";"+this.top+":"+this.bottom+";"+this.width+":"+this.height+">"}}]),ns}(),Size=function(){_createClass(ns,null,[{key:"fromJS",value:function(rs){var as=rs.width,os=rs.height;return new ns(as,os)}}]);function ns(ts,rs){_classCallCheck(this,ns),this.width=ts,this.height=rs}return _createClass(ns,[{key:"fromJS",value:function(rs){rs(this.width,this.height)}},{key:"toString",value:function(){return"<Size#"+this.width+"x"+this.height+">"}}]),ns}(),Value=function(){function ns(ts,rs){_classCallCheck(this,ns),this.unit=ts,this.value=rs}return _createClass(ns,[{key:"fromJS",value:function(rs){rs(this.unit,this.value)}},{key:"toString",value:function(){switch(this.unit){case CONSTANTS.UNIT_POINT:return String(this.value);case CONSTANTS.UNIT_PERCENT:return this.value+"%";case CONSTANTS.UNIT_AUTO:return"auto";default:return this.value+"?"}}},{key:"valueOf",value:function(){return this.value}}]),ns}(),entryCommon=function(ns,ts){function rs(us,ls,fs){var hs=us[ls];us[ls]=function(){for(var vs=arguments.length,gs=Array(vs),ys=0;ys<vs;ys++)gs[ys]=arguments[ys];return fs.call.apply(fs,[this,hs].concat(gs))}}for(var as=["setPosition","setMargin","setFlexBasis","setWidth","setHeight","setMinWidth","setMinHeight","setMaxWidth","setMaxHeight","setPadding"],os=function(){var ls,fs=as[is],hs=(ls={},_defineProperty$1(ls,CONSTANTS.UNIT_POINT,ts.Node.prototype[fs]),_defineProperty$1(ls,CONSTANTS.UNIT_PERCENT,ts.Node.prototype[fs+"Percent"]),_defineProperty$1(ls,CONSTANTS.UNIT_AUTO,ts.Node.prototype[fs+"Auto"]),ls);rs(ts.Node.prototype,fs,function(vs){for(var gs=arguments.length,ys=Array(gs>1?gs-1:0),xs=1;xs<gs;xs++)ys[xs-1]=arguments[xs];var ms=ys.pop(),Ss=void 0,Ms=void 0;if(ms==="auto")Ss=CONSTANTS.UNIT_AUTO,Ms=void 0;else if(ms instanceof Value)Ss=ms.unit,Ms=ms.valueOf();else if(Ss=typeof ms=="string"&&ms.endsWith("%")?CONSTANTS.UNIT_PERCENT:CONSTANTS.UNIT_POINT,Ms=parseFloat(ms),!Number.isNaN(ms)&&Number.isNaN(Ms))throw new Error("Invalid value "+ms+" for "+fs);if(!hs[Ss])throw new Error('Failed to execute "'+fs+`": Unsupported unit '`+ms+"'");if(Ms!==void 0){var $s;return($s=hs[Ss]).call.apply($s,[this].concat(ys,[Ms]))}else{var bs;return(bs=hs[Ss]).call.apply(bs,[this].concat(ys))}})},is=0;is<as.length;is++)os();return rs(ts.Config.prototype,"free",function(){ts.Config.destroy(this)}),rs(ts.Node,"create",function(us,ls){return ls?ts.Node.createWithConfig(ls):ts.Node.createDefault()}),rs(ts.Node.prototype,"free",function(){ts.Node.destroy(this)}),rs(ts.Node.prototype,"freeRecursive",function(){for(var us=0,ls=this.getChildCount();us<ls;++us)this.getChild(0).freeRecursive();this.free()}),rs(ts.Node.prototype,"setMeasureFunc",function(us,ls){return ls?us.call(this,function(){return Size.fromJS(ls.apply(void 0,arguments))}):this.unsetMeasureFunc()}),rs(ts.Node.prototype,"calculateLayout",function(us){var ls=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN,fs=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN,hs=arguments.length>3&&arguments[3]!==void 0?arguments[3]:CONSTANTS.DIRECTION_LTR;return us.call(this,ls,fs,hs)}),_extends({Config:ts.Config,Node:ts.Node,Layout:ns("Layout",Layout),Size:ns("Size",Size),Value:ns("Value",Value),getInstanceCount:function(){return ts.getInstanceCount.apply(ts,arguments)}},CONSTANTS)};function commonjsRequire(ns){throw new Error('Could not dynamically require "'+ns+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var nbind$1={exports:{}};(function(module){(function(ns,ts){module.exports?module.exports=ts:(ns.nbind=ns.nbind||{}).init=ts})(commonjsGlobal,function(Module,cb){typeof Module=="function"&&(cb=Module,Module={}),Module.onRuntimeInitialized=function(ns,ts){return function(){ns&&ns.apply(this,arguments);try{Module.ccall("nbind_init")}catch(rs){ts(rs);return}ts(null,{bind:Module._nbind_value,reflect:Module.NBind.reflect,queryType:Module.NBind.queryType,toggleLightGC:Module.toggleLightGC,lib:Module})}}(Module.onRuntimeInitialized,cb);var Module;Module||(Module=(typeof Module<"u"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if(Module.ENVIRONMENT==="WEB")ENVIRONMENT_IS_WEB=!0;else if(Module.ENVIRONMENT==="WORKER")ENVIRONMENT_IS_WORKER=!0;else if(Module.ENVIRONMENT==="NODE")ENVIRONMENT_IS_NODE=!0;else if(Module.ENVIRONMENT==="SHELL")ENVIRONMENT_IS_SHELL=!0;else throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof commonjsRequire=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn);var nodeFS,nodePath;Module.read=function(ts,rs){nodeFS||(nodeFS={}("")),nodePath||(nodePath={}("")),ts=nodePath.normalize(ts);var as=nodeFS.readFileSync(ts);return rs?as:as.toString()},Module.readBinary=function(ts){var rs=Module.read(ts,!0);return rs.buffer||(rs=new Uint8Array(rs)),assert(rs.buffer),rs},Module.load=function(ts){globalEval(read(ts))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),module.exports=Module,process.on("uncaughtException",function(ns){if(!(ns instanceof ExitStatus))throw ns}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr<"u"&&(Module.printErr=printErr),typeof read<"u"?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(ts){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(ts));var rs=read(ts,"binary");return assert(typeof rs=="object"),rs},typeof scriptArgs<"u"?Module.arguments=scriptArgs:typeof arguments<"u"&&(Module.arguments=arguments),typeof quit=="function"&&(Module.quit=function(ns,ts){quit(ns)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(ts){var rs=new XMLHttpRequest;return rs.open("GET",ts,!1),rs.send(null),rs.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(ts){var rs=new XMLHttpRequest;return rs.open("GET",ts,!1),rs.responseType="arraybuffer",rs.send(null),new Uint8Array(rs.response)}),Module.readAsync=function(ts,rs,as){var os=new XMLHttpRequest;os.open("GET",ts,!0),os.responseType="arraybuffer",os.onload=function(){os.status==200||os.status==0&&os.response?rs(os.response):as()},os.onerror=as,os.send(null)},typeof arguments<"u"&&(Module.arguments=arguments),typeof console<"u")Module.print||(Module.print=function(ts){console.log(ts)}),Module.printErr||(Module.printErr=function(ts){console.warn(ts)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump<"u"?function(ns){dump(ns)}:function(ns){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle>"u"&&(Module.setWindowTitle=function(ns){document.title=ns})}else throw"Unknown runtime environment. Where are we?";function globalEval(ns){eval.call(null,ns)}!Module.load&&Module.read&&(Module.load=function(ts){globalEval(Module.read(ts))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(ns,ts){throw ts}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(ns){return tempRet0=ns,ns},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(ns){STACKTOP=ns},getNativeTypeSize:function(ns){switch(ns){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(ns[ns.length-1]==="*")return Runtime.QUANTUM_SIZE;if(ns[0]==="i"){var ts=parseInt(ns.substr(1));return assert(ts%8===0),ts/8}else return 0}}},getNativeFieldSize:function(ns){return Math.max(Runtime.getNativeTypeSize(ns),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(ns,ts){return ts==="double"||ts==="i64"?ns&7&&(assert((ns&7)===4),ns+=4):assert((ns&3)===0),ns},getAlignSize:function(ns,ts,rs){return!rs&&(ns=="i64"||ns=="double")?8:ns?Math.min(ts||(ns?Runtime.getNativeFieldSize(ns):0),Runtime.QUANTUM_SIZE):Math.min(ts,8)},dynCall:function(ns,ts,rs){return rs&&rs.length?Module["dynCall_"+ns].apply(null,[ts].concat(rs)):Module["dynCall_"+ns].call(null,ts)},functionPointers:[],addFunction:function(ns){for(var ts=0;ts<Runtime.functionPointers.length;ts++)if(!Runtime.functionPointers[ts])return Runtime.functionPointers[ts]=ns,2*(1+ts);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(ns){Runtime.functionPointers[(ns-2)/2]=null},warnOnce:function(ns){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[ns]||(Runtime.warnOnce.shown[ns]=1,Module.printErr(ns))},funcWrappers:{},getFuncWrapper:function(ns,ts){if(ns){assert(ts),Runtime.funcWrappers[ts]||(Runtime.funcWrappers[ts]={});var rs=Runtime.funcWrappers[ts];return rs[ns]||(ts.length===1?rs[ns]=function(){return Runtime.dynCall(ts,ns)}:ts.length===2?rs[ns]=function(os){return Runtime.dynCall(ts,ns,[os])}:rs[ns]=function(){return Runtime.dynCall(ts,ns,Array.prototype.slice.call(arguments))}),rs[ns]}},getCompilerSetting:function(ns){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(ns){var ts=STACKTOP;return STACKTOP=STACKTOP+ns|0,STACKTOP=STACKTOP+15&-16,ts},staticAlloc:function(ns){var ts=STATICTOP;return STATICTOP=STATICTOP+ns|0,STATICTOP=STATICTOP+15&-16,ts},dynamicAlloc:function(ns){var ts=HEAP32[DYNAMICTOP_PTR>>2],rs=(ts+ns+15|0)&-16;if(HEAP32[DYNAMICTOP_PTR>>2]=rs,rs>=TOTAL_MEMORY){var as=enlargeMemory();if(!as)return HEAP32[DYNAMICTOP_PTR>>2]=ts,0}return ts},alignMemory:function(ns,ts){var rs=ns=Math.ceil(ns/(ts||16))*(ts||16);return rs},makeBigInt:function(ns,ts,rs){var as=rs?+(ns>>>0)+ +(ts>>>0)*4294967296:+(ns>>>0)+ +(ts|0)*4294967296;return as},GLOBAL_BASE:8,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0;function assert(ns,ts){ns||abort("Assertion failed: "+ts)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(ns){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(ns){var ts=Runtime.stackAlloc(ns.length);return writeArrayToMemory(ns,ts),ts},stringToC:function(ns){var ts=0;if(ns!=null&&ns!==0){var rs=(ns.length<<2)+1;ts=Runtime.stackAlloc(rs),stringToUTF8(ns,ts,rs)}return ts}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(ts,rs,as,os,is){var us=getCFunc(ts),ls=[],fs=0;if(os)for(var hs=0;hs<os.length;hs++){var vs=toC[as[hs]];vs?(fs===0&&(fs=Runtime.stackSave()),ls[hs]=vs(os[hs])):ls[hs]=os[hs]}var gs=us.apply(null,ls);if(rs==="string"&&(gs=Pointer_stringify(gs)),fs!==0){if(is&&is.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(fs)});return}Runtime.stackRestore(fs)}return gs};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(ns){var ts=ns.toString().match(sourceRegex).slice(1);return{arguments:ts[0],body:ts[1],returnValue:ts[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource){JSsource={};for(var ns in JSfuncs)JSfuncs.hasOwnProperty(ns)&&(JSsource[ns]=parseJSFunc(JSfuncs[ns]))}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(ns){return ns==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(ns,ts){return"$"+ts}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(ns,ts,rs,as){switch(rs=rs||"i8",rs.charAt(rs.length-1)==="*"&&(rs="i32"),rs){case"i1":HEAP8[ns>>0]=ts;break;case"i8":HEAP8[ns>>0]=ts;break;case"i16":HEAP16[ns>>1]=ts;break;case"i32":HEAP32[ns>>2]=ts;break;case"i64":tempI64=[ts>>>0,(tempDouble=ts,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[ns>>2]=tempI64[0],HEAP32[ns+4>>2]=tempI64[1];break;case"float":HEAPF32[ns>>2]=ts;break;case"double":HEAPF64[ns>>3]=ts;break;default:abort("invalid type for setValue: "+rs)}}Module.setValue=setValue;function getValue(ns,ts,rs){switch(ts=ts||"i8",ts.charAt(ts.length-1)==="*"&&(ts="i32"),ts){case"i1":return HEAP8[ns>>0];case"i8":return HEAP8[ns>>0];case"i16":return HEAP16[ns>>1];case"i32":return HEAP32[ns>>2];case"i64":return HEAP32[ns>>2];case"float":return HEAPF32[ns>>2];case"double":return HEAPF64[ns>>3];default:abort("invalid type for setValue: "+ts)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(ns,ts,rs,as){var os,is;typeof ns=="number"?(os=!0,is=ns):(os=!1,is=ns.length);var us=typeof ts=="string"?ts:null,ls;if(rs==ALLOC_NONE?ls=as:ls=[typeof _malloc=="function"?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][rs===void 0?ALLOC_STATIC:rs](Math.max(is,us?1:ts.length)),os){var as=ls,fs;for(assert((ls&3)==0),fs=ls+(is&-4);as<fs;as+=4)HEAP32[as>>2]=0;for(fs=ls+is;as<fs;)HEAP8[as++>>0]=0;return ls}if(us==="i8")return ns.subarray||ns.slice?HEAPU8.set(ns,ls):HEAPU8.set(new Uint8Array(ns),ls),ls;for(var hs=0,vs,gs,ys;hs<is;){var xs=ns[hs];if(typeof xs=="function"&&(xs=Runtime.getFunctionIndex(xs)),vs=us||ts[hs],vs===0){hs++;continue}vs=="i64"&&(vs="i32"),setValue(ls+hs,xs,vs),ys!==vs&&(gs=Runtime.getNativeTypeSize(vs),ys=vs),hs+=gs}return ls}Module.allocate=allocate;function getMemory(ns){return staticSealed?runtimeInitialized?_malloc(ns):Runtime.dynamicAlloc(ns):Runtime.staticAlloc(ns)}Module.getMemory=getMemory;function Pointer_stringify(ns,ts){if(ts===0||!ns)return"";for(var rs=0,as,os=0;as=HEAPU8[ns+os>>0],rs|=as,!(as==0&&!ts||(os++,ts&&os==ts)););ts||(ts=os);var is="";if(rs<128){for(var us=1024,ls;ts>0;)ls=String.fromCharCode.apply(String,HEAPU8.subarray(ns,ns+Math.min(ts,us))),is=is?is+ls:ls,ns+=us,ts-=us;return is}return Module.UTF8ToString(ns)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(ns){for(var ts="";;){var rs=HEAP8[ns++>>0];if(!rs)return ts;ts+=String.fromCharCode(rs)}}Module.AsciiToString=AsciiToString;function stringToAscii(ns,ts){return writeAsciiToMemory(ns,ts,!1)}Module.stringToAscii=stringToAscii;var UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(ns,ts){for(var rs=ts;ns[rs];)++rs;if(rs-ts>16&&ns.subarray&&UTF8Decoder)return UTF8Decoder.decode(ns.subarray(ts,rs));for(var as,os,is,us,ls,fs,hs="";;){if(as=ns[ts++],!as)return hs;if(!(as&128)){hs+=String.fromCharCode(as);continue}if(os=ns[ts++]&63,(as&224)==192){hs+=String.fromCharCode((as&31)<<6|os);continue}if(is=ns[ts++]&63,(as&240)==224?as=(as&15)<<12|os<<6|is:(us=ns[ts++]&63,(as&248)==240?as=(as&7)<<18|os<<12|is<<6|us:(ls=ns[ts++]&63,(as&252)==248?as=(as&3)<<24|os<<18|is<<12|us<<6|ls:(fs=ns[ts++]&63,as=(as&1)<<30|os<<24|is<<18|us<<12|ls<<6|fs))),as<65536)hs+=String.fromCharCode(as);else{var vs=as-65536;hs+=String.fromCharCode(55296|vs>>10,56320|vs&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(ns){return UTF8ArrayToString(HEAPU8,ns)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(ns,ts,rs,as){if(!(as>0))return 0;for(var os=rs,is=rs+as-1,us=0;us<ns.length;++us){var ls=ns.charCodeAt(us);if(ls>=55296&&ls<=57343&&(ls=65536+((ls&1023)<<10)|ns.charCodeAt(++us)&1023),ls<=127){if(rs>=is)break;ts[rs++]=ls}else if(ls<=2047){if(rs+1>=is)break;ts[rs++]=192|ls>>6,ts[rs++]=128|ls&63}else if(ls<=65535){if(rs+2>=is)break;ts[rs++]=224|ls>>12,ts[rs++]=128|ls>>6&63,ts[rs++]=128|ls&63}else if(ls<=2097151){if(rs+3>=is)break;ts[rs++]=240|ls>>18,ts[rs++]=128|ls>>12&63,ts[rs++]=128|ls>>6&63,ts[rs++]=128|ls&63}else if(ls<=67108863){if(rs+4>=is)break;ts[rs++]=248|ls>>24,ts[rs++]=128|ls>>18&63,ts[rs++]=128|ls>>12&63,ts[rs++]=128|ls>>6&63,ts[rs++]=128|ls&63}else{if(rs+5>=is)break;ts[rs++]=252|ls>>30,ts[rs++]=128|ls>>24&63,ts[rs++]=128|ls>>18&63,ts[rs++]=128|ls>>12&63,ts[rs++]=128|ls>>6&63,ts[rs++]=128|ls&63}}return ts[rs]=0,rs-os}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(ns,ts,rs){return stringToUTF8Array(ns,HEAPU8,ts,rs)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(ns){for(var ts=0,rs=0;rs<ns.length;++rs){var as=ns.charCodeAt(rs);as>=55296&&as<=57343&&(as=65536+((as&1023)<<10)|ns.charCodeAt(++rs)&1023),as<=127?++ts:as<=2047?ts+=2:as<=65535?ts+=3:as<=2097151?ts+=4:as<=67108863?ts+=5:ts+=6}return ts}Module.lengthBytesUTF8=lengthBytesUTF8,typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function demangle(ns){var ts=Module.___cxa_demangle||Module.__cxa_demangle;if(ts){try{var rs=ns.substr(1),as=lengthBytesUTF8(rs)+1,os=_malloc(as);stringToUTF8(rs,os,as);var is=_malloc(4),us=ts(os,0,0,is);if(getValue(is,"i32")===0&&us)return Pointer_stringify(us)}catch{}finally{os&&_free(os),is&&_free(is),us&&_free(us)}return ns}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),ns}function demangleAll(ns){var ts=/__Z[\w\d_]+/g;return ns.replace(ts,function(rs){var as=demangle(rs);return rs===as?rs:rs+" ["+as+"]"})}function jsStackTrace(){var ns=new Error;if(!ns.stack){try{throw new Error(0)}catch(ts){ns=ts}if(!ns.stack)return"(no stack trace available)"}return ns.stack.toString()}function stackTrace(){var ns=jsStackTrace();return Module.extraStackTrace&&(ns+=`
`+Module.extraStackTrace()),demangleAll(ns)}Module.stackTrace=stackTrace;var HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or (4) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function enlargeMemory(){abortOnCannotGrowMemory()}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||134217728;TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}if(HEAP32[0]=1668509029,HEAP16[1]=25459,HEAPU8[2]!==115||HEAPU8[3]!==99)throw"Runtime error: expected the system to be little-endian!";Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(ns){for(;ns.length>0;){var ts=ns.shift();if(typeof ts=="function"){ts();continue}var rs=ts.func;typeof rs=="number"?ts.arg===void 0?Module.dynCall_v(rs):Module.dynCall_vi(rs,ts.arg):rs(ts.arg===void 0?null:ts.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(ns){__ATPRERUN__.unshift(ns)}Module.addOnPreRun=addOnPreRun;function addOnInit(ns){__ATINIT__.unshift(ns)}Module.addOnInit=addOnInit;function addOnPreMain(ns){__ATMAIN__.unshift(ns)}Module.addOnPreMain=addOnPreMain;function addOnExit(ns){__ATEXIT__.unshift(ns)}Module.addOnExit=addOnExit;function addOnPostRun(ns){__ATPOSTRUN__.unshift(ns)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(ns,ts,rs){var as=rs>0?rs:lengthBytesUTF8(ns)+1,os=new Array(as),is=stringToUTF8Array(ns,os,0,os.length);return ts&&(os.length=is),os}Module.intArrayFromString=intArrayFromString;function intArrayToString(ns){for(var ts=[],rs=0;rs<ns.length;rs++){var as=ns[rs];as>255&&(as&=255),ts.push(String.fromCharCode(as))}return ts.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(ns,ts,rs){Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var as,os;rs&&(os=ts+lengthBytesUTF8(ns),as=HEAP8[os]),stringToUTF8(ns,ts,1/0),rs&&(HEAP8[os]=as)}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(ns,ts){HEAP8.set(ns,ts)}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(ns,ts,rs){for(var as=0;as<ns.length;++as)HEAP8[ts++>>0]=ns.charCodeAt(as);rs||(HEAP8[ts>>0]=0)}if(Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function ns(ts,rs){var as=ts>>>16,os=ts&65535,is=rs>>>16,us=rs&65535;return os*us+(as*us+os*is<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(ns){return froundBuffer[0]=ns,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(ns){ns=ns>>>0;for(var ts=0;ts<32;ts++)if(ns&1<<31-ts)return ts;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(ns){return ns<0?Math.ceil(ns):Math.floor(ns)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function getUniqueRunDependency(ns){return ns}function addRunDependency(ns){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(ns){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var ts=dependenciesFulfilled;dependenciesFulfilled=null,ts()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var ASM_CONSTS=[function(ns,ts,rs,as,os,is,us,ls){return _nbind.callbackSignatureList[ns].apply(this,arguments)}];function _emscripten_asm_const_iiiiiiii(ns,ts,rs,as,os,is,us,ls){return ASM_CONSTS[ns](ts,rs,as,os,is,us,ls)}function _emscripten_asm_const_iiiii(ns,ts,rs,as,os){return ASM_CONSTS[ns](ts,rs,as,os)}function _emscripten_asm_const_iiidddddd(ns,ts,rs,as,os,is,us,ls,fs){return ASM_CONSTS[ns](ts,rs,as,os,is,us,ls,fs)}function _emscripten_asm_const_iiididi(ns,ts,rs,as,os,is,us){return ASM_CONSTS[ns](ts,rs,as,os,is,us)}function _emscripten_asm_const_iiii(ns,ts,rs,as){return ASM_CONSTS[ns](ts,rs,as)}function _emscripten_asm_const_iiiid(ns,ts,rs,as,os){return ASM_CONSTS[ns](ts,rs,as,os)}function _emscripten_asm_const_iiiiii(ns,ts,rs,as,os,is){return ASM_CONSTS[ns](ts,rs,as,os,is)}STATIC_BASE=Runtime.GLOBAL_BASE,STATICTOP=STATIC_BASE+12800,__ATINIT__.push({func:function(){__GLOBAL__sub_I_Yoga_cpp()}},{func:function(){__GLOBAL__sub_I_nbind_cc()}},{func:function(){__GLOBAL__sub_I_common_cc()}},{func:function(){__GLOBAL__sub_I_Binding_cc()}}),allocate([0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,192,127,0,0,192,127,0,0,192,127,0,0,192,127,3,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,3,0,0,0,0,0,192,127,3,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,192,127,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,192,127,0,0,192,127,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,192,127,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,192,127,0,0,192,127,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,0,0,128,191,0,0,128,191,0,0,192,127,0,0,0,0,0,0,0,0,0,0,128,63,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,3,0,0,0,1,0,0,0,2,0,0,0,0,0,0,0,190,12,0,0,200,12,0,0,208,12,0,0,216,12,0,0,230,12,0,0,242,12,0,0,1,0,0,0,3,0,0,0,0,0,0,0,2,0,0,0,0,0,192,127,3,0,0,0,180,45,0,0,181,45,0,0,182,45,0,0,181,45,0,0,182,45,0,0,0,0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,3,0,0,0,1,0,0,0,4,0,0,0,183,45,0,0,181,45,0,0,181,45,0,0,181,45,0,0,181,45,0,0,181,45,0,0,181,45,0,0,184,45,0,0,185,45,0,0,181,45,0,0,181,45,0,0,182,45,0,0,186,45,0,0,185,45,0,0,148,4,0,0,3,0,0,0,187,45,0,0,164,4,0,0,188,45,0,0,2,0,0,0,189,45,0,0,164,4,0,0,188,45,0,0,185,45,0,0,164,4,0,0,185,45,0,0,164,4,0,0,188,45,0,0,181,45,0,0,182,45,0,0,181,45,0,0,0,0,0,0,0,0,0,0,1,0,0,0,5,0,0,0,6,0,0,0,1,0,0,0,7,0,0,0,183,45,0,0,182,45,0,0,181,45,0,0,190,45,0,0,190,45,0,0,182,45,0,0,182,45,0,0,185,45,0,0,181,45,0,0,185,45,0,0,182,45,0,0,181,45,0,0,185,45,0,0,182,45,0,0,185,45,0,0,48,5,0,0,3,0,0,0,56,5,0,0,1,0,0,0,189,45,0,0,185,45,0,0,164,4,0,0,76,5,0,0,2,0,0,0,191,45,0,0,186,45,0,0,182,45,0,0,185,45,0,0,192,45,0,0,185,45,0,0,182,45,0,0,186,45,0,0,185,45,0,0,76,5,0,0,76,5,0,0,136,5,0,0,182,45,0,0,181,45,0,0,2,0,0,0,190,45,0,0,136,5,0,0,56,19,0,0,156,5,0,0,2,0,0,0,184,45,0,0,0,0,0,0,0,0,0,0,1,0,0,0,8,0,0,0,9,0,0,0,1,0,0,0,10,0,0,0,204,5,0,0,181,45,0,0,181,45,0,0,2,0,0,0,180,45,0,0,204,5,0,0,2,0,0,0,195,45,0,0,236,5,0,0,97,19,0,0,198,45,0,0,211,45,0,0,212,45,0,0,213,45,0,0,214,45,0,0,215,45,0,0,188,45,0,0,182,45,0,0,216,45,0,0,217,45,0,0,218,45,0,0,219,45,0,0,192,45,0,0,181,45,0,0,0,0,0,0,185,45,0,0,110,19,0,0,186,45,0,0,115,19,0,0,221,45,0,0,120,19,0,0,148,4,0,0,132,19,0,0,96,6,0,0,145,19,0,0,222,45,0,0,164,19,0,0,223,45,0,0,173,19,0,0,0,0,0,0,3,0,0,0,104,6,0,0,1,0,0,0,187,45,0,0,0,0,0,0,0,0,0,0,1,0,0,0,11,0,0,0,12,0,0,0,1,0,0,0,13,0,0,0,185,45,0,0,224,45,0,0,164,6,0,0,188,45,0,0,172,6,0,0,180,6,0,0,2,0,0,0,188,6,0,0,7,0,0,0,224,45,0,0,7,0,0,0,164,6,0,0,1,0,0,0,213,45,0,0,185,45,0,0,224,45,0,0,172,6,0,0,185,45,0,0,224,45,0,0,164,6,0,0,185,45,0,0,224,45,0,0,211,45,0,0,211,45,0,0,222,45,0,0,211,45,0,0,224,45,0,0,222,45,0,0,211,45,0,0,224,45,0,0,172,6,0,0,222,45,0,0,211,45,0,0,224,45,0,0,188,45,0,0,222,45,0,0,211,45,0,0,40,7,0,0,188,45,0,0,2,0,0,0,224,45,0,0,185,45,0,0,188,45,0,0,188,45,0,0,188,45,0,0,188,45,0,0,222,45,0,0,224,45,0,0,148,4,0,0,185,45,0,0,148,4,0,0,148,4,0,0,148,4,0,0,148,4,0,0,148,4,0,0,185,45,0,0,164,6,0,0,148,4,0,0,0,0,0,0,0,0,0,0,1,0,0,0,14,0,0,0,15,0,0,0,1,0,0,0,16,0,0,0,148,7,0,0,2,0,0,0,225,45,0,0,183,45,0,0,188,45,0,0,168,7,0,0,5,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,234,45,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,148,45,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,28,9,0,0,5,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,2,0,0,0,242,45,0,0,0,4,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,67,111,117,108,100,32,110,111,116,32,97,108,108,111,99,97,116,101,32,109,101,109,111,114,121,32,102,111,114,32,110,111,100,101,0,67,97,110,110,111,116,32,114,101,115,101,116,32,97,32,110,111,100,101,32,119,104,105,99,104,32,115,116,105,108,108,32,104,97,115,32,99,104,105,108,100,114,101,110,32,97,116,116,97,99,104,101,100,0,67,97,110,110,111,116,32,114,101,115,101,116,32,97,32,110,111,100,101,32,115,116,105,108,108,32,97,116,116,97,99,104,101,100,32,116,111,32,97,32,112,97,114,101,110,116,0,67,111,117,108,100,32,110,111,116,32,97,108,108,111,99,97,116,101,32,109,101,109,111,114,121,32,102,111,114,32,99,111,110,102,105,103,0,67,97,110,110,111,116,32,115,101,116,32,109,101,97,115,117,114,101,32,102,117,110,99,116,105,111,110,58,32,78,111,100,101,115,32,119,105,116,104,32,109,101,97,115,117,114,101,32,102,117,110,99,116,105,111,110,115,32,99,97,110,110,111,116,32,104,97,118,101,32,99,104,105,108,100,114,101,110,46,0,67,104,105,108,100,32,97,108,114,101,97,100,121,32,104,97,115,32,97,32,112,97,114,101,110,116,44,32,105,116,32,109,117,115,116,32,98,101,32,114,101,109,111,118,101,100,32,102,105,114,115,116,46,0,67,97,110,110,111,116,32,97,100,100,32,99,104,105,108,100,58,32,78,111,100,101,115,32,119,105,116,104,32,109,101,97,115,117,114,101,32,102,117,110,99,116,105,111,110,115,32,99,97,110,110,111,116,32,104,97,118,101,32,99,104,105,108,100,114,101,110,46,0,79,110,108,121,32,108,101,97,102,32,110,111,100,101,115,32,119,105,116,104,32,99,117,115,116,111,109,32,109,101,97,115,117,114,101,32,102,117,110,99,116,105,111,110,115,115,104,111,117,108,100,32,109,97,110,117,97,108,108,121,32,109,97,114,107,32,116,104,101,109,115,101,108,118,101,115,32,97,115,32,100,105,114,116,121,0,67,97,110,110,111,116,32,103,101,116,32,108,97,121,111,117,116,32,112,114,111,112,101,114,116,105,101,115,32,111,102,32,109,117,108,116,105,45,101,100,103,101,32,115,104,111,114,116,104,97,110,100,115,0,37,115,37,100,46,123,91,115,107,105,112,112,101,100,93,32,0,119,109,58,32,37,115,44,32,104,109,58,32,37,115,44,32,97,119,58,32,37,102,32,97,104,58,32,37,102,32,61,62,32,100,58,32,40,37,102,44,32,37,102,41,32,37,115,10,0,37,115,37,100,46,123,37,115,0,42,0,119,109,58,32,37,115,44,32,104,109,58,32,37,115,44,32,97,119,58,32,37,102,32,97,104,58,32,37,102,32,37,115,10,0,37,115,37,100,46,125,37,115,0,119,109,58,32,37,115,44,32,104,109,58,32,37,115,44,32,100,58,32,40,37,102,44,32,37,102,41,32,37,115,10,0,79,117,116,32,111,102,32,99,97,99,104,101,32,101,110,116,114,105,101,115,33,10,0,83,99,97,108,101,32,102,97,99,116,111,114,32,115,104,111,117,108,100,32,110,111,116,32,98,101,32,108,101,115,115,32,116,104,97,110,32,122,101,114,111,0,105,110,105,116,105,97,108,0,37,115,10,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,85,78,68,69,70,73,78,69,68,0,69,88,65,67,84,76,89,0,65,84,95,77,79,83,84,0,76,65,89,95,85,78,68,69,70,73,78,69,68,0,76,65,89,95,69,88,65,67,84,76,89,0,76,65,89,95,65,84,95,77,79,83,84,0,97,118,97,105,108,97,98,108,101,87,105,100,116,104,32,105,115,32,105,110,100,101,102,105,110,105,116,101,32,115,111,32,119,105,100,116,104,77,101,97,115,117,114,101,77,111,100,101,32,109,117,115,116,32,98,101,32,89,71,77,101,97,115,117,114,101,77,111,100,101,85,110,100,101,102,105,110,101,100,0,97,118,97,105,108,97,98,108,101,72,101,105,103,104,116,32,105,115,32,105,110,100,101,102,105,110,105,116,101,32,115,111,32,104,101,105,103,104,116,77,101,97,115,117,114,101,77,111,100,101,32,109,117,115,116,32,98,101,32,89,71,77,101,97,115,117,114,101,77,111,100,101,85,110,100,101,102,105,110,101,100,0,102,108,101,120,0,115,116,114,101,116,99,104,0,109,117,108,116,105,108,105,110,101,45,115,116,114,101,116,99,104,0,69,120,112,101,99,116,101,100,32,110,111,100,101,32,116,111,32,104,97,118,101,32,99,117,115,116,111,109,32,109,101,97,115,117,114,101,32,102,117,110,99,116,105,111,110,0,109,101,97,115,117,114,101,0,69,120,112,101,99,116,32,99,117,115,116,111,109,32,98,97,115,101,108,105,110,101,32,102,117,110,99,116,105,111,110,32,116,111,32,110,111,116,32,114,101,116,117,114,110,32,78,97,78,0,97,98,115,45,109,101,97,115,117,114,101,0,97,98,115,45,108,97,121,111,117,116,0,78,111,100,101,0,99,114,101,97,116,101,68,101,102,97,117,108,116,0,99,114,101,97,116,101,87,105,116,104,67,111,110,102,105,103,0,100,101,115,116,114,111,121,0,114,101,115,101,116,0,99,111,112,121,83,116,121,108,101,0,115,101,116,80,111,115,105,116,105,111,110,84,121,112,101,0,115,101,116,80,111,115,105,116,105,111,110,0,115,101,116,80,111,115,105,116,105,111,110,80,101,114,99,101,110,116,0,115,101,116,65,108,105,103,110,67,111,110,116,101,110,116,0,115,101,116,65,108,105,103,110,73,116,101,109,115,0,115,101,116,65,108,105,103,110,83,101,108,102,0,115,101,116,70,108,101,120,68,105,114,101,99,116,105,111,110,0,115,101,116,70,108,101,120,87,114,97,112,0,115,101,116,74,117,115,116,105,102,121,67,111,110,116,101,110,116,0,115,101,116,77,97,114,103,105,110,0,115,101,116,77,97,114,103,105,110,80,101,114,99,101,110,116,0,115,101,116,77,97,114,103,105,110,65,117,116,111,0,115,101,116,79,118,101,114,102,108,111,119,0,115,101,116,68,105,115,112,108,97,121,0,115,101,116,70,108,101,120,0,115,101,116,70,108,101,120,66,97,115,105,115,0,115,101,116,70,108,101,120,66,97,115,105,115,80,101,114,99,101,110,116,0,115,101,116,70,108,101,120,71,114,111,119,0,115,101,116,70,108,101,120,83,104,114,105,110,107,0,115,101,116,87,105,100,116,104,0,115,101,116,87,105,100,116,104,80,101,114,99,101,110,116,0,115,101,116,87,105,100,116,104,65,117,116,111,0,115,101,116,72,101,105,103,104,116,0,115,101,116,72,101,105,103,104,116,80,101,114,99,101,110,116,0,115,101,116,72,101,105,103,104,116,65,117,116,111,0,115,101,116,77,105,110,87,105,100,116,104,0,115,101,116,77,105,110,87,105,100,116,104,80,101,114,99,101,110,116,0,115,101,116,77,105,110,72,101,105,103,104,116,0,115,101,116,77,105,110,72,101,105,103,104,116,80,101,114,99,101,110,116,0,115,101,116,77,97,120,87,105,100,116,104,0,115,101,116,77,97,120,87,105,100,116,104,80,101,114,99,101,110,116,0,115,101,116,77,97,120,72,101,105,103,104,116,0,115,101,116,77,97,120,72,101,105,103,104,116,80,101,114,99,101,110,116,0,115,101,116,65,115,112,101,99,116,82,97,116,105,111,0,115,101,116,66,111,114,100,101,114,0,115,101,116,80,97,100,100,105,110,103,0,115,101,116,80,97,100,100,105,110,103,80,101,114,99,101,110,116,0,103,101,116,80,111,115,105,116,105,111,110,84,121,112,101,0,103,101,116,80,111,115,105,116,105,111,110,0,103,101,116,65,108,105,103,110,67,111,110,116,101,110,116,0,103,101,116,65,108,105,103,110,73,116,101,109,115,0,103,101,116,65,108,105,103,110,83,101,108,102,0,103,101,116,70,108,101,120,68,105,114,101,99,116,105,111,110,0,103,101,116,70,108,101,120,87,114,97,112,0,103,101,116,74,117,115,116,105,102,121,67,111,110,116,101,110,116,0,103,101,116,77,97,114,103,105,110,0,103,101,116,70,108,101,120,66,97,115,105,115,0,103,101,116,70,108,101,120,71,114,111,119,0,103,101,116,70,108,101,120,83,104,114,105,110,107,0,103,101,116,87,105,100,116,104,0,103,101,116,72,101,105,103,104,116,0,103,101,116,77,105,110,87,105,100,116,104,0,103,101,116,77,105,110,72,101,105,103,104,116,0,103,101,116,77,97,120,87,105,100,116,104,0,103,101,116,77,97,120,72,101,105,103,104,116,0,103,101,116,65,115,112,101,99,116,82,97,116,105,111,0,103,101,116,66,111,114,100,101,114,0,103,101,116,79,118,101,114,102,108,111,119,0,103,101,116,68,105,115,112,108,97,121,0,103,101,116,80,97,100,100,105,110,103,0,105,110,115,101,114,116,67,104,105,108,100,0,114,101,109,111,118,101,67,104,105,108,100,0,103,101,116,67,104,105,108,100,67,111,117,110,116,0,103,101,116,80,97,114,101,110,116,0,103,101,116,67,104,105,108,100,0,115,101,116,77,101,97,115,117,114,101,70,117,110,99,0,117,110,115,101,116,77,101,97,115,117,114,101,70,117,110,99,0,109,97,114,107,68,105,114,116,121,0,105,115,68,105,114,116,121,0,99,97,108,99,117,108,97,116,101,76,97,121,111,117,116,0,103,101,116,67,111,109,112,117,116,101,100,76,101,102,116,0,103,101,116,67,111,109,112,117,116,101,100,82,105,103,104,116,0,103,101,116,67,111,109,112,117,116,101,100,84,111,112,0,103,101,116,67,111,109,112,117,116,101,100,66,111,116,116,111,109,0,103,101,116,67,111,109,112,117,116,101,100,87,105,100,116,104,0,103,101,116,67,111,109,112,117,116,101,100,72,101,105,103,104,116,0,103,101,116,67,111,109,112,117,116,101,100,76,97,121,111,117,116,0,103,101,116,67,111,109,112,117,116,101,100,77,97,114,103,105,110,0,103,101,116,67,111,109,112,117,116,101,100,66,111,114,100,101,114,0,103,101,116,67,111,109,112,117,116,101,100,80,97,100,100,105,110,103,0,67,111,110,102,105,103,0,99,114,101,97,116,101,0,115,101,116,69,120,112,101,114,105,109,101,110,116,97,108,70,101,97,116,117,114,101,69,110,97,98,108,101,100,0,115,101,116,80,111,105,110,116,83,99,97,108,101,70,97,99,116,111,114,0,105,115,69,120,112,101,114,105,109,101,110,116,97,108,70,101,97,116,117,114,101,69,110,97,98,108,101,100,0,86,97,108,117,101,0,76,97,121,111,117,116,0,83,105,122,101,0,103,101,116,73,110,115,116,97,110,99,101,67,111,117,110,116,0,73,110,116,54,52,0,1,1,1,2,2,4,4,4,4,8,8,4,8,118,111,105,100,0,98,111,111,108,0,115,116,100,58,58,115,116,114,105,110,103,0,99,98,70,117,110,99,116,105,111,110,32,38,0,99,111,110,115,116,32,99,98,70,117,110,99,116,105,111,110,32,38,0,69,120,116,101,114,110,97,108,0,66,117,102,102,101,114,0,78,66,105,110,100,73,68,0,78,66,105,110,100,0,98,105,110,100,95,118,97,108,117,101,0,114,101,102,108,101,99,116,0,113,117,101,114,121,84,121,112,101,0,108,97,108,108,111,99,0,108,114,101,115,101,116,0,123,114,101,116,117,114,110,40,95,110,98,105,110,100,46,99,97,108,108,98,97,99,107,83,105,103,110,97,116,117,114,101,76,105,115,116,91,36,48,93,46,97,112,112,108,121,40,116,104,105,115,44,97,114,103,117,109,101,110,116,115,41,41,59,125,0,95,110,98,105,110,100,95,110,101,119,0,17,0,10,0,17,17,17,0,0,0,0,5,0,0,0,0,0,0,9,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,15,10,17,17,17,3,10,7,0,1,19,9,11,11,0,0,9,6,11,0,0,11,0,6,17,0,0,0,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,10,10,17,17,17,0,10,0,0,2,0,9,11,0,0,0,9,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,4,13,0,0,0,0,9,14,0,0,0,0,0,14,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,15,0,0,0,0,9,16,0,0,0,0,0,16,0,0,16,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,10,0,0,0,0,9,11,0,0,0,0,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,45,43,32,32,32,48,88,48,120,0,40,110,117,108,108,41,0,45,48,88,43,48,88,32,48,88,45,48,120,43,48,120,32,48,120,0,105,110,102,0,73,78,70,0,110,97,110,0,78,65,78,0,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,46,0,84,33,34,25,13,1,2,3,17,75,28,12,16,4,11,29,18,30,39,104,110,111,112,113,98,32,5,6,15,19,20,21,26,8,22,7,40,36,23,24,9,10,14,27,31,37,35,131,130,125,38,42,43,60,61,62,63,67,71,74,77,88,89,90,91,92,93,94,95,96,97,99,100,101,102,103,105,106,107,108,114,115,116,121,122,123,124,0,73,108,108,101,103,97,108,32,98,121,116,101,32,115,101,113,117,101,110,99,101,0,68,111,109,97,105,110,32,101,114,114,111,114,0,82,101,115,117,108,116,32,110,111,116,32,114,101,112,114,101,115,101,110,116,97,98,108,101,0,78,111,116,32,97,32,116,116,121,0,80,101,114,109,105,115,115,105,111,110,32,100,101,110,105,101,100,0,79,112,101,114,97,116,105,111,110,32,110,111,116,32,112,101,114,109,105,116,116,101,100,0,78,111,32,115,117,99,104,32,102,105,108,101,32,111,114,32,100,105,114,101,99,116,111,114,121,0,78,111,32,115,117,99,104,32,112,114,111,99,101,115,115,0,70,105,108,101,32,101,120,105,115,116,115,0,86,97,108,117,101,32,116,111,111,32,108,97,114,103,101,32,102,111,114,32,100,97,116,97,32,116,121,112,101,0,78,111,32,115,112,97,99,101,32,108,101,102,116,32,111,110,32,100,101,118,105,99,101,0,79,117,116,32,111,102,32,109,101,109,111,114,121,0,82,101,115,111,117,114,99,101,32,98,117,115,121,0,73,110,116,101,114,114,117,112,116,101,100,32,115,121,115,116,101,109,32,99,97,108,108,0,82,101,115,111,117,114,99,101,32,116,101,109,112,111,114,97,114,105,108,121,32,117,110,97,118,97,105,108,97,98,108,101,0,73,110,118,97,108,105,100,32,115,101,101,107,0,67,114,111,115,115,45,100,101,118,105,99,101,32,108,105,110,107,0,82,101,97,100,45,111,110,108,121,32,102,105,108,101,32,115,121,115,116,101,109,0,68,105,114,101,99,116,111,114,121,32,110,111,116,32,101,109,112,116,121,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,112,101,101,114,0,79,112,101,114,97,116,105,111,110,32,116,105,109,101,100,32,111,117,116,0,67,111,110,110,101,99,116,105,111,110,32,114,101,102,117,115,101,100,0,72,111,115,116,32,105,115,32,100,111,119,110,0,72,111,115,116,32,105,115,32,117,110,114,101,97,99,104,97,98,108,101,0,65,100,100,114,101,115,115,32,105,110,32,117,115,101,0,66,114,111,107,101,110,32,112,105,112,101,0,73,47,79,32,101,114,114,111,114,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,32,111,114,32,97,100,100,114,101,115,115,0,66,108,111,99,107,32,100,101,118,105,99,101,32,114,101,113,117,105,114,101,100,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,0,78,111,116,32,97,32,100,105,114,101,99,116,111,114,121,0,73,115,32,97,32,100,105,114,101,99,116,111,114,121,0,84,101,120,116,32,102,105,108,101,32,98,117,115,121,0,69,120,101,99,32,102,111,114,109,97,116,32,101,114,114,111,114,0,73,110,118,97,108,105,100,32,97,114,103,117,109,101,110,116,0,65,114,103,117,109,101,110,116,32,108,105,115,116,32,116,111,111,32,108,111,110,103,0,83,121,109,98,111,108,105,99,32,108,105,110,107,32,108,111,111,112,0,70,105,108,101,110,97,109,101,32,116,111,111,32,108,111,110,103,0,84,111,111,32,109,97,110,121,32,111,112,101,110,32,102,105,108,101,115,32,105,110,32,115,121,115,116,101,109,0,78,111,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,115,32,97,118,97,105,108,97,98,108,101,0,66,97,100,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,0,78,111,32,99,104,105,108,100,32,112,114,111,99,101,115,115,0,66,97,100,32,97,100,100,114,101,115,115,0,70,105,108,101,32,116,111,111,32,108,97,114,103,101,0,84,111,111,32,109,97,110,121,32,108,105,110,107,115,0,78,111,32,108,111,99,107,115,32,97,118,97,105,108,97,98,108,101,0,82,101,115,111,117,114,99,101,32,100,101,97,100,108,111,99,107,32,119,111,117,108,100,32,111,99,99,117,114,0,83,116,97,116,101,32,110,111,116,32,114,101,99,111,118,101,114,97,98,108,101,0,80,114,101,118,105,111,117,115,32,111,119,110,101,114,32,100,105,101,100,0,79,112,101,114,97,116,105,111,110,32,99,97,110,99,101,108,101,100,0,70,117,110,99,116,105,111,110,32,110,111,116,32,105,109,112,108,101,109,101,110,116,101,100,0,78,111,32,109,101,115,115,97,103,101,32,111,102,32,100,101,115,105,114,101,100,32,116,121,112,101,0,73,100,101,110,116,105,102,105,101,114,32,114,101,109,111,118,101,100,0,68,101,118,105,99,101,32,110,111,116,32,97,32,115,116,114,101,97,109,0,78,111,32,100,97,116,97,32,97,118,97,105,108,97,98,108,101,0,68,101,118,105,99,101,32,116,105,109,101,111,117,116,0,79,117,116,32,111,102,32,115,116,114,101,97,109,115,32,114,101,115,111,117,114,99,101,115,0,76,105,110,107,32,104,97,115,32,98,101,101,110,32,115,101,118,101,114,101,100,0,80,114,111,116,111,99,111,108,32,101,114,114,111,114,0,66,97,100,32,109,101,115,115,97,103,101,0,70,105,108,101,32,100,101,115,99,114,105,112,116,111,114,32,105,110,32,98,97,100,32,115,116,97,116,101,0,78,111,116,32,97,32,115,111,99,107,101,116,0,68,101,115,116,105,110,97,116,105,111,110,32,97,100,100,114,101,115,115,32,114,101,113,117,105,114,101,100,0,77,101,115,115,97,103,101,32,116,111,111,32,108,97,114,103,101,0,80,114,111,116,111,99,111,108,32,119,114,111,110,103,32,116,121,112,101,32,102,111,114,32,115,111,99,107,101,116,0,80,114,111,116,111,99,111,108,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,80,114,111,116,111,99,111,108,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,83,111,99,107,101,116,32,116,121,112,101,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,78,111,116,32,115,117,112,112,111,114,116,101,100,0,80,114,111,116,111,99,111,108,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,65,100,100,114,101,115,115,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,32,98,121,32,112,114,111,116,111,99,111,108,0,65,100,100,114,101,115,115,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,78,101,116,119,111,114,107,32,105,115,32,100,111,119,110,0,78,101,116,119,111,114,107,32,117,110,114,101,97,99,104,97,98,108,101,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,110,101,116,119,111,114,107,0,67,111,110,110,101,99,116,105,111,110,32,97,98,111,114,116,101,100,0,78,111,32,98,117,102,102,101,114,32,115,112,97,99,101,32,97,118,97,105,108,97,98,108,101,0,83,111,99,107,101,116,32,105,115,32,99,111,110,110,101,99,116,101,100,0,83,111,99,107,101,116,32,110,111,116,32,99,111,110,110,101,99,116,101,100,0,67,97,110,110,111,116,32,115,101,110,100,32,97,102,116,101,114,32,115,111,99,107,101,116,32,115,104,117,116,100,111,119,110,0,79,112,101,114,97,116,105,111,110,32,97,108,114,101,97,100,121,32,105,110,32,112,114,111,103,114,101,115,115,0,79,112,101,114,97,116,105,111,110,32,105,110,32,112,114,111,103,114,101,115,115,0,83,116,97,108,101,32,102,105,108,101,32,104,97,110,100,108,101,0,82,101,109,111,116,101,32,73,47,79,32,101,114,114,111,114,0,81,117,111,116,97,32,101,120,99,101,101,100,101,100,0,78,111,32,109,101,100,105,117,109,32,102,111,117,110,100,0,87,114,111,110,103,32,109,101,100,105,117,109,32,116,121,112,101,0,78,111,32,101,114,114,111,114,32,105,110,102,111,114,109,97,116,105,111,110,0,0],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE);var tempDoublePtr=STATICTOP;STATICTOP+=16;function _atexit(ns,ts){__ATEXIT__.unshift({func:ns,arg:ts})}function ___cxa_atexit(){return _atexit.apply(null,arguments)}function _abort(){Module.abort()}function __ZN8facebook4yoga14YGNodeToStringEPNSt3__212basic_stringIcNS1_11char_traitsIcEENS1_9allocatorIcEEEEP6YGNode14YGPrintOptionsj(){Module.printErr("missing function: _ZN8facebook4yoga14YGNodeToStringEPNSt3__212basic_stringIcNS1_11char_traitsIcEENS1_9allocatorIcEEEEP6YGNode14YGPrintOptionsj"),abort(-1)}function __decorate(ns,ts,rs,as){var os=arguments.length,is=os<3?ts:as===null?as=Object.getOwnPropertyDescriptor(ts,rs):as,us;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")is=Reflect.decorate(ns,ts,rs,as);else for(var ls=ns.length-1;ls>=0;ls--)(us=ns[ls])&&(is=(os<3?us(is):os>3?us(ts,rs,is):us(ts,rs))||is);return os>3&&is&&Object.defineProperty(ts,rs,is),is}function _defineHidden(ns){return function(ts,rs){Object.defineProperty(ts,rs,{configurable:!1,enumerable:!1,value:ns,writable:!0})}}var _nbind={};function __nbind_free_external(ns){_nbind.externalList[ns].dereference(ns)}function __nbind_reference_external(ns){_nbind.externalList[ns].reference()}function _llvm_stackrestore(ns){var ts=_llvm_stacksave,rs=ts.LLVM_SAVEDSTACKS[ns];ts.LLVM_SAVEDSTACKS.splice(ns,1),Runtime.stackRestore(rs)}function __nbind_register_pool(ns,ts,rs,as){_nbind.Pool.pageSize=ns,_nbind.Pool.usedPtr=ts/4,_nbind.Pool.rootPtr=rs,_nbind.Pool.pagePtr=as/4,HEAP32[ts/4]=16909060,HEAP8[ts]==1&&(_nbind.bigEndian=!0),HEAP32[ts/4]=0,_nbind.makeTypeKindTbl=(is={},is[1024]=_nbind.PrimitiveType,is[64]=_nbind.Int64Type,is[2048]=_nbind.BindClass,is[3072]=_nbind.BindClassPtr,is[4096]=_nbind.SharedClassPtr,is[5120]=_nbind.ArrayType,is[6144]=_nbind.ArrayType,is[7168]=_nbind.CStringType,is[9216]=_nbind.CallbackType,is[10240]=_nbind.BindType,is),_nbind.makeTypeNameTbl={Buffer:_nbind.BufferType,External:_nbind.ExternalType,Int64:_nbind.Int64Type,_nbind_new:_nbind.CreateValueType,bool:_nbind.BooleanType,"cbFunction &":_nbind.CallbackType,"const cbFunction &":_nbind.CallbackType,"const std::string &":_nbind.StringType,"std::string":_nbind.StringType},Module.toggleLightGC=_nbind.toggleLightGC,_nbind.callUpcast=Module.dynCall_ii;var os=_nbind.makeType(_nbind.constructType,{flags:2048,id:0,name:""});os.proto=Module,_nbind.BindClass.list.push(os);var is}function _emscripten_set_main_loop_timing(ns,ts){if(Browser.mainLoop.timingMode=ns,Browser.mainLoop.timingValue=ts,!Browser.mainLoop.func)return 1;if(ns==0)Browser.mainLoop.scheduler=function(){var us=Math.max(0,Browser.mainLoop.tickStartTime+ts-_emscripten_get_now())|0;setTimeout(Browser.mainLoop.runner,us)},Browser.mainLoop.method="timeout";else if(ns==1)Browser.mainLoop.scheduler=function(){Browser.requestAnimationFrame(Browser.mainLoop.runner)},Browser.mainLoop.method="rAF";else if(ns==2){if(!window.setImmediate){let is=function(us){us.source===window&&us.data===as&&(us.stopPropagation(),rs.shift()())};var os=is,rs=[],as="setimmediate";window.addEventListener("message",is,!0),window.setImmediate=function(ls){rs.push(ls),ENVIRONMENT_IS_WORKER?(Module.setImmediates===void 0&&(Module.setImmediates=[]),Module.setImmediates.push(ls),window.postMessage({target:as})):window.postMessage(as,"*")}}Browser.mainLoop.scheduler=function(){window.setImmediate(Browser.mainLoop.runner)},Browser.mainLoop.method="immediate"}return 0}function _emscripten_get_now(){abort()}function _emscripten_set_main_loop(ns,ts,rs,as,os){Module.noExitRuntime=!0,assert(!Browser.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Browser.mainLoop.func=ns,Browser.mainLoop.arg=as;var is;typeof as<"u"?is=function(){Module.dynCall_vi(ns,as)}:is=function(){Module.dynCall_v(ns)};var us=Browser.mainLoop.currentlyRunningMainloop;if(Browser.mainLoop.runner=function(){if(!ABORT){if(Browser.mainLoop.queue.length>0){var fs=Date.now(),hs=Browser.mainLoop.queue.shift();if(hs.func(hs.arg),Browser.mainLoop.remainingBlockers){var vs=Browser.mainLoop.remainingBlockers,gs=vs%1==0?vs-1:Math.floor(vs);hs.counted?Browser.mainLoop.remainingBlockers=gs:(gs=gs+.5,Browser.mainLoop.remainingBlockers=(8*vs+gs)/9)}if(console.log('main loop blocker "'+hs.name+'" took '+(Date.now()-fs)+" ms"),Browser.mainLoop.updateStatus(),us<Browser.mainLoop.currentlyRunningMainloop)return;setTimeout(Browser.mainLoop.runner,0);return}if(!(us<Browser.mainLoop.currentlyRunningMainloop)){if(Browser.mainLoop.currentFrameNumber=Browser.mainLoop.currentFrameNumber+1|0,Browser.mainLoop.timingMode==1&&Browser.mainLoop.timingValue>1&&Browser.mainLoop.currentFrameNumber%Browser.mainLoop.timingValue!=0){Browser.mainLoop.scheduler();return}else Browser.mainLoop.timingMode==0&&(Browser.mainLoop.tickStartTime=_emscripten_get_now());Browser.mainLoop.method==="timeout"&&Module.ctx&&(Module.printErr("Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!"),Browser.mainLoop.method=""),Browser.mainLoop.runIter(is),!(us<Browser.mainLoop.currentlyRunningMainloop)&&(typeof SDL=="object"&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),Browser.mainLoop.scheduler())}}},os||(ts&&ts>0?_emscripten_set_main_loop_timing(0,1e3/ts):_emscripten_set_main_loop_timing(1,1),Browser.mainLoop.scheduler()),rs)throw"SimulateInfiniteLoop"}var Browser={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Browser.mainLoop.scheduler=null,Browser.mainLoop.currentlyRunningMainloop++},resume:function(){Browser.mainLoop.currentlyRunningMainloop++;var ns=Browser.mainLoop.timingMode,ts=Browser.mainLoop.timingValue,rs=Browser.mainLoop.func;Browser.mainLoop.func=null,_emscripten_set_main_loop(rs,0,!1,Browser.mainLoop.arg,!0),_emscripten_set_main_loop_timing(ns,ts),Browser.mainLoop.scheduler()},updateStatus:function(){if(Module.setStatus){var ns=Module.statusMessage||"Please wait...",ts=Browser.mainLoop.remainingBlockers,rs=Browser.mainLoop.expectedBlockers;ts?ts<rs?Module.setStatus(ns+" ("+(rs-ts)+"/"+rs+")"):Module.setStatus(ns):Module.setStatus("")}},runIter:function(ns){if(!ABORT){if(Module.preMainLoop){var ts=Module.preMainLoop();if(ts===!1)return}try{ns()}catch(rs){if(rs instanceof ExitStatus)return;throw rs&&typeof rs=="object"&&rs.stack&&Module.printErr("exception thrown: "+[rs,rs.stack]),rs}Module.postMainLoop&&Module.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(Module.preloadPlugins||(Module.preloadPlugins=[]),Browser.initted)return;Browser.initted=!0;try{new Blob,Browser.hasBlobConstructor=!0}catch{Browser.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}Browser.BlobBuilder=typeof MozBlobBuilder<"u"?MozBlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:Browser.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),Browser.URLObject=typeof window<"u"?window.URL?window.URL:window.webkitURL:void 0,!Module.noImageDecoding&&typeof Browser.URLObject>"u"&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),Module.noImageDecoding=!0);var ns={};ns.canHandle=function(is){return!Module.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(is)},ns.handle=function(is,us,ls,fs){var hs=null;if(Browser.hasBlobConstructor)try{hs=new Blob([is],{type:Browser.getMimetype(us)}),hs.size!==is.length&&(hs=new Blob([new Uint8Array(is).buffer],{type:Browser.getMimetype(us)}))}catch(xs){Runtime.warnOnce("Blob constructor present but fails: "+xs+"; falling back to blob builder")}if(!hs){var vs=new Browser.BlobBuilder;vs.append(new Uint8Array(is).buffer),hs=vs.getBlob()}var gs=Browser.URLObject.createObjectURL(hs),ys=new Image;ys.onload=function(){assert(ys.complete,"Image "+us+" could not be decoded");var ms=document.createElement("canvas");ms.width=ys.width,ms.height=ys.height;var Ss=ms.getContext("2d");Ss.drawImage(ys,0,0),Module.preloadedImages[us]=ms,Browser.URLObject.revokeObjectURL(gs),ls&&ls(is)},ys.onerror=function(ms){console.log("Image "+gs+" could not be decoded"),fs&&fs()},ys.src=gs},Module.preloadPlugins.push(ns);var ts={};ts.canHandle=function(is){return!Module.noAudioDecoding&&is.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},ts.handle=function(is,us,ls,fs){var hs=!1;function vs(Ss){hs||(hs=!0,Module.preloadedAudios[us]=Ss,ls&&ls(is))}function gs(){hs||(hs=!0,Module.preloadedAudios[us]=new Audio,fs&&fs())}if(Browser.hasBlobConstructor){try{var ys=new Blob([is],{type:Browser.getMimetype(us)})}catch{return gs()}var xs=Browser.URLObject.createObjectURL(ys),ms=new Audio;ms.addEventListener("canplaythrough",function(){vs(ms)},!1),ms.onerror=function(Ms){if(hs)return;console.log("warning: browser could not fully decode audio "+us+", trying slower base64 approach");function $s(bs){for(var Cs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",As="=",Is="",ks=0,Ps=0,Ds=0;Ds<bs.length;Ds++)for(ks=ks<<8|bs[Ds],Ps+=8;Ps>=6;){var Fs=ks>>Ps-6&63;Ps-=6,Is+=Cs[Fs]}return Ps==2?(Is+=Cs[(ks&3)<<4],Is+=As+As):Ps==4&&(Is+=Cs[(ks&15)<<2],Is+=As),Is}ms.src="data:audio/x-"+us.substr(-3)+";base64,"+$s(is),vs(ms)},ms.src=xs,Browser.safeSetTimeout(function(){vs(ms)},1e4)}else return gs()},Module.preloadPlugins.push(ts);function rs(){Browser.pointerLock=document.pointerLockElement===Module.canvas||document.mozPointerLockElement===Module.canvas||document.webkitPointerLockElement===Module.canvas||document.msPointerLockElement===Module.canvas}var as=Module.canvas;as&&(as.requestPointerLock=as.requestPointerLock||as.mozRequestPointerLock||as.webkitRequestPointerLock||as.msRequestPointerLock||function(){},as.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},as.exitPointerLock=as.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",rs,!1),document.addEventListener("mozpointerlockchange",rs,!1),document.addEventListener("webkitpointerlockchange",rs,!1),document.addEventListener("mspointerlockchange",rs,!1),Module.elementPointerLock&&as.addEventListener("click",function(os){!Browser.pointerLock&&Module.canvas.requestPointerLock&&(Module.canvas.requestPointerLock(),os.preventDefault())},!1))},createContext:function(ns,ts,rs,as){if(ts&&Module.ctx&&ns==Module.canvas)return Module.ctx;var os,is;if(ts){var us={antialias:!1,alpha:!1};if(as)for(var ls in as)us[ls]=as[ls];is=GL.createContext(ns,us),is&&(os=GL.getContext(is).GLctx)}else os=ns.getContext("2d");return os?(rs&&(ts||assert(typeof GLctx>"u","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),Module.ctx=os,ts&&GL.makeContextCurrent(is),Module.useWebGL=ts,Browser.moduleContextCreatedCallbacks.forEach(function(fs){fs()}),Browser.init()),os):null},destroyContext:function(ns,ts,rs){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(ns,ts,rs){Browser.lockPointer=ns,Browser.resizeCanvas=ts,Browser.vrDevice=rs,typeof Browser.lockPointer>"u"&&(Browser.lockPointer=!0),typeof Browser.resizeCanvas>"u"&&(Browser.resizeCanvas=!1),typeof Browser.vrDevice>"u"&&(Browser.vrDevice=null);var as=Module.canvas;function os(){Browser.isFullscreen=!1;var us=as.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===us?(as.exitFullscreen=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){},as.exitFullscreen=as.exitFullscreen.bind(document),Browser.lockPointer&&as.requestPointerLock(),Browser.isFullscreen=!0,Browser.resizeCanvas&&Browser.setFullscreenCanvasSize()):(us.parentNode.insertBefore(as,us),us.parentNode.removeChild(us),Browser.resizeCanvas&&Browser.setWindowedCanvasSize()),Module.onFullScreen&&Module.onFullScreen(Browser.isFullscreen),Module.onFullscreen&&Module.onFullscreen(Browser.isFullscreen),Browser.updateCanvasDimensions(as)}Browser.fullscreenHandlersInstalled||(Browser.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",os,!1),document.addEventListener("mozfullscreenchange",os,!1),document.addEventListener("webkitfullscreenchange",os,!1),document.addEventListener("MSFullscreenChange",os,!1));var is=document.createElement("div");as.parentNode.insertBefore(is,as),is.appendChild(as),is.requestFullscreen=is.requestFullscreen||is.mozRequestFullScreen||is.msRequestFullscreen||(is.webkitRequestFullscreen?function(){is.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(is.webkitRequestFullScreen?function(){is.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),rs?is.requestFullscreen({vrDisplay:rs}):is.requestFullscreen()},requestFullScreen:function(ns,ts,rs){return Module.printErr("Browser.requestFullScreen() is deprecated. Please call Browser.requestFullscreen instead."),Browser.requestFullScreen=function(as,os,is){return Browser.requestFullscreen(as,os,is)},Browser.requestFullscreen(ns,ts,rs)},nextRAF:0,fakeRequestAnimationFrame:function(ns){var ts=Date.now();if(Browser.nextRAF===0)Browser.nextRAF=ts+1e3/60;else for(;ts+2>=Browser.nextRAF;)Browser.nextRAF+=1e3/60;var rs=Math.max(Browser.nextRAF-ts,0);setTimeout(ns,rs)},requestAnimationFrame:function ns(ts){typeof window>"u"?Browser.fakeRequestAnimationFrame(ts):(window.requestAnimationFrame||(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||Browser.fakeRequestAnimationFrame),window.requestAnimationFrame(ts))},safeCallback:function(ns){return function(){if(!ABORT)return ns.apply(null,arguments)}},allowAsyncCallbacks:!0,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){Browser.allowAsyncCallbacks=!1},resumeAsyncCallbacks:function(){if(Browser.allowAsyncCallbacks=!0,Browser.queuedAsyncCallbacks.length>0){var ns=Browser.queuedAsyncCallbacks;Browser.queuedAsyncCallbacks=[],ns.forEach(function(ts){ts()})}},safeRequestAnimationFrame:function(ns){return Browser.requestAnimationFrame(function(){ABORT||(Browser.allowAsyncCallbacks?ns():Browser.queuedAsyncCallbacks.push(ns))})},safeSetTimeout:function(ns,ts){return Module.noExitRuntime=!0,setTimeout(function(){ABORT||(Browser.allowAsyncCallbacks?ns():Browser.queuedAsyncCallbacks.push(ns))},ts)},safeSetInterval:function(ns,ts){return Module.noExitRuntime=!0,setInterval(function(){ABORT||Browser.allowAsyncCallbacks&&ns()},ts)},getMimetype:function(ns){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[ns.substr(ns.lastIndexOf(".")+1)]},getUserMedia:function(ns){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(ns)},getMovementX:function(ns){return ns.movementX||ns.mozMovementX||ns.webkitMovementX||0},getMovementY:function(ns){return ns.movementY||ns.mozMovementY||ns.webkitMovementY||0},getMouseWheelDelta:function(ns){var ts=0;switch(ns.type){case"DOMMouseScroll":ts=ns.detail;break;case"mousewheel":ts=ns.wheelDelta;break;case"wheel":ts=ns.deltaY;break;default:throw"unrecognized mouse wheel event: "+ns.type}return ts},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(ns){if(Browser.pointerLock)ns.type!="mousemove"&&"mozMovementX"in ns?Browser.mouseMovementX=Browser.mouseMovementY=0:(Browser.mouseMovementX=Browser.getMovementX(ns),Browser.mouseMovementY=Browser.getMovementY(ns)),typeof SDL<"u"?(Browser.mouseX=SDL.mouseX+Browser.mouseMovementX,Browser.mouseY=SDL.mouseY+Browser.mouseMovementY):(Browser.mouseX+=Browser.mouseMovementX,Browser.mouseY+=Browser.mouseMovementY);else{var ts=Module.canvas.getBoundingClientRect(),rs=Module.canvas.width,as=Module.canvas.height,os=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,is=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset;if(ns.type==="touchstart"||ns.type==="touchend"||ns.type==="touchmove"){var us=ns.touch;if(us===void 0)return;var ls=us.pageX-(os+ts.left),fs=us.pageY-(is+ts.top);ls=ls*(rs/ts.width),fs=fs*(as/ts.height);var hs={x:ls,y:fs};if(ns.type==="touchstart")Browser.lastTouches[us.identifier]=hs,Browser.touches[us.identifier]=hs;else if(ns.type==="touchend"||ns.type==="touchmove"){var vs=Browser.touches[us.identifier];vs||(vs=hs),Browser.lastTouches[us.identifier]=vs,Browser.touches[us.identifier]=hs}return}var gs=ns.pageX-(os+ts.left),ys=ns.pageY-(is+ts.top);gs=gs*(rs/ts.width),ys=ys*(as/ts.height),Browser.mouseMovementX=gs-Browser.mouseX,Browser.mouseMovementY=ys-Browser.mouseY,Browser.mouseX=gs,Browser.mouseY=ys}},asyncLoad:function(ns,ts,rs,as){var os=as?"":"al "+ns;Module.readAsync(ns,function(is){assert(is,'Loading data file "'+ns+'" failed (no arrayBuffer).'),ts(new Uint8Array(is)),os&&removeRunDependency()},function(is){if(rs)rs();else throw'Loading data file "'+ns+'" failed.'}),os&&addRunDependency()},resizeListeners:[],updateResizeListeners:function(){var ns=Module.canvas;Browser.resizeListeners.forEach(function(ts){ts(ns.width,ns.height)})},setCanvasSize:function(ns,ts,rs){var as=Module.canvas;Browser.updateCanvasDimensions(as,ns,ts),rs||Browser.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof SDL<"u"){var ns=HEAPU32[SDL.screen+Runtime.QUANTUM_SIZE*0>>2];ns=ns|8388608,HEAP32[SDL.screen+Runtime.QUANTUM_SIZE*0>>2]=ns}Browser.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof SDL<"u"){var ns=HEAPU32[SDL.screen+Runtime.QUANTUM_SIZE*0>>2];ns=ns&-8388609,HEAP32[SDL.screen+Runtime.QUANTUM_SIZE*0>>2]=ns}Browser.updateResizeListeners()},updateCanvasDimensions:function(ns,ts,rs){ts&&rs?(ns.widthNative=ts,ns.heightNative=rs):(ts=ns.widthNative,rs=ns.heightNative);var as=ts,os=rs;if(Module.forcedAspectRatio&&Module.forcedAspectRatio>0&&(as/os<Module.forcedAspectRatio?as=Math.round(os*Module.forcedAspectRatio):os=Math.round(as/Module.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===ns.parentNode&&typeof screen<"u"){var is=Math.min(screen.width/as,screen.height/os);as=Math.round(as*is),os=Math.round(os*is)}Browser.resizeCanvas?(ns.width!=as&&(ns.width=as),ns.height!=os&&(ns.height=os),typeof ns.style<"u"&&(ns.style.removeProperty("width"),ns.style.removeProperty("height"))):(ns.width!=ts&&(ns.width=ts),ns.height!=rs&&(ns.height=rs),typeof ns.style<"u"&&(as!=ts||os!=rs?(ns.style.setProperty("width",as+"px","important"),ns.style.setProperty("height",os+"px","important")):(ns.style.removeProperty("width"),ns.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var ns=Browser.nextWgetRequestHandle;return Browser.nextWgetRequestHandle++,ns}},SYSCALLS={varargs:0,get:function(ns){SYSCALLS.varargs+=4;var ts=HEAP32[SYSCALLS.varargs-4>>2];return ts},getStr:function(){var ns=Pointer_stringify(SYSCALLS.get());return ns},get64:function(){var ns=SYSCALLS.get(),ts=SYSCALLS.get();return ns>=0?assert(ts===0):assert(ts===-1),ns},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall6(ns,ts){SYSCALLS.varargs=ts;try{var rs=SYSCALLS.getStreamFromFD();return FS.close(rs),0}catch(as){return(typeof FS>"u"||!(as instanceof FS.ErrnoError))&&abort(as),-as.errno}}function ___syscall54(ns,ts){SYSCALLS.varargs=ts;try{return 0}catch(rs){return(typeof FS>"u"||!(rs instanceof FS.ErrnoError))&&abort(rs),-rs.errno}}function _typeModule(ns){var ts=[[0,1,"X"],[1,1,"const X"],[128,1,"X *"],[256,1,"X &"],[384,1,"X &&"],[512,1,"std::shared_ptr<X>"],[640,1,"std::unique_ptr<X>"],[5120,1,"std::vector<X>"],[6144,2,"std::array<X, Y>"],[9216,-1,"std::function<X (Y)>"]];function rs(fs,hs,vs,gs,ys,xs){if(hs==1){var ms=gs&896;(ms==128||ms==256||ms==384)&&(fs="X const")}var Ss;return xs?Ss=vs.replace("X",fs).replace("Y",ys):Ss=fs.replace("X",vs).replace("Y",ys),Ss.replace(/([*&]) (?=[*&])/g,"$1")}function as(fs,hs,vs,gs,ys){throw new Error(fs+" type "+vs.replace("X",hs+"?")+(gs?" with flag "+gs:"")+" in "+ys)}function os(fs,hs,vs,gs,ys,xs,ms,Ss){xs===void 0&&(xs="X"),Ss===void 0&&(Ss=1);var Ms=vs(fs);if(Ms)return Ms;var $s=gs(fs),bs=$s.placeholderFlag,Cs=ts[bs];ms&&Cs&&(xs=rs(ms[2],ms[0],xs,Cs[0],"?",!0));var As;bs==0&&(As="Unbound"),bs>=10&&(As="Corrupt"),Ss>20&&(As="Deeply nested"),As&&as(As,fs,xs,bs,ys||"?");var Is=$s.paramList[0],ks=os(Is,hs,vs,gs,ys,xs,Cs,Ss+1),Ps,Ds={flags:Cs[0],id:fs,name:"",paramList:[ks]},Fs=[],Rs="?";switch($s.placeholderFlag){case 1:Ps=ks.spec;break;case 2:if((ks.flags&15360)==1024&&ks.spec.ptrSize==1){Ds.flags=7168;break}case 3:case 6:case 5:Ps=ks.spec,ks.flags&15360;break;case 8:Rs=""+$s.paramList[1],Ds.paramList.push($s.paramList[1]);break;case 9:for(var js=0,zs=$s.paramList[1];js<zs.length;js++){var Us=zs[js],Ys=os(Us,hs,vs,gs,ys,xs,Cs,Ss+1);Fs.push(Ys.name),Ds.paramList.push(Ys)}Rs=Fs.join(", ");break}if(Ds.name=rs(Cs[2],Cs[0],ks.name,ks.flags,Rs),Ps){for(var Ks=0,qs=Object.keys(Ps);Ks<qs.length;Ks++){var _l=qs[Ks];Ds[_l]=Ds[_l]||Ps[_l]}Ds.flags|=Ps.flags}return is(hs,Ds)}function is(fs,hs){var vs=hs.flags,gs=vs&896,ys=vs&15360;return!hs.name&&ys==1024&&(hs.ptrSize==1?hs.name=(vs&16?"":(vs&8?"un":"")+"signed ")+"char":hs.name=(vs&8?"u":"")+(vs&32?"float":"int")+(hs.ptrSize*8+"_t")),hs.ptrSize==8&&!(vs&32)&&(ys=64),ys==2048&&(gs==512||gs==640?ys=4096:gs&&(ys=3072)),fs(ys,hs)}var us=function(){function fs(hs){this.id=hs.id,this.name=hs.name,this.flags=hs.flags,this.spec=hs}return fs.prototype.toString=function(){return this.name},fs}(),ls={Type:us,getComplexType:os,makeType:is,structureList:ts};return ns.output=ls,ns.output||ls}function __nbind_register_type(ns,ts){var rs=_nbind.readAsciiString(ts),as={flags:10240,id:ns,name:rs};_nbind.makeType(_nbind.constructType,as)}function __nbind_register_callback_signature(ns,ts){var rs=_nbind.readTypeIdList(ns,ts),as=_nbind.callbackSignatureList.length;return _nbind.callbackSignatureList[as]=_nbind.makeJSCaller(rs),as}function __extends(ns,ts){for(var rs in ts)ts.hasOwnProperty(rs)&&(ns[rs]=ts[rs]);function as(){this.constructor=ns}as.prototype=ts.prototype,ns.prototype=new as}function __nbind_register_class(ns,ts,rs,as,os,is,us){var ls=_nbind.readAsciiString(us),fs=_nbind.readPolicyList(ts),hs=HEAPU32.subarray(ns/4,ns/4+2),vs={flags:2048|(fs.Value?2:0),id:hs[0],name:ls},gs=_nbind.makeType(_nbind.constructType,vs);gs.ptrType=_nbind.getComplexType(hs[1],_nbind.constructType,_nbind.getType,_nbind.queryType),gs.destroy=_nbind.makeMethodCaller(gs.ptrType,{boundID:vs.id,flags:0,name:"destroy",num:0,ptr:is,title:gs.name+".free",typeList:["void","uint32_t","uint32_t"]}),os&&(gs.superIdList=Array.prototype.slice.call(HEAPU32.subarray(rs/4,rs/4+os)),gs.upcastList=Array.prototype.slice.call(HEAPU32.subarray(as/4,as/4+os))),Module[gs.name]=gs.makeBound(fs),_nbind.BindClass.list.push(gs)}function _removeAccessorPrefix(ns){var ts=/^[Gg]et_?([A-Z]?([A-Z]?))/;return ns.replace(ts,function(rs,as,os){return os?as:as.toLowerCase()})}function __nbind_register_function(ns,ts,rs,as,os,is,us,ls,fs,hs){var vs=_nbind.getType(ns),gs=_nbind.readPolicyList(ts),ys=_nbind.readTypeIdList(rs,as),xs;if(us==5)xs=[{direct:os,name:"__nbindConstructor",ptr:0,title:vs.name+" constructor",typeList:["uint32_t"].concat(ys.slice(1))},{direct:is,name:"__nbindValueConstructor",ptr:0,title:vs.name+" value constructor",typeList:["void","uint32_t"].concat(ys.slice(1))}];else{var ms=_nbind.readAsciiString(ls),Ss=(vs.name&&vs.name+".")+ms;(us==3||us==4)&&(ms=_removeAccessorPrefix(ms)),xs=[{boundID:ns,direct:is,name:ms,ptr:os,title:Ss,typeList:ys}]}for(var Ms=0,$s=xs;Ms<$s.length;Ms++){var bs=$s[Ms];bs.signatureType=us,bs.policyTbl=gs,bs.num=fs,bs.flags=hs,vs.addMethod(bs)}}function _nbind_value(ns,ts){_nbind.typeNameTbl[ns]||_nbind.throwError("Unknown value type "+ns),Module.NBind.bind_value(ns,ts),_defineHidden(_nbind.typeNameTbl[ns].proto.prototype.__nbindValueConstructor)(ts.prototype,"__nbindValueConstructor")}Module._nbind_value=_nbind_value;function __nbind_get_value_object(ns,ts){var rs=_nbind.popValue(ns);if(!rs.fromJS)throw new Error("Object "+rs+" has no fromJS function");rs.fromJS(function(){rs.__nbindValueConstructor.apply(this,Array.prototype.concat.apply([ts],arguments))})}function _emscripten_memcpy_big(ns,ts,rs){return HEAPU8.set(HEAPU8.subarray(ts,ts+rs),ns),ns}function __nbind_register_primitive(ns,ts,rs){var as={flags:1024|rs,id:ns,ptrSize:ts};_nbind.makeType(_nbind.constructType,as)}var cttz_i8=allocate([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",ALLOC_STATIC);function ___setErrNo(ns){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=ns),ns}function _llvm_stacksave(){var ns=_llvm_stacksave;return ns.LLVM_SAVEDSTACKS||(ns.LLVM_SAVEDSTACKS=[]),ns.LLVM_SAVEDSTACKS.push(Runtime.stackSave()),ns.LLVM_SAVEDSTACKS.length-1}function ___syscall140(ns,ts){SYSCALLS.varargs=ts;try{var rs=SYSCALLS.getStreamFromFD(),as=SYSCALLS.get(),os=SYSCALLS.get(),is=SYSCALLS.get(),us=SYSCALLS.get(),ls=os;return FS.llseek(rs,ls,us),HEAP32[is>>2]=rs.position,rs.getdents&&ls===0&&us===0&&(rs.getdents=null),0}catch(fs){return(typeof FS>"u"||!(fs instanceof FS.ErrnoError))&&abort(fs),-fs.errno}}function ___syscall146(ns,ts){SYSCALLS.varargs=ts;try{var rs=SYSCALLS.get(),as=SYSCALLS.get(),os=SYSCALLS.get(),is=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(vs,gs){var ys=___syscall146.buffers[vs];assert(ys),gs===0||gs===10?((vs===1?Module.print:Module.printErr)(UTF8ArrayToString(ys,0)),ys.length=0):ys.push(gs)});for(var us=0;us<os;us++){for(var ls=HEAP32[as+us*8>>2],fs=HEAP32[as+(us*8+4)>>2],hs=0;hs<fs;hs++)___syscall146.printChar(rs,HEAPU8[ls+hs]);is+=fs}return is}catch(vs){return(typeof FS>"u"||!(vs instanceof FS.ErrnoError))&&abort(vs),-vs.errno}}function __nbind_finish(){for(var ns=0,ts=_nbind.BindClass.list;ns<ts.length;ns++){var rs=ts[ns];rs.finish()}}var ___dso_handle=STATICTOP;STATICTOP+=16,function(_nbind){var typeIdTbl={};_nbind.typeNameTbl={};var Pool=function(){function ns(){}return ns.lalloc=function(ts){ts=ts+7&-8;var rs=HEAPU32[ns.usedPtr];if(ts>ns.pageSize/2||ts>ns.pageSize-rs){var as=_nbind.typeNameTbl.NBind.proto;return as.lalloc(ts)}else return HEAPU32[ns.usedPtr]=rs+ts,ns.rootPtr+rs},ns.lreset=function(ts,rs){var as=HEAPU32[ns.pagePtr];if(as){var os=_nbind.typeNameTbl.NBind.proto;os.lreset(ts,rs)}else HEAPU32[ns.usedPtr]=ts},ns}();_nbind.Pool=Pool;function constructType(ns,ts){var rs=ns==10240?_nbind.makeTypeNameTbl[ts.name]||_nbind.BindType:_nbind.makeTypeKindTbl[ns],as=new rs(ts);return typeIdTbl[ts.id]=as,_nbind.typeNameTbl[ts.name]=as,as}_nbind.constructType=constructType;function getType(ns){return typeIdTbl[ns]}_nbind.getType=getType;function queryType(ns){var ts=HEAPU8[ns],rs=_nbind.structureList[ts][1];ns/=4,rs<0&&(++ns,rs=HEAPU32[ns]+1);var as=Array.prototype.slice.call(HEAPU32.subarray(ns+1,ns+1+rs));return ts==9&&(as=[as[0],as.slice(1)]),{paramList:as,placeholderFlag:ts}}_nbind.queryType=queryType;function getTypes(ns,ts){return ns.map(function(rs){return typeof rs=="number"?_nbind.getComplexType(rs,constructType,getType,queryType,ts):_nbind.typeNameTbl[rs]})}_nbind.getTypes=getTypes;function readTypeIdList(ns,ts){return Array.prototype.slice.call(HEAPU32,ns/4,ns/4+ts)}_nbind.readTypeIdList=readTypeIdList;function readAsciiString(ns){for(var ts=ns;HEAPU8[ts++];);return String.fromCharCode.apply("",HEAPU8.subarray(ns,ts-1))}_nbind.readAsciiString=readAsciiString;function readPolicyList(ns){var ts={};if(ns)for(;;){var rs=HEAPU32[ns/4];if(!rs)break;ts[readAsciiString(rs)]=!0,ns+=4}return ts}_nbind.readPolicyList=readPolicyList;function getDynCall(ns,ts){var rs={float32_t:"d",float64_t:"d",int64_t:"d",uint64_t:"d",void:"v"},as=ns.map(function(is){return rs[is.name]||"i"}).join(""),os=Module["dynCall_"+as];if(!os)throw new Error("dynCall_"+as+" not found for "+ts+"("+ns.map(function(is){return is.name}).join(", ")+")");return os}_nbind.getDynCall=getDynCall;function addMethod(ns,ts,rs,as){var os=ns[ts];ns.hasOwnProperty(ts)&&os?((os.arity||os.arity===0)&&(os=_nbind.makeOverloader(os,os.arity),ns[ts]=os),os.addMethod(rs,as)):(rs.arity=as,ns[ts]=rs)}_nbind.addMethod=addMethod;function throwError(ns){throw new Error(ns)}_nbind.throwError=throwError,_nbind.bigEndian=!1;var _a=_typeModule(_typeModule);_nbind.Type=_a.Type,_nbind.makeType=_a.makeType,_nbind.getComplexType=_a.getComplexType,_nbind.structureList=_a.structureList;var BindType=function(ns){__extends(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.heap=HEAPU32,rs.ptrSize=4,rs}return ts.prototype.needsWireRead=function(rs){return!!this.wireRead||!!this.makeWireRead},ts.prototype.needsWireWrite=function(rs){return!!this.wireWrite||!!this.makeWireWrite},ts}(_nbind.Type);_nbind.BindType=BindType;var PrimitiveType=function(ns){__extends(ts,ns);function ts(rs){var as=ns.call(this,rs)||this,os=rs.flags&32?{32:HEAPF32,64:HEAPF64}:rs.flags&8?{8:HEAPU8,16:HEAPU16,32:HEAPU32}:{8:HEAP8,16:HEAP16,32:HEAP32};return as.heap=os[rs.ptrSize*8],as.ptrSize=rs.ptrSize,as}return ts.prototype.needsWireWrite=function(rs){return!!rs&&!!rs.Strict},ts.prototype.makeWireWrite=function(rs,as){return as&&as.Strict&&function(os){if(typeof os=="number")return os;throw new Error("Type mismatch")}},ts}(BindType);_nbind.PrimitiveType=PrimitiveType;function pushCString(ns,ts){if(ns==null){if(ts&&ts.Nullable)return 0;throw new Error("Type mismatch")}if(ts&&ts.Strict){if(typeof ns!="string")throw new Error("Type mismatch")}else ns=ns.toString();var rs=Module.lengthBytesUTF8(ns)+1,as=_nbind.Pool.lalloc(rs);return Module.stringToUTF8Array(ns,HEAPU8,as,rs),as}_nbind.pushCString=pushCString;function popCString(ns){return ns===0?null:Module.Pointer_stringify(ns)}_nbind.popCString=popCString;var CStringType=function(ns){__extends(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.wireRead=popCString,rs.wireWrite=pushCString,rs.readResources=[_nbind.resources.pool],rs.writeResources=[_nbind.resources.pool],rs}return ts.prototype.makeWireWrite=function(rs,as){return function(os){return pushCString(os,as)}},ts}(BindType);_nbind.CStringType=CStringType;var BooleanType=function(ns){__extends(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.wireRead=function(as){return!!as},rs}return ts.prototype.needsWireWrite=function(rs){return!!rs&&!!rs.Strict},ts.prototype.makeWireRead=function(rs){return"!!("+rs+")"},ts.prototype.makeWireWrite=function(rs,as){return as&&as.Strict&&function(os){if(typeof os=="boolean")return os;throw new Error("Type mismatch")}||rs},ts}(BindType);_nbind.BooleanType=BooleanType;var Wrapper=function(){function ns(){}return ns.prototype.persist=function(){this.__nbindState|=1},ns}();_nbind.Wrapper=Wrapper;function makeBound(ns,ts){var rs=function(as){__extends(os,as);function os(is,us,ls,fs){var hs=as.call(this)||this;if(!(hs instanceof os))return new(Function.prototype.bind.apply(os,Array.prototype.concat.apply([null],arguments)));var vs=us,gs=ls,ys=fs;if(is!==_nbind.ptrMarker){var xs=hs.__nbindConstructor.apply(hs,arguments);vs=4608,ys=HEAPU32[xs/4],gs=HEAPU32[xs/4+1]}var ms={configurable:!0,enumerable:!1,value:null,writable:!1},Ss={__nbindFlags:vs,__nbindPtr:gs};ys&&(Ss.__nbindShared=ys,_nbind.mark(hs));for(var Ms=0,$s=Object.keys(Ss);Ms<$s.length;Ms++){var bs=$s[Ms];ms.value=Ss[bs],Object.defineProperty(hs,bs,ms)}return _defineHidden(0)(hs,"__nbindState"),hs}return os.prototype.free=function(){ts.destroy.call(this,this.__nbindShared,this.__nbindFlags),this.__nbindState|=2,disableMember(this,"__nbindShared"),disableMember(this,"__nbindPtr")},os}(Wrapper);return __decorate([_defineHidden()],rs.prototype,"__nbindConstructor",void 0),__decorate([_defineHidden()],rs.prototype,"__nbindValueConstructor",void 0),__decorate([_defineHidden(ns)],rs.prototype,"__nbindPolicies",void 0),rs}_nbind.makeBound=makeBound;function disableMember(ns,ts){function rs(){throw new Error("Accessing deleted object")}Object.defineProperty(ns,ts,{configurable:!1,enumerable:!1,get:rs,set:rs})}_nbind.ptrMarker={};var BindClass=function(ns){__extends(ts,ns);function ts(rs){var as=ns.call(this,rs)||this;return as.wireRead=function(os){return _nbind.popValue(os,as.ptrType)},as.wireWrite=function(os){return pushPointer(os,as.ptrType,!0)},as.pendingSuperCount=0,as.ready=!1,as.methodTbl={},rs.paramList?(as.classType=rs.paramList[0].classType,as.proto=as.classType.proto):as.classType=as,as}return ts.prototype.makeBound=function(rs){var as=_nbind.makeBound(rs,this);return this.proto=as,this.ptrType.proto=as,as},ts.prototype.addMethod=function(rs){var as=this.methodTbl[rs.name]||[];as.push(rs),this.methodTbl[rs.name]=as},ts.prototype.registerMethods=function(rs,as){for(var os,is=0,us=Object.keys(rs.methodTbl);is<us.length;is++)for(var ls=us[is],fs=rs.methodTbl[ls],hs=0,vs=fs;hs<vs.length;hs++){var gs=vs[hs],ys=void 0,xs=void 0;if(ys=this.proto.prototype,!(as&&gs.signatureType!=1))switch(gs.signatureType){case 1:ys=this.proto;case 5:xs=_nbind.makeCaller(gs),_nbind.addMethod(ys,gs.name,xs,gs.typeList.length-1);break;case 4:os=_nbind.makeMethodCaller(rs.ptrType,gs);break;case 3:Object.defineProperty(ys,gs.name,{configurable:!0,enumerable:!1,get:_nbind.makeMethodCaller(rs.ptrType,gs),set:os});break;case 2:xs=_nbind.makeMethodCaller(rs.ptrType,gs),_nbind.addMethod(ys,gs.name,xs,gs.typeList.length-1);break}}},ts.prototype.registerSuperMethods=function(rs,as,os){if(!os[rs.name]){os[rs.name]=!0;for(var is=0,us,ls=0,fs=rs.superIdList||[];ls<fs.length;ls++){var hs=fs[ls],vs=_nbind.getType(hs);is++<as||as<0?us=-1:us=0,this.registerSuperMethods(vs,us,os)}this.registerMethods(rs,as<0)}},ts.prototype.finish=function(){if(this.ready)return this;this.ready=!0,this.superList=(this.superIdList||[]).map(function(os){return _nbind.getType(os).finish()});var rs=this.proto;if(this.superList.length){var as=function(){this.constructor=rs};as.prototype=this.superList[0].proto.prototype,rs.prototype=new as}return rs!=Module&&(rs.prototype.__nbindType=this),this.registerSuperMethods(this,1,{}),this},ts.prototype.upcastStep=function(rs,as){if(rs==this)return as;for(var os=0;os<this.superList.length;++os){var is=this.superList[os].upcastStep(rs,_nbind.callUpcast(this.upcastList[os],as));if(is)return is}return 0},ts}(_nbind.BindType);BindClass.list=[],_nbind.BindClass=BindClass;function popPointer(ns,ts){return ns?new ts.proto(_nbind.ptrMarker,ts.flags,ns):null}_nbind.popPointer=popPointer;function pushPointer(ns,ts,rs){if(!(ns instanceof _nbind.Wrapper)){if(rs)return _nbind.pushValue(ns);throw new Error("Type mismatch")}var as=ns.__nbindPtr,os=ns.__nbindType.classType,is=ts.classType;if(ns instanceof ts.proto)for(;os!=is;)as=_nbind.callUpcast(os.upcastList[0],as),os=os.superList[0];else if(as=os.upcastStep(is,as),!as)throw new Error("Type mismatch");return as}_nbind.pushPointer=pushPointer;function pushMutablePointer(ns,ts){var rs=pushPointer(ns,ts);if(ns.__nbindFlags&1)throw new Error("Passing a const value as a non-const argument");return rs}var BindClassPtr=function(ns){__extends(ts,ns);function ts(rs){var as=ns.call(this,rs)||this;as.classType=rs.paramList[0].classType,as.proto=as.classType.proto;var os=rs.flags&1,is=(as.flags&896)==256&&rs.flags&2,us=os?pushPointer:pushMutablePointer,ls=is?_nbind.popValue:popPointer;return as.makeWireWrite=function(fs,hs){return hs.Nullable?function(vs){return vs?us(vs,as):0}:function(vs){return us(vs,as)}},as.wireRead=function(fs){return ls(fs,as)},as.wireWrite=function(fs){return us(fs,as)},as}return ts}(_nbind.BindType);_nbind.BindClassPtr=BindClassPtr;function popShared(ns,ts){var rs=HEAPU32[ns/4],as=HEAPU32[ns/4+1];return as?new ts.proto(_nbind.ptrMarker,ts.flags,as,rs):null}_nbind.popShared=popShared;function pushShared(ns,ts){if(!(ns instanceof ts.proto))throw new Error("Type mismatch");return ns.__nbindShared}function pushMutableShared(ns,ts){if(!(ns instanceof ts.proto))throw new Error("Type mismatch");if(ns.__nbindFlags&1)throw new Error("Passing a const value as a non-const argument");return ns.__nbindShared}var SharedClassPtr=function(ns){__extends(ts,ns);function ts(rs){var as=ns.call(this,rs)||this;as.readResources=[_nbind.resources.pool],as.classType=rs.paramList[0].classType,as.proto=as.classType.proto;var os=rs.flags&1,is=os?pushShared:pushMutableShared;return as.wireRead=function(us){return popShared(us,as)},as.wireWrite=function(us){return is(us,as)},as}return ts}(_nbind.BindType);_nbind.SharedClassPtr=SharedClassPtr,_nbind.externalList=[0];var firstFreeExternal=0,External=function(){function ns(ts){this.refCount=1,this.data=ts}return ns.prototype.register=function(){var ts=firstFreeExternal;return ts?firstFreeExternal=_nbind.externalList[ts]:ts=_nbind.externalList.length,_nbind.externalList[ts]=this,ts},ns.prototype.reference=function(){++this.refCount},ns.prototype.dereference=function(ts){--this.refCount==0&&(this.free&&this.free(),_nbind.externalList[ts]=firstFreeExternal,firstFreeExternal=ts)},ns}();_nbind.External=External;function popExternal(ns){var ts=_nbind.externalList[ns];return ts.dereference(ns),ts.data}function pushExternal(ns){var ts=new External(ns);return ts.reference(),ts.register()}var ExternalType=function(ns){__extends(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.wireRead=popExternal,rs.wireWrite=pushExternal,rs}return ts}(_nbind.BindType);_nbind.ExternalType=ExternalType,_nbind.callbackSignatureList=[];var CallbackType=function(ns){__extends(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.wireWrite=function(as){return typeof as!="function"&&_nbind.throwError("Type mismatch"),new _nbind.External(as).register()},rs}return ts}(_nbind.BindType);_nbind.CallbackType=CallbackType,_nbind.valueList=[0];var firstFreeValue=0;function pushValue(ns){var ts=firstFreeValue;return ts?firstFreeValue=_nbind.valueList[ts]:ts=_nbind.valueList.length,_nbind.valueList[ts]=ns,ts*2+1}_nbind.pushValue=pushValue;function popValue(ns,ts){if(ns||_nbind.throwError("Value type JavaScript class is missing or not registered"),ns&1){ns>>=1;var rs=_nbind.valueList[ns];return _nbind.valueList[ns]=firstFreeValue,firstFreeValue=ns,rs}else{if(ts)return _nbind.popShared(ns,ts);throw new Error("Invalid value slot "+ns)}}_nbind.popValue=popValue;var valueBase=18446744073709552e3;function push64(ns){return typeof ns=="number"?ns:pushValue(ns)*4096+valueBase}function pop64(ns){return ns<valueBase?ns:popValue((ns-valueBase)/4096)}var CreateValueType=function(ns){__extends(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.makeWireWrite=function(rs){return"(_nbind.pushValue(new "+rs+"))"},ts}(_nbind.BindType);_nbind.CreateValueType=CreateValueType;var Int64Type=function(ns){__extends(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.wireWrite=push64,rs.wireRead=pop64,rs}return ts}(_nbind.BindType);_nbind.Int64Type=Int64Type;function pushArray(ns,ts){if(!ns)return 0;var rs=ns.length;if((ts.size||ts.size===0)&&rs<ts.size)throw new Error("Type mismatch");var as=ts.memberType.ptrSize,os=_nbind.Pool.lalloc(4+rs*as);HEAPU32[os/4]=rs;var is=ts.memberType.heap,us=(os+4)/as,ls=ts.memberType.wireWrite,fs=0;if(ls)for(;fs<rs;)is[us++]=ls(ns[fs++]);else for(;fs<rs;)is[us++]=ns[fs++];return os}_nbind.pushArray=pushArray;function popArray(ns,ts){if(ns===0)return null;var rs=HEAPU32[ns/4],as=new Array(rs),os=ts.memberType.heap;ns=(ns+4)/ts.memberType.ptrSize;var is=ts.memberType.wireRead,us=0;if(is)for(;us<rs;)as[us++]=is(os[ns++]);else for(;us<rs;)as[us++]=os[ns++];return as}_nbind.popArray=popArray;var ArrayType=function(ns){__extends(ts,ns);function ts(rs){var as=ns.call(this,rs)||this;return as.wireRead=function(os){return popArray(os,as)},as.wireWrite=function(os){return pushArray(os,as)},as.readResources=[_nbind.resources.pool],as.writeResources=[_nbind.resources.pool],as.memberType=rs.paramList[0],rs.paramList[1]&&(as.size=rs.paramList[1]),as}return ts}(_nbind.BindType);_nbind.ArrayType=ArrayType;function pushString(ns,ts){if(ns==null)if(ts&&ts.Nullable)ns="";else throw new Error("Type mismatch");if(ts&&ts.Strict){if(typeof ns!="string")throw new Error("Type mismatch")}else ns=ns.toString();var rs=Module.lengthBytesUTF8(ns),as=_nbind.Pool.lalloc(4+rs+1);return HEAPU32[as/4]=rs,Module.stringToUTF8Array(ns,HEAPU8,as+4,rs+1),as}_nbind.pushString=pushString;function popString(ns){if(ns===0)return null;var ts=HEAPU32[ns/4];return Module.Pointer_stringify(ns+4,ts)}_nbind.popString=popString;var StringType=function(ns){__extends(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.wireRead=popString,rs.wireWrite=pushString,rs.readResources=[_nbind.resources.pool],rs.writeResources=[_nbind.resources.pool],rs}return ts.prototype.makeWireWrite=function(rs,as){return function(os){return pushString(os,as)}},ts}(_nbind.BindType);_nbind.StringType=StringType;function makeArgList(ns){return Array.apply(null,Array(ns)).map(function(ts,rs){return"a"+(rs+1)})}function anyNeedsWireWrite(ns,ts){return ns.reduce(function(rs,as){return rs||as.needsWireWrite(ts)},!1)}function anyNeedsWireRead(ns,ts){return ns.reduce(function(rs,as){return rs||!!as.needsWireRead(ts)},!1)}function makeWireRead(ns,ts,rs,as){var os=ns.length;return rs.makeWireRead?rs.makeWireRead(as,ns,os):rs.wireRead?(ns[os]=rs.wireRead,"(convertParamList["+os+"]("+as+"))"):as}function makeWireWrite(ns,ts,rs,as){var os,is=ns.length;return rs.makeWireWrite?os=rs.makeWireWrite(as,ts,ns,is):os=rs.wireWrite,os?typeof os=="string"?os:(ns[is]=os,"(convertParamList["+is+"]("+as+"))"):as}function buildCallerFunction(dynCall,ptrType,ptr,num,policyTbl,needsWireWrite,prefix,returnType,argTypeList,mask,err){var argList=makeArgList(argTypeList.length),convertParamList=[],callExpression=makeWireRead(convertParamList,policyTbl,returnType,"dynCall("+[prefix].concat(argList.map(function(ns,ts){return makeWireWrite(convertParamList,policyTbl,argTypeList[ts],ns)})).join(",")+")"),resourceSet=_nbind.listResources([returnType],argTypeList),sourceCode="function("+argList.join(",")+"){"+(mask?"this.__nbindFlags&mask&&err();":"")+resourceSet.makeOpen()+"var r="+callExpression+";"+resourceSet.makeClose()+"return r;}";return eval("("+sourceCode+")")}function buildJSCallerFunction(returnType,argTypeList){var argList=makeArgList(argTypeList.length),convertParamList=[],callExpression=makeWireWrite(convertParamList,null,returnType,"_nbind.externalList[num].data("+argList.map(function(ns,ts){return makeWireRead(convertParamList,null,argTypeList[ts],ns)}).join(",")+")"),resourceSet=_nbind.listResources(argTypeList,[returnType]);resourceSet.remove(_nbind.resources.pool);var sourceCode="function("+["dummy","num"].concat(argList).join(",")+"){"+resourceSet.makeOpen()+"var r="+callExpression+";"+resourceSet.makeClose()+"return r;}";return eval("("+sourceCode+")")}_nbind.buildJSCallerFunction=buildJSCallerFunction;function makeJSCaller(ns){var ts=ns.length-1,rs=_nbind.getTypes(ns,"callback"),as=rs[0],os=rs.slice(1),is=anyNeedsWireRead(os,null),us=as.needsWireWrite(null);if(!us&&!is)switch(ts){case 0:return function(ls,fs){return _nbind.externalList[fs].data()};case 1:return function(ls,fs,hs){return _nbind.externalList[fs].data(hs)};case 2:return function(ls,fs,hs,vs){return _nbind.externalList[fs].data(hs,vs)};case 3:return function(ls,fs,hs,vs,gs){return _nbind.externalList[fs].data(hs,vs,gs)}}return buildJSCallerFunction(as,os)}_nbind.makeJSCaller=makeJSCaller;function makeMethodCaller(ns,ts){var rs=ts.typeList.length-1,as=ts.typeList.slice(0);as.splice(1,0,"uint32_t",ts.boundID);var os=_nbind.getTypes(as,ts.title),is=os[0],us=os.slice(3),ls=is.needsWireRead(ts.policyTbl),fs=anyNeedsWireWrite(us,ts.policyTbl),hs=ts.ptr,vs=ts.num,gs=_nbind.getDynCall(os,ts.title),ys=~ts.flags&1;function xs(){throw new Error("Calling a non-const method on a const object")}if(!ls&&!fs)switch(rs){case 0:return function(){return this.__nbindFlags&ys?xs():gs(hs,vs,_nbind.pushPointer(this,ns))};case 1:return function(ms){return this.__nbindFlags&ys?xs():gs(hs,vs,_nbind.pushPointer(this,ns),ms)};case 2:return function(ms,Ss){return this.__nbindFlags&ys?xs():gs(hs,vs,_nbind.pushPointer(this,ns),ms,Ss)};case 3:return function(ms,Ss,Ms){return this.__nbindFlags&ys?xs():gs(hs,vs,_nbind.pushPointer(this,ns),ms,Ss,Ms)}}return buildCallerFunction(gs,ns,hs,vs,ts.policyTbl,fs,"ptr,num,pushPointer(this,ptrType)",is,us,ys)}_nbind.makeMethodCaller=makeMethodCaller;function makeCaller(ns){var ts=ns.typeList.length-1,rs=_nbind.getTypes(ns.typeList,ns.title),as=rs[0],os=rs.slice(1),is=as.needsWireRead(ns.policyTbl),us=anyNeedsWireWrite(os,ns.policyTbl),ls=ns.direct,fs=ns.ptr;if(ns.direct&&!is&&!us){var hs=_nbind.getDynCall(rs,ns.title);switch(ts){case 0:return function(){return hs(ls)};case 1:return function(xs){return hs(ls,xs)};case 2:return function(xs,ms){return hs(ls,xs,ms)};case 3:return function(xs,ms,Ss){return hs(ls,xs,ms,Ss)}}fs=0}var vs;if(fs){var gs=ns.typeList.slice(0);gs.splice(1,0,"uint32_t"),rs=_nbind.getTypes(gs,ns.title),vs="ptr,num"}else fs=ls,vs="ptr";var ys=_nbind.getDynCall(rs,ns.title);return buildCallerFunction(ys,null,fs,ns.num,ns.policyTbl,us,vs,as,os)}_nbind.makeCaller=makeCaller;function makeOverloader(ns,ts){var rs=[];function as(){return rs[arguments.length].apply(this,arguments)}return as.addMethod=function(os,is){rs[is]=os},as.addMethod(ns,ts),as}_nbind.makeOverloader=makeOverloader;var Resource=function(){function ns(ts,rs){var as=this;this.makeOpen=function(){return Object.keys(as.openTbl).join("")},this.makeClose=function(){return Object.keys(as.closeTbl).join("")},this.openTbl={},this.closeTbl={},ts&&(this.openTbl[ts]=!0),rs&&(this.closeTbl[rs]=!0)}return ns.prototype.add=function(ts){for(var rs=0,as=Object.keys(ts.openTbl);rs<as.length;rs++){var os=as[rs];this.openTbl[os]=!0}for(var is=0,us=Object.keys(ts.closeTbl);is<us.length;is++){var os=us[is];this.closeTbl[os]=!0}},ns.prototype.remove=function(ts){for(var rs=0,as=Object.keys(ts.openTbl);rs<as.length;rs++){var os=as[rs];delete this.openTbl[os]}for(var is=0,us=Object.keys(ts.closeTbl);is<us.length;is++){var os=us[is];delete this.closeTbl[os]}},ns}();_nbind.Resource=Resource;function listResources(ns,ts){for(var rs=new Resource,as=0,os=ns;as<os.length;as++)for(var is=os[as],us=0,ls=is.readResources||[];us<ls.length;us++){var fs=ls[us];rs.add(fs)}for(var hs=0,vs=ts;hs<vs.length;hs++)for(var is=vs[hs],gs=0,ys=is.writeResources||[];gs<ys.length;gs++){var fs=ys[gs];rs.add(fs)}return rs}_nbind.listResources=listResources,_nbind.resources={pool:new Resource("var used=HEAPU32[_nbind.Pool.usedPtr],page=HEAPU32[_nbind.Pool.pagePtr];","_nbind.Pool.lreset(used,page);")};var ExternalBuffer=function(ns){__extends(ts,ns);function ts(rs,as){var os=ns.call(this,rs)||this;return os.ptr=as,os}return ts.prototype.free=function(){_free(this.ptr)},ts}(_nbind.External);function getBuffer(ns){return ns instanceof ArrayBuffer?new Uint8Array(ns):ns instanceof DataView?new Uint8Array(ns.buffer,ns.byteOffset,ns.byteLength):ns}function pushBuffer(ns,ts){if(ns==null&&ts&&ts.Nullable&&(ns=[]),typeof ns!="object")throw new Error("Type mismatch");var rs=ns,as=rs.byteLength||rs.length;if(!as&&as!==0&&rs.byteLength!==0)throw new Error("Type mismatch");var os=_nbind.Pool.lalloc(8),is=_malloc(as),us=os/4;return HEAPU32[us++]=as,HEAPU32[us++]=is,HEAPU32[us++]=new ExternalBuffer(ns,is).register(),HEAPU8.set(getBuffer(ns),is),os}var BufferType=function(ns){__extends(ts,ns);function ts(){var rs=ns!==null&&ns.apply(this,arguments)||this;return rs.wireWrite=pushBuffer,rs.readResources=[_nbind.resources.pool],rs.writeResources=[_nbind.resources.pool],rs}return ts.prototype.makeWireWrite=function(rs,as){return function(os){return pushBuffer(os,as)}},ts}(_nbind.BindType);_nbind.BufferType=BufferType;function commitBuffer(ns,ts,rs){var as=_nbind.externalList[ns].data,os=Buffer;if(typeof Buffer!="function"&&(os=function(){}),!(as instanceof Array)){var is=HEAPU8.subarray(ts,ts+rs);if(as instanceof os){var us=void 0;typeof Buffer.from=="function"&&Buffer.from.length>=3?us=Buffer.from(is):us=new Buffer(is),us.copy(as)}else getBuffer(as).set(is)}}_nbind.commitBuffer=commitBuffer;var dirtyList=[],gcTimer=0;function sweep(){for(var ns=0,ts=dirtyList;ns<ts.length;ns++){var rs=ts[ns];rs.__nbindState&3||rs.free()}dirtyList=[],gcTimer=0}_nbind.mark=function(ns){};function toggleLightGC(ns){ns?_nbind.mark=function(ts){dirtyList.push(ts),gcTimer||(gcTimer=setTimeout(sweep,0))}:_nbind.mark=function(ts){}}_nbind.toggleLightGC=toggleLightGC}(_nbind),Module.requestFullScreen=function ns(ts,rs,as){Module.printErr("Module.requestFullScreen is deprecated. Please call Module.requestFullscreen instead."),Module.requestFullScreen=Module.requestFullscreen,Browser.requestFullScreen(ts,rs,as)},Module.requestFullscreen=function ns(ts,rs,as){Browser.requestFullscreen(ts,rs,as)},Module.requestAnimationFrame=function ns(ts){Browser.requestAnimationFrame(ts)},Module.setCanvasSize=function ns(ts,rs,as){Browser.setCanvasSize(ts,rs,as)},Module.pauseMainLoop=function ns(){Browser.mainLoop.pause()},Module.resumeMainLoop=function ns(){Browser.mainLoop.resume()},Module.getUserMedia=function ns(){Browser.getUserMedia()},Module.createContext=function ns(ts,rs,as,os){return Browser.createContext(ts,rs,as,os)},ENVIRONMENT_IS_NODE?_emscripten_get_now=function(){var ts=process.hrtime();return ts[0]*1e3+ts[1]/1e6}:typeof dateNow<"u"?_emscripten_get_now=dateNow:typeof self=="object"&&self.performance&&typeof self.performance.now=="function"?_emscripten_get_now=function(){return self.performance.now()}:typeof performance=="object"&&typeof performance.now=="function"?_emscripten_get_now=function(){return performance.now()}:_emscripten_get_now=Date.now,__ATEXIT__.push(function(){var ns=Module._fflush;ns&&ns(0);var ts=___syscall146.printChar;if(ts){var rs=___syscall146.buffers;rs[1].length&&ts(1,10),rs[2].length&&ts(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0;function invoke_viiiii(ns,ts,rs,as,os,is){try{Module.dynCall_viiiii(ns,ts,rs,as,os,is)}catch(us){if(typeof us!="number"&&us!=="longjmp")throw us;Module.setThrew(1,0)}}function invoke_vif(ns,ts,rs){try{Module.dynCall_vif(ns,ts,rs)}catch(as){if(typeof as!="number"&&as!=="longjmp")throw as;Module.setThrew(1,0)}}function invoke_vid(ns,ts,rs){try{Module.dynCall_vid(ns,ts,rs)}catch(as){if(typeof as!="number"&&as!=="longjmp")throw as;Module.setThrew(1,0)}}function invoke_fiff(ns,ts,rs,as){try{return Module.dynCall_fiff(ns,ts,rs,as)}catch(os){if(typeof os!="number"&&os!=="longjmp")throw os;Module.setThrew(1,0)}}function invoke_vi(ns,ts){try{Module.dynCall_vi(ns,ts)}catch(rs){if(typeof rs!="number"&&rs!=="longjmp")throw rs;Module.setThrew(1,0)}}function invoke_vii(ns,ts,rs){try{Module.dynCall_vii(ns,ts,rs)}catch(as){if(typeof as!="number"&&as!=="longjmp")throw as;Module.setThrew(1,0)}}function invoke_ii(ns,ts){try{return Module.dynCall_ii(ns,ts)}catch(rs){if(typeof rs!="number"&&rs!=="longjmp")throw rs;Module.setThrew(1,0)}}function invoke_viddi(ns,ts,rs,as,os){try{Module.dynCall_viddi(ns,ts,rs,as,os)}catch(is){if(typeof is!="number"&&is!=="longjmp")throw is;Module.setThrew(1,0)}}function invoke_vidd(ns,ts,rs,as){try{Module.dynCall_vidd(ns,ts,rs,as)}catch(os){if(typeof os!="number"&&os!=="longjmp")throw os;Module.setThrew(1,0)}}function invoke_iiii(ns,ts,rs,as){try{return Module.dynCall_iiii(ns,ts,rs,as)}catch(os){if(typeof os!="number"&&os!=="longjmp")throw os;Module.setThrew(1,0)}}function invoke_diii(ns,ts,rs,as){try{return Module.dynCall_diii(ns,ts,rs,as)}catch(os){if(typeof os!="number"&&os!=="longjmp")throw os;Module.setThrew(1,0)}}function invoke_di(ns,ts){try{return Module.dynCall_di(ns,ts)}catch(rs){if(typeof rs!="number"&&rs!=="longjmp")throw rs;Module.setThrew(1,0)}}function invoke_iid(ns,ts,rs){try{return Module.dynCall_iid(ns,ts,rs)}catch(as){if(typeof as!="number"&&as!=="longjmp")throw as;Module.setThrew(1,0)}}function invoke_iii(ns,ts,rs){try{return Module.dynCall_iii(ns,ts,rs)}catch(as){if(typeof as!="number"&&as!=="longjmp")throw as;Module.setThrew(1,0)}}function invoke_viiddi(ns,ts,rs,as,os,is){try{Module.dynCall_viiddi(ns,ts,rs,as,os,is)}catch(us){if(typeof us!="number"&&us!=="longjmp")throw us;Module.setThrew(1,0)}}function invoke_viiiiii(ns,ts,rs,as,os,is,us){try{Module.dynCall_viiiiii(ns,ts,rs,as,os,is,us)}catch(ls){if(typeof ls!="number"&&ls!=="longjmp")throw ls;Module.setThrew(1,0)}}function invoke_dii(ns,ts,rs){try{return Module.dynCall_dii(ns,ts,rs)}catch(as){if(typeof as!="number"&&as!=="longjmp")throw as;Module.setThrew(1,0)}}function invoke_i(ns){try{return Module.dynCall_i(ns)}catch(ts){if(typeof ts!="number"&&ts!=="longjmp")throw ts;Module.setThrew(1,0)}}function invoke_iiiiii(ns,ts,rs,as,os,is){try{return Module.dynCall_iiiiii(ns,ts,rs,as,os,is)}catch(us){if(typeof us!="number"&&us!=="longjmp")throw us;Module.setThrew(1,0)}}function invoke_viiid(ns,ts,rs,as,os){try{Module.dynCall_viiid(ns,ts,rs,as,os)}catch(is){if(typeof is!="number"&&is!=="longjmp")throw is;Module.setThrew(1,0)}}function invoke_viififi(ns,ts,rs,as,os,is,us){try{Module.dynCall_viififi(ns,ts,rs,as,os,is,us)}catch(ls){if(typeof ls!="number"&&ls!=="longjmp")throw ls;Module.setThrew(1,0)}}function invoke_viii(ns,ts,rs,as){try{Module.dynCall_viii(ns,ts,rs,as)}catch(os){if(typeof os!="number"&&os!=="longjmp")throw os;Module.setThrew(1,0)}}function invoke_v(ns){try{Module.dynCall_v(ns)}catch(ts){if(typeof ts!="number"&&ts!=="longjmp")throw ts;Module.setThrew(1,0)}}function invoke_viid(ns,ts,rs,as){try{Module.dynCall_viid(ns,ts,rs,as)}catch(os){if(typeof os!="number"&&os!=="longjmp")throw os;Module.setThrew(1,0)}}function invoke_idd(ns,ts,rs){try{return Module.dynCall_idd(ns,ts,rs)}catch(as){if(typeof as!="number"&&as!=="longjmp")throw as;Module.setThrew(1,0)}}function invoke_viiii(ns,ts,rs,as,os){try{Module.dynCall_viiii(ns,ts,rs,as,os)}catch(is){if(typeof is!="number"&&is!=="longjmp")throw is;Module.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0},Module.asmLibraryArg={abort,assert,enlargeMemory,getTotalMemory,abortOnCannotGrowMemory,invoke_viiiii,invoke_vif,invoke_vid,invoke_fiff,invoke_vi,invoke_vii,invoke_ii,invoke_viddi,invoke_vidd,invoke_iiii,invoke_diii,invoke_di,invoke_iid,invoke_iii,invoke_viiddi,invoke_viiiiii,invoke_dii,invoke_i,invoke_iiiiii,invoke_viiid,invoke_viififi,invoke_viii,invoke_v,invoke_viid,invoke_idd,invoke_viiii,_emscripten_asm_const_iiiii,_emscripten_asm_const_iiidddddd,_emscripten_asm_const_iiiid,__nbind_reference_external,_emscripten_asm_const_iiiiiiii,_removeAccessorPrefix,_typeModule,__nbind_register_pool,__decorate,_llvm_stackrestore,___cxa_atexit,__extends,__nbind_get_value_object,__ZN8facebook4yoga14YGNodeToStringEPNSt3__212basic_stringIcNS1_11char_traitsIcEENS1_9allocatorIcEEEEP6YGNode14YGPrintOptionsj,_emscripten_set_main_loop_timing,__nbind_register_primitive,__nbind_register_type,_emscripten_memcpy_big,__nbind_register_function,___setErrNo,__nbind_register_class,__nbind_finish,_abort,_nbind_value,_llvm_stacksave,___syscall54,_defineHidden,_emscripten_set_main_loop,_emscripten_get_now,__nbind_register_callback_signature,_emscripten_asm_const_iiiiii,__nbind_free_external,_emscripten_asm_const_iiii,_emscripten_asm_const_iiididi,___syscall6,_atexit,___syscall140,___syscall146,DYNAMICTOP_PTR,tempDoublePtr,ABORT,STACKTOP,STACK_MAX,cttz_i8,___dso_handle};var asm=function(ns,ts,rs){var as=new ns.Int8Array(rs),os=new ns.Int16Array(rs),is=new ns.Int32Array(rs),us=new ns.Uint8Array(rs),ls=new ns.Uint16Array(rs),fs=new ns.Uint32Array(rs),hs=new ns.Float32Array(rs),vs=new ns.Float64Array(rs),gs=ts.DYNAMICTOP_PTR|0,ys=ts.tempDoublePtr|0,xs=ts.ABORT|0,ms=ts.STACKTOP|0,Ss=ts.STACK_MAX|0,Ms=ts.cttz_i8|0,$s=ts.___dso_handle|0,bs=0,Cs=0,As=0,Is=0,ks=ns.NaN,Ps=ns.Infinity,Ds=0,Fs=0,Rs=0,js=0,zs=0,Us=0,Ys=ns.Math.floor,Ks=ns.Math.abs,qs=ns.Math.sqrt,_l=ns.Math.pow,Js=ns.Math.cos,Vs=ns.Math.sin,Zs=ns.Math.tan,Sl=ns.Math.acos,Il=ns.Math.asin,Nl=ns.Math.atan,Tl=ns.Math.atan2,_c=ns.Math.exp,l0=ns.Math.log,g0=ns.Math.ceil,R0=ns.Math.imul,V0=ns.Math.min,U0=ns.Math.max,tv=ns.Math.clz32,Os=ns.Math.fround,ov=ts.abort,$v=ts.assert,Lv=ts.enlargeMemory,Jv=ts.getTotalMemory,Yv=ts.abortOnCannotGrowMemory,Pv=ts.invoke_viiiii,jv=ts.invoke_vif,wp=ts.invoke_vid,j0=ts.invoke_fiff,Ul=ts.invoke_vi,Xs=ts.invoke_vii,d0=ts.invoke_ii,M0=ts.invoke_viddi,i0=ts.invoke_vidd,k0=ts.invoke_iiii,P0=ts.invoke_diii,B0=ts.invoke_di,G0=ts.invoke_iid,rv=ts.invoke_iii,xv=ts.invoke_viiddi,qv=ts.invoke_viiiiii,Ev=ts.invoke_dii,Kv=ts.invoke_i,Xv=ts.invoke_iiiiii,ap=ts.invoke_viiid,tp=ts.invoke_viififi,Lp=ts.invoke_viii,zv=ts.invoke_v,yp=ts.invoke_viid,c1=ts.invoke_idd,$p=ts.invoke_viiii,d1=ts._emscripten_asm_const_iiiii,A2=ts._emscripten_asm_const_iiidddddd,I2=ts._emscripten_asm_const_iiiid,Cp=ts.__nbind_reference_external,A1=ts._emscripten_asm_const_iiiiiiii,g2=ts._removeAccessorPrefix,om=ts._typeModule,k2=ts.__nbind_register_pool,sm=ts.__decorate,s1=ts._llvm_stackrestore,Z0=ts.___cxa_atexit,h1=ts.__extends,lv=ts.__nbind_get_value_object,rp=ts.__ZN8facebook4yoga14YGNodeToStringEPNSt3__212basic_stringIcNS1_11char_traitsIcEENS1_9allocatorIcEEEEP6YGNode14YGPrintOptionsj,nv=ts._emscripten_set_main_loop_timing,fp=ts.__nbind_register_primitive,Tp=ts.__nbind_register_type,r2=ts._emscripten_memcpy_big,v1=ts.__nbind_register_function,p1=ts.___setErrNo,j1=ts.__nbind_register_class,n2=ts.__nbind_finish,yv=ts._abort,Mx=ts._nbind_value,f_=ts._llvm_stacksave,c_=ts.___syscall54,bx=ts._defineHidden,Cx=ts._emscripten_set_main_loop,Tx=ts._emscripten_get_now,d_=ts.__nbind_register_callback_signature,Gm=ts._emscripten_asm_const_iiiiii,vy=ts.__nbind_free_external,py=ts._emscripten_asm_const_iiii,h_=ts._emscripten_asm_const_iiididi,v_=ts.___syscall6,Z$=ts._atexit,pS=ts.___syscall140,Ax=ts.___syscall146,Q$=Os(0);const D0=Os(0);function gS(ss){ss=ss|0;var ds=0;return ds=ms,ms=ms+ss|0,ms=ms+15&-16,ds|0}function mS(){return ms|0}function gy(ss){ss=ss|0,ms=ss}function Ix(ss,ds){ss=ss|0,ds=ds|0,ms=ss,Ss=ds}function yS(ss,ds){ss=ss|0,ds=ds|0,bs||(bs=ss,Cs=ds)}function _S(ss){ss=ss|0,Us=ss}function jm(){return Us|0}function p_(){var ss=0,ds=0;Sv(8104,8,400)|0,Sv(8504,408,540)|0,ss=9044,ds=ss+44|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));as[9088]=0,as[9089]=1,is[2273]=0,is[2274]=948,is[2275]=948,Z0(17,8104,$s|0)|0}function kx(ss){ss=ss|0,AS(ss+948|0)}function q0(ss){return ss=Os(ss),((Ny(ss)|0)&2147483647)>>>0>2139095040|0}function Kp(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;e:do if(is[ss+(ds<<3)+4>>2]|0)ss=ss+(ds<<3)|0;else{if((ds|2|0)==3&&is[ss+60>>2]|0){ss=ss+56|0;break}switch(ds|0){case 0:case 2:case 4:case 5:{if(is[ss+52>>2]|0){ss=ss+48|0;break e}break}default:}if(is[ss+68>>2]|0){ss=ss+64|0;break}else{ss=(ds|1|0)==5?948:ps;break}}while(!1);return ss|0}function Lx(ss){ss=ss|0;var ds=0;return ds=sS(1e3)|0,g_(ss,(ds|0)!=0,2456),is[2276]=(is[2276]|0)+1,Sv(ds|0,8104,1e3)|0,as[ss+2>>0]|0&&(is[ds+4>>2]=2,is[ds+12>>2]=4),is[ds+976>>2]=ss,ds|0}function g_(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0;Es=ms,ms=ms+16|0,_s=Es,ds||(is[_s>>2]=ps,eE(ss,5,3197,_s)),ms=Es}function xS(){return Lx(956)|0}function g1(ss){ss=ss|0;var ds=0;return ds=K0(1e3)|0,u1(ds,ss),g_(is[ss+976>>2]|0,1,2456),is[2276]=(is[2276]|0)+1,is[ds+944>>2]=0,ds|0}function u1(ss,ds){ss=ss|0,ds=ds|0;var ps=0;Sv(ss|0,ds|0,948)|0,Ty(ss+948|0,ds+948|0),ps=ss+960|0,ss=ds+960|0,ds=ps+40|0;do is[ps>>2]=is[ss>>2],ps=ps+4|0,ss=ss+4|0;while((ps|0)<(ds|0))}function my(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0;if(ds=ss+944|0,ps=is[ds>>2]|0,ps|0&&(Px(ps+948|0,ss)|0,is[ds>>2]=0),ps=i2(ss)|0,ps|0){ds=0;do is[(z1(ss,ds)|0)+944>>2]=0,ds=ds+1|0;while((ds|0)!=(ps|0))}ps=ss+948|0,_s=is[ps>>2]|0,Es=ss+952|0,ds=is[Es>>2]|0,(ds|0)!=(_s|0)&&(is[Es>>2]=ds+(~((ds+-4-_s|0)>>>2)<<2)),m_(ps),uS(ss),is[2276]=(is[2276]|0)+-1}function Px(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0;_s=is[ss>>2]|0,Ls=ss+4|0,ps=is[Ls>>2]|0,ws=ps;e:do if((_s|0)==(ps|0))Es=_s,Ts=4;else for(ss=_s;;){if((is[ss>>2]|0)==(ds|0)){Es=ss,Ts=4;break e}if(ss=ss+4|0,(ss|0)==(ps|0)){ss=0;break}}while(!1);return(Ts|0)==4&&((Es|0)!=(ps|0)?(_s=Es+4|0,ss=ws-_s|0,ds=ss>>2,ds&&(Ex(Es|0,_s|0,ss|0)|0,ps=is[Ls>>2]|0),ss=Es+(ds<<2)|0,(ps|0)==(ss|0)||(is[Ls>>2]=ps+(~((ps+-4-ss|0)>>>2)<<2)),ss=1):ss=0),ss|0}function i2(ss){return ss=ss|0,(is[ss+952>>2]|0)-(is[ss+948>>2]|0)>>2|0}function z1(ss,ds){ss=ss|0,ds=ds|0;var ps=0;return ps=is[ss+948>>2]|0,(is[ss+952>>2]|0)-ps>>2>>>0>ds>>>0?ss=is[ps+(ds<<2)>>2]|0:ss=0,ss|0}function m_(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0;_s=ms,ms=ms+32|0,ds=_s,Es=is[ss>>2]|0,ps=(is[ss+4>>2]|0)-Es|0,((is[ss+8>>2]|0)-Es|0)>>>0>ps>>>0&&(Es=ps>>2,Dy(ds,Es,Es,ss+8|0),fE(ss,ds),Ry(ds)),ms=_s}function ES(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0;Gs=i2(ss)|0;do if(Gs|0){if((is[(z1(ss,0)|0)+944>>2]|0)==(ss|0)){if(!(Px(ss+948|0,ds)|0))break;Sv(ds+400|0,8504,540)|0,is[ds+944>>2]=0,Mv(ss);break}Ts=is[(is[ss+976>>2]|0)+12>>2]|0,Ls=ss+948|0,Ns=(Ts|0)==0,ps=0,ws=0;do _s=is[(is[Ls>>2]|0)+(ws<<2)>>2]|0,(_s|0)==(ds|0)?Mv(ss):(Es=g1(_s)|0,is[(is[Ls>>2]|0)+(ps<<2)>>2]=Es,is[Es+944>>2]=ss,Ns||K$[Ts&15](_s,Es,ss,ps),ps=ps+1|0),ws=ws+1|0;while((ws|0)!=(Gs|0));if(ps>>>0<Gs>>>0){Ns=ss+948|0,Ls=ss+952|0,Ts=ps,ps=is[Ls>>2]|0;do ws=(is[Ns>>2]|0)+(Ts<<2)|0,_s=ws+4|0,Es=ps-_s|0,ds=Es>>2,ds&&(Ex(ws|0,_s|0,Es|0)|0,ps=is[Ls>>2]|0),Es=ps,_s=ws+(ds<<2)|0,(Es|0)!=(_s|0)&&(ps=Es+(~((Es+-4-_s|0)>>>2)<<2)|0,is[Ls>>2]=ps),Ts=Ts+1|0;while((Ts|0)!=(Gs|0))}}while(!1)}function SS(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0;Up(ss,(i2(ss)|0)==0,2491),Up(ss,(is[ss+944>>2]|0)==0,2545),ds=ss+948|0,ps=is[ds>>2]|0,_s=ss+952|0,Es=is[_s>>2]|0,(Es|0)!=(ps|0)&&(is[_s>>2]=Es+(~((Es+-4-ps|0)>>>2)<<2)),m_(ds),ds=ss+976|0,ps=is[ds>>2]|0,Sv(ss|0,8104,1e3)|0,as[ps+2>>0]|0&&(is[ss+4>>2]=2,is[ss+12>>2]=4),is[ds>>2]=ps}function Up(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0;Es=ms,ms=ms+16|0,_s=Es,ds||(is[_s>>2]=ps,I1(ss,5,3197,_s)),ms=Es}function wS(){return is[2276]|0}function $S(){var ss=0;return ss=sS(20)|0,MS((ss|0)!=0,2592),is[2277]=(is[2277]|0)+1,is[ss>>2]=is[239],is[ss+4>>2]=is[240],is[ss+8>>2]=is[241],is[ss+12>>2]=is[242],is[ss+16>>2]=is[243],ss|0}function MS(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;_s=ms,ms=ms+16|0,ps=_s,ss||(is[ps>>2]=ds,I1(0,5,3197,ps)),ms=_s}function bS(ss){ss=ss|0,uS(ss),is[2277]=(is[2277]|0)+-1}function Ox(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ds?(Up(ss,(i2(ss)|0)==0,2629),ps=1):(ps=0,ds=0),is[ss+964>>2]=ds,is[ss+988>>2]=ps}function CS(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;_s=ms,ms=ms+16|0,ws=_s+8|0,Es=_s+4|0,Ts=_s,is[Es>>2]=ds,Up(ss,(is[ds+944>>2]|0)==0,2709),Up(ss,(is[ss+964>>2]|0)==0,2763),y_(ss),ds=ss+948|0,is[Ts>>2]=(is[ds>>2]|0)+(ps<<2),is[ws>>2]=is[Ts>>2],TS(ds,ws,Es)|0,is[(is[Es>>2]|0)+944>>2]=ss,Mv(ss),ms=_s}function y_(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0;if(ps=i2(ss)|0,ps|0&&(is[(z1(ss,0)|0)+944>>2]|0)!=(ss|0)){_s=is[(is[ss+976>>2]|0)+12>>2]|0,Es=ss+948|0,ws=(_s|0)==0,ds=0;do Ts=is[(is[Es>>2]|0)+(ds<<2)>>2]|0,Ls=g1(Ts)|0,is[(is[Es>>2]|0)+(ds<<2)>>2]=Ls,is[Ls+944>>2]=ss,ws||K$[_s&15](Ts,Ls,ss,ds),ds=ds+1|0;while((ds|0)!=(ps|0))}}function TS(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0,Kl=0,Gl=0,Rl=0,a0=0,r0=0;a0=ms,ms=ms+64|0,Hs=a0+52|0,Ls=a0+48|0,yl=a0+28|0,Kl=a0+24|0,Gl=a0+20|0,Rl=a0,_s=is[ss>>2]|0,ws=_s,ds=_s+((is[ds>>2]|0)-ws>>2<<2)|0,_s=ss+4|0,Es=is[_s>>2]|0,Ts=ss+8|0;do if(Es>>>0<(is[Ts>>2]|0)>>>0){if((ds|0)==(Es|0)){is[ds>>2]=is[ps>>2],is[_s>>2]=(is[_s>>2]|0)+4;break}cE(ss,ds,Es,ds+4|0),ds>>>0<=ps>>>0&&(ps=(is[_s>>2]|0)>>>0>ps>>>0?ps+4|0:ps),is[ds>>2]=is[ps>>2]}else{_s=(Es-ws>>2)+1|0,Es=G_(ss)|0,Es>>>0<_s>>>0&&Wv(ss),Bs=is[ss>>2]|0,Gs=(is[Ts>>2]|0)-Bs|0,ws=Gs>>1,Dy(Rl,Gs>>2>>>0<Es>>>1>>>0?ws>>>0<_s>>>0?_s:ws:Es,ds-Bs>>2,ss+8|0),Bs=Rl+8|0,_s=is[Bs>>2]|0,ws=Rl+12|0,Gs=is[ws>>2]|0,Ts=Gs,Ns=_s;do if((_s|0)==(Gs|0)){if(Gs=Rl+4|0,_s=is[Gs>>2]|0,r0=is[Rl>>2]|0,Es=r0,_s>>>0<=r0>>>0){_s=Ts-Es>>1,_s=_s|0?_s:1,Dy(yl,_s,_s>>>2,is[Rl+16>>2]|0),is[Kl>>2]=is[Gs>>2],is[Gl>>2]=is[Bs>>2],is[Ls>>2]=is[Kl>>2],is[Hs>>2]=is[Gl>>2],aw(yl,Ls,Hs),_s=is[Rl>>2]|0,is[Rl>>2]=is[yl>>2],is[yl>>2]=_s,_s=yl+4|0,r0=is[Gs>>2]|0,is[Gs>>2]=is[_s>>2],is[_s>>2]=r0,_s=yl+8|0,r0=is[Bs>>2]|0,is[Bs>>2]=is[_s>>2],is[_s>>2]=r0,_s=yl+12|0,r0=is[ws>>2]|0,is[ws>>2]=is[_s>>2],is[_s>>2]=r0,Ry(yl),_s=is[Bs>>2]|0;break}ws=_s,Ts=((ws-Es>>2)+1|0)/-2|0,Ls=_s+(Ts<<2)|0,Es=Ns-ws|0,ws=Es>>2,ws&&(Ex(Ls|0,_s|0,Es|0)|0,_s=is[Gs>>2]|0),r0=Ls+(ws<<2)|0,is[Bs>>2]=r0,is[Gs>>2]=_s+(Ts<<2),_s=r0}while(!1);is[_s>>2]=is[ps>>2],is[Bs>>2]=(is[Bs>>2]|0)+4,ds=dE(ss,Rl,ds)|0,Ry(Rl)}while(!1);return ms=a0,ds|0}function Mv(ss){ss=ss|0;var ds=0;do{if(ds=ss+984|0,as[ds>>0]|0)break;as[ds>>0]=1,hs[ss+504>>2]=Os(ks),ss=is[ss+944>>2]|0}while(ss|0)}function AS(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-4-_s|0)>>>2)<<2)),y0(ps))}function IS(ss){return ss=ss|0,is[ss+944>>2]|0}function yy(ss){ss=ss|0,Up(ss,(is[ss+964>>2]|0)!=0,2832),Mv(ss)}function __(ss){return ss=ss|0,(as[ss+984>>0]|0)!=0|0}function Nx(ss,ds){ss=ss|0,ds=ds|0,$B(ss,ds,400)|0&&(Sv(ss|0,ds|0,400)|0,Mv(ss))}function Dx(ss){ss=ss|0;var ds=D0;return ds=Os(hs[ss+44>>2]),ss=q0(ds)|0,Os(ss?Os(0):ds)}function kS(ss){ss=ss|0;var ds=D0;return ds=Os(hs[ss+48>>2]),q0(ds)|0&&(ds=as[(is[ss+976>>2]|0)+2>>0]|0?Os(1):Os(0)),Os(ds)}function x_(ss,ds){ss=ss|0,ds=ds|0,is[ss+980>>2]=ds}function _y(ss){return ss=ss|0,is[ss+980>>2]|0}function m2(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=ss+4|0,(is[ps>>2]|0)!=(ds|0)&&(is[ps>>2]=ds,Mv(ss))}function xy(ss){return ss=ss|0,is[ss+4>>2]|0}function Rx(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=ss+8|0,(is[ps>>2]|0)!=(ds|0)&&(is[ps>>2]=ds,Mv(ss))}function Bx(ss){return ss=ss|0,is[ss+8>>2]|0}function LS(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=ss+12|0,(is[ps>>2]|0)!=(ds|0)&&(is[ps>>2]=ds,Mv(ss))}function PS(ss){return ss=ss|0,is[ss+12>>2]|0}function OS(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=ss+16|0,(is[ps>>2]|0)!=(ds|0)&&(is[ps>>2]=ds,Mv(ss))}function NS(ss){return ss=ss|0,is[ss+16>>2]|0}function DS(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=ss+20|0,(is[ps>>2]|0)!=(ds|0)&&(is[ps>>2]=ds,Mv(ss))}function RS(ss){return ss=ss|0,is[ss+20>>2]|0}function BS(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=ss+24|0,(is[ps>>2]|0)!=(ds|0)&&(is[ps>>2]=ds,Mv(ss))}function um(ss){return ss=ss|0,is[ss+24>>2]|0}function GS(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=ss+28|0,(is[ps>>2]|0)!=(ds|0)&&(is[ps>>2]=ds,Mv(ss))}function jS(ss){return ss=ss|0,is[ss+28>>2]|0}function zm(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=ss+32|0,(is[ps>>2]|0)!=(ds|0)&&(is[ps>>2]=ds,Mv(ss))}function zS(ss){return ss=ss|0,is[ss+32>>2]|0}function lm(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=ss+36|0,(is[ps>>2]|0)!=(ds|0)&&(is[ps>>2]=ds,Mv(ss))}function Fx(ss){return ss=ss|0,is[ss+36>>2]|0}function fm(ss,ds){ss=ss|0,ds=Os(ds);var ps=0;ps=ss+40|0,Os(hs[ps>>2])!=ds&&(hs[ps>>2]=ds,Mv(ss))}function Gx(ss,ds){ss=ss|0,ds=Os(ds);var ps=0;ps=ss+44|0,Os(hs[ps>>2])!=ds&&(hs[ps>>2]=ds,Mv(ss))}function L2(ss,ds){ss=ss|0,ds=Os(ds);var ps=0;ps=ss+48|0,Os(hs[ps>>2])!=ds&&(hs[ps>>2]=ds,Mv(ss))}function E_(ss,ds){ss=ss|0,ds=Os(ds);var ps=0,_s=0,Es=0,ws=0;ws=q0(ds)|0,ps=(ws^1)&1,_s=ss+52|0,Es=ss+56|0,ws|Os(hs[_s>>2])==ds&&(is[Es>>2]|0)==(ps|0)||(hs[_s>>2]=ds,is[Es>>2]=ps,Mv(ss))}function US(ss,ds){ss=ss|0,ds=Os(ds);var ps=0,_s=0;_s=ss+52|0,ps=ss+56|0,Os(hs[_s>>2])==ds&&(is[ps>>2]|0)==2||(hs[_s>>2]=ds,_s=q0(ds)|0,is[ps>>2]=_s?3:2,Mv(ss))}function HS(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;_s=ds+52|0,ps=is[_s+4>>2]|0,ds=ss,is[ds>>2]=is[_s>>2],is[ds+4>>2]=ps}function WS(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps);var _s=0,Es=0,ws=0;ws=q0(ps)|0,_s=(ws^1)&1,Es=ss+132+(ds<<3)|0,ds=ss+132+(ds<<3)+4|0,ws|Os(hs[Es>>2])==ps&&(is[ds>>2]|0)==(_s|0)||(hs[Es>>2]=ps,is[ds>>2]=_s,Mv(ss))}function jx(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps);var _s=0,Es=0,ws=0;ws=q0(ps)|0,_s=ws?0:2,Es=ss+132+(ds<<3)|0,ds=ss+132+(ds<<3)+4|0,ws|Os(hs[Es>>2])==ps&&(is[ds>>2]|0)==(_s|0)||(hs[Es>>2]=ps,is[ds>>2]=_s,Mv(ss))}function VS(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=ds+132+(ps<<3)|0,ds=is[_s+4>>2]|0,ps=ss,is[ps>>2]=is[_s>>2],is[ps+4>>2]=ds}function YS(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps);var _s=0,Es=0,ws=0;ws=q0(ps)|0,_s=(ws^1)&1,Es=ss+60+(ds<<3)|0,ds=ss+60+(ds<<3)+4|0,ws|Os(hs[Es>>2])==ps&&(is[ds>>2]|0)==(_s|0)||(hs[Es>>2]=ps,is[ds>>2]=_s,Mv(ss))}function zx(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps);var _s=0,Es=0,ws=0;ws=q0(ps)|0,_s=ws?0:2,Es=ss+60+(ds<<3)|0,ds=ss+60+(ds<<3)+4|0,ws|Os(hs[Es>>2])==ps&&(is[ds>>2]|0)==(_s|0)||(hs[Es>>2]=ps,is[ds>>2]=_s,Mv(ss))}function vp(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=ds+60+(ps<<3)|0,ds=is[_s+4>>2]|0,ps=ss,is[ps>>2]=is[_s>>2],is[ps+4>>2]=ds}function Ux(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=ss+60+(ds<<3)+4|0,(is[ps>>2]|0)!=3&&(hs[ss+60+(ds<<3)>>2]=Os(ks),is[ps>>2]=3,Mv(ss))}function XS(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps);var _s=0,Es=0,ws=0;ws=q0(ps)|0,_s=(ws^1)&1,Es=ss+204+(ds<<3)|0,ds=ss+204+(ds<<3)+4|0,ws|Os(hs[Es>>2])==ps&&(is[ds>>2]|0)==(_s|0)||(hs[Es>>2]=ps,is[ds>>2]=_s,Mv(ss))}function U1(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps);var _s=0,Es=0,ws=0;ws=q0(ps)|0,_s=ws?0:2,Es=ss+204+(ds<<3)|0,ds=ss+204+(ds<<3)+4|0,ws|Os(hs[Es>>2])==ps&&(is[ds>>2]|0)==(_s|0)||(hs[Es>>2]=ps,is[ds>>2]=_s,Mv(ss))}function S_(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=ds+204+(ps<<3)|0,ds=is[_s+4>>2]|0,ps=ss,is[ps>>2]=is[_s>>2],is[ps+4>>2]=ds}function Ey(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps);var _s=0,Es=0,ws=0;ws=q0(ps)|0,_s=(ws^1)&1,Es=ss+276+(ds<<3)|0,ds=ss+276+(ds<<3)+4|0,ws|Os(hs[Es>>2])==ps&&(is[ds>>2]|0)==(_s|0)||(hs[Es>>2]=ps,is[ds>>2]=_s,Mv(ss))}function P2(ss,ds){return ss=ss|0,ds=ds|0,Os(hs[ss+276+(ds<<3)>>2])}function w_(ss,ds){ss=ss|0,ds=Os(ds);var ps=0,_s=0,Es=0,ws=0;ws=q0(ds)|0,ps=(ws^1)&1,_s=ss+348|0,Es=ss+352|0,ws|Os(hs[_s>>2])==ds&&(is[Es>>2]|0)==(ps|0)||(hs[_s>>2]=ds,is[Es>>2]=ps,Mv(ss))}function Sy(ss,ds){ss=ss|0,ds=Os(ds);var ps=0,_s=0;_s=ss+348|0,ps=ss+352|0,Os(hs[_s>>2])==ds&&(is[ps>>2]|0)==2||(hs[_s>>2]=ds,_s=q0(ds)|0,is[ps>>2]=_s?3:2,Mv(ss))}function Um(ss){ss=ss|0;var ds=0;ds=ss+352|0,(is[ds>>2]|0)!=3&&(hs[ss+348>>2]=Os(ks),is[ds>>2]=3,Mv(ss))}function wy(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;_s=ds+348|0,ps=is[_s+4>>2]|0,ds=ss,is[ds>>2]=is[_s>>2],is[ds+4>>2]=ps}function Hx(ss,ds){ss=ss|0,ds=Os(ds);var ps=0,_s=0,Es=0,ws=0;ws=q0(ds)|0,ps=(ws^1)&1,_s=ss+356|0,Es=ss+360|0,ws|Os(hs[_s>>2])==ds&&(is[Es>>2]|0)==(ps|0)||(hs[_s>>2]=ds,is[Es>>2]=ps,Mv(ss))}function $_(ss,ds){ss=ss|0,ds=Os(ds);var ps=0,_s=0;_s=ss+356|0,ps=ss+360|0,Os(hs[_s>>2])==ds&&(is[ps>>2]|0)==2||(hs[_s>>2]=ds,_s=q0(ds)|0,is[ps>>2]=_s?3:2,Mv(ss))}function Wx(ss){ss=ss|0;var ds=0;ds=ss+360|0,(is[ds>>2]|0)!=3&&(hs[ss+356>>2]=Os(ks),is[ds>>2]=3,Mv(ss))}function qS(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;_s=ds+356|0,ps=is[_s+4>>2]|0,ds=ss,is[ds>>2]=is[_s>>2],is[ds+4>>2]=ps}function KS(ss,ds){ss=ss|0,ds=Os(ds);var ps=0,_s=0,Es=0,ws=0;ws=q0(ds)|0,ps=(ws^1)&1,_s=ss+364|0,Es=ss+368|0,ws|Os(hs[_s>>2])==ds&&(is[Es>>2]|0)==(ps|0)||(hs[_s>>2]=ds,is[Es>>2]=ps,Mv(ss))}function ZS(ss,ds){ss=ss|0,ds=Os(ds);var ps=0,_s=0,Es=0,ws=0;ws=q0(ds)|0,ps=ws?0:2,_s=ss+364|0,Es=ss+368|0,ws|Os(hs[_s>>2])==ds&&(is[Es>>2]|0)==(ps|0)||(hs[_s>>2]=ds,is[Es>>2]=ps,Mv(ss))}function QS(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;_s=ds+364|0,ps=is[_s+4>>2]|0,ds=ss,is[ds>>2]=is[_s>>2],is[ds+4>>2]=ps}function M_(ss,ds){ss=ss|0,ds=Os(ds);var ps=0,_s=0,Es=0,ws=0;ws=q0(ds)|0,ps=(ws^1)&1,_s=ss+372|0,Es=ss+376|0,ws|Os(hs[_s>>2])==ds&&(is[Es>>2]|0)==(ps|0)||(hs[_s>>2]=ds,is[Es>>2]=ps,Mv(ss))}function $y(ss,ds){ss=ss|0,ds=Os(ds);var ps=0,_s=0,Es=0,ws=0;ws=q0(ds)|0,ps=ws?0:2,_s=ss+372|0,Es=ss+376|0,ws|Os(hs[_s>>2])==ds&&(is[Es>>2]|0)==(ps|0)||(hs[_s>>2]=ds,is[Es>>2]=ps,Mv(ss))}function b_(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;_s=ds+372|0,ps=is[_s+4>>2]|0,ds=ss,is[ds>>2]=is[_s>>2],is[ds+4>>2]=ps}function C_(ss,ds){ss=ss|0,ds=Os(ds);var ps=0,_s=0,Es=0,ws=0;ws=q0(ds)|0,ps=(ws^1)&1,_s=ss+380|0,Es=ss+384|0,ws|Os(hs[_s>>2])==ds&&(is[Es>>2]|0)==(ps|0)||(hs[_s>>2]=ds,is[Es>>2]=ps,Mv(ss))}function cm(ss,ds){ss=ss|0,ds=Os(ds);var ps=0,_s=0,Es=0,ws=0;ws=q0(ds)|0,ps=ws?0:2,_s=ss+380|0,Es=ss+384|0,ws|Os(hs[_s>>2])==ds&&(is[Es>>2]|0)==(ps|0)||(hs[_s>>2]=ds,is[Es>>2]=ps,Mv(ss))}function T_(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;_s=ds+380|0,ps=is[_s+4>>2]|0,ds=ss,is[ds>>2]=is[_s>>2],is[ds+4>>2]=ps}function A_(ss,ds){ss=ss|0,ds=Os(ds);var ps=0,_s=0,Es=0,ws=0;ws=q0(ds)|0,ps=(ws^1)&1,_s=ss+388|0,Es=ss+392|0,ws|Os(hs[_s>>2])==ds&&(is[Es>>2]|0)==(ps|0)||(hs[_s>>2]=ds,is[Es>>2]=ps,Mv(ss))}function I_(ss,ds){ss=ss|0,ds=Os(ds);var ps=0,_s=0,Es=0,ws=0;ws=q0(ds)|0,ps=ws?0:2,_s=ss+388|0,Es=ss+392|0,ws|Os(hs[_s>>2])==ds&&(is[Es>>2]|0)==(ps|0)||(hs[_s>>2]=ds,is[Es>>2]=ps,Mv(ss))}function k_(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;_s=ds+388|0,ps=is[_s+4>>2]|0,ds=ss,is[ds>>2]=is[_s>>2],is[ds+4>>2]=ps}function Vx(ss,ds){ss=ss|0,ds=Os(ds);var ps=0;ps=ss+396|0,Os(hs[ps>>2])!=ds&&(hs[ps>>2]=ds,Mv(ss))}function Yx(ss){return ss=ss|0,Os(hs[ss+396>>2])}function L_(ss){return ss=ss|0,Os(hs[ss+400>>2])}function P_(ss){return ss=ss|0,Os(hs[ss+404>>2])}function O_(ss){return ss=ss|0,Os(hs[ss+408>>2])}function N_(ss){return ss=ss|0,Os(hs[ss+412>>2])}function D_(ss){return ss=ss|0,Os(hs[ss+416>>2])}function R_(ss){return ss=ss|0,Os(hs[ss+420>>2])}function dm(ss,ds){switch(ss=ss|0,ds=ds|0,Up(ss,(ds|0)<6,2918),ds|0){case 0:{ds=(is[ss+496>>2]|0)==2?5:4;break}case 2:{ds=(is[ss+496>>2]|0)==2?4:5;break}default:}return Os(hs[ss+424+(ds<<2)>>2])}function B_(ss,ds){switch(ss=ss|0,ds=ds|0,Up(ss,(ds|0)<6,2918),ds|0){case 0:{ds=(is[ss+496>>2]|0)==2?5:4;break}case 2:{ds=(is[ss+496>>2]|0)==2?4:5;break}default:}return Os(hs[ss+448+(ds<<2)>>2])}function F_(ss,ds){switch(ss=ss|0,ds=ds|0,Up(ss,(ds|0)<6,2918),ds|0){case 0:{ds=(is[ss+496>>2]|0)==2?5:4;break}case 2:{ds=(is[ss+496>>2]|0)==2?4:5;break}default:}return Os(hs[ss+472+(ds<<2)>>2])}function Hm(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=D0;return ps=is[ss+4>>2]|0,(ps|0)==(is[ds+4>>2]|0)?ps?(_s=Os(hs[ss>>2]),ss=Os(Ks(Os(_s-Os(hs[ds>>2]))))<Os(999999974e-13)):ss=1:ss=0,ss|0}function Pp(ss,ds){ss=Os(ss),ds=Os(ds);var ps=0;return q0(ss)|0?ps=q0(ds)|0:ps=Os(Ks(Os(ss-ds)))<Os(999999974e-13),ps|0}function JS(ss,ds){ss=ss|0,ds=ds|0,ew(ss,ds)}function ew(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;ps=ms,ms=ms+16|0,_s=ps+4|0,is[_s>>2]=0,is[_s+4>>2]=0,is[_s+8>>2]=0,rp(_s|0,ss|0,ds|0,0),I1(ss,3,(as[_s+11>>0]|0)<0?is[_s>>2]|0:_s,ps),YB(_s),ms=ps}function m1(ss,ds,ps,_s){ss=Os(ss),ds=Os(ds),ps=ps|0,_s=_s|0;var Es=D0;ss=Os(ss*ds),Es=Os(H$(ss,Os(1)));do if(Pp(Es,Os(0))|0)ss=Os(ss-Es);else{if(ss=Os(ss-Es),Pp(Es,Os(1))|0){ss=Os(ss+Os(1));break}if(ps){ss=Os(ss+Os(1));break}_s||(Es>Os(.5)?Es=Os(1):(_s=Pp(Es,Os(.5))|0,Es=Os(_s?1:0)),ss=Os(ss+Es))}while(!1);return Os(ss/ds)}function Xx(ss,ds,ps,_s,Es,ws,Ts,Ls,Ns,Gs,Bs,Hs,yl){ss=ss|0,ds=Os(ds),ps=ps|0,_s=Os(_s),Es=Es|0,ws=Os(ws),Ts=Ts|0,Ls=Os(Ls),Ns=Os(Ns),Gs=Os(Gs),Bs=Os(Bs),Hs=Os(Hs),yl=yl|0;var Kl=0,Gl=D0,Rl=D0,a0=D0,r0=D0,f0=D0,Wl=D0;return Ns<Os(0)|Gs<Os(0)?yl=0:(yl|0&&(Gl=Os(hs[yl+4>>2]),Gl!=Os(0))?(a0=Os(m1(ds,Gl,0,0)),r0=Os(m1(_s,Gl,0,0)),Rl=Os(m1(ws,Gl,0,0)),Gl=Os(m1(Ls,Gl,0,0))):(Rl=ws,a0=ds,Gl=Ls,r0=_s),(Es|0)==(ss|0)?Kl=Pp(Rl,a0)|0:Kl=0,(Ts|0)==(ps|0)?yl=Pp(Gl,r0)|0:yl=0,!Kl&&(f0=Os(ds-Bs),!(qx(ss,f0,Ns)|0))&&!(Kx(ss,f0,Es,Ns)|0)?Kl=My(ss,f0,Es,ws,Ns)|0:Kl=1,!yl&&(Wl=Os(_s-Hs),!(qx(ps,Wl,Gs)|0))&&!(Kx(ps,Wl,Ts,Gs)|0)?yl=My(ps,Wl,Ts,Ls,Gs)|0:yl=1,yl=Kl&yl),yl|0}function qx(ss,ds,ps){return ss=ss|0,ds=Os(ds),ps=Os(ps),(ss|0)==1?ss=Pp(ds,ps)|0:ss=0,ss|0}function Kx(ss,ds,ps,_s){return ss=ss|0,ds=Os(ds),ps=ps|0,_s=Os(_s),(ss|0)==2&(ps|0)==0?ds>=_s?ss=1:ss=Pp(ds,_s)|0:ss=0,ss|0}function My(ss,ds,ps,_s,Es){return ss=ss|0,ds=Os(ds),ps=ps|0,_s=Os(_s),Es=Os(Es),(ss|0)==2&(ps|0)==2&_s>ds?Es<=ds?ss=1:ss=Pp(ds,Es)|0:ss=0,ss|0}function O2(ss,ds,ps,_s,Es,ws,Ts,Ls,Ns,Gs,Bs){ss=ss|0,ds=Os(ds),ps=Os(ps),_s=_s|0,Es=Es|0,ws=ws|0,Ts=Os(Ts),Ls=Os(Ls),Ns=Ns|0,Gs=Gs|0,Bs=Bs|0;var Hs=0,yl=0,Kl=0,Gl=0,Rl=D0,a0=D0,r0=0,f0=0,Wl=0,Xl=0,W0=0,Bv=0,sv=0,_h=0,wv=0,Rv=0,av=0,ip=D0,t1=D0,r1=D0,n1=0,T1=0;av=ms,ms=ms+160|0,_h=av+152|0,sv=av+120|0,Bv=av+104|0,Wl=av+72|0,Gl=av+56|0,W0=av+8|0,f0=av,Xl=(is[2279]|0)+1|0,is[2279]=Xl,wv=ss+984|0,as[wv>>0]|0&&(is[ss+512>>2]|0)!=(is[2278]|0)?r0=4:(is[ss+516>>2]|0)==(_s|0)?Rv=0:r0=4,(r0|0)==4&&(is[ss+520>>2]=0,is[ss+924>>2]=-1,is[ss+928>>2]=-1,hs[ss+932>>2]=Os(-1),hs[ss+936>>2]=Os(-1),Rv=1);e:do if(is[ss+964>>2]|0)if(Rl=Os(np(ss,2,Ts)),a0=Os(np(ss,0,Ts)),Hs=ss+916|0,r1=Os(hs[Hs>>2]),t1=Os(hs[ss+920>>2]),ip=Os(hs[ss+932>>2]),Xx(Es,ds,ws,ps,is[ss+924>>2]|0,r1,is[ss+928>>2]|0,t1,ip,Os(hs[ss+936>>2]),Rl,a0,Bs)|0)r0=22;else if(Kl=is[ss+520>>2]|0,!Kl)r0=21;else for(yl=0;;){if(Hs=ss+524+(yl*24|0)|0,ip=Os(hs[Hs>>2]),t1=Os(hs[ss+524+(yl*24|0)+4>>2]),r1=Os(hs[ss+524+(yl*24|0)+16>>2]),Xx(Es,ds,ws,ps,is[ss+524+(yl*24|0)+8>>2]|0,ip,is[ss+524+(yl*24|0)+12>>2]|0,t1,r1,Os(hs[ss+524+(yl*24|0)+20>>2]),Rl,a0,Bs)|0){r0=22;break e}if(yl=yl+1|0,yl>>>0>=Kl>>>0){r0=21;break}}else{if(Ns){if(Hs=ss+916|0,!(Pp(Os(hs[Hs>>2]),ds)|0)){r0=21;break}if(!(Pp(Os(hs[ss+920>>2]),ps)|0)){r0=21;break}if((is[ss+924>>2]|0)!=(Es|0)){r0=21;break}Hs=(is[ss+928>>2]|0)==(ws|0)?Hs:0,r0=22;break}if(Kl=is[ss+520>>2]|0,!Kl)r0=21;else for(yl=0;;){if(Hs=ss+524+(yl*24|0)|0,Pp(Os(hs[Hs>>2]),ds)|0&&Pp(Os(hs[ss+524+(yl*24|0)+4>>2]),ps)|0&&(is[ss+524+(yl*24|0)+8>>2]|0)==(Es|0)&&(is[ss+524+(yl*24|0)+12>>2]|0)==(ws|0)){r0=22;break e}if(yl=yl+1|0,yl>>>0>=Kl>>>0){r0=21;break}}}while(!1);do if((r0|0)==21)as[11697]|0?(Hs=0,r0=28):(Hs=0,r0=31);else if((r0|0)==22){if(yl=(as[11697]|0)!=0,!((Hs|0)!=0&(Rv^1)))if(yl){r0=28;break}else{r0=31;break}Gl=Hs+16|0,is[ss+908>>2]=is[Gl>>2],Kl=Hs+20|0,is[ss+912>>2]=is[Kl>>2],(as[11698]|0)==0|yl^1||(is[f0>>2]=by(Xl)|0,is[f0+4>>2]=Xl,I1(ss,4,2972,f0),yl=is[ss+972>>2]|0,yl|0&&Y2[yl&127](ss),Es=y2(Es,Ns)|0,ws=y2(ws,Ns)|0,T1=+Os(hs[Gl>>2]),n1=+Os(hs[Kl>>2]),is[W0>>2]=Es,is[W0+4>>2]=ws,vs[W0+8>>3]=+ds,vs[W0+16>>3]=+ps,vs[W0+24>>3]=T1,vs[W0+32>>3]=n1,is[W0+40>>2]=Gs,I1(ss,4,2989,W0))}while(!1);return(r0|0)==28&&(yl=by(Xl)|0,is[Gl>>2]=yl,is[Gl+4>>2]=Xl,is[Gl+8>>2]=Rv?3047:11699,I1(ss,4,3038,Gl),yl=is[ss+972>>2]|0,yl|0&&Y2[yl&127](ss),W0=y2(Es,Ns)|0,r0=y2(ws,Ns)|0,is[Wl>>2]=W0,is[Wl+4>>2]=r0,vs[Wl+8>>3]=+ds,vs[Wl+16>>3]=+ps,is[Wl+24>>2]=Gs,I1(ss,4,3049,Wl),r0=31),(r0|0)==31&&(tw(ss,ds,ps,_s,Es,ws,Ts,Ls,Ns,Bs),as[11697]|0&&(yl=is[2279]|0,W0=by(yl)|0,is[Bv>>2]=W0,is[Bv+4>>2]=yl,is[Bv+8>>2]=Rv?3047:11699,I1(ss,4,3083,Bv),yl=is[ss+972>>2]|0,yl|0&&Y2[yl&127](ss),W0=y2(Es,Ns)|0,Bv=y2(ws,Ns)|0,n1=+Os(hs[ss+908>>2]),T1=+Os(hs[ss+912>>2]),is[sv>>2]=W0,is[sv+4>>2]=Bv,vs[sv+8>>3]=n1,vs[sv+16>>3]=T1,is[sv+24>>2]=Gs,I1(ss,4,3092,sv)),is[ss+516>>2]=_s,Hs||(yl=ss+520|0,Hs=is[yl>>2]|0,(Hs|0)==16&&(as[11697]|0&&I1(ss,4,3124,_h),is[yl>>2]=0,Hs=0),Ns?Hs=ss+916|0:(is[yl>>2]=Hs+1,Hs=ss+524+(Hs*24|0)|0),hs[Hs>>2]=ds,hs[Hs+4>>2]=ps,is[Hs+8>>2]=Es,is[Hs+12>>2]=ws,is[Hs+16>>2]=is[ss+908>>2],is[Hs+20>>2]=is[ss+912>>2],Hs=0)),Ns&&(is[ss+416>>2]=is[ss+908>>2],is[ss+420>>2]=is[ss+912>>2],as[ss+985>>0]=1,as[wv>>0]=0),is[2279]=(is[2279]|0)+-1,is[ss+512>>2]=is[2278],ms=av,Rv|(Hs|0)==0|0}function np(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps);var _s=D0;return _s=Os(l1(ss,ds,ps)),Os(_s+Os(H1(ss,ds,ps)))}function I1(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0;ws=ms,ms=ms+16|0,Es=ws,is[Es>>2]=_s,ss?_s=is[ss+976>>2]|0:_s=0,hm(_s,ss,ds,ps,Es),ms=ws}function by(ss){return ss=ss|0,(ss>>>0>60?3201:3201+(60-ss)|0)|0}function y2(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0;return Es=ms,ms=ms+32|0,ps=Es+12|0,_s=Es,is[ps>>2]=is[254],is[ps+4>>2]=is[255],is[ps+8>>2]=is[256],is[_s>>2]=is[257],is[_s+4>>2]=is[258],is[_s+8>>2]=is[259],(ss|0)>2?ss=11699:ss=is[(ds?_s:ps)+(ss<<2)>>2]|0,ms=Es,ss|0}function tw(ss,ds,ps,_s,Es,ws,Ts,Ls,Ns,Gs){ss=ss|0,ds=Os(ds),ps=Os(ps),_s=_s|0,Es=Es|0,ws=ws|0,Ts=Os(Ts),Ls=Os(Ls),Ns=Ns|0,Gs=Gs|0;var Bs=0,Hs=0,yl=0,Kl=0,Gl=D0,Rl=D0,a0=D0,r0=D0,f0=D0,Wl=D0,Xl=D0,W0=0,Bv=0,sv=0,_h=D0,wv=D0,Rv=0,av=D0,ip=0,t1=0,r1=0,n1=0,T1=0,km=0,Lm=0,K1=0,Pm=0,w2=0,$2=0,Om=0,Nm=0,Dm=0,Vv=0,Z1=0,Rm=0,c2=0,Bm=D0,Fm=D0,M2=D0,C2=D0,d2=D0,Vp=0,G1=0,f1=0,Q1=0,q2=0,K2=D0,T2=D0,Z2=D0,Q2=D0,Yp=D0,jp=D0,J1=0,sp=D0,J2=D0,i1=D0,h2=D0,a1=D0,v2=D0,em=0,tm=0,p2=D0,Xp=D0,_g=0,rm=0,nm=0,im=0,Cv=D0,dp=0,zp=0,o1=0,qp=0,kv=0,uv=0,t2=0,Q0=D0,am=0,mp=0;t2=ms,ms=ms+16|0,Vp=t2+12|0,G1=t2+8|0,f1=t2+4|0,Q1=t2,Up(ss,(Es|0)==0|(q0(ds)|0)^1,3326),Up(ss,(ws|0)==0|(q0(ps)|0)^1,3406),zp=z_(ss,_s)|0,is[ss+496>>2]=zp,kv=N2(2,zp)|0,uv=N2(0,zp)|0,hs[ss+440>>2]=Os(l1(ss,kv,Ts)),hs[ss+444>>2]=Os(H1(ss,kv,Ts)),hs[ss+428>>2]=Os(l1(ss,uv,Ts)),hs[ss+436>>2]=Os(H1(ss,uv,Ts)),hs[ss+464>>2]=Os(Zp(ss,kv)),hs[ss+468>>2]=Os(hp(ss,kv)),hs[ss+452>>2]=Os(Zp(ss,uv)),hs[ss+460>>2]=Os(hp(ss,uv)),hs[ss+488>>2]=Os(Ay(ss,kv,Ts)),hs[ss+492>>2]=Os(Iy(ss,kv,Ts)),hs[ss+476>>2]=Os(Ay(ss,uv,Ts)),hs[ss+484>>2]=Os(Iy(ss,uv,Ts));do if(is[ss+964>>2]|0)D2(ss,ds,ps,Es,ws,Ts,Ls);else{if(o1=ss+948|0,qp=(is[ss+952>>2]|0)-(is[o1>>2]|0)>>2,!qp){tE(ss,ds,ps,Es,ws,Ts,Ls);break}if(!Ns&&rE(ss,ds,ps,Es,ws,Ts,Ls)|0)break;y_(ss),Z1=ss+508|0,as[Z1>>0]=0,kv=N2(is[ss+4>>2]|0,zp)|0,uv=U_(kv,zp)|0,dp=Dp(kv)|0,Rm=is[ss+8>>2]|0,rm=ss+28|0,c2=(is[rm>>2]|0)!=0,a1=dp?Ts:Ls,p2=dp?Ls:Ts,Bm=Os(H_(ss,kv,Ts)),Fm=Os(nE(ss,kv,Ts)),Gl=Os(H_(ss,uv,Ts)),v2=Os(L1(ss,kv,Ts)),Xp=Os(L1(ss,uv,Ts)),sv=dp?Es:ws,_g=dp?ws:Es,Cv=dp?v2:Xp,f0=dp?Xp:v2,h2=Os(np(ss,2,Ts)),r0=Os(np(ss,0,Ts)),Rl=Os(Os(ep(ss+364|0,Ts))-Cv),a0=Os(Os(ep(ss+380|0,Ts))-Cv),Wl=Os(Os(ep(ss+372|0,Ls))-f0),Xl=Os(Os(ep(ss+388|0,Ls))-f0),M2=dp?Rl:Wl,C2=dp?a0:Xl,h2=Os(ds-h2),ds=Os(h2-Cv),q0(ds)|0?Cv=ds:Cv=Os(lp(Os(cy(ds,a0)),Rl)),J2=Os(ps-r0),ds=Os(J2-f0),q0(ds)|0?i1=ds:i1=Os(lp(Os(cy(ds,Xl)),Wl)),Rl=dp?Cv:i1,sp=dp?i1:Cv;e:do if((sv|0)==1)for(_s=0,Hs=0;;){if(Bs=z1(ss,Hs)|0,!_s)Os(R2(Bs))>Os(0)&&Os(Wm(Bs))>Os(0)?_s=Bs:_s=0;else if(ky(Bs)|0){Kl=0;break e}if(Hs=Hs+1|0,Hs>>>0>=qp>>>0){Kl=_s;break}}else Kl=0;while(!1);W0=Kl+500|0,Bv=Kl+504|0,_s=0,Bs=0,ds=Os(0),yl=0;do{if(Hs=is[(is[o1>>2]|0)+(yl<<2)>>2]|0,(is[Hs+36>>2]|0)==1)W_(Hs),as[Hs+985>>0]=1,as[Hs+984>>0]=0;else{Zx(Hs),Ns&&Qx(Hs,z_(Hs,zp)|0,Rl,sp,Cv);do if((is[Hs+24>>2]|0)!=1)if((Hs|0)==(Kl|0)){is[W0>>2]=is[2278],hs[Bv>>2]=Os(0);break}else{iE(ss,Hs,Cv,Es,i1,Cv,i1,ws,zp,Gs);break}else Bs|0&&(is[Bs+960>>2]=Hs),is[Hs+960>>2]=0,Bs=Hs,_s=_s|0?_s:Hs;while(!1);jp=Os(hs[Hs+504>>2]),ds=Os(ds+Os(jp+Os(np(Hs,kv,Cv))))}yl=yl+1|0}while((yl|0)!=(qp|0));for(r1=ds>Rl,J1=c2&((sv|0)==2&r1)?1:sv,ip=(_g|0)==1,T1=ip&(Ns^1),km=(J1|0)==1,Lm=(J1|0)==2,K1=976+(kv<<2)|0,Pm=(_g|2|0)==2,Dm=ip&(c2^1),w2=1040+(uv<<2)|0,$2=1040+(kv<<2)|0,Om=976+(uv<<2)|0,Nm=(_g|0)!=1,r1=c2&((sv|0)!=0&r1),t1=ss+976|0,ip=ip^1,ds=Rl,Rv=0,n1=0,jp=Os(0),d2=Os(0);;){e:do if(Rv>>>0<qp>>>0)for(Bv=is[o1>>2]|0,yl=0,Xl=Os(0),Wl=Os(0),a0=Os(0),Rl=Os(0),Hs=0,Bs=0,Kl=Rv;;){if(W0=is[Bv+(Kl<<2)>>2]|0,(is[W0+36>>2]|0)!=1&&(is[W0+940>>2]=n1,(is[W0+24>>2]|0)!=1)){if(r0=Os(np(W0,kv,Cv)),Vv=is[K1>>2]|0,ps=Os(ep(W0+380+(Vv<<3)|0,a1)),f0=Os(hs[W0+504>>2]),ps=Os(cy(ps,f0)),ps=Os(lp(Os(ep(W0+364+(Vv<<3)|0,a1)),ps)),c2&(yl|0)!=0&Os(r0+Os(Wl+ps))>ds){ws=yl,r0=Xl,sv=Kl;break e}r0=Os(r0+ps),ps=Os(Wl+r0),r0=Os(Xl+r0),ky(W0)|0&&(a0=Os(a0+Os(R2(W0))),Rl=Os(Rl-Os(f0*Os(Wm(W0))))),Bs|0&&(is[Bs+960>>2]=W0),is[W0+960>>2]=0,yl=yl+1|0,Bs=W0,Hs=Hs|0?Hs:W0}else r0=Xl,ps=Wl;if(Kl=Kl+1|0,Kl>>>0<qp>>>0)Xl=r0,Wl=ps;else{ws=yl,sv=Kl;break}}else ws=0,r0=Os(0),a0=Os(0),Rl=Os(0),Hs=0,sv=Rv;while(!1);Vv=a0>Os(0)&a0<Os(1),_h=Vv?Os(1):a0,Vv=Rl>Os(0)&Rl<Os(1),Xl=Vv?Os(1):Rl;do if(km)Vv=51;else if(r0<M2&((q0(M2)|0)^1))ds=M2,Vv=51;else if(r0>C2&((q0(C2)|0)^1))ds=C2,Vv=51;else if(as[(is[t1>>2]|0)+3>>0]|0)Vv=51;else{if(_h!=Os(0)&&Os(R2(ss))!=Os(0)){Vv=53;break}ds=r0,Vv=53}while(!1);if((Vv|0)==51&&(Vv=0,q0(ds)|0?Vv=53:(wv=Os(ds-r0),av=ds)),(Vv|0)==53&&(Vv=0,r0<Os(0)?(wv=Os(-r0),av=ds):(wv=Os(0),av=ds)),!T1&&(q2=(Hs|0)==0,!q2)){yl=is[K1>>2]|0,Kl=wv<Os(0),f0=Os(wv/Xl),W0=wv>Os(0),Wl=Os(wv/_h),a0=Os(0),r0=Os(0),ds=Os(0),Bs=Hs;do ps=Os(ep(Bs+380+(yl<<3)|0,a1)),Rl=Os(ep(Bs+364+(yl<<3)|0,a1)),Rl=Os(cy(ps,Os(lp(Rl,Os(hs[Bs+504>>2]))))),Kl?(ps=Os(Rl*Os(Wm(Bs))),ps!=Os(-0)&&(Q0=Os(Rl-Os(f0*ps)),K2=Os(Ap(Bs,kv,Q0,av,Cv)),Q0!=K2)&&(a0=Os(a0-Os(K2-Rl)),ds=Os(ds+ps))):W0&&(T2=Os(R2(Bs)),T2!=Os(0))&&(Q0=Os(Rl+Os(Wl*T2)),Z2=Os(Ap(Bs,kv,Q0,av,Cv)),Q0!=Z2)&&(a0=Os(a0-Os(Z2-Rl)),r0=Os(r0-T2)),Bs=is[Bs+960>>2]|0;while(Bs|0);if(ds=Os(Xl+ds),Rl=Os(wv+a0),q2)ds=Os(0);else{f0=Os(_h+r0),Kl=is[K1>>2]|0,W0=Rl<Os(0),Bv=ds==Os(0),Wl=Os(Rl/ds),yl=Rl>Os(0),f0=Os(Rl/f0),ds=Os(0);do{Q0=Os(ep(Hs+380+(Kl<<3)|0,a1)),a0=Os(ep(Hs+364+(Kl<<3)|0,a1)),a0=Os(cy(Q0,Os(lp(a0,Os(hs[Hs+504>>2]))))),W0?(Q0=Os(a0*Os(Wm(Hs))),Rl=Os(-Q0),Q0!=Os(-0)?(Q0=Os(Wl*Rl),Rl=Os(Ap(Hs,kv,Os(a0+(Bv?Rl:Q0)),av,Cv))):Rl=a0):yl&&(Q2=Os(R2(Hs)),Q2!=Os(0))?Rl=Os(Ap(Hs,kv,Os(a0+Os(f0*Q2)),av,Cv)):Rl=a0,ds=Os(ds-Os(Rl-a0)),r0=Os(np(Hs,kv,Cv)),ps=Os(np(Hs,uv,Cv)),Rl=Os(Rl+r0),hs[G1>>2]=Rl,is[Q1>>2]=1,a0=Os(hs[Hs+396>>2]);e:do if(q0(a0)|0){Bs=q0(sp)|0;do if(!Bs){if(r1|(k1(Hs,uv,sp)|0|ip)||(x1(ss,Hs)|0)!=4||(is[(B2(Hs,uv)|0)+4>>2]|0)==3||(is[(Qp(Hs,uv)|0)+4>>2]|0)==3)break;hs[Vp>>2]=sp,is[f1>>2]=1;break e}while(!1);if(k1(Hs,uv,sp)|0){Bs=is[Hs+992+(is[Om>>2]<<2)>>2]|0,Q0=Os(ps+Os(ep(Bs,sp))),hs[Vp>>2]=Q0,Bs=Nm&(is[Bs+4>>2]|0)==2,is[f1>>2]=((q0(Q0)|0|Bs)^1)&1;break}else{hs[Vp>>2]=sp,is[f1>>2]=Bs?0:2;break}}else Q0=Os(Rl-r0),_h=Os(Q0/a0),Q0=Os(a0*Q0),is[f1>>2]=1,hs[Vp>>2]=Os(ps+(dp?_h:Q0));while(!1);a2(Hs,kv,av,Cv,Q1,G1),a2(Hs,uv,sp,Cv,f1,Vp);do if(!(k1(Hs,uv,sp)|0)&&(x1(ss,Hs)|0)==4){if((is[(B2(Hs,uv)|0)+4>>2]|0)==3){Bs=0;break}Bs=(is[(Qp(Hs,uv)|0)+4>>2]|0)!=3}else Bs=0;while(!1);Q0=Os(hs[G1>>2]),_h=Os(hs[Vp>>2]),am=is[Q1>>2]|0,mp=is[f1>>2]|0,O2(Hs,dp?Q0:_h,dp?_h:Q0,zp,dp?am:mp,dp?mp:am,Cv,i1,Ns&(Bs^1),3488,Gs)|0,as[Z1>>0]=as[Z1>>0]|as[Hs+508>>0],Hs=is[Hs+960>>2]|0}while(Hs|0)}}else ds=Os(0);if(ds=Os(wv+ds),mp=ds<Os(0)&1,as[Z1>>0]=mp|us[Z1>>0],Lm&ds>Os(0)?(Bs=is[K1>>2]|0,is[ss+364+(Bs<<3)+4>>2]|0&&(Yp=Os(ep(ss+364+(Bs<<3)|0,a1)),Yp>=Os(0))?Rl=Os(lp(Os(0),Os(Yp-Os(av-ds)))):Rl=Os(0)):Rl=ds,W0=Rv>>>0<sv>>>0,W0){Kl=is[o1>>2]|0,yl=Rv,Bs=0;do Hs=is[Kl+(yl<<2)>>2]|0,is[Hs+24>>2]|0||(Bs=((is[(B2(Hs,kv)|0)+4>>2]|0)==3&1)+Bs|0,Bs=Bs+((is[(Qp(Hs,kv)|0)+4>>2]|0)==3&1)|0),yl=yl+1|0;while((yl|0)!=(sv|0));Bs?(r0=Os(0),ps=Os(0)):Vv=101}else Vv=101;e:do if((Vv|0)==101)switch(Vv=0,Rm|0){case 1:{Bs=0,r0=Os(Rl*Os(.5)),ps=Os(0);break e}case 2:{Bs=0,r0=Rl,ps=Os(0);break e}case 3:{if(ws>>>0<=1){Bs=0,r0=Os(0),ps=Os(0);break e}ps=Os((ws+-1|0)>>>0),Bs=0,r0=Os(0),ps=Os(Os(lp(Rl,Os(0)))/ps);break e}case 5:{ps=Os(Rl/Os((ws+1|0)>>>0)),Bs=0,r0=ps;break e}case 4:{ps=Os(Rl/Os(ws>>>0)),Bs=0,r0=Os(ps*Os(.5));break e}default:{Bs=0,r0=Os(0),ps=Os(0);break e}}while(!1);if(ds=Os(Bm+r0),W0){a0=Os(Rl/Os(Bs|0)),yl=is[o1>>2]|0,Hs=Rv,Rl=Os(0);do{Bs=is[yl+(Hs<<2)>>2]|0;e:do if((is[Bs+36>>2]|0)!=1){switch(is[Bs+24>>2]|0){case 1:{if(P1(Bs,kv)|0){if(!Ns)break e;Q0=Os(F2(Bs,kv,av)),Q0=Os(Q0+Os(Zp(ss,kv))),Q0=Os(Q0+Os(l1(Bs,kv,Cv))),hs[Bs+400+(is[$2>>2]<<2)>>2]=Q0;break e}break}case 0:if(mp=(is[(B2(Bs,kv)|0)+4>>2]|0)==3,Q0=Os(a0+ds),ds=mp?Q0:ds,Ns&&(mp=Bs+400+(is[$2>>2]<<2)|0,hs[mp>>2]=Os(ds+Os(hs[mp>>2]))),mp=(is[(Qp(Bs,kv)|0)+4>>2]|0)==3,Q0=Os(a0+ds),ds=mp?Q0:ds,T1){Q0=Os(ps+Os(np(Bs,kv,Cv))),Rl=sp,ds=Os(ds+Os(Q0+Os(hs[Bs+504>>2])));break e}else{ds=Os(ds+Os(ps+Os(Ly(Bs,kv,Cv)))),Rl=Os(lp(Rl,Os(Ly(Bs,uv,Cv))));break e}default:}Ns&&(Q0=Os(r0+Os(Zp(ss,kv))),mp=Bs+400+(is[$2>>2]<<2)|0,hs[mp>>2]=Os(Q0+Os(hs[mp>>2])))}while(!1);Hs=Hs+1|0}while((Hs|0)!=(sv|0))}else Rl=Os(0);if(ps=Os(Fm+ds),Pm?r0=Os(Os(Ap(ss,uv,Os(Xp+Rl),p2,Ts))-Xp):r0=sp,a0=Os(Os(Ap(ss,uv,Os(Xp+(Dm?sp:Rl)),p2,Ts))-Xp),W0&Ns){Hs=Rv;do{yl=is[(is[o1>>2]|0)+(Hs<<2)>>2]|0;do if((is[yl+36>>2]|0)!=1){if((is[yl+24>>2]|0)==1){if(P1(yl,uv)|0){if(Q0=Os(F2(yl,uv,sp)),Q0=Os(Q0+Os(Zp(ss,uv))),Q0=Os(Q0+Os(l1(yl,uv,Cv))),Bs=is[w2>>2]|0,hs[yl+400+(Bs<<2)>>2]=Q0,!(q0(Q0)|0))break}else Bs=is[w2>>2]|0;Q0=Os(Zp(ss,uv)),hs[yl+400+(Bs<<2)>>2]=Os(Q0+Os(l1(yl,uv,Cv)));break}Bs=x1(ss,yl)|0;do if((Bs|0)==4){if((is[(B2(yl,uv)|0)+4>>2]|0)==3){Vv=139;break}if((is[(Qp(yl,uv)|0)+4>>2]|0)==3){Vv=139;break}if(k1(yl,uv,sp)|0){ds=Gl;break}am=is[yl+908+(is[K1>>2]<<2)>>2]|0,is[Vp>>2]=am,ds=Os(hs[yl+396>>2]),mp=q0(ds)|0,Rl=(is[ys>>2]=am,Os(hs[ys>>2])),mp?ds=a0:(wv=Os(np(yl,uv,Cv)),Q0=Os(Rl/ds),ds=Os(ds*Rl),ds=Os(wv+(dp?Q0:ds))),hs[G1>>2]=ds,hs[Vp>>2]=Os(Os(np(yl,kv,Cv))+Rl),is[f1>>2]=1,is[Q1>>2]=1,a2(yl,kv,av,Cv,f1,Vp),a2(yl,uv,sp,Cv,Q1,G1),ds=Os(hs[Vp>>2]),wv=Os(hs[G1>>2]),Q0=dp?ds:wv,ds=dp?wv:ds,mp=((q0(Q0)|0)^1)&1,O2(yl,Q0,ds,zp,mp,((q0(ds)|0)^1)&1,Cv,i1,1,3493,Gs)|0,ds=Gl}else Vv=139;while(!1);e:do if((Vv|0)==139){Vv=0,ds=Os(r0-Os(Ly(yl,uv,Cv)));do if((is[(B2(yl,uv)|0)+4>>2]|0)==3){if((is[(Qp(yl,uv)|0)+4>>2]|0)!=3)break;ds=Os(Gl+Os(lp(Os(0),Os(ds*Os(.5)))));break e}while(!1);if((is[(Qp(yl,uv)|0)+4>>2]|0)==3){ds=Gl;break}if((is[(B2(yl,uv)|0)+4>>2]|0)==3){ds=Os(Gl+Os(lp(Os(0),ds)));break}switch(Bs|0){case 1:{ds=Gl;break e}case 2:{ds=Os(Gl+Os(ds*Os(.5)));break e}default:{ds=Os(Gl+ds);break e}}}while(!1);Q0=Os(jp+ds),mp=yl+400+(is[w2>>2]<<2)|0,hs[mp>>2]=Os(Q0+Os(hs[mp>>2]))}while(!1);Hs=Hs+1|0}while((Hs|0)!=(sv|0))}if(jp=Os(jp+a0),d2=Os(lp(d2,ps)),ws=n1+1|0,sv>>>0>=qp>>>0)break;ds=av,Rv=sv,n1=ws}do if(Ns){if(Bs=ws>>>0>1,!Bs&&!(aE(ss)|0))break;if(!(q0(sp)|0)){ds=Os(sp-jp);e:do switch(is[ss+12>>2]|0){case 3:{Gl=Os(Gl+ds),Wl=Os(0);break}case 2:{Gl=Os(Gl+Os(ds*Os(.5))),Wl=Os(0);break}case 4:{sp>jp?Wl=Os(ds/Os(ws>>>0)):Wl=Os(0);break}case 7:if(sp>jp){Gl=Os(Gl+Os(ds/Os(ws<<1>>>0))),Wl=Os(ds/Os(ws>>>0)),Wl=Bs?Wl:Os(0);break e}else{Gl=Os(Gl+Os(ds*Os(.5))),Wl=Os(0);break e}case 6:{Wl=Os(ds/Os(n1>>>0)),Wl=sp>jp&Bs?Wl:Os(0);break}default:Wl=Os(0)}while(!1);if(ws|0)for(W0=1040+(uv<<2)|0,Bv=976+(uv<<2)|0,Kl=0,Hs=0;;){e:do if(Hs>>>0<qp>>>0)for(Rl=Os(0),a0=Os(0),ds=Os(0),yl=Hs;;){Bs=is[(is[o1>>2]|0)+(yl<<2)>>2]|0;do if((is[Bs+36>>2]|0)!=1&&!(is[Bs+24>>2]|0)){if((is[Bs+940>>2]|0)!=(Kl|0))break e;if(oE(Bs,uv)|0&&(Q0=Os(hs[Bs+908+(is[Bv>>2]<<2)>>2]),ds=Os(lp(ds,Os(Q0+Os(np(Bs,uv,Cv)))))),(x1(ss,Bs)|0)!=5)break;Yp=Os(Py(Bs)),Yp=Os(Yp+Os(l1(Bs,0,Cv))),Q0=Os(hs[Bs+912>>2]),Q0=Os(Os(Q0+Os(np(Bs,0,Cv)))-Yp),Yp=Os(lp(a0,Yp)),Q0=Os(lp(Rl,Q0)),Rl=Q0,a0=Yp,ds=Os(lp(ds,Os(Yp+Q0)))}while(!1);if(Bs=yl+1|0,Bs>>>0<qp>>>0)yl=Bs;else{yl=Bs;break}}else a0=Os(0),ds=Os(0),yl=Hs;while(!1);if(f0=Os(Wl+ds),ps=Gl,Gl=Os(Gl+f0),Hs>>>0<yl>>>0){r0=Os(ps+a0),Bs=Hs;do{Hs=is[(is[o1>>2]|0)+(Bs<<2)>>2]|0;e:do if((is[Hs+36>>2]|0)!=1&&!(is[Hs+24>>2]|0))switch(x1(ss,Hs)|0){case 1:{Q0=Os(ps+Os(l1(Hs,uv,Cv))),hs[Hs+400+(is[W0>>2]<<2)>>2]=Q0;break e}case 3:{Q0=Os(Os(Gl-Os(H1(Hs,uv,Cv)))-Os(hs[Hs+908+(is[Bv>>2]<<2)>>2])),hs[Hs+400+(is[W0>>2]<<2)>>2]=Q0;break e}case 2:{Q0=Os(ps+Os(Os(f0-Os(hs[Hs+908+(is[Bv>>2]<<2)>>2]))*Os(.5))),hs[Hs+400+(is[W0>>2]<<2)>>2]=Q0;break e}case 4:{if(Q0=Os(ps+Os(l1(Hs,uv,Cv))),hs[Hs+400+(is[W0>>2]<<2)>>2]=Q0,k1(Hs,uv,sp)|0||(dp?(Rl=Os(hs[Hs+908>>2]),ds=Os(Rl+Os(np(Hs,kv,Cv))),a0=f0):(a0=Os(hs[Hs+912>>2]),a0=Os(a0+Os(np(Hs,uv,Cv))),ds=f0,Rl=Os(hs[Hs+908>>2])),Pp(ds,Rl)|0&&Pp(a0,Os(hs[Hs+912>>2]))|0))break e;O2(Hs,ds,a0,zp,1,1,Cv,i1,1,3501,Gs)|0;break e}case 5:{hs[Hs+404>>2]=Os(Os(r0-Os(Py(Hs)))+Os(F2(Hs,0,sp)));break e}default:break e}while(!1);Bs=Bs+1|0}while((Bs|0)!=(yl|0))}if(Kl=Kl+1|0,(Kl|0)==(ws|0))break;Hs=yl}}}while(!1);if(hs[ss+908>>2]=Os(Ap(ss,2,h2,Ts,Ts)),hs[ss+912>>2]=Os(Ap(ss,0,J2,Ls,Ts)),J1|0&&(em=is[ss+32>>2]|0,tm=(J1|0)==2,!(tm&(em|0)!=2))?tm&(em|0)==2&&(ds=Os(v2+av),ds=Os(lp(Os(cy(ds,Os(Oy(ss,kv,d2,a1)))),v2)),Vv=198):(ds=Os(Ap(ss,kv,d2,a1,Ts)),Vv=198),(Vv|0)==198&&(hs[ss+908+(is[976+(kv<<2)>>2]<<2)>>2]=ds),_g|0&&(nm=is[ss+32>>2]|0,im=(_g|0)==2,!(im&(nm|0)!=2))?im&(nm|0)==2&&(ds=Os(Xp+sp),ds=Os(lp(Os(cy(ds,Os(Oy(ss,uv,Os(Xp+jp),p2)))),Xp)),Vv=204):(ds=Os(Ap(ss,uv,Os(Xp+jp),p2,Ts)),Vv=204),(Vv|0)==204&&(hs[ss+908+(is[976+(uv<<2)>>2]<<2)>>2]=ds),Ns){if((is[rm>>2]|0)==2){Hs=976+(uv<<2)|0,yl=1040+(uv<<2)|0,Bs=0;do Kl=z1(ss,Bs)|0,is[Kl+24>>2]|0||(am=is[Hs>>2]|0,Q0=Os(hs[ss+908+(am<<2)>>2]),mp=Kl+400+(is[yl>>2]<<2)|0,Q0=Os(Q0-Os(hs[mp>>2])),hs[mp>>2]=Os(Q0-Os(hs[Kl+908+(am<<2)>>2]))),Bs=Bs+1|0;while((Bs|0)!=(qp|0))}if(_s|0){Bs=dp?J1:Es;do sE(ss,_s,Cv,Bs,i1,zp,Gs),_s=is[_s+960>>2]|0;while(_s|0)}if(Bs=(kv|2|0)==3,Hs=(uv|2|0)==3,Bs|Hs){_s=0;do yl=is[(is[o1>>2]|0)+(_s<<2)>>2]|0,(is[yl+36>>2]|0)!=1&&(Bs&&V_(ss,yl,kv),Hs&&V_(ss,yl,uv)),_s=_s+1|0;while((_s|0)!=(qp|0))}}}while(!1);ms=t2}function Cy(ss,ds){ss=ss|0,ds=Os(ds);var ps=0;g_(ss,ds>=Os(0),3147),ps=ds==Os(0),hs[ss+4>>2]=ps?Os(0):ds}function rw(ss,ds,ps,_s){ss=ss|0,ds=Os(ds),ps=Os(ps),_s=_s|0;var Es=D0,ws=D0,Ts=0,Ls=0,Ns=0;is[2278]=(is[2278]|0)+1,Zx(ss),k1(ss,2,ds)|0?(Es=Os(ep(is[ss+992>>2]|0,ds)),Ns=1,Es=Os(Es+Os(np(ss,2,ds)))):(Es=Os(ep(ss+380|0,ds)),Es>=Os(0)?Ns=2:(Ns=((q0(ds)|0)^1)&1,Es=ds)),k1(ss,0,ps)|0?(ws=Os(ep(is[ss+996>>2]|0,ps)),Ls=1,ws=Os(ws+Os(np(ss,0,ds)))):(ws=Os(ep(ss+388|0,ps)),ws>=Os(0)?Ls=2:(Ls=((q0(ps)|0)^1)&1,ws=ps)),Ts=ss+976|0,O2(ss,Es,ws,_s,Ns,Ls,ds,ps,1,3189,is[Ts>>2]|0)|0&&(Qx(ss,is[ss+496>>2]|0,ds,ps,ds),Jx(ss,Os(hs[(is[Ts>>2]|0)+4>>2]),Os(0),Os(0)),as[11696]|0)&&JS(ss,7)}function Zx(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Ls=ms,ms=ms+32|0,Ts=Ls+24|0,ws=Ls+16|0,_s=Ls+8|0,Es=Ls,ps=0;do ds=ss+380+(ps<<3)|0,is[ss+380+(ps<<3)+4>>2]|0&&(Ns=ds,Gs=is[Ns+4>>2]|0,Bs=_s,is[Bs>>2]=is[Ns>>2],is[Bs+4>>2]=Gs,Bs=ss+364+(ps<<3)|0,Gs=is[Bs+4>>2]|0,Ns=Es,is[Ns>>2]=is[Bs>>2],is[Ns+4>>2]=Gs,is[ws>>2]=is[_s>>2],is[ws+4>>2]=is[_s+4>>2],is[Ts>>2]=is[Es>>2],is[Ts+4>>2]=is[Es+4>>2],Hm(ws,Ts)|0)||(ds=ss+348+(ps<<3)|0),is[ss+992+(ps<<2)>>2]=ds,ps=ps+1|0;while((ps|0)!=2);ms=Ls}function k1(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps);var _s=0;switch(ss=is[ss+992+(is[976+(ds<<2)>>2]<<2)>>2]|0,is[ss+4>>2]|0){case 0:case 3:{ss=0;break}case 1:{Os(hs[ss>>2])<Os(0)?ss=0:_s=5;break}case 2:{Os(hs[ss>>2])<Os(0)?ss=0:ss=(q0(ps)|0)^1;break}default:_s=5}return(_s|0)==5&&(ss=1),ss|0}function ep(ss,ds){switch(ss=ss|0,ds=Os(ds),is[ss+4>>2]|0){case 2:{ds=Os(Os(Os(hs[ss>>2])*ds)/Os(100));break}case 1:{ds=Os(hs[ss>>2]);break}default:ds=Os(ks)}return Os(ds)}function Qx(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=Os(ps),_s=Os(_s),Es=Os(Es);var ws=0,Ts=D0;ds=is[ss+944>>2]|0?ds:1,ws=N2(is[ss+4>>2]|0,ds)|0,ds=U_(ws,ds)|0,ps=Os(_2(ss,ws,ps)),_s=Os(_2(ss,ds,_s)),Ts=Os(ps+Os(l1(ss,ws,Es))),hs[ss+400+(is[1040+(ws<<2)>>2]<<2)>>2]=Ts,ps=Os(ps+Os(H1(ss,ws,Es))),hs[ss+400+(is[1e3+(ws<<2)>>2]<<2)>>2]=ps,ps=Os(_s+Os(l1(ss,ds,Es))),hs[ss+400+(is[1040+(ds<<2)>>2]<<2)>>2]=ps,Es=Os(_s+Os(H1(ss,ds,Es))),hs[ss+400+(is[1e3+(ds<<2)>>2]<<2)>>2]=Es}function Jx(ss,ds,ps,_s){ss=ss|0,ds=Os(ds),ps=Os(ps),_s=Os(_s);var Es=0,ws=0,Ts=D0,Ls=D0,Ns=0,Gs=0,Bs=D0,Hs=0,yl=D0,Kl=D0,Gl=D0,Rl=D0;if(ds!=Os(0)&&(Es=ss+400|0,Rl=Os(hs[Es>>2]),ws=ss+404|0,Gl=Os(hs[ws>>2]),Hs=ss+416|0,Kl=Os(hs[Hs>>2]),Gs=ss+420|0,Ts=Os(hs[Gs>>2]),yl=Os(Rl+ps),Bs=Os(Gl+_s),_s=Os(yl+Kl),Ls=Os(Bs+Ts),Ns=(is[ss+988>>2]|0)==1,hs[Es>>2]=Os(m1(Rl,ds,0,Ns)),hs[ws>>2]=Os(m1(Gl,ds,0,Ns)),ps=Os(H$(Os(Kl*ds),Os(1))),Pp(ps,Os(0))|0?ws=0:ws=(Pp(ps,Os(1))|0)^1,ps=Os(H$(Os(Ts*ds),Os(1))),Pp(ps,Os(0))|0?Es=0:Es=(Pp(ps,Os(1))|0)^1,Rl=Os(m1(_s,ds,Ns&ws,Ns&(ws^1))),hs[Hs>>2]=Os(Rl-Os(m1(yl,ds,0,Ns))),Rl=Os(m1(Ls,ds,Ns&Es,Ns&(Es^1))),hs[Gs>>2]=Os(Rl-Os(m1(Bs,ds,0,Ns))),ws=(is[ss+952>>2]|0)-(is[ss+948>>2]|0)>>2,ws|0)){Es=0;do Jx(z1(ss,Es)|0,ds,yl,Bs),Es=Es+1|0;while((Es|0)!=(ws|0))}}function nw(ss,ds,ps,_s,Es){switch(ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ps|0){case 5:case 0:{ss=UC(is[489]|0,_s,Es)|0;break}default:ss=UB(_s,Es)|0}return ss|0}function eE(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0;Es=ms,ms=ms+16|0,ws=Es,is[ws>>2]=_s,hm(ss,0,ds,ps,ws),ms=Es}function hm(ss,ds,ps,_s,Es){if(ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ss=ss|0?ss:956,fT[is[ss+8>>2]&1](ss,ds,ps,_s,Es)|0,(ps|0)==5)yv();else return}function iw(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,as[ss+ds>>0]=ps&1}function Ty(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;is[ss>>2]=0,is[ss+4>>2]=0,is[ss+8>>2]=0,ps=ds+4|0,_s=(is[ps>>2]|0)-(is[ds>>2]|0)>>2,_s|0&&(y1(ss,_s),vm(ss,is[ds>>2]|0,is[ps>>2]|0,_s))}function y1(ss,ds){ss=ss|0,ds=ds|0;var ps=0;if((G_(ss)|0)>>>0<ds>>>0&&Wv(ss),ds>>>0>1073741823)yv();else{ps=K0(ds<<2)|0,is[ss+4>>2]=ps,is[ss>>2]=ps,is[ss+8>>2]=ps+(ds<<2);return}}function vm(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,_s=ss+4|0,ss=ps-ds|0,(ss|0)>0&&(Sv(is[_s>>2]|0,ds|0,ss|0)|0,is[_s>>2]=(is[_s>>2]|0)+(ss>>>2<<2))}function G_(ss){return ss=ss|0,1073741823}function l1(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=Os(ps),Dp(ds)|0&&is[ss+96>>2]|0?ss=ss+92|0:ss=Kp(ss+60|0,is[1040+(ds<<2)>>2]|0,992)|0,Os(j_(ss,ps))}function H1(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=Os(ps),Dp(ds)|0&&is[ss+104>>2]|0?ss=ss+100|0:ss=Kp(ss+60|0,is[1e3+(ds<<2)>>2]|0,992)|0,Os(j_(ss,ps))}function Dp(ss){return ss=ss|0,(ss|1|0)==3|0}function j_(ss,ds){return ss=ss|0,ds=Os(ds),(is[ss+4>>2]|0)==3?ds=Os(0):ds=Os(ep(ss,ds)),Os(ds)}function z_(ss,ds){return ss=ss|0,ds=ds|0,ss=is[ss>>2]|0,(ss|0?ss:(ds|0)>1?ds:1)|0}function N2(ss,ds){ss=ss|0,ds=ds|0;var ps=0;e:do if((ds|0)==2){switch(ss|0){case 2:{ss=3;break e}case 3:break;default:{ps=4;break e}}ss=2}else ps=4;while(!1);return ss|0}function Zp(ss,ds){ss=ss|0,ds=ds|0;var ps=D0;return Dp(ds)|0&&is[ss+312>>2]|0&&(ps=Os(hs[ss+308>>2]),ps>=Os(0))||(ps=Os(lp(Os(hs[(Kp(ss+276|0,is[1040+(ds<<2)>>2]|0,992)|0)>>2]),Os(0)))),Os(ps)}function hp(ss,ds){ss=ss|0,ds=ds|0;var ps=D0;return Dp(ds)|0&&is[ss+320>>2]|0&&(ps=Os(hs[ss+316>>2]),ps>=Os(0))||(ps=Os(lp(Os(hs[(Kp(ss+276|0,is[1e3+(ds<<2)>>2]|0,992)|0)>>2]),Os(0)))),Os(ps)}function Ay(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps);var _s=D0;return Dp(ds)|0&&is[ss+240>>2]|0&&(_s=Os(ep(ss+236|0,ps)),_s>=Os(0))||(_s=Os(lp(Os(ep(Kp(ss+204|0,is[1040+(ds<<2)>>2]|0,992)|0,ps)),Os(0)))),Os(_s)}function Iy(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps);var _s=D0;return Dp(ds)|0&&is[ss+248>>2]|0&&(_s=Os(ep(ss+244|0,ps)),_s>=Os(0))||(_s=Os(lp(Os(ep(Kp(ss+204|0,is[1e3+(ds<<2)>>2]|0,992)|0,ps)),Os(0)))),Os(_s)}function D2(ss,ds,ps,_s,Es,ws,Ts){ss=ss|0,ds=Os(ds),ps=Os(ps),_s=_s|0,Es=Es|0,ws=Os(ws),Ts=Os(Ts);var Ls=D0,Ns=D0,Gs=D0,Bs=D0,Hs=D0,yl=D0,Kl=0,Gl=0,Rl=0;Rl=ms,ms=ms+16|0,Kl=Rl,Gl=ss+964|0,Up(ss,(is[Gl>>2]|0)!=0,3519),Ls=Os(L1(ss,2,ds)),Ns=Os(L1(ss,0,ds)),Gs=Os(np(ss,2,ds)),Bs=Os(np(ss,0,ds)),q0(ds)|0?Hs=ds:Hs=Os(lp(Os(0),Os(Os(ds-Gs)-Ls))),q0(ps)|0?yl=ps:yl=Os(lp(Os(0),Os(Os(ps-Bs)-Ns))),(_s|0)==1&(Es|0)==1?(hs[ss+908>>2]=Os(Ap(ss,2,Os(ds-Gs),ws,ws)),ds=Os(Ap(ss,0,Os(ps-Bs),Ts,ws))):(cT[is[Gl>>2]&1](Kl,ss,Hs,_s,yl,Es),Hs=Os(Ls+Os(hs[Kl>>2])),yl=Os(ds-Gs),hs[ss+908>>2]=Os(Ap(ss,2,(_s|2|0)==2?Hs:yl,ws,ws)),yl=Os(Ns+Os(hs[Kl+4>>2])),ds=Os(ps-Bs),ds=Os(Ap(ss,0,(Es|2|0)==2?yl:ds,Ts,ws))),hs[ss+912>>2]=ds,ms=Rl}function tE(ss,ds,ps,_s,Es,ws,Ts){ss=ss|0,ds=Os(ds),ps=Os(ps),_s=_s|0,Es=Es|0,ws=Os(ws),Ts=Os(Ts);var Ls=D0,Ns=D0,Gs=D0,Bs=D0;Gs=Os(L1(ss,2,ws)),Ls=Os(L1(ss,0,ws)),Bs=Os(np(ss,2,ws)),Ns=Os(np(ss,0,ws)),ds=Os(ds-Bs),hs[ss+908>>2]=Os(Ap(ss,2,(_s|2|0)==2?Gs:ds,ws,ws)),ps=Os(ps-Ns),hs[ss+912>>2]=Os(Ap(ss,0,(Es|2|0)==2?Ls:ps,Ts,ws))}function rE(ss,ds,ps,_s,Es,ws,Ts){ss=ss|0,ds=Os(ds),ps=Os(ps),_s=_s|0,Es=Es|0,ws=Os(ws),Ts=Os(Ts);var Ls=0,Ns=D0,Gs=D0;return Ls=(_s|0)==2,!(ds<=Os(0)&Ls)&&!(ps<=Os(0)&(Es|0)==2)&&!((_s|0)==1&(Es|0)==1)?ss=0:(Ns=Os(np(ss,0,ws)),Gs=Os(np(ss,2,ws)),Ls=ds<Os(0)&Ls|(q0(ds)|0),ds=Os(ds-Gs),hs[ss+908>>2]=Os(Ap(ss,2,Ls?Os(0):ds,ws,ws)),ds=Os(ps-Ns),Ls=ps<Os(0)&(Es|0)==2|(q0(ps)|0),hs[ss+912>>2]=Os(Ap(ss,0,Ls?Os(0):ds,Ts,ws)),ss=1),ss|0}function U_(ss,ds){return ss=ss|0,ds=ds|0,Jp(ss)|0?ss=N2(2,ds)|0:ss=0,ss|0}function H_(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=Os(ps),ps=Os(Ay(ss,ds,ps)),Os(ps+Os(Zp(ss,ds)))}function nE(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=Os(ps),ps=Os(Iy(ss,ds,ps)),Os(ps+Os(hp(ss,ds)))}function L1(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps);var _s=D0;return _s=Os(H_(ss,ds,ps)),Os(_s+Os(nE(ss,ds,ps)))}function ky(ss){return ss=ss|0,is[ss+24>>2]|0?ss=0:Os(R2(ss))!=Os(0)?ss=1:ss=Os(Wm(ss))!=Os(0),ss|0}function R2(ss){ss=ss|0;var ds=D0;if(is[ss+944>>2]|0){if(ds=Os(hs[ss+44>>2]),q0(ds)|0)return ds=Os(hs[ss+40>>2]),ss=ds>Os(0)&((q0(ds)|0)^1),Os(ss?ds:Os(0))}else ds=Os(0);return Os(ds)}function Wm(ss){ss=ss|0;var ds=D0,ps=0,_s=D0;do if(is[ss+944>>2]|0){if(ds=Os(hs[ss+48>>2]),q0(ds)|0){if(ps=as[(is[ss+976>>2]|0)+2>>0]|0,!(ps<<24>>24)&&(_s=Os(hs[ss+40>>2]),_s<Os(0)&((q0(_s)|0)^1))){ds=Os(-_s);break}ds=ps<<24>>24?Os(1):Os(0)}}else ds=Os(0);while(!1);return Os(ds)}function W_(ss){ss=ss|0;var ds=0,ps=0;if(s_(ss+400|0,0,540)|0,as[ss+985>>0]=1,y_(ss),ps=i2(ss)|0,ps|0){ds=ss+948|0,ss=0;do W_(is[(is[ds>>2]|0)+(ss<<2)>>2]|0),ss=ss+1|0;while((ss|0)!=(ps|0))}}function iE(ss,ds,ps,_s,Es,ws,Ts,Ls,Ns,Gs){ss=ss|0,ds=ds|0,ps=Os(ps),_s=_s|0,Es=Os(Es),ws=Os(ws),Ts=Os(Ts),Ls=Ls|0,Ns=Ns|0,Gs=Gs|0;var Bs=0,Hs=D0,yl=0,Kl=0,Gl=D0,Rl=D0,a0=0,r0=D0,f0=0,Wl=D0,Xl=0,W0=0,Bv=0,sv=0,_h=0,wv=0,Rv=0,av=0,ip=0,t1=0;ip=ms,ms=ms+16|0,Bv=ip+12|0,sv=ip+8|0,_h=ip+4|0,wv=ip,av=N2(is[ss+4>>2]|0,Ns)|0,Xl=Dp(av)|0,Hs=Os(ep(uE(ds)|0,Xl?ws:Ts)),W0=k1(ds,2,ws)|0,Rv=k1(ds,0,Ts)|0;do if(!(q0(Hs)|0)&&!(q0(Xl?ps:Es)|0)){if(Bs=ds+504|0,!(q0(Os(hs[Bs>>2]))|0)&&(!(lE(is[ds+976>>2]|0,0)|0)||(is[ds+500>>2]|0)==(is[2278]|0)))break;hs[Bs>>2]=Os(lp(Hs,Os(L1(ds,av,ws))))}else yl=7;while(!1);do if((yl|0)==7){if(f0=Xl^1,!(f0|W0^1)){Ts=Os(ep(is[ds+992>>2]|0,ws)),hs[ds+504>>2]=Os(lp(Ts,Os(L1(ds,2,ws))));break}if(!(Xl|Rv^1)){Ts=Os(ep(is[ds+996>>2]|0,Ts)),hs[ds+504>>2]=Os(lp(Ts,Os(L1(ds,0,ws))));break}hs[Bv>>2]=Os(ks),hs[sv>>2]=Os(ks),is[_h>>2]=0,is[wv>>2]=0,r0=Os(np(ds,2,ws)),Wl=Os(np(ds,0,ws)),W0?(Gl=Os(r0+Os(ep(is[ds+992>>2]|0,ws))),hs[Bv>>2]=Gl,is[_h>>2]=1,Kl=1):(Kl=0,Gl=Os(ks)),Rv?(Hs=Os(Wl+Os(ep(is[ds+996>>2]|0,Ts))),hs[sv>>2]=Hs,is[wv>>2]=1,Bs=1):(Bs=0,Hs=Os(ks)),yl=is[ss+32>>2]|0,Xl&(yl|0)==2?yl=2:q0(Gl)|0&&!(q0(ps)|0)&&(hs[Bv>>2]=ps,is[_h>>2]=2,Kl=2,Gl=ps),!((yl|0)==2&f0)&&q0(Hs)|0&&!(q0(Es)|0)&&(hs[sv>>2]=Es,is[wv>>2]=2,Bs=2,Hs=Es),Rl=Os(hs[ds+396>>2]),a0=q0(Rl)|0;do if(a0)yl=Kl;else{if((Kl|0)==1&f0){hs[sv>>2]=Os(Os(Gl-r0)/Rl),is[wv>>2]=1,Bs=1,yl=1;break}Xl&(Bs|0)==1?(hs[Bv>>2]=Os(Rl*Os(Hs-Wl)),is[_h>>2]=1,Bs=1,yl=1):yl=Kl}while(!1);t1=q0(ps)|0,Kl=(x1(ss,ds)|0)!=4,!(Xl|W0|((_s|0)!=1|t1)|(Kl|(yl|0)==1))&&(hs[Bv>>2]=ps,is[_h>>2]=1,!a0)&&(hs[sv>>2]=Os(Os(ps-r0)/Rl),is[wv>>2]=1,Bs=1),!(Rv|f0|((Ls|0)!=1|(q0(Es)|0))|(Kl|(Bs|0)==1))&&(hs[sv>>2]=Es,is[wv>>2]=1,!a0)&&(hs[Bv>>2]=Os(Rl*Os(Es-Wl)),is[_h>>2]=1),a2(ds,2,ws,ws,_h,Bv),a2(ds,0,Ts,ws,wv,sv),ps=Os(hs[Bv>>2]),Es=Os(hs[sv>>2]),O2(ds,ps,Es,Ns,is[_h>>2]|0,is[wv>>2]|0,ws,Ts,0,3565,Gs)|0,Ts=Os(hs[ds+908+(is[976+(av<<2)>>2]<<2)>>2]),hs[ds+504>>2]=Os(lp(Ts,Os(L1(ds,av,ws))))}while(!1);is[ds+500>>2]=is[2278],ms=ip}function Ap(ss,ds,ps,_s,Es){return ss=ss|0,ds=ds|0,ps=Os(ps),_s=Os(_s),Es=Os(Es),_s=Os(Oy(ss,ds,ps,_s)),Os(lp(_s,Os(L1(ss,ds,Es))))}function x1(ss,ds){return ss=ss|0,ds=ds|0,ds=ds+20|0,ds=is[(is[ds>>2]|0?ds:ss+16|0)>>2]|0,(ds|0)==5&&Jp(is[ss+4>>2]|0)|0&&(ds=1),ds|0}function B2(ss,ds){return ss=ss|0,ds=ds|0,Dp(ds)|0&&is[ss+96>>2]|0?ds=4:ds=is[1040+(ds<<2)>>2]|0,ss+60+(ds<<3)|0}function Qp(ss,ds){return ss=ss|0,ds=ds|0,Dp(ds)|0&&is[ss+104>>2]|0?ds=5:ds=is[1e3+(ds<<2)>>2]|0,ss+60+(ds<<3)|0}function a2(ss,ds,ps,_s,Es,ws){switch(ss=ss|0,ds=ds|0,ps=Os(ps),_s=Os(_s),Es=Es|0,ws=ws|0,ps=Os(ep(ss+380+(is[976+(ds<<2)>>2]<<3)|0,ps)),ps=Os(ps+Os(np(ss,ds,_s))),is[Es>>2]|0){case 2:case 1:{Es=q0(ps)|0,_s=Os(hs[ws>>2]),hs[ws>>2]=Es|_s<ps?_s:ps;break}case 0:{q0(ps)|0||(is[Es>>2]=2,hs[ws>>2]=ps);break}default:}}function P1(ss,ds){return ss=ss|0,ds=ds|0,ss=ss+132|0,Dp(ds)|0&&is[(Kp(ss,4,948)|0)+4>>2]|0?ss=1:ss=(is[(Kp(ss,is[1040+(ds<<2)>>2]|0,948)|0)+4>>2]|0)!=0,ss|0}function F2(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps);var _s=0,Es=0;return ss=ss+132|0,Dp(ds)|0&&(_s=Kp(ss,4,948)|0,(is[_s+4>>2]|0)!=0)?Es=4:(_s=Kp(ss,is[1040+(ds<<2)>>2]|0,948)|0,is[_s+4>>2]|0?Es=4:ps=Os(0)),(Es|0)==4&&(ps=Os(ep(_s,ps))),Os(ps)}function Ly(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps);var _s=D0;return _s=Os(hs[ss+908+(is[976+(ds<<2)>>2]<<2)>>2]),_s=Os(_s+Os(l1(ss,ds,ps))),Os(_s+Os(H1(ss,ds,ps)))}function aE(ss){ss=ss|0;var ds=0,ps=0,_s=0;e:do if(Jp(is[ss+4>>2]|0)|0)ds=0;else if((is[ss+16>>2]|0)!=5)if(ps=i2(ss)|0,!ps)ds=0;else for(ds=0;;){if(_s=z1(ss,ds)|0,!(is[_s+24>>2]|0)&&(is[_s+20>>2]|0)==5){ds=1;break e}if(ds=ds+1|0,ds>>>0>=ps>>>0){ds=0;break}}else ds=1;while(!1);return ds|0}function oE(ss,ds){ss=ss|0,ds=ds|0;var ps=D0;return ps=Os(hs[ss+908+(is[976+(ds<<2)>>2]<<2)>>2]),ps>=Os(0)&((q0(ps)|0)^1)|0}function Py(ss){ss=ss|0;var ds=D0,ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=D0;if(ps=is[ss+968>>2]|0,ps)Ns=Os(hs[ss+908>>2]),ds=Os(hs[ss+912>>2]),ds=Os(oT[ps&0](ss,Ns,ds)),Up(ss,(q0(ds)|0)^1,3573);else{ws=i2(ss)|0;do if(ws|0){for(ps=0,Es=0;;){if(_s=z1(ss,Es)|0,is[_s+940>>2]|0){Ts=8;break}if((is[_s+24>>2]|0)!=1)if(Ls=(x1(ss,_s)|0)==5,Ls){ps=_s;break}else ps=ps|0?ps:_s;if(Es=Es+1|0,Es>>>0>=ws>>>0){Ts=8;break}}if((Ts|0)==8&&!ps)break;return ds=Os(Py(ps)),Os(ds+Os(hs[ps+404>>2]))}while(!1);ds=Os(hs[ss+912>>2])}return Os(ds)}function Oy(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=Os(ps),_s=Os(_s);var Es=D0,ws=0;return Jp(ds)|0?(ds=1,ws=3):Dp(ds)|0?(ds=0,ws=3):(_s=Os(ks),Es=Os(ks)),(ws|0)==3&&(Es=Os(ep(ss+364+(ds<<3)|0,_s)),_s=Os(ep(ss+380+(ds<<3)|0,_s))),ws=_s<ps&(_s>=Os(0)&((q0(_s)|0)^1)),ps=ws?_s:ps,ws=Es>=Os(0)&((q0(Es)|0)^1)&ps<Es,Os(ws?Es:ps)}function sE(ss,ds,ps,_s,Es,ws,Ts){ss=ss|0,ds=ds|0,ps=Os(ps),_s=_s|0,Es=Os(Es),ws=ws|0,Ts=Ts|0;var Ls=D0,Ns=D0,Gs=0,Bs=0,Hs=D0,yl=D0,Kl=D0,Gl=0,Rl=0,a0=0,r0=0,f0=D0,Wl=0;a0=N2(is[ss+4>>2]|0,ws)|0,Gl=U_(a0,ws)|0,Rl=Dp(a0)|0,Hs=Os(np(ds,2,ps)),yl=Os(np(ds,0,ps)),k1(ds,2,ps)|0?Ls=Os(Hs+Os(ep(is[ds+992>>2]|0,ps))):P1(ds,2)|0&&E1(ds,2)|0?(Ls=Os(hs[ss+908>>2]),Ns=Os(Zp(ss,2)),Ns=Os(Ls-Os(Ns+Os(hp(ss,2)))),Ls=Os(F2(ds,2,ps)),Ls=Os(Ap(ds,2,Os(Ns-Os(Ls+Os(G2(ds,2,ps)))),ps,ps))):Ls=Os(ks),k1(ds,0,Es)|0?Ns=Os(yl+Os(ep(is[ds+996>>2]|0,Es))):P1(ds,0)|0&&E1(ds,0)|0?(Ns=Os(hs[ss+912>>2]),f0=Os(Zp(ss,0)),f0=Os(Ns-Os(f0+Os(hp(ss,0)))),Ns=Os(F2(ds,0,Es)),Ns=Os(Ap(ds,0,Os(f0-Os(Ns+Os(G2(ds,0,Es)))),Es,ps))):Ns=Os(ks),Gs=q0(Ls)|0,Bs=q0(Ns)|0;do if(Gs^Bs&&(Kl=Os(hs[ds+396>>2]),!(q0(Kl)|0)))if(Gs){Ls=Os(Hs+Os(Os(Ns-yl)*Kl));break}else{f0=Os(yl+Os(Os(Ls-Hs)/Kl)),Ns=Bs?f0:Ns;break}while(!1);Bs=q0(Ls)|0,Gs=q0(Ns)|0,Bs|Gs&&(Wl=(Bs^1)&1,_s=ps>Os(0)&((_s|0)!=0&Bs),Ls=Rl?Ls:_s?ps:Ls,O2(ds,Ls,Ns,ws,Rl?Wl:_s?2:Wl,Bs&(Gs^1)&1,Ls,Ns,0,3623,Ts)|0,Ls=Os(hs[ds+908>>2]),Ls=Os(Ls+Os(np(ds,2,ps))),Ns=Os(hs[ds+912>>2]),Ns=Os(Ns+Os(np(ds,0,ps)))),O2(ds,Ls,Ns,ws,1,1,Ls,Ns,1,3635,Ts)|0,E1(ds,a0)|0&&!(P1(ds,a0)|0)?(Wl=is[976+(a0<<2)>>2]|0,f0=Os(hs[ss+908+(Wl<<2)>>2]),f0=Os(f0-Os(hs[ds+908+(Wl<<2)>>2])),f0=Os(f0-Os(hp(ss,a0))),f0=Os(f0-Os(H1(ds,a0,ps))),f0=Os(f0-Os(G2(ds,a0,Rl?ps:Es))),hs[ds+400+(is[1040+(a0<<2)>>2]<<2)>>2]=f0):r0=21;do if((r0|0)==21){if(!(P1(ds,a0)|0)&&(is[ss+8>>2]|0)==1){Wl=is[976+(a0<<2)>>2]|0,f0=Os(hs[ss+908+(Wl<<2)>>2]),f0=Os(Os(f0-Os(hs[ds+908+(Wl<<2)>>2]))*Os(.5)),hs[ds+400+(is[1040+(a0<<2)>>2]<<2)>>2]=f0;break}!(P1(ds,a0)|0)&&(is[ss+8>>2]|0)==2&&(Wl=is[976+(a0<<2)>>2]|0,f0=Os(hs[ss+908+(Wl<<2)>>2]),f0=Os(f0-Os(hs[ds+908+(Wl<<2)>>2])),hs[ds+400+(is[1040+(a0<<2)>>2]<<2)>>2]=f0)}while(!1);E1(ds,Gl)|0&&!(P1(ds,Gl)|0)?(Wl=is[976+(Gl<<2)>>2]|0,f0=Os(hs[ss+908+(Wl<<2)>>2]),f0=Os(f0-Os(hs[ds+908+(Wl<<2)>>2])),f0=Os(f0-Os(hp(ss,Gl))),f0=Os(f0-Os(H1(ds,Gl,ps))),f0=Os(f0-Os(G2(ds,Gl,Rl?Es:ps))),hs[ds+400+(is[1040+(Gl<<2)>>2]<<2)>>2]=f0):r0=30;do if((r0|0)==30&&!(P1(ds,Gl)|0)){if((x1(ss,ds)|0)==2){Wl=is[976+(Gl<<2)>>2]|0,f0=Os(hs[ss+908+(Wl<<2)>>2]),f0=Os(Os(f0-Os(hs[ds+908+(Wl<<2)>>2]))*Os(.5)),hs[ds+400+(is[1040+(Gl<<2)>>2]<<2)>>2]=f0;break}Wl=(x1(ss,ds)|0)==3,Wl^(is[ss+28>>2]|0)==2&&(Wl=is[976+(Gl<<2)>>2]|0,f0=Os(hs[ss+908+(Wl<<2)>>2]),f0=Os(f0-Os(hs[ds+908+(Wl<<2)>>2])),hs[ds+400+(is[1040+(Gl<<2)>>2]<<2)>>2]=f0)}while(!1)}function V_(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=D0,Es=0;Es=is[976+(ps<<2)>>2]|0,_s=Os(hs[ds+908+(Es<<2)>>2]),_s=Os(Os(hs[ss+908+(Es<<2)>>2])-_s),_s=Os(_s-Os(hs[ds+400+(is[1040+(ps<<2)>>2]<<2)>>2])),hs[ds+400+(is[1e3+(ps<<2)>>2]<<2)>>2]=_s}function Jp(ss){return ss=ss|0,(ss|1|0)==1|0}function uE(ss){ss=ss|0;var ds=D0;switch(is[ss+56>>2]|0){case 0:case 3:{ds=Os(hs[ss+40>>2]),ds>Os(0)&((q0(ds)|0)^1)?ss=as[(is[ss+976>>2]|0)+2>>0]|0?1056:992:ss=1056;break}default:ss=ss+52|0}return ss|0}function lE(ss,ds){return ss=ss|0,ds=ds|0,(as[ss+ds>>0]|0)!=0|0}function E1(ss,ds){return ss=ss|0,ds=ds|0,ss=ss+132|0,Dp(ds)|0&&is[(Kp(ss,5,948)|0)+4>>2]|0?ss=1:ss=(is[(Kp(ss,is[1e3+(ds<<2)>>2]|0,948)|0)+4>>2]|0)!=0,ss|0}function G2(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps);var _s=0,Es=0;return ss=ss+132|0,Dp(ds)|0&&(_s=Kp(ss,5,948)|0,(is[_s+4>>2]|0)!=0)?Es=4:(_s=Kp(ss,is[1e3+(ds<<2)>>2]|0,948)|0,is[_s+4>>2]|0?Es=4:ps=Os(0)),(Es|0)==4&&(ps=Os(ep(_s,ps))),Os(ps)}function _2(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=Os(ps),P1(ss,ds)|0?ps=Os(F2(ss,ds,ps)):ps=Os(-Os(G2(ss,ds,ps))),Os(ps)}function Ny(ss){return ss=Os(ss),hs[ys>>2]=ss,is[ys>>2]|0|0}function Dy(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>1073741823)yv();else{Es=K0(ds<<2)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps<<2)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds<<2)}function fE(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(0-(Es>>2)<<2)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function Ry(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~((_s+-4-ds|0)>>>2)<<2)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function cE(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0;if(Ts=ss+4|0,Ls=is[Ts>>2]|0,Es=Ls-_s|0,ws=Es>>2,ss=ds+(ws<<2)|0,ss>>>0<ps>>>0){_s=Ls;do is[_s>>2]=is[ss>>2],ss=ss+4|0,_s=(is[Ts>>2]|0)+4|0,is[Ts>>2]=_s;while(ss>>>0<ps>>>0)}ws|0&&Ex(Ls+(0-ws<<2)|0,ds|0,Es|0)|0}function dE(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;return Ls=ds+4|0,Ns=is[Ls>>2]|0,Es=is[ss>>2]|0,Ts=ps,ws=Ts-Es|0,_s=Ns+(0-(ws>>2)<<2)|0,is[Ls>>2]=_s,(ws|0)>0&&Sv(_s|0,Es|0,ws|0)|0,Es=ss+4|0,ws=ds+8|0,_s=(is[Es>>2]|0)-Ts|0,(_s|0)>0&&(Sv(is[ws>>2]|0,ps|0,_s|0)|0,is[ws>>2]=(is[ws>>2]|0)+(_s>>>2<<2)),Ts=is[ss>>2]|0,is[ss>>2]=is[Ls>>2],is[Ls>>2]=Ts,Ts=is[Es>>2]|0,is[Es>>2]=is[ws>>2],is[ws>>2]=Ts,Ts=ss+8|0,ps=ds+12|0,ss=is[Ts>>2]|0,is[Ts>>2]=is[ps>>2],is[ps>>2]=ss,is[ds>>2]=is[Ls>>2],Ns|0}function aw(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;if(Ts=is[ds>>2]|0,ws=is[ps>>2]|0,(Ts|0)!=(ws|0)){Es=ss+8|0,ps=((ws+-4-Ts|0)>>>2)+1|0,ss=Ts,_s=is[Es>>2]|0;do is[_s>>2]=is[ss>>2],_s=(is[Es>>2]|0)+4|0,is[Es>>2]=_s,ss=ss+4|0;while((ss|0)!=(ws|0));is[ds>>2]=Ts+(ps<<2)}}function ow(){p_()}function sw(){var ss=0;return ss=K0(4)|0,uw(ss),ss|0}function uw(ss){ss=ss|0,is[ss>>2]=$S()|0}function lw(ss){ss=ss|0,ss|0&&(hE(ss),y0(ss))}function hE(ss){ss=ss|0,bS(is[ss>>2]|0)}function fw(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,iw(is[ss>>2]|0,ds,ps)}function vE(ss,ds){ss=ss|0,ds=Os(ds),Cy(is[ss>>2]|0,ds)}function pE(ss,ds){return ss=ss|0,ds=ds|0,lE(is[ss>>2]|0,ds)|0}function cw(){var ss=0;return ss=K0(8)|0,gE(ss,0),ss|0}function gE(ss,ds){ss=ss|0,ds=ds|0,ds?ds=Lx(is[ds>>2]|0)|0:ds=xS()|0,is[ss>>2]=ds,is[ss+4>>2]=0,x_(ds,ss)}function Y_(ss){ss=ss|0;var ds=0;return ds=K0(8)|0,gE(ds,ss),ds|0}function By(ss){ss=ss|0,ss|0&&(mE(ss),y0(ss))}function mE(ss){ss=ss|0;var ds=0;my(is[ss>>2]|0),ds=ss+4|0,ss=is[ds>>2]|0,is[ds>>2]=0,ss|0&&(pm(ss),y0(ss))}function pm(ss){ss=ss|0,gm(ss)}function gm(ss){ss=ss|0,ss=is[ss>>2]|0,ss|0&&vy(ss|0)}function yE(ss){return ss=ss|0,_y(ss)|0}function dw(ss){ss=ss|0;var ds=0,ps=0;ps=ss+4|0,ds=is[ps>>2]|0,is[ps>>2]=0,ds|0&&(pm(ds),y0(ds)),SS(is[ss>>2]|0)}function _E(ss,ds){ss=ss|0,ds=ds|0,Nx(is[ss>>2]|0,is[ds>>2]|0)}function hw(ss,ds){ss=ss|0,ds=ds|0,BS(is[ss>>2]|0,ds)}function vw(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps,WS(is[ss>>2]|0,ds,Os(ps))}function pw(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps,jx(is[ss>>2]|0,ds,Os(ps))}function gw(ss,ds){ss=ss|0,ds=ds|0,LS(is[ss>>2]|0,ds)}function mw(ss,ds){ss=ss|0,ds=ds|0,OS(is[ss>>2]|0,ds)}function mm(ss,ds){ss=ss|0,ds=ds|0,DS(is[ss>>2]|0,ds)}function yw(ss,ds){ss=ss|0,ds=ds|0,m2(is[ss>>2]|0,ds)}function _w(ss,ds){ss=ss|0,ds=ds|0,GS(is[ss>>2]|0,ds)}function xE(ss,ds){ss=ss|0,ds=ds|0,Rx(is[ss>>2]|0,ds)}function X_(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps,YS(is[ss>>2]|0,ds,Os(ps))}function xw(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps,zx(is[ss>>2]|0,ds,Os(ps))}function EE(ss,ds){ss=ss|0,ds=ds|0,Ux(is[ss>>2]|0,ds)}function Ew(ss,ds){ss=ss|0,ds=ds|0,zm(is[ss>>2]|0,ds)}function Sw(ss,ds){ss=ss|0,ds=ds|0,lm(is[ss>>2]|0,ds)}function ww(ss,ds){ss=ss|0,ds=+ds,fm(is[ss>>2]|0,Os(ds))}function $w(ss,ds){ss=ss|0,ds=+ds,E_(is[ss>>2]|0,Os(ds))}function Mw(ss,ds){ss=ss|0,ds=+ds,US(is[ss>>2]|0,Os(ds))}function Vm(ss,ds){ss=ss|0,ds=+ds,Gx(is[ss>>2]|0,Os(ds))}function bw(ss,ds){ss=ss|0,ds=+ds,L2(is[ss>>2]|0,Os(ds))}function Fy(ss,ds){ss=ss|0,ds=+ds,w_(is[ss>>2]|0,Os(ds))}function Cw(ss,ds){ss=ss|0,ds=+ds,Sy(is[ss>>2]|0,Os(ds))}function ym(ss){ss=ss|0,Um(is[ss>>2]|0)}function _m(ss,ds){ss=ss|0,ds=+ds,Hx(is[ss>>2]|0,Os(ds))}function Tw(ss,ds){ss=ss|0,ds=+ds,$_(is[ss>>2]|0,Os(ds))}function xm(ss){ss=ss|0,Wx(is[ss>>2]|0)}function SE(ss,ds){ss=ss|0,ds=+ds,KS(is[ss>>2]|0,Os(ds))}function Em(ss,ds){ss=ss|0,ds=+ds,ZS(is[ss>>2]|0,Os(ds))}function q_(ss,ds){ss=ss|0,ds=+ds,M_(is[ss>>2]|0,Os(ds))}function K_(ss,ds){ss=ss|0,ds=+ds,$y(is[ss>>2]|0,Os(ds))}function Z_(ss,ds){ss=ss|0,ds=+ds,C_(is[ss>>2]|0,Os(ds))}function Q_(ss,ds){ss=ss|0,ds=+ds,cm(is[ss>>2]|0,Os(ds))}function J_(ss,ds){ss=ss|0,ds=+ds,A_(is[ss>>2]|0,Os(ds))}function Gy(ss,ds){ss=ss|0,ds=+ds,I_(is[ss>>2]|0,Os(ds))}function wE(ss,ds){ss=ss|0,ds=+ds,Vx(is[ss>>2]|0,Os(ds))}function $E(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps,Ey(is[ss>>2]|0,ds,Os(ps))}function ME(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps,XS(is[ss>>2]|0,ds,Os(ps))}function bE(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps,U1(is[ss>>2]|0,ds,Os(ps))}function CE(ss){return ss=ss|0,um(is[ss>>2]|0)|0}function ex(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0;_s=ms,ms=ms+16|0,Es=_s,VS(Es,is[ds>>2]|0,ps),S1(ss,Es),ms=_s}function S1(ss,ds){ss=ss|0,ds=ds|0,jy(ss,is[ds+4>>2]|0,+Os(hs[ds>>2]))}function jy(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps,is[ss>>2]=ds,vs[ss+8>>3]=ps}function TE(ss){return ss=ss|0,PS(is[ss>>2]|0)|0}function AE(ss){return ss=ss|0,NS(is[ss>>2]|0)|0}function IE(ss){return ss=ss|0,RS(is[ss>>2]|0)|0}function tx(ss){return ss=ss|0,xy(is[ss>>2]|0)|0}function kE(ss){return ss=ss|0,jS(is[ss>>2]|0)|0}function LE(ss){return ss=ss|0,Bx(is[ss>>2]|0)|0}function rx(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0;_s=ms,ms=ms+16|0,Es=_s,vp(Es,is[ds>>2]|0,ps),S1(ss,Es),ms=_s}function nx(ss){return ss=ss|0,zS(is[ss>>2]|0)|0}function PE(ss){return ss=ss|0,Fx(is[ss>>2]|0)|0}function ix(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;ps=ms,ms=ms+16|0,_s=ps,HS(_s,is[ds>>2]|0),S1(ss,_s),ms=ps}function OE(ss){return ss=ss|0,+ +Os(Dx(is[ss>>2]|0))}function NE(ss){return ss=ss|0,+ +Os(kS(is[ss>>2]|0))}function ax(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;ps=ms,ms=ms+16|0,_s=ps,wy(_s,is[ds>>2]|0),S1(ss,_s),ms=ps}function DE(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;ps=ms,ms=ms+16|0,_s=ps,qS(_s,is[ds>>2]|0),S1(ss,_s),ms=ps}function RE(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;ps=ms,ms=ms+16|0,_s=ps,QS(_s,is[ds>>2]|0),S1(ss,_s),ms=ps}function ox(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;ps=ms,ms=ms+16|0,_s=ps,b_(_s,is[ds>>2]|0),S1(ss,_s),ms=ps}function sx(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;ps=ms,ms=ms+16|0,_s=ps,T_(_s,is[ds>>2]|0),S1(ss,_s),ms=ps}function Ym(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;ps=ms,ms=ms+16|0,_s=ps,k_(_s,is[ds>>2]|0),S1(ss,_s),ms=ps}function BE(ss){return ss=ss|0,+ +Os(Yx(is[ss>>2]|0))}function zy(ss,ds){return ss=ss|0,ds=ds|0,+ +Os(P2(is[ss>>2]|0,ds))}function o2(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0;_s=ms,ms=ms+16|0,Es=_s,S_(Es,is[ds>>2]|0,ps),S1(ss,Es),ms=_s}function Xm(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,CS(is[ss>>2]|0,is[ds>>2]|0,ps)}function j2(ss,ds){ss=ss|0,ds=ds|0,ES(is[ss>>2]|0,is[ds>>2]|0)}function qm(ss){return ss=ss|0,i2(is[ss>>2]|0)|0}function Km(ss){return ss=ss|0,ss=IS(is[ss>>2]|0)|0,ss?ss=yE(ss)|0:ss=0,ss|0}function z2(ss,ds){return ss=ss|0,ds=ds|0,ss=z1(is[ss>>2]|0,ds)|0,ss?ss=yE(ss)|0:ss=0,ss|0}function U2(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;_s=K0(4)|0,x2(_s,ds),ps=ss+4|0,ds=is[ps>>2]|0,is[ps>>2]=_s,ds|0&&(pm(ds),y0(ds)),Ox(is[ss>>2]|0,1)}function x2(ss,ds){ss=ss|0,ds=ds|0,kw(ss,ds)}function Uy(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=Os(ps),_s=_s|0,Es=Os(Es),ws=ws|0;var Ts=0,Ls=0;Ts=ms,ms=ms+16|0,Ls=Ts,Hy(Ls,_y(ds)|0,+ps,_s,+Es,ws),hs[ss>>2]=Os(+vs[Ls>>3]),hs[ss+4>>2]=Os(+vs[Ls+8>>3]),ms=Ts}function Hy(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=+ps,_s=_s|0,Es=+Es,ws=ws|0;var Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Ts=ms,ms=ms+32|0,Bs=Ts+8|0,Gs=Ts+20|0,Ns=Ts,Ls=Ts+16|0,vs[Bs>>3]=ps,is[Gs>>2]=_s,vs[Ns>>3]=Es,is[Ls>>2]=ws,Zm(ss,is[ds+4>>2]|0,Bs,Gs,Ns,Ls),ms=Ts}function Zm(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0;var Ts=0,Ls=0;Ts=ms,ms=ms+16|0,Ls=Ts,R1(Ls),ds=Fp(ds)|0,ux(ss,ds,+vs[ps>>3],is[_s>>2]|0,+vs[Es>>3],is[ws>>2]|0),B1(Ls),ms=Ts}function Fp(ss){return ss=ss|0,is[ss>>2]|0}function ux(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=+ps,_s=_s|0,Es=+Es,ws=ws|0;var Ts=0;Ts=Rp(Sm()|0)|0,ps=+s2(ps),_s=lx(_s)|0,Es=+s2(Es),FE(ss,h_(0,Ts|0,ds|0,+ps,_s|0,+Es,lx(ws)|0)|0)}function Sm(){var ss=0;return as[7608]|0||(Iw(9120),ss=7608,is[ss>>2]=1,is[ss+4>>2]=0),9120}function Rp(ss){return ss=ss|0,is[ss+8>>2]|0}function s2(ss){return ss=+ss,+ +fx(ss)}function lx(ss){return ss=ss|0,zE(ss)|0}function FE(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0;Es=ms,ms=ms+32|0,ps=Es,_s=ds,_s&1?(GE(ps,0),lv(_s|0,ps|0)|0,jE(ss,ps),Aw(ps)):(is[ss>>2]=is[ds>>2],is[ss+4>>2]=is[ds+4>>2],is[ss+8>>2]=is[ds+8>>2],is[ss+12>>2]=is[ds+12>>2]),ms=Es}function GE(ss,ds){ss=ss|0,ds=ds|0,H2(ss,ds),is[ss+8>>2]=0,as[ss+24>>0]=0}function jE(ss,ds){ss=ss|0,ds=ds|0,ds=ds+8|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=is[ds+4>>2],is[ss+8>>2]=is[ds+8>>2],is[ss+12>>2]=is[ds+12>>2]}function Aw(ss){ss=ss|0,as[ss+24>>0]=0}function H2(ss,ds){ss=ss|0,ds=ds|0,is[ss>>2]=ds}function zE(ss){return ss=ss|0,ss|0}function fx(ss){return ss=+ss,+ss}function Iw(ss){ss=ss|0,w1(ss,UE()|0,4)}function UE(){return 1064}function w1(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,is[ss+4>>2]=ps,is[ss+8>>2]=d_(ds|0,ps+1|0)|0}function kw(ss,ds){ss=ss|0,ds=ds|0,ds=is[ds>>2]|0,is[ss>>2]=ds,Cp(ds|0)}function Lw(ss){ss=ss|0;var ds=0,ps=0;ps=ss+4|0,ds=is[ps>>2]|0,is[ps>>2]=0,ds|0&&(pm(ds),y0(ds)),Ox(is[ss>>2]|0,0)}function Pw(ss){ss=ss|0,yy(is[ss>>2]|0)}function Ow(ss){return ss=ss|0,__(is[ss>>2]|0)|0}function Nw(ss,ds,ps,_s){ss=ss|0,ds=+ds,ps=+ps,_s=_s|0,rw(is[ss>>2]|0,Os(ds),Os(ps),_s)}function Dw(ss){return ss=ss|0,+ +Os(L_(is[ss>>2]|0))}function Rw(ss){return ss=ss|0,+ +Os(O_(is[ss>>2]|0))}function Bw(ss){return ss=ss|0,+ +Os(P_(is[ss>>2]|0))}function Fw(ss){return ss=ss|0,+ +Os(N_(is[ss>>2]|0))}function cx(ss){return ss=ss|0,+ +Os(D_(is[ss>>2]|0))}function Wy(ss){return ss=ss|0,+ +Os(R_(is[ss>>2]|0))}function Vy(ss,ds){ss=ss|0,ds=ds|0,vs[ss>>3]=+Os(L_(is[ds>>2]|0)),vs[ss+8>>3]=+Os(O_(is[ds>>2]|0)),vs[ss+16>>3]=+Os(P_(is[ds>>2]|0)),vs[ss+24>>3]=+Os(N_(is[ds>>2]|0)),vs[ss+32>>3]=+Os(D_(is[ds>>2]|0)),vs[ss+40>>3]=+Os(R_(is[ds>>2]|0))}function Yy(ss,ds){return ss=ss|0,ds=ds|0,+ +Os(dm(is[ss>>2]|0,ds))}function dx(ss,ds){return ss=ss|0,ds=ds|0,+ +Os(B_(is[ss>>2]|0,ds))}function Xy(ss,ds){return ss=ss|0,ds=ds|0,+ +Os(F_(is[ss>>2]|0,ds))}function qy(){return wS()|0}function Ky(){hx(),Zy(),Qy(),Jy(),Qm(),Jm()}function hx(){MD(11713,4938,1)}function Zy(){HN(10448)}function Qy(){MN(10408)}function Jy(){XO(10324)}function Qm(){rP(10096)}function Jm(){ey(9132)}function ey(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0,Kl=0,Gl=0,Rl=0,a0=0,r0=0,f0=0,Wl=0,Xl=0,W0=0,Bv=0,sv=0,_h=0,wv=0,Rv=0,av=0,ip=0,t1=0,r1=0,n1=0,T1=0,km=0,Lm=0,K1=0,Pm=0,w2=0,$2=0,Om=0,Nm=0,Dm=0,Vv=0,Z1=0,Rm=0,c2=0,Bm=0,Fm=0,M2=0,C2=0,d2=0,Vp=0,G1=0,f1=0,Q1=0,q2=0,K2=0,T2=0,Z2=0,Q2=0,Yp=0,jp=0,J1=0,sp=0,J2=0,i1=0,h2=0,a1=0,v2=0,em=0,tm=0,p2=0,Xp=0,_g=0,rm=0,nm=0,im=0,Cv=0,dp=0,zp=0,o1=0,qp=0,kv=0,uv=0,t2=0;ds=ms,ms=ms+672|0,ps=ds+656|0,t2=ds+648|0,uv=ds+640|0,kv=ds+632|0,qp=ds+624|0,o1=ds+616|0,zp=ds+608|0,dp=ds+600|0,Cv=ds+592|0,im=ds+584|0,nm=ds+576|0,rm=ds+568|0,_g=ds+560|0,Xp=ds+552|0,p2=ds+544|0,tm=ds+536|0,em=ds+528|0,v2=ds+520|0,a1=ds+512|0,h2=ds+504|0,i1=ds+496|0,J2=ds+488|0,sp=ds+480|0,J1=ds+472|0,jp=ds+464|0,Yp=ds+456|0,Q2=ds+448|0,Z2=ds+440|0,T2=ds+432|0,K2=ds+424|0,q2=ds+416|0,Q1=ds+408|0,f1=ds+400|0,G1=ds+392|0,Vp=ds+384|0,d2=ds+376|0,C2=ds+368|0,M2=ds+360|0,Fm=ds+352|0,Bm=ds+344|0,c2=ds+336|0,Rm=ds+328|0,Z1=ds+320|0,Vv=ds+312|0,Dm=ds+304|0,Nm=ds+296|0,Om=ds+288|0,$2=ds+280|0,w2=ds+272|0,Pm=ds+264|0,K1=ds+256|0,Lm=ds+248|0,km=ds+240|0,T1=ds+232|0,n1=ds+224|0,r1=ds+216|0,t1=ds+208|0,ip=ds+200|0,av=ds+192|0,Rv=ds+184|0,wv=ds+176|0,_h=ds+168|0,sv=ds+160|0,Bv=ds+152|0,W0=ds+144|0,Xl=ds+136|0,Wl=ds+128|0,f0=ds+120|0,r0=ds+112|0,a0=ds+104|0,Rl=ds+96|0,Gl=ds+88|0,Kl=ds+80|0,yl=ds+72|0,Hs=ds+64|0,Bs=ds+56|0,Gs=ds+48|0,Ns=ds+40|0,Ls=ds+32|0,Ts=ds+24|0,ws=ds+16|0,Es=ds+8|0,_s=ds,ty(ss,3646),ry(ss,3651,2)|0,HE(ss,3665,2)|0,ny(ss,3682,18)|0,is[t2>>2]=19,is[t2+4>>2]=0,is[ps>>2]=is[t2>>2],is[ps+4>>2]=is[t2+4>>2],O1(ss,3690,ps)|0,is[uv>>2]=1,is[uv+4>>2]=0,is[ps>>2]=is[uv>>2],is[ps+4>>2]=is[uv+4>>2],WE(ss,3696,ps)|0,is[kv>>2]=2,is[kv+4>>2]=0,is[ps>>2]=is[kv>>2],is[ps+4>>2]=is[kv+4>>2],$1(ss,3706,ps)|0,is[qp>>2]=1,is[qp+4>>2]=0,is[ps>>2]=is[qp>>2],is[ps+4>>2]=is[qp+4>>2],W2(ss,3722,ps)|0,is[o1>>2]=2,is[o1+4>>2]=0,is[ps>>2]=is[o1>>2],is[ps+4>>2]=is[o1+4>>2],W2(ss,3734,ps)|0,is[zp>>2]=3,is[zp+4>>2]=0,is[ps>>2]=is[zp>>2],is[ps+4>>2]=is[zp+4>>2],$1(ss,3753,ps)|0,is[dp>>2]=4,is[dp+4>>2]=0,is[ps>>2]=is[dp>>2],is[ps+4>>2]=is[dp+4>>2],$1(ss,3769,ps)|0,is[Cv>>2]=5,is[Cv+4>>2]=0,is[ps>>2]=is[Cv>>2],is[ps+4>>2]=is[Cv+4>>2],$1(ss,3783,ps)|0,is[im>>2]=6,is[im+4>>2]=0,is[ps>>2]=is[im>>2],is[ps+4>>2]=is[im+4>>2],$1(ss,3796,ps)|0,is[nm>>2]=7,is[nm+4>>2]=0,is[ps>>2]=is[nm>>2],is[ps+4>>2]=is[nm+4>>2],$1(ss,3813,ps)|0,is[rm>>2]=8,is[rm+4>>2]=0,is[ps>>2]=is[rm>>2],is[ps+4>>2]=is[rm+4>>2],$1(ss,3825,ps)|0,is[_g>>2]=3,is[_g+4>>2]=0,is[ps>>2]=is[_g>>2],is[ps+4>>2]=is[_g+4>>2],W2(ss,3843,ps)|0,is[Xp>>2]=4,is[Xp+4>>2]=0,is[ps>>2]=is[Xp>>2],is[ps+4>>2]=is[Xp+4>>2],W2(ss,3853,ps)|0,is[p2>>2]=9,is[p2+4>>2]=0,is[ps>>2]=is[p2>>2],is[ps+4>>2]=is[p2+4>>2],$1(ss,3870,ps)|0,is[tm>>2]=10,is[tm+4>>2]=0,is[ps>>2]=is[tm>>2],is[ps+4>>2]=is[tm+4>>2],$1(ss,3884,ps)|0,is[em>>2]=11,is[em+4>>2]=0,is[ps>>2]=is[em>>2],is[ps+4>>2]=is[em+4>>2],$1(ss,3896,ps)|0,is[v2>>2]=1,is[v2+4>>2]=0,is[ps>>2]=is[v2>>2],is[ps+4>>2]=is[v2+4>>2],Op(ss,3907,ps)|0,is[a1>>2]=2,is[a1+4>>2]=0,is[ps>>2]=is[a1>>2],is[ps+4>>2]=is[a1+4>>2],Op(ss,3915,ps)|0,is[h2>>2]=3,is[h2+4>>2]=0,is[ps>>2]=is[h2>>2],is[ps+4>>2]=is[h2+4>>2],Op(ss,3928,ps)|0,is[i1>>2]=4,is[i1+4>>2]=0,is[ps>>2]=is[i1>>2],is[ps+4>>2]=is[i1+4>>2],Op(ss,3948,ps)|0,is[J2>>2]=5,is[J2+4>>2]=0,is[ps>>2]=is[J2>>2],is[ps+4>>2]=is[J2+4>>2],Op(ss,3960,ps)|0,is[sp>>2]=6,is[sp+4>>2]=0,is[ps>>2]=is[sp>>2],is[ps+4>>2]=is[sp+4>>2],Op(ss,3974,ps)|0,is[J1>>2]=7,is[J1+4>>2]=0,is[ps>>2]=is[J1>>2],is[ps+4>>2]=is[J1+4>>2],Op(ss,3983,ps)|0,is[jp>>2]=20,is[jp+4>>2]=0,is[ps>>2]=is[jp>>2],is[ps+4>>2]=is[jp+4>>2],O1(ss,3999,ps)|0,is[Yp>>2]=8,is[Yp+4>>2]=0,is[ps>>2]=is[Yp>>2],is[ps+4>>2]=is[Yp+4>>2],Op(ss,4012,ps)|0,is[Q2>>2]=9,is[Q2+4>>2]=0,is[ps>>2]=is[Q2>>2],is[ps+4>>2]=is[Q2+4>>2],Op(ss,4022,ps)|0,is[Z2>>2]=21,is[Z2+4>>2]=0,is[ps>>2]=is[Z2>>2],is[ps+4>>2]=is[Z2+4>>2],O1(ss,4039,ps)|0,is[T2>>2]=10,is[T2+4>>2]=0,is[ps>>2]=is[T2>>2],is[ps+4>>2]=is[T2+4>>2],Op(ss,4053,ps)|0,is[K2>>2]=11,is[K2+4>>2]=0,is[ps>>2]=is[K2>>2],is[ps+4>>2]=is[K2+4>>2],Op(ss,4065,ps)|0,is[q2>>2]=12,is[q2+4>>2]=0,is[ps>>2]=is[q2>>2],is[ps+4>>2]=is[q2+4>>2],Op(ss,4084,ps)|0,is[Q1>>2]=13,is[Q1+4>>2]=0,is[ps>>2]=is[Q1>>2],is[ps+4>>2]=is[Q1+4>>2],Op(ss,4097,ps)|0,is[f1>>2]=14,is[f1+4>>2]=0,is[ps>>2]=is[f1>>2],is[ps+4>>2]=is[f1+4>>2],Op(ss,4117,ps)|0,is[G1>>2]=15,is[G1+4>>2]=0,is[ps>>2]=is[G1>>2],is[ps+4>>2]=is[G1+4>>2],Op(ss,4129,ps)|0,is[Vp>>2]=16,is[Vp+4>>2]=0,is[ps>>2]=is[Vp>>2],is[ps+4>>2]=is[Vp+4>>2],Op(ss,4148,ps)|0,is[d2>>2]=17,is[d2+4>>2]=0,is[ps>>2]=is[d2>>2],is[ps+4>>2]=is[d2+4>>2],Op(ss,4161,ps)|0,is[C2>>2]=18,is[C2+4>>2]=0,is[ps>>2]=is[C2>>2],is[ps+4>>2]=is[C2+4>>2],Op(ss,4181,ps)|0,is[M2>>2]=5,is[M2+4>>2]=0,is[ps>>2]=is[M2>>2],is[ps+4>>2]=is[M2+4>>2],W2(ss,4196,ps)|0,is[Fm>>2]=6,is[Fm+4>>2]=0,is[ps>>2]=is[Fm>>2],is[ps+4>>2]=is[Fm+4>>2],W2(ss,4206,ps)|0,is[Bm>>2]=7,is[Bm+4>>2]=0,is[ps>>2]=is[Bm>>2],is[ps+4>>2]=is[Bm+4>>2],W2(ss,4217,ps)|0,is[c2>>2]=3,is[c2+4>>2]=0,is[ps>>2]=is[c2>>2],is[ps+4>>2]=is[c2+4>>2],u2(ss,4235,ps)|0,is[Rm>>2]=1,is[Rm+4>>2]=0,is[ps>>2]=is[Rm>>2],is[ps+4>>2]=is[Rm+4>>2],W1(ss,4251,ps)|0,is[Z1>>2]=4,is[Z1+4>>2]=0,is[ps>>2]=is[Z1>>2],is[ps+4>>2]=is[Z1+4>>2],u2(ss,4263,ps)|0,is[Vv>>2]=5,is[Vv+4>>2]=0,is[ps>>2]=is[Vv>>2],is[ps+4>>2]=is[Vv+4>>2],u2(ss,4279,ps)|0,is[Dm>>2]=6,is[Dm+4>>2]=0,is[ps>>2]=is[Dm>>2],is[ps+4>>2]=is[Dm+4>>2],u2(ss,4293,ps)|0,is[Nm>>2]=7,is[Nm+4>>2]=0,is[ps>>2]=is[Nm>>2],is[ps+4>>2]=is[Nm+4>>2],u2(ss,4306,ps)|0,is[Om>>2]=8,is[Om+4>>2]=0,is[ps>>2]=is[Om>>2],is[ps+4>>2]=is[Om+4>>2],u2(ss,4323,ps)|0,is[$2>>2]=9,is[$2+4>>2]=0,is[ps>>2]=is[$2>>2],is[ps+4>>2]=is[$2+4>>2],u2(ss,4335,ps)|0,is[w2>>2]=2,is[w2+4>>2]=0,is[ps>>2]=is[w2>>2],is[ps+4>>2]=is[w2+4>>2],W1(ss,4353,ps)|0,is[Pm>>2]=12,is[Pm+4>>2]=0,is[ps>>2]=is[Pm>>2],is[ps+4>>2]=is[Pm+4>>2],E2(ss,4363,ps)|0,is[K1>>2]=1,is[K1+4>>2]=0,is[ps>>2]=is[K1>>2],is[ps+4>>2]=is[K1+4>>2],V1(ss,4376,ps)|0,is[Lm>>2]=2,is[Lm+4>>2]=0,is[ps>>2]=is[Lm>>2],is[ps+4>>2]=is[Lm+4>>2],V1(ss,4388,ps)|0,is[km>>2]=13,is[km+4>>2]=0,is[ps>>2]=is[km>>2],is[ps+4>>2]=is[km+4>>2],E2(ss,4402,ps)|0,is[T1>>2]=14,is[T1+4>>2]=0,is[ps>>2]=is[T1>>2],is[ps+4>>2]=is[T1+4>>2],E2(ss,4411,ps)|0,is[n1>>2]=15,is[n1+4>>2]=0,is[ps>>2]=is[n1>>2],is[ps+4>>2]=is[n1+4>>2],E2(ss,4421,ps)|0,is[r1>>2]=16,is[r1+4>>2]=0,is[ps>>2]=is[r1>>2],is[ps+4>>2]=is[r1+4>>2],E2(ss,4433,ps)|0,is[t1>>2]=17,is[t1+4>>2]=0,is[ps>>2]=is[t1>>2],is[ps+4>>2]=is[t1+4>>2],E2(ss,4446,ps)|0,is[ip>>2]=18,is[ip+4>>2]=0,is[ps>>2]=is[ip>>2],is[ps+4>>2]=is[ip+4>>2],E2(ss,4458,ps)|0,is[av>>2]=3,is[av+4>>2]=0,is[ps>>2]=is[av>>2],is[ps+4>>2]=is[av+4>>2],V1(ss,4471,ps)|0,is[Rv>>2]=1,is[Rv+4>>2]=0,is[ps>>2]=is[Rv>>2],is[ps+4>>2]=is[Rv+4>>2],iy(ss,4486,ps)|0,is[wv>>2]=10,is[wv+4>>2]=0,is[ps>>2]=is[wv>>2],is[ps+4>>2]=is[wv+4>>2],u2(ss,4496,ps)|0,is[_h>>2]=11,is[_h+4>>2]=0,is[ps>>2]=is[_h>>2],is[ps+4>>2]=is[_h+4>>2],u2(ss,4508,ps)|0,is[sv>>2]=3,is[sv+4>>2]=0,is[ps>>2]=is[sv>>2],is[ps+4>>2]=is[sv+4>>2],W1(ss,4519,ps)|0,is[Bv>>2]=4,is[Bv+4>>2]=0,is[ps>>2]=is[Bv>>2],is[ps+4>>2]=is[Bv+4>>2],Gw(ss,4530,ps)|0,is[W0>>2]=19,is[W0+4>>2]=0,is[ps>>2]=is[W0>>2],is[ps+4>>2]=is[W0+4>>2],VE(ss,4542,ps)|0,is[Xl>>2]=12,is[Xl+4>>2]=0,is[ps>>2]=is[Xl>>2],is[ps+4>>2]=is[Xl+4>>2],jw(ss,4554,ps)|0,is[Wl>>2]=13,is[Wl+4>>2]=0,is[ps>>2]=is[Wl>>2],is[ps+4>>2]=is[Wl+4>>2],Y1(ss,4568,ps)|0,is[f0>>2]=2,is[f0+4>>2]=0,is[ps>>2]=is[f0>>2],is[ps+4>>2]=is[f0+4>>2],YE(ss,4578,ps)|0,is[r0>>2]=20,is[r0+4>>2]=0,is[ps>>2]=is[r0>>2],is[ps+4>>2]=is[r0+4>>2],wm(ss,4587,ps)|0,is[a0>>2]=22,is[a0+4>>2]=0,is[ps>>2]=is[a0>>2],is[ps+4>>2]=is[a0+4>>2],O1(ss,4602,ps)|0,is[Rl>>2]=23,is[Rl+4>>2]=0,is[ps>>2]=is[Rl>>2],is[ps+4>>2]=is[Rl+4>>2],O1(ss,4619,ps)|0,is[Gl>>2]=14,is[Gl+4>>2]=0,is[ps>>2]=is[Gl>>2],is[ps+4>>2]=is[Gl+4>>2],S2(ss,4629,ps)|0,is[Kl>>2]=1,is[Kl+4>>2]=0,is[ps>>2]=is[Kl>>2],is[ps+4>>2]=is[Kl+4>>2],XE(ss,4637,ps)|0,is[yl>>2]=4,is[yl+4>>2]=0,is[ps>>2]=is[yl>>2],is[ps+4>>2]=is[yl+4>>2],V1(ss,4653,ps)|0,is[Hs>>2]=5,is[Hs+4>>2]=0,is[ps>>2]=is[Hs>>2],is[ps+4>>2]=is[Hs+4>>2],V1(ss,4669,ps)|0,is[Bs>>2]=6,is[Bs+4>>2]=0,is[ps>>2]=is[Bs>>2],is[ps+4>>2]=is[Bs+4>>2],V1(ss,4686,ps)|0,is[Gs>>2]=7,is[Gs+4>>2]=0,is[ps>>2]=is[Gs>>2],is[ps+4>>2]=is[Gs+4>>2],V1(ss,4701,ps)|0,is[Ns>>2]=8,is[Ns+4>>2]=0,is[ps>>2]=is[Ns>>2],is[ps+4>>2]=is[Ns+4>>2],V1(ss,4719,ps)|0,is[Ls>>2]=9,is[Ls+4>>2]=0,is[ps>>2]=is[Ls>>2],is[ps+4>>2]=is[Ls+4>>2],V1(ss,4736,ps)|0,is[Ts>>2]=21,is[Ts+4>>2]=0,is[ps>>2]=is[Ts>>2],is[ps+4>>2]=is[Ts+4>>2],vx(ss,4754,ps)|0,is[ws>>2]=2,is[ws+4>>2]=0,is[ps>>2]=is[ws>>2],is[ps+4>>2]=is[ws+4>>2],iy(ss,4772,ps)|0,is[Es>>2]=3,is[Es+4>>2]=0,is[ps>>2]=is[Es>>2],is[ps+4>>2]=is[Es+4>>2],iy(ss,4790,ps)|0,is[_s>>2]=4,is[_s+4>>2]=0,is[ps>>2]=is[_s>>2],is[ps+4>>2]=is[_s+4>>2],iy(ss,4808,ps)|0,ms=ds}function ty(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=YL()|0,is[ss>>2]=ps,XL(ps,ds),Tm(is[ss>>2]|0)}function ry(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,LL(ss,Zv(ds)|0,ps,0),ss|0}function HE(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,gL(ss,Zv(ds)|0,ps,0),ss|0}function ny(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,rL(ss,Zv(ds)|0,ps,0),ss|0}function O1(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],jI(ss,ds,Es),ms=_s,ss|0}function WE(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],EI(ss,ds,Es),ms=_s,ss|0}function $1(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],aI(ss,ds,Es),ms=_s,ss|0}function W2(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],U3(ss,ds,Es),ms=_s,ss|0}function Op(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],C3(ss,ds,Es),ms=_s,ss|0}function u2(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],f3(ss,ds,Es),ms=_s,ss|0}function W1(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],X4(ss,ds,Es),ms=_s,ss|0}function E2(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],_4(ss,ds,Es),ms=_s,ss|0}function V1(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],n4(ss,ds,Es),ms=_s,ss|0}function iy(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],jA(ss,ds,Es),ms=_s,ss|0}function Gw(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],MA(ss,ds,Es),ms=_s,ss|0}function VE(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],lA(ss,ds,Es),ms=_s,ss|0}function jw(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],XT(ss,ds,Es),ms=_s,ss|0}function Y1(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],PT(ss,ds,Es),ms=_s,ss|0}function YE(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],gT(ss,ds,Es),ms=_s,ss|0}function wm(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],Yl(ss,ds,Es),ms=_s,ss|0}function S2(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],gp(ss,ds,Es),ms=_s,ss|0}function XE(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],c0(ss,ds,Es),ms=_s,ss|0}function vx(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],e_(ss,ds,Es),ms=_s,ss|0}function e_(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],Hp(ss,ps,Es,1),ms=_s}function Zv(ss){return ss=ss|0,ss|0}function Hp(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=X1()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=_p(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,e1(ws,_s)|0,_s),ms=Es}function X1(){var ss=0,ds=0;if(as[7616]|0||(gx(9136),Z0(24,9136,$s|0)|0,ds=7616,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9136)|0)){ss=9136,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));gx(9136)}return 9136}function _p(ss){return ss=ss|0,0}function e1(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=X1()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],px(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(Hw(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function Qv(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0;var Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0,Kl=0;Ts=ms,ms=ms+32|0,yl=Ts+24|0,Hs=Ts+20|0,Ns=Ts+16|0,Bs=Ts+12|0,Gs=Ts+8|0,Ls=Ts+4|0,Kl=Ts,is[Hs>>2]=ds,is[Ns>>2]=ps,is[Bs>>2]=_s,is[Gs>>2]=Es,is[Ls>>2]=ws,ws=ss+28|0,is[Kl>>2]=is[ws>>2],is[yl>>2]=is[Kl>>2],zw(ss+24|0,yl,Hs,Bs,Gs,Ns,Ls)|0,is[ws>>2]=is[is[ws>>2]>>2],ms=Ts}function zw(ss,ds,ps,_s,Es,ws,Ts){return ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0,Ts=Ts|0,ss=Uw(ds)|0,ds=K0(24)|0,qE(ds+4|0,is[ps>>2]|0,is[_s>>2]|0,is[Es>>2]|0,is[ws>>2]|0,is[Ts>>2]|0),is[ds>>2]=is[ss>>2],is[ss>>2]=ds,ds|0}function Uw(ss){return ss=ss|0,is[ss>>2]|0}function qE(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0,is[ss>>2]=ds,is[ss+4>>2]=ps,is[ss+8>>2]=_s,is[ss+12>>2]=Es,is[ss+16>>2]=ws}function fv(ss,ds){return ss=ss|0,ds=ds|0,ds|ss|0}function px(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function Hw(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=Ww(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,Vw(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],px(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,Yw(ss,Ls),Xw(Ls),ms=Gs;return}}function Ww(ss){return ss=ss|0,357913941}function Vw(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function Yw(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function Xw(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function gx(ss){ss=ss|0,Kw(ss)}function KE(ss){ss=ss|0,qw(ss+24|0)}function Tv(ss){return ss=ss|0,is[ss>>2]|0}function qw(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function Kw(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,3,ds,Zw()|0,0),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function Fv(){return 9228}function Zw(){return 1140}function Ws(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0;return ps=ms,ms=ms+16|0,_s=ps+8|0,Es=ps,ws=Al(ss)|0,ss=is[ws+4>>2]|0,is[Es>>2]=is[ws>>2],is[Es+4>>2]=ss,is[_s>>2]=is[Es>>2],is[_s+4>>2]=is[Es+4>>2],ds=Jl(ds,_s)|0,ms=ps,ds|0}function Qs(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0,is[ss>>2]=ds,is[ss+4>>2]=ps,is[ss+8>>2]=_s,is[ss+12>>2]=Es,is[ss+16>>2]=ws}function Al(ss){return ss=ss|0,(is[(X1()|0)+24>>2]|0)+(ss*12|0)|0}function Jl(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0;return Es=ms,ms=ms+48|0,_s=Es,ps=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(ps=is[(is[ss>>2]|0)+ps>>2]|0),X2[ps&31](_s,ss),_s=u0(_s)|0,ms=Es,_s|0}function u0(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0;return Es=ms,ms=ms+32|0,ds=Es+12|0,ps=Es,_s=e0(Ql()|0)|0,_s?(m0(ds,_s),x0(ps,ds),C0(ss,ps),ss=E0(ds)|0):ss=T0(ss)|0,ms=Es,ss|0}function Ql(){var ss=0;return as[7632]|0||(L0(9184),Z0(25,9184,$s|0)|0,ss=7632,is[ss>>2]=1,is[ss+4>>2]=0),9184}function e0(ss){return ss=ss|0,is[ss+36>>2]|0}function m0(ss,ds){ss=ss|0,ds=ds|0,is[ss>>2]=ds,is[ss+4>>2]=ss,is[ss+8>>2]=0}function x0(ss,ds){ss=ss|0,ds=ds|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=is[ds+4>>2],is[ss+8>>2]=0}function C0(ss,ds){ss=ss|0,ds=ds|0,t0(ds,ss,ss+8|0,ss+16|0,ss+24|0,ss+32|0,ss+40|0)|0}function E0(ss){return ss=ss|0,is[(is[ss+4>>2]|0)+8>>2]|0}function T0(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;Ns=ms,ms=ms+16|0,ps=Ns+4|0,_s=Ns,Es=D1(8)|0,ws=Es,Ts=K0(48)|0,Ls=Ts,ds=Ls+48|0;do is[Ls>>2]=is[ss>>2],Ls=Ls+4|0,ss=ss+4|0;while((Ls|0)<(ds|0));return ds=ws+4|0,is[ds>>2]=Ts,Ls=K0(8)|0,Ts=is[ds>>2]|0,is[_s>>2]=0,is[ps>>2]=is[_s>>2],O0(Ls,Ts,ps),is[Es>>2]=Ls,ms=Ns,ws|0}function O0(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,ps=K0(16)|0,is[ps+4>>2]=0,is[ps+8>>2]=0,is[ps>>2]=1092,is[ps+12>>2]=ds,is[ss+4>>2]=ps}function _0(ss){ss=ss|0,o_(ss),y0(ss)}function A0(ss){ss=ss|0,ss=is[ss+12>>2]|0,ss|0&&y0(ss)}function Hl(ss){ss=ss|0,y0(ss)}function t0(ss,ds,ps,_s,Es,ws,Ts){return ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0,Ts=Ts|0,ws=$0(is[ss>>2]|0,ds,ps,_s,Es,ws,Ts)|0,Ts=ss+4|0,is[(is[Ts>>2]|0)+8>>2]=ws,is[(is[Ts>>2]|0)+8>>2]|0}function $0(ss,ds,ps,_s,Es,ws,Ts){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0,Ts=Ts|0;var Ls=0,Ns=0;return Ls=ms,ms=ms+16|0,Ns=Ls,R1(Ns),ss=Fp(ss)|0,Ts=F0(ss,+vs[ds>>3],+vs[ps>>3],+vs[_s>>3],+vs[Es>>3],+vs[ws>>3],+vs[Ts>>3])|0,B1(Ns),ms=Ls,Ts|0}function F0(ss,ds,ps,_s,Es,ws,Ts){ss=ss|0,ds=+ds,ps=+ps,_s=+_s,Es=+Es,ws=+ws,Ts=+Ts;var Ls=0;return Ls=Rp(h0()|0)|0,ds=+s2(ds),ps=+s2(ps),_s=+s2(_s),Es=+s2(Es),ws=+s2(ws),A2(0,Ls|0,ss|0,+ds,+ps,+_s,+Es,+ws,+ +s2(Ts))|0}function h0(){var ss=0;return as[7624]|0||(z0(9172),ss=7624,is[ss>>2]=1,is[ss+4>>2]=0),9172}function z0(ss){ss=ss|0,w1(ss,p0()|0,6)}function p0(){return 1112}function L0(ss){ss=ss|0,S0(ss)}function v0(ss){ss=ss|0,I0(ss+24|0),ev(ss+16|0)}function I0(ss){ss=ss|0,N0(ss)}function ev(ss){ss=ss|0,hv(ss)}function hv(ss){ss=ss|0;var ds=0,ps=0;if(ds=is[ss>>2]|0,ds|0)do ps=ds,ds=is[ds>>2]|0,y0(ps);while(ds|0);is[ss>>2]=0}function N0(ss){ss=ss|0;var ds=0,ps=0;if(ds=is[ss>>2]|0,ds|0)do ps=ds,ds=is[ds>>2]|0,y0(ps);while(ds|0);is[ss>>2]=0}function S0(ss){ss=ss|0;var ds=0;is[ss+16>>2]=0,is[ss+20>>2]=0,ds=ss+24|0,is[ds>>2]=0,is[ss+28>>2]=ds,is[ss+36>>2]=0,as[ss+40>>0]=0,as[ss+41>>0]=0}function c0(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],cv(ss,ps,Es,0),ms=_s}function cv(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=mv()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=Y0(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,Av(ws,_s)|0,_s),ms=Es}function mv(){var ss=0,ds=0;if(as[7640]|0||(Ep(9232),Z0(26,9232,$s|0)|0,ds=7640,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9232)|0)){ss=9232,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));Ep(9232)}return 9232}function Y0(ss){return ss=ss|0,0}function Av(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=mv()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],vv(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(bv(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function vv(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function bv(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=Uv(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,xp(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],vv(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,Ip(ss,Ls),Nv(Ls),ms=Gs;return}}function Uv(ss){return ss=ss|0,357913941}function xp(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function Ip(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function Nv(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function Ep(ss){ss=ss|0,Mp(ss)}function op(ss){ss=ss|0,Sp(ss+24|0)}function Sp(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function Mp(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,1,ds,bp()|0,3),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function bp(){return 1144}function kp(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=+ps,_s=+_s,Es=Es|0;var ws=0,Ts=0,Ls=0,Ns=0;ws=ms,ms=ms+16|0,Ts=ws+8|0,Ls=ws,Ns=Np(ss)|0,ss=is[Ns+4>>2]|0,is[Ls>>2]=is[Ns>>2],is[Ls+4>>2]=ss,is[Ts>>2]=is[Ls>>2],is[Ts+4>>2]=is[Ls+4>>2],pp(ds,Ts,ps,_s,Es),ms=ws}function Np(ss){return ss=ss|0,(is[(mv()|0)+24>>2]|0)+(ss*12|0)|0}function pp(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=+ps,_s=+_s,Es=Es|0;var ws=0,Ts=0,Ls=0,Ns=0,Gs=0;Gs=ms,ms=ms+16|0,Ts=Gs+2|0,Ls=Gs+1|0,Ns=Gs,ws=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(ws=is[(is[ss>>2]|0)+ws>>2]|0),dv(Ts,ps),ps=+up(Ts,ps),dv(Ls,_s),_s=+up(Ls,_s),Dv(Ns,Es),Ns=_d(Ns,Es)|0,sT[ws&1](ss,ps,_s,Ns),ms=Gs}function dv(ss,ds){ss=ss|0,ds=+ds}function up(ss,ds){return ss=ss|0,ds=+ds,+ +Gv(ds)}function Dv(ss,ds){ss=ss|0,ds=ds|0}function _d(ss,ds){return ss=ss|0,ds=ds|0,Ov(ds)|0}function Ov(ss){return ss=ss|0,ss|0}function Gv(ss){return ss=+ss,+ss}function gp(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],q1(ss,ps,Es,1),ms=_s}function q1(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=l2()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=Cl(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,_f(ws,_s)|0,_s),ms=Es}function l2(){var ss=0,ds=0;if(as[7648]|0||(zl(9268),Z0(27,9268,$s|0)|0,ds=7648,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9268)|0)){ss=9268,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));zl(9268)}return 9268}function Cl(ss){return ss=ss|0,0}function _f(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=l2()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],Zl(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(H0(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function Zl(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function H0(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=Iv(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,$l(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],Zl(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,xl(ss,Ls),Pl(Ls),ms=Gs;return}}function Iv(ss){return ss=ss|0,357913941}function $l(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function xl(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function Pl(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function zl(ss){ss=ss|0,Ol(ss)}function Vl(ss){ss=ss|0,Dl(ss+24|0)}function Dl(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function Ol(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,4,ds,Bl()|0,0),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function Bl(){return 1160}function Ml(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0;return ps=ms,ms=ms+16|0,_s=ps+8|0,Es=ps,ws=Ll(ss)|0,ss=is[ws+4>>2]|0,is[Es>>2]=is[ws>>2],is[Es+4>>2]=ss,is[_s>>2]=is[Es>>2],is[_s+4>>2]=is[Es+4>>2],ds=El(ds,_s)|0,ms=ps,ds|0}function Ll(ss){return ss=ss|0,(is[(l2()|0)+24>>2]|0)+(ss*12|0)|0}function El(ss,ds){ss=ss|0,ds=ds|0;var ps=0;return ps=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(ps=is[(is[ss>>2]|0)+ps>>2]|0),Fl(hy[ps&31](ss)|0)|0}function Fl(ss){return ss=ss|0,ss&1|0}function Yl(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],o0(ss,ps,Es,0),ms=_s}function o0(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=s0()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=n0(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,w0(ws,_s)|0,_s),ms=Es}function s0(){var ss=0,ds=0;if(as[7656]|0||(cp(9304),Z0(28,9304,$s|0)|0,ds=7656,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9304)|0)){ss=9304,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));cp(9304)}return 9304}function n0(ss){return ss=ss|0,0}function w0(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=s0()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],J0(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(_v(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function J0(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function _v(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=X0(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,iv(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],J0(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,gv(ss,Ls),Hv(Ls),ms=Gs;return}}function X0(ss){return ss=ss|0,357913941}function iv(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function gv(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function Hv(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function cp(ss){ss=ss|0,M1(ss)}function Wp(ss){ss=ss|0,mx(ss+24|0)}function mx(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function M1(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,5,ds,ZE()|0,1),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function ZE(){return 1164}function N1(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=QE(ss)|0,ss=is[Ts+4>>2]|0,is[ws>>2]=is[Ts>>2],is[ws+4>>2]=ss,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],vT(ds,Es,ps),ms=_s}function QE(ss){return ss=ss|0,(is[(s0()|0)+24>>2]|0)+(ss*12|0)|0}function vT(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0;ws=ms,ms=ms+16|0,Es=ws,_s=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(_s=is[(is[ss>>2]|0)+_s>>2]|0),$m(Es,ps),ps=Mm(Es,ps)|0,X2[_s&31](ss,ps),bm(Es),ms=ws}function $m(ss,ds){ss=ss|0,ds=ds|0,pT(ss,ds)}function Mm(ss,ds){return ss=ss|0,ds=ds|0,ss|0}function bm(ss){ss=ss|0,pm(ss)}function pT(ss,ds){ss=ss|0,ds=ds|0,Qw(ss,ds)}function Qw(ss,ds){ss=ss|0,ds=ds|0,is[ss>>2]=ds}function gT(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],mT(ss,ps,Es,0),ms=_s}function mT(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=Jw()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=yT(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,_T(ws,_s)|0,_s),ms=Es}function Jw(){var ss=0,ds=0;if(as[7664]|0||(eM(9340),Z0(29,9340,$s|0)|0,ds=7664,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9340)|0)){ss=9340,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));eM(9340)}return 9340}function yT(ss){return ss=ss|0,0}function _T(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=Jw()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],J$(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(xT(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function J$(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function xT(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=ET(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,ST(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],J$(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,wT(ss,Ls),$T(Ls),ms=Gs;return}}function ET(ss){return ss=ss|0,357913941}function ST(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function wT(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function $T(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function eM(ss){ss=ss|0,CT(ss)}function MT(ss){ss=ss|0,bT(ss+24|0)}function bT(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function CT(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,4,ds,TT()|0,1),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function TT(){return 1180}function AT(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=IT(ss)|0,ss=is[Ts+4>>2]|0,is[ws>>2]=is[Ts>>2],is[ws+4>>2]=ss,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],ps=kT(ds,Es,ps)|0,ms=_s,ps|0}function IT(ss){return ss=ss|0,(is[(Jw()|0)+24>>2]|0)+(ss*12|0)|0}function kT(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0;return ws=ms,ms=ms+16|0,Es=ws,_s=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(_s=is[(is[ss>>2]|0)+_s>>2]|0),ay(Es,ps),Es=oy(Es,ps)|0,Es=JE(q$[_s&15](ss,Es)|0)|0,ms=ws,Es|0}function ay(ss,ds){ss=ss|0,ds=ds|0}function oy(ss,ds){return ss=ss|0,ds=ds|0,LT(ds)|0}function JE(ss){return ss=ss|0,ss|0}function LT(ss){return ss=ss|0,ss|0}function PT(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],OT(ss,ps,Es,0),ms=_s}function OT(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=e$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=NT(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,DT(ws,_s)|0,_s),ms=Es}function e$(){var ss=0,ds=0;if(as[7672]|0||(rM(9376),Z0(30,9376,$s|0)|0,ds=7672,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9376)|0)){ss=9376,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));rM(9376)}return 9376}function NT(ss){return ss=ss|0,0}function DT(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=e$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],tM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(RT(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function tM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function RT(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=BT(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,FT(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],tM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,GT(ss,Ls),jT(Ls),ms=Gs;return}}function BT(ss){return ss=ss|0,357913941}function FT(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function GT(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function jT(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function rM(ss){ss=ss|0,HT(ss)}function zT(ss){ss=ss|0,UT(ss+24|0)}function UT(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function HT(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,5,ds,nM()|0,0),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function nM(){return 1196}function WT(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0;return ps=ms,ms=ms+16|0,_s=ps+8|0,Es=ps,ws=VT(ss)|0,ss=is[ws+4>>2]|0,is[Es>>2]=is[ws>>2],is[Es+4>>2]=ss,is[_s>>2]=is[Es>>2],is[_s+4>>2]=is[Es+4>>2],ds=YT(ds,_s)|0,ms=ps,ds|0}function VT(ss){return ss=ss|0,(is[(e$()|0)+24>>2]|0)+(ss*12|0)|0}function YT(ss,ds){ss=ss|0,ds=ds|0;var ps=0;return ps=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(ps=is[(is[ss>>2]|0)+ps>>2]|0),JE(hy[ps&31](ss)|0)|0}function XT(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],qT(ss,ps,Es,1),ms=_s}function qT(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=t$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=KT(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,ZT(ws,_s)|0,_s),ms=Es}function t$(){var ss=0,ds=0;if(as[7680]|0||(aM(9412),Z0(31,9412,$s|0)|0,ds=7680,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9412)|0)){ss=9412,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));aM(9412)}return 9412}function KT(ss){return ss=ss|0,0}function ZT(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=t$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],iM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(QT(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function iM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function QT(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=JT(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,eA(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],iM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,tA(ss,Ls),rA(Ls),ms=Gs;return}}function JT(ss){return ss=ss|0,357913941}function eA(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function tA(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function rA(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function aM(ss){ss=ss|0,aA(ss)}function nA(ss){ss=ss|0,iA(ss+24|0)}function iA(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function aA(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,6,ds,oM()|0,0),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function oM(){return 1200}function oA(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0;return ps=ms,ms=ms+16|0,_s=ps+8|0,Es=ps,ws=sA(ss)|0,ss=is[ws+4>>2]|0,is[Es>>2]=is[ws>>2],is[Es+4>>2]=ss,is[_s>>2]=is[Es>>2],is[_s+4>>2]=is[Es+4>>2],ds=uA(ds,_s)|0,ms=ps,ds|0}function sA(ss){return ss=ss|0,(is[(t$()|0)+24>>2]|0)+(ss*12|0)|0}function uA(ss,ds){ss=ss|0,ds=ds|0;var ps=0;return ps=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(ps=is[(is[ss>>2]|0)+ps>>2]|0),eS(hy[ps&31](ss)|0)|0}function eS(ss){return ss=ss|0,ss|0}function lA(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],fA(ss,ps,Es,0),ms=_s}function fA(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=r$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=cA(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,dA(ws,_s)|0,_s),ms=Es}function r$(){var ss=0,ds=0;if(as[7688]|0||(uM(9448),Z0(32,9448,$s|0)|0,ds=7688,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9448)|0)){ss=9448,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));uM(9448)}return 9448}function cA(ss){return ss=ss|0,0}function dA(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=r$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],sM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(hA(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function sM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function hA(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=vA(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,pA(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],sM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,gA(ss,Ls),mA(Ls),ms=Gs;return}}function vA(ss){return ss=ss|0,357913941}function pA(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function gA(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function mA(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function uM(ss){ss=ss|0,xA(ss)}function yA(ss){ss=ss|0,_A(ss+24|0)}function _A(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function xA(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,6,ds,lM()|0,1),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function lM(){return 1204}function EA(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=SA(ss)|0,ss=is[Ts+4>>2]|0,is[ws>>2]=is[Ts>>2],is[ws+4>>2]=ss,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],wA(ds,Es,ps),ms=_s}function SA(ss){return ss=ss|0,(is[(r$()|0)+24>>2]|0)+(ss*12|0)|0}function wA(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0;ws=ms,ms=ms+16|0,Es=ws,_s=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(_s=is[(is[ss>>2]|0)+_s>>2]|0),n$(Es,ps),Es=i$(Es,ps)|0,X2[_s&31](ss,Es),ms=ws}function n$(ss,ds){ss=ss|0,ds=ds|0}function i$(ss,ds){return ss=ss|0,ds=ds|0,$A(ds)|0}function $A(ss){return ss=ss|0,ss|0}function MA(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],bA(ss,ps,Es,0),ms=_s}function bA(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=a$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=CA(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,TA(ws,_s)|0,_s),ms=Es}function a$(){var ss=0,ds=0;if(as[7696]|0||(cM(9484),Z0(33,9484,$s|0)|0,ds=7696,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9484)|0)){ss=9484,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));cM(9484)}return 9484}function CA(ss){return ss=ss|0,0}function TA(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=a$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],fM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(AA(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function fM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function AA(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=IA(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,kA(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],fM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,LA(ss,Ls),PA(Ls),ms=Gs;return}}function IA(ss){return ss=ss|0,357913941}function kA(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function LA(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function PA(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function cM(ss){ss=ss|0,DA(ss)}function OA(ss){ss=ss|0,NA(ss+24|0)}function NA(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function DA(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,1,ds,RA()|0,2),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function RA(){return 1212}function BA(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0;Es=ms,ms=ms+16|0,ws=Es+8|0,Ts=Es,Ls=FA(ss)|0,ss=is[Ls+4>>2]|0,is[Ts>>2]=is[Ls>>2],is[Ts+4>>2]=ss,is[ws>>2]=is[Ts>>2],is[ws+4>>2]=is[Ts+4>>2],GA(ds,ws,ps,_s),ms=Es}function FA(ss){return ss=ss|0,(is[(a$()|0)+24>>2]|0)+(ss*12|0)|0}function GA(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0;Ls=ms,ms=ms+16|0,ws=Ls+1|0,Ts=Ls,Es=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(Es=is[(is[ss>>2]|0)+Es>>2]|0),n$(ws,ps),ws=i$(ws,ps)|0,ay(Ts,_s),Ts=oy(Ts,_s)|0,$x[Es&15](ss,ws,Ts),ms=Ls}function jA(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],zA(ss,ps,Es,1),ms=_s}function zA(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=o$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=UA(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,HA(ws,_s)|0,_s),ms=Es}function o$(){var ss=0,ds=0;if(as[7704]|0||(hM(9520),Z0(34,9520,$s|0)|0,ds=7704,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9520)|0)){ss=9520,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));hM(9520)}return 9520}function UA(ss){return ss=ss|0,0}function HA(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=o$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],dM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(WA(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function dM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function WA(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=VA(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,YA(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],dM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,XA(ss,Ls),qA(Ls),ms=Gs;return}}function VA(ss){return ss=ss|0,357913941}function YA(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function XA(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function qA(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function hM(ss){ss=ss|0,QA(ss)}function KA(ss){ss=ss|0,ZA(ss+24|0)}function ZA(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function QA(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,1,ds,JA()|0,1),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function JA(){return 1224}function e4(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;return Es=ms,ms=ms+16|0,ws=Es+8|0,Ts=Es,Ls=t4(ss)|0,ss=is[Ls+4>>2]|0,is[Ts>>2]=is[Ls>>2],is[Ts+4>>2]=ss,is[ws>>2]=is[Ts>>2],is[ws+4>>2]=is[Ts+4>>2],_s=+r4(ds,ws,ps),ms=Es,+_s}function t4(ss){return ss=ss|0,(is[(o$()|0)+24>>2]|0)+(ss*12|0)|0}function r4(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return ws=ms,ms=ms+16|0,Es=ws,_s=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(_s=is[(is[ss>>2]|0)+_s>>2]|0),Dv(Es,ps),Es=_d(Es,ps)|0,Ts=+fx(+lT[_s&7](ss,Es)),ms=ws,+Ts}function n4(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],i4(ss,ps,Es,1),ms=_s}function i4(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=s$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=a4(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,o4(ws,_s)|0,_s),ms=Es}function s$(){var ss=0,ds=0;if(as[7712]|0||(pM(9556),Z0(35,9556,$s|0)|0,ds=7712,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9556)|0)){ss=9556,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));pM(9556)}return 9556}function a4(ss){return ss=ss|0,0}function o4(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=s$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],vM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(s4(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function vM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function s4(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=u4(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,l4(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],vM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,f4(ss,Ls),c4(Ls),ms=Gs;return}}function u4(ss){return ss=ss|0,357913941}function l4(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function f4(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function c4(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function pM(ss){ss=ss|0,v4(ss)}function d4(ss){ss=ss|0,h4(ss+24|0)}function h4(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function v4(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,5,ds,p4()|0,0),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function p4(){return 1232}function g4(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=m4(ss)|0,ss=is[Ts+4>>2]|0,is[ws>>2]=is[Ts>>2],is[ws+4>>2]=ss,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],ps=+y4(ds,Es),ms=_s,+ps}function m4(ss){return ss=ss|0,(is[(s$()|0)+24>>2]|0)+(ss*12|0)|0}function y4(ss,ds){ss=ss|0,ds=ds|0;var ps=0;return ps=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(ps=is[(is[ss>>2]|0)+ps>>2]|0),+ +fx(+uT[ps&15](ss))}function _4(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],x4(ss,ps,Es,1),ms=_s}function x4(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=u$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=E4(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,S4(ws,_s)|0,_s),ms=Es}function u$(){var ss=0,ds=0;if(as[7720]|0||(mM(9592),Z0(36,9592,$s|0)|0,ds=7720,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9592)|0)){ss=9592,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));mM(9592)}return 9592}function E4(ss){return ss=ss|0,0}function S4(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=u$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],gM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(w4(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function gM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function w4(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=$4(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,M4(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],gM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,C4(ss,Ls),T4(Ls),ms=Gs;return}}function $4(ss){return ss=ss|0,357913941}function M4(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function C4(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function T4(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function mM(ss){ss=ss|0,k4(ss)}function A4(ss){ss=ss|0,I4(ss+24|0)}function I4(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function k4(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,7,ds,L4()|0,0),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function L4(){return 1276}function P4(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0;return ps=ms,ms=ms+16|0,_s=ps+8|0,Es=ps,ws=O4(ss)|0,ss=is[ws+4>>2]|0,is[Es>>2]=is[ws>>2],is[Es+4>>2]=ss,is[_s>>2]=is[Es>>2],is[_s+4>>2]=is[Es+4>>2],ds=N4(ds,_s)|0,ms=ps,ds|0}function O4(ss){return ss=ss|0,(is[(u$()|0)+24>>2]|0)+(ss*12|0)|0}function N4(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0;return Es=ms,ms=ms+16|0,_s=Es,ps=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(ps=is[(is[ss>>2]|0)+ps>>2]|0),X2[ps&31](_s,ss),_s=yM(_s)|0,ms=Es,_s|0}function yM(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0;return Es=ms,ms=ms+32|0,ds=Es+12|0,ps=Es,_s=e0(_M()|0)|0,_s?(m0(ds,_s),x0(ps,ds),D4(ss,ps),ss=E0(ds)|0):ss=R4(ss)|0,ms=Es,ss|0}function _M(){var ss=0;return as[7736]|0||(Y4(9640),Z0(25,9640,$s|0)|0,ss=7736,is[ss>>2]=1,is[ss+4>>2]=0),9640}function D4(ss,ds){ss=ss|0,ds=ds|0,j4(ds,ss,ss+8|0)|0}function R4(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0;return ps=ms,ms=ms+16|0,Es=ps+4|0,Ts=ps,_s=D1(8)|0,ds=_s,Ls=K0(16)|0,is[Ls>>2]=is[ss>>2],is[Ls+4>>2]=is[ss+4>>2],is[Ls+8>>2]=is[ss+8>>2],is[Ls+12>>2]=is[ss+12>>2],ws=ds+4|0,is[ws>>2]=Ls,ss=K0(8)|0,ws=is[ws>>2]|0,is[Ts>>2]=0,is[Es>>2]=is[Ts>>2],l$(ss,ws,Es),is[_s>>2]=ss,ms=ps,ds|0}function l$(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,ps=K0(16)|0,is[ps+4>>2]=0,is[ps+8>>2]=0,is[ps>>2]=1244,is[ps+12>>2]=ds,is[ss+4>>2]=ps}function B4(ss){ss=ss|0,o_(ss),y0(ss)}function F4(ss){ss=ss|0,ss=is[ss+12>>2]|0,ss|0&&y0(ss)}function G4(ss){ss=ss|0,y0(ss)}function j4(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,ds=z4(is[ss>>2]|0,ds,ps)|0,ps=ss+4|0,is[(is[ps>>2]|0)+8>>2]=ds,is[(is[ps>>2]|0)+8>>2]|0}function z4(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0;return _s=ms,ms=ms+16|0,Es=_s,R1(Es),ss=Fp(ss)|0,ps=U4(ss,is[ds>>2]|0,+vs[ps>>3])|0,B1(Es),ms=_s,ps|0}function U4(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps;var _s=0;return _s=Rp(H4()|0)|0,ds=lx(ds)|0,I2(0,_s|0,ss|0,ds|0,+ +s2(ps))|0}function H4(){var ss=0;return as[7728]|0||(W4(9628),ss=7728,is[ss>>2]=1,is[ss+4>>2]=0),9628}function W4(ss){ss=ss|0,w1(ss,V4()|0,2)}function V4(){return 1264}function Y4(ss){ss=ss|0,S0(ss)}function X4(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],q4(ss,ps,Es,1),ms=_s}function q4(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=f$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=K4(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,Z4(ws,_s)|0,_s),ms=Es}function f$(){var ss=0,ds=0;if(as[7744]|0||(EM(9684),Z0(37,9684,$s|0)|0,ds=7744,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9684)|0)){ss=9684,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));EM(9684)}return 9684}function K4(ss){return ss=ss|0,0}function Z4(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=f$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],xM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(Q4(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function xM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function Q4(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=J4(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,e3(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],xM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,t3(ss,Ls),r3(Ls),ms=Gs;return}}function J4(ss){return ss=ss|0,357913941}function e3(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function t3(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function r3(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function EM(ss){ss=ss|0,a3(ss)}function n3(ss){ss=ss|0,i3(ss+24|0)}function i3(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function a3(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,5,ds,o3()|0,1),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function o3(){return 1280}function s3(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=u3(ss)|0,ss=is[Ts+4>>2]|0,is[ws>>2]=is[Ts>>2],is[ws+4>>2]=ss,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],ps=l3(ds,Es,ps)|0,ms=_s,ps|0}function u3(ss){return ss=ss|0,(is[(f$()|0)+24>>2]|0)+(ss*12|0)|0}function l3(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return Ts=ms,ms=ms+32|0,Es=Ts,ws=Ts+16|0,_s=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(_s=is[(is[ss>>2]|0)+_s>>2]|0),Dv(ws,ps),ws=_d(ws,ps)|0,$x[_s&15](Es,ss,ws),ws=yM(Es)|0,ms=Ts,ws|0}function f3(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],c3(ss,ps,Es,1),ms=_s}function c3(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=c$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=d3(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,h3(ws,_s)|0,_s),ms=Es}function c$(){var ss=0,ds=0;if(as[7752]|0||(wM(9720),Z0(38,9720,$s|0)|0,ds=7752,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9720)|0)){ss=9720,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));wM(9720)}return 9720}function d3(ss){return ss=ss|0,0}function h3(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=c$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],SM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(v3(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function SM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function v3(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=p3(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,g3(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],SM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,m3(ss,Ls),y3(Ls),ms=Gs;return}}function p3(ss){return ss=ss|0,357913941}function g3(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function m3(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function y3(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function wM(ss){ss=ss|0,E3(ss)}function _3(ss){ss=ss|0,x3(ss+24|0)}function x3(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function E3(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,8,ds,S3()|0,0),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function S3(){return 1288}function w3(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0;return ps=ms,ms=ms+16|0,_s=ps+8|0,Es=ps,ws=$3(ss)|0,ss=is[ws+4>>2]|0,is[Es>>2]=is[ws>>2],is[Es+4>>2]=ss,is[_s>>2]=is[Es>>2],is[_s+4>>2]=is[Es+4>>2],ds=M3(ds,_s)|0,ms=ps,ds|0}function $3(ss){return ss=ss|0,(is[(c$()|0)+24>>2]|0)+(ss*12|0)|0}function M3(ss,ds){ss=ss|0,ds=ds|0;var ps=0;return ps=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(ps=is[(is[ss>>2]|0)+ps>>2]|0),zE(hy[ps&31](ss)|0)|0}function C3(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],T3(ss,ps,Es,0),ms=_s}function T3(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=d$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=A3(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,I3(ws,_s)|0,_s),ms=Es}function d$(){var ss=0,ds=0;if(as[7760]|0||(MM(9756),Z0(39,9756,$s|0)|0,ds=7760,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9756)|0)){ss=9756,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));MM(9756)}return 9756}function A3(ss){return ss=ss|0,0}function I3(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=d$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],$M(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(k3(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function $M(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function k3(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=L3(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,P3(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],$M(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,O3(ss,Ls),N3(Ls),ms=Gs;return}}function L3(ss){return ss=ss|0,357913941}function P3(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function O3(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function N3(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function MM(ss){ss=ss|0,B3(ss)}function D3(ss){ss=ss|0,R3(ss+24|0)}function R3(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function B3(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,8,ds,F3()|0,1),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function F3(){return 1292}function G3(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps;var _s=0,Es=0,ws=0,Ts=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=j3(ss)|0,ss=is[Ts+4>>2]|0,is[ws>>2]=is[Ts>>2],is[ws+4>>2]=ss,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],z3(ds,Es,ps),ms=_s}function j3(ss){return ss=ss|0,(is[(d$()|0)+24>>2]|0)+(ss*12|0)|0}function z3(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps;var _s=0,Es=0,ws=0;ws=ms,ms=ms+16|0,Es=ws,_s=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(_s=is[(is[ss>>2]|0)+_s>>2]|0),dv(Es,ps),ps=+up(Es,ps),aT[_s&31](ss,ps),ms=ws}function U3(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],H3(ss,ps,Es,0),ms=_s}function H3(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=h$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=W3(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,V3(ws,_s)|0,_s),ms=Es}function h$(){var ss=0,ds=0;if(as[7768]|0||(CM(9792),Z0(40,9792,$s|0)|0,ds=7768,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9792)|0)){ss=9792,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));CM(9792)}return 9792}function W3(ss){return ss=ss|0,0}function V3(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=h$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],bM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(Y3(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function bM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function Y3(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=X3(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,q3(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],bM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,K3(ss,Ls),Z3(Ls),ms=Gs;return}}function X3(ss){return ss=ss|0,357913941}function q3(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function K3(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function Z3(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function CM(ss){ss=ss|0,eI(ss)}function Q3(ss){ss=ss|0,J3(ss+24|0)}function J3(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function eI(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,1,ds,tI()|0,2),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function tI(){return 1300}function rI(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=+_s;var Es=0,ws=0,Ts=0,Ls=0;Es=ms,ms=ms+16|0,ws=Es+8|0,Ts=Es,Ls=nI(ss)|0,ss=is[Ls+4>>2]|0,is[Ts>>2]=is[Ls>>2],is[Ts+4>>2]=ss,is[ws>>2]=is[Ts>>2],is[ws+4>>2]=is[Ts+4>>2],iI(ds,ws,ps,_s),ms=Es}function nI(ss){return ss=ss|0,(is[(h$()|0)+24>>2]|0)+(ss*12|0)|0}function iI(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=+_s;var Es=0,ws=0,Ts=0,Ls=0;Ls=ms,ms=ms+16|0,ws=Ls+1|0,Ts=Ls,Es=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(Es=is[(is[ss>>2]|0)+Es>>2]|0),Dv(ws,ps),ws=_d(ws,ps)|0,dv(Ts,_s),_s=+up(Ts,_s),hT[Es&15](ss,ws,_s),ms=Ls}function aI(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],oI(ss,ps,Es,0),ms=_s}function oI(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=v$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=sI(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,uI(ws,_s)|0,_s),ms=Es}function v$(){var ss=0,ds=0;if(as[7776]|0||(AM(9828),Z0(41,9828,$s|0)|0,ds=7776,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9828)|0)){ss=9828,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));AM(9828)}return 9828}function sI(ss){return ss=ss|0,0}function uI(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=v$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],TM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(lI(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function TM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function lI(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=fI(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,cI(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],TM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,dI(ss,Ls),hI(Ls),ms=Gs;return}}function fI(ss){return ss=ss|0,357913941}function cI(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function dI(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function hI(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function AM(ss){ss=ss|0,gI(ss)}function vI(ss){ss=ss|0,pI(ss+24|0)}function pI(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function gI(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,7,ds,mI()|0,1),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function mI(){return 1312}function yI(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=_I(ss)|0,ss=is[Ts+4>>2]|0,is[ws>>2]=is[Ts>>2],is[ws+4>>2]=ss,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],xI(ds,Es,ps),ms=_s}function _I(ss){return ss=ss|0,(is[(v$()|0)+24>>2]|0)+(ss*12|0)|0}function xI(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0;ws=ms,ms=ms+16|0,Es=ws,_s=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(_s=is[(is[ss>>2]|0)+_s>>2]|0),Dv(Es,ps),Es=_d(Es,ps)|0,X2[_s&31](ss,Es),ms=ws}function EI(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],SI(ss,ps,Es,0),ms=_s}function SI(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=p$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=wI(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,$I(ws,_s)|0,_s),ms=Es}function p$(){var ss=0,ds=0;if(as[7784]|0||(kM(9864),Z0(42,9864,$s|0)|0,ds=7784,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9864)|0)){ss=9864,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));kM(9864)}return 9864}function wI(ss){return ss=ss|0,0}function $I(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=p$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],IM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(MI(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function IM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function MI(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=bI(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,CI(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],IM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,TI(ss,Ls),AI(Ls),ms=Gs;return}}function bI(ss){return ss=ss|0,357913941}function CI(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function TI(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function AI(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function kM(ss){ss=ss|0,LI(ss)}function II(ss){ss=ss|0,kI(ss+24|0)}function kI(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function LI(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,8,ds,OI()|0,1),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function OI(){return 1320}function NI(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=DI(ss)|0,ss=is[Ts+4>>2]|0,is[ws>>2]=is[Ts>>2],is[ws+4>>2]=ss,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],RI(ds,Es,ps),ms=_s}function DI(ss){return ss=ss|0,(is[(p$()|0)+24>>2]|0)+(ss*12|0)|0}function RI(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0;ws=ms,ms=ms+16|0,Es=ws,_s=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(_s=is[(is[ss>>2]|0)+_s>>2]|0),BI(Es,ps),Es=FI(Es,ps)|0,X2[_s&31](ss,Es),ms=ws}function BI(ss,ds){ss=ss|0,ds=ds|0}function FI(ss,ds){return ss=ss|0,ds=ds|0,GI(ds)|0}function GI(ss){return ss=ss|0,ss|0}function jI(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],zI(ss,ps,Es,0),ms=_s}function zI(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=g$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=UI(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,HI(ws,_s)|0,_s),ms=Es}function g$(){var ss=0,ds=0;if(as[7792]|0||(PM(9900),Z0(43,9900,$s|0)|0,ds=7792,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9900)|0)){ss=9900,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));PM(9900)}return 9900}function UI(ss){return ss=ss|0,0}function HI(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=g$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],LM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(WI(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function LM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function WI(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=VI(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,YI(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],LM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,XI(ss,Ls),qI(Ls),ms=Gs;return}}function VI(ss){return ss=ss|0,357913941}function YI(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function XI(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function qI(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function PM(ss){ss=ss|0,QI(ss)}function KI(ss){ss=ss|0,ZI(ss+24|0)}function ZI(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function QI(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,22,ds,JI()|0,0),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function JI(){return 1344}function _k(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0;ps=ms,ms=ms+16|0,_s=ps+8|0,Es=ps,ws=eL(ss)|0,ss=is[ws+4>>2]|0,is[Es>>2]=is[ws>>2],is[Es+4>>2]=ss,is[_s>>2]=is[Es>>2],is[_s+4>>2]=is[Es+4>>2],tL(ds,_s),ms=ps}function eL(ss){return ss=ss|0,(is[(g$()|0)+24>>2]|0)+(ss*12|0)|0}function tL(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(ps=is[(is[ss>>2]|0)+ps>>2]|0),Y2[ps&127](ss)}function rL(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0;ws=is[ss>>2]|0,Es=m$()|0,ss=nL(ps)|0,Qv(ws,ds,Es,ss,iL(ps,_s)|0,_s)}function m$(){var ss=0,ds=0;if(as[7800]|0||(NM(9936),Z0(44,9936,$s|0)|0,ds=7800,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9936)|0)){ss=9936,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));NM(9936)}return 9936}function nL(ss){return ss=ss|0,ss|0}function iL(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;return Ls=ms,ms=ms+16|0,Es=Ls,ws=Ls+4|0,is[Es>>2]=ss,Ns=m$()|0,Ts=Ns+24|0,ds=fv(ds,4)|0,is[ws>>2]=ds,ps=Ns+28|0,_s=is[ps>>2]|0,_s>>>0<(is[Ns+32>>2]|0)>>>0?(OM(_s,ss,ds),ds=(is[ps>>2]|0)+8|0,is[ps>>2]=ds):(aL(Ts,Es,ws),ds=is[ps>>2]|0),ms=Ls,(ds-(is[Ts>>2]|0)>>3)+-1|0}function OM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,is[ss+4>>2]=ps}function aL(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;if(Ls=ms,ms=ms+32|0,Es=Ls,ws=ss+4|0,Ts=((is[ws>>2]|0)-(is[ss>>2]|0)>>3)+1|0,_s=oL(ss)|0,_s>>>0<Ts>>>0)Wv(ss);else{Ns=is[ss>>2]|0,Bs=(is[ss+8>>2]|0)-Ns|0,Gs=Bs>>2,sL(Es,Bs>>3>>>0<_s>>>1>>>0?Gs>>>0<Ts>>>0?Ts:Gs:_s,(is[ws>>2]|0)-Ns>>3,ss+8|0),Ts=Es+8|0,OM(is[Ts>>2]|0,is[ds>>2]|0,is[ps>>2]|0),is[Ts>>2]=(is[Ts>>2]|0)+8,uL(ss,Es),lL(Es),ms=Ls;return}}function oL(ss){return ss=ss|0,536870911}function sL(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>536870911)yv();else{Es=K0(ds<<3)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps<<3)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds<<3)}function uL(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(0-(Es>>3)<<3)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function lL(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~((_s+-8-ds|0)>>>3)<<3)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function NM(ss){ss=ss|0,dL(ss)}function fL(ss){ss=ss|0,cL(ss+24|0)}function cL(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function dL(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,1,23,ds,lM()|0,1),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function hL(ss,ds){ss=ss|0,ds=ds|0,pL(is[(vL(ss)|0)>>2]|0,ds)}function vL(ss){return ss=ss|0,(is[(m$()|0)+24>>2]|0)+(ss<<3)|0}function pL(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;ps=ms,ms=ms+16|0,_s=ps,n$(_s,ds),ds=i$(_s,ds)|0,Y2[ss&127](ds),ms=ps}function gL(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0;ws=is[ss>>2]|0,Es=y$()|0,ss=mL(ps)|0,Qv(ws,ds,Es,ss,yL(ps,_s)|0,_s)}function y$(){var ss=0,ds=0;if(as[7808]|0||(RM(9972),Z0(45,9972,$s|0)|0,ds=7808,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(9972)|0)){ss=9972,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));RM(9972)}return 9972}function mL(ss){return ss=ss|0,ss|0}function yL(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;return Ls=ms,ms=ms+16|0,Es=Ls,ws=Ls+4|0,is[Es>>2]=ss,Ns=y$()|0,Ts=Ns+24|0,ds=fv(ds,4)|0,is[ws>>2]=ds,ps=Ns+28|0,_s=is[ps>>2]|0,_s>>>0<(is[Ns+32>>2]|0)>>>0?(DM(_s,ss,ds),ds=(is[ps>>2]|0)+8|0,is[ps>>2]=ds):(_L(Ts,Es,ws),ds=is[ps>>2]|0),ms=Ls,(ds-(is[Ts>>2]|0)>>3)+-1|0}function DM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,is[ss+4>>2]=ps}function _L(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;if(Ls=ms,ms=ms+32|0,Es=Ls,ws=ss+4|0,Ts=((is[ws>>2]|0)-(is[ss>>2]|0)>>3)+1|0,_s=xL(ss)|0,_s>>>0<Ts>>>0)Wv(ss);else{Ns=is[ss>>2]|0,Bs=(is[ss+8>>2]|0)-Ns|0,Gs=Bs>>2,EL(Es,Bs>>3>>>0<_s>>>1>>>0?Gs>>>0<Ts>>>0?Ts:Gs:_s,(is[ws>>2]|0)-Ns>>3,ss+8|0),Ts=Es+8|0,DM(is[Ts>>2]|0,is[ds>>2]|0,is[ps>>2]|0),is[Ts>>2]=(is[Ts>>2]|0)+8,SL(ss,Es),wL(Es),ms=Ls;return}}function xL(ss){return ss=ss|0,536870911}function EL(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>536870911)yv();else{Es=K0(ds<<3)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps<<3)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds<<3)}function SL(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(0-(Es>>3)<<3)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function wL(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~((_s+-8-ds|0)>>>3)<<3)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function RM(ss){ss=ss|0,bL(ss)}function $L(ss){ss=ss|0,ML(ss+24|0)}function ML(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function bL(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,1,9,ds,CL()|0,1),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function CL(){return 1348}function TL(ss,ds){return ss=ss|0,ds=ds|0,IL(is[(AL(ss)|0)>>2]|0,ds)|0}function AL(ss){return ss=ss|0,(is[(y$()|0)+24>>2]|0)+(ss<<3)|0}function IL(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;return ps=ms,ms=ms+16|0,_s=ps,BM(_s,ds),ds=FM(_s,ds)|0,ds=JE(hy[ss&31](ds)|0)|0,ms=ps,ds|0}function BM(ss,ds){ss=ss|0,ds=ds|0}function FM(ss,ds){return ss=ss|0,ds=ds|0,kL(ds)|0}function kL(ss){return ss=ss|0,ss|0}function LL(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0;ws=is[ss>>2]|0,Es=_$()|0,ss=PL(ps)|0,Qv(ws,ds,Es,ss,OL(ps,_s)|0,_s)}function _$(){var ss=0,ds=0;if(as[7816]|0||(jM(10008),Z0(46,10008,$s|0)|0,ds=7816,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(10008)|0)){ss=10008,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));jM(10008)}return 10008}function PL(ss){return ss=ss|0,ss|0}function OL(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;return Ls=ms,ms=ms+16|0,Es=Ls,ws=Ls+4|0,is[Es>>2]=ss,Ns=_$()|0,Ts=Ns+24|0,ds=fv(ds,4)|0,is[ws>>2]=ds,ps=Ns+28|0,_s=is[ps>>2]|0,_s>>>0<(is[Ns+32>>2]|0)>>>0?(GM(_s,ss,ds),ds=(is[ps>>2]|0)+8|0,is[ps>>2]=ds):(NL(Ts,Es,ws),ds=is[ps>>2]|0),ms=Ls,(ds-(is[Ts>>2]|0)>>3)+-1|0}function GM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,is[ss+4>>2]=ps}function NL(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;if(Ls=ms,ms=ms+32|0,Es=Ls,ws=ss+4|0,Ts=((is[ws>>2]|0)-(is[ss>>2]|0)>>3)+1|0,_s=DL(ss)|0,_s>>>0<Ts>>>0)Wv(ss);else{Ns=is[ss>>2]|0,Bs=(is[ss+8>>2]|0)-Ns|0,Gs=Bs>>2,RL(Es,Bs>>3>>>0<_s>>>1>>>0?Gs>>>0<Ts>>>0?Ts:Gs:_s,(is[ws>>2]|0)-Ns>>3,ss+8|0),Ts=Es+8|0,GM(is[Ts>>2]|0,is[ds>>2]|0,is[ps>>2]|0),is[Ts>>2]=(is[Ts>>2]|0)+8,BL(ss,Es),FL(Es),ms=Ls;return}}function DL(ss){return ss=ss|0,536870911}function RL(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>536870911)yv();else{Es=K0(ds<<3)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps<<3)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds<<3)}function BL(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(0-(Es>>3)<<3)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function FL(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~((_s+-8-ds|0)>>>3)<<3)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function jM(ss){ss=ss|0,UL(ss)}function jL(ss){ss=ss|0,zL(ss+24|0)}function zL(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function UL(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,1,15,ds,nM()|0,0),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function HL(ss){return ss=ss|0,VL(is[(WL(ss)|0)>>2]|0)|0}function WL(ss){return ss=ss|0,(is[(_$()|0)+24>>2]|0)+(ss<<3)|0}function VL(ss){return ss=ss|0,JE(vS[ss&7]()|0)|0}function YL(){var ss=0;return as[7832]|0||(tP(10052),Z0(25,10052,$s|0)|0,ss=7832,is[ss>>2]=1,is[ss+4>>2]=0),10052}function XL(ss,ds){ss=ss|0,ds=ds|0,is[ss>>2]=qL()|0,is[ss+4>>2]=KL()|0,is[ss+12>>2]=ds,is[ss+8>>2]=ZL()|0,is[ss+32>>2]=2}function qL(){return 11709}function KL(){return 1188}function ZL(){return tS()|0}function QL(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,(Cm(_s,896)|0)==512?ps|0&&(JL(ps),y0(ps)):ds|0&&(mE(ds),y0(ds))}function Cm(ss,ds){return ss=ss|0,ds=ds|0,ds&ss|0}function JL(ss){ss=ss|0,ss=is[ss+4>>2]|0,ss|0&&Am(ss)}function tS(){var ss=0;return as[7824]|0||(is[2511]=eP()|0,is[2512]=0,ss=7824,is[ss>>2]=1,is[ss+4>>2]=0),10044}function eP(){return 0}function tP(ss){ss=ss|0,S0(ss)}function rP(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0,ws=0;ds=ms,ms=ms+32|0,ps=ds+24|0,ws=ds+16|0,Es=ds+8|0,_s=ds,nP(ss,4827),iP(ss,4834,3)|0,aP(ss,3682,47)|0,is[ws>>2]=9,is[ws+4>>2]=0,is[ps>>2]=is[ws>>2],is[ps+4>>2]=is[ws+4>>2],oP(ss,4841,ps)|0,is[Es>>2]=1,is[Es+4>>2]=0,is[ps>>2]=is[Es>>2],is[ps+4>>2]=is[Es+4>>2],sP(ss,4871,ps)|0,is[_s>>2]=10,is[_s+4>>2]=0,is[ps>>2]=is[_s>>2],is[ps+4>>2]=is[_s+4>>2],uP(ss,4891,ps)|0,ms=ds}function nP(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=GO()|0,is[ss>>2]=ps,jO(ps,ds),Tm(is[ss>>2]|0)}function iP(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,$O(ss,Zv(ds)|0,ps,0),ss|0}function aP(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,lO(ss,Zv(ds)|0,ps,0),ss|0}function oP(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],HP(ss,ds,Es),ms=_s,ss|0}function sP(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],MP(ss,ds,Es),ms=_s,ss|0}function uP(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=is[ps+4>>2]|0,is[ws>>2]=is[ps>>2],is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],lP(ss,ds,Es),ms=_s,ss|0}function lP(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],fP(ss,ps,Es,1),ms=_s}function fP(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=x$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=cP(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,dP(ws,_s)|0,_s),ms=Es}function x$(){var ss=0,ds=0;if(as[7840]|0||(UM(10100),Z0(48,10100,$s|0)|0,ds=7840,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(10100)|0)){ss=10100,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));UM(10100)}return 10100}function cP(ss){return ss=ss|0,0}function dP(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=x$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],zM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(hP(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function zM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function hP(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=vP(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,pP(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],zM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,gP(ss,Ls),mP(Ls),ms=Gs;return}}function vP(ss){return ss=ss|0,357913941}function pP(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function gP(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function mP(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function UM(ss){ss=ss|0,xP(ss)}function yP(ss){ss=ss|0,_P(ss+24|0)}function _P(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function xP(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,6,ds,EP()|0,1),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function EP(){return 1364}function SP(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;return _s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=wP(ss)|0,ss=is[Ts+4>>2]|0,is[ws>>2]=is[Ts>>2],is[ws+4>>2]=ss,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],ps=$P(ds,Es,ps)|0,ms=_s,ps|0}function wP(ss){return ss=ss|0,(is[(x$()|0)+24>>2]|0)+(ss*12|0)|0}function $P(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0;return ws=ms,ms=ms+16|0,Es=ws,_s=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(_s=is[(is[ss>>2]|0)+_s>>2]|0),Dv(Es,ps),Es=_d(Es,ps)|0,Es=Fl(q$[_s&15](ss,Es)|0)|0,ms=ws,Es|0}function MP(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],bP(ss,ps,Es,0),ms=_s}function bP(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=E$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=CP(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,TP(ws,_s)|0,_s),ms=Es}function E$(){var ss=0,ds=0;if(as[7848]|0||(WM(10136),Z0(49,10136,$s|0)|0,ds=7848,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(10136)|0)){ss=10136,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));WM(10136)}return 10136}function CP(ss){return ss=ss|0,0}function TP(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=E$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],HM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(AP(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function HM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function AP(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=IP(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,kP(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],HM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,LP(ss,Ls),PP(Ls),ms=Gs;return}}function IP(ss){return ss=ss|0,357913941}function kP(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function LP(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function PP(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function WM(ss){ss=ss|0,DP(ss)}function OP(ss){ss=ss|0,NP(ss+24|0)}function NP(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function DP(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,9,ds,RP()|0,1),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function RP(){return 1372}function BP(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps;var _s=0,Es=0,ws=0,Ts=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ts=FP(ss)|0,ss=is[Ts+4>>2]|0,is[ws>>2]=is[Ts>>2],is[ws+4>>2]=ss,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],GP(ds,Es,ps),ms=_s}function FP(ss){return ss=ss|0,(is[(E$()|0)+24>>2]|0)+(ss*12|0)|0}function GP(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps;var _s=0,Es=0,ws=0,Ts=D0;ws=ms,ms=ms+16|0,Es=ws,_s=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(_s=is[(is[ss>>2]|0)+_s>>2]|0),jP(Es,ps),Ts=Os(zP(Es,ps)),iT[_s&1](ss,Ts),ms=ws}function jP(ss,ds){ss=ss|0,ds=+ds}function zP(ss,ds){return ss=ss|0,ds=+ds,Os(UP(ds))}function UP(ss){return ss=+ss,Os(ss)}function HP(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,Es=_s+8|0,ws=_s,Ls=is[ps>>2]|0,Ts=is[ps+4>>2]|0,ps=Zv(ds)|0,is[ws>>2]=Ls,is[ws+4>>2]=Ts,is[Es>>2]=is[ws>>2],is[Es+4>>2]=is[ws+4>>2],WP(ss,ps,Es,0),ms=_s}function WP(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;Es=ms,ms=ms+32|0,ws=Es+16|0,Bs=Es+8|0,Ls=Es,Gs=is[ps>>2]|0,Ns=is[ps+4>>2]|0,Ts=is[ss>>2]|0,ss=S$()|0,is[Bs>>2]=Gs,is[Bs+4>>2]=Ns,is[ws>>2]=is[Bs>>2],is[ws+4>>2]=is[Bs+4>>2],ps=VP(ws)|0,is[Ls>>2]=Gs,is[Ls+4>>2]=Ns,is[ws>>2]=is[Ls>>2],is[ws+4>>2]=is[Ls+4>>2],Qv(Ts,ds,ss,ps,YP(ws,_s)|0,_s),ms=Es}function S$(){var ss=0,ds=0;if(as[7856]|0||(YM(10172),Z0(50,10172,$s|0)|0,ds=7856,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(10172)|0)){ss=10172,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));YM(10172)}return 10172}function VP(ss){return ss=ss|0,0}function YP(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;return Bs=ms,ms=ms+32|0,Es=Bs+24|0,Ts=Bs+16|0,Ls=Bs,Ns=Bs+8|0,ws=is[ss>>2]|0,_s=is[ss+4>>2]|0,is[Ls>>2]=ws,is[Ls+4>>2]=_s,Hs=S$()|0,Gs=Hs+24|0,ss=fv(ds,4)|0,is[Ns>>2]=ss,ds=Hs+28|0,ps=is[ds>>2]|0,ps>>>0<(is[Hs+32>>2]|0)>>>0?(is[Ts>>2]=ws,is[Ts+4>>2]=_s,is[Es>>2]=is[Ts>>2],is[Es+4>>2]=is[Ts+4>>2],VM(ps,Es,ss),ss=(is[ds>>2]|0)+12|0,is[ds>>2]=ss):(XP(Gs,Ls,Ns),ss=is[ds>>2]|0),ms=Bs,((ss-(is[Gs>>2]|0)|0)/12|0)+-1|0}function VM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=is[ds+4>>2]|0,is[ss>>2]=is[ds>>2],is[ss+4>>2]=_s,is[ss+8>>2]=ps}function XP(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;if(Gs=ms,ms=ms+48|0,_s=Gs+32|0,Ts=Gs+24|0,Ls=Gs,Ns=ss+4|0,Es=(((is[Ns>>2]|0)-(is[ss>>2]|0)|0)/12|0)+1|0,ws=qP(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Bs=is[ss>>2]|0,yl=((is[ss+8>>2]|0)-Bs|0)/12|0,Hs=yl<<1,KP(Ls,yl>>>0<ws>>>1>>>0?Hs>>>0<Es>>>0?Es:Hs:ws,((is[Ns>>2]|0)-Bs|0)/12|0,ss+8|0),Ns=Ls+8|0,ws=is[Ns>>2]|0,Es=is[ds+4>>2]|0,ps=is[ps>>2]|0,is[Ts>>2]=is[ds>>2],is[Ts+4>>2]=Es,is[_s>>2]=is[Ts>>2],is[_s+4>>2]=is[Ts+4>>2],VM(ws,_s,ps),is[Ns>>2]=(is[Ns>>2]|0)+12,ZP(ss,Ls),QP(Ls),ms=Gs;return}}function qP(ss){return ss=ss|0,357913941}function KP(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>357913941)yv();else{Es=K0(ds*12|0)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps*12|0)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds*12|0)}function ZP(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(((Es|0)/-12|0)*12|0)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function QP(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~(((_s+-12-ds|0)>>>0)/12|0)*12|0)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function YM(ss){ss=ss|0,tO(ss)}function JP(ss){ss=ss|0,eO(ss+24|0)}function eO(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~(((ds+-12-_s|0)>>>0)/12|0)*12|0)),y0(ps))}function tO(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,2,3,ds,rO()|0,2),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function rO(){return 1380}function nO(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0;Es=ms,ms=ms+16|0,ws=Es+8|0,Ts=Es,Ls=iO(ss)|0,ss=is[Ls+4>>2]|0,is[Ts>>2]=is[Ls>>2],is[Ts+4>>2]=ss,is[ws>>2]=is[Ts>>2],is[ws+4>>2]=is[Ts+4>>2],aO(ds,ws,ps,_s),ms=Es}function iO(ss){return ss=ss|0,(is[(S$()|0)+24>>2]|0)+(ss*12|0)|0}function aO(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0;Ls=ms,ms=ms+16|0,ws=Ls+1|0,Ts=Ls,Es=is[ds>>2]|0,ds=is[ds+4>>2]|0,ss=ss+(ds>>1)|0,ds&1&&(Es=is[(is[ss>>2]|0)+Es>>2]|0),Dv(ws,ps),ws=_d(ws,ps)|0,oO(Ts,_s),Ts=sO(Ts,_s)|0,$x[Es&15](ss,ws,Ts),ms=Ls}function oO(ss,ds){ss=ss|0,ds=ds|0}function sO(ss,ds){return ss=ss|0,ds=ds|0,uO(ds)|0}function uO(ss){return ss=ss|0,(ss|0)!=0|0}function lO(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0;ws=is[ss>>2]|0,Es=w$()|0,ss=fO(ps)|0,Qv(ws,ds,Es,ss,cO(ps,_s)|0,_s)}function w$(){var ss=0,ds=0;if(as[7864]|0||(qM(10208),Z0(51,10208,$s|0)|0,ds=7864,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(10208)|0)){ss=10208,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));qM(10208)}return 10208}function fO(ss){return ss=ss|0,ss|0}function cO(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;return Ls=ms,ms=ms+16|0,Es=Ls,ws=Ls+4|0,is[Es>>2]=ss,Ns=w$()|0,Ts=Ns+24|0,ds=fv(ds,4)|0,is[ws>>2]=ds,ps=Ns+28|0,_s=is[ps>>2]|0,_s>>>0<(is[Ns+32>>2]|0)>>>0?(XM(_s,ss,ds),ds=(is[ps>>2]|0)+8|0,is[ps>>2]=ds):(dO(Ts,Es,ws),ds=is[ps>>2]|0),ms=Ls,(ds-(is[Ts>>2]|0)>>3)+-1|0}function XM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,is[ss+4>>2]=ps}function dO(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;if(Ls=ms,ms=ms+32|0,Es=Ls,ws=ss+4|0,Ts=((is[ws>>2]|0)-(is[ss>>2]|0)>>3)+1|0,_s=hO(ss)|0,_s>>>0<Ts>>>0)Wv(ss);else{Ns=is[ss>>2]|0,Bs=(is[ss+8>>2]|0)-Ns|0,Gs=Bs>>2,vO(Es,Bs>>3>>>0<_s>>>1>>>0?Gs>>>0<Ts>>>0?Ts:Gs:_s,(is[ws>>2]|0)-Ns>>3,ss+8|0),Ts=Es+8|0,XM(is[Ts>>2]|0,is[ds>>2]|0,is[ps>>2]|0),is[Ts>>2]=(is[Ts>>2]|0)+8,pO(ss,Es),gO(Es),ms=Ls;return}}function hO(ss){return ss=ss|0,536870911}function vO(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>536870911)yv();else{Es=K0(ds<<3)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps<<3)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds<<3)}function pO(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(0-(Es>>3)<<3)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function gO(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~((_s+-8-ds|0)>>>3)<<3)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function qM(ss){ss=ss|0,_O(ss)}function mO(ss){ss=ss|0,yO(ss+24|0)}function yO(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function _O(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,1,24,ds,xO()|0,1),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function xO(){return 1392}function EO(ss,ds){ss=ss|0,ds=ds|0,wO(is[(SO(ss)|0)>>2]|0,ds)}function SO(ss){return ss=ss|0,(is[(w$()|0)+24>>2]|0)+(ss<<3)|0}function wO(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;ps=ms,ms=ms+16|0,_s=ps,BM(_s,ds),ds=FM(_s,ds)|0,Y2[ss&127](ds),ms=ps}function $O(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0;ws=is[ss>>2]|0,Es=$$()|0,ss=MO(ps)|0,Qv(ws,ds,Es,ss,bO(ps,_s)|0,_s)}function $$(){var ss=0,ds=0;if(as[7872]|0||(ZM(10244),Z0(52,10244,$s|0)|0,ds=7872,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(10244)|0)){ss=10244,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));ZM(10244)}return 10244}function MO(ss){return ss=ss|0,ss|0}function bO(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;return Ls=ms,ms=ms+16|0,Es=Ls,ws=Ls+4|0,is[Es>>2]=ss,Ns=$$()|0,Ts=Ns+24|0,ds=fv(ds,4)|0,is[ws>>2]=ds,ps=Ns+28|0,_s=is[ps>>2]|0,_s>>>0<(is[Ns+32>>2]|0)>>>0?(KM(_s,ss,ds),ds=(is[ps>>2]|0)+8|0,is[ps>>2]=ds):(CO(Ts,Es,ws),ds=is[ps>>2]|0),ms=Ls,(ds-(is[Ts>>2]|0)>>3)+-1|0}function KM(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,is[ss+4>>2]=ps}function CO(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;if(Ls=ms,ms=ms+32|0,Es=Ls,ws=ss+4|0,Ts=((is[ws>>2]|0)-(is[ss>>2]|0)>>3)+1|0,_s=TO(ss)|0,_s>>>0<Ts>>>0)Wv(ss);else{Ns=is[ss>>2]|0,Bs=(is[ss+8>>2]|0)-Ns|0,Gs=Bs>>2,AO(Es,Bs>>3>>>0<_s>>>1>>>0?Gs>>>0<Ts>>>0?Ts:Gs:_s,(is[ws>>2]|0)-Ns>>3,ss+8|0),Ts=Es+8|0,KM(is[Ts>>2]|0,is[ds>>2]|0,is[ps>>2]|0),is[Ts>>2]=(is[Ts>>2]|0)+8,IO(ss,Es),kO(Es),ms=Ls;return}}function TO(ss){return ss=ss|0,536870911}function AO(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>536870911)yv();else{Es=K0(ds<<3)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps<<3)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds<<3)}function IO(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(0-(Es>>3)<<3)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function kO(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~((_s+-8-ds|0)>>>3)<<3)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function ZM(ss){ss=ss|0,OO(ss)}function LO(ss){ss=ss|0,PO(ss+24|0)}function PO(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function OO(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,1,16,ds,NO()|0,0),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function NO(){return 1400}function DO(ss){return ss=ss|0,BO(is[(RO(ss)|0)>>2]|0)|0}function RO(ss){return ss=ss|0,(is[($$()|0)+24>>2]|0)+(ss<<3)|0}function BO(ss){return ss=ss|0,FO(vS[ss&7]()|0)|0}function FO(ss){return ss=ss|0,ss|0}function GO(){var ss=0;return as[7880]|0||(YO(10280),Z0(25,10280,$s|0)|0,ss=7880,is[ss>>2]=1,is[ss+4>>2]=0),10280}function jO(ss,ds){ss=ss|0,ds=ds|0,is[ss>>2]=zO()|0,is[ss+4>>2]=UO()|0,is[ss+12>>2]=ds,is[ss+8>>2]=HO()|0,is[ss+32>>2]=4}function zO(){return 11711}function UO(){return 1356}function HO(){return tS()|0}function WO(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,(Cm(_s,896)|0)==512?ps|0&&(VO(ps),y0(ps)):ds|0&&(hE(ds),y0(ds))}function VO(ss){ss=ss|0,ss=is[ss+4>>2]|0,ss|0&&Am(ss)}function YO(ss){ss=ss|0,S0(ss)}function XO(ss){ss=ss|0,qO(ss,4920),KO(ss)|0,ZO(ss)|0}function qO(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=_M()|0,is[ss>>2]=ps,yN(ps,ds),Tm(is[ss>>2]|0)}function KO(ss){ss=ss|0;var ds=0;return ds=is[ss>>2]|0,sy(ds,uN()|0),ss|0}function ZO(ss){ss=ss|0;var ds=0;return ds=is[ss>>2]|0,sy(ds,QO()|0),ss|0}function QO(){var ss=0;return as[7888]|0||(QM(10328),Z0(53,10328,$s|0)|0,ss=7888,is[ss>>2]=1,is[ss+4>>2]=0),Tv(10328)|0||QM(10328),10328}function sy(ss,ds){ss=ss|0,ds=ds|0,Qv(ss,0,ds,0,0,0)}function QM(ss){ss=ss|0,tN(ss),uy(ss,10)}function JO(ss){ss=ss|0,eN(ss+24|0)}function eN(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function tN(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,5,1,ds,aN()|0,2),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function rN(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps,nN(ss,ds,ps)}function uy(ss,ds){ss=ss|0,ds=ds|0,is[ss+20>>2]=ds}function nN(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+16|0,ws=_s+8|0,Ls=_s+13|0,Es=_s,Ts=_s+12|0,Dv(Ls,ds),is[ws>>2]=_d(Ls,ds)|0,dv(Ts,ps),vs[Es>>3]=+up(Ts,ps),iN(ss,ws,Es),ms=_s}function iN(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,jy(ss+8|0,is[ds>>2]|0,+vs[ps>>3]),as[ss+24>>0]=1}function aN(){return 1404}function oN(ss,ds){return ss=ss|0,ds=+ds,sN(ss,ds)|0}function sN(ss,ds){ss=ss|0,ds=+ds;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;return _s=ms,ms=ms+16|0,ws=_s+4|0,Ts=_s+8|0,Ls=_s,Es=D1(8)|0,ps=Es,Ns=K0(16)|0,Dv(ws,ss),ss=_d(ws,ss)|0,dv(Ts,ds),jy(Ns,ss,+up(Ts,ds)),Ts=ps+4|0,is[Ts>>2]=Ns,ss=K0(8)|0,Ts=is[Ts>>2]|0,is[Ls>>2]=0,is[ws>>2]=is[Ls>>2],l$(ss,Ts,ws),is[Es>>2]=ss,ms=_s,ps|0}function uN(){var ss=0;return as[7896]|0||(JM(10364),Z0(54,10364,$s|0)|0,ss=7896,is[ss>>2]=1,is[ss+4>>2]=0),Tv(10364)|0||JM(10364),10364}function JM(ss){ss=ss|0,cN(ss),uy(ss,55)}function lN(ss){ss=ss|0,fN(ss+24|0)}function fN(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function cN(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,5,4,ds,pN()|0,0),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function dN(ss){ss=ss|0,hN(ss)}function hN(ss){ss=ss|0,vN(ss)}function vN(ss){ss=ss|0,_b(ss+8|0),as[ss+24>>0]=1}function _b(ss){ss=ss|0,is[ss>>2]=0,vs[ss+8>>3]=0}function pN(){return 1424}function gN(){return mN()|0}function mN(){var ss=0,ds=0,ps=0,_s=0,Es=0,ws=0,Ts=0;return ds=ms,ms=ms+16|0,Es=ds+4|0,Ts=ds,ps=D1(8)|0,ss=ps,_s=K0(16)|0,_b(_s),ws=ss+4|0,is[ws>>2]=_s,_s=K0(8)|0,ws=is[ws>>2]|0,is[Ts>>2]=0,is[Es>>2]=is[Ts>>2],l$(_s,ws,Es),is[ps>>2]=_s,ms=ds,ss|0}function yN(ss,ds){ss=ss|0,ds=ds|0,is[ss>>2]=_N()|0,is[ss+4>>2]=xN()|0,is[ss+12>>2]=ds,is[ss+8>>2]=EN()|0,is[ss+32>>2]=5}function _N(){return 11710}function xN(){return 1416}function EN(){return rS()|0}function SN(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,(Cm(_s,896)|0)==512?ps|0&&(wN(ps),y0(ps)):ds|0&&y0(ds)}function wN(ss){ss=ss|0,ss=is[ss+4>>2]|0,ss|0&&Am(ss)}function rS(){var ss=0;return as[7904]|0||(is[2600]=$N()|0,is[2601]=0,ss=7904,is[ss>>2]=1,is[ss+4>>2]=0),10400}function $N(){return is[357]|0}function MN(ss){ss=ss|0,bN(ss,4926),CN(ss)|0}function bN(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=Ql()|0,is[ss>>2]=ps,BN(ps,ds),Tm(is[ss>>2]|0)}function CN(ss){ss=ss|0;var ds=0;return ds=is[ss>>2]|0,sy(ds,TN()|0),ss|0}function TN(){var ss=0;return as[7912]|0||(eC(10412),Z0(56,10412,$s|0)|0,ss=7912,is[ss>>2]=1,is[ss+4>>2]=0),Tv(10412)|0||eC(10412),10412}function eC(ss){ss=ss|0,kN(ss),uy(ss,57)}function AN(ss){ss=ss|0,IN(ss+24|0)}function IN(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function kN(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,5,5,ds,NN()|0,0),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function LN(ss){ss=ss|0,PN(ss)}function PN(ss){ss=ss|0,ON(ss)}function ON(ss){ss=ss|0;var ds=0,ps=0;ds=ss+8|0,ps=ds+48|0;do is[ds>>2]=0,ds=ds+4|0;while((ds|0)<(ps|0));as[ss+56>>0]=1}function NN(){return 1432}function DN(){return RN()|0}function RN(){var ss=0,ds=0,ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0;Ts=ms,ms=ms+16|0,ss=Ts+4|0,ds=Ts,ps=D1(8)|0,_s=ps,Es=K0(48)|0,ws=Es,Ls=ws+48|0;do is[ws>>2]=0,ws=ws+4|0;while((ws|0)<(Ls|0));return ws=_s+4|0,is[ws>>2]=Es,Ls=K0(8)|0,ws=is[ws>>2]|0,is[ds>>2]=0,is[ss>>2]=is[ds>>2],O0(Ls,ws,ss),is[ps>>2]=Ls,ms=Ts,_s|0}function BN(ss,ds){ss=ss|0,ds=ds|0,is[ss>>2]=FN()|0,is[ss+4>>2]=GN()|0,is[ss+12>>2]=ds,is[ss+8>>2]=jN()|0,is[ss+32>>2]=6}function FN(){return 11704}function GN(){return 1436}function jN(){return rS()|0}function zN(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,(Cm(_s,896)|0)==512?ps|0&&(UN(ps),y0(ps)):ds|0&&y0(ds)}function UN(ss){ss=ss|0,ss=is[ss+4>>2]|0,ss|0&&Am(ss)}function HN(ss){ss=ss|0,WN(ss,4933),VN(ss)|0,YN(ss)|0}function WN(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=mD()|0,is[ss>>2]=ps,yD(ps,ds),Tm(is[ss>>2]|0)}function VN(ss){ss=ss|0;var ds=0;return ds=is[ss>>2]|0,sy(ds,sD()|0),ss|0}function YN(ss){ss=ss|0;var ds=0;return ds=is[ss>>2]|0,sy(ds,XN()|0),ss|0}function XN(){var ss=0;return as[7920]|0||(tC(10452),Z0(58,10452,$s|0)|0,ss=7920,is[ss>>2]=1,is[ss+4>>2]=0),Tv(10452)|0||tC(10452),10452}function tC(ss){ss=ss|0,ZN(ss),uy(ss,1)}function qN(ss){ss=ss|0,KN(ss+24|0)}function KN(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function ZN(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,5,1,ds,tD()|0,2),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function QN(ss,ds,ps){ss=ss|0,ds=+ds,ps=+ps,JN(ss,ds,ps)}function JN(ss,ds,ps){ss=ss|0,ds=+ds,ps=+ps;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+32|0,ws=_s+8|0,Ls=_s+17|0,Es=_s,Ts=_s+16|0,dv(Ls,ds),vs[ws>>3]=+up(Ls,ds),dv(Ts,ps),vs[Es>>3]=+up(Ts,ps),eD(ss,ws,Es),ms=_s}function eD(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,rC(ss+8|0,+vs[ds>>3],+vs[ps>>3]),as[ss+24>>0]=1}function rC(ss,ds,ps){ss=ss|0,ds=+ds,ps=+ps,vs[ss>>3]=ds,vs[ss+8>>3]=ps}function tD(){return 1472}function rD(ss,ds){return ss=+ss,ds=+ds,nD(ss,ds)|0}function nD(ss,ds){ss=+ss,ds=+ds;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;return _s=ms,ms=ms+16|0,Ts=_s+4|0,Ls=_s+8|0,Ns=_s,Es=D1(8)|0,ps=Es,ws=K0(16)|0,dv(Ts,ss),ss=+up(Ts,ss),dv(Ls,ds),rC(ws,ss,+up(Ls,ds)),Ls=ps+4|0,is[Ls>>2]=ws,ws=K0(8)|0,Ls=is[Ls>>2]|0,is[Ns>>2]=0,is[Ts>>2]=is[Ns>>2],nC(ws,Ls,Ts),is[Es>>2]=ws,ms=_s,ps|0}function nC(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,ps=K0(16)|0,is[ps+4>>2]=0,is[ps+8>>2]=0,is[ps>>2]=1452,is[ps+12>>2]=ds,is[ss+4>>2]=ps}function iD(ss){ss=ss|0,o_(ss),y0(ss)}function aD(ss){ss=ss|0,ss=is[ss+12>>2]|0,ss|0&&y0(ss)}function oD(ss){ss=ss|0,y0(ss)}function sD(){var ss=0;return as[7928]|0||(iC(10488),Z0(59,10488,$s|0)|0,ss=7928,is[ss>>2]=1,is[ss+4>>2]=0),Tv(10488)|0||iC(10488),10488}function iC(ss){ss=ss|0,fD(ss),uy(ss,60)}function uD(ss){ss=ss|0,lD(ss+24|0)}function lD(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function fD(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,5,6,ds,vD()|0,0),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function cD(ss){ss=ss|0,dD(ss)}function dD(ss){ss=ss|0,hD(ss)}function hD(ss){ss=ss|0,aC(ss+8|0),as[ss+24>>0]=1}function aC(ss){ss=ss|0,is[ss>>2]=0,is[ss+4>>2]=0,is[ss+8>>2]=0,is[ss+12>>2]=0}function vD(){return 1492}function pD(){return gD()|0}function gD(){var ss=0,ds=0,ps=0,_s=0,Es=0,ws=0,Ts=0;return ds=ms,ms=ms+16|0,Es=ds+4|0,Ts=ds,ps=D1(8)|0,ss=ps,_s=K0(16)|0,aC(_s),ws=ss+4|0,is[ws>>2]=_s,_s=K0(8)|0,ws=is[ws>>2]|0,is[Ts>>2]=0,is[Es>>2]=is[Ts>>2],nC(_s,ws,Es),is[ps>>2]=_s,ms=ds,ss|0}function mD(){var ss=0;return as[7936]|0||($D(10524),Z0(25,10524,$s|0)|0,ss=7936,is[ss>>2]=1,is[ss+4>>2]=0),10524}function yD(ss,ds){ss=ss|0,ds=ds|0,is[ss>>2]=_D()|0,is[ss+4>>2]=xD()|0,is[ss+12>>2]=ds,is[ss+8>>2]=ED()|0,is[ss+32>>2]=7}function _D(){return 11700}function xD(){return 1484}function ED(){return rS()|0}function SD(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,(Cm(_s,896)|0)==512?ps|0&&(wD(ps),y0(ps)):ds|0&&y0(ds)}function wD(ss){ss=ss|0,ss=is[ss+4>>2]|0,ss|0&&Am(ss)}function $D(ss){ss=ss|0,S0(ss)}function MD(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,ss=Zv(ds)|0,ds=bD(ps)|0,ps=CD(ps,0)|0,i5(ss,ds,ps,M$()|0,0)}function bD(ss){return ss=ss|0,ss|0}function CD(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;return Ls=ms,ms=ms+16|0,Es=Ls,ws=Ls+4|0,is[Es>>2]=ss,Ns=M$()|0,Ts=Ns+24|0,ds=fv(ds,4)|0,is[ws>>2]=ds,ps=Ns+28|0,_s=is[ps>>2]|0,_s>>>0<(is[Ns+32>>2]|0)>>>0?(sC(_s,ss,ds),ds=(is[ps>>2]|0)+8|0,is[ps>>2]=ds):(OD(Ts,Es,ws),ds=is[ps>>2]|0),ms=Ls,(ds-(is[Ts>>2]|0)>>3)+-1|0}function M$(){var ss=0,ds=0;if(as[7944]|0||(oC(10568),Z0(61,10568,$s|0)|0,ds=7944,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(10568)|0)){ss=10568,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));oC(10568)}return 10568}function oC(ss){ss=ss|0,ID(ss)}function TD(ss){ss=ss|0,AD(ss+24|0)}function AD(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function ID(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,1,17,ds,oM()|0,0),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function kD(ss){return ss=ss|0,PD(is[(LD(ss)|0)>>2]|0)|0}function LD(ss){return ss=ss|0,(is[(M$()|0)+24>>2]|0)+(ss<<3)|0}function PD(ss){return ss=ss|0,eS(vS[ss&7]()|0)|0}function sC(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,is[ss+4>>2]=ps}function OD(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;if(Ls=ms,ms=ms+32|0,Es=Ls,ws=ss+4|0,Ts=((is[ws>>2]|0)-(is[ss>>2]|0)>>3)+1|0,_s=ND(ss)|0,_s>>>0<Ts>>>0)Wv(ss);else{Ns=is[ss>>2]|0,Bs=(is[ss+8>>2]|0)-Ns|0,Gs=Bs>>2,DD(Es,Bs>>3>>>0<_s>>>1>>>0?Gs>>>0<Ts>>>0?Ts:Gs:_s,(is[ws>>2]|0)-Ns>>3,ss+8|0),Ts=Es+8|0,sC(is[Ts>>2]|0,is[ds>>2]|0,is[ps>>2]|0),is[Ts>>2]=(is[Ts>>2]|0)+8,RD(ss,Es),BD(Es),ms=Ls;return}}function ND(ss){return ss=ss|0,536870911}function DD(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>536870911)yv();else{Es=K0(ds<<3)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps<<3)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds<<3)}function RD(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(0-(Es>>3)<<3)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function BD(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~((_s+-8-ds|0)>>>3)<<3)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function FD(){GD()}function GD(){jD(10604)}function jD(ss){ss=ss|0,zD(ss,4955)}function zD(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=UD()|0,is[ss>>2]=ps,HD(ps,ds),Tm(is[ss>>2]|0)}function UD(){var ss=0;return as[7952]|0||(JD(10612),Z0(25,10612,$s|0)|0,ss=7952,is[ss>>2]=1,is[ss+4>>2]=0),10612}function HD(ss,ds){ss=ss|0,ds=ds|0,is[ss>>2]=XD()|0,is[ss+4>>2]=qD()|0,is[ss+12>>2]=ds,is[ss+8>>2]=KD()|0,is[ss+32>>2]=8}function Tm(ss){ss=ss|0;var ds=0,ps=0;ds=ms,ms=ms+16|0,ps=ds,t_()|0,is[ps>>2]=ss,WD(10608,ps),ms=ds}function t_(){return as[11714]|0||(is[2652]=0,Z0(62,10608,$s|0)|0,as[11714]=1),10608}function WD(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=K0(8)|0,is[ps+4>>2]=is[ds>>2],is[ps>>2]=is[ss>>2],is[ss>>2]=ps}function VD(ss){ss=ss|0,YD(ss)}function YD(ss){ss=ss|0;var ds=0,ps=0;if(ds=is[ss>>2]|0,ds|0)do ps=ds,ds=is[ds>>2]|0,y0(ps);while(ds|0);is[ss>>2]=0}function XD(){return 11715}function qD(){return 1496}function KD(){return tS()|0}function ZD(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,(Cm(_s,896)|0)==512?ps|0&&(QD(ps),y0(ps)):ds|0&&y0(ds)}function QD(ss){ss=ss|0,ss=is[ss+4>>2]|0,ss|0&&Am(ss)}function JD(ss){ss=ss|0,S0(ss)}function t5(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;t_()|0,ps=is[2652]|0;e:do if(ps|0){for(;_s=is[ps+4>>2]|0,!(_s|0&&!(zC(b$(_s)|0,ss)|0));)if(ps=is[ps>>2]|0,!ps)break e;r5(_s,ds)}while(!1)}function b$(ss){return ss=ss|0,is[ss+12>>2]|0}function r5(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ss=ss+36|0,ps=is[ss>>2]|0,ps|0&&(pm(ps),y0(ps)),ps=K0(4)|0,x2(ps,ds),is[ss>>2]=ps}function C$(){return as[11716]|0||(is[2664]=0,Z0(63,10656,$s|0)|0,as[11716]=1),10656}function uC(){var ss=0;return as[11717]|0?ss=is[2665]|0:(n5(),is[2665]=1504,as[11717]=1,ss=1504),ss|0}function n5(){as[11740]|0||(as[11718]=fv(fv(8,0)|0,0)|0,as[11719]=fv(fv(0,0)|0,0)|0,as[11720]=fv(fv(0,16)|0,0)|0,as[11721]=fv(fv(8,0)|0,0)|0,as[11722]=fv(fv(0,0)|0,0)|0,as[11723]=fv(fv(8,0)|0,0)|0,as[11724]=fv(fv(0,0)|0,0)|0,as[11725]=fv(fv(8,0)|0,0)|0,as[11726]=fv(fv(0,0)|0,0)|0,as[11727]=fv(fv(8,0)|0,0)|0,as[11728]=fv(fv(0,0)|0,0)|0,as[11729]=fv(fv(0,0)|0,32)|0,as[11730]=fv(fv(0,0)|0,32)|0,as[11740]=1)}function lC(){return 1572}function i5(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0;var ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;ws=ms,ms=ms+32|0,Bs=ws+16|0,Gs=ws+12|0,Ns=ws+8|0,Ls=ws+4|0,Ts=ws,is[Bs>>2]=ss,is[Gs>>2]=ds,is[Ns>>2]=ps,is[Ls>>2]=_s,is[Ts>>2]=Es,C$()|0,a5(10656,Bs,Gs,Ns,Ls,Ts),ms=ws}function a5(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0;var Ts=0;Ts=K0(24)|0,qE(Ts+4|0,is[ds>>2]|0,is[ps>>2]|0,is[_s>>2]|0,is[Es>>2]|0,is[ws>>2]|0),is[Ts>>2]=is[ss>>2],is[ss>>2]=Ts}function fC(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0,Kl=0,Gl=0,Rl=0,a0=0,r0=0,f0=0;if(f0=ms,ms=ms+32|0,Gl=f0+20|0,Rl=f0+8|0,a0=f0+4|0,r0=f0,ds=is[ds>>2]|0,ds|0){Kl=Gl+4|0,Ns=Gl+8|0,Gs=Rl+4|0,Bs=Rl+8|0,Hs=Rl+8|0,yl=Gl+8|0;do{if(Ts=ds+4|0,Ls=T$(Ts)|0,Ls|0){if(Es=yx(Ls)|0,is[Gl>>2]=0,is[Kl>>2]=0,is[Ns>>2]=0,_s=(_x(Ls)|0)+1|0,o5(Gl,_s),_s|0)for(;_s=_s+-1|0,f2(Rl,is[Es>>2]|0),ws=is[Kl>>2]|0,ws>>>0<(is[yl>>2]|0)>>>0?(is[ws>>2]=is[Rl>>2],is[Kl>>2]=(is[Kl>>2]|0)+4):A$(Gl,Rl),_s;)Es=Es+4|0;_s=xx(Ls)|0,is[Rl>>2]=0,is[Gs>>2]=0,is[Bs>>2]=0;e:do if(is[_s>>2]|0)for(Es=0,ws=0;;){if((Es|0)==(ws|0)?s5(Rl,_s):(is[Es>>2]=is[_s>>2],is[Gs>>2]=(is[Gs>>2]|0)+4),_s=_s+4|0,!(is[_s>>2]|0))break e;Es=is[Gs>>2]|0,ws=is[Hs>>2]|0}while(!1);is[a0>>2]=nS(Ts)|0,is[r0>>2]=Tv(Ls)|0,u5(ps,ss,a0,r0,Gl,Rl),I$(Rl),V2(Gl)}ds=is[ds>>2]|0}while(ds|0)}ms=f0}function T$(ss){return ss=ss|0,is[ss+12>>2]|0}function yx(ss){return ss=ss|0,is[ss+12>>2]|0}function _x(ss){return ss=ss|0,is[ss+16>>2]|0}function o5(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0;Es=ms,ms=ms+32|0,ps=Es,_s=is[ss>>2]|0,(is[ss+8>>2]|0)-_s>>2>>>0<ds>>>0&&(yC(ps,ds,(is[ss+4>>2]|0)-_s>>2,ss+8|0),_C(ss,ps),xC(ps)),ms=Es}function A$(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0;if(Ts=ms,ms=ms+32|0,ps=Ts,_s=ss+4|0,Es=((is[_s>>2]|0)-(is[ss>>2]|0)>>2)+1|0,ws=mC(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Ls=is[ss>>2]|0,Gs=(is[ss+8>>2]|0)-Ls|0,Ns=Gs>>1,yC(ps,Gs>>2>>>0<ws>>>1>>>0?Ns>>>0<Es>>>0?Es:Ns:ws,(is[_s>>2]|0)-Ls>>2,ss+8|0),ws=ps+8|0,is[is[ws>>2]>>2]=is[ds>>2],is[ws>>2]=(is[ws>>2]|0)+4,_C(ss,ps),xC(ps),ms=Ts;return}}function xx(ss){return ss=ss|0,is[ss+8>>2]|0}function s5(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0;if(Ts=ms,ms=ms+32|0,ps=Ts,_s=ss+4|0,Es=((is[_s>>2]|0)-(is[ss>>2]|0)>>2)+1|0,ws=gC(ss)|0,ws>>>0<Es>>>0)Wv(ss);else{Ls=is[ss>>2]|0,Gs=(is[ss+8>>2]|0)-Ls|0,Ns=Gs>>1,T5(ps,Gs>>2>>>0<ws>>>1>>>0?Ns>>>0<Es>>>0?Es:Ns:ws,(is[_s>>2]|0)-Ls>>2,ss+8|0),ws=ps+8|0,is[is[ws>>2]>>2]=is[ds>>2],is[ws>>2]=(is[ws>>2]|0)+4,A5(ss,ps),I5(ps),ms=Ts;return}}function nS(ss){return ss=ss|0,is[ss>>2]|0}function u5(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0,l5(ss,ds,ps,_s,Es,ws)}function I$(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-4-_s|0)>>>2)<<2)),y0(ps))}function V2(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-4-_s|0)>>>2)<<2)),y0(ps))}function l5(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0;var Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;Ts=ms,ms=ms+48|0,Bs=Ts+40|0,Ls=Ts+32|0,Hs=Ts+24|0,Ns=Ts+12|0,Gs=Ts,R1(Ls),ss=Fp(ss)|0,is[Hs>>2]=is[ds>>2],ps=is[ps>>2]|0,_s=is[_s>>2]|0,k$(Ns,Es),f5(Gs,ws),is[Bs>>2]=is[Hs>>2],c5(ss,Bs,ps,_s,Ns,Gs),I$(Gs),V2(Ns),B1(Ls),ms=Ts}function k$(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;is[ss>>2]=0,is[ss+4>>2]=0,is[ss+8>>2]=0,ps=ds+4|0,_s=(is[ps>>2]|0)-(is[ds>>2]|0)>>2,_s|0&&(M5(ss,_s),C5(ss,is[ds>>2]|0,is[ps>>2]|0,_s))}function f5(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;is[ss>>2]=0,is[ss+4>>2]=0,is[ss+8>>2]=0,ps=ds+4|0,_s=(is[ps>>2]|0)-(is[ds>>2]|0)>>2,_s|0&&(w5(ss,_s),$5(ss,is[ds>>2]|0,is[ps>>2]|0,_s))}function c5(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0;var Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;Ts=ms,ms=ms+32|0,Bs=Ts+28|0,Hs=Ts+24|0,Ls=Ts+12|0,Ns=Ts,Gs=Rp(d5()|0)|0,is[Hs>>2]=is[ds>>2],is[Bs>>2]=is[Hs>>2],ds=ly(Bs)|0,ps=cC(ps)|0,_s=L$(_s)|0,is[Ls>>2]=is[Es>>2],Bs=Es+4|0,is[Ls+4>>2]=is[Bs>>2],Hs=Es+8|0,is[Ls+8>>2]=is[Hs>>2],is[Hs>>2]=0,is[Bs>>2]=0,is[Es>>2]=0,Es=P$(Ls)|0,is[Ns>>2]=is[ws>>2],Bs=ws+4|0,is[Ns+4>>2]=is[Bs>>2],Hs=ws+8|0,is[Ns+8>>2]=is[Hs>>2],is[Hs>>2]=0,is[Bs>>2]=0,is[ws>>2]=0,A1(0,Gs|0,ss|0,ds|0,ps|0,_s|0,Es|0,h5(Ns)|0)|0,I$(Ns),V2(Ls),ms=Ts}function d5(){var ss=0;return as[7968]|0||(E5(10708),ss=7968,is[ss>>2]=1,is[ss+4>>2]=0),10708}function ly(ss){return ss=ss|0,hC(ss)|0}function cC(ss){return ss=ss|0,dC(ss)|0}function L$(ss){return ss=ss|0,eS(ss)|0}function P$(ss){return ss=ss|0,p5(ss)|0}function h5(ss){return ss=ss|0,v5(ss)|0}function v5(ss){ss=ss|0;var ds=0,ps=0,_s=0;if(_s=(is[ss+4>>2]|0)-(is[ss>>2]|0)|0,ps=_s>>2,_s=D1(_s+4|0)|0,is[_s>>2]=ps,ps|0){ds=0;do is[_s+4+(ds<<2)>>2]=dC(is[(is[ss>>2]|0)+(ds<<2)>>2]|0)|0,ds=ds+1|0;while((ds|0)!=(ps|0))}return _s|0}function dC(ss){return ss=ss|0,ss|0}function p5(ss){ss=ss|0;var ds=0,ps=0,_s=0;if(_s=(is[ss+4>>2]|0)-(is[ss>>2]|0)|0,ps=_s>>2,_s=D1(_s+4|0)|0,is[_s>>2]=ps,ps|0){ds=0;do is[_s+4+(ds<<2)>>2]=hC((is[ss>>2]|0)+(ds<<2)|0)|0,ds=ds+1|0;while((ds|0)!=(ps|0))}return _s|0}function hC(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0;return Es=ms,ms=ms+32|0,ds=Es+12|0,ps=Es,_s=e0(vC()|0)|0,_s?(m0(ds,_s),x0(ps,ds),eB(ss,ps),ss=E0(ds)|0):ss=g5(ss)|0,ms=Es,ss|0}function vC(){var ss=0;return as[7960]|0||(x5(10664),Z0(25,10664,$s|0)|0,ss=7960,is[ss>>2]=1,is[ss+4>>2]=0),10664}function g5(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0;return ps=ms,ms=ms+16|0,Es=ps+4|0,Ts=ps,_s=D1(8)|0,ds=_s,Ls=K0(4)|0,is[Ls>>2]=is[ss>>2],ws=ds+4|0,is[ws>>2]=Ls,ss=K0(8)|0,ws=is[ws>>2]|0,is[Ts>>2]=0,is[Es>>2]=is[Ts>>2],pC(ss,ws,Es),is[_s>>2]=ss,ms=ps,ds|0}function pC(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,ps=K0(16)|0,is[ps+4>>2]=0,is[ps+8>>2]=0,is[ps>>2]=1656,is[ps+12>>2]=ds,is[ss+4>>2]=ps}function m5(ss){ss=ss|0,o_(ss),y0(ss)}function y5(ss){ss=ss|0,ss=is[ss+12>>2]|0,ss|0&&y0(ss)}function _5(ss){ss=ss|0,y0(ss)}function x5(ss){ss=ss|0,S0(ss)}function E5(ss){ss=ss|0,w1(ss,S5()|0,5)}function S5(){return 1676}function w5(ss,ds){ss=ss|0,ds=ds|0;var ps=0;if((gC(ss)|0)>>>0<ds>>>0&&Wv(ss),ds>>>0>1073741823)yv();else{ps=K0(ds<<2)|0,is[ss+4>>2]=ps,is[ss>>2]=ps,is[ss+8>>2]=ps+(ds<<2);return}}function $5(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,_s=ss+4|0,ss=ps-ds|0,(ss|0)>0&&(Sv(is[_s>>2]|0,ds|0,ss|0)|0,is[_s>>2]=(is[_s>>2]|0)+(ss>>>2<<2))}function gC(ss){return ss=ss|0,1073741823}function M5(ss,ds){ss=ss|0,ds=ds|0;var ps=0;if((mC(ss)|0)>>>0<ds>>>0&&Wv(ss),ds>>>0>1073741823)yv();else{ps=K0(ds<<2)|0,is[ss+4>>2]=ps,is[ss>>2]=ps,is[ss+8>>2]=ps+(ds<<2);return}}function C5(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,_s=ss+4|0,ss=ps-ds|0,(ss|0)>0&&(Sv(is[_s>>2]|0,ds|0,ss|0)|0,is[_s>>2]=(is[_s>>2]|0)+(ss>>>2<<2))}function mC(ss){return ss=ss|0,1073741823}function T5(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>1073741823)yv();else{Es=K0(ds<<2)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps<<2)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds<<2)}function A5(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(0-(Es>>2)<<2)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function I5(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~((_s+-4-ds|0)>>>2)<<2)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function yC(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>1073741823)yv();else{Es=K0(ds<<2)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps<<2)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds<<2)}function _C(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(0-(Es>>2)<<2)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function xC(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~((_s+-4-ds|0)>>>2)<<2)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function k5(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0;var ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0,Kl=0,Gl=0,Rl=0;if(Rl=ms,ms=ms+32|0,Bs=Rl+20|0,Hs=Rl+12|0,Gs=Rl+16|0,yl=Rl+4|0,Kl=Rl,Gl=Rl+8|0,Ls=uC()|0,ws=is[Ls>>2]|0,Ts=is[ws>>2]|0,Ts|0)for(Ns=is[Ls+8>>2]|0,Ls=is[Ls+4>>2]|0;f2(Bs,Ts),L5(ss,Bs,Ls,Ns),ws=ws+4|0,Ts=is[ws>>2]|0,Ts;)Ns=Ns+1|0,Ls=Ls+1|0;if(ws=lC()|0,Ts=is[ws>>2]|0,Ts|0)do f2(Bs,Ts),is[Hs>>2]=is[ws+4>>2],P5(ds,Bs,Hs),ws=ws+8|0,Ts=is[ws>>2]|0;while(Ts|0);if(ws=is[(t_()|0)>>2]|0,ws|0)do ds=is[ws+4>>2]|0,f2(Bs,is[(r_(ds)|0)>>2]|0),is[Hs>>2]=b$(ds)|0,O5(ps,Bs,Hs),ws=is[ws>>2]|0;while(ws|0);if(f2(Gs,0),ws=C$()|0,is[Bs>>2]=is[Gs>>2],fC(Bs,ws,Es),ws=is[(t_()|0)>>2]|0,ws|0){ss=Bs+4|0,ds=Bs+8|0,ps=Bs+8|0;do{if(Ns=is[ws+4>>2]|0,f2(Hs,is[(r_(Ns)|0)>>2]|0),N5(yl,EC(Ns)|0),Ts=is[yl>>2]|0,Ts|0){is[Bs>>2]=0,is[ss>>2]=0,is[ds>>2]=0;do f2(Kl,is[(r_(is[Ts+4>>2]|0)|0)>>2]|0),Ls=is[ss>>2]|0,Ls>>>0<(is[ps>>2]|0)>>>0?(is[Ls>>2]=is[Kl>>2],is[ss>>2]=(is[ss>>2]|0)+4):A$(Bs,Kl),Ts=is[Ts>>2]|0;while(Ts|0);D5(_s,Hs,Bs),V2(Bs)}is[Gl>>2]=is[Hs>>2],Gs=SC(Ns)|0,is[Bs>>2]=is[Gl>>2],fC(Bs,Gs,Es),ev(yl),ws=is[ws>>2]|0}while(ws|0)}ms=Rl}function L5(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,X5(ss,ds,ps,_s)}function P5(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,Y5(ss,ds,ps)}function r_(ss){return ss=ss|0,ss|0}function O5(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,U5(ss,ds,ps)}function EC(ss){return ss=ss|0,ss+16|0}function N5(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;if(ws=ms,ms=ms+16|0,Es=ws+8|0,ps=ws,is[ss>>2]=0,_s=is[ds>>2]|0,is[Es>>2]=_s,is[ps>>2]=ss,ps=z5(ps)|0,_s|0){if(_s=K0(12)|0,Ts=(wC(Es)|0)+4|0,ss=is[Ts+4>>2]|0,ds=_s+4|0,is[ds>>2]=is[Ts>>2],is[ds+4>>2]=ss,ds=is[is[Es>>2]>>2]|0,is[Es>>2]=ds,!ds)ss=_s;else for(ds=_s;ss=K0(12)|0,Ns=(wC(Es)|0)+4|0,Ls=is[Ns+4>>2]|0,Ts=ss+4|0,is[Ts>>2]=is[Ns>>2],is[Ts+4>>2]=Ls,is[ds>>2]=ss,Ts=is[is[Es>>2]>>2]|0,is[Es>>2]=Ts,Ts;)ds=ss;is[ss>>2]=is[ps>>2],is[ps>>2]=_s}ms=ws}function D5(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,R5(ss,ds,ps)}function SC(ss){return ss=ss|0,ss+24|0}function R5(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+32|0,Ts=_s+24|0,Es=_s+16|0,Ls=_s+12|0,ws=_s,R1(Es),ss=Fp(ss)|0,is[Ls>>2]=is[ds>>2],k$(ws,ps),is[Ts>>2]=is[Ls>>2],B5(ss,Ts,ws),V2(ws),B1(Es),ms=_s}function B5(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ms,ms=ms+32|0,Ts=_s+16|0,Ls=_s+12|0,Es=_s,ws=Rp(F5()|0)|0,is[Ls>>2]=is[ds>>2],is[Ts>>2]=is[Ls>>2],ds=ly(Ts)|0,is[Es>>2]=is[ps>>2],Ts=ps+4|0,is[Es+4>>2]=is[Ts>>2],Ls=ps+8|0,is[Es+8>>2]=is[Ls>>2],is[Ls>>2]=0,is[Ts>>2]=0,is[ps>>2]=0,d1(0,ws|0,ss|0,ds|0,P$(Es)|0)|0,V2(Es),ms=_s}function F5(){var ss=0;return as[7976]|0||(G5(10720),ss=7976,is[ss>>2]=1,is[ss+4>>2]=0),10720}function G5(ss){ss=ss|0,w1(ss,j5()|0,2)}function j5(){return 1732}function z5(ss){return ss=ss|0,is[ss>>2]|0}function wC(ss){return ss=ss|0,is[ss>>2]|0}function U5(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;_s=ms,ms=ms+32|0,ws=_s+16|0,Es=_s+8|0,Ts=_s,R1(Es),ss=Fp(ss)|0,is[Ts>>2]=is[ds>>2],ps=is[ps>>2]|0,is[ws>>2]=is[Ts>>2],$C(ss,ws,ps),B1(Es),ms=_s}function $C(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;_s=ms,ms=ms+16|0,ws=_s+4|0,Ts=_s,Es=Rp(H5()|0)|0,is[Ts>>2]=is[ds>>2],is[ws>>2]=is[Ts>>2],ds=ly(ws)|0,d1(0,Es|0,ss|0,ds|0,cC(ps)|0)|0,ms=_s}function H5(){var ss=0;return as[7984]|0||(W5(10732),ss=7984,is[ss>>2]=1,is[ss+4>>2]=0),10732}function W5(ss){ss=ss|0,w1(ss,V5()|0,2)}function V5(){return 1744}function Y5(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;_s=ms,ms=ms+32|0,ws=_s+16|0,Es=_s+8|0,Ts=_s,R1(Es),ss=Fp(ss)|0,is[Ts>>2]=is[ds>>2],ps=is[ps>>2]|0,is[ws>>2]=is[Ts>>2],$C(ss,ws,ps),B1(Es),ms=_s}function X5(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0;Es=ms,ms=ms+32|0,Ts=Es+16|0,ws=Es+8|0,Ls=Es,R1(ws),ss=Fp(ss)|0,is[Ls>>2]=is[ds>>2],ps=as[ps>>0]|0,_s=as[_s>>0]|0,is[Ts>>2]=is[Ls>>2],q5(ss,Ts,ps,_s),B1(ws),ms=Es}function q5(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0;Es=ms,ms=ms+16|0,Ts=Es+4|0,Ls=Es,ws=Rp(K5()|0)|0,is[Ls>>2]=is[ds>>2],is[Ts>>2]=is[Ls>>2],ds=ly(Ts)|0,ps=n_(ps)|0,Gm(0,ws|0,ss|0,ds|0,ps|0,n_(_s)|0)|0,ms=Es}function K5(){var ss=0;return as[7992]|0||(Q5(10744),ss=7992,is[ss>>2]=1,is[ss+4>>2]=0),10744}function n_(ss){return ss=ss|0,Z5(ss)|0}function Z5(ss){return ss=ss|0,ss&255|0}function Q5(ss){ss=ss|0,w1(ss,J5()|0,3)}function J5(){return 1756}function eR(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;switch(yl=ms,ms=ms+32|0,Ls=yl+8|0,Ns=yl+4|0,Gs=yl+20|0,Bs=yl,Qw(ss,0),_s=J6(ds)|0,is[Ls>>2]=0,Hs=Ls+4|0,is[Hs>>2]=0,is[Ls+8>>2]=0,_s<<24>>24){case 0:{as[Gs>>0]=0,tR(Ns,ps,Gs),iS(ss,Ns)|0,gm(Ns);break}case 8:{Hs=F$(ds)|0,as[Gs>>0]=8,f2(Bs,is[Hs+4>>2]|0),rR(Ns,ps,Gs,Bs,Hs+8|0),iS(ss,Ns)|0,gm(Ns);break}case 9:{if(ws=F$(ds)|0,ds=is[ws+4>>2]|0,ds|0)for(Ts=Ls+8|0,Es=ws+12|0;ds=ds+-1|0,f2(Ns,is[Es>>2]|0),_s=is[Hs>>2]|0,_s>>>0<(is[Ts>>2]|0)>>>0?(is[_s>>2]=is[Ns>>2],is[Hs>>2]=(is[Hs>>2]|0)+4):A$(Ls,Ns),ds;)Es=Es+4|0;as[Gs>>0]=9,f2(Bs,is[ws+8>>2]|0),nR(Ns,ps,Gs,Bs,Ls),iS(ss,Ns)|0,gm(Ns);break}default:Hs=F$(ds)|0,as[Gs>>0]=_s,f2(Bs,is[Hs+4>>2]|0),iR(Ns,ps,Gs,Bs),iS(ss,Ns)|0,gm(Ns)}V2(Ls),ms=yl}function tR(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0;_s=ms,ms=ms+16|0,Es=_s,R1(Es),ds=Fp(ds)|0,mR(ss,ds,as[ps>>0]|0),B1(Es),ms=_s}function iS(ss,ds){ss=ss|0,ds=ds|0;var ps=0;return ps=is[ss>>2]|0,ps|0&&vy(ps|0),is[ss>>2]=is[ds>>2],is[ds>>2]=0,ss|0}function rR(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0;var ws=0,Ts=0,Ls=0,Ns=0;ws=ms,ms=ms+32|0,Ls=ws+16|0,Ts=ws+8|0,Ns=ws,R1(Ts),ds=Fp(ds)|0,ps=as[ps>>0]|0,is[Ns>>2]=is[_s>>2],Es=is[Es>>2]|0,is[Ls>>2]=is[Ns>>2],hR(ss,ds,ps,Ls,Es),B1(Ts),ms=ws}function nR(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0;var ws=0,Ts=0,Ls=0,Ns=0,Gs=0;ws=ms,ms=ms+32|0,Ns=ws+24|0,Ts=ws+16|0,Gs=ws+12|0,Ls=ws,R1(Ts),ds=Fp(ds)|0,ps=as[ps>>0]|0,is[Gs>>2]=is[_s>>2],k$(Ls,Es),is[Ns>>2]=is[Gs>>2],lR(ss,ds,ps,Ns,Ls),V2(Ls),B1(Ts),ms=ws}function iR(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0;Es=ms,ms=ms+32|0,Ts=Es+16|0,ws=Es+8|0,Ls=Es,R1(ws),ds=Fp(ds)|0,ps=as[ps>>0]|0,is[Ls>>2]=is[_s>>2],is[Ts>>2]=is[Ls>>2],aR(ss,ds,ps,Ts),B1(ws),ms=Es}function aR(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0,Ts=0,Ls=0;Es=ms,ms=ms+16|0,ws=Es+4|0,Ls=Es,Ts=Rp(oR()|0)|0,ps=n_(ps)|0,is[Ls>>2]=is[_s>>2],is[ws>>2]=is[Ls>>2],aS(ss,d1(0,Ts|0,ds|0,ps|0,ly(ws)|0)|0),ms=Es}function oR(){var ss=0;return as[8e3]|0||(sR(10756),ss=8e3,is[ss>>2]=1,is[ss+4>>2]=0),10756}function aS(ss,ds){ss=ss|0,ds=ds|0,Qw(ss,ds)}function sR(ss){ss=ss|0,w1(ss,uR()|0,2)}function uR(){return 1772}function lR(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0;var ws=0,Ts=0,Ls=0,Ns=0,Gs=0;ws=ms,ms=ms+32|0,Ns=ws+16|0,Gs=ws+12|0,Ts=ws,Ls=Rp(fR()|0)|0,ps=n_(ps)|0,is[Gs>>2]=is[_s>>2],is[Ns>>2]=is[Gs>>2],_s=ly(Ns)|0,is[Ts>>2]=is[Es>>2],Ns=Es+4|0,is[Ts+4>>2]=is[Ns>>2],Gs=Es+8|0,is[Ts+8>>2]=is[Gs>>2],is[Gs>>2]=0,is[Ns>>2]=0,is[Es>>2]=0,aS(ss,Gm(0,Ls|0,ds|0,ps|0,_s|0,P$(Ts)|0)|0),V2(Ts),ms=ws}function fR(){var ss=0;return as[8008]|0||(cR(10768),ss=8008,is[ss>>2]=1,is[ss+4>>2]=0),10768}function cR(ss){ss=ss|0,w1(ss,dR()|0,3)}function dR(){return 1784}function hR(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0;var ws=0,Ts=0,Ls=0,Ns=0;ws=ms,ms=ms+16|0,Ls=ws+4|0,Ns=ws,Ts=Rp(vR()|0)|0,ps=n_(ps)|0,is[Ns>>2]=is[_s>>2],is[Ls>>2]=is[Ns>>2],_s=ly(Ls)|0,aS(ss,Gm(0,Ts|0,ds|0,ps|0,_s|0,L$(Es)|0)|0),ms=ws}function vR(){var ss=0;return as[8016]|0||(pR(10780),ss=8016,is[ss>>2]=1,is[ss+4>>2]=0),10780}function pR(ss){ss=ss|0,w1(ss,gR()|0,3)}function gR(){return 1800}function mR(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;_s=Rp(yR()|0)|0,aS(ss,py(0,_s|0,ds|0,n_(ps)|0)|0)}function yR(){var ss=0;return as[8024]|0||(_R(10792),ss=8024,is[ss>>2]=1,is[ss+4>>2]=0),10792}function _R(ss){ss=ss|0,w1(ss,xR()|0,1)}function xR(){return 1816}function ER(){SR(),wR(),$R()}function SR(){is[2702]=QC(65536)|0}function wR(){HR(10856)}function $R(){MR(10816)}function MR(ss){ss=ss|0,bR(ss,5044),CR(ss)|0}function bR(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=vC()|0,is[ss>>2]=ps,BR(ps,ds),Tm(is[ss>>2]|0)}function CR(ss){ss=ss|0;var ds=0;return ds=is[ss>>2]|0,sy(ds,TR()|0),ss|0}function TR(){var ss=0;return as[8032]|0||(MC(10820),Z0(64,10820,$s|0)|0,ss=8032,is[ss>>2]=1,is[ss+4>>2]=0),Tv(10820)|0||MC(10820),10820}function MC(ss){ss=ss|0,kR(ss),uy(ss,25)}function AR(ss){ss=ss|0,IR(ss+24|0)}function IR(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function kR(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,5,18,ds,NR()|0,1),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function LR(ss,ds){ss=ss|0,ds=ds|0,PR(ss,ds)}function PR(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0;ps=ms,ms=ms+16|0,_s=ps,Es=ps+4|0,ay(Es,ds),is[_s>>2]=oy(Es,ds)|0,OR(ss,_s),ms=ps}function OR(ss,ds){ss=ss|0,ds=ds|0,bC(ss+4|0,is[ds>>2]|0),as[ss+8>>0]=1}function bC(ss,ds){ss=ss|0,ds=ds|0,is[ss>>2]=ds}function NR(){return 1824}function DR(ss){return ss=ss|0,RR(ss)|0}function RR(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0;return ps=ms,ms=ms+16|0,Es=ps+4|0,Ts=ps,_s=D1(8)|0,ds=_s,Ls=K0(4)|0,ay(Es,ss),bC(Ls,oy(Es,ss)|0),ws=ds+4|0,is[ws>>2]=Ls,ss=K0(8)|0,ws=is[ws>>2]|0,is[Ts>>2]=0,is[Es>>2]=is[Ts>>2],pC(ss,ws,Es),is[_s>>2]=ss,ms=ps,ds|0}function D1(ss){ss=ss|0;var ds=0,ps=0;return ss=ss+7&-8,ss>>>0<=32768&&(ds=is[2701]|0,ss>>>0<=(65536-ds|0)>>>0)?(ps=(is[2702]|0)+ds|0,is[2701]=ds+ss,ss=ps):(ss=QC(ss+8|0)|0,is[ss>>2]=is[2703],is[2703]=ss,ss=ss+8|0),ss|0}function BR(ss,ds){ss=ss|0,ds=ds|0,is[ss>>2]=FR()|0,is[ss+4>>2]=GR()|0,is[ss+12>>2]=ds,is[ss+8>>2]=jR()|0,is[ss+32>>2]=9}function FR(){return 11744}function GR(){return 1832}function jR(){return rS()|0}function zR(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,(Cm(_s,896)|0)==512?ps|0&&(UR(ps),y0(ps)):ds|0&&y0(ds)}function UR(ss){ss=ss|0,ss=is[ss+4>>2]|0,ss|0&&Am(ss)}function HR(ss){ss=ss|0,WR(ss,5052),VR(ss)|0,YR(ss,5058,26)|0,XR(ss,5069,1)|0,qR(ss,5077,10)|0,KR(ss,5087,19)|0,ZR(ss,5094,27)|0}function WR(ss,ds){ss=ss|0,ds=ds|0;var ps=0;ps=W6()|0,is[ss>>2]=ps,V6(ps,ds),Tm(is[ss>>2]|0)}function VR(ss){ss=ss|0;var ds=0;return ds=is[ss>>2]|0,sy(ds,k6()|0),ss|0}function YR(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,d6(ss,Zv(ds)|0,ps,0),ss|0}function XR(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,Z8(ss,Zv(ds)|0,ps,0),ss|0}function qR(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,A8(ss,Zv(ds)|0,ps,0),ss|0}function KR(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,h8(ss,Zv(ds)|0,ps,0),ss|0}function CC(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;e:for(;;){for(ps=is[2703]|0;;){if((ps|0)==(ds|0))break e;if(_s=is[ps>>2]|0,is[2703]=_s,!ps)ps=_s;else break}y0(ps)}is[2701]=ss}function ZR(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,QR(ss,Zv(ds)|0,ps,0),ss|0}function QR(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0;ws=is[ss>>2]|0,Es=O$()|0,ss=JR(ps)|0,Qv(ws,ds,Es,ss,e8(ps,_s)|0,_s)}function O$(){var ss=0,ds=0;if(as[8040]|0||(AC(10860),Z0(65,10860,$s|0)|0,ds=8040,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(10860)|0)){ss=10860,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));AC(10860)}return 10860}function JR(ss){return ss=ss|0,ss|0}function e8(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;return Ls=ms,ms=ms+16|0,Es=Ls,ws=Ls+4|0,is[Es>>2]=ss,Ns=O$()|0,Ts=Ns+24|0,ds=fv(ds,4)|0,is[ws>>2]=ds,ps=Ns+28|0,_s=is[ps>>2]|0,_s>>>0<(is[Ns+32>>2]|0)>>>0?(TC(_s,ss,ds),ds=(is[ps>>2]|0)+8|0,is[ps>>2]=ds):(t8(Ts,Es,ws),ds=is[ps>>2]|0),ms=Ls,(ds-(is[Ts>>2]|0)>>3)+-1|0}function TC(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,is[ss+4>>2]=ps}function t8(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;if(Ls=ms,ms=ms+32|0,Es=Ls,ws=ss+4|0,Ts=((is[ws>>2]|0)-(is[ss>>2]|0)>>3)+1|0,_s=r8(ss)|0,_s>>>0<Ts>>>0)Wv(ss);else{Ns=is[ss>>2]|0,Bs=(is[ss+8>>2]|0)-Ns|0,Gs=Bs>>2,n8(Es,Bs>>3>>>0<_s>>>1>>>0?Gs>>>0<Ts>>>0?Ts:Gs:_s,(is[ws>>2]|0)-Ns>>3,ss+8|0),Ts=Es+8|0,TC(is[Ts>>2]|0,is[ds>>2]|0,is[ps>>2]|0),is[Ts>>2]=(is[Ts>>2]|0)+8,i8(ss,Es),a8(Es),ms=Ls;return}}function r8(ss){return ss=ss|0,536870911}function n8(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>536870911)yv();else{Es=K0(ds<<3)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps<<3)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds<<3)}function i8(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(0-(Es>>3)<<3)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function a8(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~((_s+-8-ds|0)>>>3)<<3)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function AC(ss){ss=ss|0,u8(ss)}function o8(ss){ss=ss|0,s8(ss+24|0)}function s8(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function u8(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,1,11,ds,l8()|0,2),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function l8(){return 1840}function f8(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,d8(is[(c8(ss)|0)>>2]|0,ds,ps)}function c8(ss){return ss=ss|0,(is[(O$()|0)+24>>2]|0)+(ss<<3)|0}function d8(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0;_s=ms,ms=ms+16|0,ws=_s+1|0,Es=_s,ay(ws,ds),ds=oy(ws,ds)|0,ay(Es,ps),ps=oy(Es,ps)|0,X2[ss&31](ds,ps),ms=_s}function h8(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0;ws=is[ss>>2]|0,Es=N$()|0,ss=v8(ps)|0,Qv(ws,ds,Es,ss,p8(ps,_s)|0,_s)}function N$(){var ss=0,ds=0;if(as[8048]|0||(kC(10896),Z0(66,10896,$s|0)|0,ds=8048,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(10896)|0)){ss=10896,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));kC(10896)}return 10896}function v8(ss){return ss=ss|0,ss|0}function p8(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;return Ls=ms,ms=ms+16|0,Es=Ls,ws=Ls+4|0,is[Es>>2]=ss,Ns=N$()|0,Ts=Ns+24|0,ds=fv(ds,4)|0,is[ws>>2]=ds,ps=Ns+28|0,_s=is[ps>>2]|0,_s>>>0<(is[Ns+32>>2]|0)>>>0?(IC(_s,ss,ds),ds=(is[ps>>2]|0)+8|0,is[ps>>2]=ds):(g8(Ts,Es,ws),ds=is[ps>>2]|0),ms=Ls,(ds-(is[Ts>>2]|0)>>3)+-1|0}function IC(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,is[ss+4>>2]=ps}function g8(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;if(Ls=ms,ms=ms+32|0,Es=Ls,ws=ss+4|0,Ts=((is[ws>>2]|0)-(is[ss>>2]|0)>>3)+1|0,_s=m8(ss)|0,_s>>>0<Ts>>>0)Wv(ss);else{Ns=is[ss>>2]|0,Bs=(is[ss+8>>2]|0)-Ns|0,Gs=Bs>>2,y8(Es,Bs>>3>>>0<_s>>>1>>>0?Gs>>>0<Ts>>>0?Ts:Gs:_s,(is[ws>>2]|0)-Ns>>3,ss+8|0),Ts=Es+8|0,IC(is[Ts>>2]|0,is[ds>>2]|0,is[ps>>2]|0),is[Ts>>2]=(is[Ts>>2]|0)+8,_8(ss,Es),x8(Es),ms=Ls;return}}function m8(ss){return ss=ss|0,536870911}function y8(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>536870911)yv();else{Es=K0(ds<<3)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps<<3)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds<<3)}function _8(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(0-(Es>>3)<<3)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function x8(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~((_s+-8-ds|0)>>>3)<<3)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function kC(ss){ss=ss|0,w8(ss)}function E8(ss){ss=ss|0,S8(ss+24|0)}function S8(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function w8(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,1,11,ds,$8()|0,1),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function $8(){return 1852}function M8(ss,ds){return ss=ss|0,ds=ds|0,T8(is[(C8(ss)|0)>>2]|0,ds)|0}function C8(ss){return ss=ss|0,(is[(N$()|0)+24>>2]|0)+(ss<<3)|0}function T8(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;return ps=ms,ms=ms+16|0,_s=ps,ay(_s,ds),ds=oy(_s,ds)|0,ds=eS(hy[ss&31](ds)|0)|0,ms=ps,ds|0}function A8(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0;ws=is[ss>>2]|0,Es=D$()|0,ss=I8(ps)|0,Qv(ws,ds,Es,ss,k8(ps,_s)|0,_s)}function D$(){var ss=0,ds=0;if(as[8056]|0||(PC(10932),Z0(67,10932,$s|0)|0,ds=8056,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(10932)|0)){ss=10932,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));PC(10932)}return 10932}function I8(ss){return ss=ss|0,ss|0}function k8(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;return Ls=ms,ms=ms+16|0,Es=Ls,ws=Ls+4|0,is[Es>>2]=ss,Ns=D$()|0,Ts=Ns+24|0,ds=fv(ds,4)|0,is[ws>>2]=ds,ps=Ns+28|0,_s=is[ps>>2]|0,_s>>>0<(is[Ns+32>>2]|0)>>>0?(LC(_s,ss,ds),ds=(is[ps>>2]|0)+8|0,is[ps>>2]=ds):(L8(Ts,Es,ws),ds=is[ps>>2]|0),ms=Ls,(ds-(is[Ts>>2]|0)>>3)+-1|0}function LC(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,is[ss+4>>2]=ps}function L8(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;if(Ls=ms,ms=ms+32|0,Es=Ls,ws=ss+4|0,Ts=((is[ws>>2]|0)-(is[ss>>2]|0)>>3)+1|0,_s=P8(ss)|0,_s>>>0<Ts>>>0)Wv(ss);else{Ns=is[ss>>2]|0,Bs=(is[ss+8>>2]|0)-Ns|0,Gs=Bs>>2,O8(Es,Bs>>3>>>0<_s>>>1>>>0?Gs>>>0<Ts>>>0?Ts:Gs:_s,(is[ws>>2]|0)-Ns>>3,ss+8|0),Ts=Es+8|0,LC(is[Ts>>2]|0,is[ds>>2]|0,is[ps>>2]|0),is[Ts>>2]=(is[Ts>>2]|0)+8,N8(ss,Es),D8(Es),ms=Ls;return}}function P8(ss){return ss=ss|0,536870911}function O8(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>536870911)yv();else{Es=K0(ds<<3)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps<<3)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds<<3)}function N8(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(0-(Es>>3)<<3)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function D8(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~((_s+-8-ds|0)>>>3)<<3)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function PC(ss){ss=ss|0,F8(ss)}function R8(ss){ss=ss|0,B8(ss+24|0)}function B8(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function F8(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,1,7,ds,G8()|0,2),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function G8(){return 1860}function j8(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,U8(is[(z8(ss)|0)>>2]|0,ds,ps)|0}function z8(ss){return ss=ss|0,(is[(D$()|0)+24>>2]|0)+(ss<<3)|0}function U8(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;return _s=ms,ms=ms+32|0,Ts=_s+12|0,ws=_s+8|0,Ls=_s,Ns=_s+16|0,Es=_s+4|0,H8(Ns,ds),W8(Ls,Ns,ds),$m(Es,ps),ps=Mm(Es,ps)|0,is[Ts>>2]=is[Ls>>2],$x[ss&15](ws,Ts,ps),ps=V8(ws)|0,gm(ws),bm(Es),ms=_s,ps|0}function H8(ss,ds){ss=ss|0,ds=ds|0}function W8(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,Y8(ss,ps)}function V8(ss){return ss=ss|0,Fp(ss)|0}function Y8(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0;Es=ms,ms=ms+16|0,ps=Es,_s=ds,_s&1?(X8(ps,0),lv(_s|0,ps|0)|0,q8(ss,ps),K8(ps)):is[ss>>2]=is[ds>>2],ms=Es}function X8(ss,ds){ss=ss|0,ds=ds|0,H2(ss,ds),is[ss+4>>2]=0,as[ss+8>>0]=0}function q8(ss,ds){ss=ss|0,ds=ds|0,is[ss>>2]=is[ds+4>>2]}function K8(ss){ss=ss|0,as[ss+8>>0]=0}function Z8(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0;ws=is[ss>>2]|0,Es=R$()|0,ss=Q8(ps)|0,Qv(ws,ds,Es,ss,J8(ps,_s)|0,_s)}function R$(){var ss=0,ds=0;if(as[8064]|0||(NC(10968),Z0(68,10968,$s|0)|0,ds=8064,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(10968)|0)){ss=10968,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));NC(10968)}return 10968}function Q8(ss){return ss=ss|0,ss|0}function J8(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;return Ls=ms,ms=ms+16|0,Es=Ls,ws=Ls+4|0,is[Es>>2]=ss,Ns=R$()|0,Ts=Ns+24|0,ds=fv(ds,4)|0,is[ws>>2]=ds,ps=Ns+28|0,_s=is[ps>>2]|0,_s>>>0<(is[Ns+32>>2]|0)>>>0?(OC(_s,ss,ds),ds=(is[ps>>2]|0)+8|0,is[ps>>2]=ds):(e6(Ts,Es,ws),ds=is[ps>>2]|0),ms=Ls,(ds-(is[Ts>>2]|0)>>3)+-1|0}function OC(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,is[ss+4>>2]=ps}function e6(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;if(Ls=ms,ms=ms+32|0,Es=Ls,ws=ss+4|0,Ts=((is[ws>>2]|0)-(is[ss>>2]|0)>>3)+1|0,_s=t6(ss)|0,_s>>>0<Ts>>>0)Wv(ss);else{Ns=is[ss>>2]|0,Bs=(is[ss+8>>2]|0)-Ns|0,Gs=Bs>>2,r6(Es,Bs>>3>>>0<_s>>>1>>>0?Gs>>>0<Ts>>>0?Ts:Gs:_s,(is[ws>>2]|0)-Ns>>3,ss+8|0),Ts=Es+8|0,OC(is[Ts>>2]|0,is[ds>>2]|0,is[ps>>2]|0),is[Ts>>2]=(is[Ts>>2]|0)+8,n6(ss,Es),i6(Es),ms=Ls;return}}function t6(ss){return ss=ss|0,536870911}function r6(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>536870911)yv();else{Es=K0(ds<<3)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps<<3)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds<<3)}function n6(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(0-(Es>>3)<<3)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function i6(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~((_s+-8-ds|0)>>>3)<<3)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function NC(ss){ss=ss|0,s6(ss)}function a6(ss){ss=ss|0,o6(ss+24|0)}function o6(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function s6(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,1,1,ds,u6()|0,5),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function u6(){return 1872}function l6(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0,c6(is[(f6(ss)|0)>>2]|0,ds,ps,_s,Es,ws)}function f6(ss){return ss=ss|0,(is[(R$()|0)+24>>2]|0)+(ss<<3)|0}function c6(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0;var Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0;Ts=ms,ms=ms+32|0,Ls=Ts+16|0,Ns=Ts+12|0,Gs=Ts+8|0,Bs=Ts+4|0,Hs=Ts,$m(Ls,ds),ds=Mm(Ls,ds)|0,$m(Ns,ps),ps=Mm(Ns,ps)|0,$m(Gs,_s),_s=Mm(Gs,_s)|0,$m(Bs,Es),Es=Mm(Bs,Es)|0,$m(Hs,ws),ws=Mm(Hs,ws)|0,nT[ss&1](ds,ps,_s,Es,ws),bm(Hs),bm(Bs),bm(Gs),bm(Ns),bm(Ls),ms=Ts}function d6(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0;ws=is[ss>>2]|0,Es=B$()|0,ss=h6(ps)|0,Qv(ws,ds,Es,ss,v6(ps,_s)|0,_s)}function B$(){var ss=0,ds=0;if(as[8072]|0||(RC(11004),Z0(69,11004,$s|0)|0,ds=8072,is[ds>>2]=1,is[ds+4>>2]=0),!(Tv(11004)|0)){ss=11004,ds=ss+36|0;do is[ss>>2]=0,ss=ss+4|0;while((ss|0)<(ds|0));RC(11004)}return 11004}function h6(ss){return ss=ss|0,ss|0}function v6(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;return Ls=ms,ms=ms+16|0,Es=Ls,ws=Ls+4|0,is[Es>>2]=ss,Ns=B$()|0,Ts=Ns+24|0,ds=fv(ds,4)|0,is[ws>>2]=ds,ps=Ns+28|0,_s=is[ps>>2]|0,_s>>>0<(is[Ns+32>>2]|0)>>>0?(DC(_s,ss,ds),ds=(is[ps>>2]|0)+8|0,is[ps>>2]=ds):(p6(Ts,Es,ws),ds=is[ps>>2]|0),ms=Ls,(ds-(is[Ts>>2]|0)>>3)+-1|0}function DC(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,is[ss+4>>2]=ps}function p6(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0;if(Ls=ms,ms=ms+32|0,Es=Ls,ws=ss+4|0,Ts=((is[ws>>2]|0)-(is[ss>>2]|0)>>3)+1|0,_s=g6(ss)|0,_s>>>0<Ts>>>0)Wv(ss);else{Ns=is[ss>>2]|0,Bs=(is[ss+8>>2]|0)-Ns|0,Gs=Bs>>2,m6(Es,Bs>>3>>>0<_s>>>1>>>0?Gs>>>0<Ts>>>0?Ts:Gs:_s,(is[ws>>2]|0)-Ns>>3,ss+8|0),Ts=Es+8|0,DC(is[Ts>>2]|0,is[ds>>2]|0,is[ps>>2]|0),is[Ts>>2]=(is[Ts>>2]|0)+8,y6(ss,Es),_6(Es),ms=Ls;return}}function g6(ss){return ss=ss|0,536870911}function m6(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0;is[ss+12>>2]=0,is[ss+16>>2]=_s;do if(ds)if(ds>>>0>536870911)yv();else{Es=K0(ds<<3)|0;break}else Es=0;while(!1);is[ss>>2]=Es,_s=Es+(ps<<3)|0,is[ss+8>>2]=_s,is[ss+4>>2]=_s,is[ss+12>>2]=Es+(ds<<3)}function y6(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0,Es=0,ws=0,Ts=0;_s=is[ss>>2]|0,Ts=ss+4|0,ws=ds+4|0,Es=(is[Ts>>2]|0)-_s|0,ps=(is[ws>>2]|0)+(0-(Es>>3)<<3)|0,is[ws>>2]=ps,(Es|0)>0?(Sv(ps|0,_s|0,Es|0)|0,_s=ws,ps=is[ws>>2]|0):_s=ws,ws=is[ss>>2]|0,is[ss>>2]=ps,is[_s>>2]=ws,ws=ds+8|0,Es=is[Ts>>2]|0,is[Ts>>2]=is[ws>>2],is[ws>>2]=Es,ws=ss+8|0,Ts=ds+12|0,ss=is[ws>>2]|0,is[ws>>2]=is[Ts>>2],is[Ts>>2]=ss,is[ds>>2]=is[_s>>2]}function _6(ss){ss=ss|0;var ds=0,ps=0,_s=0;ds=is[ss+4>>2]|0,ps=ss+8|0,_s=is[ps>>2]|0,(_s|0)!=(ds|0)&&(is[ps>>2]=_s+(~((_s+-8-ds|0)>>>3)<<3)),ss=is[ss>>2]|0,ss|0&&y0(ss)}function RC(ss){ss=ss|0,S6(ss)}function x6(ss){ss=ss|0,E6(ss+24|0)}function E6(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function S6(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,1,12,ds,w6()|0,2),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function w6(){return 1896}function $6(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,C6(is[(M6(ss)|0)>>2]|0,ds,ps)}function M6(ss){return ss=ss|0,(is[(B$()|0)+24>>2]|0)+(ss<<3)|0}function C6(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0;_s=ms,ms=ms+16|0,ws=_s+4|0,Es=_s,T6(ws,ds),ds=A6(ws,ds)|0,$m(Es,ps),ps=Mm(Es,ps)|0,X2[ss&31](ds,ps),bm(Es),ms=_s}function T6(ss,ds){ss=ss|0,ds=ds|0}function A6(ss,ds){return ss=ss|0,ds=ds|0,I6(ds)|0}function I6(ss){return ss=ss|0,ss|0}function k6(){var ss=0;return as[8080]|0||(BC(11040),Z0(70,11040,$s|0)|0,ss=8080,is[ss>>2]=1,is[ss+4>>2]=0),Tv(11040)|0||BC(11040),11040}function BC(ss){ss=ss|0,O6(ss),uy(ss,71)}function L6(ss){ss=ss|0,P6(ss+24|0)}function P6(ss){ss=ss|0;var ds=0,ps=0,_s=0;ps=is[ss>>2]|0,_s=ps,ps|0&&(ss=ss+4|0,ds=is[ss>>2]|0,(ds|0)!=(ps|0)&&(is[ss>>2]=ds+(~((ds+-8-_s|0)>>>3)<<3)),y0(ps))}function O6(ss){ss=ss|0;var ds=0;ds=Fv()|0,Qs(ss,5,7,ds,B6()|0,0),is[ss+24>>2]=0,is[ss+28>>2]=0,is[ss+32>>2]=0}function N6(ss){ss=ss|0,D6(ss)}function D6(ss){ss=ss|0,R6(ss)}function R6(ss){ss=ss|0,as[ss+8>>0]=1}function B6(){return 1936}function F6(){return G6()|0}function G6(){var ss=0,ds=0,ps=0,_s=0,Es=0,ws=0,Ts=0;return ds=ms,ms=ms+16|0,Es=ds+4|0,Ts=ds,ps=D1(8)|0,ss=ps,ws=ss+4|0,is[ws>>2]=K0(1)|0,_s=K0(8)|0,ws=is[ws>>2]|0,is[Ts>>2]=0,is[Es>>2]=is[Ts>>2],j6(_s,ws,Es),is[ps>>2]=_s,ms=ds,ss|0}function j6(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]=ds,ps=K0(16)|0,is[ps+4>>2]=0,is[ps+8>>2]=0,is[ps>>2]=1916,is[ps+12>>2]=ds,is[ss+4>>2]=ps}function z6(ss){ss=ss|0,o_(ss),y0(ss)}function U6(ss){ss=ss|0,ss=is[ss+12>>2]|0,ss|0&&y0(ss)}function H6(ss){ss=ss|0,y0(ss)}function W6(){var ss=0;return as[8088]|0||(Q6(11076),Z0(25,11076,$s|0)|0,ss=8088,is[ss>>2]=1,is[ss+4>>2]=0),11076}function V6(ss,ds){ss=ss|0,ds=ds|0,is[ss>>2]=Y6()|0,is[ss+4>>2]=X6()|0,is[ss+12>>2]=ds,is[ss+8>>2]=q6()|0,is[ss+32>>2]=10}function Y6(){return 11745}function X6(){return 1940}function q6(){return tS()|0}function K6(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,(Cm(_s,896)|0)==512?ps|0&&(Z6(ps),y0(ps)):ds|0&&y0(ds)}function Z6(ss){ss=ss|0,ss=is[ss+4>>2]|0,ss|0&&Am(ss)}function Q6(ss){ss=ss|0,S0(ss)}function f2(ss,ds){ss=ss|0,ds=ds|0,is[ss>>2]=ds}function F$(ss){return ss=ss|0,is[ss>>2]|0}function J6(ss){return ss=ss|0,as[is[ss>>2]>>0]|0}function eB(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;ps=ms,ms=ms+16|0,_s=ps,is[_s>>2]=is[ss>>2],tB(ds,_s)|0,ms=ps}function tB(ss,ds){ss=ss|0,ds=ds|0;var ps=0;return ps=rB(is[ss>>2]|0,ds)|0,ds=ss+4|0,is[(is[ds>>2]|0)+8>>2]=ps,is[(is[ds>>2]|0)+8>>2]|0}function rB(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;return ps=ms,ms=ms+16|0,_s=ps,R1(_s),ss=Fp(ss)|0,ds=nB(ss,is[ds>>2]|0)|0,B1(_s),ms=ps,ds|0}function R1(ss){ss=ss|0,is[ss>>2]=is[2701],is[ss+4>>2]=is[2703]}function nB(ss,ds){ss=ss|0,ds=ds|0;var ps=0;return ps=Rp(iB()|0)|0,py(0,ps|0,ss|0,L$(ds)|0)|0}function B1(ss){ss=ss|0,CC(is[ss>>2]|0,is[ss+4>>2]|0)}function iB(){var ss=0;return as[8096]|0||(aB(11120),ss=8096,is[ss>>2]=1,is[ss+4>>2]=0),11120}function aB(ss){ss=ss|0,w1(ss,oB()|0,1)}function oB(){return 1948}function sB(){uB()}function uB(){var ss=0,ds=0,ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0,Kl=0,Gl=0,Rl=0;if(Gl=ms,ms=ms+16|0,Bs=Gl+4|0,Hs=Gl,k2(65536,10804,is[2702]|0,10812),ps=uC()|0,ds=is[ps>>2]|0,ss=is[ds>>2]|0,ss|0)for(_s=is[ps+8>>2]|0,ps=is[ps+4>>2]|0;fp(ss|0,us[ps>>0]|0|0,as[_s>>0]|0),ds=ds+4|0,ss=is[ds>>2]|0,ss;)_s=_s+1|0,ps=ps+1|0;if(ss=lC()|0,ds=is[ss>>2]|0,ds|0)do Tp(ds|0,is[ss+4>>2]|0),ss=ss+8|0,ds=is[ss>>2]|0;while(ds|0);Tp(lB()|0,5167),Gs=t_()|0,ss=is[Gs>>2]|0;e:do if(ss|0){do fB(is[ss+4>>2]|0),ss=is[ss>>2]|0;while(ss|0);if(ss=is[Gs>>2]|0,ss|0){Ns=Gs;do{for(;Es=ss,ss=is[ss>>2]|0,Es=is[Es+4>>2]|0,!!(cB(Es)|0);)if(is[Hs>>2]=Ns,is[Bs>>2]=is[Hs>>2],dB(Gs,Bs)|0,!ss)break e;if(hB(Es),Ns=is[Ns>>2]|0,ds=FC(Es)|0,ws=f_()|0,Ts=ms,ms=ms+((1*(ds<<2)|0)+15&-16)|0,Ls=ms,ms=ms+((1*(ds<<2)|0)+15&-16)|0,ds=is[(EC(Es)|0)>>2]|0,ds|0)for(ps=Ts,_s=Ls;is[ps>>2]=is[(r_(is[ds+4>>2]|0)|0)>>2],is[_s>>2]=is[ds+8>>2],ds=is[ds>>2]|0,ds;)ps=ps+4|0,_s=_s+4|0;Rl=r_(Es)|0,ds=vB(Es)|0,ps=FC(Es)|0,_s=pB(Es)|0,j1(Rl|0,ds|0,Ts|0,Ls|0,ps|0,_s|0,b$(Es)|0),s1(ws|0)}while(ss|0)}}while(!1);if(ss=is[(C$()|0)>>2]|0,ss|0)do Rl=ss+4|0,Gs=T$(Rl)|0,Es=xx(Gs)|0,ws=yx(Gs)|0,Ts=(_x(Gs)|0)+1|0,Ls=oS(Gs)|0,Ns=GC(Rl)|0,Gs=Tv(Gs)|0,Bs=nS(Rl)|0,Hs=G$(Rl)|0,v1(0,Es|0,ws|0,Ts|0,Ls|0,Ns|0,Gs|0,Bs|0,Hs|0,j$(Rl)|0),ss=is[ss>>2]|0;while(ss|0);ss=is[(t_()|0)>>2]|0;e:do if(ss|0){t:for(;;){if(ds=is[ss+4>>2]|0,ds|0&&(yl=is[(r_(ds)|0)>>2]|0,Kl=is[(SC(ds)|0)>>2]|0,Kl|0)){ps=Kl;do{ds=ps+4|0,_s=T$(ds)|0;r:do if(_s|0)switch(Tv(_s)|0){case 0:break t;case 4:case 3:case 2:{Ls=xx(_s)|0,Ns=yx(_s)|0,Gs=(_x(_s)|0)+1|0,Bs=oS(_s)|0,Hs=Tv(_s)|0,Rl=nS(ds)|0,v1(yl|0,Ls|0,Ns|0,Gs|0,Bs|0,0,Hs|0,Rl|0,G$(ds)|0,j$(ds)|0);break r}case 1:{Ts=xx(_s)|0,Ls=yx(_s)|0,Ns=(_x(_s)|0)+1|0,Gs=oS(_s)|0,Bs=GC(ds)|0,Hs=Tv(_s)|0,Rl=nS(ds)|0,v1(yl|0,Ts|0,Ls|0,Ns|0,Gs|0,Bs|0,Hs|0,Rl|0,G$(ds)|0,j$(ds)|0);break r}case 5:{Gs=xx(_s)|0,Bs=yx(_s)|0,Hs=(_x(_s)|0)+1|0,Rl=oS(_s)|0,v1(yl|0,Gs|0,Bs|0,Hs|0,Rl|0,gB(_s)|0,Tv(_s)|0,0,0,0);break r}default:break r}while(!1);ps=is[ps>>2]|0}while(ps|0)}if(ss=is[ss>>2]|0,!ss)break e}yv()}while(!1);n2(),ms=Gl}function lB(){return 11703}function fB(ss){ss=ss|0,as[ss+40>>0]=0}function cB(ss){return ss=ss|0,(as[ss+40>>0]|0)!=0|0}function dB(ss,ds){return ss=ss|0,ds=ds|0,ds=mB(ds)|0,ss=is[ds>>2]|0,is[ds>>2]=is[ss>>2],y0(ss),is[ds>>2]|0}function hB(ss){ss=ss|0,as[ss+40>>0]=1}function FC(ss){return ss=ss|0,is[ss+20>>2]|0}function vB(ss){return ss=ss|0,is[ss+8>>2]|0}function pB(ss){return ss=ss|0,is[ss+32>>2]|0}function oS(ss){return ss=ss|0,is[ss+4>>2]|0}function GC(ss){return ss=ss|0,is[ss+4>>2]|0}function G$(ss){return ss=ss|0,is[ss+8>>2]|0}function j$(ss){return ss=ss|0,is[ss+16>>2]|0}function gB(ss){return ss=ss|0,is[ss+20>>2]|0}function mB(ss){return ss=ss|0,is[ss>>2]|0}function sS(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0,Kl=0,Gl=0,Rl=0,a0=0,r0=0,f0=0,Wl=0,Xl=0,W0=0;W0=ms,ms=ms+16|0,yl=W0;do if(ss>>>0<245){if(Gs=ss>>>0<11?16:ss+11&-8,ss=Gs>>>3,Hs=is[2783]|0,ps=Hs>>>ss,ps&3|0)return ds=(ps&1^1)+ss|0,ss=11172+(ds<<1<<2)|0,ps=ss+8|0,_s=is[ps>>2]|0,Es=_s+8|0,ws=is[Es>>2]|0,(ss|0)==(ws|0)?is[2783]=Hs&~(1<<ds):(is[ws+12>>2]=ss,is[ps>>2]=ws),Xl=ds<<3,is[_s+4>>2]=Xl|3,Xl=_s+Xl+4|0,is[Xl>>2]=is[Xl>>2]|1,Xl=Es,ms=W0,Xl|0;if(Bs=is[2785]|0,Gs>>>0>Bs>>>0){if(ps|0)return ds=2<<ss,ds=ps<<ss&(ds|0-ds),ds=(ds&0-ds)+-1|0,Ts=ds>>>12&16,ds=ds>>>Ts,ps=ds>>>5&8,ds=ds>>>ps,Es=ds>>>2&4,ds=ds>>>Es,ss=ds>>>1&2,ds=ds>>>ss,_s=ds>>>1&1,_s=(ps|Ts|Es|ss|_s)+(ds>>>_s)|0,ds=11172+(_s<<1<<2)|0,ss=ds+8|0,Es=is[ss>>2]|0,Ts=Es+8|0,ps=is[Ts>>2]|0,(ds|0)==(ps|0)?(ss=Hs&~(1<<_s),is[2783]=ss):(is[ps+12>>2]=ds,is[ss>>2]=ps,ss=Hs),ws=(_s<<3)-Gs|0,is[Es+4>>2]=Gs|3,_s=Es+Gs|0,is[_s+4>>2]=ws|1,is[_s+ws>>2]=ws,Bs|0&&(Es=is[2788]|0,ds=Bs>>>3,ps=11172+(ds<<1<<2)|0,ds=1<<ds,ss&ds?(ss=ps+8|0,ds=is[ss>>2]|0):(is[2783]=ss|ds,ds=ps,ss=ps+8|0),is[ss>>2]=Es,is[ds+12>>2]=Es,is[Es+8>>2]=ds,is[Es+12>>2]=ps),is[2785]=ws,is[2788]=_s,Xl=Ts,ms=W0,Xl|0;if(Ls=is[2784]|0,Ls){if(ps=(Ls&0-Ls)+-1|0,Ts=ps>>>12&16,ps=ps>>>Ts,ws=ps>>>5&8,ps=ps>>>ws,Ns=ps>>>2&4,ps=ps>>>Ns,_s=ps>>>1&2,ps=ps>>>_s,ss=ps>>>1&1,ss=is[11436+((ws|Ts|Ns|_s|ss)+(ps>>>ss)<<2)>>2]|0,ps=(is[ss+4>>2]&-8)-Gs|0,_s=is[ss+16+(((is[ss+16>>2]|0)==0&1)<<2)>>2]|0,!_s)Ns=ss,ws=ps;else{do Ts=(is[_s+4>>2]&-8)-Gs|0,Ns=Ts>>>0<ps>>>0,ps=Ns?Ts:ps,ss=Ns?_s:ss,_s=is[_s+16+(((is[_s+16>>2]|0)==0&1)<<2)>>2]|0;while(_s|0);Ns=ss,ws=ps}if(Ts=Ns+Gs|0,Ns>>>0<Ts>>>0){Es=is[Ns+24>>2]|0,ds=is[Ns+12>>2]|0;do if((ds|0)==(Ns|0)){if(ss=Ns+20|0,ds=is[ss>>2]|0,!ds&&(ss=Ns+16|0,ds=is[ss>>2]|0,!ds)){ps=0;break}for(;;){if(ps=ds+20|0,_s=is[ps>>2]|0,_s|0){ds=_s,ss=ps;continue}if(ps=ds+16|0,_s=is[ps>>2]|0,_s)ds=_s,ss=ps;else break}is[ss>>2]=0,ps=ds}else ps=is[Ns+8>>2]|0,is[ps+12>>2]=ds,is[ds+8>>2]=ps,ps=ds;while(!1);do if(Es|0){if(ds=is[Ns+28>>2]|0,ss=11436+(ds<<2)|0,(Ns|0)==(is[ss>>2]|0)){if(is[ss>>2]=ps,!ps){is[2784]=Ls&~(1<<ds);break}}else if(is[Es+16+(((is[Es+16>>2]|0)!=(Ns|0)&1)<<2)>>2]=ps,!ps)break;is[ps+24>>2]=Es,ds=is[Ns+16>>2]|0,ds|0&&(is[ps+16>>2]=ds,is[ds+24>>2]=ps),ds=is[Ns+20>>2]|0,ds|0&&(is[ps+20>>2]=ds,is[ds+24>>2]=ps)}while(!1);return ws>>>0<16?(Xl=ws+Gs|0,is[Ns+4>>2]=Xl|3,Xl=Ns+Xl+4|0,is[Xl>>2]=is[Xl>>2]|1):(is[Ns+4>>2]=Gs|3,is[Ts+4>>2]=ws|1,is[Ts+ws>>2]=ws,Bs|0&&(_s=is[2788]|0,ds=Bs>>>3,ps=11172+(ds<<1<<2)|0,ds=1<<ds,Hs&ds?(ss=ps+8|0,ds=is[ss>>2]|0):(is[2783]=Hs|ds,ds=ps,ss=ps+8|0),is[ss>>2]=_s,is[ds+12>>2]=_s,is[_s+8>>2]=ds,is[_s+12>>2]=ps),is[2785]=ws,is[2788]=Ts),Xl=Ns+8|0,ms=W0,Xl|0}else Hs=Gs}else Hs=Gs}else Hs=Gs}else if(ss>>>0<=4294967231)if(ss=ss+11|0,Gs=ss&-8,Ns=is[2784]|0,Ns){_s=0-Gs|0,ss=ss>>>8,ss?Gs>>>0>16777215?Ls=31:(Hs=(ss+1048320|0)>>>16&8,Wl=ss<<Hs,Bs=(Wl+520192|0)>>>16&4,Wl=Wl<<Bs,Ls=(Wl+245760|0)>>>16&2,Ls=14-(Bs|Hs|Ls)+(Wl<<Ls>>>15)|0,Ls=Gs>>>(Ls+7|0)&1|Ls<<1):Ls=0,ps=is[11436+(Ls<<2)>>2]|0;e:do if(!ps)ps=0,ss=0,Wl=57;else for(ss=0,Ts=Gs<<((Ls|0)==31?0:25-(Ls>>>1)|0),ws=0;;){if(Es=(is[ps+4>>2]&-8)-Gs|0,Es>>>0<_s>>>0)if(Es)ss=ps,_s=Es;else{ss=ps,_s=0,Es=ps,Wl=61;break e}if(Es=is[ps+20>>2]|0,ps=is[ps+16+(Ts>>>31<<2)>>2]|0,ws=(Es|0)==0|(Es|0)==(ps|0)?ws:Es,Es=(ps|0)==0,Es){ps=ws,Wl=57;break}else Ts=Ts<<((Es^1)&1)}while(!1);if((Wl|0)==57){if((ps|0)==0&(ss|0)==0){if(ss=2<<Ls,ss=Ns&(ss|0-ss),!ss){Hs=Gs;break}Hs=(ss&0-ss)+-1|0,Ts=Hs>>>12&16,Hs=Hs>>>Ts,ws=Hs>>>5&8,Hs=Hs>>>ws,Ls=Hs>>>2&4,Hs=Hs>>>Ls,Bs=Hs>>>1&2,Hs=Hs>>>Bs,ps=Hs>>>1&1,ss=0,ps=is[11436+((ws|Ts|Ls|Bs|ps)+(Hs>>>ps)<<2)>>2]|0}ps?(Es=ps,Wl=61):(Ls=ss,Ts=_s)}if((Wl|0)==61)for(;;)if(Wl=0,ps=(is[Es+4>>2]&-8)-Gs|0,Hs=ps>>>0<_s>>>0,ps=Hs?ps:_s,ss=Hs?Es:ss,Es=is[Es+16+(((is[Es+16>>2]|0)==0&1)<<2)>>2]|0,Es)_s=ps,Wl=61;else{Ls=ss,Ts=ps;break}if(Ls|0&&Ts>>>0<((is[2785]|0)-Gs|0)>>>0){if(ws=Ls+Gs|0,Ls>>>0>=ws>>>0)return Xl=0,ms=W0,Xl|0;Es=is[Ls+24>>2]|0,ds=is[Ls+12>>2]|0;do if((ds|0)==(Ls|0)){if(ss=Ls+20|0,ds=is[ss>>2]|0,!ds&&(ss=Ls+16|0,ds=is[ss>>2]|0,!ds)){ds=0;break}for(;;){if(ps=ds+20|0,_s=is[ps>>2]|0,_s|0){ds=_s,ss=ps;continue}if(ps=ds+16|0,_s=is[ps>>2]|0,_s)ds=_s,ss=ps;else break}is[ss>>2]=0}else Xl=is[Ls+8>>2]|0,is[Xl+12>>2]=ds,is[ds+8>>2]=Xl;while(!1);do if(Es){if(ss=is[Ls+28>>2]|0,ps=11436+(ss<<2)|0,(Ls|0)==(is[ps>>2]|0)){if(is[ps>>2]=ds,!ds){_s=Ns&~(1<<ss),is[2784]=_s;break}}else if(is[Es+16+(((is[Es+16>>2]|0)!=(Ls|0)&1)<<2)>>2]=ds,!ds){_s=Ns;break}is[ds+24>>2]=Es,ss=is[Ls+16>>2]|0,ss|0&&(is[ds+16>>2]=ss,is[ss+24>>2]=ds),ss=is[Ls+20>>2]|0,ss&&(is[ds+20>>2]=ss,is[ss+24>>2]=ds),_s=Ns}else _s=Ns;while(!1);do if(Ts>>>0>=16){if(is[Ls+4>>2]=Gs|3,is[ws+4>>2]=Ts|1,is[ws+Ts>>2]=Ts,ds=Ts>>>3,Ts>>>0<256){ps=11172+(ds<<1<<2)|0,ss=is[2783]|0,ds=1<<ds,ss&ds?(ss=ps+8|0,ds=is[ss>>2]|0):(is[2783]=ss|ds,ds=ps,ss=ps+8|0),is[ss>>2]=ws,is[ds+12>>2]=ws,is[ws+8>>2]=ds,is[ws+12>>2]=ps;break}if(ds=Ts>>>8,ds?Ts>>>0>16777215?ds=31:(Wl=(ds+1048320|0)>>>16&8,Xl=ds<<Wl,f0=(Xl+520192|0)>>>16&4,Xl=Xl<<f0,ds=(Xl+245760|0)>>>16&2,ds=14-(f0|Wl|ds)+(Xl<<ds>>>15)|0,ds=Ts>>>(ds+7|0)&1|ds<<1):ds=0,ps=11436+(ds<<2)|0,is[ws+28>>2]=ds,ss=ws+16|0,is[ss+4>>2]=0,is[ss>>2]=0,ss=1<<ds,!(_s&ss)){is[2784]=_s|ss,is[ps>>2]=ws,is[ws+24>>2]=ps,is[ws+12>>2]=ws,is[ws+8>>2]=ws;break}for(ss=Ts<<((ds|0)==31?0:25-(ds>>>1)|0),ps=is[ps>>2]|0;;){if((is[ps+4>>2]&-8|0)==(Ts|0)){Wl=97;break}if(_s=ps+16+(ss>>>31<<2)|0,ds=is[_s>>2]|0,ds)ss=ss<<1,ps=ds;else{Wl=96;break}}if((Wl|0)==96){is[_s>>2]=ws,is[ws+24>>2]=ps,is[ws+12>>2]=ws,is[ws+8>>2]=ws;break}else if((Wl|0)==97){Wl=ps+8|0,Xl=is[Wl>>2]|0,is[Xl+12>>2]=ws,is[Wl>>2]=ws,is[ws+8>>2]=Xl,is[ws+12>>2]=ps,is[ws+24>>2]=0;break}}else Xl=Ts+Gs|0,is[Ls+4>>2]=Xl|3,Xl=Ls+Xl+4|0,is[Xl>>2]=is[Xl>>2]|1;while(!1);return Xl=Ls+8|0,ms=W0,Xl|0}else Hs=Gs}else Hs=Gs;else Hs=-1;while(!1);if(ps=is[2785]|0,ps>>>0>=Hs>>>0)return ds=ps-Hs|0,ss=is[2788]|0,ds>>>0>15?(Xl=ss+Hs|0,is[2788]=Xl,is[2785]=ds,is[Xl+4>>2]=ds|1,is[Xl+ds>>2]=ds,is[ss+4>>2]=Hs|3):(is[2785]=0,is[2788]=0,is[ss+4>>2]=ps|3,Xl=ss+ps+4|0,is[Xl>>2]=is[Xl>>2]|1),Xl=ss+8|0,ms=W0,Xl|0;if(Ts=is[2786]|0,Ts>>>0>Hs>>>0)return f0=Ts-Hs|0,is[2786]=f0,Xl=is[2789]|0,Wl=Xl+Hs|0,is[2789]=Wl,is[Wl+4>>2]=f0|1,is[Xl+4>>2]=Hs|3,Xl=Xl+8|0,ms=W0,Xl|0;if(is[2901]|0?ss=is[2903]|0:(is[2903]=4096,is[2902]=4096,is[2904]=-1,is[2905]=-1,is[2906]=0,is[2894]=0,ss=yl&-16^1431655768,is[yl>>2]=ss,is[2901]=ss,ss=4096),Ls=Hs+48|0,Ns=Hs+47|0,ws=ss+Ns|0,Es=0-ss|0,Gs=ws&Es,Gs>>>0<=Hs>>>0||(ss=is[2893]|0,ss|0&&(Bs=is[2891]|0,yl=Bs+Gs|0,yl>>>0<=Bs>>>0|yl>>>0>ss>>>0)))return Xl=0,ms=W0,Xl|0;e:do if(is[2894]&4)ds=0,Wl=133;else{ps=is[2789]|0;t:do if(ps){for(_s=11580;ss=is[_s>>2]|0,!(ss>>>0<=ps>>>0&&(Rl=_s+4|0,(ss+(is[Rl>>2]|0)|0)>>>0>ps>>>0));)if(ss=is[_s+8>>2]|0,ss)_s=ss;else{Wl=118;break t}if(ds=ws-Ts&Es,ds>>>0<2147483647)if(ss=Im(ds|0)|0,(ss|0)==((is[_s>>2]|0)+(is[Rl>>2]|0)|0)){if((ss|0)!=-1){Ts=ds,ws=ss,Wl=135;break e}}else _s=ss,Wl=126;else ds=0}else Wl=118;while(!1);do if((Wl|0)==118)if(ps=Im(0)|0,(ps|0)!=-1&&(ds=ps,Kl=is[2902]|0,Gl=Kl+-1|0,ds=(Gl&ds|0?(Gl+ds&0-Kl)-ds|0:0)+Gs|0,Kl=is[2891]|0,Gl=ds+Kl|0,ds>>>0>Hs>>>0&ds>>>0<2147483647)){if(Rl=is[2893]|0,Rl|0&&Gl>>>0<=Kl>>>0|Gl>>>0>Rl>>>0){ds=0;break}if(ss=Im(ds|0)|0,(ss|0)==(ps|0)){Ts=ds,ws=ps,Wl=135;break e}else _s=ss,Wl=126}else ds=0;while(!1);do if((Wl|0)==126){if(ps=0-ds|0,!(Ls>>>0>ds>>>0&(ds>>>0<2147483647&(_s|0)!=-1)))if((_s|0)==-1){ds=0;break}else{Ts=ds,ws=_s,Wl=135;break e}if(ss=is[2903]|0,ss=Ns-ds+ss&0-ss,ss>>>0>=2147483647){Ts=ds,ws=_s,Wl=135;break e}if((Im(ss|0)|0)==-1){Im(ps|0)|0,ds=0;break}else{Ts=ss+ds|0,ws=_s,Wl=135;break e}}while(!1);is[2894]=is[2894]|4,Wl=133}while(!1);if((Wl|0)==133&&Gs>>>0<2147483647&&(f0=Im(Gs|0)|0,Rl=Im(0)|0,a0=Rl-f0|0,r0=a0>>>0>(Hs+40|0)>>>0,!((f0|0)==-1|r0^1|f0>>>0<Rl>>>0&((f0|0)!=-1&(Rl|0)!=-1)^1))&&(Ts=r0?a0:ds,ws=f0,Wl=135),(Wl|0)==135){ds=(is[2891]|0)+Ts|0,is[2891]=ds,ds>>>0>(is[2892]|0)>>>0&&(is[2892]=ds),Ns=is[2789]|0;do if(Ns){for(ds=11580;;){if(ss=is[ds>>2]|0,ps=ds+4|0,_s=is[ps>>2]|0,(ws|0)==(ss+_s|0)){Wl=145;break}if(Es=is[ds+8>>2]|0,Es)ds=Es;else break}if((Wl|0)==145&&!(is[ds+12>>2]&8|0)&&Ns>>>0<ws>>>0&Ns>>>0>=ss>>>0){is[ps>>2]=_s+Ts,Xl=Ns+8|0,Xl=Xl&7|0?0-Xl&7:0,Wl=Ns+Xl|0,Xl=(is[2786]|0)+(Ts-Xl)|0,is[2789]=Wl,is[2786]=Xl,is[Wl+4>>2]=Xl|1,is[Wl+Xl+4>>2]=40,is[2790]=is[2905];break}for(ws>>>0<(is[2787]|0)>>>0&&(is[2787]=ws),ps=ws+Ts|0,ds=11580;;){if((is[ds>>2]|0)==(ps|0)){Wl=153;break}if(ss=is[ds+8>>2]|0,ss)ds=ss;else break}if((Wl|0)==153&&!(is[ds+12>>2]&8|0)){is[ds>>2]=ws,Bs=ds+4|0,is[Bs>>2]=(is[Bs>>2]|0)+Ts,Bs=ws+8|0,Bs=ws+(Bs&7|0?0-Bs&7:0)|0,ds=ps+8|0,ds=ps+(ds&7|0?0-ds&7:0)|0,Gs=Bs+Hs|0,Ls=ds-Bs-Hs|0,is[Bs+4>>2]=Hs|3;do if((ds|0)!=(Ns|0)){if((ds|0)==(is[2788]|0)){Xl=(is[2785]|0)+Ls|0,is[2785]=Xl,is[2788]=Gs,is[Gs+4>>2]=Xl|1,is[Gs+Xl>>2]=Xl;break}if(ss=is[ds+4>>2]|0,(ss&3|0)==1){Ts=ss&-8,_s=ss>>>3;e:do if(ss>>>0<256)if(ss=is[ds+8>>2]|0,ps=is[ds+12>>2]|0,(ps|0)==(ss|0)){is[2783]=is[2783]&~(1<<_s);break}else{is[ss+12>>2]=ps,is[ps+8>>2]=ss;break}else{ws=is[ds+24>>2]|0,ss=is[ds+12>>2]|0;do if((ss|0)==(ds|0)){if(_s=ds+16|0,ps=_s+4|0,ss=is[ps>>2]|0,!ss)if(ss=is[_s>>2]|0,ss)ps=_s;else{ss=0;break}for(;;){if(_s=ss+20|0,Es=is[_s>>2]|0,Es|0){ss=Es,ps=_s;continue}if(_s=ss+16|0,Es=is[_s>>2]|0,Es)ss=Es,ps=_s;else break}is[ps>>2]=0}else Xl=is[ds+8>>2]|0,is[Xl+12>>2]=ss,is[ss+8>>2]=Xl;while(!1);if(!ws)break;ps=is[ds+28>>2]|0,_s=11436+(ps<<2)|0;do if((ds|0)!=(is[_s>>2]|0)){if(is[ws+16+(((is[ws+16>>2]|0)!=(ds|0)&1)<<2)>>2]=ss,!ss)break e}else{if(is[_s>>2]=ss,ss|0)break;is[2784]=is[2784]&~(1<<ps);break e}while(!1);if(is[ss+24>>2]=ws,ps=ds+16|0,_s=is[ps>>2]|0,_s|0&&(is[ss+16>>2]=_s,is[_s+24>>2]=ss),ps=is[ps+4>>2]|0,!ps)break;is[ss+20>>2]=ps,is[ps+24>>2]=ss}while(!1);ds=ds+Ts|0,Es=Ts+Ls|0}else Es=Ls;if(ds=ds+4|0,is[ds>>2]=is[ds>>2]&-2,is[Gs+4>>2]=Es|1,is[Gs+Es>>2]=Es,ds=Es>>>3,Es>>>0<256){ps=11172+(ds<<1<<2)|0,ss=is[2783]|0,ds=1<<ds,ss&ds?(ss=ps+8|0,ds=is[ss>>2]|0):(is[2783]=ss|ds,ds=ps,ss=ps+8|0),is[ss>>2]=Gs,is[ds+12>>2]=Gs,is[Gs+8>>2]=ds,is[Gs+12>>2]=ps;break}ds=Es>>>8;do if(!ds)ds=0;else{if(Es>>>0>16777215){ds=31;break}Wl=(ds+1048320|0)>>>16&8,Xl=ds<<Wl,f0=(Xl+520192|0)>>>16&4,Xl=Xl<<f0,ds=(Xl+245760|0)>>>16&2,ds=14-(f0|Wl|ds)+(Xl<<ds>>>15)|0,ds=Es>>>(ds+7|0)&1|ds<<1}while(!1);if(_s=11436+(ds<<2)|0,is[Gs+28>>2]=ds,ss=Gs+16|0,is[ss+4>>2]=0,is[ss>>2]=0,ss=is[2784]|0,ps=1<<ds,!(ss&ps)){is[2784]=ss|ps,is[_s>>2]=Gs,is[Gs+24>>2]=_s,is[Gs+12>>2]=Gs,is[Gs+8>>2]=Gs;break}for(ss=Es<<((ds|0)==31?0:25-(ds>>>1)|0),ps=is[_s>>2]|0;;){if((is[ps+4>>2]&-8|0)==(Es|0)){Wl=194;break}if(_s=ps+16+(ss>>>31<<2)|0,ds=is[_s>>2]|0,ds)ss=ss<<1,ps=ds;else{Wl=193;break}}if((Wl|0)==193){is[_s>>2]=Gs,is[Gs+24>>2]=ps,is[Gs+12>>2]=Gs,is[Gs+8>>2]=Gs;break}else if((Wl|0)==194){Wl=ps+8|0,Xl=is[Wl>>2]|0,is[Xl+12>>2]=Gs,is[Wl>>2]=Gs,is[Gs+8>>2]=Xl,is[Gs+12>>2]=ps,is[Gs+24>>2]=0;break}}else Xl=(is[2786]|0)+Ls|0,is[2786]=Xl,is[2789]=Gs,is[Gs+4>>2]=Xl|1;while(!1);return Xl=Bs+8|0,ms=W0,Xl|0}for(ds=11580;ss=is[ds>>2]|0,!(ss>>>0<=Ns>>>0&&(Xl=ss+(is[ds+4>>2]|0)|0,Xl>>>0>Ns>>>0));)ds=is[ds+8>>2]|0;Es=Xl+-47|0,ss=Es+8|0,ss=Es+(ss&7|0?0-ss&7:0)|0,Es=Ns+16|0,ss=ss>>>0<Es>>>0?Ns:ss,ds=ss+8|0,ps=ws+8|0,ps=ps&7|0?0-ps&7:0,Wl=ws+ps|0,ps=Ts+-40-ps|0,is[2789]=Wl,is[2786]=ps,is[Wl+4>>2]=ps|1,is[Wl+ps+4>>2]=40,is[2790]=is[2905],ps=ss+4|0,is[ps>>2]=27,is[ds>>2]=is[2895],is[ds+4>>2]=is[2896],is[ds+8>>2]=is[2897],is[ds+12>>2]=is[2898],is[2895]=ws,is[2896]=Ts,is[2898]=0,is[2897]=ds,ds=ss+24|0;do Wl=ds,ds=ds+4|0,is[ds>>2]=7;while((Wl+8|0)>>>0<Xl>>>0);if((ss|0)!=(Ns|0)){if(ws=ss-Ns|0,is[ps>>2]=is[ps>>2]&-2,is[Ns+4>>2]=ws|1,is[ss>>2]=ws,ds=ws>>>3,ws>>>0<256){ps=11172+(ds<<1<<2)|0,ss=is[2783]|0,ds=1<<ds,ss&ds?(ss=ps+8|0,ds=is[ss>>2]|0):(is[2783]=ss|ds,ds=ps,ss=ps+8|0),is[ss>>2]=Ns,is[ds+12>>2]=Ns,is[Ns+8>>2]=ds,is[Ns+12>>2]=ps;break}if(ds=ws>>>8,ds?ws>>>0>16777215?ps=31:(Wl=(ds+1048320|0)>>>16&8,Xl=ds<<Wl,f0=(Xl+520192|0)>>>16&4,Xl=Xl<<f0,ps=(Xl+245760|0)>>>16&2,ps=14-(f0|Wl|ps)+(Xl<<ps>>>15)|0,ps=ws>>>(ps+7|0)&1|ps<<1):ps=0,_s=11436+(ps<<2)|0,is[Ns+28>>2]=ps,is[Ns+20>>2]=0,is[Es>>2]=0,ds=is[2784]|0,ss=1<<ps,!(ds&ss)){is[2784]=ds|ss,is[_s>>2]=Ns,is[Ns+24>>2]=_s,is[Ns+12>>2]=Ns,is[Ns+8>>2]=Ns;break}for(ss=ws<<((ps|0)==31?0:25-(ps>>>1)|0),ps=is[_s>>2]|0;;){if((is[ps+4>>2]&-8|0)==(ws|0)){Wl=216;break}if(_s=ps+16+(ss>>>31<<2)|0,ds=is[_s>>2]|0,ds)ss=ss<<1,ps=ds;else{Wl=215;break}}if((Wl|0)==215){is[_s>>2]=Ns,is[Ns+24>>2]=ps,is[Ns+12>>2]=Ns,is[Ns+8>>2]=Ns;break}else if((Wl|0)==216){Wl=ps+8|0,Xl=is[Wl>>2]|0,is[Xl+12>>2]=Ns,is[Wl>>2]=Ns,is[Ns+8>>2]=Xl,is[Ns+12>>2]=ps,is[Ns+24>>2]=0;break}}}else{Xl=is[2787]|0,(Xl|0)==0|ws>>>0<Xl>>>0&&(is[2787]=ws),is[2895]=ws,is[2896]=Ts,is[2898]=0,is[2792]=is[2901],is[2791]=-1,ds=0;do Xl=11172+(ds<<1<<2)|0,is[Xl+12>>2]=Xl,is[Xl+8>>2]=Xl,ds=ds+1|0;while((ds|0)!=32);Xl=ws+8|0,Xl=Xl&7|0?0-Xl&7:0,Wl=ws+Xl|0,Xl=Ts+-40-Xl|0,is[2789]=Wl,is[2786]=Xl,is[Wl+4>>2]=Xl|1,is[Wl+Xl+4>>2]=40,is[2790]=is[2905]}while(!1);if(ds=is[2786]|0,ds>>>0>Hs>>>0)return f0=ds-Hs|0,is[2786]=f0,Xl=is[2789]|0,Wl=Xl+Hs|0,is[2789]=Wl,is[Wl+4>>2]=f0|1,is[Xl+4>>2]=Hs|3,Xl=Xl+8|0,ms=W0,Xl|0}return is[(i_()|0)>>2]=12,Xl=0,ms=W0,Xl|0}function uS(ss){ss=ss|0;var ds=0,ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0;if(ss){ps=ss+-8|0,Es=is[2787]|0,ss=is[ss+-4>>2]|0,ds=ss&-8,Ns=ps+ds|0;do if(ss&1)Ls=ps,Ts=ps;else{if(_s=is[ps>>2]|0,!(ss&3)||(Ts=ps+(0-_s)|0,ws=_s+ds|0,Ts>>>0<Es>>>0))return;if((Ts|0)==(is[2788]|0)){if(ss=Ns+4|0,ds=is[ss>>2]|0,(ds&3|0)!=3){Ls=Ts,ds=ws;break}is[2785]=ws,is[ss>>2]=ds&-2,is[Ts+4>>2]=ws|1,is[Ts+ws>>2]=ws;return}if(ps=_s>>>3,_s>>>0<256)if(ss=is[Ts+8>>2]|0,ds=is[Ts+12>>2]|0,(ds|0)==(ss|0)){is[2783]=is[2783]&~(1<<ps),Ls=Ts,ds=ws;break}else{is[ss+12>>2]=ds,is[ds+8>>2]=ss,Ls=Ts,ds=ws;break}Es=is[Ts+24>>2]|0,ss=is[Ts+12>>2]|0;do if((ss|0)==(Ts|0)){if(ps=Ts+16|0,ds=ps+4|0,ss=is[ds>>2]|0,!ss)if(ss=is[ps>>2]|0,ss)ds=ps;else{ss=0;break}for(;;){if(ps=ss+20|0,_s=is[ps>>2]|0,_s|0){ss=_s,ds=ps;continue}if(ps=ss+16|0,_s=is[ps>>2]|0,_s)ss=_s,ds=ps;else break}is[ds>>2]=0}else Ls=is[Ts+8>>2]|0,is[Ls+12>>2]=ss,is[ss+8>>2]=Ls;while(!1);if(Es){if(ds=is[Ts+28>>2]|0,ps=11436+(ds<<2)|0,(Ts|0)==(is[ps>>2]|0)){if(is[ps>>2]=ss,!ss){is[2784]=is[2784]&~(1<<ds),Ls=Ts,ds=ws;break}}else if(is[Es+16+(((is[Es+16>>2]|0)!=(Ts|0)&1)<<2)>>2]=ss,!ss){Ls=Ts,ds=ws;break}is[ss+24>>2]=Es,ds=Ts+16|0,ps=is[ds>>2]|0,ps|0&&(is[ss+16>>2]=ps,is[ps+24>>2]=ss),ds=is[ds+4>>2]|0,ds?(is[ss+20>>2]=ds,is[ds+24>>2]=ss,Ls=Ts,ds=ws):(Ls=Ts,ds=ws)}else Ls=Ts,ds=ws}while(!1);if(!(Ts>>>0>=Ns>>>0)&&(ss=Ns+4|0,_s=is[ss>>2]|0,!!(_s&1))){if(_s&2)is[ss>>2]=_s&-2,is[Ls+4>>2]=ds|1,is[Ts+ds>>2]=ds,Es=ds;else{if(ss=is[2788]|0,(Ns|0)==(is[2789]|0)){if(Ns=(is[2786]|0)+ds|0,is[2786]=Ns,is[2789]=Ls,is[Ls+4>>2]=Ns|1,(Ls|0)!=(ss|0))return;is[2788]=0,is[2785]=0;return}if((Ns|0)==(ss|0)){Ns=(is[2785]|0)+ds|0,is[2785]=Ns,is[2788]=Ts,is[Ls+4>>2]=Ns|1,is[Ts+Ns>>2]=Ns;return}Es=(_s&-8)+ds|0,ps=_s>>>3;do if(_s>>>0<256)if(ds=is[Ns+8>>2]|0,ss=is[Ns+12>>2]|0,(ss|0)==(ds|0)){is[2783]=is[2783]&~(1<<ps);break}else{is[ds+12>>2]=ss,is[ss+8>>2]=ds;break}else{ws=is[Ns+24>>2]|0,ss=is[Ns+12>>2]|0;do if((ss|0)==(Ns|0)){if(ps=Ns+16|0,ds=ps+4|0,ss=is[ds>>2]|0,!ss)if(ss=is[ps>>2]|0,ss)ds=ps;else{ps=0;break}for(;;){if(ps=ss+20|0,_s=is[ps>>2]|0,_s|0){ss=_s,ds=ps;continue}if(ps=ss+16|0,_s=is[ps>>2]|0,_s)ss=_s,ds=ps;else break}is[ds>>2]=0,ps=ss}else ps=is[Ns+8>>2]|0,is[ps+12>>2]=ss,is[ss+8>>2]=ps,ps=ss;while(!1);if(ws|0){if(ss=is[Ns+28>>2]|0,ds=11436+(ss<<2)|0,(Ns|0)==(is[ds>>2]|0)){if(is[ds>>2]=ps,!ps){is[2784]=is[2784]&~(1<<ss);break}}else if(is[ws+16+(((is[ws+16>>2]|0)!=(Ns|0)&1)<<2)>>2]=ps,!ps)break;is[ps+24>>2]=ws,ss=Ns+16|0,ds=is[ss>>2]|0,ds|0&&(is[ps+16>>2]=ds,is[ds+24>>2]=ps),ss=is[ss+4>>2]|0,ss|0&&(is[ps+20>>2]=ss,is[ss+24>>2]=ps)}}while(!1);if(is[Ls+4>>2]=Es|1,is[Ts+Es>>2]=Es,(Ls|0)==(is[2788]|0)){is[2785]=Es;return}}if(ss=Es>>>3,Es>>>0<256){ps=11172+(ss<<1<<2)|0,ds=is[2783]|0,ss=1<<ss,ds&ss?(ds=ps+8|0,ss=is[ds>>2]|0):(is[2783]=ds|ss,ss=ps,ds=ps+8|0),is[ds>>2]=Ls,is[ss+12>>2]=Ls,is[Ls+8>>2]=ss,is[Ls+12>>2]=ps;return}ss=Es>>>8,ss?Es>>>0>16777215?ss=31:(Ts=(ss+1048320|0)>>>16&8,Ns=ss<<Ts,ws=(Ns+520192|0)>>>16&4,Ns=Ns<<ws,ss=(Ns+245760|0)>>>16&2,ss=14-(ws|Ts|ss)+(Ns<<ss>>>15)|0,ss=Es>>>(ss+7|0)&1|ss<<1):ss=0,_s=11436+(ss<<2)|0,is[Ls+28>>2]=ss,is[Ls+20>>2]=0,is[Ls+16>>2]=0,ds=is[2784]|0,ps=1<<ss;do if(ds&ps){for(ds=Es<<((ss|0)==31?0:25-(ss>>>1)|0),ps=is[_s>>2]|0;;){if((is[ps+4>>2]&-8|0)==(Es|0)){ss=73;break}if(_s=ps+16+(ds>>>31<<2)|0,ss=is[_s>>2]|0,ss)ds=ds<<1,ps=ss;else{ss=72;break}}if((ss|0)==72){is[_s>>2]=Ls,is[Ls+24>>2]=ps,is[Ls+12>>2]=Ls,is[Ls+8>>2]=Ls;break}else if((ss|0)==73){Ts=ps+8|0,Ns=is[Ts>>2]|0,is[Ns+12>>2]=Ls,is[Ts>>2]=Ls,is[Ls+8>>2]=Ns,is[Ls+12>>2]=ps,is[Ls+24>>2]=0;break}}else is[2784]=ds|ps,is[_s>>2]=Ls,is[Ls+24>>2]=_s,is[Ls+12>>2]=Ls,is[Ls+8>>2]=Ls;while(!1);if(Ns=(is[2791]|0)+-1|0,is[2791]=Ns,!Ns)ss=11588;else return;for(;ss=is[ss>>2]|0,ss;)ss=ss+8|0;is[2791]=-1}}}function yB(){return 11628}function _B(ss){ss=ss|0;var ds=0,ps=0;return ds=ms,ms=ms+16|0,ps=ds,is[ps>>2]=SB(is[ss+60>>2]|0)|0,ss=lS(v_(6,ps|0)|0)|0,ms=ds,ss|0}function jC(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0,Kl=0;Hs=ms,ms=ms+48|0,Gs=Hs+16|0,ws=Hs,Es=Hs+32|0,Ls=ss+28|0,_s=is[Ls>>2]|0,is[Es>>2]=_s,Ns=ss+20|0,_s=(is[Ns>>2]|0)-_s|0,is[Es+4>>2]=_s,is[Es+8>>2]=ds,is[Es+12>>2]=ps,_s=_s+ps|0,Ts=ss+60|0,is[ws>>2]=is[Ts>>2],is[ws+4>>2]=Es,is[ws+8>>2]=2,ws=lS(Ax(146,ws|0)|0)|0;e:do if((_s|0)!=(ws|0)){for(ds=2;!((ws|0)<0);)if(_s=_s-ws|0,Kl=is[Es+4>>2]|0,yl=ws>>>0>Kl>>>0,Es=yl?Es+8|0:Es,ds=(yl<<31>>31)+ds|0,Kl=ws-(yl?Kl:0)|0,is[Es>>2]=(is[Es>>2]|0)+Kl,yl=Es+4|0,is[yl>>2]=(is[yl>>2]|0)-Kl,is[Gs>>2]=is[Ts>>2],is[Gs+4>>2]=Es,is[Gs+8>>2]=ds,ws=lS(Ax(146,Gs|0)|0)|0,(_s|0)==(ws|0)){Bs=3;break e}is[ss+16>>2]=0,is[Ls>>2]=0,is[Ns>>2]=0,is[ss>>2]=is[ss>>2]|32,(ds|0)==2?ps=0:ps=ps-(is[Es+4>>2]|0)|0}else Bs=3;while(!1);return(Bs|0)==3&&(Kl=is[ss+44>>2]|0,is[ss+16>>2]=Kl+(is[ss+48>>2]|0),is[Ls>>2]=Kl,is[Ns>>2]=Kl),ms=Hs,ps|0}function xB(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0;return Es=ms,ms=ms+32|0,ws=Es,_s=Es+20|0,is[ws>>2]=is[ss+60>>2],is[ws+4>>2]=0,is[ws+8>>2]=ds,is[ws+12>>2]=_s,is[ws+16>>2]=ps,(lS(pS(140,ws|0)|0)|0)<0?(is[_s>>2]=-1,ss=-1):ss=is[_s>>2]|0,ms=Es,ss|0}function lS(ss){return ss=ss|0,ss>>>0>4294963200&&(is[(i_()|0)>>2]=0-ss,ss=-1),ss|0}function i_(){return(EB()|0)+64|0}function EB(){return z$()|0}function z$(){return 2084}function SB(ss){return ss=ss|0,ss|0}function wB(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0;return Es=ms,ms=ms+32|0,_s=Es,is[ss+36>>2]=1,!(is[ss>>2]&64|0)&&(is[_s>>2]=is[ss+60>>2],is[_s+4>>2]=21523,is[_s+8>>2]=Es+16,c_(54,_s|0)|0)&&(as[ss+75>>0]=-1),_s=jC(ss,ds,ps)|0,ms=Es,_s|0}function zC(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;if(ps=as[ss>>0]|0,_s=as[ds>>0]|0,!(ps<<24>>24)||ps<<24>>24!=_s<<24>>24)ss=_s;else{do ss=ss+1|0,ds=ds+1|0,ps=as[ss>>0]|0,_s=as[ds>>0]|0;while(!(!(ps<<24>>24)||ps<<24>>24!=_s<<24>>24));ss=_s}return(ps&255)-(ss&255)|0}function $B(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0;e:do if(!ps)ss=0;else{for(;_s=as[ss>>0]|0,Es=as[ds>>0]|0,_s<<24>>24==Es<<24>>24;)if(ps=ps+-1|0,ps)ss=ss+1|0,ds=ds+1|0;else{ss=0;break e}ss=(_s&255)-(Es&255)|0}while(!1);return ss|0}function UC(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0,Kl=0,Gl=0,Rl=0;Rl=ms,ms=ms+224|0,Bs=Rl+120|0,Hs=Rl+80|0,Kl=Rl,Gl=Rl+136|0,_s=Hs,Es=_s+40|0;do is[_s>>2]=0,_s=_s+4|0;while((_s|0)<(Es|0));return is[Bs>>2]=is[ps>>2],(U$(0,ds,Bs,Kl,Hs)|0)<0?ps=-1:((is[ss+76>>2]|0)>-1?yl=MB(ss)|0:yl=0,ps=is[ss>>2]|0,Gs=ps&32,(as[ss+74>>0]|0)<1&&(is[ss>>2]=ps&-33),_s=ss+48|0,is[_s>>2]|0?ps=U$(ss,ds,Bs,Kl,Hs)|0:(Es=ss+44|0,ws=is[Es>>2]|0,is[Es>>2]=Gl,Ts=ss+28|0,is[Ts>>2]=Gl,Ls=ss+20|0,is[Ls>>2]=Gl,is[_s>>2]=80,Ns=ss+16|0,is[Ns>>2]=Gl+80,ps=U$(ss,ds,Bs,Kl,Hs)|0,ws&&(hS[is[ss+36>>2]&7](ss,0,0)|0,ps=is[Ls>>2]|0?ps:-1,is[Es>>2]=ws,is[_s>>2]=0,is[Ns>>2]=0,is[Ts>>2]=0,is[Ls>>2]=0)),_s=is[ss>>2]|0,is[ss>>2]=_s|Gs,yl|0&&bB(ss),ps=_s&32|0?-1:ps),ms=Rl,ps|0}function U$(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0;var ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0,Kl=0,Gl=0,Rl=0,a0=0,r0=0,f0=0,Wl=0,Xl=0,W0=0,Bv=0,sv=0,_h=0,wv=0,Rv=0,av=0;av=ms,ms=ms+64|0,sv=av+16|0,_h=av,W0=av+24|0,wv=av+8|0,Rv=av+20|0,is[sv>>2]=ds,f0=(ss|0)!=0,Wl=W0+40|0,Xl=Wl,W0=W0+39|0,Bv=wv+4|0,Ts=0,ws=0,Bs=0;e:for(;;){do if((ws|0)>-1)if((Ts|0)>(2147483647-ws|0)){is[(i_()|0)>>2]=75,ws=-1;break}else{ws=Ts+ws|0;break}while(!1);if(Ts=as[ds>>0]|0,Ts<<24>>24)Ls=ds;else{r0=87;break}t:for(;;){switch(Ts<<24>>24){case 37:{Ts=Ls,r0=9;break t}case 0:{Ts=Ls;break t}default:}a0=Ls+1|0,is[sv>>2]=a0,Ts=as[a0>>0]|0,Ls=a0}t:do if((r0|0)==9)for(;;){if(r0=0,(as[Ls+1>>0]|0)!=37)break t;if(Ts=Ts+1|0,Ls=Ls+2|0,is[sv>>2]=Ls,(as[Ls>>0]|0)==37)r0=9;else break}while(!1);if(Ts=Ts-ds|0,f0&&Bp(ss,ds,Ts),Ts|0){ds=Ls;continue}Ns=Ls+1|0,Ts=(as[Ns>>0]|0)+-48|0,Ts>>>0<10?(a0=(as[Ls+2>>0]|0)==36,Rl=a0?Ts:-1,Bs=a0?1:Bs,Ns=a0?Ls+3|0:Ns):Rl=-1,is[sv>>2]=Ns,Ts=as[Ns>>0]|0,Ls=(Ts<<24>>24)+-32|0;t:do if(Ls>>>0<32)for(Gs=0,Hs=Ts;;){if(Ts=1<<Ls,!(Ts&75913)){Ts=Hs;break t}if(Gs=Ts|Gs,Ns=Ns+1|0,is[sv>>2]=Ns,Ts=as[Ns>>0]|0,Ls=(Ts<<24>>24)+-32|0,Ls>>>0>=32)break;Hs=Ts}else Gs=0;while(!1);if(Ts<<24>>24==42){if(Ls=Ns+1|0,Ts=(as[Ls>>0]|0)+-48|0,Ts>>>0<10&&(as[Ns+2>>0]|0)==36)is[Es+(Ts<<2)>>2]=10,Ts=is[_s+((as[Ls>>0]|0)+-48<<3)>>2]|0,Bs=1,Ns=Ns+3|0;else{if(Bs|0){ws=-1;break}f0?(Bs=(is[ps>>2]|0)+3&-4,Ts=is[Bs>>2]|0,is[ps>>2]=Bs+4,Bs=0,Ns=Ls):(Ts=0,Bs=0,Ns=Ls)}is[sv>>2]=Ns,a0=(Ts|0)<0,Ts=a0?0-Ts|0:Ts,Gs=a0?Gs|8192:Gs}else{if(Ts=HC(sv)|0,(Ts|0)<0){ws=-1;break}Ns=is[sv>>2]|0}do if((as[Ns>>0]|0)==46){if((as[Ns+1>>0]|0)!=42){is[sv>>2]=Ns+1,Ls=HC(sv)|0,Ns=is[sv>>2]|0;break}if(Hs=Ns+2|0,Ls=(as[Hs>>0]|0)+-48|0,Ls>>>0<10&&(as[Ns+3>>0]|0)==36){is[Es+(Ls<<2)>>2]=10,Ls=is[_s+((as[Hs>>0]|0)+-48<<3)>>2]|0,Ns=Ns+4|0,is[sv>>2]=Ns;break}if(Bs|0){ws=-1;break e}f0?(a0=(is[ps>>2]|0)+3&-4,Ls=is[a0>>2]|0,is[ps>>2]=a0+4):Ls=0,is[sv>>2]=Hs,Ns=Hs}else Ls=-1;while(!1);for(Gl=0;;){if(((as[Ns>>0]|0)+-65|0)>>>0>57){ws=-1;break e}if(a0=Ns+1|0,is[sv>>2]=a0,Hs=as[(as[Ns>>0]|0)+-65+(5178+(Gl*58|0))>>0]|0,yl=Hs&255,(yl+-1|0)>>>0<8)Gl=yl,Ns=a0;else break}if(!(Hs<<24>>24)){ws=-1;break}Kl=(Rl|0)>-1;do if(Hs<<24>>24==19)if(Kl){ws=-1;break e}else r0=49;else{if(Kl){is[Es+(Rl<<2)>>2]=yl,Kl=_s+(Rl<<3)|0,Rl=is[Kl+4>>2]|0,r0=_h,is[r0>>2]=is[Kl>>2],is[r0+4>>2]=Rl,r0=49;break}if(!f0){ws=0;break e}WC(_h,yl,ps)}while(!1);if((r0|0)==49&&(r0=0,!f0)){Ts=0,ds=a0;continue}Ns=as[Ns>>0]|0,Ns=(Gl|0)!=0&(Ns&15|0)==3?Ns&-33:Ns,Kl=Gs&-65537,Rl=Gs&8192|0?Kl:Gs;t:do switch(Ns|0){case 110:switch((Gl&255)<<24>>24){case 0:{is[is[_h>>2]>>2]=ws,Ts=0,ds=a0;continue e}case 1:{is[is[_h>>2]>>2]=ws,Ts=0,ds=a0;continue e}case 2:{Ts=is[_h>>2]|0,is[Ts>>2]=ws,is[Ts+4>>2]=((ws|0)<0)<<31>>31,Ts=0,ds=a0;continue e}case 3:{os[is[_h>>2]>>1]=ws,Ts=0,ds=a0;continue e}case 4:{as[is[_h>>2]>>0]=ws,Ts=0,ds=a0;continue e}case 6:{is[is[_h>>2]>>2]=ws,Ts=0,ds=a0;continue e}case 7:{Ts=is[_h>>2]|0,is[Ts>>2]=ws,is[Ts+4>>2]=((ws|0)<0)<<31>>31,Ts=0,ds=a0;continue e}default:{Ts=0,ds=a0;continue e}}case 112:{Ns=120,Ls=Ls>>>0>8?Ls:8,ds=Rl|8,r0=61;break}case 88:case 120:{ds=Rl,r0=61;break}case 111:{Ns=_h,ds=is[Ns>>2]|0,Ns=is[Ns+4>>2]|0,yl=TB(ds,Ns,Wl)|0,Kl=Xl-yl|0,Gs=0,Hs=5642,Ls=(Rl&8|0)==0|(Ls|0)>(Kl|0)?Ls:Kl+1|0,Kl=Rl,r0=67;break}case 105:case 100:if(Ns=_h,ds=is[Ns>>2]|0,Ns=is[Ns+4>>2]|0,(Ns|0)<0){ds=fS(0,0,ds|0,Ns|0)|0,Ns=Us,Gs=_h,is[Gs>>2]=ds,is[Gs+4>>2]=Ns,Gs=1,Hs=5642,r0=66;break t}else{Gs=(Rl&2049|0)!=0&1,Hs=Rl&2048|0?5643:Rl&1|0?5644:5642,r0=66;break t}case 117:{Ns=_h,Gs=0,Hs=5642,ds=is[Ns>>2]|0,Ns=is[Ns+4>>2]|0,r0=66;break}case 99:{as[W0>>0]=is[_h>>2],ds=W0,Gs=0,Hs=5642,yl=Wl,Ns=1,Ls=Kl;break}case 109:{Ns=AB(is[(i_()|0)>>2]|0)|0,r0=71;break}case 115:{Ns=is[_h>>2]|0,Ns=Ns|0?Ns:5652,r0=71;break}case 67:{is[wv>>2]=is[_h>>2],is[Bv>>2]=0,is[_h>>2]=wv,yl=-1,Ns=wv,r0=75;break}case 83:{ds=is[_h>>2]|0,Ls?(yl=Ls,Ns=ds,r0=75):(Gp(ss,32,Ts,0,Rl),ds=0,r0=84);break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{Ts=kB(ss,+vs[_h>>3],Ts,Ls,Rl,Ns)|0,ds=a0;continue e}default:Gs=0,Hs=5642,yl=Wl,Ns=Ls,Ls=Rl}while(!1);t:do if((r0|0)==61)Rl=_h,Gl=is[Rl>>2]|0,Rl=is[Rl+4>>2]|0,yl=CB(Gl,Rl,Wl,Ns&32)|0,Hs=(ds&8|0)==0|(Gl|0)==0&(Rl|0)==0,Gs=Hs?0:2,Hs=Hs?5642:5642+(Ns>>4)|0,Kl=ds,ds=Gl,Ns=Rl,r0=67;else if((r0|0)==66)yl=a_(ds,Ns,Wl)|0,Kl=Rl,r0=67;else if((r0|0)==71)r0=0,Rl=IB(Ns,0,Ls)|0,Gl=(Rl|0)==0,ds=Ns,Gs=0,Hs=5642,yl=Gl?Ns+Ls|0:Rl,Ns=Gl?Ls:Rl-Ns|0,Ls=Kl;else if((r0|0)==75){for(r0=0,Hs=Ns,ds=0,Ls=0;Gs=is[Hs>>2]|0,!(!Gs||(Ls=VC(Rv,Gs)|0,(Ls|0)<0|Ls>>>0>(yl-ds|0)>>>0));)if(ds=Ls+ds|0,yl>>>0>ds>>>0)Hs=Hs+4|0;else break;if((Ls|0)<0){ws=-1;break e}if(Gp(ss,32,Ts,ds,Rl),!ds)ds=0,r0=84;else for(Gs=0;;){if(Ls=is[Ns>>2]|0,!Ls){r0=84;break t}if(Ls=VC(Rv,Ls)|0,Gs=Ls+Gs|0,(Gs|0)>(ds|0)){r0=84;break t}if(Bp(ss,Rv,Ls),Gs>>>0>=ds>>>0){r0=84;break}else Ns=Ns+4|0}}while(!1);if((r0|0)==67)r0=0,Ns=(ds|0)!=0|(Ns|0)!=0,Rl=(Ls|0)!=0|Ns,Ns=((Ns^1)&1)+(Xl-yl)|0,ds=Rl?yl:Wl,yl=Wl,Ns=Rl?(Ls|0)>(Ns|0)?Ls:Ns:Ls,Ls=(Ls|0)>-1?Kl&-65537:Kl;else if((r0|0)==84){r0=0,Gp(ss,32,Ts,ds,Rl^8192),Ts=(Ts|0)>(ds|0)?Ts:ds,ds=a0;continue}Gl=yl-ds|0,Kl=(Ns|0)<(Gl|0)?Gl:Ns,Rl=Kl+Gs|0,Ts=(Ts|0)<(Rl|0)?Rl:Ts,Gp(ss,32,Ts,Rl,Ls),Bp(ss,Hs,Gs),Gp(ss,48,Ts,Rl,Ls^65536),Gp(ss,48,Kl,Gl,0),Bp(ss,ds,Gl),Gp(ss,32,Ts,Rl,Ls^8192),ds=a0}e:do if((r0|0)==87&&!ss)if(!Bs)ws=0;else{for(ws=1;ds=is[Es+(ws<<2)>>2]|0,!!ds;)if(WC(_s+(ws<<3)|0,ds,ps),ws=ws+1|0,(ws|0)>=10){ws=1;break e}for(;;){if(is[Es+(ws<<2)>>2]|0){ws=-1;break e}if(ws=ws+1|0,(ws|0)>=10){ws=1;break}}}while(!1);return ms=av,ws|0}function MB(ss){return ss=ss|0,0}function bB(ss){ss=ss|0}function Bp(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,is[ss>>2]&32||GB(ds,ps,ss)|0}function HC(ss){ss=ss|0;var ds=0,ps=0,_s=0;if(ps=is[ss>>2]|0,_s=(as[ps>>0]|0)+-48|0,_s>>>0<10){ds=0;do ds=_s+(ds*10|0)|0,ps=ps+1|0,is[ss>>2]=ps,_s=(as[ps>>0]|0)+-48|0;while(_s>>>0<10)}else ds=0;return ds|0}function WC(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0;e:do if(ds>>>0<=20)do switch(ds|0){case 9:{_s=(is[ps>>2]|0)+3&-4,ds=is[_s>>2]|0,is[ps>>2]=_s+4,is[ss>>2]=ds;break e}case 10:{_s=(is[ps>>2]|0)+3&-4,ds=is[_s>>2]|0,is[ps>>2]=_s+4,_s=ss,is[_s>>2]=ds,is[_s+4>>2]=((ds|0)<0)<<31>>31;break e}case 11:{_s=(is[ps>>2]|0)+3&-4,ds=is[_s>>2]|0,is[ps>>2]=_s+4,_s=ss,is[_s>>2]=ds,is[_s+4>>2]=0;break e}case 12:{_s=(is[ps>>2]|0)+7&-8,ds=_s,Es=is[ds>>2]|0,ds=is[ds+4>>2]|0,is[ps>>2]=_s+8,_s=ss,is[_s>>2]=Es,is[_s+4>>2]=ds;break e}case 13:{Es=(is[ps>>2]|0)+3&-4,_s=is[Es>>2]|0,is[ps>>2]=Es+4,_s=(_s&65535)<<16>>16,Es=ss,is[Es>>2]=_s,is[Es+4>>2]=((_s|0)<0)<<31>>31;break e}case 14:{Es=(is[ps>>2]|0)+3&-4,_s=is[Es>>2]|0,is[ps>>2]=Es+4,Es=ss,is[Es>>2]=_s&65535,is[Es+4>>2]=0;break e}case 15:{Es=(is[ps>>2]|0)+3&-4,_s=is[Es>>2]|0,is[ps>>2]=Es+4,_s=(_s&255)<<24>>24,Es=ss,is[Es>>2]=_s,is[Es+4>>2]=((_s|0)<0)<<31>>31;break e}case 16:{Es=(is[ps>>2]|0)+3&-4,_s=is[Es>>2]|0,is[ps>>2]=Es+4,Es=ss,is[Es>>2]=_s&255,is[Es+4>>2]=0;break e}case 17:{Es=(is[ps>>2]|0)+7&-8,ws=+vs[Es>>3],is[ps>>2]=Es+8,vs[ss>>3]=ws;break e}case 18:{Es=(is[ps>>2]|0)+7&-8,ws=+vs[Es>>3],is[ps>>2]=Es+8,vs[ss>>3]=ws;break e}default:break e}while(!1);while(!1)}function CB(ss,ds,ps,_s){if(ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,!((ss|0)==0&(ds|0)==0))do ps=ps+-1|0,as[ps>>0]=us[5694+(ss&15)>>0]|0|_s,ss=cS(ss|0,ds|0,4)|0,ds=Us;while(!((ss|0)==0&(ds|0)==0));return ps|0}function TB(ss,ds,ps){if(ss=ss|0,ds=ds|0,ps=ps|0,!((ss|0)==0&(ds|0)==0))do ps=ps+-1|0,as[ps>>0]=ss&7|48,ss=cS(ss|0,ds|0,3)|0,ds=Us;while(!((ss|0)==0&(ds|0)==0));return ps|0}function a_(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;if(ds>>>0>0|(ds|0)==0&ss>>>0>4294967295){for(;_s=Y$(ss|0,ds|0,10,0)|0,ps=ps+-1|0,as[ps>>0]=_s&255|48,_s=ss,ss=V$(ss|0,ds|0,10,0)|0,ds>>>0>9|(ds|0)==9&_s>>>0>4294967295;)ds=Us;ds=ss}else ds=ss;if(ds)for(;ps=ps+-1|0,as[ps>>0]=(ds>>>0)%10|0|48,!(ds>>>0<10);)ds=(ds>>>0)/10|0;return ps|0}function AB(ss){return ss=ss|0,DB(ss,is[(NB()|0)+188>>2]|0)|0}function IB(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;ws=ds&255,_s=(ps|0)!=0;e:do if(_s&(ss&3|0)!=0)for(Es=ds&255;;){if((as[ss>>0]|0)==Es<<24>>24){Ts=6;break e}if(ss=ss+1|0,ps=ps+-1|0,_s=(ps|0)!=0,!(_s&(ss&3|0)!=0)){Ts=5;break}}else Ts=5;while(!1);(Ts|0)==5&&(_s?Ts=6:ps=0);e:do if((Ts|0)==6&&(Es=ds&255,(as[ss>>0]|0)!=Es<<24>>24)){_s=R0(ws,16843009)|0;t:do if(ps>>>0>3){for(;ws=is[ss>>2]^_s,!((ws&-2139062144^-2139062144)&ws+-16843009|0);)if(ss=ss+4|0,ps=ps+-4|0,ps>>>0<=3){Ts=11;break t}}else Ts=11;while(!1);if((Ts|0)==11&&!ps){ps=0;break}for(;;){if((as[ss>>0]|0)==Es<<24>>24)break e;if(ss=ss+1|0,ps=ps+-1|0,!ps){ps=0;break}}}while(!1);return(ps|0?ss:0)|0}function Gp(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0;var ws=0,Ts=0;if(Ts=ms,ms=ms+256|0,ws=Ts,(ps|0)>(_s|0)&(Es&73728|0)==0){if(Es=ps-_s|0,s_(ws|0,ds|0,(Es>>>0<256?Es:256)|0)|0,Es>>>0>255){ds=ps-_s|0;do Bp(ss,ws,256),Es=Es+-256|0;while(Es>>>0>255);Es=ds&255}Bp(ss,ws,Es)}ms=Ts}function VC(ss,ds){return ss=ss|0,ds=ds|0,ss?ss=PB(ss,ds,0)|0:ss=0,ss|0}function kB(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=+ds,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0;var Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0,Kl=0,Gl=0,Rl=0,a0=0,r0=0,f0=0,Wl=0,Xl=0,W0=0,Bv=0,sv=0,_h=0,wv=0,Rv=0,av=0,ip=0;ip=ms,ms=ms+560|0,Ns=ip+8|0,a0=ip,av=ip+524|0,Rv=av,Gs=ip+512|0,is[a0>>2]=0,wv=Gs+12|0,YC(ds)|0,(Us|0)<0?(ds=-ds,sv=1,Bv=5659):(sv=(Es&2049|0)!=0&1,Bv=Es&2048|0?5662:Es&1|0?5665:5660),YC(ds)|0,_h=Us&2146435072;do if(_h>>>0<2146435072|(_h|0)==2146435072&0<0){if(Kl=+LB(ds,a0)*2,Ts=Kl!=0,Ts&&(is[a0>>2]=(is[a0>>2]|0)+-1),f0=ws|32,(f0|0)==97){Gl=ws&32,yl=Gl|0?Bv+9|0:Bv,Hs=sv|2,Ts=12-_s|0;do if(_s>>>0>11|(Ts|0)==0)ds=Kl;else{ds=8;do Ts=Ts+-1|0,ds=ds*16;while(Ts|0);if((as[yl>>0]|0)==45){ds=-(ds+(-Kl-ds));break}else{ds=Kl+ds-ds;break}}while(!1);Ls=is[a0>>2]|0,Ts=(Ls|0)<0?0-Ls|0:Ls,Ts=a_(Ts,((Ts|0)<0)<<31>>31,wv)|0,(Ts|0)==(wv|0)&&(Ts=Gs+11|0,as[Ts>>0]=48),as[Ts+-1>>0]=(Ls>>31&2)+43,Bs=Ts+-2|0,as[Bs>>0]=ws+15,Gs=(_s|0)<1,Ns=(Es&8|0)==0,Ts=av;do _h=~~ds,Ls=Ts+1|0,as[Ts>>0]=us[5694+_h>>0]|Gl,ds=(ds-+(_h|0))*16,(Ls-Rv|0)==1&&!(Ns&(Gs&ds==0))?(as[Ls>>0]=46,Ts=Ts+2|0):Ts=Ls;while(ds!=0);_h=Ts-Rv|0,Rv=wv-Bs|0,wv=(_s|0)!=0&(_h+-2|0)<(_s|0)?_s+2|0:_h,Ts=Rv+Hs+wv|0,Gp(ss,32,ps,Ts,Es),Bp(ss,yl,Hs),Gp(ss,48,ps,Ts,Es^65536),Bp(ss,av,_h),Gp(ss,48,wv-_h|0,0,0),Bp(ss,Bs,Rv),Gp(ss,32,ps,Ts,Es^8192);break}Ls=(_s|0)<0?6:_s,Ts?(Ts=(is[a0>>2]|0)+-28|0,is[a0>>2]=Ts,ds=Kl*268435456):(ds=Kl,Ts=is[a0>>2]|0),_h=(Ts|0)<0?Ns:Ns+288|0,Ns=_h;do Xl=~~ds>>>0,is[Ns>>2]=Xl,Ns=Ns+4|0,ds=(ds-+(Xl>>>0))*1e9;while(ds!=0);if((Ts|0)>0)for(Gs=_h,Hs=Ns;;){if(Bs=(Ts|0)<29?Ts:29,Ts=Hs+-4|0,Ts>>>0>=Gs>>>0){Ns=0;do Wl=JC(is[Ts>>2]|0,0,Bs|0)|0,Wl=W$(Wl|0,Us|0,Ns|0,0)|0,Xl=Us,r0=Y$(Wl|0,Xl|0,1e9,0)|0,is[Ts>>2]=r0,Ns=V$(Wl|0,Xl|0,1e9,0)|0,Ts=Ts+-4|0;while(Ts>>>0>=Gs>>>0);Ns&&(Gs=Gs+-4|0,is[Gs>>2]=Ns)}for(Ns=Hs;!(Ns>>>0<=Gs>>>0);)if(Ts=Ns+-4|0,!(is[Ts>>2]|0))Ns=Ts;else break;if(Ts=(is[a0>>2]|0)-Bs|0,is[a0>>2]=Ts,(Ts|0)>0)Hs=Ns;else break}else Gs=_h;if((Ts|0)<0){_s=((Ls+25|0)/9|0)+1|0,Rl=(f0|0)==102;do{if(Gl=0-Ts|0,Gl=(Gl|0)<9?Gl:9,Gs>>>0<Ns>>>0){Bs=(1<<Gl)+-1|0,Hs=1e9>>>Gl,yl=0,Ts=Gs;do Xl=is[Ts>>2]|0,is[Ts>>2]=(Xl>>>Gl)+yl,yl=R0(Xl&Bs,Hs)|0,Ts=Ts+4|0;while(Ts>>>0<Ns>>>0);Ts=is[Gs>>2]|0?Gs:Gs+4|0,yl?(is[Ns>>2]=yl,Gs=Ts,Ts=Ns+4|0):(Gs=Ts,Ts=Ns)}else Gs=is[Gs>>2]|0?Gs:Gs+4|0,Ts=Ns;Ns=Rl?_h:Gs,Ns=(Ts-Ns>>2|0)>(_s|0)?Ns+(_s<<2)|0:Ts,Ts=(is[a0>>2]|0)+Gl|0,is[a0>>2]=Ts}while((Ts|0)<0);Ts=Gs,_s=Ns}else Ts=Gs,_s=Ns;if(Xl=_h,Ts>>>0<_s>>>0){if(Ns=(Xl-Ts>>2)*9|0,Bs=is[Ts>>2]|0,Bs>>>0>=10){Gs=10;do Gs=Gs*10|0,Ns=Ns+1|0;while(Bs>>>0>=Gs>>>0)}}else Ns=0;if(Rl=(f0|0)==103,r0=(Ls|0)!=0,Gs=Ls-((f0|0)!=102?Ns:0)+((r0&Rl)<<31>>31)|0,(Gs|0)<(((_s-Xl>>2)*9|0)+-9|0)){if(Gs=Gs+9216|0,Gl=_h+4+(((Gs|0)/9|0)+-1024<<2)|0,Gs=((Gs|0)%9|0)+1|0,(Gs|0)<9){Bs=10;do Bs=Bs*10|0,Gs=Gs+1|0;while((Gs|0)!=9)}else Bs=10;if(Hs=is[Gl>>2]|0,yl=(Hs>>>0)%(Bs>>>0)|0,Gs=(Gl+4|0)==(_s|0),Gs&(yl|0)==0)Gs=Gl;else if(Kl=((Hs>>>0)/(Bs>>>0)|0)&1|0?9007199254740994:9007199254740992,Wl=(Bs|0)/2|0,ds=yl>>>0<Wl>>>0?.5:Gs&(yl|0)==(Wl|0)?1:1.5,sv&&(Wl=(as[Bv>>0]|0)==45,ds=Wl?-ds:ds,Kl=Wl?-Kl:Kl),Gs=Hs-yl|0,is[Gl>>2]=Gs,Kl+ds!=Kl){if(Wl=Gs+Bs|0,is[Gl>>2]=Wl,Wl>>>0>999999999)for(Ns=Gl;Gs=Ns+-4|0,is[Ns>>2]=0,Gs>>>0<Ts>>>0&&(Ts=Ts+-4|0,is[Ts>>2]=0),Wl=(is[Gs>>2]|0)+1|0,is[Gs>>2]=Wl,Wl>>>0>999999999;)Ns=Gs;else Gs=Gl;if(Ns=(Xl-Ts>>2)*9|0,Hs=is[Ts>>2]|0,Hs>>>0>=10){Bs=10;do Bs=Bs*10|0,Ns=Ns+1|0;while(Hs>>>0>=Bs>>>0)}}else Gs=Gl;Gs=Gs+4|0,Gs=_s>>>0>Gs>>>0?Gs:_s,Wl=Ts}else Gs=_s,Wl=Ts;for(f0=Gs;;){if(f0>>>0<=Wl>>>0){a0=0;break}if(Ts=f0+-4|0,!(is[Ts>>2]|0))f0=Ts;else{a0=1;break}}_s=0-Ns|0;do if(Rl)if(Ts=((r0^1)&1)+Ls|0,(Ts|0)>(Ns|0)&(Ns|0)>-5?(Bs=ws+-1|0,Ls=Ts+-1-Ns|0):(Bs=ws+-2|0,Ls=Ts+-1|0),Ts=Es&8,Ts)Gl=Ts;else{if(a0&&(W0=is[f0+-4>>2]|0,(W0|0)!=0))if((W0>>>0)%10|0)Gs=0;else{Gs=0,Ts=10;do Ts=Ts*10|0,Gs=Gs+1|0;while(!((W0>>>0)%(Ts>>>0)|0|0))}else Gs=9;if(Ts=((f0-Xl>>2)*9|0)+-9|0,(Bs|32|0)==102){Gl=Ts-Gs|0,Gl=(Gl|0)>0?Gl:0,Ls=(Ls|0)<(Gl|0)?Ls:Gl,Gl=0;break}else{Gl=Ts+Ns-Gs|0,Gl=(Gl|0)>0?Gl:0,Ls=(Ls|0)<(Gl|0)?Ls:Gl,Gl=0;break}}else Bs=ws,Gl=Es&8;while(!1);if(Rl=Ls|Gl,Hs=(Rl|0)!=0&1,yl=(Bs|32|0)==102,yl)r0=0,Ts=(Ns|0)>0?Ns:0;else{if(Ts=(Ns|0)<0?_s:Ns,Ts=a_(Ts,((Ts|0)<0)<<31>>31,wv)|0,Gs=wv,(Gs-Ts|0)<2)do Ts=Ts+-1|0,as[Ts>>0]=48;while((Gs-Ts|0)<2);as[Ts+-1>>0]=(Ns>>31&2)+43,Ts=Ts+-2|0,as[Ts>>0]=Bs,r0=Ts,Ts=Gs-Ts|0}if(Ts=sv+1+Ls+Hs+Ts|0,Gp(ss,32,ps,Ts,Es),Bp(ss,Bv,sv),Gp(ss,48,ps,Ts,Es^65536),yl){Bs=Wl>>>0>_h>>>0?_h:Wl,Gl=av+9|0,Hs=Gl,yl=av+8|0,Gs=Bs;do{if(Ns=a_(is[Gs>>2]|0,0,Gl)|0,(Gs|0)==(Bs|0))(Ns|0)==(Gl|0)&&(as[yl>>0]=48,Ns=yl);else if(Ns>>>0>av>>>0){s_(av|0,48,Ns-Rv|0)|0;do Ns=Ns+-1|0;while(Ns>>>0>av>>>0)}Bp(ss,Ns,Hs-Ns|0),Gs=Gs+4|0}while(Gs>>>0<=_h>>>0);if(Rl|0&&Bp(ss,5710,1),Gs>>>0<f0>>>0&(Ls|0)>0)for(;;){if(Ns=a_(is[Gs>>2]|0,0,Gl)|0,Ns>>>0>av>>>0){s_(av|0,48,Ns-Rv|0)|0;do Ns=Ns+-1|0;while(Ns>>>0>av>>>0)}if(Bp(ss,Ns,(Ls|0)<9?Ls:9),Gs=Gs+4|0,Ns=Ls+-9|0,Gs>>>0<f0>>>0&(Ls|0)>9)Ls=Ns;else{Ls=Ns;break}}Gp(ss,48,Ls+9|0,9,0)}else{if(Rl=a0?f0:Wl+4|0,(Ls|0)>-1){a0=av+9|0,Gl=(Gl|0)==0,_s=a0,Hs=0-Rv|0,yl=av+8|0,Bs=Wl;do{Ns=a_(is[Bs>>2]|0,0,a0)|0,(Ns|0)==(a0|0)&&(as[yl>>0]=48,Ns=yl);do if((Bs|0)==(Wl|0)){if(Gs=Ns+1|0,Bp(ss,Ns,1),Gl&(Ls|0)<1){Ns=Gs;break}Bp(ss,5710,1),Ns=Gs}else{if(Ns>>>0<=av>>>0)break;s_(av|0,48,Ns+Hs|0)|0;do Ns=Ns+-1|0;while(Ns>>>0>av>>>0)}while(!1);Rv=_s-Ns|0,Bp(ss,Ns,(Ls|0)>(Rv|0)?Rv:Ls),Ls=Ls-Rv|0,Bs=Bs+4|0}while(Bs>>>0<Rl>>>0&(Ls|0)>-1)}Gp(ss,48,Ls+18|0,18,0),Bp(ss,r0,wv-r0|0)}Gp(ss,32,ps,Ts,Es^8192)}else av=(ws&32|0)!=0,Ts=sv+3|0,Gp(ss,32,ps,Ts,Es&-65537),Bp(ss,Bv,sv),Bp(ss,ds!=ds|!1?av?5686:5690:av?5678:5682,3),Gp(ss,32,ps,Ts,Es^8192);while(!1);return ms=ip,((Ts|0)<(ps|0)?ps:Ts)|0}function YC(ss){ss=+ss;var ds=0;return vs[ys>>3]=ss,ds=is[ys>>2]|0,Us=is[ys+4>>2]|0,ds|0}function LB(ss,ds){return ss=+ss,ds=ds|0,+ +XC(ss,ds)}function XC(ss,ds){ss=+ss,ds=ds|0;var ps=0,_s=0,Es=0;switch(vs[ys>>3]=ss,ps=is[ys>>2]|0,_s=is[ys+4>>2]|0,Es=cS(ps|0,_s|0,52)|0,Es&2047){case 0:{ss!=0?(ss=+XC(ss*18446744073709552e3,ds),ps=(is[ds>>2]|0)+-64|0):ps=0,is[ds>>2]=ps;break}case 2047:break;default:is[ds>>2]=(Es&2047)+-1022,is[ys>>2]=ps,is[ys+4>>2]=_s&-2146435073|1071644672,ss=+vs[ys>>3]}return+ss}function PB(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;do if(ss){if(ds>>>0<128){as[ss>>0]=ds,ss=1;break}if(!(is[is[(OB()|0)+188>>2]>>2]|0))if((ds&-128|0)==57216){as[ss>>0]=ds,ss=1;break}else{is[(i_()|0)>>2]=84,ss=-1;break}if(ds>>>0<2048){as[ss>>0]=ds>>>6|192,as[ss+1>>0]=ds&63|128,ss=2;break}if(ds>>>0<55296|(ds&-8192|0)==57344){as[ss>>0]=ds>>>12|224,as[ss+1>>0]=ds>>>6&63|128,as[ss+2>>0]=ds&63|128,ss=3;break}if((ds+-65536|0)>>>0<1048576){as[ss>>0]=ds>>>18|240,as[ss+1>>0]=ds>>>12&63|128,as[ss+2>>0]=ds>>>6&63|128,as[ss+3>>0]=ds&63|128,ss=4;break}else{is[(i_()|0)>>2]=84,ss=-1;break}}else ss=1;while(!1);return ss|0}function OB(){return z$()|0}function NB(){return z$()|0}function DB(ss,ds){ss=ss|0,ds=ds|0;var ps=0,_s=0;for(_s=0;;){if((us[5712+_s>>0]|0)==(ss|0)){ss=2;break}if(ps=_s+1|0,(ps|0)==87){ps=5800,_s=87,ss=5;break}else _s=ps}if((ss|0)==2&&(_s?(ps=5800,ss=5):ps=5800),(ss|0)==5)for(;;){do ss=ps,ps=ps+1|0;while(as[ss>>0]|0);if(_s=_s+-1|0,_s)ss=5;else break}return RB(ps,is[ds+20>>2]|0)|0}function RB(ss,ds){return ss=ss|0,ds=ds|0,BB(ss,ds)|0}function BB(ss,ds){return ss=ss|0,ds=ds|0,ds?ds=FB(is[ds>>2]|0,is[ds+4>>2]|0,ss)|0:ds=0,(ds|0?ds:ss)|0}function FB(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0;yl=(is[ss>>2]|0)+1794895138|0,ws=fy(is[ss+8>>2]|0,yl)|0,_s=fy(is[ss+12>>2]|0,yl)|0,Es=fy(is[ss+16>>2]|0,yl)|0;e:do if(ws>>>0<ds>>>2>>>0&&(Hs=ds-(ws<<2)|0,_s>>>0<Hs>>>0&Es>>>0<Hs>>>0)&&!((Es|_s)&3|0)){for(Hs=_s>>>2,Bs=Es>>>2,Gs=0;;){if(Ls=ws>>>1,Ns=Gs+Ls|0,Ts=Ns<<1,Es=Ts+Hs|0,_s=fy(is[ss+(Es<<2)>>2]|0,yl)|0,Es=fy(is[ss+(Es+1<<2)>>2]|0,yl)|0,!(Es>>>0<ds>>>0&_s>>>0<(ds-Es|0)>>>0)){_s=0;break e}if(as[ss+(Es+_s)>>0]|0){_s=0;break e}if(_s=zC(ps,ss+Es|0)|0,!_s)break;if(_s=(_s|0)<0,(ws|0)==1){_s=0;break e}else Gs=_s?Gs:Ns,ws=_s?Ls:ws-Ls|0}_s=Ts+Bs|0,Es=fy(is[ss+(_s<<2)>>2]|0,yl)|0,_s=fy(is[ss+(_s+1<<2)>>2]|0,yl)|0,_s>>>0<ds>>>0&Es>>>0<(ds-_s|0)>>>0?_s=as[ss+(_s+Es)>>0]|0?0:ss+_s|0:_s=0}else _s=0;while(!1);return _s|0}function fy(ss,ds){ss=ss|0,ds=ds|0;var ps=0;return ps=rT(ss|0)|0,(ds|0?ps:ss)|0}function GB(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0,Ls=0;_s=ps+16|0,Es=is[_s>>2]|0,Es?ws=5:jB(ps)|0?_s=0:(Es=is[_s>>2]|0,ws=5);e:do if((ws|0)==5){if(Ls=ps+20|0,Ts=is[Ls>>2]|0,_s=Ts,(Es-Ts|0)>>>0<ds>>>0){_s=hS[is[ps+36>>2]&7](ps,ss,ds)|0;break}t:do if((as[ps+75>>0]|0)>-1){for(Ts=ds;;){if(!Ts){ws=0,Es=ss;break t}if(Es=Ts+-1|0,(as[ss+Es>>0]|0)==10)break;Ts=Es}if(_s=hS[is[ps+36>>2]&7](ps,ss,Ts)|0,_s>>>0<Ts>>>0)break e;ws=Ts,Es=ss+Ts|0,ds=ds-Ts|0,_s=is[Ls>>2]|0}else ws=0,Es=ss;while(!1);Sv(_s|0,Es|0,ds|0)|0,is[Ls>>2]=(is[Ls>>2]|0)+ds,_s=ws+ds|0}while(!1);return _s|0}function jB(ss){ss=ss|0;var ds=0,ps=0;return ds=ss+74|0,ps=as[ds>>0]|0,as[ds>>0]=ps+255|ps,ds=is[ss>>2]|0,ds&8?(is[ss>>2]=ds|32,ss=-1):(is[ss+8>>2]=0,is[ss+4>>2]=0,ps=is[ss+44>>2]|0,is[ss+28>>2]=ps,is[ss+20>>2]=ps,is[ss+16>>2]=ps+(is[ss+48>>2]|0),ss=0),ss|0}function lp(ss,ds){ss=Os(ss),ds=Os(ds);var ps=0,_s=0;ps=qC(ss)|0;do if((ps&2147483647)>>>0<=2139095040){if(_s=qC(ds)|0,(_s&2147483647)>>>0<=2139095040)if((_s^ps|0)<0){ss=(ps|0)<0?ds:ss;break}else{ss=ss<ds?ds:ss;break}}else ss=ds;while(!1);return Os(ss)}function qC(ss){return ss=Os(ss),hs[ys>>2]=ss,is[ys>>2]|0|0}function cy(ss,ds){ss=Os(ss),ds=Os(ds);var ps=0,_s=0;ps=KC(ss)|0;do if((ps&2147483647)>>>0<=2139095040){if(_s=KC(ds)|0,(_s&2147483647)>>>0<=2139095040)if((_s^ps|0)<0){ss=(ps|0)<0?ss:ds;break}else{ss=ss<ds?ss:ds;break}}else ss=ds;while(!1);return Os(ss)}function KC(ss){return ss=Os(ss),hs[ys>>2]=ss,is[ys>>2]|0|0}function H$(ss,ds){ss=Os(ss),ds=Os(ds);var ps=0,_s=0,Es=0,ws=0,Ts=0,Ls=0,Ns=0,Gs=0;ws=(hs[ys>>2]=ss,is[ys>>2]|0),Ls=(hs[ys>>2]=ds,is[ys>>2]|0),ps=ws>>>23&255,Ts=Ls>>>23&255,Ns=ws&-2147483648,Es=Ls<<1;e:do if(Es|0&&!((ps|0)==255|((zB(ds)|0)&2147483647)>>>0>2139095040)){if(_s=ws<<1,_s>>>0<=Es>>>0)return ds=Os(ss*Os(0)),Os((_s|0)==(Es|0)?ds:ss);if(ps)_s=ws&8388607|8388608;else{if(ps=ws<<9,(ps|0)>-1){_s=ps,ps=0;do ps=ps+-1|0,_s=_s<<1;while((_s|0)>-1)}else ps=0;_s=ws<<1-ps}if(Ts)Ls=Ls&8388607|8388608;else{if(ws=Ls<<9,(ws|0)>-1){Es=0;do Es=Es+-1|0,ws=ws<<1;while((ws|0)>-1)}else Es=0;Ts=Es,Ls=Ls<<1-Es}Es=_s-Ls|0,ws=(Es|0)>-1;t:do if((ps|0)>(Ts|0)){for(;;){if(ws)if(Es)_s=Es;else break;if(_s=_s<<1,ps=ps+-1|0,Es=_s-Ls|0,ws=(Es|0)>-1,(ps|0)<=(Ts|0))break t}ds=Os(ss*Os(0));break e}while(!1);if(ws)if(Es)_s=Es;else{ds=Os(ss*Os(0));break}if(_s>>>0<8388608)do _s=_s<<1,ps=ps+-1|0;while(_s>>>0<8388608);(ps|0)>0?ps=_s+-8388608|ps<<23:ps=_s>>>(1-ps|0),ds=(is[ys>>2]=ps|Ns,Os(hs[ys>>2]))}else Gs=3;while(!1);return(Gs|0)==3&&(ds=Os(ss*ds),ds=Os(ds/ds)),Os(ds)}function zB(ss){return ss=Os(ss),hs[ys>>2]=ss,is[ys>>2]|0|0}function UB(ss,ds){return ss=ss|0,ds=ds|0,UC(is[582]|0,ss,ds)|0}function Wv(ss){ss=ss|0,yv()}function o_(ss){ss=ss|0}function HB(ss,ds){return ss=ss|0,ds=ds|0,0}function WB(ss){return ss=ss|0,(ZC(ss+4|0)|0)==-1?(Y2[is[(is[ss>>2]|0)+8>>2]&127](ss),ss=1):ss=0,ss|0}function ZC(ss){ss=ss|0;var ds=0;return ds=is[ss>>2]|0,is[ss>>2]=ds+-1,ds+-1|0}function Am(ss){ss=ss|0,WB(ss)|0&&VB(ss)}function VB(ss){ss=ss|0;var ds=0;ds=ss+8|0,is[ds>>2]|0&&(ZC(ds)|0)!=-1||Y2[is[(is[ss>>2]|0)+16>>2]&127](ss)}function K0(ss){ss=ss|0;var ds=0;for(ds=ss|0?ss:1;ss=sS(ds)|0,!(ss|0);){if(ss=XB()|0,!ss){ss=0;break}dT[ss&0]()}return ss|0}function QC(ss){return ss=ss|0,K0(ss)|0}function y0(ss){ss=ss|0,uS(ss)}function YB(ss){ss=ss|0,(as[ss+11>>0]|0)<0&&y0(is[ss>>2]|0)}function XB(){var ss=0;return ss=is[2923]|0,is[2923]=ss+0,ss|0}function qB(){}function fS(ss,ds,ps,_s){return ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,_s=ds-_s-(ps>>>0>ss>>>0|0)>>>0,Us=_s,ss-ps>>>0|0|0}function W$(ss,ds,ps,_s){return ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,ps=ss+ps>>>0,Us=ds+_s+(ps>>>0<ss>>>0|0)>>>0,ps|0|0}function s_(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0,Ts=0;if(ws=ss+ps|0,ds=ds&255,(ps|0)>=67){for(;ss&3;)as[ss>>0]=ds,ss=ss+1|0;for(_s=ws&-4|0,Es=_s-64|0,Ts=ds|ds<<8|ds<<16|ds<<24;(ss|0)<=(Es|0);)is[ss>>2]=Ts,is[ss+4>>2]=Ts,is[ss+8>>2]=Ts,is[ss+12>>2]=Ts,is[ss+16>>2]=Ts,is[ss+20>>2]=Ts,is[ss+24>>2]=Ts,is[ss+28>>2]=Ts,is[ss+32>>2]=Ts,is[ss+36>>2]=Ts,is[ss+40>>2]=Ts,is[ss+44>>2]=Ts,is[ss+48>>2]=Ts,is[ss+52>>2]=Ts,is[ss+56>>2]=Ts,is[ss+60>>2]=Ts,ss=ss+64|0;for(;(ss|0)<(_s|0);)is[ss>>2]=Ts,ss=ss+4|0}for(;(ss|0)<(ws|0);)as[ss>>0]=ds,ss=ss+1|0;return ws-ps|0}function JC(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,(ps|0)<32?(Us=ds<<ps|(ss&(1<<ps)-1<<32-ps)>>>32-ps,ss<<ps):(Us=ss<<ps-32,0)}function cS(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,(ps|0)<32?(Us=ds>>>ps,ss>>>ps|(ds&(1<<ps)-1)<<32-ps):(Us=0,ds>>>ps-32|0)}function Sv(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0,Es=0,ws=0;if((ps|0)>=8192)return r2(ss|0,ds|0,ps|0)|0;if(ws=ss|0,Es=ss+ps|0,(ss&3)==(ds&3)){for(;ss&3;){if(!ps)return ws|0;as[ss>>0]=as[ds>>0]|0,ss=ss+1|0,ds=ds+1|0,ps=ps-1|0}for(ps=Es&-4|0,_s=ps-64|0;(ss|0)<=(_s|0);)is[ss>>2]=is[ds>>2],is[ss+4>>2]=is[ds+4>>2],is[ss+8>>2]=is[ds+8>>2],is[ss+12>>2]=is[ds+12>>2],is[ss+16>>2]=is[ds+16>>2],is[ss+20>>2]=is[ds+20>>2],is[ss+24>>2]=is[ds+24>>2],is[ss+28>>2]=is[ds+28>>2],is[ss+32>>2]=is[ds+32>>2],is[ss+36>>2]=is[ds+36>>2],is[ss+40>>2]=is[ds+40>>2],is[ss+44>>2]=is[ds+44>>2],is[ss+48>>2]=is[ds+48>>2],is[ss+52>>2]=is[ds+52>>2],is[ss+56>>2]=is[ds+56>>2],is[ss+60>>2]=is[ds+60>>2],ss=ss+64|0,ds=ds+64|0;for(;(ss|0)<(ps|0);)is[ss>>2]=is[ds>>2],ss=ss+4|0,ds=ds+4|0}else for(ps=Es-4|0;(ss|0)<(ps|0);)as[ss>>0]=as[ds>>0]|0,as[ss+1>>0]=as[ds+1>>0]|0,as[ss+2>>0]=as[ds+2>>0]|0,as[ss+3>>0]=as[ds+3>>0]|0,ss=ss+4|0,ds=ds+4|0;for(;(ss|0)<(Es|0);)as[ss>>0]=as[ds>>0]|0,ss=ss+1|0,ds=ds+1|0;return ws|0}function eT(ss){ss=ss|0;var ds=0;return ds=as[Ms+(ss&255)>>0]|0,(ds|0)<8?ds|0:(ds=as[Ms+(ss>>8&255)>>0]|0,(ds|0)<8?ds+8|0:(ds=as[Ms+(ss>>16&255)>>0]|0,(ds|0)<8?ds+16|0:(as[Ms+(ss>>>24)>>0]|0)+24|0))}function tT(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0;var ws=0,Ts=0,Ls=0,Ns=0,Gs=0,Bs=0,Hs=0,yl=0,Kl=0,Gl=0;if(Bs=ss,Ns=ds,Gs=Ns,Ts=ps,yl=_s,Ls=yl,!Gs)return ws=(Es|0)!=0,Ls?ws?(is[Es>>2]=ss|0,is[Es+4>>2]=ds&0,yl=0,Es=0,Us=yl,Es|0):(yl=0,Es=0,Us=yl,Es|0):(ws&&(is[Es>>2]=(Bs>>>0)%(Ts>>>0),is[Es+4>>2]=0),yl=0,Es=(Bs>>>0)/(Ts>>>0)>>>0,Us=yl,Es|0);ws=(Ls|0)==0;do if(Ts){if(!ws){if(ws=(tv(Ls|0)|0)-(tv(Gs|0)|0)|0,ws>>>0<=31){Hs=ws+1|0,Ls=31-ws|0,ds=ws-31>>31,Ts=Hs,ss=Bs>>>(Hs>>>0)&ds|Gs<<Ls,ds=Gs>>>(Hs>>>0)&ds,ws=0,Ls=Bs<<Ls;break}return Es?(is[Es>>2]=ss|0,is[Es+4>>2]=Ns|ds&0,yl=0,Es=0,Us=yl,Es|0):(yl=0,Es=0,Us=yl,Es|0)}if(ws=Ts-1|0,ws&Ts|0){Ls=(tv(Ts|0)|0)+33-(tv(Gs|0)|0)|0,Gl=64-Ls|0,Hs=32-Ls|0,Ns=Hs>>31,Kl=Ls-32|0,ds=Kl>>31,Ts=Ls,ss=Hs-1>>31&Gs>>>(Kl>>>0)|(Gs<<Hs|Bs>>>(Ls>>>0))&ds,ds=ds&Gs>>>(Ls>>>0),ws=Bs<<Gl&Ns,Ls=(Gs<<Gl|Bs>>>(Kl>>>0))&Ns|Bs<<Hs&Ls-33>>31;break}return Es|0&&(is[Es>>2]=ws&Bs,is[Es+4>>2]=0),(Ts|0)==1?(Kl=Ns|ds&0,Gl=ss|0|0,Us=Kl,Gl|0):(Gl=eT(Ts|0)|0,Kl=Gs>>>(Gl>>>0)|0,Gl=Gs<<32-Gl|Bs>>>(Gl>>>0)|0,Us=Kl,Gl|0)}else{if(ws)return Es|0&&(is[Es>>2]=(Gs>>>0)%(Ts>>>0),is[Es+4>>2]=0),Kl=0,Gl=(Gs>>>0)/(Ts>>>0)>>>0,Us=Kl,Gl|0;if(!Bs)return Es|0&&(is[Es>>2]=0,is[Es+4>>2]=(Gs>>>0)%(Ls>>>0)),Kl=0,Gl=(Gs>>>0)/(Ls>>>0)>>>0,Us=Kl,Gl|0;if(ws=Ls-1|0,!(ws&Ls))return Es|0&&(is[Es>>2]=ss|0,is[Es+4>>2]=ws&Gs|ds&0),Kl=0,Gl=Gs>>>((eT(Ls|0)|0)>>>0),Us=Kl,Gl|0;if(ws=(tv(Ls|0)|0)-(tv(Gs|0)|0)|0,ws>>>0<=30){ds=ws+1|0,Ls=31-ws|0,Ts=ds,ss=Gs<<Ls|Bs>>>(ds>>>0),ds=Gs>>>(ds>>>0),ws=0,Ls=Bs<<Ls;break}return Es?(is[Es>>2]=ss|0,is[Es+4>>2]=Ns|ds&0,Kl=0,Gl=0,Us=Kl,Gl|0):(Kl=0,Gl=0,Us=Kl,Gl|0)}while(!1);if(!Ts)Gs=Ls,Ns=0,Ls=0;else{Hs=ps|0|0,Bs=yl|_s&0,Gs=W$(Hs|0,Bs|0,-1,-1)|0,ps=Us,Ns=Ls,Ls=0;do _s=Ns,Ns=ws>>>31|Ns<<1,ws=Ls|ws<<1,_s=ss<<1|_s>>>31|0,yl=ss>>>31|ds<<1|0,fS(Gs|0,ps|0,_s|0,yl|0)|0,Gl=Us,Kl=Gl>>31|((Gl|0)<0?-1:0)<<1,Ls=Kl&1,ss=fS(_s|0,yl|0,Kl&Hs|0,(((Gl|0)<0?-1:0)>>31|((Gl|0)<0?-1:0)<<1)&Bs|0)|0,ds=Us,Ts=Ts-1|0;while(Ts|0);Gs=Ns,Ns=0}return Ts=0,Es|0&&(is[Es>>2]=ss,is[Es+4>>2]=ds),Kl=(ws|0)>>>31|(Gs|Ts)<<1|(Ts<<1|ws>>>31)&0|Ns,Gl=(ws<<1|0)&-2|Ls,Us=Kl,Gl|0}function V$(ss,ds,ps,_s){return ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,tT(ss,ds,ps,_s,0)|0}function Im(ss){ss=ss|0;var ds=0,ps=0;return ps=ss+15&-16|0,ds=is[gs>>2]|0,ss=ds+ps|0,(ps|0)>0&(ss|0)<(ds|0)|(ss|0)<0?(Yv()|0,p1(12),-1):(is[gs>>2]=ss,(ss|0)>(Jv()|0)&&!(Lv()|0)?(is[gs>>2]=ds,p1(12),-1):ds|0)}function Ex(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0;var _s=0;if((ds|0)<(ss|0)&(ss|0)<(ds+ps|0)){for(_s=ss,ds=ds+ps|0,ss=ss+ps|0;(ps|0)>0;)ss=ss-1|0,ds=ds-1|0,ps=ps-1|0,as[ss>>0]=as[ds>>0]|0;ss=_s}else Sv(ss,ds,ps)|0;return ss|0}function Y$(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0;var Es=0,ws=0;return ws=ms,ms=ms+16|0,Es=ws|0,tT(ss,ds,ps,_s,Es)|0,ms=ws,Us=is[Es+4>>2]|0,is[Es>>2]|0|0}function rT(ss){return ss=ss|0,(ss&255)<<24|(ss>>8&255)<<16|(ss>>16&255)<<8|ss>>>24|0}function KB(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0,nT[ss&1](ds|0,ps|0,_s|0,Es|0,ws|0)}function ZB(ss,ds,ps){ss=ss|0,ds=ds|0,ps=Os(ps),iT[ss&1](ds|0,Os(ps))}function QB(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps,aT[ss&31](ds|0,+ps)}function JB(ss,ds,ps,_s){return ss=ss|0,ds=ds|0,ps=Os(ps),_s=Os(_s),Os(oT[ss&0](ds|0,Os(ps),Os(_s)))}function eF(ss,ds){ss=ss|0,ds=ds|0,Y2[ss&127](ds|0)}function tF(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,X2[ss&31](ds|0,ps|0)}function rF(ss,ds){return ss=ss|0,ds=ds|0,hy[ss&31](ds|0)|0}function nF(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=+ps,_s=+_s,Es=Es|0,sT[ss&1](ds|0,+ps,+_s,Es|0)}function iF(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=+ps,_s=+_s,BF[ss&1](ds|0,+ps,+_s)}function aF(ss,ds,ps,_s){return ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,hS[ss&7](ds|0,ps|0,_s|0)|0}function oF(ss,ds,ps,_s){return ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,+FF[ss&1](ds|0,ps|0,_s|0)}function sF(ss,ds){return ss=ss|0,ds=ds|0,+uT[ss&15](ds|0)}function uF(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=+ps,GF[ss&1](ds|0,+ps)|0}function lF(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,q$[ss&15](ds|0,ps|0)|0}function fF(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=ps|0,_s=+_s,Es=+Es,ws=ws|0,jF[ss&1](ds|0,ps|0,+_s,+Es,ws|0)}function cF(ss,ds,ps,_s,Es,ws,Ts){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0,Ts=Ts|0,zF[ss&1](ds|0,ps|0,_s|0,Es|0,ws|0,Ts|0)}function dF(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,+lT[ss&7](ds|0,ps|0)}function hF(ss){return ss=ss|0,vS[ss&7]()|0}function vF(ss,ds,ps,_s,Es,ws){return ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0,fT[ss&1](ds|0,ps|0,_s|0,Es|0,ws|0)|0}function pF(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=+Es,UF[ss&1](ds|0,ps|0,_s|0,+Es)}function gF(ss,ds,ps,_s,Es,ws,Ts){ss=ss|0,ds=ds|0,ps=ps|0,_s=Os(_s),Es=Es|0,ws=Os(ws),Ts=Ts|0,cT[ss&1](ds|0,ps|0,Os(_s),Es|0,Os(ws),Ts|0)}function mF(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,$x[ss&15](ds|0,ps|0,_s|0)}function yF(ss){ss=ss|0,dT[ss&0]()}function _F(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=+_s,hT[ss&15](ds|0,ps|0,+_s)}function xF(ss,ds,ps){return ss=ss|0,ds=+ds,ps=+ps,HF[ss&1](+ds,+ps)|0}function EF(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,K$[ss&15](ds|0,ps|0,_s|0,Es|0)}function SF(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ov(0)}function wF(ss,ds){ss=ss|0,ds=Os(ds),ov(1)}function C1(ss,ds){ss=ss|0,ds=+ds,ov(2)}function $F(ss,ds,ps){return ss=ss|0,ds=Os(ds),ps=Os(ps),ov(3),D0}function pv(ss){ss=ss|0,ov(4)}function Sx(ss,ds){ss=ss|0,ds=ds|0,ov(5)}function F1(ss){return ss=ss|0,ov(6),0}function MF(ss,ds,ps,_s){ss=ss|0,ds=+ds,ps=+ps,_s=_s|0,ov(7)}function bF(ss,ds,ps){ss=ss|0,ds=+ds,ps=+ps,ov(8)}function CF(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,ov(9),0}function TF(ss,ds,ps){return ss=ss|0,ds=ds|0,ps=ps|0,ov(10),0}function dy(ss){return ss=ss|0,ov(11),0}function AF(ss,ds){return ss=ss|0,ds=+ds,ov(12),0}function wx(ss,ds){return ss=ss|0,ds=ds|0,ov(13),0}function IF(ss,ds,ps,_s,Es){ss=ss|0,ds=ds|0,ps=+ps,_s=+_s,Es=Es|0,ov(14)}function kF(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ws=ws|0,ov(15)}function X$(ss,ds){return ss=ss|0,ds=ds|0,ov(16),0}function LF(){return ov(17),0}function PF(ss,ds,ps,_s,Es){return ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,Es=Es|0,ov(18),0}function OF(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=+_s,ov(19)}function NF(ss,ds,ps,_s,Es,ws){ss=ss|0,ds=ds|0,ps=Os(ps),_s=_s|0,Es=Os(Es),ws=ws|0,ov(20)}function dS(ss,ds,ps){ss=ss|0,ds=ds|0,ps=ps|0,ov(21)}function DF(){ov(22)}function u_(ss,ds,ps){ss=ss|0,ds=ds|0,ps=+ps,ov(23)}function RF(ss,ds){return ss=+ss,ds=+ds,ov(24),0}function l_(ss,ds,ps,_s){ss=ss|0,ds=ds|0,ps=ps|0,_s=_s|0,ov(25)}var nT=[SF,k5],iT=[wF,vE],aT=[C1,ww,$w,Mw,Vm,bw,Fy,Cw,_m,Tw,SE,Em,q_,K_,Z_,Q_,J_,Gy,wE,C1,C1,C1,C1,C1,C1,C1,C1,C1,C1,C1,C1,C1],oT=[$F],Y2=[pv,o_,_0,A0,Hl,B4,F4,G4,iD,aD,oD,m5,y5,_5,z6,U6,H6,kx,By,dw,ym,xm,Lw,Pw,KE,v0,op,Vl,Wp,MT,zT,nA,yA,OA,KA,d4,A4,n3,_3,D3,Q3,vI,II,KI,fL,$L,jL,lw,yP,OP,JP,mO,LO,JO,lN,dN,AN,LN,qN,uD,cD,TD,VD,I0,AR,o8,E8,R8,a6,x6,L6,N6,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv,pv],X2=[Sx,_E,hw,gw,mw,mm,yw,_w,xE,EE,Ew,Sw,ix,ax,DE,RE,ox,sx,Ym,j2,U2,Vy,_k,hL,EO,LR,t5,CC,Sx,Sx,Sx,Sx],hy=[F1,_B,Y_,CE,TE,AE,IE,tx,kE,LE,nx,PE,qm,Km,Ow,HL,DO,kD,DR,D1,F1,F1,F1,F1,F1,F1,F1,F1,F1,F1,F1,F1],sT=[MF,Nw],BF=[bF,QN],hS=[CF,jC,xB,wB,AT,s3,SP,j8],FF=[TF,e4],uT=[dy,OE,NE,BE,Dw,Rw,Bw,Fw,cx,Wy,dy,dy,dy,dy,dy,dy],GF=[AF,oN],q$=[wx,HB,z2,Ws,Ml,WT,oA,P4,w3,TL,pE,M8,wx,wx,wx,wx],jF=[IF,kp],zF=[kF,l6],lT=[X$,zy,Yy,dx,Xy,g4,X$,X$],vS=[LF,qy,cw,sw,gN,DN,pD,F6],fT=[PF,nw],UF=[OF,rI],cT=[NF,Uy],$x=[dS,ex,rx,o2,Xm,N1,EA,yI,NI,fw,eR,f8,$6,dS,dS,dS],dT=[DF],hT=[u_,vw,pw,X_,xw,$E,ME,bE,G3,BP,rN,u_,u_,u_,u_,u_],HF=[RF,rD],K$=[l_,BA,QL,nO,WO,SN,zN,SD,ZD,zR,K6,l_,l_,l_,l_,l_];return{_llvm_bswap_i32:rT,dynCall_idd:xF,dynCall_i:hF,_i64Subtract:fS,___udivdi3:V$,dynCall_vif:ZB,setThrew:yS,dynCall_viii:mF,_bitshift64Lshr:cS,_bitshift64Shl:JC,dynCall_vi:eF,dynCall_viiddi:fF,dynCall_diii:oF,dynCall_iii:lF,_memset:s_,_sbrk:Im,_memcpy:Sv,__GLOBAL__sub_I_Yoga_cpp:ow,dynCall_vii:tF,___uremdi3:Y$,dynCall_vid:QB,stackAlloc:gS,_nbind_init:sB,getTempRet0:jm,dynCall_di:sF,dynCall_iid:uF,setTempRet0:_S,_i64Add:W$,dynCall_fiff:JB,dynCall_iiii:aF,_emscripten_get_global_libc:yB,dynCall_viid:_F,dynCall_viiid:pF,dynCall_viififi:gF,dynCall_ii:rF,__GLOBAL__sub_I_Binding_cc:ER,dynCall_viiii:EF,dynCall_iiiiii:vF,stackSave:mS,dynCall_viiiii:KB,__GLOBAL__sub_I_nbind_cc:Ky,dynCall_vidd:iF,_free:uS,runPostSets:qB,dynCall_viiiiii:cF,establishStackSpace:Ix,_memmove:Ex,stackRestore:gy,_malloc:sS,__GLOBAL__sub_I_common_cc:FD,dynCall_viddi:nF,dynCall_dii:dF,dynCall_v:yF}}(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module._llvm_bswap_i32=asm._llvm_bswap_i32,Module.getTempRet0=asm.getTempRet0,Module.___udivdi3=asm.___udivdi3,Module.setThrew=asm.setThrew,Module._bitshift64Lshr=asm._bitshift64Lshr,Module._bitshift64Shl=asm._bitshift64Shl,Module._memset=asm._memset,Module._sbrk=asm._sbrk,Module._memcpy=asm._memcpy,Module.stackAlloc=asm.stackAlloc,Module.___uremdi3=asm.___uremdi3,Module._nbind_init=asm._nbind_init,Module._i64Subtract=asm._i64Subtract,Module.setTempRet0=asm.setTempRet0,Module._i64Add=asm._i64Add,Module._emscripten_get_global_libc=asm._emscripten_get_global_libc;var __GLOBAL__sub_I_Yoga_cpp=Module.__GLOBAL__sub_I_Yoga_cpp=asm.__GLOBAL__sub_I_Yoga_cpp,__GLOBAL__sub_I_Binding_cc=Module.__GLOBAL__sub_I_Binding_cc=asm.__GLOBAL__sub_I_Binding_cc;Module.stackSave=asm.stackSave;var __GLOBAL__sub_I_nbind_cc=Module.__GLOBAL__sub_I_nbind_cc=asm.__GLOBAL__sub_I_nbind_cc,_free=Module._free=asm._free;Module.runPostSets=asm.runPostSets,Module.establishStackSpace=asm.establishStackSpace,Module._memmove=asm._memmove,Module.stackRestore=asm.stackRestore;var _malloc=Module._malloc=asm._malloc,__GLOBAL__sub_I_common_cc=Module.__GLOBAL__sub_I_common_cc=asm.__GLOBAL__sub_I_common_cc;Module.dynCall_viiiii=asm.dynCall_viiiii,Module.dynCall_vif=asm.dynCall_vif,Module.dynCall_vid=asm.dynCall_vid,Module.dynCall_fiff=asm.dynCall_fiff,Module.dynCall_vi=asm.dynCall_vi,Module.dynCall_vii=asm.dynCall_vii,Module.dynCall_ii=asm.dynCall_ii,Module.dynCall_viddi=asm.dynCall_viddi,Module.dynCall_vidd=asm.dynCall_vidd,Module.dynCall_iiii=asm.dynCall_iiii,Module.dynCall_diii=asm.dynCall_diii,Module.dynCall_di=asm.dynCall_di,Module.dynCall_iid=asm.dynCall_iid,Module.dynCall_iii=asm.dynCall_iii,Module.dynCall_viiddi=asm.dynCall_viiddi,Module.dynCall_viiiiii=asm.dynCall_viiiiii,Module.dynCall_dii=asm.dynCall_dii,Module.dynCall_i=asm.dynCall_i,Module.dynCall_iiiiii=asm.dynCall_iiiiii,Module.dynCall_viiid=asm.dynCall_viiid,Module.dynCall_viififi=asm.dynCall_viififi,Module.dynCall_viii=asm.dynCall_viii,Module.dynCall_v=asm.dynCall_v,Module.dynCall_viid=asm.dynCall_viid,Module.dynCall_idd=asm.dynCall_idd,Module.dynCall_viiii=asm.dynCall_viiii,Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm;function ExitStatus(ns){this.name="ExitStatus",this.message="Program terminated with exit("+ns+")",this.status=ns}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function ns(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=ns)},Module.callMain=Module.callMain=function ns(ts){ts=ts||[],ensureInitRuntime();var rs=ts.length+1;function as(){for(var fs=0;fs<3;fs++)os.push(0)}var os=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];as();for(var is=0;is<rs-1;is=is+1)os.push(allocate(intArrayFromString(ts[is]),"i8",ALLOC_NORMAL)),as();os.push(0),os=allocate(os,"i32",ALLOC_NORMAL);try{var us=Module._main(rs,os,0);exit(us,!0)}catch(fs){if(fs instanceof ExitStatus)return;if(fs=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else{var ls=fs;fs&&typeof fs=="object"&&fs.stack&&(ls=[fs,fs.stack]),Module.printErr("exception thrown: "+ls),Module.quit(1,fs)}}finally{}};function run(ns){if(ns=ns||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function ts(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(ns),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),ts()},1)):ts()}Module.run=Module.run=run;function exit(ns,ts){ts&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(ns)),ENVIRONMENT_IS_NODE&&process.exit(ns),Module.quit(ns,new ExitStatus(ns)))}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(ns){Module.onAbort&&Module.onAbort(ns),ns!==void 0?(Module.print(ns),Module.printErr(ns),ns=JSON.stringify(ns)):ns="",ABORT=!0;var ts=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,rs="abort("+ns+") at "+stackTrace()+ts;throw abortDecorators&&abortDecorators.forEach(function(as){rs=as(rs,ns)}),rs}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run()})})(nbind$1);var nbindExports=nbind$1.exports,Yoga=entryCommon,nbind=nbindExports,ran=!1,ret=null;nbind({},function(ns,ts){if(!ran){if(ran=!0,ns)throw ns;ret=ts}});if(!ran)throw new Error("Failed to load the yoga module - it needed to be loaded synchronously, but didn't");var entryBrowser=Yoga(ret.bind,ret.lib);const Yoga$1=getDefaultExportFromCjs(entryBrowser),behaviorOption={getDefaultCfg:function ns(){return{}},getEvents:function ns(){return{}},updateCfg:function ns(ts){return Object.assign(this,ts),!0},shouldBegin:function ns(){return!0},shouldUpdate:function ns(){return!0},shouldEnd:function ns(){return!0},bind:function ns(ts){var rs=this,as=this.events;this.graph=ts,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&ts.get("canvas").set("draggable",!0),each$1(as,function(os,is){ts.on(is,os)}),document.addEventListener("visibilitychange",function(){rs.keydown=!1})},unbind:function ns(ts){var rs=this.events;(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&ts.get("canvas").set("draggable",!1),each$1(rs,function(as,os){ts.off(os,as)})},get:function ns(ts){return this[ts]},set:function ns(ts,rs){return this[ts]=rs,this}};var Behavior=function(){function ns(){}return ns.registerBehavior=function(ts,rs){if(!rs)throw new Error("please specify handler for this behavior: "+ts);var as=clone$b(behaviorOption);Object.assign(as,rs);var os=function(us){var ls=this;Object.assign(this,this.getDefaultCfg(),us);var fs=this.getEvents();this.events=null;var hs={};fs&&(each$1(fs,function(vs,gs){hs[gs]=wrapBehavior$1(ls,vs)}),this.events=hs)};os.prototype=as,ns.types[ts]=os},ns.hasBehavior=function(ts){return!!ns.types[ts]},ns.getBehavior=function(ts){return ns.types[ts]},ns.types={},ns}(),adjMatrix=function ns(ts,rs){var as=ts.nodes,os=ts.edges,is=[],us={};if(!as)throw new Error("invalid nodes data!");return as&&as.forEach(function(ls,fs){us[ls.id]=fs;var hs=[];is.push(hs)}),os&&os.forEach(function(ls){var fs=ls.source,hs=ls.target,vs=us[fs],gs=us[hs];is[vs][gs]=1,rs||(is[gs][vs]=1)}),is},defaultComparator=function ns(ts,rs){return ts===rs},LinkedListNode=function(){function ns(ts,rs){rs===void 0&&(rs=null),this.value=ts,this.next=rs}return ns.prototype.toString=function(ts){return ts?ts(this.value):""+this.value},ns}(),LinkedList=function(){function ns(ts){ts===void 0&&(ts=defaultComparator),this.head=null,this.tail=null,this.compare=ts}return ns.prototype.prepend=function(ts){var rs=new LinkedListNode(ts,this.head);return this.head=rs,this.tail||(this.tail=rs),this},ns.prototype.append=function(ts){var rs=new LinkedListNode(ts);return this.head?(this.tail.next=rs,this.tail=rs,this):(this.head=rs,this.tail=rs,this)},ns.prototype.delete=function(ts){if(!this.head)return null;for(var rs=null;this.head&&this.compare(this.head.value,ts);)rs=this.head,this.head=this.head.next;var as=this.head;if(as!==null)for(;as.next;)this.compare(as.next.value,ts)?(rs=as.next,as.next=as.next.next):as=as.next;return this.compare(this.tail.value,ts)&&(this.tail=as),rs},ns.prototype.find=function(ts){var rs=ts.value,as=rs===void 0?void 0:rs,os=ts.callback,is=os===void 0?void 0:os;if(!this.head)return null;for(var us=this.head;us;){if(is&&is(us.value)||as!==void 0&&this.compare(us.value,as))return us;us=us.next}return null},ns.prototype.deleteTail=function(){var ts=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,ts;for(var rs=this.head;rs.next;)rs.next.next?rs=rs.next:rs.next=null;return this.tail=rs,ts},ns.prototype.deleteHead=function(){if(!this.head)return null;var ts=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),ts},ns.prototype.fromArray=function(ts){var rs=this;return ts.forEach(function(as){return rs.append(as)}),this},ns.prototype.toArray=function(){for(var ts=[],rs=this.head;rs;)ts.push(rs),rs=rs.next;return ts},ns.prototype.reverse=function(){for(var ts=this.head,rs=null,as=null;ts;)as=ts.next,ts.next=rs,rs=ts,ts=as;this.tail=this.head,this.head=rs},ns.prototype.toString=function(ts){return ts===void 0&&(ts=void 0),this.toArray().map(function(rs){return rs.toString(ts)}).toString()},ns}(),degree=function ns(ts){var rs={},as=ts.nodes,os=as===void 0?[]:as,is=ts.edges,us=is===void 0?[]:is;return os.forEach(function(ls){rs[ls.id]={degree:0,inDegree:0,outDegree:0}}),us.forEach(function(ls){rs[ls.source].degree++,rs[ls.source].outDegree++,rs[ls.target].degree++,rs[ls.target].inDegree++}),rs},floydWarshall$1=function ns(ts,rs){for(var as=adjMatrix(ts,rs),os=[],is=as.length,us=0;us<is;us+=1){os[us]=[];for(var ls=0;ls<is;ls+=1)us===ls?os[us][ls]=0:as[us][ls]===0||!as[us][ls]?os[us][ls]=1/0:os[us][ls]=as[us][ls]}for(var fs=0;fs<is;fs+=1)for(var us=0;us<is;us+=1)for(var ls=0;ls<is;ls+=1)os[us][ls]>os[us][fs]+os[fs][ls]&&(os[us][ls]=os[us][fs]+os[fs][ls]);return os},Stack=function(){function ns(ts){ts===void 0&&(ts=10),this.linkedList=new LinkedList,this.maxStep=ts}return Object.defineProperty(ns.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),ns.prototype.isEmpty=function(){return!this.linkedList.head},ns.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},ns.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},ns.prototype.push=function(ts){this.linkedList.prepend(ts),this.length>this.maxStep&&this.linkedList.deleteTail()},ns.prototype.pop=function(){var ts=this.linkedList.deleteHead();return ts?ts.value:null},ns.prototype.toArray=function(){return this.linkedList.toArray().map(function(ts){return ts.value})},ns.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},ns}(),transform$3=transform$i,compare=function ns(ts){return function(rs,as){return rs[ts]-as[ts]}},isBetween=function ns(ts,rs,as){return ts>=rs&&ts<=as},getLineIntersect=function ns(ts,rs,as,os){var is=.001,us={x:as.x-ts.x,y:as.y-ts.y},ls={x:rs.x-ts.x,y:rs.y-ts.y},fs={x:os.x-as.x,y:os.y-as.y},hs=ls.x*fs.y-ls.y*fs.x,vs=hs*hs,gs=ls.x*ls.x+ls.y*ls.y,ys=fs.x*fs.x+fs.y*fs.y,xs=null;if(vs>is*gs*ys){var ms=(us.x*fs.y-us.y*fs.x)/hs,Ss=(us.x*ls.y-us.y*ls.x)/hs;isBetween(ms,0,1)&&isBetween(Ss,0,1)&&(xs={x:ts.x+ms*ls.x,y:ts.y+ms*ls.y})}return xs},getRectIntersectByPoint=function ns(ts,rs){var as=ts.x,os=ts.y,is=ts.width,us=ts.height,ls=as+is/2,fs=os+us/2,hs=[],vs={x:ls,y:fs};hs.push({x:as,y:os}),hs.push({x:as+is,y:os}),hs.push({x:as+is,y:os+us}),hs.push({x:as,y:os+us}),hs.push({x:as,y:os});for(var gs=null,ys=1;ys<hs.length&&(gs=getLineIntersect(hs[ys-1],hs[ys],vs,rs),!gs);ys++);return gs},getCircleIntersectByPoint=function ns(ts,rs){var as=ts.x,os=ts.y,is=ts.r,us=rs.x,ls=rs.y,fs=us-as,hs=ls-os,vs=Math.sqrt(fs*fs+hs*hs);if(vs<is)return null;var gs=Math.sign(fs),ys=Math.sign(hs),xs=Math.atan(hs/fs);return{x:as+Math.abs(is*Math.cos(xs))*gs,y:os+Math.abs(is*Math.sin(xs))*ys}},getEllipseIntersectByPoint=function ns(ts,rs){var as=ts.rx,os=ts.ry,is=ts.x,us=ts.y,ls=rs.x-is,fs=rs.y-us,hs=Math.atan2(fs/os,ls/as);return hs<0&&(hs+=2*Math.PI),{x:is+as*Math.cos(hs),y:us+os*Math.sin(hs)}},applyMatrix=function ns(ts,rs,as){as===void 0&&(as=1);var os=[ts.x,ts.y,as];return(!rs||isNaN(rs[0]))&&(rs=[1,0,0,0,1,0,0,0,1]),transformMat3$1(os,os,rs),{x:os[0],y:os[1]}},invertMatrix=function ns(ts,rs,as){as===void 0&&(as=1),(!rs||isNaN(rs[0]))&&(rs=[1,0,0,0,1,0,0,0,1]);var os=invert$4([1,0,0,0,1,0,0,0,1],rs);os||(os=[1,0,0,0,1,0,0,0,1]);var is=[ts.x,ts.y,as];return transformMat3$1(is,is,os),{x:is[0],y:is[1]}},getCircleCenterByPoints=function ns(ts,rs,as){var os=ts.x-rs.x,is=ts.y-rs.y,us=ts.x-as.x,ls=ts.y-as.y,fs=(ts.x*ts.x-rs.x*rs.x-rs.y*rs.y+ts.y*ts.y)/2,hs=(ts.x*ts.x-as.x*as.x-as.y*as.y+ts.y*ts.y)/2,vs=is*us-os*ls;return{x:-(ls*fs-is*hs)/vs,y:-(os*hs-us*fs)/vs}},distance=function ns(ts,rs){var as=ts.x-rs.x,os=ts.y-rs.y;return Math.sqrt(as*as+os*os)},scaleMatrix=function ns(ts,rs){var as=[];return ts.forEach(function(os){var is=[];os.forEach(function(us){is.push(us*rs)}),as.push(is)}),as},floydWarshall=function ns(ts){for(var rs=[],as=ts.length,os=0;os<as;os+=1){rs[os]=[];for(var is=0;is<as;is+=1)os===is?rs[os][is]=0:ts[os][is]===0||!ts[os][is]?rs[os][is]=1/0:rs[os][is]=ts[os][is]}for(var us=0;us<as;us+=1)for(var os=0;os<as;os+=1)for(var is=0;is<as;is+=1)rs[os][is]>rs[os][us]+rs[us][is]&&(rs[os][is]=rs[os][us]+rs[us][is]);return rs},getAdjMatrix=function ns(ts,rs){var as=ts.nodes,os=ts.edges,is=[],us={};if(!as)throw new Error("invalid nodes data!");return as&&as.forEach(function(ls,fs){us[ls.id]=fs;var hs=[];is.push(hs)}),os&&os.forEach(function(ls){var fs=ls.source,hs=ls.target,vs=us[fs],gs=us[hs];is[vs][gs]=1,rs||(is[gs][vs]=1)}),is},translate=function ns(ts,rs){ts.translate(rs.x,rs.y)},move=function ns(ts,rs){var as=ts.getMatrix();as||(as=[1,0,0,0,1,0,0,0,1]);var os=ts.getCanvasBBox(),is=rs.x-os.minX,us=rs.y-os.minY,ls=transform$3(as,[["t",is,us]]);ts.setMatrix(ls)},scale=function ns(ts,rs){var as=ts.getMatrix();as||(as=[1,0,0,0,1,0,0,0,1]);var os=rs;isArray$2(rs)||(os=[rs,rs]),isArray$2(rs)&&rs.length===1&&(os=[rs[0],rs[0]]),as=transform$3(as,[["s",os[0],os[1]]]),ts.setMatrix(as)},rotate=function ns(ts,rs){var as=ts.getMatrix();as||(as=[1,0,0,0,1,0,0,0,1]),as=transform$3(as,[["r",rs]]),ts.setMatrix(as)},getDegree=function ns(ts,rs,as){for(var os=[],is=0;is<ts;is++)os[is]=0;return as.forEach(function(us){us.source&&(os[rs[us.source]]+=1),us.target&&(os[rs[us.target]]+=1)}),os};function onSegment(ns,ts,rs){return(rs[0]-ns[0])*(ts[1]-ns[1])===(ts[0]-ns[0])*(rs[1]-ns[1])&&Math.min(ns[0],ts[0])<=rs[0]&&rs[0]<=Math.max(ns[0],ts[0])&&Math.min(ns[1],ts[1])<=rs[1]&&rs[1]<=Math.max(ns[1],ts[1])}var isPointInPolygon=function ns(ts,rs,as){var os=!1,is=ts.length,us=1e-6;function ls(gs){return Math.abs(gs)<us?0:gs<0?-1:1}if(is<=2)return!1;for(var fs=0;fs<is;fs++){var hs=ts[fs],vs=ts[(fs+1)%is];if(onSegment(hs,vs,[rs,as]))return!0;ls(hs[1]-as)>0!=ls(vs[1]-as)>0&&ls(rs-(as-hs[1])*(hs[0]-vs[0])/(hs[1]-vs[1])-hs[0])<0&&(os=!os)}return os},intersectBBox=function ns(ts,rs){return!(rs.minX>ts.maxX||rs.maxX<ts.minX||rs.minY>ts.maxY||rs.maxY<ts.minY)},lineIntersectPolygon=function ns(ts,rs){var as=!1;return each$1(ts,function(os){if(getLineIntersect(os.from,os.to,rs.from,rs.to))return as=!0,!1}),as},isPolygonsIntersect=function ns(ts,rs){var as=function(ys){var xs=ys.map(function(Ss){return Ss[0]}),ms=ys.map(function(Ss){return Ss[1]});return{minX:Math.min.apply(null,xs),maxX:Math.max.apply(null,xs),minY:Math.min.apply(null,ms),maxY:Math.max.apply(null,ms)}},os=function(ys){for(var xs=[],ms=ys.length,Ss=0;Ss<ms-1;Ss++){var Ms=ys[Ss],$s=ys[Ss+1];xs.push({from:{x:Ms[0],y:Ms[1]},to:{x:$s[0],y:$s[1]}})}if(xs.length>1){var bs=ys[0],Cs=ys[ms-1];xs.push({from:{x:Cs[0],y:Cs[1]},to:{x:bs[0],y:bs[1]}})}return xs};if(ts.length<2||rs.length<2)return!1;var is=as(ts),us=as(rs);if(!intersectBBox(is,us))return!1;var ls=!1;if(each$1(rs,function(gs){if(isPointInPolygon(ts,gs[0],gs[1]))return ls=!0,!1}),ls||(each$1(ts,function(gs){if(isPointInPolygon(rs,gs[0],gs[1]))return ls=!0,!1}),ls))return!0;var fs=os(ts),hs=os(rs),vs=!1;return each$1(hs,function(gs){if(lineIntersectPolygon(fs,gs))return vs=!0,!1}),vs},Line=function(){function ns(ts,rs,as,os){this.x1=ts,this.y1=rs,this.x2=as,this.y2=os}return ns.prototype.getBBox=function(){var ts=Math.min(this.x1,this.x2),rs=Math.min(this.y1,this.y2),as=Math.max(this.x1,this.x2),os=Math.max(this.y1,this.y2),is={x:ts,y:rs,minX:ts,minY:rs,maxX:as,maxY:os,width:as-ts,height:os-rs};return is},ns}(),getBBoxBoundLine=function ns(ts,rs){var as={top:[ts.minX,ts.minY,ts.maxX,ts.minY],left:[ts.minX,ts.minY,ts.minX,ts.maxY],bottom:[ts.minX,ts.maxY,ts.maxX,ts.maxY],right:[ts.maxX,ts.minY,ts.maxX,ts.maxY]};return as[rs]},fractionAlongLineA=function ns(ts,rs){var as=(rs.x2-rs.x1)*(ts.y1-rs.y1)-(rs.y2-rs.y1)*(ts.x1-rs.x1),os=(ts.x2-ts.x1)*(ts.y1-rs.y1)-(ts.y2-ts.y1)*(ts.x1-rs.x1),is=(rs.y2-rs.y1)*(ts.x2-ts.x1)-(rs.x2-rs.x1)*(ts.y2-ts.y1);if(is){var us=as/is,ls=os/is;if(us>=0&&us<=1&&ls>=0&&ls<=1)return us}return Number.POSITIVE_INFINITY},itemIntersectByLine=function ns(ts,rs){for(var as=["top","left","bottom","right"],os=ts.getBBox(),is=0,us=[],ls=0;ls<4;ls++){var fs=getBBoxBoundLine(os,as[ls]),hs=fs[0],vs=fs[1],gs=fs[2],ys=fs[3];us[ls]=getLineIntersect({x:rs.x1,y:rs.y1},{x:rs.x2,y:rs.y2},{x:hs,y:vs},{x:gs,y:ys}),us[ls]&&(is+=1)}return[us,is]},fractionToLine=function ns(ts,rs){for(var as=["top","left","bottom","right"],os=ts.getBBox(),is=Number.POSITIVE_INFINITY,us=0,ls=0;ls<4;ls++){var fs=getBBoxBoundLine(os,as[ls]),hs=fs[0],vs=fs[1],gs=fs[2],ys=fs[3],xs=fractionAlongLineA(rs,new Line(hs,vs,gs,ys));xs=Math.abs(xs-.5),xs>=0&&xs<=1&&(us+=1,is=xs<is?xs:is)}return us===0?-1:is},getPointsCenter=function ns(ts){var rs=0,as=0;if(ts.length>0){for(var os=0,is=ts;os<is.length;os++){var us=is[os];rs+=us.x,as+=us.y}rs/=ts.length,as/=ts.length}return{x:rs,y:as}},squareDist=function ns(ts,rs){return Math.pow(ts.x-rs.x,2)+Math.pow(ts.y-rs.y,2)},pointLineSquareDist=function ns(ts,rs){var as=rs.x1,os=rs.y1,is=rs.x2-as,us=rs.y2-os,ls=ts.x-as,fs=ts.y-os,hs=ls*is+fs*us,vs;hs<=0?vs=0:(ls=is-ls,fs=us-fs,hs=ls*is+fs*us,hs<=0?vs=0:vs=hs*hs/(is*is+us*us));var gs=ls*ls+fs*fs-vs;return gs<0&&(gs=0),gs},isPointsOverlap=function ns(ts,rs,as){return as===void 0&&(as=.001),Math.pow(ts.x-rs.x,2)+Math.pow(ts.y-rs.y,2)<Math.pow(as,2)},pointRectSquareDist=function ns(ts,rs){var as=ts.x<rs.x,os=ts.x>rs.x+rs.width,is=ts.y>rs.y+rs.height,us=ts.y<rs.y,ls=as||os||is||us;if(!ls)return 0;if(is&&!as&&!os)return Math.pow(rs.y+rs.height-ts.y,2);if(us&&!as&&!os)return Math.pow(ts.y-rs.y,2);if(as&&!is&&!us)return Math.pow(rs.x-ts.x,2);if(os&&!is&&!us)return Math.pow(rs.x+rs.width-ts.x,2);var fs=Math.min(Math.abs(rs.x-ts.x),Math.abs(rs.x+rs.width-ts.x)),hs=Math.min(Math.abs(rs.y-ts.y),Math.abs(rs.y+rs.height-ts.y));return fs*fs+hs*hs};const MathUtil=Object.freeze(Object.defineProperty({__proto__:null,Line,applyMatrix,compare,distance,floydWarshall,fractionToLine,getAdjMatrix,getBBoxBoundLine,getCircleCenterByPoints,getCircleIntersectByPoint,getDegree,getEllipseIntersectByPoint,getLineIntersect,getPointsCenter,getRectIntersectByPoint,intersectBBox,invertMatrix,isPointInPolygon,isPointsOverlap,isPolygonsIntersect,itemIntersectByLine,move,pointLineSquareDist,pointRectSquareDist,rotate,scale,scaleMatrix,squareDist,translate},Symbol.toStringTag,{value:"Module"}));var subjectColor="rgb(95, 149, 255)",backColor="rgb(255, 255, 255)",textColor="rgb(0, 0, 0)",activeFill="rgb(247, 250, 255)",nodeMainFill="rgb(239, 244, 255)",comboFill="rgb(253, 253, 253)",disabledFill="rgb(250, 250, 250)",edgeMainStroke="rgb(224, 224, 224)",edgeInactiveStroke="rgb(234, 234, 234)",edgeDisablesStroke="rgb(245, 245, 245)",inactiveStroke="rgb(191, 213, 255)",highlightStroke="#4572d9",highlightFill="rgb(223, 234, 255)",colorSet={mainStroke:subjectColor,mainFill:nodeMainFill,activeStroke:subjectColor,activeFill,inactiveStroke,inactiveFill:activeFill,selectedStroke:subjectColor,selectedFill:backColor,highlightStroke,highlightFill,disableStroke:edgeMainStroke,disableFill:disabledFill,edgeMainStroke,edgeActiveStroke:subjectColor,edgeInactiveStroke,edgeSelectedStroke:subjectColor,edgeHighlightStroke:subjectColor,edgeDisableStroke:edgeDisablesStroke,comboMainStroke:edgeMainStroke,comboMainFill:comboFill,comboActiveStroke:subjectColor,comboActiveFill:activeFill,comboInactiveStroke:edgeMainStroke,comboInactiveFill:comboFill,comboSelectedStroke:subjectColor,comboSelectedFill:comboFill,comboHighlightStroke:highlightStroke,comboHighlightFill:comboFill,comboDisableStroke:edgeInactiveStroke,comboDisableFill:disabledFill};const Global={version:"0.0.7",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:colorSet.mainStroke,fill:nodeMainFill},size:20,color:colorSet.mainStroke,linkPoints:{size:8,lineWidth:1,fill:colorSet.activeFill,stroke:colorSet.activeStroke}},nodeStateStyles:{active:{fill:colorSet.activeFill,stroke:colorSet.activeStroke,lineWidth:2,shadowColor:colorSet.mainStroke,shadowBlur:10},selected:{fill:colorSet.selectedFill,stroke:colorSet.selectedStroke,lineWidth:4,shadowColor:colorSet.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:colorSet.highlightFill,stroke:colorSet.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:colorSet.inactiveFill,stroke:colorSet.inactiveStroke,lineWidth:1},disable:{fill:colorSet.disableFill,stroke:colorSet.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:textColor,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:colorSet.edgeMainStroke,lineAppendWidth:2},color:colorSet.edgeMainStroke},edgeStateStyles:{active:{stroke:colorSet.edgeActiveStroke,lineWidth:1},selected:{stroke:colorSet.edgeSelectedStroke,lineWidth:2,shadowColor:colorSet.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:colorSet.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:colorSet.edgeInactiveStroke,lineWidth:1},disable:{stroke:colorSet.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:textColor,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:colorSet.comboMainFill,lineWidth:1,stroke:colorSet.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:colorSet.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:colorSet.comboActiveStroke,lineWidth:1,fill:colorSet.comboActiveFill},selected:{stroke:colorSet.comboSelectedStroke,lineWidth:2,fill:colorSet.comboSelectedFill,shadowColor:colorSet.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:colorSet.comboHighlightStroke,lineWidth:2,fill:colorSet.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:colorSet.comboInactiveStroke,fill:colorSet.comboInactiveFill,lineWidth:1},disable:{stroke:colorSet.comboDisableStroke,fill:colorSet.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}};var ModeController=function(){function ns(ts){this.graph=ts,this.destroyed=!1,this.modes=ts.get("modes")||{default:[]},this.formatModes(),this.mode=ts.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return ns.prototype.formatModes=function(){var ts=this.modes;each$1(ts,function(rs){each$1(rs,function(as,os){isString$2(as)&&(rs[os]={type:as})})})},ns.prototype.setBehaviors=function(ts){var rs=this.graph,as=this.modes[ts],os=[],is;each$1(as||[],function(us){var ls=Behavior.getBehavior(us.type||us);ls&&(is=new ls(us),is&&(is.bind(rs),os.push(is)))}),this.currentBehaves=os},ns.mergeBehaviors=function(ts,rs){return each$1(rs,function(as){ts.indexOf(as)<0&&(isString$2(as)&&(as={type:as}),ts.push(as))}),ts},ns.filterBehaviors=function(ts,rs){var as=[];return ts.forEach(function(os){var is="";isString$2(os)?is=os:is=os.type,rs.indexOf(is)<0&&as.push(os)}),as},ns.prototype.setMode=function(ts){var rs=this,as=rs.modes,os=rs.graph,is=ts,us=as[is];us&&(os.emit("beforemodechange",{mode:ts}),each$1(this.currentBehaves,function(ls){ls.unbind(os)}),this.setBehaviors(is),os.emit("aftermodechange",{mode:ts}),this.mode=ts)},ns.prototype.getMode=function(){return this.mode},ns.prototype.manipulateBehaviors=function(ts,rs,as){var os=this,is;if(isArray$2(ts)?is=ts:is=[ts],isArray$2(rs))return each$1(rs,function(ls){os.modes[ls]?as?os.modes[ls]=ns.mergeBehaviors(os.modes[ls]||[],is):os.modes[ls]=ns.filterBehaviors(os.modes[ls]||[],is):as&&(os.modes[ls]=is)}),this;var us=rs;return rs||(us=this.mode),this.modes[us]||as&&(this.modes[us]=is),as?this.modes[us]=ns.mergeBehaviors(this.modes[us]||[],is):this.modes[us]=ns.filterBehaviors(this.modes[us]||[],is),this.setMode(this.mode),this},ns.prototype.updateBehavior=function(ts,rs,as){isString$2(ts)&&(ts={type:ts});var os=[];if(!as||as===this.mode||as==="default"){if(os=this.currentBehaves,!os||!os.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var is=os.length,us=0;us<is;us++){var ls=os[us];if(ls.type===ts.type)return ls.updateCfg(rs),this;us===is-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(os=this.modes[as],!os||!os.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var fs=os.length,us=0;us<fs;us++){var ls=os[us];if(ls.type===ts.type||ls===ts.type)return ls===ts.type&&(ls={type:ls}),Object.assign(ls,rs),os[us]=ls,this;us===fs-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},ns.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},ns}(),G6GraphEvent=function(ns){__extends$x(ts,ns);function ts(rs,as){var os=ns.call(this,rs,as)||this;return os.item=as.item,os.canvasX=as.canvasX,os.canvasY=as.canvasY,os.wheelDelta=as.wheelDelta,os.detail=as.detail,os}return ts}(GraphEvent),uniqueId=function ns(ts){return ts+"-"+Math.random()+Date.now()},formatPadding=function ns(ts){var rs=0,as=0,os=0,is=0;if(isNumber$3(ts))rs=as=os=is=ts;else if(isString$2(ts)){var us=parseInt(ts,10);rs=as=os=is=us}else isArray$2(ts)&&(rs=ts[0],os=isNil$2(ts[1])?ts[0]:ts[1],is=isNil$2(ts[2])?ts[0]:ts[2],as=isNil$2(ts[3])?os:ts[3]);return[rs,os,is,as]},cloneEvent=function ns(ts){var rs=new G6GraphEvent(ts.type,ts);return rs.clientX=ts.clientX,rs.clientY=ts.clientY,rs.x=ts.x,rs.y=ts.y,rs.target=ts.target,rs.currentTarget=ts.currentTarget,rs.bubbles=!0,rs.item=ts.item,rs},isViewportChanged=function ns(ts){if(!ts)return!1;for(var rs=9,as=[1,0,0,0,1,0,0,0,1],os=0;os<rs;os++)if(ts[os]!==as[os])return!0;return!1},isNaN$1=function ns(ts){return Number.isNaN(Number(ts))},calculationItemsBBox=function ns(ts){for(var rs=1/0,as=-1/0,os=1/0,is=-1/0,us=0;us<ts.length;us++){var ls=ts[us],fs=ls.getBBox(),hs=fs.minX,vs=fs.minY,gs=fs.maxX,ys=fs.maxY;hs<rs&&(rs=hs),vs<os&&(os=vs),gs>as&&(as=gs),ys>is&&(is=ys)}var xs=Math.floor(rs),ms=Math.floor(os),Ss=Math.ceil(as)-Math.floor(rs),Ms=Math.ceil(is)-Math.floor(os);return{x:xs,y:ms,width:Ss,height:Ms,minX:rs,minY:os,maxX:as,maxY:is}},processParallelEdges=function ns(ts,rs,as,os,is){rs===void 0&&(rs=15),as===void 0&&(as="quadratic");for(var us=ts.length,ls=rs*2,fs=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],hs={},vs=[],gs={},ys=0;ys<us;ys++){var xs=ts[ys],ms=xs.source,Ss=xs.target,Ms=ms+"-"+Ss;if(!vs[ys]){hs[Ms]||(hs[Ms]=[]),vs[ys]=!0,hs[Ms].push(xs);for(var $s=0;$s<us;$s++)if(ys!==$s){var bs=ts[$s],Cs=bs.source,As=bs.target;vs[$s]||(ms===As&&Ss===Cs?(hs[Ms].push(bs),vs[$s]=!0,gs[Cs+"|"+As+"|"+(hs[Ms].length-1)]=!0):ms===Cs&&Ss===As&&(hs[Ms].push(bs),vs[$s]=!0))}}}for(var Is in hs)for(var ks=hs[Is],Ps=ks.length,Ds=0;Ds<Ps;Ds++){var Fs=ks[Ds];if(Fs.source===Fs.target){is&&(Fs.type=is),Fs.loopCfg={position:fs[Ds%8],dist:Math.floor(Ds/8)*20+50};continue}if(Ps===1&&os&&Fs.source!==Fs.target){Fs.type=os;continue}Fs.type=as;var Rs=(Ds%2===0?1:-1)*(gs[Fs.source+"|"+Fs.target+"|"+Ds]?-1:1);Ps%2===1?Fs.curveOffset=Rs*Math.ceil(Ds/2)*ls:Fs.curveOffset=Rs*(Math.floor(Ds/2)*ls+rs)}return ts};const BaseUtil=Object.freeze(Object.defineProperty({__proto__:null,calculationItemsBBox,cloneEvent,formatPadding,isNaN:isNaN$1,isViewportChanged,processParallelEdges,uniqueId},Symbol.toStringTag,{value:"Module"}));var ViewController=function(){function ns(ts){this.destroyed=!1,this.graph=ts,this.destroyed=!1}return ns.prototype.getViewCenter=function(){var ts=this.getFormatPadding(),rs=this.graph,as=this.graph.get("width"),os=rs.get("height");return{x:(as-ts[1]-ts[3])/2+ts[3],y:(os-ts[0]-ts[2])/2+ts[0]}},ns.prototype.fitCenter=function(){var ts=this.graph,rs=ts.get("group");rs.resetMatrix();var as=rs.getCanvasBBox();if(!(as.width===0||as.height===0)){var os=this.getViewCenter(),is={x:as.x+as.width/2,y:as.y+as.height/2};ts.translate(os.x-is.x,os.y-is.y)}},ns.prototype.fitView=function(){var ts=this.graph,rs=this.getFormatPadding(),as=ts.get("width"),os=ts.get("height"),is=ts.get("group");is.resetMatrix();var us=is.getCanvasBBox();if(!(us.width===0||us.height===0)){var ls=this.getViewCenter(),fs={x:us.x+us.width/2,y:us.y+us.height/2};ts.translate(ls.x-fs.x,ls.y-fs.y);var hs=(as-rs[1]-rs[3])/us.width,vs=(os-rs[0]-rs[2])/us.height,gs=hs;hs>vs&&(gs=vs),ts.zoom(gs,ls)}},ns.prototype.getFormatPadding=function(){var ts=this.graph.get("fitViewPadding");return formatPadding(ts)},ns.prototype.focusPoint=function(ts,rs,as){var os=this,is=this.getViewCenter(),us=this.getPointByCanvas(is.x,is.y),ls=this.graph.get("group").getMatrix();if(ls||(ls=[1,0,0,0,1,0,0,0,1]),rs){var fs=(us.x-ts.x)*ls[0],hs=(us.y-ts.y)*ls[4],vs=0,gs=0,ys=0,xs=0;this.graph.get("canvas").animate(function(ms){ys=fs*ms,xs=hs*ms,os.graph.translate(ys-vs,xs-gs),vs=ys,gs=xs},__assign$h({},as))}else this.graph.translate((us.x-ts.x)*ls[0],(us.y-ts.y)*ls[4])},ns.prototype.getPointByCanvas=function(ts,rs){var as=this.graph.get("group").getMatrix();as||(as=[1,0,0,0,1,0,0,0,1]);var os=invertMatrix({x:ts,y:rs},as);return os},ns.prototype.getPointByClient=function(ts,rs){var as=this.graph.get("canvas"),os=as.getPointByClient(ts,rs);return this.getPointByCanvas(os.x,os.y)},ns.prototype.getClientByPoint=function(ts,rs){var as=this.graph.get("canvas"),os=this.getCanvasByPoint(ts,rs),is=as.getClientByPoint(os.x,os.y);return{x:is.x,y:is.y}},ns.prototype.getCanvasByPoint=function(ts,rs){var as=this.graph.get("group").getMatrix();return as||(as=[1,0,0,0,1,0,0,0,1]),applyMatrix({x:ts,y:rs},as)},ns.prototype.focus=function(ts,rs,as){isString$2(ts)&&(ts=this.graph.findById(ts));var os=ts.get("group"),is=os.getMatrix();is||(is=[1,0,0,0,1,0,0,0,1]),ts&&this.focusPoint({x:is[6],y:is[7]},rs,as)},ns.prototype.changeSize=function(ts,rs){var as=this.graph;if(!isNumber$3(ts)||!isNumber$3(rs))throw Error("invalid canvas width & height, please make sure width & height type is number");as.set({width:ts,height:rs});var os=as.get("canvas");os.changeSize(ts,rs);var is=as.get("plugins");is.forEach(function(us){if(us.get("gridContainer")){var ls=as.get("minZoom");modifyCSS$1(us.get("container"),{width:ts+"px",height:rs+"px"}),modifyCSS$1(us.get("gridContainer"),{width:ts/ls+"px",height:rs/ls+"px",left:0,top:0})}})},ns.prototype.destroy=function(){this.graph=null,this.destroyed=!1},ns}();const letterAspectRatio={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875};var PI=Math.PI,sin=Math.sin,cos=Math.cos,SELF_LINK_SIN=sin(PI/8),SELF_LINK_COS=cos(PI/8),getBBox$1=function ns(ts,rs){var as=ts.getBBox(),os={x:as.minX,y:as.minY},is={x:as.maxX,y:as.maxY};if(rs){var us=rs.getMatrix();us||(us=[1,0,0,0,1,0,0,0,1]),os=applyMatrix(os,us),is=applyMatrix(is,us)}var ls=os.x,fs=os.y,hs=is.x,vs=is.y;return{x:ls,y:fs,minX:ls,minY:fs,maxX:hs,maxY:vs,width:hs-ls,height:vs-fs}},getLoopCfgs=function ns(ts){var rs=ts.sourceNode||ts.targetNode,as=rs.get("group"),os=as.getMatrix();os||(os=[1,0,0,0,1,0,0,0,1]);var is=rs.getKeyShape(),us=is.getBBox(),ls=ts.loopCfg||{},fs=ls.dist||Math.max(us.width,us.height)*2,hs=ls.position||Global.defaultLoopPosition,vs=[os[6],os[7]],gs=[ts.startPoint.x,ts.startPoint.y],ys=[ts.endPoint.x,ts.endPoint.y],xs=us.height/2,ms=us.height/2,Ss=xs*SELF_LINK_SIN,Ms=xs*SELF_LINK_COS,$s=ms*SELF_LINK_SIN,bs=ms*SELF_LINK_COS;if(gs[0]===ys[0]&&gs[1]===ys[1]){switch(hs){case"top":gs=[vs[0]-Ss,vs[1]-Ms],ys=[vs[0]+$s,vs[1]-bs];break;case"top-right":xs=us.height/2,ms=us.width/2,Ss=xs*SELF_LINK_SIN,Ms=xs*SELF_LINK_COS,$s=ms*SELF_LINK_SIN,bs=ms*SELF_LINK_COS,gs=[vs[0]+Ss,vs[1]-Ms],ys=[vs[0]+bs,vs[1]-$s];break;case"right":xs=us.width/2,ms=us.width/2,Ss=xs*SELF_LINK_SIN,Ms=xs*SELF_LINK_COS,$s=ms*SELF_LINK_SIN,bs=ms*SELF_LINK_COS,gs=[vs[0]+Ms,vs[1]-Ss],ys=[vs[0]+bs,vs[1]+$s];break;case"bottom-right":xs=us.width/2,ms=us.height/2,Ss=xs*SELF_LINK_SIN,Ms=xs*SELF_LINK_COS,$s=ms*SELF_LINK_SIN,bs=ms*SELF_LINK_COS,gs=[vs[0]+Ms,vs[1]+Ss],ys=[vs[0]+$s,vs[1]+bs];break;case"bottom":xs=us.height/2,ms=us.height/2,Ss=xs*SELF_LINK_SIN,Ms=xs*SELF_LINK_COS,$s=ms*SELF_LINK_SIN,bs=ms*SELF_LINK_COS,gs=[vs[0]+Ss,vs[1]+Ms],ys=[vs[0]-$s,vs[1]+bs];break;case"bottom-left":xs=us.height/2,ms=us.width/2,Ss=xs*SELF_LINK_SIN,Ms=xs*SELF_LINK_COS,$s=ms*SELF_LINK_SIN,bs=ms*SELF_LINK_COS,gs=[vs[0]-Ss,vs[1]+Ms],ys=[vs[0]-bs,vs[1]+$s];break;case"left":xs=us.width/2,ms=us.width/2,Ss=xs*SELF_LINK_SIN,Ms=xs*SELF_LINK_COS,$s=ms*SELF_LINK_SIN,bs=ms*SELF_LINK_COS,gs=[vs[0]-Ms,vs[1]+Ss],ys=[vs[0]-bs,vs[1]-$s];break;case"top-left":xs=us.width/2,ms=us.height/2,Ss=xs*SELF_LINK_SIN,Ms=xs*SELF_LINK_COS,$s=ms*SELF_LINK_SIN,bs=ms*SELF_LINK_COS,gs=[vs[0]-Ms,vs[1]-Ss],ys=[vs[0]-$s,vs[1]-bs];break;default:xs=us.width/2,ms=us.width/2,Ss=xs*SELF_LINK_SIN,Ms=xs*SELF_LINK_COS,$s=ms*SELF_LINK_SIN,bs=ms*SELF_LINK_COS,gs=[vs[0]-Ss,vs[1]-Ms],ys=[vs[0]+$s,vs[1]-bs]}if(ls.clockwise===!1){var Cs=[gs[0],gs[1]];gs=[ys[0],ys[1]],ys=[Cs[0],Cs[1]]}}var As=[gs[0]-vs[0],gs[1]-vs[1]],Is=(xs+fs)/xs,ks=(ms+fs)/ms;ls.clockwise===!1&&(Is=(ms+fs)/ms,ks=(xs+fs)/xs);var Ps=scale$2([0,0],As,Is),Ds=[vs[0]+Ps[0],vs[1]+Ps[1]],Fs=[ys[0]-vs[0],ys[1]-vs[1]],Rs=scale$2([0,0],Fs,ks),js=[vs[0]+Rs[0],vs[1]+Rs[1]];return ts.startPoint={x:gs[0],y:gs[1]},ts.endPoint={x:ys[0],y:ys[1]},ts.controlPoints=[{x:Ds[0],y:Ds[1]},{x:js[0],y:js[1]}],ts},getLabelPosition=function ns(ts,rs,as,os,is){var us=1e-4,ls=[],fs=ts.getPoint(rs);if(fs===null)return{x:0,y:0,angle:0};if(rs<us)ls=ts.getStartTangent().reverse();else if(rs>1-us)ls=ts.getEndTangent();else{var hs=ts.getPoint(rs+us);ls.push([fs.x,fs.y]),ls.push([hs.x,hs.y])}var vs=Math.atan2(ls[1][1]-ls[0][1],ls[1][0]-ls[0][0]);if(vs<0&&(vs+=PI*2),as&&(fs.x+=cos(vs)*as,fs.y+=sin(vs)*as),os){var gs=vs-PI/2;vs>1/2*PI&&vs<3*1/2*PI&&(gs-=PI),fs.x+=cos(gs)*os,fs.y+=sin(gs)*os}var ys={x:fs.x,y:fs.y,angle:vs};return is?(vs>1/2*PI&&vs<3*1/2*PI&&(vs-=PI),__assign$h({rotate:vs},ys)):ys},traverse=function ns(ts,rs){if(rs(ts)===!1)return!1;if(ts&&ts.children){for(var as=ts.children.length-1;as>=0;as--)if(!ns(ts.children[as],rs))return!1}return!0},traverseUp=function ns(ts,rs){if(ts&&ts.children){for(var as=ts.children.length-1;as>=0;as--)if(!ns(ts.children[as],rs))return}return rs(ts)!==!1},traverseTree=function ns(ts,rs){typeof rs=="function"&&traverse(ts,rs)},traverseTreeUp=function ns(ts,rs){typeof rs=="function"&&traverseUp(ts,rs)},getLetterWidth=function ns(ts,rs){return rs*(letterAspectRatio[ts]||1)},getTextSize$1=function ns(ts,rs){var as=0,os=new RegExp("[一-龥]+");return ts.split("").forEach(function(is){os.test(is)?as+=rs:as+=getLetterWidth(is,rs)}),[as,rs]},plainCombosToTrees=function ns(ts,rs){var as=[],os={},is={};ts.forEach(function(fs){is[fs.id]=fs}),ts.forEach(function(fs,hs){var vs=clone$b(fs);vs.itemType="combo",vs.children=void 0,vs.parentId===vs.id?(console.warn("The parentId for combo "+vs.id+" can not be the same as the combo's id"),delete vs.parentId):vs.parentId&&!is[vs.parentId]&&(console.warn("The parent combo for combo "+vs.id+" does not exist!"),delete vs.parentId);var gs=os[vs.id];if(gs){if(vs.children=gs.children,os[vs.id]=vs,gs=vs,!gs.parentId){as.push(gs);return}var ys=os[gs.parentId];if(ys)ys.children?ys.children.push(vs):ys.children=[vs];else{var xs={id:gs.parentId,children:[gs]};os[gs.parentId]=xs,os[vs.id]=vs}return}if(isString$2(fs.parentId)){var ms=os[fs.parentId];if(ms)ms.children?ms.children.push(vs):ms.children=[vs],os[vs.id]=vs;else{var Ss={id:fs.parentId,children:[vs]};os[Ss.id]=Ss,os[vs.id]=vs}}else as.push(vs),os[vs.id]=vs});var us={};(rs||[]).forEach(function(fs){us[fs.id]=fs;var hs=os[fs.comboId];if(hs){var vs={id:fs.id,comboId:fs.comboId};hs.children?hs.children.push(vs):hs.children=[vs],vs.itemType="node",os[fs.id]=vs}});var ls=0;return as.forEach(function(fs){fs.depth=ls+10,traverse(fs,function(hs){var vs,gs=os[hs.id].itemType;gs==="node"?vs=os[hs.comboId]:vs=os[hs.parentId],vs&&gs==="node"?hs.depth=ls+1:hs.depth=ls+10,ls<hs.depth&&(ls=hs.depth);var ys=us[hs.id];return ys&&(ys.depth=hs.depth),!0})}),as},reconstructTree=function ns(ts,rs,as){var os=ts,is,us={root:{children:ts}},ls=!1,fs="root";(ts||[]).forEach(function(xs){if(!ls){if(xs.id===rs){is=xs,xs.itemType==="combo"?is.parentId=as:is.comboId=as,ls=!0;return}traverseTree(xs,function(ms){return us[ms.id]={children:ms.children},os=us[ms.parentId||ms.comboId||"root"].children,ms&&(ms.removed||rs===ms.id)&&os?(fs=ms.parentId||ms.comboId||"root",is=ms,ms.itemType==="combo"?is.parentId=as:is.comboId=as,ls=!0,!1):!0})}}),os=us[fs].children;var hs=os?os.indexOf(is):-1;if(hs>-1&&os.splice(hs,1),ls||(is={id:rs,itemType:"node",comboId:as},us[rs]={children:void 0}),rs){var vs=!1;if(as){var gs=0;(ts||[]).forEach(function(xs){vs||traverseTree(xs,function(ms){return as===ms.id?(vs=!0,ms.children?ms.children.push(is):ms.children=[is],gs=ms.depth,is.itemType==="node"?is.depth=gs+2:is.depth=gs+1,!1):!0})})}else(!as||!vs)&&is.itemType!=="node"&&ts.push(is);var ys=is.depth;traverseTree(is,function(xs){return xs.itemType==="node"?ys+=2:ys+=1,xs.depth=ys,!0})}return ts},getComboBBox=function ns(ts,rs){var as={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return!ts||ts.length===0||(ts.forEach(function(os){var is=rs.findById(os.id);if(!(!is||!is.isVisible())){is.set("bboxCanvasCache",void 0);var us=is.getCanvasBBox();us.x&&as.minX>us.minX&&(as.minX=us.minX),us.y&&as.minY>us.minY&&(as.minY=us.minY),us.x&&as.maxX<us.maxX&&(as.maxX=us.maxX),us.y&&as.maxY<us.maxY&&(as.maxY=us.maxY)}}),as.x=(as.minX+as.maxX)/2,as.y=(as.minY+as.maxY)/2,as.width=as.maxX-as.minX,as.height=as.maxY-as.minY,as.centerX=(as.minX+as.maxX)/2,as.centerY=(as.minY+as.maxY)/2,Object.keys(as).forEach(function(os){(as[os]===1/0||as[os]===-1/0)&&(as[os]=void 0)})),as},shouldRefreshEdge=function ns(ts){var rs=isNumber$3(ts.x)||isNumber$3(ts.y)||ts.type||ts.anchorPoints||ts.size;return ts.style&&(rs=rs||isNumber$3(ts.style.r)||isNumber$3(ts.style.width)||isNumber$3(ts.style.height)||isNumber$3(ts.style.rx)||isNumber$3(ts.style.ry)),rs};const GraphicUtil=Object.freeze(Object.defineProperty({__proto__:null,getBBox:getBBox$1,getComboBBox,getLabelPosition,getLetterWidth,getLoopCfgs,getTextSize:getTextSize$1,plainCombosToTrees,reconstructTree,shouldRefreshEdge,traverseTree,traverseTreeUp},Symbol.toStringTag,{value:"Module"}));function _typeof$2(ns){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(rs){return typeof rs}:_typeof$2=function(rs){return rs&&typeof Symbol=="function"&&rs.constructor===Symbol&&rs!==Symbol.prototype?"symbol":typeof rs},_typeof$2(ns)}function looseJSONParse(ns){if(typeof ns!="string")return ns;var ts=function(Ps){if(typeof Ps!="string")return Ps;try{return JSON.parse(Ps.trim())}catch{return Ps.trim()}},rs=ts(ns);if(typeof rs!="string")return rs;for(var as=function(Ps){return Ps[Ps.length-1]},os=ns.trim(),is=[],us=[],ls=function(){for(var Ps=[],Ds=0;Ds<arguments.length;Ds++)Ps[Ds]=arguments[Ds];return Ps.some(function(Fs){return as(us)===Fs})},fs=function(){return as(is)},hs=null,vs=0,gs="";vs<os.length;){var ys=os[vs],xs=ls('"',"'");if(!xs&&!ys.trim()){vs+=1;continue}var ms=os[vs-1]==="\\",Ss=ls("}"),Ms=ls("]"),$s=ls(","),bs=fs();if(xs)if(as(us)===ys&&!ms){us.pop();var Cs=ts(gs);bs.push(Cs),hs=Cs,gs=""}else gs+=ys;else if(Ms&&ys===",")gs&&(bs.push(ts(gs)),gs="");else if(Ss&&ys===":")us.push(","),gs&&(bs.push(gs),gs="");else if($s&&ys===",")gs&&(bs.push(ts(gs)),gs=""),us.pop();else if(ys==="}"&&(Ss||$s)){gs&&(bs.push(ts(gs)),gs=""),$s&&us.pop();for(var As={},Is=1;Is<bs.length;Is+=2)As[bs[Is-1]]=bs[Is];is.pop(),is.length&&as(is).push(As),us.pop(),hs=As}else ys==="]"&&Ms?(gs&&(bs.push(ts(gs)),gs=""),is.pop(),is.length&&as(is).push(bs),us.pop(),hs=bs):ys==="{"?(is.push([]),us.push("}")):ys==="["?(is.push([]),us.push("]")):ys==='"'?us.push('"'):ys==="'"?us.push("'"):gs+=ys;vs+=1}return hs||gs}var keyConvert=function ns(ts){return ts.split("-").reduce(function(rs,as){return rs+as.charAt(0).toUpperCase()+as.slice(1)})},xmlDataRenderer=function ns(ts){return function(rs){for(var as=ts.length,os=[],is=0,us="";is<as;)if(ts[is]==="{"&&ts[is+1]==="{")os.push(us),us="",is+=2;else if(ts[is]==="}"&&ts[is+1]==="}"){if(os.length){var ls=os.pop();us=get$2(rs,us,ls.endsWith("=")?'"{'+us+'}"':us),os.push(ls+us)}is+=2,us=""}else us+=ts[is],is+=1;return os.push(us),os.map(function(fs,hs){return os[hs-1]&&os[hs-1].endsWith("=")?'"{'+fs+'}"':fs}).join("")}};function parseXML(ns,ts){var rs={},as=ns.getAttributeNames&&ns.getAttributeNames()||[],os=ns.children&&Array.from(ns.children).map(function(ls){return parseXML(ls,ts)}),is={},us=ns.tagName?ns.tagName.toLowerCase():"group";return us==="text"&&(rs.text=ns.innerText),is.type=us,us==="img"&&(is.type="image"),Array.from(as).forEach(function(ls){var fs=keyConvert(ls),hs=ns.getAttribute(ls);try{if(fs==="style"||fs==="attrs"){var vs=looseJSONParse(hs);rs=__assign$h(__assign$h({},rs),vs)}else is[fs]=looseJSONParse(hs)}catch(gs){if(fs==="style")throw gs;is[fs]=hs}}),is.attrs=rs,ts&&ts.style&&is.name&&_typeof$2(ts.style[is.name])==="object"&&(is.attrs=__assign$h(__assign$h({},is.attrs),ts.style[is.name])),ts&&ts.style&&is.keyshape&&(is.attrs=__assign$h(__assign$h({},is.attrs),ts.style)),os.length&&(is.children=os),is}function getBBox(ns,ts,rs){var as=ns.attrs,os=as===void 0?{}:as,is={x:ts.x||0,y:ts.y||0,width:rs.width||0,height:rs.height||0},us,ls;switch(ns.type){case"maker":case"circle":os.r&&(ls=2*os.r,us=2*os.r);break;case"text":os.text&&(ls=getTextSize$1(os.text,os.fontSize||12)[0],us=16,is.y+=us,is.height=us,is.width=ls,ns.attrs=__assign$h({fontSize:12,fill:"#000"},os));break;default:os.width&&(ls=os.width),os.height&&(us=os.height)}return us>=0&&(is.height=us),ls>=0&&(is.width=ls),os.marginTop&&(is.y+=os.marginTop),os.marginLeft&&(is.x+=os.marginLeft),is}function generateTarget(ns,ts){var rs;ts===void 0&&(ts={x:0,y:0});var as=__assign$h({x:0,y:0,width:0,height:0},ts);if(!((rs=ns.children)===null||rs===void 0)&&rs.length){var os=ns.attrs,is=os===void 0?{}:os,us=is.marginTop,ls=__assign$h({},ts);us&&(ls.y+=us);for(var fs=0;fs<ns.children.length;fs++){ns.children[fs].attrs.key=(is.key||"root")+" -"+fs+" ";var hs=generateTarget(ns.children[fs],ls);if(hs.bbox){var vs=hs.bbox;hs.attrs.next==="inline"?ls.x+=hs.bbox.width:ls.y+=hs.bbox.height,vs.width+vs.x>as.width&&(as.width=vs.width+vs.x),vs.height+vs.y>as.height&&(as.height=vs.height+vs.y)}}}return ns.bbox=getBBox(ns,ts,as),ns.attrs=__assign$h(__assign$h({},ns.attrs),ns.bbox),ns}function compareTwoTarget(ns,ts){var rs,as,os,is,us=(ns||{}).type,ls=((ts==null?void 0:ts.attrs)||{}).key;if(ls&&ns&&(ns.attrs.key=ls),!ns&&ts)return{action:"delete",val:ts,type:us,key:ls};if(ns&&!ts)return{action:"add",val:ns,type:us};if(!ns&&!ts)return{action:"same",type:us};var fs=[];if(((rs=ns.children)===null||rs===void 0?void 0:rs.length)>0||((as=ts.children)===null||as===void 0?void 0:as.length)>0)for(var hs=Math.max((os=ns.children)===null||os===void 0?void 0:os.length,(is=ts.children)===null||is===void 0?void 0:is.length),vs=ts.children||[],gs=ns.children||[],ys=0;ys<hs;ys+=1)fs.push(compareTwoTarget(gs[ys],vs[ys]));var xs=Object.keys(ts.attrs),ms=Object.keys(ns.attrs);return ts.type!==ns.type?{action:"restructure",nowTarget:ns,formerTarget:ts,key:ls,children:fs}:xs.filter(function(Ss){return Ss!=="children"}).some(function(Ss){return ns.attrs[Ss]!==ts.attrs[Ss]||!ms.includes(Ss)})?{action:"change",val:ns,children:fs,type:us,key:ls}:{action:"same",children:fs,type:us,key:ls}}function createNodeFromXML(ns){var ts={},rs=function(os){var is=typeof ns=="function"?ns(os):ns,us=xmlDataRenderer(is)(os),ls=document.createElement("div");ls.innerHTML=us;var fs=ls.children[0],hs=generateTarget(parseXML(fs,os));return ls.remove(),hs};return{draw:function(os,is){var us=rs(os),ls=is,fs=function hs(vs){var gs=vs.attrs,ys=gs===void 0?{}:gs,xs=vs.bbox,ms=vs.type,Ss=vs.children,Ms=__rest$2(vs,["attrs","bbox","type","children"]);if(vs.type!=="group"){var $s=is.addShape(vs.type,__assign$h({attrs:ys,origin:{bbox:xs,type:ms,children:Ss}},Ms));vs.keyshape&&(ls=$s)}vs.children&&vs.children.forEach(function(bs){return hs(bs)})};return fs(us),ts[os.id]=[us],ls},update:function(os,is){ts[os.id]||(ts[os.id]=[]);var us=is.getContainer(),ls=us.get("children"),fs=rs(os),hs=ts[os.id].pop(),vs=compareTwoTarget(fs,hs),gs=function ms(Ss){var Ms;Ss.type!=="group"&&us.addShape(Ss.type,{attrs:Ss.attrs}),!((Ms=Ss.children)===null||Ms===void 0)&&Ms.length&&Ss.children.map(function($s){return ms($s)})},ys=function ms(Ss){var Ms,$s=ls.find(function(bs){return bs.attrs.key===Ss.attrs.key});$s&&us.removeChild($s),!((Ms=Ss.children)===null||Ms===void 0)&&Ms.length&&Ss.children.map(function(bs){return ms(bs)})},xs=function ms(Ss){var Ms=Ss.key;if(Ss.type!=="group"){var $s=ls.find(function(Cs){return Cs.attrs.key===Ms});switch(Ss.action){case"change":if($s){var bs=Ss.val.keyshape?is.getOriginStyle():{};$s.attr(__assign$h(__assign$h({},bs),Ss.val.attrs))}break;case"add":gs(Ss.val);break;case"delete":ys(Ss.val);break;case"restructure":ys(Ss.formerTarget),gs(Ss.nowTarget);break}}Ss.children&&Ss.children.forEach(function(Cs){return ms(Cs)})};xs(vs),ts[os.id].push(fs)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var cache={};function ucfirst(ns){return cache[ns]||(cache[ns]=upperFirst$2(ns)),cache[ns]}var ShapeFactoryBase={defaultShapeType:"defaultType",className:null,getShape:function ns(ts){var rs=this,as=rs[ts]||rs[rs.defaultShapeType]||rs["simple-circle"];return as},draw:function ns(ts,rs,as){var os=this.getShape(ts),is=os.draw(rs,as);return os.afterDraw&&os.afterDraw(rs,as,is),is},baseUpdate:function ns(ts,rs,as){var os=this.getShape(ts);os.update&&os.update(rs,as),os.afterUpdate&&os.afterUpdate(rs,as)},setState:function ns(ts,rs,as,os){var is=this.getShape(ts);is.setState(rs,as,os)},shouldUpdate:function ns(ts){var rs=this.getShape(ts);return!!rs.update},getControlPoints:function ns(ts,rs){var as=this.getShape(ts);return as.getControlPoints(rs)},getAnchorPoints:function ns(ts,rs){var as=this.getShape(ts);return as.getAnchorPoints(rs)}},ShapeFramework={options:{},draw:function ns(ts,rs){return this.drawShape(ts,rs)},drawShape:function ns(){},afterDraw:function ns(){},afterUpdate:function ns(){},setState:function ns(){},getControlPoints:function ns(ts){return ts.controlPoints},getAnchorPoints:function ns(ts){var rs=this.options.anchorPoints,as=ts.anchorPoints||rs;return as}},Shape=function(){function ns(){}return ns.registerFactory=function(ts,rs){var as=ucfirst(ts),os=ShapeFactoryBase,is=__assign$h(__assign$h({},os),rs);return ns[as]=is,is.className=as,is},ns.getFactory=function(ts){var rs=ucfirst(ts);return ns[rs]},ns.registerNode=function(ts,rs,as){var os=ns.Node,is;if(typeof rs=="string"||typeof rs=="function"){var us=createNodeFromXML(rs);is=__assign$h(__assign$h({},os.getShape("single-node")),us)}else if(rs.jsx){var ls=rs.jsx,us=createNodeFromXML(ls);is=__assign$h(__assign$h(__assign$h({},os.getShape("single-node")),us),rs)}else{os.getShape(as);var fs=as?os.getShape(as):ShapeFramework;is=__assign$h(__assign$h({},fs),rs)}return is.type=ts,is.itemType="node",os[ts]=is,is},ns.registerEdge=function(ts,rs,as){var os=ns.Edge,is=as?os.getShape(as):ShapeFramework,us=__assign$h(__assign$h({},is),rs);return us.type=ts,us.itemType="edge",os[ts]=us,us},ns.registerCombo=function(ts,rs,as){var os=ns.Combo,is=as?os.getShape(as):ShapeFramework,us=__assign$h(__assign$h({},is),rs);return us.type=ts,us.itemType="combo",os[ts]=us,us},ns}();Shape.registerFactory("node",{defaultShapeType:"circle"});Shape.registerFactory("edge",{defaultShapeType:"line"});Shape.registerFactory("combo",{defaultShapeType:"circle"});var CACHE_BBOX$2="bboxCache",CACHE_CANVAS_BBOX$1="bboxCanvasCache",ARROWS$1=["startArrow","endArrow"],ItemBase=function(){function ns(ts){this._cfg={},this.destroyed=!1;var rs={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(rs,this.getDefaultCfg(),ts);var as=this.get("model"),os=as.id,is=this.get("type");os||(os=uniqueId(is),this.get("model").id=os),this.set("id",os);var us=ts.group;us&&(us.set("item",this),us.set("id",os)),this.init(),this.draw();var ls=as.shape||as.type||(is==="edge"?"line":"circle"),fs=this.get("shapeFactory");if(fs&&fs[ls]){var hs=fs[ls].options;if(hs&&hs.stateStyles){var vs=this.get("styles")||as.stateStyles;vs=deepMix$2({},hs.stateStyles,vs),this.set("styles",vs)}}}return ns.prototype.calculateBBox=function(){var ts=this.get("keyShape"),rs=this.get("group"),as=getBBox$1(ts,rs);return as.x=as.minX,as.y=as.minY,as.width=as.maxX-as.minX,as.height=as.maxY-as.minY,as.centerX=(as.minX+as.maxX)/2,as.centerY=(as.minY+as.maxY)/2,as},ns.prototype.calculateCanvasBBox=function(){var ts=this.get("keyShape"),rs=this.get("group"),as=getBBox$1(ts,rs);return as.x=as.minX,as.y=as.minY,as.width=as.maxX-as.minX,as.height=as.maxY-as.minY,as.centerX=(as.minX+as.maxX)/2,as.centerY=(as.minY+as.maxY)/2,as},ns.prototype.drawInner=function(){var ts=this,rs=ts.get("shapeFactory"),as=ts.get("group"),os=ts.get("model");as.clear();var is=os.visible;if(is!==void 0&&!is&&ts.changeVisibility(is),!!rs){ts.updatePosition(os);var us=ts.getShapeCfg(os),ls=us.type,fs=rs.draw(ls,us,as);fs&&(ts.set("keyShape",fs),fs.set("isKeyShape",!0),fs.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",ls),this.restoreStates(rs,ls)}},ns.prototype.setOriginStyle=function(ts){var rs=this.get("group"),as=rs.get("children"),os=this.getKeyShape(),is=this,us=os.get("name");if(this.get("originStyle")){var fs=this.getOriginStyle();us&&!fs[us]&&(fs[us]={});var hs=this.getCurrentStatesStyle();each$1(as,function(vs){var gs=vs.get("name"),ys=vs.attr();if(gs&&gs!==us){var xs=hs[gs];fs[gs]||(fs[gs]={}),xs?Object.keys(ys).forEach(function(Ms){var $s=ys[Ms];$s!==xs[Ms]&&(fs[gs][Ms]=$s)}):fs[gs]=clone$b(ys)}else{var ms=vs.attr(),Ss=__assign$h(__assign$h({},hs),hs[us]);Object.keys(ms).forEach(function(Ms){var $s=ms[Ms];isPlainObject$3($s)&&ARROWS$1.indexOf(gs)===-1||Ss[Ms]!==$s&&(us?fs[us][Ms]=$s:fs[Ms]=$s)})}}),fs.path&&delete fs.path,fs.matrix&&delete fs.matrix,is.set("originStyle",fs)}else{var ls={};each$1(as,function(vs){var gs=vs.get("type"),ys=vs.get("name");if(ys&&ys!==us)ls[ys]=gs!=="image"?clone$b(vs.attr()):is.getShapeStyleByName(ys);else{var xs=is.getShapeStyleByName();xs.path&&delete xs.path,xs.matrix&&delete xs.matrix,us?ls[us]=xs:Object.assign(ls,xs)}}),is.set("originStyle",ls)}},ns.prototype.restoreStates=function(ts,rs){var as=this,os=as.get("states");each$1(os,function(is){ts.setState(rs,is,!0,as)})},ns.prototype.init=function(){var ts=Shape.getFactory(this.get("type"));this.set("shapeFactory",ts)},ns.prototype.get=function(ts){return this._cfg[ts]},ns.prototype.set=function(ts,rs){isPlainObject$3(ts)?this._cfg=__assign$h(__assign$h({},this._cfg),ts):this._cfg[ts]=rs},ns.prototype.getDefaultCfg=function(){return{}},ns.prototype.clearCache=function(){this.set(CACHE_BBOX$2,null),this.set(CACHE_CANVAS_BBOX$1,null)},ns.prototype.beforeDraw=function(){},ns.prototype.afterDraw=function(){},ns.prototype.afterUpdate=function(){},ns.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},ns.prototype.getShapeStyleByName=function(ts){var rs=this.get("group"),as;if(ts?as=rs.find(function(is){return is.get("name")===ts}):as=this.getKeyShape(),as){var os={};return each$1(as.attr(),function(is,us){us!=="img"&&(os[us]=is)}),os}return{}},ns.prototype.getShapeCfg=function(ts){var rs=this.get("styles");if(rs){var as=ts;return as.style=__assign$h(__assign$h({},rs),ts.style),as}return ts},ns.prototype.getStateStyle=function(ts){var rs=this.get("styles"),as=rs&&rs[ts];return as},ns.prototype.getOriginStyle=function(){return this.get("originStyle")},ns.prototype.getCurrentStatesStyle=function(){var ts=this,rs={},as=ts.getStates();return!as||!as.length?this.getOriginStyle():(each$1(ts.getStates(),function(os){rs=Object.assign(rs,ts.getStateStyle(os))}),rs)},ns.prototype.setState=function(ts,rs){var as=this.get("states"),os=this.get("shapeFactory"),is=ts,us=ts;isString$2(rs)&&(is=ts+":"+rs,us=ts+":");var ls=as;if(isBoolean$2(rs)){var fs=as.indexOf(us);if(rs){if(fs>-1)return;as.push(is)}else fs>-1&&as.splice(fs,1)}else if(isString$2(rs)){var hs=as.filter(function(ys){return ys.includes(us)});hs.length>0&&this.clearStates(hs),ls=ls.filter(function(ys){return!ys.includes(us)}),ls.push(is),this.set("states",ls)}if(os){var vs=this.get("model"),gs=vs.type;os.setState(gs,ts,rs,this)}},ns.prototype.clearStates=function(ts){var rs=this,as=rs.getStates(),os=rs.get("shapeFactory"),is=rs.get("model"),us=is.type;ts||(ts=as),isString$2(ts)&&(ts=[ts]);var ls=as.filter(function(fs){return ts.indexOf(fs)===-1});rs.set("states",ls),ts.forEach(function(fs){os.setState(us,fs,!1,rs)})},ns.prototype.getContainer=function(){return this.get("group")},ns.prototype.getKeyShape=function(){return this.get("keyShape")},ns.prototype.getModel=function(){return this.get("model")},ns.prototype.getType=function(){return this.get("type")},ns.prototype.getID=function(){return this.get("id")},ns.prototype.isItem=function(){return!0},ns.prototype.getStates=function(){return this.get("states")},ns.prototype.hasState=function(ts){var rs=this.getStates();return rs.indexOf(ts)>=0},ns.prototype.refresh=function(){var ts=this.get("model");this.updatePosition(ts),this.updateShape(),this.afterUpdate(),this.clearCache()},ns.prototype.isOnlyMove=function(ts){return!1},ns.prototype.update=function(ts,rs){rs===void 0&&(rs=!1);var as=this.get("model"),os=as.visible,is=ts.visible;os!==is&&is!==void 0&&this.changeVisibility(is);var us={x:as.x,y:as.y};ts.x=isNaN(ts.x)?as.x:ts.x,ts.y=isNaN(ts.y)?as.y:ts.y;var ls=this.get("styles");if(ts.stateStyles){var fs=ts.stateStyles;mix$1(ls,fs),delete ts.stateStyles}Object.assign(as,ts),rs?this.updatePosition(ts):((us.x!==ts.x||us.y!==ts.y)&&this.updatePosition(ts),this.updateShape()),this.afterUpdate(),this.clearCache()},ns.prototype.updateShape=function(){var ts=this.get("shapeFactory"),rs=this.get("model"),as=rs.type;if(ts.shouldUpdate(as)&&as===this.get("currentShape")){var os=this.getShapeCfg(rs);ts.baseUpdate(as,os,this)}else this.draw();this.setOriginStyle(rs),this.restoreStates(ts,as)},ns.prototype.updatePosition=function(ts){var rs=this.get("model"),as=isNil$2(ts.x)?rs.x:ts.x,os=isNil$2(ts.y)?rs.y:ts.y,is=this.get("group");isNil$2(as)||isNil$2(os)||(is.resetMatrix(),translate(is,{x:as,y:os}),rs.x=as,rs.y=os,this.clearCache())},ns.prototype.getBBox=function(){var ts=this.get(CACHE_BBOX$2);return ts||(ts=this.calculateBBox(),this.set(CACHE_BBOX$2,ts)),ts},ns.prototype.getCanvasBBox=function(){var ts=this.get(CACHE_CANVAS_BBOX$1);return ts||(ts=this.calculateCanvasBBox(),this.set(CACHE_CANVAS_BBOX$1,ts)),ts},ns.prototype.toFront=function(){var ts=this.get("group");ts.toFront()},ns.prototype.toBack=function(){var ts=this.get("group");ts.toBack()},ns.prototype.show=function(){this.changeVisibility(!0)},ns.prototype.hide=function(){this.changeVisibility(!1)},ns.prototype.changeVisibility=function(ts){var rs=this.get("group");ts?rs.show():rs.hide(),this.set("visible",ts)},ns.prototype.isVisible=function(){return this.get("visible")},ns.prototype.enableCapture=function(ts){var rs=this.get("group");rs&&rs.set("capture",ts)},ns.prototype.destroy=function(){if(!this.destroyed){var ts=this.get("animate"),rs=this.get("group");ts&&rs.stopAnimate(),this.clearCache(),rs.remove(),this._cfg=null,this.destroyed=!0}},ns}(),END_MAP={source:"start",target:"end"},ITEM_NAME_SUFFIX="Node",POINT_NAME_SUFFIX="Point",ANCHOR_NAME_SUFFIX="Anchor",Edge=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},ts.prototype.setEnd=function(rs,as){var os=END_MAP[rs]+POINT_NAME_SUFFIX,is=rs+ITEM_NAME_SUFFIX,us=this.get(is);us&&!us.destroyed&&us.removeEdge(this),isPlainObject$3(as)?(this.set(os,as),this.set(is,null)):(as.addEdge(this),this.set(is,as),this.set(os,null))},ts.prototype.getLinkPoint=function(rs,as,os){var is=END_MAP[rs]+POINT_NAME_SUFFIX,us=rs+ITEM_NAME_SUFFIX,ls=this.get(is);if(!ls){var fs=this.get(us),hs=rs+ANCHOR_NAME_SUFFIX,vs=this.getPrePoint(rs,os),gs=as[hs];isNil$2(gs)||(ls=fs.getLinkPointByAnchor(gs)),ls=ls||fs.getLinkPoint(vs),isNil$2(ls.index)||this.set(rs+"AnchorIndex",ls.index)}return ls},ts.prototype.getPrePoint=function(rs,as){if(as&&as.length){var os=rs==="source"?0:as.length-1;return as[os]}var is=rs==="source"?"target":"source";return this.getEndPoint(is)},ts.prototype.getEndPoint=function(rs){var as=rs+ITEM_NAME_SUFFIX,os=END_MAP[rs]+POINT_NAME_SUFFIX,is=this.get(as);return is?is.get("model"):this.get(os)},ts.prototype.getControlPointsByCenter=function(rs){var as=this.getEndPoint("source"),os=this.getEndPoint("target"),is=this.get("shapeFactory"),us=rs.type;return is.getControlPoints(us,{startPoint:as,endPoint:os})},ts.prototype.getEndCenter=function(rs){var as=rs+ITEM_NAME_SUFFIX,os=END_MAP[rs]+POINT_NAME_SUFFIX,is=this.get(as);if(is){var us=is.getBBox();return{x:us.centerX,y:us.centerY}}return this.get(os)},ts.prototype.init=function(){ns.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},ts.prototype.getShapeCfg=function(rs){var as=this,os=as.get("linkCenter"),is=ns.prototype.getShapeCfg.call(this,rs);if(os)is.startPoint=as.getEndCenter("source"),is.endPoint=as.getEndCenter("target");else{var us=is.controlPoints||as.getControlPointsByCenter(is);is.startPoint=as.getLinkPoint("source",rs,us),is.endPoint=as.getLinkPoint("target",rs,us)}return is.sourceNode=as.get("sourceNode"),is.targetNode=as.get("targetNode"),is},ts.prototype.getModel=function(){var rs=this.get("model"),as=this.get("source"+ITEM_NAME_SUFFIX),os=this.get("target"+ITEM_NAME_SUFFIX);return as?delete rs["source"+ITEM_NAME_SUFFIX]:rs.source=this.get("start"+POINT_NAME_SUFFIX),os?delete rs["target"+ITEM_NAME_SUFFIX]:rs.target=this.get("end"+POINT_NAME_SUFFIX),!isString$2(rs.source)&&!isPlainObject$3(rs.source)&&(rs.source=rs.source.getID()),!isString$2(rs.target)&&!isPlainObject$3(rs.target)&&(rs.target=rs.target.getID()),rs},ts.prototype.setSource=function(rs){this.setEnd("source",rs),this.set("source",rs)},ts.prototype.setTarget=function(rs){this.setEnd("target",rs),this.set("target",rs)},ts.prototype.getSource=function(){return this.get("source")},ts.prototype.getTarget=function(){return this.get("target")},ts.prototype.updatePosition=function(){},ts.prototype.update=function(rs,as){var os=this.get("model"),is=os.visible,us=rs.visible;is!==us&&us!==void 0&&this.changeVisibility(us);var ls=this.get("styles");if(rs.stateStyles){var fs=rs.stateStyles;mix$1(ls,fs),delete rs.stateStyles}Object.assign(os,rs),this.updateShape(),this.afterUpdate(),this.clearCache()},ts.prototype.destroy=function(){var rs=this.get("source"+ITEM_NAME_SUFFIX),as=this.get("target"+ITEM_NAME_SUFFIX);rs&&!rs.destroyed&&rs.removeEdge(this),as&&!as.destroyed&&as.removeEdge(this),ns.prototype.destroy.call(this)},ts}(ItemBase),CACHE_ANCHOR_POINTS$1="anchorPointsCache",CACHE_BBOX$1="bboxCache",Node=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getNearestPoint=function(rs,as){for(var os=0,is=rs[0],us=distance(rs[0],as),ls=0;ls<rs.length;ls++){var fs=rs[ls],hs=distance(fs,as);hs<us&&(is=fs,us=hs,os=ls)}return is.anchorIndex=os,is},ts.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},ts.prototype.getEdges=function(){return this.get("edges")},ts.prototype.getInEdges=function(){var rs=this;return this.get("edges").filter(function(as){return as.get("target")===rs})},ts.prototype.getOutEdges=function(){var rs=this;return this.get("edges").filter(function(as){return as.get("source")===rs})},ts.prototype.getNeighbors=function(rs){var as=this,os=this.get("edges");if(rs==="target"){var is=function(hs){return hs.getSource()===as};return os.filter(is).map(function(fs){return fs.getTarget()})}if(rs==="source"){var us=function(hs){return hs.getTarget()===as};return os.filter(us).map(function(fs){return fs.getSource()})}var ls=function(hs){return hs.getSource()===as?hs.getTarget():hs.getSource()};return os.map(ls)},ts.prototype.getLinkPointByAnchor=function(rs){var as=this.getAnchorPoints();return as[rs]},ts.prototype.getLinkPoint=function(rs){var as=this.get("keyShape"),os=as.get("type"),is=this.get("type"),us,ls,fs=this.getBBox();is==="combo"?(us=fs.centerX||(fs.maxX+fs.minX)/2,ls=fs.centerY||(fs.maxY+fs.minY)/2):(us=fs.centerX,ls=fs.centerY);var hs=this.getAnchorPoints(),vs;switch(os){case"circle":vs=getCircleIntersectByPoint({x:us,y:ls,r:fs.width/2},rs);break;case"ellipse":vs=getEllipseIntersectByPoint({x:us,y:ls,rx:fs.width/2,ry:fs.height/2},rs);break;default:vs=getRectIntersectByPoint(fs,rs)}var gs=vs;return hs.length&&(gs||(gs=rs),gs=this.getNearestPoint(hs,gs)),gs||(gs={x:us,y:ls}),gs},ts.prototype.getAnchorPoints=function(){var rs=this.get(CACHE_ANCHOR_POINTS$1);if(!rs){rs=[];var as=this.get("shapeFactory"),os=this.getBBox(),is=this.get("model"),us=this.getShapeCfg(is),ls=is.type,fs=as.getAnchorPoints(ls,us)||[];each$1(fs,function(hs,vs){var gs={x:os.minX+hs[0]*os.width,y:os.minY+hs[1]*os.height,anchorIndex:vs};rs.push(gs)}),this.set(CACHE_ANCHOR_POINTS$1,rs)}return rs},ts.prototype.addEdge=function(rs){this.get("edges").push(rs)},ts.prototype.lock=function(){this.set("locked",!0)},ts.prototype.unlock=function(){this.set("locked",!1)},ts.prototype.hasLocked=function(){return this.get("locked")},ts.prototype.removeEdge=function(rs){var as=this.getEdges(),os=as.indexOf(rs);os>-1&&as.splice(os,1)},ts.prototype.clearCache=function(){this.set(CACHE_BBOX$1,null),this.set(CACHE_ANCHOR_POINTS$1,null)},ts.prototype.isOnlyMove=function(rs){if(!rs)return!1;var as=!isNil$2(rs.x),os=!isNil$2(rs.y),is=Object.keys(rs);return is.length===1&&(as||os)||is.length===2&&as&&os},ts}(ItemBase),CACHE_BBOX="bboxCache",CACHE_CANVAS_BBOX="bboxCanvasCache",CACHE_SIZE="sizeCache",CACHE_ANCHOR_POINTS="anchorPointsCache",Combo=function(ns){__extends$x(ts,ns);function ts(){return ns!==null&&ns.apply(this,arguments)||this}return ts.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},ts.prototype.getShapeCfg=function(rs){var as=this.get("styles"),os=this.get("bbox");if(as&&os){var is=rs,us={r:Math.hypot(os.height,os.width)/2||Global.defaultCombo.size[0]/2,width:os.width||Global.defaultCombo.size[0],height:os.height||Global.defaultCombo.size[1]};is.style=__assign$h(__assign$h(__assign$h({},as),rs.style),us);var ls=rs.padding||Global.defaultCombo.padding;return isNumber$3(ls)?(us.r+=ls,us.width+=ls*2,us.height+=ls*2):(us.r+=ls[0],us.width+=ls[1]+ls[3]||ls[1]*2,us.height+=ls[0]+ls[2]||ls[0]*2),this.set(CACHE_SIZE,us),is}return rs},ts.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var rs=this.get("keyShape"),as=this.get("group"),os=getBBox$1(rs,as);os.centerX=(os.minX+os.maxX)/2,os.centerY=(os.minY+os.maxY)/2;var is=this.get(CACHE_SIZE),us=this.get(CACHE_BBOX)||{},ls=us.x,fs=us.x;if(is){var hs=rs.get("type");hs==="circle"?(os.width=is.r*2,os.height=is.r*2):(os.width=is.width,os.height=is.height),os.minX=os.centerX-os.width/2,os.minY=os.centerY-os.height/2,os.maxX=os.centerX+os.width/2,os.maxY=os.centerY+os.height/2}else os.width=os.maxX-os.minX,os.height=os.maxY-os.minY,os.centerX=(os.minX+os.maxX)/2,os.centerY=(os.minY+os.maxY)/2;return os.x=os.minX,os.y=os.minY,(os.x!==ls||os.y!==fs)&&this.set(CACHE_ANCHOR_POINTS,null),os}},ts.prototype.getChildren=function(){var rs=this;return{nodes:rs.getNodes(),combos:rs.getCombos()}},ts.prototype.getNodes=function(){var rs=this;return rs.get("nodes")},ts.prototype.getCombos=function(){var rs=this;return rs.get("combos")},ts.prototype.addChild=function(rs){var as=this,os=rs.getType();switch(os){case"node":as.addNode(rs);break;case"combo":as.addCombo(rs);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},ts.prototype.addCombo=function(rs){var as=this;return as.get("combos").push(rs),!0},ts.prototype.addNode=function(rs){var as=this;return as.get("nodes").push(rs),!0},ts.prototype.removeChild=function(rs){var as=this,os=rs.getType();switch(os){case"node":as.removeNode(rs);break;case"combo":as.removeCombo(rs);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},ts.prototype.removeCombo=function(rs){if(rs){var as=this.getCombos(),os=as.indexOf(rs);return os>-1?(as.splice(os,1),!0):!1}},ts.prototype.removeNode=function(rs){if(rs){var as=this.getNodes(),os=as.indexOf(rs);return os>-1?(as.splice(os,1),!0):!1}},ts.prototype.isOnlyMove=function(rs){return!1},ts.prototype.getBBox=function(){this.set(CACHE_CANVAS_BBOX,null);var rs=this.calculateCanvasBBox();return rs},ts.prototype.clearCache=function(){this.set(CACHE_BBOX,null),this.set(CACHE_CANVAS_BBOX,null),this.set(CACHE_ANCHOR_POINTS,null)},ts.prototype.destroy=function(){if(!this.destroyed){var rs=this.get("animate"),as=this.get("group");rs&&as.stopAnimate(),this.clearCache(),this.set(CACHE_SIZE,null),this.set("bbox",null),as.remove(),this._cfg=null,this.destroyed=!0}},ts}(Node),NODE$1="node",EDGE="edge",VEDGE="vedge",COMBO="combo",CFG_PREFIX="default",MAPPER_SUFFIX="Mapper",STATE_SUFFIX="stateStyles",ItemController=function(){function ns(ts){this.graph=ts,this.destroyed=!1}return ns.prototype.addItem=function(ts,rs){var as=this,os=this.graph,is=ts===VEDGE?EDGE:ts,us=os.get(is+"Group")||os.get("group"),ls=upperFirst$2(is),fs=null,hs=os.get(is+upperFirst$2(STATE_SUFFIX))||{},vs=os.get(CFG_PREFIX+ls);rs[STATE_SUFFIX]&&(hs=rs[STATE_SUFFIX]),vs&&each$1(vs,function(Cs,As){isObject$1(Cs)&&!isArray$2(Cs)?rs[As]=deepMix$2({},Cs,rs[As]):isArray$2(Cs)?rs[As]=rs[As]||clone$b(vs[As]):rs[As]=rs[As]||vs[As]});var gs=os.get(is+MAPPER_SUFFIX);if(gs){var ys=gs(rs);ys[STATE_SUFFIX]&&(hs=ys[STATE_SUFFIX],delete ys[STATE_SUFFIX]),each$1(ys,function(Cs,As){isObject$1(Cs)&&!isArray$2(Cs)?rs[As]=deepMix$2({},rs[As],Cs):rs[As]=ys[As]||rs[As]})}if(os.emit("beforeadditem",{type:ts,model:rs}),ts===EDGE||ts===VEDGE){var xs=void 0,ms=void 0;if(xs=rs.source,ms=rs.target,xs&&isString$2(xs)&&(xs=os.findById(xs)),ms&&isString$2(ms)&&(ms=os.findById(ms)),!xs||!ms){console.warn("The source or target node of edge "+rs.id+" does not exist!");return}xs.getType&&xs.getType()==="combo"&&(rs.isComboEdge=!0),ms.getType&&ms.getType()==="combo"&&(rs.isComboEdge=!0),fs=new Edge({model:rs,source:xs,target:ms,styles:hs,linkCenter:os.get("linkCenter"),group:us.addGroup()})}else if(ts===NODE$1)fs=new Node({model:rs,styles:hs,group:us.addGroup()});else if(ts===COMBO){var Ss=rs.children,Ms=getComboBBox(Ss,os);rs.x=Ms.x||rs.x||Math.random()*100,rs.y=Ms.y||rs.y||Math.random()*100;var $s=us.addGroup();$s.setZIndex(rs.depth),fs=new Combo({model:rs,styles:hs,bbox:Ms,group:$s});var bs=fs.getModel();(Ss||[]).forEach(function(Cs){var As=os.findById(Cs.id);fs.addChild(As),Cs.depth=bs.depth+2}),rs.collapsed&&setTimeout(function(){os.collapseCombo(fs),as.updateCombo(fs,[])},250)}if(fs)return os.get(ts+"s").push(fs),os.get("itemMap")[fs.get("id")]=fs,os.emit("afteradditem",{item:fs,model:rs}),fs},ns.prototype.updateItem=function(ts,rs){var as,os,is=this.graph;if(isString$2(ts)&&(ts=is.findById(ts)),!(!ts||ts.destroyed)){var us="";ts.getType&&(us=ts.getType());var ls=is.get(us+MAPPER_SUFFIX),fs=ts.getModel(),hs=ts.isOnlyMove(rs);if(ls){var vs=deepMix$2({},fs,rs),gs=ls(vs),ys=deepMix$2({},fs,gs,rs);gs[STATE_SUFFIX]&&(ts.set("styles",ys[STATE_SUFFIX]),delete ys[STATE_SUFFIX]),each$1(ys,function(As,Is){rs[Is]=As})}else each$1(rs,function(As,Is){fs[Is]&&isObject$1(As)&&!isArray$2(As)&&(rs[Is]=__assign$h(__assign$h({},fs[Is]),rs[Is]))});if(is.emit("beforeupdateitem",{item:ts,cfg:rs}),us===EDGE){if(rs.source){var xs=rs.source;isString$2(xs)&&(xs=is.findById(xs)),ts.setSource(xs)}if(rs.target){var ms=rs.target;isString$2(ms)&&(ms=is.findById(ms)),ts.setTarget(ms)}ts.update(rs)}if(us===NODE$1||us===COMBO){ts.update(rs,hs);var Ss=ts.getEdges(),Ms=shouldRefreshEdge(rs);if(Ms&&us===NODE$1)each$1(Ss,function(As){As.refresh()});else if(Ms&&us===COMBO){var $s=ts.get("shapeFactory"),bs=fs.type||"circle",Cs=fs.animate===void 0||rs.animate===void 0?(os=(as=$s[bs])===null||as===void 0?void 0:as.options)===null||os===void 0?void 0:os.animate:fs.animate||rs.animate;Cs?setTimeout(function(){if(!(!ts||ts.destroyed)){var As=ts.getKeyShape();!As||As.destroyed||each$1(Ss,function(Is){Is&&!Is.destroyed&&Is.refresh()})}},201):each$1(Ss,function(As){As.refresh()})}}is.emit("afterupdateitem",{item:ts,cfg:rs})}},ns.prototype.updateCombo=function(ts,rs){var as,os,is=this.graph;if(isString$2(ts)&&(ts=is.findById(ts)),!(!ts||ts.destroyed)){var us=getComboBBox(rs,is);ts.set("bbox",us),ts.update({x:us.x,y:us.y});var ls=ts.getEdges()||[],fs=ls.length,hs=ts.getModel(),vs=ts.get("shapeFactory"),gs=hs.type||"circle",ys=hs.animate===void 0?(os=(as=vs[gs])===null||as===void 0?void 0:as.options)===null||os===void 0?void 0:os.animate:hs.animate;if(ys)setTimeout(function(){if(!(!ts||ts.destroyed)){var Ss=ts.getKeyShape();if(!(!Ss||Ss.destroyed))for(var Ms=0;Ms<fs;Ms++){var $s=ls[Ms];$s&&!$s.destroyed&&$s.refresh()}}},201);else for(var xs=0;xs<fs;xs++){var ms=ls[xs];ms&&!ms.destroyed&&ms.refresh()}}},ns.prototype.collapseCombo=function(ts){var rs=this.graph;isString$2(ts)&&(ts=rs.findById(ts));var as=ts.getChildren();as.nodes.forEach(function(os){rs.hideItem(os)}),as.combos.forEach(function(os){rs.hideItem(os)})},ns.prototype.expandCombo=function(ts){var rs=this.graph;isString$2(ts)&&(ts=rs.findById(ts));var as=ts.getChildren();as.nodes.forEach(function(os){rs.showItem(os)}),as.combos.forEach(function(os){os.getModel().collapsed?os.show():rs.showItem(os)})},ns.prototype.removeItem=function(ts){var rs=this,as=this.graph;if(isString$2(ts)&&(ts=as.findById(ts)),!(!ts||ts.destroyed)){var os=clone$b(ts.getModel());as.emit("beforeremoveitem",{item:os});var is="";ts.getType&&(is=ts.getType());var us=as.get(is+"s"),ls=us.indexOf(ts);if(ls>-1&&us.splice(ls,1),is===EDGE){var fs=as.get("v"+is+"s"),hs=fs.indexOf(ts);hs>-1&&fs.splice(hs,1)}var vs=ts.get("id"),gs=as.get("itemMap");delete gs[vs];var ys=as.get("comboTrees"),xs=ts.get("id");if(is===NODE$1){var ms=ts.getModel().comboId;if(ys){var Ss=ys,Ms=!1;ys.forEach(function(ks){Ms||traverseTree(ks,function(Ps){if(Ps.id===xs&&Ss){var Ds=Ss.indexOf(Ps);return Ss.splice(Ds,1),Ms=!0,!1}return Ss=Ps.children,!0})})}for(var $s=ts.getEdges(),bs=$s.length-1;bs>=0;bs--)as.removeItem($s[bs],!1);ms&&as.updateCombo(ms)}else if(is===COMBO){var Cs=ts.getModel().parentId,As,Is=!1;(ys||[]).forEach(function(Ps){Is||traverseTree(Ps,function(Ds){return Ds.id===xs?(As=Ds,Is=!0,!1):!0})}),As.removed=!0,As&&As.children&&As.children.forEach(function(Ps){rs.removeItem(Ps.id)});for(var $s=ts.getEdges(),bs=$s.length;bs>=0;bs--)as.removeItem($s[bs],!1);Cs&&as.updateCombo(Cs)}ts.destroy(),as.emit("afterremoveitem",{item:os})}},ns.prototype.setItemState=function(ts,rs,as){var os=this.graph,is=rs;isString$2(as)&&(is=rs+":"+as),!(ts.hasState(is)===as&&as||isString$2(as)&&ts.hasState(is))&&(os.emit("beforeitemstatechange",{item:ts,state:is,enabled:as}),ts.setState(rs,as),os.autoPaint(),os.emit("afteritemstatechange",{item:ts,state:is,enabled:as}))},ns.prototype.priorityState=function(ts,rs){var as=this.graph,os=ts;isString$2(ts)&&(os=as.findById(ts)),this.setItemState(os,rs,!1),this.setItemState(os,rs,!0)},ns.prototype.clearItemStates=function(ts,rs){var as=this.graph;isString$2(ts)&&(ts=as.findById(ts)),as.emit("beforeitemstatesclear",{item:ts,states:rs}),ts.clearStates(rs),as.emit("afteritemstatesclear",{item:ts,states:rs})},ns.prototype.refreshItem=function(ts){var rs=this.graph;isString$2(ts)&&(ts=rs.findById(ts)),rs.emit("beforeitemrefresh",{item:ts}),ts.refresh(),rs.emit("afteritemrefresh",{item:ts})},ns.prototype.addCombos=function(ts,rs){var as=this,os=this.graph;(ts||[]).forEach(function(us){traverseTreeUp(us,function(ls){var fs;return rs.forEach(function(hs){hs.id===ls.id&&(hs.children=ls.children,hs.depth=ls.depth,fs=hs)}),fs&&as.addItem("combo",fs),!0})});var is=os.get("comboGroup");is&&is.sort()},ns.prototype.changeItemVisibility=function(ts,rs){var as=this,os=this.graph;if(isString$2(ts)&&(ts=os.findById(ts)),!ts){console.warn("The item to be shown or hidden does not exist!");return}if(os.emit("beforeitemvisibilitychange",{item:ts,visible:rs}),ts.changeVisibility(rs),ts.getType&&ts.getType()===NODE$1){var is=ts.getEdges();each$1(is,function(vs){rs&&!(vs.get("source").isVisible()&&vs.get("target").isVisible())||as.changeItemVisibility(vs,rs)})}else if(ts.getType&&ts.getType()===COMBO){var us=os.get("comboTrees"),ls=ts.get("id"),fs=[],hs=!1;(us||[]).forEach(function(gs){hs||!gs.children||gs.children.length===0||traverseTree(gs,function(ys){return ys.id===ls?(fs=ys.children,hs=!0,!1):!0})}),fs&&fs.forEach(function(gs){var ys=os.findById(gs.id);as.changeItemVisibility(ys,rs)});var is=ts.getEdges();each$1(is,function(gs){rs&&!(gs.get("source").isVisible()&&gs.get("target").isVisible())||as.changeItemVisibility(gs,rs)})}return os.emit("afteritemvisibilitychange",{item:ts,visible:rs}),ts},ns.prototype.destroy=function(){this.graph=null,this.destroyed=!0},ns}(),timer=null,StateController=function(){function ns(ts){this.graph=ts,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return ns.checkCache=function(ts,rs,as){if(as[rs]){var os=as[rs].indexOf(ts);os>=0&&as[rs].splice(os,1)}},ns.cacheState=function(ts,rs,as){as[rs]||(as[rs]=[]),as[rs].push(ts)},ns.prototype.updateState=function(ts,rs,as){var os=this,is=ns.checkCache,us=ns.cacheState;if(!ts.destroyed){var ls=this.cachedStates,fs=ls.enabled,hs=ls.disabled;as?(is(ts,rs,hs),us(ts,rs,fs)):(is(ts,rs,fs),us(ts,rs,hs)),timer&&clearTimeout(timer),timer=setTimeout(function(){timer=null,os.updateGraphStates()},16)}},ns.prototype.updateStates=function(ts,rs,as){var os=this;isString$2(rs)?this.updateState(ts,rs,as):rs.forEach(function(is){os.updateState(ts,is,as)})},ns.prototype.updateGraphStates=function(){var ts=this.graph.get("states"),rs=this.cachedStates;each$1(rs.disabled,function(as,os){ts[os]&&(ts[os]=ts[os].filter(function(is){return as.indexOf(is)<0&&!as.destroyed}))}),each$1(rs.enabled,function(as,os){if(!ts[os])ts[os]=as;else{var is={};ts[os].forEach(function(us){us.destroyed||(is[us.get("id")]=!0)}),as.forEach(function(us){if(!us.destroyed){var ls=us.get("id");is[ls]||(is[ls]=!0,ts[os].push(us))}})}}),this.graph.emit("graphstatechange",{states:ts}),this.cachedStates={enabled:{},disabled:{}}},ns.prototype.destroy=function(){this.graph=null,this.cachedStates=null,timer&&clearTimeout(timer),timer=null,this.destroyed=!0},ns}(),substitute=function ns(ts,rs){return!ts||!rs?ts:ts.replace(/\\?\{([^{}]+)\}/g,function(as,os){if(as.charAt(0)==="\\")return as.slice(1);var is=rs[os];return is===0&&(is="0"),is||""})},getSpline=function ns(ts){var rs=[];if(ts.length<2)throw new Error("point length must largn than 2, now it's "+ts.length);for(var as=0,os=ts;as<os.length;as++){var is=os[as],us=is.x,ls=is.y;rs.push(us),rs.push(ls)}var fs=catmullRom2Bezier(rs);return fs.unshift(["M",ts[0].x,ts[0].y]),fs},getControlPoint=function ns(ts,rs,as,os){as===void 0&&(as=0),os===void 0&&(os=0);var is={x:(1-as)*ts.x+as*rs.x,y:(1-as)*ts.y+as*rs.y},us=[0,0];normalize$1(us,[rs.x-ts.x,rs.y-ts.y]),(!us||!us[0]&&!us[1])&&(us=[0,0]);var ls=[-us[1]*os,us[0]*os];return is.x+=ls[0],is.y+=ls[1],is},pointsToPolygon=function ns(ts,rs){var as=ts.length;if(!as)return"";for(var os="",is="",us=0;us<as;us++){var ls=ts[us];us===0?is="M{x} {y}":is="L{x} {y}",os+=substitute(is,ls)}return rs&&(os+="Z"),os},pathToPoints=function ns(ts){var rs=[];return ts.forEach(function(as){var os=as[0];if(os!=="A")for(var is=1;is<as.length;is=is+2)rs.push([as[is],as[is+1]]);else{var us=as.length;rs.push([as[us-2],as[us-1]])}}),rs},getClosedSpline=function ns(ts){if(ts.length<2)throw new Error("point length must largn than 2, now it's "+ts.length);var rs=ts[0],as=ts[1],os=ts[ts.length-1],is=ts[ts.length-2];ts.unshift(os),ts.unshift(is),ts.push(rs),ts.push(as);for(var us=[],ls=1;ls<ts.length-2;ls+=1){var fs=ts[ls-1].x,hs=ts[ls-1].y,vs=ts[ls].x,gs=ts[ls].y,ys=ts[ls+1].x,xs=ts[ls+1].y,ms=ls!==ts.length-2?ts[ls+2].x:ys,Ss=ls!==ts.length-2?ts[ls+2].y:xs,Ms=vs+(ys-fs)/6,$s=gs+(xs-hs)/6,bs=ys-(ms-vs)/6,Cs=xs-(Ss-gs)/6;us.push(["C",Ms,$s,bs,Cs,ys,xs])}return us.unshift(["M",os.x,os.y]),us},vecScaleTo=function ns(ts,rs){return scale$2([0,0],normalize$1([0,0],ts),rs)},unitNormal=function ns(ts,rs){var as=[ts[1]-rs[1],rs[0]-ts[0]],os=Math.sqrt(as[0]*as[0]+as[1]*as[1]);if(os===0)throw new Error("p0 should not be equal to p1");return[as[0]/os,as[1]/os]},vecFrom=function ns(ts,rs){return[rs[0]-ts[0],rs[1]-ts[1]]};function roundedHull(ns,ts){var rs=function(gs){var ys=[gs[0][0],gs[0][1]-ts],xs=[gs[0][0],gs[0][1]+ts];return"M "+ys+" A "+ts+","+ts+",0,0,0,"+xs+" A "+ts+","+ts+",0,0,0,"+ys},as=function(gs){var ys=scale$2([0,0],unitNormal(gs[0],gs[1]),ts),xs=scale$2([0,0],ys,-1),ms=add$1([0,0],gs[0],ys),Ss=add$1([0,0],gs[1],ys),Ms=add$1([0,0],gs[1],xs),$s=add$1([0,0],gs[0],xs);return"M "+ms+" L "+Ss+" A "+[ts,ts,"0,0,0",Ms].join(",")+" L "+$s+" A "+[ts,ts,"0,0,0",ms].join(",")};if(!ns||ns.length<1)return"";if(ns.length===1)return rs(ns);if(ns.length===2)return as(ns);for(var os=new Array(ns.length),is=0;is<os.length;++is){var us=is===0?ns[ns.length-1]:ns[is-1],ls=ns[is],fs=scale$2([0,0],unitNormal(us,ls),ts);os[is]=[add$1([0,0],us,fs),add$1([0,0],ls,fs)]}var hs="A "+[ts,ts,"0,0,0,"].join(",");return os=os.map(function(vs,gs){var ys="";return gs===0&&(ys="M "+os[os.length-1][1]+" "),ys+=hs+vs[0]+" L "+vs[1],ys}),os.join(" ")}function paddedHull(ns,ts){var rs=ns.length,as=function(vs){var gs=[vs[0][0],vs[0][1]-ts],ys=[vs[0][0],vs[0][1]+ts];return"M "+gs+" A "+[ts,ts,"0,0,0",ys].join(",")+" A "+[ts,ts,"0,0,0",gs].join(",")},os=function(vs){var gs=vecFrom(vs[0],vs[1]),ys=vecScaleTo(gs,ts),xs=add$1([0,0],vs[0],scale$2([0,0],ys,-1)),ms=add$1([0,0],vs[1],ys),Ss=1.2*ts,Ms=vecScaleTo(normalize$1([0,0],gs),Ss),$s=scale$2([0,0],Ms,-1),bs=add$1([0,0],xs,$s),Cs=add$1([0,0],ms,$s),As=add$1([0,0],xs,Ms);return"M "+xs+" C "+[bs,Cs,ms].join(",")+" S "+[As,xs].join(",")+" Z"};if(!ns||rs<1)return"";if(rs===1)return as(ns);if(rs===2)return os(ns);for(var is=ns.map(function(hs,vs){var gs=ns[(vs+1)%rs];return{p:hs,v:normalize$1([0,0],vecFrom(hs,gs))}}),us=0;us<is.length;++us){var ls=us>0?us-1:rs-1,fs=normalize$1([0,0],add$1([0,0],is[ls].v,scale$2([0,0],is[us].v,-1)));is[us].p=add$1([0,0],is[us].p,scale$2([0,0],fs,ts))}return is.map(function(hs){var vs=hs.p;return{x:vs[0],y:vs[1]}})}const PathUtil=Object.freeze(Object.defineProperty({__proto__:null,getClosedSpline,getControlPoint,getSpline,paddedHull,pathToPoints,pointsToPolygon,roundedHull},Symbol.toStringTag,{value:"Module"}));var cross=function ns(ts,rs,as){return(ts.y-as.y)*(rs.x-as.x)-(ts.x-as.x)*(rs.y-as.y)},genConvexHull=function ns(ts){var rs=ts.map(function(ls){return{x:ls.getModel().x,y:ls.getModel().y}});if(rs.sort(function(ls,fs){return ls.x===fs.x?ls.y-fs.y:ls.x-fs.x}),rs.length===1)return rs;for(var as=[],os=0;os<rs.length;os++){for(;as.length>=2&&cross(as[as.length-2],as[as.length-1],rs[os])<=0;)as.pop();as.push(rs[os])}for(var is=[],os=rs.length-1;os>=0;os--){for(;is.length>=2&&cross(is[is.length-2],is[is.length-1],rs[os])<=0;)is.pop();is.push(rs[os])}is.pop(),as.pop();var us=as.concat(is);return us},defaultOps={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function MarchingSquares(ns,ts,rs){var as=!1,os=function(fs,hs){return ts.cells[fs+hs*ts.width]},is=function(fs,hs){var vs=0;return os(fs-1,hs-1)>=rs&&(vs+=1),os(fs,hs-1)>rs&&(vs+=2),os(fs-1,hs)>rs&&(vs+=4),os(fs,hs)>rs&&(vs+=8),vs},us=function(fs,hs){for(var vs=fs,gs=hs,ys,xs,ms=0;ms<ts.width*ts.height;ms++){if(ys=vs,xs=gs,ns.findIndex(function(Ms){return Ms.x===vs&&Ms.y===gs})>-1){if(!(ns[0].x!==vs||ns[0].y!==gs))return!0}else ns.push({x:vs,y:gs});var Ss=is(vs,gs);switch(Ss){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:vs++;break;case 12:case 14:case 4:vs--;break;case 6:ys===0&&(xs===-1?vs-=1:vs+=1);break;case 1:case 13:case 5:gs--;break;case 9:ys===1&&(xs===0?gs-=1:gs+=1);break;case 10:case 8:case 11:gs++;break;default:return console.warn("Marching squares invalid state: "+Ss),!0}}};this.march=function(){for(var ls=0;ls<ts.width&&!as;ls+=1)for(var fs=0;fs<ts.height&&!as;fs+=1)os(ls,fs)>rs&&is(ls,fs)!==15&&(as=us(ls,fs));return as}}var initGridCells=function ns(ts,rs,as){var os=Math.ceil(ts/as),is=Math.ceil(rs/as),us=new Float32Array(Math.max(0,os*is)).fill(0);return{cells:us,width:os,height:is}},pickBestNeighbor=function ns(ts,rs,as){var os=null,is=Number.POSITIVE_INFINITY;return rs.forEach(function(us){var ls={x:ts.getModel().x,y:ts.getModel().y},fs={x:us.getModel().x,y:us.getModel().y},hs=squareDist(ls,fs),vs=new Line(ls.x,ls.y,fs.x,fs.y),gs=as.reduce(function(ys,xs){return fractionToLine(xs,vs)>0?ys+1:ys},0);hs*Math.pow(gs+1,2)<is&&(os=us,is=hs*Math.pow(gs+1,2))}),os},getIntersectItem=function ns(ts,rs){var as=Number.POSITIVE_INFINITY,os=null;return ts.forEach(function(is){var us=fractionToLine(is,rs);us>=0&&us<as&&(os=is,as=us)}),os},computeRoute=function ns(ts,rs,as,os){var is=[],us=[];us.push(ts);for(var ls=!0,fs=0,hs=function(xs,ms){var Ss=!1;return ms.forEach(function(Ms){Ss||(isPointsOverlap(xs,{x:Ms.x1,y:Ms.y1})||isPointsOverlap(xs,{x:Ms.x2,y:Ms.y2}))&&(Ss=!0)}),Ss},vs=function(xs,ms){for(var Ss=0,Ms=ms;Ss<Ms.length;Ss++){var $s=Ms[Ss],bs=$s.getBBox(),Cs=[[bs.x,bs.y],[bs.x+bs.width,bs.y],[bs.x,bs.y+bs.height],[bs.x+bs.width,bs.y+bs.height]];if(isPointInPolygon(Cs,xs.x,xs.y))return!0}return!1};ls&&fs<as;){ls=!1;for(var gs=function(){var xs=us.pop(),ms=getIntersectItem(rs,xs);if(ms){var Ss=itemIntersectByLine(ms,xs),Ms=Ss[0],$s=Ss[1];if($s===2){var bs=function(As){for(var Is=os,ks=rerouteLine(ms,Is,Ms,As),Ps=hs(ks,us)||hs(ks,is),Ds=vs(ks,rs);!Ps&&Ds&&Is>=1;)Is/=1.5,ks=rerouteLine(ms,Is,Ms,As),Ps=hs(ks,us)||hs(ks,is),Ds=vs(ks,rs);ks&&!Ps&&(!As||!Ds)&&(us.push(new Line(xs.x1,xs.y1,ks.x,ks.y)),us.push(new Line(ks.x,ks.y,xs.x2,xs.y2)),ls=!0)};bs(!0),ls||bs(!1)}}ls||is.push(xs),fs+=1};!ls&&us.length;)gs()}for(;us.length;)is.push(us.pop());return is};function getRoute(ns,ts,rs,as,os){var is=pickBestNeighbor(ns,rs,ts);if(is===null)return[];var us=function(gs){for(var ys=[];gs.length>0;){var xs=gs.pop();if(gs.length===0){ys.push(xs);break}var ms=gs.pop(),Ss=new Line(xs.x1,xs.y1,ms.x2,ms.y2),Ms=getIntersectItem(ts,Ss);Ms?(ys.push(xs),gs.push(ms)):gs.push(Ss)}return ys},ls=new Line(ns.getModel().x,ns.getModel().y,is.getModel().x,is.getModel().y),fs=computeRoute(ls,ts,as,os),hs=us(fs);return hs}var genBubbleSet=function ns(ts,rs,as){var os=Object.assign(defaultOps,as),is=getPointsCenter(ts.map(function(bs){return{x:bs.getModel().x,y:bs.getModel().y}}));ts=ts.sort(function(bs,Cs){return squareDist({x:bs.getModel().x,y:bs.getModel().y},is)-squareDist({x:Cs.getModel().x,y:Cs.getModel().y},is)});var us=[],ls=[];ts.forEach(function(bs){var Cs=getRoute(bs,rs,us,os.maxRoutingIterations,os.morphBuffer);Cs.forEach(function(As){ls.push(As)}),us.push(bs)});for(var fs=getActiveRregion(ts,ls,os.nodeR0),hs=initGridCells(fs.width,fs.height,os.pixelGroupSize),vs=[],gs=[],ys=0;ys<os.maxMarchingIterations;ys++)if(fillPotentialArea(ts,rs,ls,fs,hs,os),vs=[],gs=[],!!new MarchingSquares(vs,hs,os.threshold).march()){var xs=vs.map(function(bs){return{x:Math.round(bs.x*os.pixelGroupSize+fs.minX),y:Math.round(bs.y*os.pixelGroupSize+fs.minY)}});if(xs){var ms=xs.length;if(os.skip>1)for(ms=Math.floor(xs.length/os.skip);ms<3&&os.skip>1;)os.skip-=1,ms=Math.floor(xs.length/os.skip);for(var Ss=0,Ms=0;Ms<ms;Ms+=1,Ss+=os.skip)gs.push({x:xs[Ss].x,y:xs[Ss].y})}var $s=function(){for(var Cs=0,As=ts;Cs<As.length;Cs++){var Is=As[Cs],ks=gs.map(function(Ps){return[Ps.x,Ps.y]});if(!isPointInPolygon(ks,Is.getBBox().centerX,Is.getBBox().centerY))return!1}return!0};if(gs&&$s())return gs;if(os.threshold*=.9,ys<=os.maxMarchingIterations*.5)os.memberInfluenceFactor*=1.2,os.edgeInfluenceFactor*=1.2;else if(os.nonMemberInfluenceFactor!==0&&rs.length>0)os.nonMemberInfluenceFactor*=.8;else break}return gs};function getActiveRregion(ns,ts,rs){var as={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},os=[];ns.forEach(function(fs){os.push(fs.getBBox())}),ts.forEach(function(fs){os.push(fs.getBBox())});for(var is=0,us=os;is<us.length;is++){var ls=us[is];as.minX=(ls.minX<as.minX?ls.minX:as.minX)-rs,as.minY=(ls.minY<as.minY?ls.minY:as.minY)-rs,as.maxX=(ls.maxX>as.maxX?ls.maxX:as.maxX)+rs,as.maxY=(ls.maxY>as.maxY?ls.maxY:as.maxY)+rs}return as.width=as.maxX-as.minX,as.height=as.maxY-as.minY,as.x=as.minX,as.y=as.minY,as}function fillPotentialArea(ns,ts,rs,as,os,is){function us(xs,ms){var Ss=Math.floor((xs-ms)/is.pixelGroupSize);return Ss<0?0:Ss}function ls(xs,ms){return xs*is.pixelGroupSize+ms}var fs=(is.nodeR0-is.nodeR1)*(is.nodeR0-is.nodeR1),hs=(is.edgeR0-is.edgeR1)*(is.edgeR0-is.edgeR1),vs=function(ms,Ss){var Ms=Math.min(us(ms.minX,Ss+as.minX),os.width),$s=Math.min(us(ms.minY,Ss+as.minY),os.height),bs=Math.min(us(ms.maxX,-Ss+as.minX),os.width),Cs=Math.min(us(ms.maxY,-Ss+as.minY),os.height);return[Ms,$s,bs,Cs]},gs=function(ms,Ss){for(var Ms=ms.getBBox(),$s=vs(Ms,is.nodeR1),bs=$s[0],Cs=$s[1],As=$s[2],Is=$s[3],ks=Cs;ks<Is;ks+=1)for(var Ps=bs;Ps<As;Ps+=1)if(!(Ss<0&&os[Ps+ks*os.width]<=0)){var Ds=ls(Ps,as.minX),Fs=ls(ks,as.minY),Rs=pointRectSquareDist({x:Ds,y:Fs},{x:Ms.minX,y:Ms.minY,width:Ms.width,height:Ms.height});if(Rs<Math.pow(is.nodeR1,2)){var js=Math.sqrt(Rs)-is.nodeR1;os.cells[Ps+ks*os.width]+=Ss*js*js}}},ys=function(ms,Ss){for(var Ms=ms.getBBox(),$s=vs(Ms,is.edgeR1),bs=$s[0],Cs=$s[1],As=$s[2],Is=$s[3],ks=Cs;ks<Is;ks+=1)for(var Ps=bs;Ps<As;Ps+=1)if(!(Ss<0&&os.cells[Ps+ks*os.width]<=0)){var Ds=ls(Ps,as.minX),Fs=ls(ks,as.minY),Rs=pointLineSquareDist({x:Ds,y:Fs},ms);if(Rs<Math.pow(is.edgeR1,2)){var js=Math.sqrt(Rs)-is.edgeR1;os.cells[Ps+ks*os.width]+=Ss*js*js}}};is.nodeInfluenceFactor&&ns.forEach(function(xs){gs(xs,is.nodeInfluenceFactor/fs)}),is.edgeInfluenceFactor&&rs.forEach(function(xs){ys(xs,is.edgeInfluenceFactor/hs)}),is.negativeNodeInfluenceFactor&&ts.forEach(function(xs){gs(xs,is.negativeNodeInfluenceFactor/fs)})}function rerouteLine(ns,ts,rs,as){var os=ns.getBBox(),is=rs[0],us=rs[1],ls=rs[2],fs=rs[3],hs={topLeft:{x:os.minX-ts,y:os.minY-ts},topRight:{x:os.maxX+ts,y:os.minY-ts},bottomLeft:{x:os.minX-ts,y:os.maxY+ts},bottomRight:{x:os.maxX+ts,y:os.maxY+ts}},vs=os.height*os.width;function gs(ms,Ss){return os.width*((ms.y-os.minY+(Ss.y-os.minY))*.5)}if(us){if(is)return as?hs.topLeft:hs.bottomRight;if(ls)return as?hs.bottomLeft:hs.topRight;var ys=gs(us,fs);return ys<vs*.5?us.y>fs.y?as?hs.topLeft:hs.bottomRight:as?hs.topRight:hs.bottomLeft:us.y<fs.y?as?hs.bottomLeft:hs.topRight:as?hs.bottomRight:hs.topLeft}if(fs){if(is)return as?hs.topRight:hs.bottomLeft;if(ls)return as?hs.bottomRight:hs.topLeft}var xs=gs(is,ls);return xs<vs*.5?is.x>ls.x?as?hs.topLeft:hs.bottomRight:as?hs.bottomLeft:hs.topRight:is.x<ls.x?as?hs.topRight:hs.bottomLeft:as?hs.bottomRight:hs.topLeft}var Hull=function(){function ns(ts,rs){this.cfg=deepMix$2(this.getDefaultCfg(),rs),this.graph=ts,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(as){return isString$2(as)?ts.findById(as):as}),this.nonMembers=this.cfg.nonMembers.map(function(as){return isString$2(as)?ts.findById(as):as}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return ns.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},ns.prototype.setPadding=function(){var ts=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+ts:10+ts,this.cfg.bubbleCfg={nodeR0:this.padding-ts,nodeR1:this.padding-ts,morphBuffer:this.padding-ts}},ns.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},ns.prototype.calcPath=function(ts,rs){var as,os,is;switch(this.type){case"round-convex":as=genConvexHull(ts),is=roundedHull(as.map(function(us){return[us.x,us.y]}),this.padding),os=parsePathString$1(is);break;case"smooth-convex":as=genConvexHull(ts),as.length===2?(is=roundedHull(as.map(function(us){return[us.x,us.y]}),this.padding),os=parsePathString$1(is)):as.length>2&&(is=paddedHull(as.map(function(us){return[us.x,us.y]}),this.padding),os=getClosedSpline(is));break;case"bubble":as=genBubbleSet(ts,rs,this.cfg.bubbleCfg),os=as.length>=2&&getClosedSpline(as);break}return os},ns.prototype.render=function(){this.group.addShape("path",{attrs:__assign$h({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},ns.prototype.addMember=function(ts){if(ts){isString$2(ts)&&(ts=this.graph.findById(ts)),this.members.push(ts);var rs=this.nonMembers.indexOf(ts);return rs>-1&&this.nonMembers.splice(rs,1),this.updateData(this.members,this.nonMembers),!0}},ns.prototype.addNonMember=function(ts){if(ts){isString$2(ts)&&(ts=this.graph.findById(ts)),this.nonMembers.push(ts);var rs=this.members.indexOf(ts);return rs>-1&&this.members.splice(rs,1),this.updateData(this.members,this.nonMembers),!0}},ns.prototype.removeMember=function(ts){if(ts){isString$2(ts)&&(ts=this.graph.findById(ts));var rs=this.members.indexOf(ts);return rs>-1?(this.members.splice(rs,1),this.updateData(this.members,this.nonMembers),!0):!1}},ns.prototype.removeNonMember=function(ts){if(ts){isString$2(ts)&&(ts=this.graph.findById(ts));var rs=this.nonMembers.indexOf(ts);return rs>-1?(this.nonMembers.splice(rs,1),this.updateData(this.members,this.nonMembers),!0):!1}},ns.prototype.updateData=function(ts,rs){var as=this;this.group.findById(this.id).remove(),ts&&(this.members=ts.map(function(os){return isString$2(os)?as.graph.findById(os):os})),rs&&(this.nonMembers=rs.map(function(os){return isString$2(os)?as.graph.findById(os):os})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},ns.prototype.updateStyle=function(ts){var rs=this.group.findById(this.id);rs.attr(__assign$h({},ts))},ns.prototype.updateCfg=function(ts){var rs=this;this.cfg=deepMix$2(this.cfg,ts),this.id=this.cfg.id,this.group=this.cfg.group,ts.members&&(this.members=this.cfg.members.map(function(as){return isString$2(as)?rs.graph.findById(as):as})),ts.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(as){return isString$2(as)?rs.graph.findById(as):as})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},ns.prototype.contain=function(ts){var rs=this,as;isString$2(ts)?as=this.graph.findById(ts):as=ts;var os,is=as.getKeyShape();if(as.get("type")==="path")os=pathToPoints(is.attr("path"));else{var us=is.getCanvasBBox();os=[[us.minX,us.minY],[us.maxX,us.minY],[us.maxX,us.maxY],[us.minX,us.maxY]]}return os=os.map(function(ls){var fs=rs.graph.getPointByCanvas(ls[0],ls[1]);return[fs.x,fs.y]}),isPolygonsIntersect(os,pathToPoints(this.path))},ns.prototype.destroy=function(){this.group.remove(),this.cfg=null},ns}(),transform$2=transform$i,NODE="node",AbstractGraph=function(ns){__extends$x(ts,ns);function ts(rs){var as=ns.call(this)||this;return as.cfg=deepMix$2(as.getDefaultCfg(),rs),as.init(),as.animating=!1,as.destroyed=!1,as.cfg.enabledStack&&(as.undoStack=new Stack(as.cfg.maxStep),as.redoStack=new Stack(as.cfg.maxStep)),as}return ts.prototype.init=function(){this.initCanvas();var rs=new ViewController(this),as=new ModeController(this),os=new ItemController(this),is=new StateController(this);this.set({viewController:rs,modeController:as,itemController:os,stateController:is}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},ts.prototype.initGroups=function(){var rs=this.get("canvas"),as=this.get("canvas").get("el"),os=as.id,is=rs.addGroup({id:os+"-root",className:Global.rootContainerClassName});if(this.get("groupByTypes")){var us=is.addGroup({id:os+"-edge",className:Global.edgeContainerClassName}),ls=is.addGroup({id:os+"-node",className:Global.nodeContainerClassName}),fs=is.addGroup({id:os+"-combo",className:Global.comboContainerClassName});fs.toBack(),this.set({nodeGroup:ls,edgeGroup:us,comboGroup:fs})}var hs=is.addGroup({id:os+"-delegate",className:Global.delegateContainerClassName});this.set({delegateGroup:hs}),this.set("group",is)},ts.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},ts.prototype.set=function(rs,as){return isPlainObject$3(rs)?this.cfg=__assign$h(__assign$h({},this.cfg),rs):this.cfg[rs]=as,this},ts.prototype.get=function(rs){return this.cfg[rs]},ts.prototype.getGroup=function(){return this.get("group")},ts.prototype.getContainer=function(){return this.get("container")},ts.prototype.getMinZoom=function(){return this.get("minZoom")},ts.prototype.setMinZoom=function(rs){return this.set("minZoom",rs)},ts.prototype.getMaxZoom=function(){return this.get("maxZoom")},ts.prototype.setMaxZoom=function(rs){return this.set("maxZoom",rs)},ts.prototype.getWidth=function(){return this.get("width")},ts.prototype.getHeight=function(){return this.get("height")},ts.prototype.clearItemStates=function(rs,as){isString$2(rs)&&(rs=this.findById(rs));var os=this.get("itemController");as||(as=rs.get("states")),os.clearItemStates(rs,as);var is=this.get("stateController");is.updateStates(rs,as,!1)},ts.prototype.node=function(rs){typeof rs=="function"&&this.set("nodeMapper",rs)},ts.prototype.edge=function(rs){typeof rs=="function"&&this.set("edgeMapper",rs)},ts.prototype.combo=function(rs){typeof rs=="function"&&this.set("comboMapper",rs)},ts.prototype.findById=function(rs){return this.get("itemMap")[rs]},ts.prototype.find=function(rs,as){var os,is=this.get(rs+"s");return each$1(is,function(us,ls){if(as(us,ls))return os=us,os}),os},ts.prototype.findAll=function(rs,as){var os=[];return each$1(this.get(rs+"s"),function(is,us){as(is,us)&&os.push(is)}),os},ts.prototype.findAllByState=function(rs,as){return this.findAll(rs,function(os){return os.hasState(as)})},ts.prototype.translate=function(rs,as){var os=this.get("group"),is=clone$b(os.getMatrix());is||(is=[1,0,0,0,1,0,0,0,1]),is=transform$2(is,[["t",rs,as]]),os.setMatrix(is),this.emit("viewportchange",{action:"translate",matrix:os.getMatrix()}),this.autoPaint()},ts.prototype.moveTo=function(rs,as){var os=this.get("group");move(os,{x:rs,y:as}),this.emit("viewportchange",{action:"move",matrix:os.getMatrix()})},ts.prototype.fitView=function(rs){rs&&this.set("fitViewPadding",rs);var as=this.get("viewController");as.fitView(),this.autoPaint()},ts.prototype.fitCenter=function(){var rs=this.get("viewController");rs.fitCenter(),this.autoPaint()},ts.prototype.addBehaviors=function(rs,as){var os=this.get("modeController");return os.manipulateBehaviors(rs,as,!0),this},ts.prototype.removeBehaviors=function(rs,as){var os=this.get("modeController");return os.manipulateBehaviors(rs,as,!1),this},ts.prototype.updateBehavior=function(rs,as,os){var is=this.get("modeController");return is.updateBehavior(rs,as,os),this},ts.prototype.zoom=function(rs,as){var os=this.get("group"),is=clone$b(os.getMatrix()),us=this.get("minZoom"),ls=this.get("maxZoom");is||(is=[1,0,0,0,1,0,0,0,1]),as?is=transform$2(is,[["t",-as.x,-as.y],["s",rs,rs],["t",as.x,as.y]]):is=transform$2(is,[["s",rs,rs]]),!(us&&is[0]<us||ls&&is[0]>ls)&&(os.setMatrix(is),this.emit("viewportchange",{action:"zoom",matrix:is}),this.autoPaint())},ts.prototype.zoomTo=function(rs,as){var os=rs/this.getZoom();this.zoom(os,as)},ts.prototype.focusItem=function(rs,as,os){var is=this.get("viewController"),us=!1;as?us=!0:as===void 0&&(us=this.get("animate"));var ls={};os?ls=os:os===void 0&&(ls=this.get("animateCfg")),is.focus(rs,us,ls),this.autoPaint()},ts.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},ts.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},ts.prototype.getPointByClient=function(rs,as){var os=this.get("viewController");return os.getPointByClient(rs,as)},ts.prototype.getClientByPoint=function(rs,as){var os=this.get("viewController");return os.getClientByPoint(rs,as)},ts.prototype.getPointByCanvas=function(rs,as){var os=this.get("viewController");return os.getPointByCanvas(rs,as)},ts.prototype.getCanvasByPoint=function(rs,as){var os=this.get("viewController");return os.getCanvasByPoint(rs,as)},ts.prototype.showItem=function(rs,as){as===void 0&&(as=!0);var os=this.get("itemController"),is=os.changeItemVisibility(rs,!0);if(as&&this.get("enabledStack")){var us=is.getID(),ls=is.getType(),fs={},hs={};switch(ls){case"node":fs.nodes=[{id:us,visible:!1}],hs.nodes=[{id:us,visible:!0}];break;case"edge":fs.nodes=[{id:us,visible:!1}],hs.edges=[{id:us,visible:!0}];break;case"combo":fs.nodes=[{id:us,visible:!1}],hs.combos=[{id:us,visible:!0}];break}this.pushStack("visible",{before:fs,after:hs})}},ts.prototype.hideItem=function(rs,as){as===void 0&&(as=!0);var os=this.get("itemController"),is=os.changeItemVisibility(rs,!1);if(as&&this.get("enabledStack")){var us=is.getID(),ls=is.getType(),fs={},hs={};switch(ls){case"node":fs.nodes=[{id:us,visible:!0}],hs.nodes=[{id:us,visible:!1}];break;case"edge":fs.nodes=[{id:us,visible:!0}],hs.edges=[{id:us,visible:!1}];break;case"combo":fs.nodes=[{id:us,visible:!0}],hs.combos=[{id:us,visible:!1}];break}this.pushStack("visible",{before:fs,after:hs})}},ts.prototype.refreshItem=function(rs){var as=this.get("itemController");as.refreshItem(rs)},ts.prototype.setAutoPaint=function(rs){var as=this;as.set("autoPaint",rs);var os=as.get("canvas");os.set("autoDraw",rs)},ts.prototype.remove=function(rs,as){as===void 0&&(as=!0),this.removeItem(rs,as)},ts.prototype.removeItem=function(rs,as){as===void 0&&(as=!0);var os=rs;if(isString$2(rs)&&(os=this.findById(rs)),!os&&isString$2(rs))console.warn("The item to be removed does not exist!");else if(os){var is="";if(os.getType&&(is=os.getType()),as&&this.get("enabledStack")){var us=__assign$h(__assign$h({},os.getModel()),{itemType:is}),ls={};switch(is){case"node":{ls.nodes=[us],ls.edges=[];for(var fs=os.getEdges(),hs=fs.length-1;hs>=0;hs--)ls.edges.push(__assign$h(__assign$h({},fs[hs].getModel()),{itemType:"edge"}));break}case"edge":ls.edges=[us];break;case"combo":ls.combos=[us];break}this.pushStack("delete",{before:ls,after:{}})}if(is==="node"){var vs=os.getModel();vs.comboId&&this.updateComboTree(os)}var gs=this.get("itemController");if(gs.removeItem(os),is==="combo"){var ys=reconstructTree(this.get("comboTrees"));this.set("comboTrees",ys)}}},ts.prototype.addItem=function(rs,as,os,is){os===void 0&&(os=!0),is===void 0&&(is=!0);var us=this.get("comboSorted");this.set("comboSorted",us&&!is);var ls=this.get("itemController");if(as.id&&this.findById(as.id)){console.warn("This item exists already. Be sure the id %c"+as.id+"%c is unique.","font-size: 20px; color: red;","");return}var fs,hs=this.get("comboTrees");if(hs||(hs=[]),rs==="combo"){var vs=this.get("itemMap"),gs=!1;if(hs.forEach(function(As){gs||traverseTreeUp(As,function(Is){if(as.parentId===Is.id){gs=!0;var ks=__assign$h({id:as.id,depth:Is.depth+2},as);Is.children?Is.children.push(ks):Is.children=[ks],as.depth=ks.depth,fs=ls.addItem(rs,as)}var Ps=vs[Is.id];return gs&&Ps&&Ps.getType&&Ps.getType()==="combo"&&ls.updateCombo(Ps,Is.children),!0})}),!gs){var ys=__assign$h({id:as.id,depth:0},as);as.depth=ys.depth,hs.push(ys),fs=ls.addItem(rs,as)}this.set("comboTrees",hs)}else if(rs==="node"&&isString$2(as.comboId)&&hs){var xs=this.findById(as.comboId);if(xs&&xs.getType&&xs.getType()!=="combo"){console.warn("'"+as.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");return}fs=ls.addItem(rs,as);var ms=this.get("itemMap"),Ss=!1,Ms=!1;(hs||[]).forEach(function(As){Ms||Ss||traverseTreeUp(As,function(Is){if(Is.id===as.id)return Ms=!0,!1;if(as.comboId===Is.id&&!Ms){Ss=!0;var ks=clone$b(as);ks.itemType="node",Is.children?Is.children.push(ks):Is.children=[ks],as.depth=Is.depth+1}return Ss&&ms[Is.id].getType&&ms[Is.id].getType()==="combo"&&ls.updateCombo(ms[Is.id],Is.children),!0})})}else fs=ls.addItem(rs,as);if(rs==="node"&&as.comboId||rs==="combo"&&as.parentId){var xs=this.findById(as.comboId||as.parentId);xs&&xs.addChild(fs)}var $s=this.get("combos");if($s&&$s.length>0&&this.sortCombos(),this.autoPaint(),os&&this.get("enabledStack")){var bs=__assign$h(__assign$h({},fs.getModel()),{itemType:rs}),Cs={};switch(rs){case"node":Cs.nodes=[bs];break;case"edge":Cs.edges=[bs];break;case"combo":Cs.combos=[bs];break}this.pushStack("add",{before:{},after:Cs})}return fs},ts.prototype.add=function(rs,as,os,is){return os===void 0&&(os=!0),is===void 0&&(is=!0),this.addItem(rs,as,os,is)},ts.prototype.updateItem=function(rs,as,os){var is=this;os===void 0&&(os=!0);var us=this.get("itemController"),ls;isString$2(rs)?ls=this.findById(rs):ls=rs;var fs=clone$b(ls.getModel()),hs="";ls.getType&&(hs=ls.getType());var vs=__spreadArrays(ls.getStates());if(hs==="combo"&&each$1(vs,function(ms){return is.setItemState(ls,ms,!1)}),us.updateItem(ls,as),hs==="combo"&&each$1(vs,function(ms){return is.setItemState(ls,ms,!0)}),os&&this.get("enabledStack")){var gs={nodes:[],edges:[],combos:[]},ys={nodes:[],edges:[],combos:[]},xs=__assign$h({id:fs.id},as);switch(hs){case"node":gs.nodes.push(fs),ys.nodes.push(xs);break;case"edge":gs.edges.push(fs),ys.edges.push(xs);break;case"combo":gs.combos.push(fs),ys.combos.push(xs);break}hs==="node"&&gs.nodes.push(fs),this.pushStack("update",{before:gs,after:ys})}},ts.prototype.update=function(rs,as,os){os===void 0&&(os=!0),this.updateItem(rs,as,os)},ts.prototype.setItemState=function(rs,as,os){isString$2(rs)&&(rs=this.findById(rs));var is=this.get("itemController");is.setItemState(rs,as,os);var us=this.get("stateController");isString$2(os)?us.updateState(rs,as+":"+os,!0):us.updateState(rs,as,os)},ts.prototype.priorityState=function(rs,as){var os=this.get("itemController");os.priorityState(rs,as)},ts.prototype.data=function(rs){this.set("data",rs)},ts.prototype.render=function(){var rs=this;this.set("comboSorted",!1);var as=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!as)throw new Error("data must be defined first");var os=as.nodes,is=os===void 0?[]:os,us=as.edges,ls=us===void 0?[]:us,fs=as.combos,hs=fs===void 0?[]:fs;if(this.clear(),this.emit("beforerender"),each$1(is,function(Ms){rs.add("node",Ms,!1,!1)}),hs&&hs.length!==0){var vs=plainCombosToTrees(hs,is);this.set("comboTrees",vs),rs.addCombos(hs)}each$1(ls,function(Ms){rs.add("edge",Ms,!1,!1)});var gs=rs.get("animate");(rs.get("fitView")||rs.get("fitCenter"))&&rs.set("animate",!1);var ys=rs.get("layoutController");if(ys){if(ys.layout(xs),this.destroyed)return}else rs.get("fitView")&&rs.fitView(),rs.get("fitCenter")&&rs.fitCenter(),rs.emit("afterrender"),rs.set("animate",gs);function xs(){rs.get("fitView")?rs.fitView():rs.get("fitCenter")&&rs.fitCenter(),rs.autoPaint(),rs.emit("afterrender"),(rs.get("fitView")||rs.get("fitCenter"))&&rs.set("animate",gs)}if(!this.get("groupByTypes"))if(hs&&hs.length!==0)this.sortCombos();else if(as.nodes&&as.edges&&as.nodes.length<as.edges.length){var ms=this.getNodes();ms.forEach(function(Ms){Ms.toFront()})}else{var Ss=this.getEdges();Ss.forEach(function(Ms){Ms.toBack()})}this.get("enabledStack")&&this.pushStack("render")},ts.prototype.read=function(rs){this.data(rs),this.render()},ts.prototype.diffItems=function(rs,as,os){var is=this,us,ls=this.get("itemMap");each$1(os,function(fs){if(us=ls[fs.id],us){if(is.get("animate")&&rs===NODE){var hs=us.getContainer().getMatrix();hs||(hs=[1,0,0,0,1,0,0,0,1]),us.set("originAttrs",{x:hs[6],y:hs[7]})}is.updateItem(us,fs,!1)}else us=is.addItem(rs,fs,!1);us&&as[rs+"s"].push(us)})},ts.prototype.changeData=function(rs,as){as===void 0&&(as=!0);var os=this;if(!rs)return this;as&&this.get("enabledStack")&&this.pushStack("changedata",{before:os.save(),after:rs}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(Ss){return os.clearItemStates(Ss)}),this.getEdges().map(function(Ss){return os.clearItemStates(Ss)});var is=this.get("canvas"),us=is.get("localRefresh");is.set("localRefresh",!1),os.get("data")||(os.data(rs),os.render());var ls=this.get("itemMap"),fs={nodes:[],edges:[]},hs=rs.combos;if(hs){var vs=plainCombosToTrees(hs,rs.nodes);this.set("comboTrees",vs)}this.diffItems("node",fs,rs.nodes),each$1(ls,function(Ss,Ms){ls[Ms].getModel().depth=0,!(Ss.getType&&Ss.getType()==="edge")&&(Ss.getType&&Ss.getType()==="combo"?(delete ls[Ms],Ss.destroy()):fs.nodes.indexOf(Ss)<0&&(delete ls[Ms],os.remove(Ss,!1)))});for(var gs=this.getCombos(),ys=gs.length,xs=ys-1;xs>=0;xs--)gs[xs].destroyed&&gs.splice(xs,1);hs&&(os.addCombos(hs),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",fs,rs.edges),each$1(ls,function(Ss,Ms){Ss.getType&&(Ss.getType()==="node"||Ss.getType()==="combo")||fs.edges.indexOf(Ss)<0&&(delete ls[Ms],os.remove(Ss,!1))}),this.set({nodes:fs.nodes,edges:fs.edges});var ms=this.get("layoutController");return ms&&(ms.changeData(),os.get("animate")&&!ms.getLayoutType()?os.positionsAnimate():os.autoPaint()),setTimeout(function(){is.set("localRefresh",us)},16),this},ts.prototype.addCombos=function(rs){var as=this,os=as.get("comboTrees"),is=this.get("itemController");is.addCombos(os,rs)},ts.prototype.createCombo=function(rs,as){var os=this;this.set("comboSorted",!1);var is="",us;if(rs){if(isString$2(rs))is=rs,us={id:rs};else{if(is=rs.id,!is){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}us=rs}var ls=as.map(function(hs){var vs=os.findById(hs),gs="";vs.getType&&(gs=vs.getType());var ys={id:vs.getID(),itemType:gs};return gs==="combo"?ys.parentId=is:gs==="node"&&(ys.comboId=is),ys});us.children=ls,this.addItem("combo",us,!1),this.set("comboSorted",!1);var fs=this.get("comboTrees");(fs||[]).forEach(function(hs){traverseTreeUp(hs,function(vs){return vs.id===is?(vs.itemType="combo",vs.children=ls,!1):!0})}),fs&&this.sortCombos()}},ts.prototype.uncombo=function(rs){var as=this,os=this,is=rs;if(isString$2(rs)&&(is=this.findById(rs)),!is||is.getType&&is.getType()!=="combo"){console.warn("The item is not a combo!");return}var us=is.getModel().parentId,ls=os.get("comboTrees");ls||(ls=[]);var fs=this.get("itemMap"),hs=is.get("id"),vs,gs=[],ys=this.get("combos"),xs=this.findById(us);if(ls.forEach(function(Ss){vs||traverseTreeUp(Ss,function(Ms){if(Ms.id===hs){vs=Ms;var $s=is.getEdges();$s.forEach(function(Cs){as.removeItem(Cs,!1)});var bs=ys.indexOf(rs);ys.splice(bs,1),delete fs[hs],is.destroy()}if(us&&vs&&Ms.id===us){xs.removeCombo(is),gs=Ms.children;var bs=gs.indexOf(vs);return bs!==-1&&gs.splice(bs,1),vs.children.forEach(function(As){var Is=as.findById(As.id),ks=Is.getModel();Is.getType&&Is.getType()==="combo"?(As.parentId=us,delete As.comboId,ks.parentId=us,delete ks.comboId):Is.getType&&Is.getType()==="node"&&(As.comboId=us,ks.comboId=us),xs.addChild(Is),gs.push(As)}),!1}return!0})}),!us&&vs){var ms=ls.indexOf(vs);ls.splice(ms,1),vs.children.forEach(function(Ss){Ss.parentId=void 0;var Ms=as.findById(Ss.id).getModel();Ms.parentId=void 0,Ss.itemType!=="node"&&ls.push(Ss)})}},ts.prototype.updateCombos=function(){var rs=this,as=this,os=this.get("comboTrees"),is=as.get("itemController"),us=as.get("itemMap");(os||[]).forEach(function(ls){traverseTreeUp(ls,function(fs){if(!fs)return!0;var hs=us[fs.id];if(hs&&hs.getType&&hs.getType()==="combo"){var vs=__spreadArrays(hs.getStates());each$1(vs,function(gs){return rs.setItemState(hs,gs,!1)}),is.updateCombo(hs,fs.children),each$1(vs,function(gs){return rs.setItemState(hs,gs,!0)})}return!0})}),as.sortCombos()},ts.prototype.updateCombo=function(rs){var as=this,os=this,is=rs,us;if(isString$2(rs)&&(is=this.findById(rs)),!is||is.getType&&is.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}us=is.get("id");var ls=this.get("comboTrees"),fs=os.get("itemController"),hs=os.get("itemMap");(ls||[]).forEach(function(vs){traverseTreeUp(vs,function(gs){if(!gs)return!0;var ys=hs[gs.id];if(us===gs.id&&ys&&ys.getType&&ys.getType()==="combo"){var xs=__spreadArrays(ys.getStates());each$1(xs,function(ms){ys.getStateStyle(ms)&&as.setItemState(ys,ms,!1)}),fs.updateCombo(ys,gs.children),each$1(xs,function(ms){ys.getStateStyle(ms)&&as.setItemState(ys,ms,!0)}),us&&(us=gs.parentId)}return!0})})},ts.prototype.updateComboTree=function(rs,as,os){os===void 0&&(os=!0);var is=this;this.set("comboSorted",!1);var us;isString$2(rs)?us=is.findById(rs):us=rs;var ls=us.getModel(),fs=ls.comboId||ls.parentId,hs="";if(us.getType&&(hs=us.getType()),as&&hs==="combo"){var vs=this.get("comboTrees"),gs=!0,ys;if((vs||[]).forEach(function(bs){ys||traverseTree(bs,function(Cs){if(!ys)return Cs.id===us.getID()&&(ys=Cs),!0})}),traverseTree(ys,function(bs){return bs.id===as?(gs=!1,!1):!0}),!gs){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(os&&this.get("enabledStack")){var xs={},ms={};hs==="combo"?(xs.combos=[{id:ls.id,parentId:ls.parentId}],ms.combos=[{id:ls.id,parentId:as}]):hs==="node"&&(xs.nodes=[{id:ls.id,parentId:ls.comboId}],ms.nodes=[{id:ls.id,parentId:as}]),this.pushStack("updateComboTree",{before:xs,after:ms})}if(ls.parentId||ls.comboId){var Ss=this.findById(ls.parentId||ls.comboId);Ss&&Ss.removeChild(us)}if(hs==="combo"?ls.parentId=as:hs==="node"&&(ls.comboId=as),as){var Ms=this.findById(as);Ms&&Ms.addChild(us)}if(fs){var Ms=this.findById(fs);Ms&&Ms.removeChild(us)}var $s=reconstructTree(this.get("comboTrees"),ls.id,as);this.set("comboTrees",$s),this.updateCombos()},ts.prototype.save=function(){var rs=[],as=[],os=[];return each$1(this.get("nodes"),function(is){rs.push(is.getModel())}),each$1(this.get("edges"),function(is){as.push(is.getModel())}),each$1(this.get("combos"),function(is){os.push(is.getModel())}),{nodes:rs,edges:as,combos:os}},ts.prototype.changeSize=function(rs,as){var os=this.get("viewController");return os.changeSize(rs,as),this},ts.prototype.refresh=function(){var rs=this;if(rs.emit("beforegraphrefresh"),rs.get("animate"))rs.positionsAnimate();else{var as=rs.get("nodes"),os=rs.get("edges"),is=rs.get("edges");each$1(as,function(us){us.refresh()}),each$1(os,function(us){us.refresh()}),each$1(is,function(us){us.refresh()})}rs.emit("aftergraphrefresh"),rs.autoPaint()},ts.prototype.getNodes=function(){return this.get("nodes")},ts.prototype.getEdges=function(){return this.get("edges")},ts.prototype.getCombos=function(){return this.get("combos")},ts.prototype.getComboChildren=function(rs){if(isString$2(rs)&&(rs=this.findById(rs)),!rs||rs.getType&&rs.getType()!=="combo"){console.warn("The combo does not exist!");return}return rs.getChildren()},ts.prototype.positionsAnimate=function(){var rs=this;rs.emit("beforeanimate");var as=rs.get("animateCfg"),os=as.onFrame,is=rs.getNodes(),us=is.map(function(fs){var hs=fs.getModel();return{id:hs.id,x:hs.x,y:hs.y}});rs.isAnimating()&&rs.stopAnimate();var ls=rs.get("canvas");ls.animate(function(fs){each$1(us,function(hs){var vs=rs.findById(hs.id);if(!(!vs||vs.destroyed)){var gs=vs.get("originAttrs"),ys=vs.get("model");if(!gs){var xs=vs.getContainer().getMatrix();xs||(xs=[1,0,0,0,1,0,0,0,1]),gs={x:xs[6],y:xs[7]},vs.set("originAttrs",gs)}if(os){var ms=os(vs,fs,hs,gs);vs.set("model",Object.assign(ys,ms))}else ys.x=gs.x+(hs.x-gs.x)*fs,ys.y=gs.y+(hs.y-gs.y)*fs}}),rs.refreshPositions()},{duration:as.duration,easing:as.easing,callback:function(){each$1(is,function(hs){hs.set("originAttrs",null)}),as.callback&&as.callback(),rs.emit("afteranimate"),rs.animating=!1}})},ts.prototype.refreshPositions=function(){var rs=this;rs.emit("beforegraphrefreshposition");var as=rs.get("nodes"),os=rs.get("edges"),is=rs.get("vedges"),us=rs.get("combos"),ls,fs={};each$1(as,function(hs){ls=hs.getModel();var vs=hs.get("originAttrs");vs&&ls.x===vs.x&&ls.y===vs.y||(hs.updatePosition({x:ls.x,y:ls.y}),fs[ls.id]=!0,ls.comboId&&(fs[ls.comboId]=!0))}),us&&us.length!==0&&rs.updateCombos(),each$1(os,function(hs){var vs=hs.getSource().getModel(),gs=hs.getTarget().getModel();(fs[vs.id]||fs[gs.id]||hs.getModel().isComboEdge)&&hs.refresh()}),each$1(is,function(hs){hs.refresh()}),rs.emit("aftergraphrefreshposition"),rs.autoPaint()},ts.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},ts.prototype.isAnimating=function(){return this.animating},ts.prototype.getZoom=function(){var rs=this.get("group").getMatrix();return rs?rs[0]:1},ts.prototype.getCurrentMode=function(){var rs=this.get("modeController");return rs.getMode()},ts.prototype.setMode=function(rs){var as=this.get("modeController");return as.setMode(rs),this},ts.prototype.clear=function(){var rs=this.get("canvas");return rs.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},ts.prototype.updateLayout=function(rs){var as=this.get("layoutController"),os;isString$2(rs)?(os=rs,rs={type:os}):os=rs.type;var is=this.get("layout"),us=is?is.type:void 0;if((!os||us===os)&&(rs.gpuEnabled===void 0||rs.gpuEnabled===is.gpuEnabled)){var ls={};Object.assign(ls,is,rs),ls.type=us||"random",this.set("layout",ls),as.updateLayoutCfg(ls)}else os||(os=us),this.set("layout",rs),as.changeLayout(os)},ts.prototype.destroyLayout=function(){var rs=this.get("layoutController");rs.destroyLayout()},ts.prototype.layout=function(){var rs=this.get("layoutController"),as=this.get("layout");if(!(!as||!rs)){if(as.workerEnabled){rs.layout();return}rs.layoutMethod?rs.relayout(!0):rs.layout()}},ts.prototype.collapseCombo=function(rs){var as=this;if(isString$2(rs)&&(rs=this.findById(rs)),!rs){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:rs});var os=rs.getModel(),is=this.get("itemController");is.collapseCombo(rs),os.collapsed=!0;var us=this.getEdges().concat(this.get("vedges")),ls=[],fs=[],hs=this.get("comboTrees"),vs=!1,gs={};(hs||[]).forEach(function(ms){gs[ms.id]=ms}),(hs||[]).forEach(function(ms){vs||traverseTree(ms,function(Ss){if(vs&&gs[Ss.id])return!1;if(os.parentId===Ss.id?(gs={},Ss.children.forEach(function($s){gs[$s.id]=$s})):os.id===Ss.id&&(vs=!0),vs){var Ms=as.findById(Ss.id);Ms&&Ms.getType&&Ms.getType()==="combo"&&(ls=ls.concat(Ms.getNodes()),fs=fs.concat(Ms.getCombos()))}return!0})});var ys={},xs=[];us.forEach(function(ms){if(!(ms.isVisible()&&!ms.getModel().isVEdge)){var Ss=ms.getSource(),Ms=ms.getTarget();if((ls.includes(Ss)||fs.includes(Ss))&&!ls.includes(Ms)&&!fs.includes(Ms)||Ss.getModel().id===os.id){var $s=ms.getModel();if($s.isVEdge){as.removeItem(ms,!1);return}for(var bs=Ms.getModel();!Ms.isVisible();){if(Ms=as.findById(bs.parentId||bs.comboId),!Ms||!bs.parentId&&!bs.comboId)return;bs=Ms.getModel()}var Cs=bs.id;if(ys[os.id+"-"+Cs]){ys[os.id+"-"+Cs]+=$s.size||1;return}var As=as.addItem("vedge",{source:os.id,target:Cs,isVEdge:!0},!1);ys[os.id+"-"+Cs]=$s.size||1,xs.push(As)}else if(!ls.includes(Ss)&&!fs.includes(Ss)&&(ls.includes(Ms)||fs.includes(Ms))||Ms.getModel().id===os.id){var $s=ms.getModel();if($s.isVEdge){as.removeItem(ms,!1);return}for(var Is=Ss.getModel();!Ss.isVisible();){if(Ss=as.findById(Is.parentId||Is.comboId),!Ss||!Is.parentId&&!Is.comboId)return;Is=Ss.getModel()}var ks=Is.id;if(ys[ks+"-"+os.id]){ys[ks+"-"+os.id]+=$s.size||1;return}var As=as.addItem("vedge",{target:os.id,source:ks,isVEdge:!0},!1);ys[ks+"-"+os.id]=$s.size||1,xs.push(As)}}}),xs.forEach(function(ms){var Ss=ms.getModel();as.updateItem(ms,{size:ys[Ss.source+"-"+Ss.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:rs})},ts.prototype.expandCombo=function(rs){var as=this;if(isString$2(rs)&&(rs=this.findById(rs)),!rs||rs.getType&&rs.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:rs});var os=rs.getModel(),is=this.get("itemController");is.expandCombo(rs),os.collapsed=!1;var us=this.getEdges().concat(this.get("vedges")),ls=[],fs=[],hs=this.get("comboTrees"),vs=!1,gs={};(hs||[]).forEach(function(ms){gs[ms.id]=ms}),(hs||[]).forEach(function(ms){vs||traverseTree(ms,function(Ss){if(vs&&gs[Ss.id])return!1;if(os.parentId===Ss.id?(gs={},Ss.children.forEach(function($s){gs[$s.id]=$s})):os.id===Ss.id&&(vs=!0),vs){var Ms=as.findById(Ss.id);Ms&&Ms.getType&&Ms.getType()==="combo"&&(ls=ls.concat(Ms.getNodes()),fs=fs.concat(Ms.getCombos()))}return!0})});var ys={},xs={};us.forEach(function(ms){if(!(ms.isVisible()&&!ms.getModel().isVEdge)){var Ss=ms.getSource(),Ms=ms.getTarget(),$s=Ss.get("id"),bs=Ms.get("id");if((ls.includes(Ss)||fs.includes(Ss))&&!ls.includes(Ms)&&!fs.includes(Ms)||$s===os.id){if(ms.getModel().isVEdge){as.removeItem(ms,!1);return}for(var Cs=Ms.getModel();!Ms.isVisible();){if(Ms=as.findById(Cs.comboId||Cs.parentId),!Ms||!Cs.parentId&&!Cs.comboId)return;Cs=Ms.getModel()}bs=Cs.id;for(var As=Ss.getModel();!Ss.isVisible();){if(Ss=as.findById(As.comboId||As.parentId),!Ss||!As.parentId&&!As.comboId)return;if(As.comboId===os.id||As.parentId===os.id)break;As=Ss.getModel()}if($s=As.id,bs){var Is=$s+"-"+bs;if(ys[Is]){ys[Is]+=ms.getModel().size||1,as.updateItem(xs[Is],{size:ys[Is]},!1);return}var ks=as.addItem("vedge",{source:$s,target:bs,isVEdge:!0},!1);ys[Is]=ms.getModel().size||1,xs[Is]=ks}}else if(!ls.includes(Ss)&&!fs.includes(Ss)&&(ls.includes(Ms)||fs.includes(Ms))||bs===os.id){if(ms.getModel().isVEdge){as.removeItem(ms,!1);return}for(var As=Ss.getModel();!Ss.isVisible();){if(Ss=as.findById(As.comboId||As.parentId),!Ss||!As.parentId&&!As.comboId)return;As=Ss.getModel()}$s=As.id;for(var Cs=Ms.getModel();!Ms.isVisible();){if(Ms=as.findById(Cs.comboId||Cs.parentId),!Ms||!Cs.parentId&&!Cs.comboId)return;if(Cs.comboId===os.id||Cs.parentId===os.id)break;Cs=Ms.getModel()}if(bs=Cs.id,$s){var Is=$s+"-"+bs;if(ys[Is]){ys[Is]+=ms.getModel().size||1,as.updateItem(xs[Is],{size:ys[Is]},!1);return}var ks=as.addItem("vedge",{target:bs,source:$s,isVEdge:!0},!1);ys[Is]=ms.getModel().size||1,xs[Is]=ks}}else(ls.includes(Ss)||fs.includes(Ss))&&(ls.includes(Ms)||fs.includes(Ms))&&Ss.isVisible()&&Ms.isVisible()&&ms.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:rs})},ts.prototype.collapseExpandCombo=function(rs){if(isString$2(rs)&&(rs=this.findById(rs)),!(rs.getType&&rs.getType()!=="combo")){for(var as=rs.getModel(),os=this.findById(as.parentId);os;){var is=os.getModel();if(is.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),os=void 0;return}os=this.findById(is.parentId)}var us=as.collapsed;us?this.expandCombo(rs):this.collapseCombo(rs),this.updateCombo(rs)}},ts.prototype.sortCombos=function(){var rs=this,as=this.get("comboSorted");if(!as){this.set("comboSorted",!0);var os=[],is={},us=this.get("comboTrees");(us||[]).forEach(function(fs){traverseTree(fs,function(hs){return os[hs.depth]?os[hs.depth].push(hs.id):os[hs.depth]=[hs.id],is[hs.id]=hs.depth,!0})});var ls=this.getEdges().concat(this.get("vedges"));(ls||[]).forEach(function(fs){var hs=fs.getModel(),vs=is[hs.source]||0,gs=is[hs.target]||0,ys=Math.max(vs,gs);os[ys]?os[ys].push(hs.id):os[ys]=[hs.id]}),os.forEach(function(fs){if(!(!fs||!fs.length))for(var hs=fs.length-1;hs>=0;hs--){var vs=rs.findById(fs[hs]);vs&&vs.toFront()}})}},ts.prototype.getNeighbors=function(rs,as){var os=rs;return isString$2(rs)&&(os=this.findById(rs)),os.getNeighbors(as)},ts.prototype.getNodeDegree=function(rs,as){as===void 0&&(as=void 0);var os=rs;isString$2(rs)&&(os=this.findById(rs));var is=this.get("degrees");is||(is=degree(this.get("data"))),this.set("degees",is);var us=is[os.getID()],ls;switch(as){case"in":ls=us.inDegree;break;case"out":ls=us.outDegree;break;case"all":ls=us;break;default:ls=us.degree;break}return ls},ts.prototype.getUndoStack=function(){return this.undoStack},ts.prototype.getRedoStack=function(){return this.redoStack},ts.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},ts.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},ts.prototype.pushStack=function(rs,as,os){if(rs===void 0&&(rs="update"),os===void 0&&(os="undo"),!this.get("enabledStack")){console.warn("请先启用 undo & redo 功能，在实例化 Graph 时候配置 enabledStack: true !");return}var is=as?clone$b(as):{before:{},after:clone$b(this.save())};os==="redo"?this.redoStack.push({action:rs,data:is}):this.undoStack.push({action:rs,data:is}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})},ts.prototype.getAdjMatrix=function(rs,as){rs===void 0&&(rs=!0),as===void 0&&(as=this.get("directed"));var os=this.get("adjMatrix");return(!os||!rs)&&(os=adjMatrix(this.save(),as),this.set("adjMatrix",os)),os},ts.prototype.getShortestPathMatrix=function(rs,as){rs===void 0&&(rs=!0),as===void 0&&(as=this.get("directed"));var os=this.get("adjMatrix"),is=this.get("shortestPathMatrix");return(!os||!rs)&&(os=adjMatrix(this.save(),as),this.set("adjMatrix",os)),(!is||!rs)&&(is=floydWarshall$1(this.save(),as),this.set("shortestPathMatrix",is)),is},ts.prototype.on=function(rs,as,os){return ns.prototype.on.call(this,rs,as,os)},ts.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},ts.prototype.createHull=function(rs){if(!rs.members||rs.members.length<1){console.warn("Create hull failed! The members is empty.");return}var as=this.get("hullGroup"),os=this.get("hullMap");if(os||(os={},this.set("hullMap",os)),as||(as=this.get("group").addGroup({id:"hullGroup"}),as.toBack(),this.set("hullGroup",as)),os[rs.id])return console.warn("Existed hull id."),os[rs.id];var is=as.addGroup({id:rs.id+"-container"}),us=new Hull(this,__assign$h(__assign$h({},rs),{group:is})),ls=us.id;return os[ls]=us,us},ts.prototype.getHulls=function(){return this.get("hullMap")},ts.prototype.getHullById=function(rs){return this.get("hullMap")[rs]},ts.prototype.removeHull=function(rs){var as;isString$2(rs)?as=this.getHullById(rs):as=rs;var os=this.get("hullMap");delete os[as.id],as.destroy()},ts.prototype.removeHulls=function(){var rs=this.getHulls();!rs||!Object.keys(rs).length||(rs.forEach(function(as){as.destroy()}),this.set("hullMap",{}))},ts}(EventEmitter);function _typeof$1(ns){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(rs){return typeof rs}:_typeof$1=function(rs){return rs&&typeof Symbol=="function"&&rs.constructor===Symbol&&rs!==Symbol.prototype?"symbol":typeof rs},_typeof$1(ns)}var transform$1=transform$i,CLS_SHAPE_SUFFIX="-shape",CLS_LABEL_SUFFIX="-label",ARROWS=["startArrow","endArrow"],SHAPE_DEFAULT_ATTRS={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},PATH_SHAPE_DEFAULT_ATTRS={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},SHAPES_DEFAULT_ATTRS={edge:PATH_SHAPE_DEFAULT_ATTRS,node:SHAPE_DEFAULT_ATTRS,combo:SHAPE_DEFAULT_ATTRS},CLS_LABEL_BG_SUFFIX="-label-bg",shapeBase={options:{},itemType:"",type:"",getCustomConfig:function ns(ts){return{}},getOptions:function ns(ts){return deepMix$2({labelCfg:{style:{fontFamily:typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(ts)||{},ts)},draw:function ns(ts,rs){var as=this.drawShape(ts,rs);if(as.set("className",this.itemType+CLS_SHAPE_SUFFIX),ts.label){var os=this.drawLabel(ts,rs);os.set("className",this.itemType+CLS_LABEL_SUFFIX)}return as},afterDraw:function ns(ts,rs,as){},drawShape:function ns(ts,rs){return null},drawLabel:function ns(ts,rs){var as=this.getOptions(ts).labelCfg,os=as||{},is=this.getLabelStyle(ts,os,rs),us=is.rotate;delete is.rotate;var ls=rs.addShape("text",{attrs:is,draggable:!0,className:"text-shape",name:"text-shape"});if(us){var fs=ls.getBBox(),hs=ls.getMatrix();if(hs||(hs=[1,0,0,0,1,0,0,0,1]),is.rotateCenter)switch(is.rotateCenter){case"center":hs=transform$1(hs,[["t",-fs.width/2,-fs.height/2],["r",us],["t",fs.width/2,fs.height/2]]);break;case"lefttop":hs=transform$1(hs,[["t",-is.x,-is.y],["r",us],["t",is.x,is.y]]);break;case"leftcenter":hs=transform$1(hs,[["t",-is.x,-is.y-fs.height/2],["r",us],["t",is.x,is.y+fs.height/2]]);break;default:hs=transform$1(hs,[["t",-fs.width/2,-fs.height/2],["r",us],["t",fs.width/2,fs.height/2]]);break}else hs=transform$1(hs,[["t",-is.x,-is.y-fs.height/2],["r",us],["t",is.x,is.y+fs.height/2]]);ls.setMatrix(hs)}if(is.background){var vs=this.drawLabelBg(ts,rs,ls),gs=this.itemType+CLS_LABEL_BG_SUFFIX;vs.set("classname",gs),ls.toFront()}return ls},drawLabelBg:function ns(ts,rs,as){var os=this.options.labelCfg,is=mix$1({},os,ts.labelCfg),us=this.getLabelBgStyleByPosition(as,ts,is,rs),ls=rs.addShape("rect",{name:"text-bg-shape",attrs:us});return ls},getLabelStyleByPosition:function ns(ts,rs,as){return{text:ts.label}},getLabelBgStyleByPosition:function ns(ts,rs,as,os){return{}},getLabelStyle:function ns(ts,rs,as){var os=this.getLabelStyleByPosition(ts,rs,as),is=this.itemType+"Label",us=Global[is]?Global[is].style:null,ls=__assign$h(__assign$h(__assign$h({},us),os),rs.style);return ls},getShapeStyle:function ns(ts){return ts.style},update:function ns(ts,rs){this.updateShapeStyle(ts,rs),this.updateLabel(ts,rs)},updateShapeStyle:function ns(ts,rs){var as=rs.getContainer(),os=rs.getKeyShape(),is=mix$1({},os.attr(),ts.style),us=function(hs){var vs,gs=is[hs];if(isPlainObject$3(gs)){var ys=as.find(function(xs){return xs.get("name")===hs});ys&&ys.attr(gs)}else os.attr((vs={},vs[hs]=gs,vs))};for(var ls in is)us(ls)},updateLabel:function ns(ts,rs){var as=rs.getContainer(),os=this.getOptions({}).labelCfg,is=this.itemType+CLS_LABEL_SUFFIX,us=as.find(function(Is){return Is.get("className")===is}),ls=this.itemType+CLS_LABEL_BG_SUFFIX,fs=as.find(function(Is){return Is.get("classname")===ls});if(ts.label||ts.label==="")if(us){var vs={};rs.getModel&&(vs=rs.getModel().labelCfg);var gs=deepMix$2({},os,vs,ts.labelCfg),ys=this.getLabelStyleByPosition(ts,gs,as),xs=ts.labelCfg?ts.labelCfg.style:void 0,ms=gs.style&&gs.style.background,Ss=__assign$h(__assign$h(__assign$h({},us.attr()),ys),xs),Ms=Ss.rotate;if(delete Ss.rotate,Ms){var $s=[1,0,0,0,1,0,0,0,1];$s=transform$1($s,[["t",-Ss.x,-Ss.y],["r",Ms],["t",Ss.x,Ss.y]]),us.resetMatrix(),us.attr(__assign$h(__assign$h({},Ss),{matrix:$s}))}else us.resetMatrix(),us.attr(Ss);if(!fs)Ss.background&&(fs=this.drawLabelBg(ts,as,us),fs.set("classname",ls),us.toFront());else if(Ss.background){var bs=this.getLabelBgStyleByPosition(us,ts,gs,as),Cs=__assign$h(__assign$h({},bs),ms);if(fs.resetMatrix(),Ms){var As=[1,0,0,0,1,0,0,0,1];As=transform$1(As,[["t",-Cs.x,-Cs.y],["r",Ms],["t",Cs.x,Cs.y]]),Cs.matrix=As}fs.attr(Cs)}else as.removeChild(fs)}else{var hs=this.drawLabel(ts,as);hs.set("className",is)}},afterUpdate:function ns(ts,rs){},setState:function ns(ts,rs,as){var os,is,us=as.get("keyShape");if(us){var ls=as.getType(),fs=isBoolean$2(rs)?ts:ts+":"+rs,hs=this.getStateStyle(fs,as),vs=as.getStateStyle(fs);if(!(!vs&&!hs)){var gs=mix$1({},vs||hs),ys=as.getContainer(),xs={x:1,y:1,cx:1,cy:1};if(ls==="combo"&&(xs.r=1,xs.width=1,xs.height=1),rs){var ms=function(Ks){var qs,_l=gs[Ks];if(isPlainObject$3(_l)&&!ARROWS.includes(Ks)){var Js=ys.find(function(Vs){return Vs.get("name")===Ks});Js&&Js.attr(_l)}else us.attr((qs={},qs[Ks]=_l,qs))};for(var Ss in gs)ms(Ss)}else{var Ms=clone$b(as.getCurrentStatesStyle()),$s=as.getModel(),bs=mix$1({},$s.style,clone$b(as.getOriginStyle())),Cs=us.get("name"),As=us.attr(),Is={};Object.keys(As).forEach(function(Ys){if(Ys!=="img"){var Ks=As[Ys];_typeof$1(Ks)==="object"?Is[Ys]=clone$b(Ks):Is[Ys]=Ks}});var ks={},Ps=function(Ks){var qs=gs[Ks];if(isPlainObject$3(qs)&&!ARROWS.includes(Ks)){var _l=ys.find(function(Zs){return Zs.get("name")===Ks});if(_l){var Js=clone$b(_l.attr());each$1(qs,function(Zs,Sl){if(Ks===Cs&&Is[Sl]&&!xs[Sl]){delete Is[Sl];var Il=bs[Ks][Sl]||SHAPES_DEFAULT_ATTRS[ls][Sl];us.attr(Sl,Il)}else if(Js[Sl]||Js[Sl]===0){delete Js[Sl];var Nl=bs[Ks][Sl]||SHAPES_DEFAULT_ATTRS[ls][Sl];_l.attr(Sl,Nl)}}),ks[Ks]=Js}}else if(Is[Ks]&&!xs[Ks]){delete Is[Ks];var Vs=bs[Ks]||(bs[Cs]?bs[Cs][Ks]:void 0)||SHAPES_DEFAULT_ATTRS[ls][Ks];us.attr(Ks,Vs)}};for(var Ds in gs)Ps(Ds);Cs?ks[Cs]=Is:mix$1(ks,Is);for(var Ss in Ms)if(!xs[Ss]){var Fs=Ms[Ss];(!isPlainObject$3(Fs)||ARROWS.includes(Ss))&&(Cs?(mix$1(bs[Cs],(is={},is[Ss]=Fs,is)),delete bs[Ss]):mix$1(bs,(os={},os[Ss]=Fs,os)),delete Ms[Ss])}var Rs={};deepMix$2(Rs,bs,ks,Ms);var js=!1,zs=function(Ks){var qs,_l,Js=Rs[Ks];if(isPlainObject$3(Js)&&!ARROWS.includes(Ks)){var Vs=ys.find(function(Sl){return Sl.get("name")===Ks});Vs&&(Ks===Cs&&(ls==="combo"&&(delete Js.r,delete Js.width,delete Js.height),js=!0),Vs.attr(Js))}else if(!js){var Zs=Js||SHAPES_DEFAULT_ATTRS[ls][Ks];ls==="combo"?Cs||us.attr((qs={},qs[Ks]=Zs,qs)):us.attr((_l={},_l[Ks]=Zs,_l))}};for(var Us in Rs)zs(Us)}}}},getStateStyle:function ns(ts,rs){var as=rs.getModel(),os=rs.getType(),is=this.getOptions(as),us=is.stateStyles,ls=is.style,fs=ls===void 0?{}:ls,hs=as.stateStyles?as.stateStyles[ts]:us&&us[ts];return os==="combo"?clone$b(hs):mix$1({},fs,hs)},getControlPoints:function ns(ts){return ts.controlPoints},getAnchorPoints:function ns(ts){var rs=this.getOptions(ts).anchorPoints;return rs}},singleNode={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Global.nodeLabel.offset,getSize:function ns(ts){var rs=ts.size||this.getOptions({}).size||Global.defaultNode.size;return isArray$2(rs)&&rs.length===1&&(rs=[rs[0],rs[0]]),isArray$2(rs)||(rs=[rs,rs]),rs},getLabelStyleByPosition:function ns(ts,rs){var as=rs.position||this.labelPosition;if(as==="center")return{x:0,y:0,text:ts.label};var os=rs.offset;isNil$2(os)&&(os=this.offset);var is=this.getSize(ts),us=is[0],ls=is[1],fs;switch(as){case"top":fs={x:0,y:0-ls/2-os,textBaseline:"bottom"};break;case"bottom":fs={x:0,y:ls/2+os,textBaseline:"top"};break;case"left":fs={x:0-us/2-os,y:0,textAlign:"right"};break;default:fs={x:us/2+os,y:0,textAlign:"left"};break}return fs.text=ts.label,fs},getLabelBgStyleByPosition:function ns(ts,rs,as,os){if(!ts)return{};var is=ts.getBBox(),us=as.style&&as.style.background;if(!us)return{};var ls=formatPadding(us.padding),fs=is.width+ls[1]+ls[3],hs=is.height+ls[0]+ls[2],vs=as.offset;isNil$2(vs)&&(vs=this.offset);var gs;return gs={x:is.minX-ls[3],y:is.minY-ls[0]},gs=__assign$h(__assign$h(__assign$h({},gs),us),{width:fs,height:hs}),gs},drawShape:function ns(ts,rs){var as=this.shapeType,os=this.getShapeStyle(ts),is=rs.addShape(as,{attrs:os,draggable:!0,name:"node-shape"});return is},updateLinkPoints:function ns(ts,rs){var as=this.getOptions(ts).linkPoints,os=rs.find(function(Ps){return Ps.get("className")==="link-point-left"}),is=rs.find(function(Ps){return Ps.get("className")==="link-point-right"}),us=rs.find(function(Ps){return Ps.get("className")==="link-point-top"}),ls=rs.find(function(Ps){return Ps.get("className")==="link-point-bottom"}),fs;os&&(fs=os.attr()),is&&!fs&&(fs=is.attr()),us&&!fs&&(fs=us.attr()),ls&&!fs&&(fs=ls.attr()),fs||(fs=as);var hs=mix$1({},fs,ts.linkPoints),vs=hs.fill,gs=hs.stroke,ys=hs.lineWidth,xs=hs.size/2;xs||(xs=hs.r);var ms=ts.linkPoints?ts.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},Ss=ms.left,Ms=ms.right,$s=ms.top,bs=ms.bottom,Cs=this.getSize(ts),As=Cs[0],Is=Cs[1],ks={r:xs,fill:vs,stroke:gs,lineWidth:ys};os?!Ss&&Ss!==void 0?os.remove():os.attr(__assign$h(__assign$h({},ks),{x:-As/2,y:0})):Ss&&rs.addShape("circle",{attrs:__assign$h(__assign$h({},ks),{x:-As/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),is?(!Ms&&Ms!==void 0&&is.remove(),is.attr(__assign$h(__assign$h({},ks),{x:As/2,y:0}))):Ms&&rs.addShape("circle",{attrs:__assign$h(__assign$h({},ks),{x:As/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),us?(!$s&&$s!==void 0&&us.remove(),us.attr(__assign$h(__assign$h({},ks),{x:0,y:-Is/2}))):$s&&rs.addShape("circle",{attrs:__assign$h(__assign$h({},ks),{x:0,y:-Is/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),ls?!bs&&bs!==void 0?ls.remove():ls.attr(__assign$h(__assign$h({},ks),{x:0,y:Is/2})):bs&&rs.addShape("circle",{attrs:__assign$h(__assign$h({},ks),{x:0,y:Is/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function ns(ts,rs,as,os){var is=rs.get("keyShape");is.attr(__assign$h({},as)),this.updateLabel(ts,rs),os&&this.updateIcon(ts,rs)},updateIcon:function ns(ts,rs){var as=this,os=rs.getContainer(),is=this.getOptions(ts).icon,us=(ts.icon?ts.icon:{show:void 0}).show,ls=os.find(function(ys){return ys.get("className")===as.type+"-icon"});if(ls)if(us||us===void 0){var fs=mix$1({},ls.attr(),is),hs=fs.width,vs=fs.height;ls.attr(__assign$h(__assign$h({},fs),{x:-hs/2,y:-vs/2}))}else ls.remove();else if(us){var hs=is.width,vs=is.height;os.addShape("image",{attrs:__assign$h(__assign$h({},is),{x:-hs/2,y:-vs/2}),className:this.type+"-icon",name:this.type+"-icon"});var gs=os.find(function(ms){return ms.get("className")==="node-label"});gs&&gs.toFront()}}},singleNodeDef=__assign$h(__assign$h({},shapeBase),singleNode);Shape.registerNode("single-node",singleNodeDef);var CLS_SHAPE="edge-shape";function revertAlign(ns){var ts=ns;return ns==="start"?ts="end":ns==="end"&&(ts="start"),ts}var singleEdge={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Global.defaultEdge.size,style:{x:0,y:0,stroke:Global.defaultEdge.style.stroke,lineAppendWidth:Global.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Global.edgeLabel.style.fill,fontSize:Global.edgeLabel.style.fontSize}},stateStyles:__assign$h({},Global.edgeStateStyles)},getPath:function ns(ts){var rs=[];return each$1(ts,function(as,os){os===0?rs.push(["M",as.x,as.y]):rs.push(["L",as.x,as.y])}),rs},getShapeStyle:function ns(ts){var rs=this.options.style,as={stroke:ts.color},os=mix$1({},rs,as,ts.style),is=ts.size||Global.defaultEdge.size;ts=this.getPathPoints(ts);var us=ts.startPoint,ls=ts.endPoint,fs=this.getControlPoints(ts),hs=[us];fs&&(hs=hs.concat(fs)),hs.push(ls);var vs=this.getPath(hs),gs=mix$1({},Global.defaultEdge.style,{stroke:Global.defaultEdge.color,lineWidth:is,path:vs},os);return gs},updateShapeStyle:function ns(ts,rs){var as=rs.getContainer(),os={stroke:ts.color},is=as.find(function(bs){return bs.get("className")==="edge-shape"})||rs.getKeyShape(),us=ts.size;ts=this.getPathPoints(ts);var ls=ts.startPoint,fs=ts.endPoint,hs=this.getControlPoints(ts),vs=[ls];hs&&(vs=vs.concat(hs)),vs.push(fs);var gs=is.attr(),ys=mix$1({},os,gs,ts.style),xs=ts.sourceNode,ms=ts.targetNode,Ss={radius:ys.radius};hs||(Ss={source:xs,target:ms,offset:ys.offset,radius:ys.radius}),gs.endArrow&&ys.endArrow===!1&&(ts.style.endArrow={path:""}),gs.startArrow&&ys.startArrow===!1&&(ts.style.startArrow={path:""});var Ms=this.getPath(vs,Ss),$s=mix$1(os,is.attr(),{lineWidth:us,path:Ms},ts.style);is&&is.attr($s)},getLabelStyleByPosition:function ns(ts,rs,as){var os=rs.position||this.labelPosition,is={},us=as&&as.find(function(ys){return ys.get("className")===CLS_SHAPE}),ls;os==="start"?ls=0:os==="end"?ls=1:ls=.5;var fs=rs.refX||this.refX,hs=rs.refY||this.refY;if(ts.startPoint.x===ts.endPoint.x&&ts.startPoint.y===ts.endPoint.y)return is.x=ts.startPoint.x+fs,is.y=ts.startPoint.y+hs,is.text=ts.label,is;var vs=isNil$2(rs.autoRotate)?this.labelAutoRotate:rs.autoRotate,gs=getLabelPosition(us,ls,fs,hs,vs);return is.x=gs.x,is.y=gs.y,is.rotate=gs.rotate,is.textAlign=this._getTextAlign(os,gs.angle),is.text=ts.label,is},getLabelBgStyleByPosition:function ns(ts,rs,as,os){if(!ts)return{};var is=ts.getBBox(),us=as.style&&as.style.background;if(!us)return{};var ls=us.padding,fs=is.width+ls[1]+ls[3],hs=is.height+ls[0]+ls[2],vs=as.position||this.labelPosition,gs=__assign$h(__assign$h({},us),{width:fs,height:hs,x:is.minX-ls[2],y:is.minY-ls[0],rotate:0}),ys=isNil$2(as.autoRotate)?this.labelAutoRotate:as.autoRotate,xs=os&&os.find(function(Cs){return Cs.get("className")===CLS_SHAPE}),ms;vs==="start"?ms=0:vs==="end"?ms=1:ms=.5;var Ss=as.refX||this.refX,Ms=as.refY||this.refY;if(rs.startPoint.x===rs.endPoint.x&&rs.startPoint.y===rs.endPoint.y)return gs.x=rs.startPoint.x+Ss-fs/2,gs.y=rs.startPoint.y+Ms-hs/2,gs;var $s=getLabelPosition(xs,ms,Ss-fs/2,Ms+hs/2,ys),bs=$s.angle;return bs>1/2*Math.PI&&bs<3*1/2*Math.PI&&($s=getLabelPosition(xs,ms,Ss+fs/2,Ms+hs/2,ys)),ys&&(gs.x=$s.x,gs.y=$s.y),gs.rotate=$s.rotate,gs},_getTextAlign:function ns(ts,rs){var as="center";return rs?(rs=rs%(Math.PI*2),ts!=="center"&&(rs>=0&&rs<=Math.PI/2||rs>=3/2*Math.PI&&rs<2*Math.PI?as=ts:as=revertAlign(ts)),as):ts},getControlPoints:function ns(ts){return ts.controlPoints},getPathPoints:function ns(ts){return ts},drawShape:function ns(ts,rs){var as=this.getShapeStyle(ts),os=rs.addShape("path",{className:CLS_SHAPE,name:CLS_SHAPE,attrs:as});return os},drawLabel:function ns(ts,rs){var as=this.options.labelCfg,os=deepMix$2({fontFamily:typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},as,ts.labelCfg),is=this.getLabelStyle(ts,os,rs),us=is.rotate;delete is.rotate;var ls=rs.addShape("text",{attrs:is,name:"text-shape"});if(us&&ls.rotateAtStart(us),is.background){var fs=this.drawLabelBg(ts,rs,ls),hs=this.itemType+CLS_LABEL_BG_SUFFIX;fs.set("classname",hs),ls.toFront()}return ls},drawLabelBg:function ns(ts,rs,as){var os=this.options.labelCfg,is=deepMix$2({},os,ts.labelCfg),us=this.getLabelStyle(ts,is,rs),ls=us.rotate,fs=this.getLabelBgStyleByPosition(as,ts,is,rs);delete fs.rotate;var hs=rs.addShape("rect",{name:"text-bg-shape",attrs:fs});return ls&&hs.rotateAtStart(ls),hs}},singleEdgeDef=__assign$h(__assign$h({},shapeBase),singleEdge);Shape.registerEdge("single-edge",singleEdgeDef);Shape.registerEdge("line",{getControlPoints:function ns(){}},"single-edge");Shape.registerEdge("spline",{getPath:function ns(ts){var rs=getSpline(ts);return rs}},"single-edge");Shape.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function ns(ts){var rs=ts.startPoint,as=ts.endPoint,os={x:(rs.x+as.x)/2,y:(rs.y+as.y)/2},is,us;if(ts.controlPoints!==void 0){if(us=ts.controlPoints[0],is=getCircleCenterByPoints(rs,us,as),rs.x<=as.x&&rs.y>as.y?this.clockwise=is.x>us.x?0:1:rs.x<=as.x&&rs.y<as.y?this.clockwise=is.x>us.x?1:0:rs.x>as.x&&rs.y<=as.y?this.clockwise=is.y<us.y?0:1:this.clockwise=is.y<us.y?1:0,(us.x-rs.x)/(us.y-rs.y)===(as.x-rs.x)/(as.y-rs.y))return[]}else{ts.curveOffset===void 0&&(ts.curveOffset=this.curveOffset),isArray$2(ts.curveOffset)&&(ts.curveOffset=ts.curveOffset[0]),ts.curveOffset<0?this.clockwise=0:this.clockwise=1;var ls={x:as.x-rs.x,y:as.y-rs.y},fs=Math.atan2(ls.y,ls.x);us={x:ts.curveOffset*Math.cos(-Math.PI/2+fs)+os.x,y:ts.curveOffset*Math.sin(-Math.PI/2+fs)+os.y},is=getCircleCenterByPoints(rs,us,as)}var hs=distance(rs,is),vs=[{x:hs,y:hs}];return vs},getPath:function ns(ts){var rs=[];return rs.push(["M",ts[0].x,ts[0].y]),ts.length===2?rs.push(["L",ts[1].x,ts[1].y]):rs.push(["A",ts[1].x,ts[1].y,0,0,this.clockwise,ts[2].x,ts[2].y]),rs}},"single-edge");Shape.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function ns(ts){var rs=ts.controlPoints;if(!rs||!rs.length){var as=ts.startPoint,os=ts.endPoint;ts.curveOffset===void 0&&(ts.curveOffset=this.curveOffset),ts.curvePosition===void 0&&(ts.curvePosition=this.curvePosition),isArray$2(this.curveOffset)&&(ts.curveOffset=ts.curveOffset[0]),isArray$2(this.curvePosition)&&(ts.curvePosition=ts.curveOffset[0]);var is=getControlPoint(as,os,ts.curvePosition,ts.curveOffset);rs=[is]}return rs},getPath:function ns(ts){var rs=[];return rs.push(["M",ts[0].x,ts[0].y]),rs.push(["Q",ts[1].x,ts[1].y,ts[2].x,ts[2].y]),rs}},"single-edge");Shape.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function ns(ts){var rs=ts.controlPoints;if(ts.curveOffset===void 0&&(ts.curveOffset=this.curveOffset),ts.curvePosition===void 0&&(ts.curvePosition=this.curvePosition),isNumber$3(ts.curveOffset)&&(ts.curveOffset=[ts.curveOffset,-ts.curveOffset]),isNumber$3(ts.curvePosition)&&(ts.curvePosition=[ts.curvePosition,1-ts.curvePosition]),!rs||!rs.length||rs.length<2){var as=ts.startPoint,os=ts.endPoint,is=getControlPoint(as,os,ts.curvePosition[0],ts.curveOffset[0]),us=getControlPoint(as,os,ts.curvePosition[1],ts.curveOffset[1]);rs=[is,us]}return rs},getPath:function ns(ts){var rs=[];return rs.push(["M",ts[0].x,ts[0].y]),rs.push(["C",ts[1].x,ts[1].y,ts[2].x,ts[2].y,ts[3].x,ts[3].y]),rs}},"single-edge");Shape.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],getControlPoints:function ns(ts){var rs=ts.startPoint,as=ts.endPoint;ts.curvePosition!==void 0&&(this.curvePosition=ts.curvePosition),isNumber$3(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]);var os={x:rs.x,y:(as.y-rs.y)*this.curvePosition[0]+rs.y},is={x:as.x,y:(as.y-rs.y)*this.curvePosition[1]+rs.y},us=[os,is];return us}},"cubic");Shape.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],getControlPoints:function ns(ts){var rs=ts.startPoint,as=ts.endPoint;ts.curvePosition!==void 0&&(this.curvePosition=ts.curvePosition),isNumber$3(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]);var os={x:(as.x-rs.x)*this.curvePosition[0]+rs.x,y:rs.y},is={x:(as.x-rs.x)*this.curvePosition[1]+rs.x,y:as.y},us=[os,is];return us}},"cubic");Shape.registerEdge("loop",{getPathPoints:function ns(ts){return getLoopCfgs(ts)},getControlPoints:function ns(ts){return ts.controlPoints},afterDraw:function ns(ts){ts.controlPoints=void 0},afterUpdate:function ns(ts){ts.controlPoints=void 0}},"cubic");var singleCombo={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Global.comboLabel.refX,refY:Global.comboLabel.refY,options:{style:{stroke:Global.defaultCombo.style.stroke,fill:Global.defaultCombo.style.fill,lineWidth:Global.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Global.comboLabel.style.fill,fontSize:Global.comboLabel.style.fontSize}},stateStyles:__assign$h({},Global.comboStateStyles)},getSize:function ns(ts){var rs=clone$b(ts.size||this.options.size||Global.defaultCombo.size);return isArray$2(rs)&&rs.length===1&&(rs=[rs[0],rs[0]]),isArray$2(rs)||(rs=[rs,rs]),rs},getLabelStyleByPosition:function ns(ts,rs){var as=rs.position||this.labelPosition,os=ts.style,is=ts.padding||this.options.padding;isArray$2(is)&&(is=is[0]);var us=rs.refX,ls=rs.refY;isNil$2(us)&&(us=this.refX),isNil$2(ls)&&(ls=this.refY);var fs=this.getSize(ts),hs=Math.max(os.r,fs[0]/2)||fs[0]/2,vs=hs+is,gs;switch(as){case"top":gs={x:0,y:-vs-ls,textBaseline:"bottom",textAlign:"center"};break;case"bottom":gs={x:0,y:vs+ls,textBaseline:"bottom",textAlign:"center"};break;case"left":gs={x:-vs+us,y:0,textAlign:"left"};break;case"center":gs={x:0,y:0,text:ts.label,textAlign:"center"};break;default:gs={x:vs+us,y:0,textAlign:"right"};break}return gs.text=ts.label,gs},drawShape:function ns(ts,rs){var as=this.shapeType,os=this.getShapeStyle(ts),is=rs.addShape(as,{attrs:os,draggable:!0,name:"combo-shape"});return is},updateShape:function ns(ts,rs,as){var os=rs.get("keyShape"),is=ts.animate===void 0?this.options.animate:ts.animate;is&&os.animate?os.animate(as,{duration:200,easing:"easeLinear"}):os.attr(__assign$h({},as)),this.updateLabel(ts,rs)}},singleComboDef=__assign$h(__assign$h({},shapeBase),singleCombo);Shape.registerCombo("single-combo",singleComboDef);Shape.registerCombo("circle",{options:{size:[Global.defaultCombo.size[0],Global.defaultCombo.size[0]],padding:Global.defaultCombo.padding[0],animate:!0,style:{stroke:Global.defaultCombo.style.stroke,fill:Global.defaultCombo.style.fill,lineWidth:Global.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Global.comboLabel.style.fill,fontSize:Global.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:__assign$h({},Global.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function ns(ts,rs){var as=this.getShapeStyle(ts);delete as.height,delete as.width;var os=rs.addShape("circle",{attrs:as,className:"circle-combo",name:"circle-combo",draggable:!0});return os},getShapeStyle:function ns(ts){var rs=this.options.style,as=ts.padding||this.options.padding;isArray$2(as)&&(as=as[0]);var os={stroke:ts.color},is=mix$1({},rs,os,ts.style),us=this.getSize(ts),ls;!isNumber$3(is.r)||isNaN(is.r)?ls=us[0]/2||Global.defaultCombo.style.r:ls=Math.max(is.r,us[0]/2)||us[0]/2,is.r=ls+as;var fs=__assign$h({x:0,y:0},is);return ts.style?ts.style.r=ls:ts.style={r:ls},fs},update:function ns(ts,rs){var as=this.getSize(ts),os=ts.padding||this.options.padding;isArray$2(os)&&(os=os[0]);var is=clone$b(ts.style),us=Math.max(is.r,as[0]/2)||as[0]/2;is.r=us+os;var ls=rs.get("sizeCache");ls&&(ls.r=is.r);var fs={stroke:ts.color},hs=rs.get("keyShape"),vs=mix$1({},hs.attr(),fs,is);ts.style?ts.style.r=us:ts.style={r:us},this.updateShape(ts,rs,vs,!0)}},"single-combo");Shape.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Global.defaultCombo.style.stroke,fill:Global.defaultCombo.style.fill,lineWidth:Global.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Global.comboLabel.style.fill,fontSize:Global.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:__assign$h({},Global.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function ns(ts,rs){var as=this.getShapeStyle(ts),os=rs.addShape("rect",{attrs:as,className:"rect-combo",name:"rect-combo",draggable:!0});return os},getLabelStyleByPosition:function ns(ts,rs){var as=rs.position||this.labelPosition,os=ts.style,is=ts.padding||this.options.padding;isNumber$3(is)&&(is=[is,is,is,is]);var us=rs.refX,ls=rs.refY;isNil$2(us)&&(us=this.refX),isNil$2(ls)&&(ls=this.refY);var fs=os.width/2+is[3],hs=os.height/2+is[0],vs;switch(as){case"top":vs={x:0-fs+us,y:0-hs+ls,textBaseline:"top",textAlign:"left"};break;case"bottom":vs={x:0,y:hs+ls,textBaseline:"bottom",textAlign:"center"};break;case"left":vs={x:0-fs+ls,y:0,textAlign:"left"};break;case"center":vs={x:0,y:0,text:ts.label,textAlign:"center"};break;default:vs={x:fs+us,y:0,textAlign:"right"};break}return vs.text=ts.label,vs},getShapeStyle:function ns(ts){var rs=this.options.style,as=ts.padding||this.options.padding;isNumber$3(as)&&(as=[as,as,as,as]);var os={stroke:ts.color},is=mix$1({},rs,os,ts.style),us=this.getSize(ts),ls,fs;!isNumber$3(is.width)||isNaN(is.width)?ls=us[0]||Global.defaultCombo.style.width:ls=Math.max(is.width,us[0])||us[0],!isNumber$3(is.height)||isNaN(is.height)?fs=us[1]||Global.defaultCombo.style.height:fs=Math.max(is.height,us[1])||us[1];var hs=-ls/2-as[3],vs=-fs/2-as[0];is.width=ls+as[1]+as[3],is.height=fs+as[0]+as[2];var gs=__assign$h({x:hs,y:vs},is);return ts.style?(ts.style.width=ls,ts.style.height=fs):ts.style={width:ls,height:fs},gs},update:function ns(ts,rs){var as=this.getSize(ts),os=ts.padding||this.options.padding;isNumber$3(os)&&(os=[os,os,os,os]);var is=clone$b(ts.style),us=Math.max(is.width,as[0])||as[0],ls=Math.max(is.height,as[1])||as[1];is.width=us+os[1]+os[3],is.height=ls+os[0]+os[2];var fs=rs.get("sizeCache");fs&&(fs.width=is.width,fs.height=is.height),is.x=-us/2-os[3],is.y=-ls/2-os[0];var hs={stroke:ts.color},vs=rs.get("keyShape"),gs=mix$1({},vs.attr(),hs,is);ts.style?(ts.style.width=us,ts.style.height=ls):ts.style={width:us,height:ls},this.updateShape(ts,rs,gs,!1)},updateShape:function ns(ts,rs,as){var os=rs.get("keyShape"),is=ts.animate===void 0?this.options.animate:ts.animate;is&&os.animate?os.animate(as,{duration:200,easing:"easeLinear"}):os.attr(__assign$h({},as)),this.updateLabel(ts,rs)}},"single-combo");Shape.registerNode("simple-circle",{options:{size:Global.defaultNode.size,style:{x:0,y:0,stroke:Global.defaultNode.style.stroke,fill:Global.defaultNode.style.fill,lineWidth:Global.defaultNode.style.lineWidth},labelCfg:{style:{fill:Global.nodeLabel.style.fill,fontSize:Global.nodeLabel.style.fontSize}},stateStyles:__assign$h({},Global.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function ns(ts,rs){var as=this.getShapeStyle(ts),os=rs.addShape("circle",{attrs:as,className:this.type+"-keyShape",draggable:!0});return os},getShapeStyle:function ns(ts){var rs=this.getOptions(ts).style,as={stroke:ts.color},os=deepMix$2({},rs,as),is=this.getSize(ts),us=is[0]/2,ls=__assign$h({x:0,y:0,r:us},os);return ls},update:function ns(ts,rs){var as=this.getSize(ts),os={stroke:ts.color,r:as[0]/2},is=rs.get("keyShape"),us=deepMix$2({},is.attr(),os,ts.style);this.updateShape(ts,rs,us,!0)}},"single-node");Shape.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Global.defaultNode.style.stroke,fill:Global.defaultNode.style.fill,lineWidth:Global.defaultNode.style.lineWidth},labelCfg:{style:{fill:Global.nodeLabel.style.fill,fontSize:Global.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:__assign$h({},Global.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function ns(ts,rs){var as=this.getShapeStyle(ts),os=rs.addShape("rect",{attrs:as,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return os},getShapeStyle:function ns(ts){var rs=this.getOptions(ts).style,as={stroke:ts.color},os=mix$1({},rs,as),is=this.getSize(ts),us=os.width||is[0],ls=os.height||is[1],fs=__assign$h({x:-us/2,y:-ls/2,width:us,height:ls},os);return fs},update:function ns(ts,rs){rs.getContainer();var as=this.getOptions({}).style,os=this.getSize(ts),is=rs.get("keyShape");ts.size||(os[0]=is.attr("width")||as.width,os[1]=is.attr("height")||as.height);var us={stroke:ts.color,x:-os[0]/2,y:-os[1]/2,width:os[0],height:os[1]},ls=mix$1({},as,is.attr(),us);ls=mix$1(ls,ts.style),this.updateShape(ts,rs,ls,!1)}},"single-node");Shape.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function ns(ts,rs){var as=this.shapeType,os=this.getShapeStyle(ts);delete os.fill;var is=rs.addShape(as,{attrs:os,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(ts,is),is},drawClip:function ns(ts,rs){var as=this.getOptions(ts).clipCfg;if(as.show){var os=as.type,is=as.x,us=as.y,ls=as.style;if(os==="circle"){var fs=as.r;rs.setClip({type:"circle",attrs:__assign$h({r:fs,x:is,y:us},ls)})}else if(os==="rect"){var hs=as.width,vs=as.height,gs=is-hs/2,ys=us-vs/2;rs.setClip({type:"rect",attrs:__assign$h({x:gs,y:ys,width:hs,height:vs},ls)})}else if(os==="ellipse"){var xs=as.rx,ms=as.ry;rs.setClip({type:"ellipse",attrs:__assign$h({x:is,y:us,rx:xs,ry:ms},ls)})}else if(os==="polygon"){var Ss=as.points;rs.setClip({type:"polygon",attrs:__assign$h({points:Ss},ls)})}else if(os==="path"){var Ms=as.path;rs.setClip({type:"path",attrs:__assign$h({path:Ms},ls)})}}},getShapeStyle:function ns(ts){var rs=this.getOptions(ts).style,as=this.getSize(ts),os=this.getOptions(ts).img,is=as[0],us=as[1];rs&&(is=rs.width||as[0],us=rs.height||as[1]);var ls=__assign$h({x:-is/2,y:-us/2,width:is,height:us,img:os},rs);return ls},updateShapeStyle:function ns(ts,rs){var as=rs.getContainer(),os=this.itemType+"-shape",is=as.find(function(ls){return ls.get("className")===os})||rs.getKeyShape(),us=this.getShapeStyle(ts);is&&is.attr(us)}},"single-node");const Arrow={triangle:function ns(ts,rs,as){ts===void 0&&(ts=10),rs===void 0&&(rs=15),as===void 0&&(as=0);var os=as*2,is="M "+os+",0 L "+(os+rs)+",-"+ts/2+" L "+(os+rs)+","+ts/2+" Z";return is},vee:function ns(ts,rs,as){ts===void 0&&(ts=15),rs===void 0&&(rs=20),as===void 0&&(as=0);var os=as*2,is="M "+os+",0 L "+(os+rs)+",-"+ts/2+`
        L `+(os+2*rs/3)+",0 L "+(os+rs)+","+ts/2+" Z";return is},circle:function ns(ts,rs){ts===void 0&&(ts=5),rs===void 0&&(rs=0);var as=rs*2,os="M "+as+`, 0
            a `+ts+","+ts+" 0 1,0 "+ts*2+`,0
            a `+ts+","+ts+" 0 1,0 "+-ts*2+",0";return os},rect:function ns(ts,rs,as){ts===void 0&&(ts=10),rs===void 0&&(rs=10),as===void 0&&(as=0);var os=as*2,is="M "+os+","+-ts/2+` 
        L `+(os+rs)+","+-ts/2+` 
        L `+(os+rs)+","+ts/2+` 
        L `+os+","+ts/2+" Z";return is},diamond:function ns(ts,rs,as){ts===void 0&&(ts=15),rs===void 0&&(rs=15),as===void 0&&(as=0);var os=as*2,is="M "+os+`,0 
        L `+(os+rs/2)+","+-ts/2+` 
        L `+(os+rs)+`,0 
        L `+(os+rs/2)+","+ts/2+" Z";return is},triangleRect:function ns(ts,rs,as,os,is,us){ts===void 0&&(ts=15),rs===void 0&&(rs=15),as===void 0&&(as=15),os===void 0&&(os=3),is===void 0&&(is=5),us===void 0&&(us=0);var ls=us*2,fs=ls+rs+is,hs="M "+ls+",0 L "+(ls+rs)+",-"+ts/2+" L "+(ls+rs)+","+ts/2+` Z
            M `+fs+", -"+as/2+`
            L `+(fs+os)+" -"+as/2+`
            L `+(fs+os)+" "+as/2+`
            L `+fs+" "+as/2+`
            Z`;return hs}},Marker={collapse:function ns(ts,rs,as){return[["M",ts-as,rs],["a",as,as,0,1,0,as*2,0],["a",as,as,0,1,0,-as*2,0],["M",ts-as+4,rs],["L",ts+as-4,rs]]},expand:function ns(ts,rs,as){return[["M",ts-as,rs],["a",as,as,0,1,0,as*2,0],["a",as,as,0,1,0,-as*2,0],["M",ts-as+4,rs],["L",ts-as+2*as-4,rs],["M",ts-as+as,rs-as+4],["L",ts,rs+as-4]]},upTriangle:function ns(ts,rs,as){var os=as*Math.cos(Math.PI/6),is=as*Math.sin(Math.PI/6);return[["M",ts-os,rs+is],["L",ts+os,rs+is],["L",ts,rs-as],["Z"]]},downTriangle:function ns(ts,rs,as){var os=as*Math.cos(Math.PI/6),is=as*Math.sin(Math.PI/6);return[["M",ts-os,rs-is],["L",ts+os,rs-is],["L",ts,rs+as],["Z"]]}};var transform=transform$i,Util=__assign$h(__assign$h(__assign$h(__assign$h(__assign$h({},BaseUtil),GraphicUtil),PathUtil),MathUtil),{transform,mat3}),LayoutController=function(){function ns(ts){this.graph=ts,this.layoutCfg=ts.get("layout")||{},this.layoutType=this.layoutCfg.type,this.initLayout()}return ns.prototype.initLayout=function(){},ns.prototype.getLayoutType=function(){return this.layoutCfg.type},ns.prototype.refreshLayout=function(){var ts=this.graph;ts&&(ts.get("animate")?ts.positionsAnimate():ts.refreshPositions())},ns.prototype.changeLayout=function(ts){var rs=this,as=rs.graph,os=rs.layoutMethod;this.layoutType=ts,this.layoutCfg=as.get("layout")||{},this.layoutCfg.type=ts,os&&os.destroy(),this.layout()},ns.prototype.changeData=function(){var ts=this.layoutMethod;ts&&ts.destroy(),this.layout()},ns.prototype.destroyLayout=function(){var ts=this,rs=ts.layoutMethod,as=ts.graph;rs&&rs.destroy(),as.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},ns.prototype.setDataFromGraph=function(){for(var ts=[],rs=[],as=[],os=this.graph.getNodes(),is=this.graph.getEdges(),us=this.graph.getCombos(),ls=os.length,fs=0;fs<ls;fs++){var hs=os[fs];if(hs.isVisible()){var vs=hs.getModel();ts.push(vs)}}for(var gs=is.length,fs=0;fs<gs;fs++){var ys=is[fs];if(!(!ys||ys.destroyed||!ys.isVisible())){var vs=ys.getModel();vs.isComboEdge||rs.push(vs)}}for(var xs=us.length,fs=0;fs<xs;fs++){var ms=us[fs];if(!(ms.destroyed||!ms.isVisible())){var vs=ms.getModel();as.push(vs)}}return{nodes:ts,edges:rs,combos:as}},ns.prototype.relayout=function(ts){var rs=this,as=rs.graph,os=rs.layoutMethod,is=rs.layoutCfg;if(ts){this.data=this.setDataFromGraph();var us=this.data.nodes;if(!us)return!1;this.initPositions(is.center,us),os.init(this.data)}this.layoutType==="force"&&(os.ticking=!1,os.forceSimulation.stop()),as.emit("beforelayout"),os.execute(ts),os.isCustomLayout&&is.onLayoutEnd&&is.onLayoutEnd()},ns.prototype.layoutAnimate=function(){},ns.prototype.moveToZero=function(){var ts=this.graph,rs=ts.get("data"),as=rs.nodes;if(!(as[0].x===void 0||as[0].x===null||isNaN$1(as[0].x))){for(var os=[0,0],is=as.length,us=0;us<is;us++){var ls=as[us];os[0]+=ls.x,os[1]+=ls.y}os[0]/=as.length,os[1]/=as.length;for(var us=0;us<is;us++){var ls=as[us];ls.x-=os[0],ls.y-=os[1]}}},ns.prototype.initPositions=function(ts,rs){var as=this.graph;if(!rs)return!1;var os=!0,is=as.get("width")*.85,us=as.get("height")*.85,ls=rs.length,fs=Math.ceil(Math.sqrt(ls)*(is/us)),hs=Math.ceil(ls/fs),vs=is/(fs-1),gs=us/(hs-1);(!isFinite(vs)||!vs)&&(vs=0),(!isFinite(gs)||!vs)&&(gs=0);for(var ys=ts[0]-is/2,xs=ts[1]-us/2,ms=rs.length,Ss=0;Ss<ms;Ss++){var Ms=rs[Ss];isNaN$1(Ms.x)&&(os=!1,Ms.x=Ss%fs*vs+ys),isNaN$1(Ms.y)&&(os=!1,Ms.y=Math.floor(Ss/fs)*gs+xs)}return os},ns.prototype.destroy=function(){var ts=this.layoutMethod;this.graph=null,ts&&(ts.destroy(),ts.destroyed=!0),this.destroyed=!0},ns}(),EventController=function(){function ns(ts){this.graph=ts,this.destroyed=!1,this.initEvents()}return ns}(),G6Event;(function(ns){ns.CLICK="click",ns.DBLCLICK="dblclick",ns.MOUSEDOWN="mousedown",ns.MOUDEUP="mouseup",ns.CONTEXTMENU="contextmenu",ns.MOUSEENTER="mouseenter",ns.MOUSEOUT="mouseout",ns.MOUSEOVER="mouseover",ns.MOUSEMOVE="mousemove",ns.MOUSELEAVE="mouseleave",ns.DRAGSTART="dragstart",ns.DRAGEND="dragend",ns.DRAG="drag",ns.DRAGENTER="dragenter",ns.DRAGLEAVE="dragleave",ns.DRAGOVER="dragover",ns.DRAGOUT="dragout",ns.DDROP="drop",ns.KEYUP="keyup",ns.KEYDOWN="keydown",ns.WHEEL="wheel",ns.FOCUS="focus",ns.BLUR="blur",ns.TOUCHSTART="touchstart",ns.TOUCHMOVE="touchmove",ns.TOUCHEND="touchend",ns.NODE_CONTEXTMENU="node:contextmenu",ns.NODE_CLICK="node:click",ns.NODE_DBLCLICK="node:dblclick",ns.NODE_MOUSEDOWN="node:mousedown",ns.NODE_MOUSEUP="node:mouseup",ns.NODE_MOUSEENTER="node:mouseenter",ns.NODE_MOUSELEAVE="node:mouseleave",ns.NODE_MOUSEMOVE="node:mousemove",ns.NODE_MOUSEOUT="node:mouseout",ns.NODE_MOUSEOVER="node:mouseover",ns.NODE_DROP="node:drop",ns.NODE_DRAGOVER="node:dragover",ns.NODE_DRAGENTER="node:dragenter",ns.NODE_DRAGLEAVE="node:dragleave",ns.NODE_DRAGSTART="node:dragstart",ns.NODE_DRAG="node:drag",ns.NODE_DRAGEND="node:dragend",ns.COMBO_CONTEXTMENU="combo:contextmenu",ns.COMBO_CLICK="combo:click",ns.COMBO_DBLCLICK="combo:dblclick",ns.COMBO_MOUSEDOWN="combo:mousedown",ns.COMBO_MOUSEUP="combo:mouseup",ns.COMBO_MOUSEENTER="combo:mouseenter",ns.COMBO_MOUSELEAVE="combo:mouseleave",ns.COMBO_MOUSEMOVE="combo:mousemove",ns.COMBO_MOUSEOUT="combo:mouseout",ns.COMBO_MOUSEOVER="combo:mouseover",ns.COMBO_DROP="combo:drop",ns.COMBO_DRAGOVER="combo:dragover",ns.COMBO_DRAGENTER="combo:dragenter",ns.COMBO_DRAGLEAVE="combo:dragleave",ns.COMBO_DRAGSTART="combo:dragstart",ns.COMBO_DRAG="combo:drag",ns.COMBO_DRAGEND="combo:dragend",ns.EDGE_CONTEXTMENU="edge:contextmenu",ns.EDGE_CLICK="edge:click",ns.EDGE_DBLCLICK="edge:dblclick",ns.EDGE_MOUSEDOWN="edge:mousedown",ns.EDGE_MOUSEUP="edge:mouseup",ns.EDGE_MOUSEENTER="edge:mouseenter",ns.EDGE_MOUSELEAVE="edge:mouseleave",ns.EDGE_MOUSEMOVE="edge:mousemove",ns.EDGE_MOUSEOUT="edge:mouseout",ns.EDGE_MOUSEOVER="edge:mouseover",ns.EDGE_DROP="edge:drop",ns.EDGE_DRAGOVER="edge:dragover",ns.EDGE_DRAGENTER="edge:dragenter",ns.EDGE_DRAGLEAVE="edge:dragleave",ns.CANVAS_CONTEXTMENU="canvas:contextmenu",ns.CANVAS_CLICK="canvas:click",ns.CANVAS_DBLCLICK="canvas:dblclick",ns.CANVAS_MOUSEDOWN="canvas:mousedown",ns.CANVAS_MOUSEUP="canvas:mouseup",ns.CANVAS_MOUSEENTER="canvas:mouseenter",ns.CANVAS_MOUSELEAVE="canvas:mouseleave",ns.CANVAS_MOUSEMOVE="canvas:mousemove",ns.CANVAS_MOUSEOUT="canvas:mouseout",ns.CANVAS_MOUSEOVER="canvas:mouseover",ns.CANVAS_DROP="canvas:drop",ns.CANVAS_DRAGENTER="canvas:dragenter",ns.CANVAS_DRAGLEAVE="canvas:dragleave",ns.CANVAS_DRAGSTART="canvas:dragstart",ns.CANVAS_DRAG="canvas:drag",ns.CANVAS_DRAGEND="canvas:dragend",ns.BEFORERENDER="beforerender",ns.AFTERRENDER="afterrender",ns.BEFOREADDITEM="beforeadditem",ns.AFTERADDITEM="afteradditem",ns.BEFOREREMOVEITEM="beforeremoveitem",ns.AFTERREMOVEITEM="afterremoveitem",ns.BEFOREUPDATEITEM="beforeupdateitem",ns.AFTERUPDATEITEM="afterupdateitem",ns.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",ns.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",ns.BEFOREITEMSTATECHANGE="beforeitemstatechange",ns.AFTERITEMSTATECHANGE="afteritemstatechange",ns.BEFOREITEMREFRESH="beforeitemrefresh",ns.AFTERITEMREFRESH="afteritemrefresh",ns.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",ns.AFTERITEMSTATESCLEAR="afteritemstatesclear",ns.BEFOREMODECHANGE="beforemodechange",ns.AFTERMODECHANGE="aftermodechange",ns.BEFORELAYOUT="beforelayout",ns.AFTERLAYOUT="afterlayout",ns.BEFORECREATEEDGE="beforecreateedge",ns.AFTERCREATEEDGE="aftercreateedge",ns.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",ns.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",ns.BEFOREGRAPHREFRESH="beforegraphrefresh",ns.AFTERGRAPHREFRESH="aftergraphrefresh",ns.BEFOREANIMATE="beforeanimate",ns.AFTERANIMATE="afteranimate",ns.BEFOREPAINT="beforepaint",ns.AFTERPAINT="afterpaint",ns.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",ns.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",ns.GRAPHSTATECHANGE="graphstatechange",ns.AFTERACTIVATERELATIONS="afteractivaterelations",ns.NODESELECTCHANGE="nodeselectchange",ns.TOOLTIPCHANGE="tooltipchange",ns.WHEELZOOM="wheelzoom",ns.VIEWPORTCHANGE="viewportchange",ns.DRAGNODEEND="dragnodeend",ns.STACKCHANGE="stackchange"})(G6Event||(G6Event={}));Shape.registerNode;Shape.registerEdge;Shape.registerCombo;var BaseGlobal=Global;Global.version,Shape.registerNode,Shape.registerEdge,Shape.registerCombo,Behavior.registerBehavior;function ownKeys(ns,ts){var rs=Object.keys(ns);if(Object.getOwnPropertySymbols){var as=Object.getOwnPropertySymbols(ns);ts&&(as=as.filter(function(os){return Object.getOwnPropertyDescriptor(ns,os).enumerable})),rs.push.apply(rs,as)}return rs}function _objectSpread2(ns){for(var ts=1;ts<arguments.length;ts++){var rs=arguments[ts]!=null?arguments[ts]:{};ts%2?ownKeys(Object(rs),!0).forEach(function(as){_defineProperty(ns,as,rs[as])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ns,Object.getOwnPropertyDescriptors(rs)):ownKeys(Object(rs)).forEach(function(as){Object.defineProperty(ns,as,Object.getOwnPropertyDescriptor(rs,as))})}return ns}function _typeof(ns){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ts){return typeof ts}:function(ts){return ts&&typeof Symbol=="function"&&ts.constructor===Symbol&&ts!==Symbol.prototype?"symbol":typeof ts},_typeof(ns)}function _defineProperty(ns,ts,rs){return ts in ns?Object.defineProperty(ns,ts,{value:rs,enumerable:!0,configurable:!0,writable:!0}):ns[ts]=rs,ns}function _objectWithoutPropertiesLoose(ns,ts){if(ns==null)return{};var rs={},as=Object.keys(ns),os,is;for(is=0;is<as.length;is++)os=as[is],!(ts.indexOf(os)>=0)&&(rs[os]=ns[os]);return rs}function _objectWithoutProperties(ns,ts){if(ns==null)return{};var rs=_objectWithoutPropertiesLoose(ns,ts),as,os;if(Object.getOwnPropertySymbols){var is=Object.getOwnPropertySymbols(ns);for(os=0;os<is.length;os++)as=is[os],!(ts.indexOf(as)>=0)&&Object.prototype.propertyIsEnumerable.call(ns,as)&&(rs[as]=ns[as])}return rs}function _slicedToArray(ns,ts){return _arrayWithHoles(ns)||_iterableToArrayLimit(ns,ts)||_unsupportedIterableToArray(ns,ts)||_nonIterableRest()}function _toArray(ns){return _arrayWithHoles(ns)||_iterableToArray(ns)||_unsupportedIterableToArray(ns)||_nonIterableRest()}function _toConsumableArray(ns){return _arrayWithoutHoles(ns)||_iterableToArray(ns)||_unsupportedIterableToArray(ns)||_nonIterableSpread()}function _arrayWithoutHoles(ns){if(Array.isArray(ns))return _arrayLikeToArray(ns)}function _arrayWithHoles(ns){if(Array.isArray(ns))return ns}function _iterableToArray(ns){if(typeof Symbol<"u"&&ns[Symbol.iterator]!=null||ns["@@iterator"]!=null)return Array.from(ns)}function _iterableToArrayLimit(ns,ts){var rs=ns==null?null:typeof Symbol<"u"&&ns[Symbol.iterator]||ns["@@iterator"];if(rs!=null){var as=[],os=!0,is=!1,us,ls;try{for(rs=rs.call(ns);!(os=(us=rs.next()).done)&&(as.push(us.value),!(ts&&as.length===ts));os=!0);}catch(fs){is=!0,ls=fs}finally{try{!os&&rs.return!=null&&rs.return()}finally{if(is)throw ls}}return as}}function _unsupportedIterableToArray(ns,ts){if(ns){if(typeof ns=="string")return _arrayLikeToArray(ns,ts);var rs=Object.prototype.toString.call(ns).slice(8,-1);if(rs==="Object"&&ns.constructor&&(rs=ns.constructor.name),rs==="Map"||rs==="Set")return Array.from(ns);if(rs==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rs))return _arrayLikeToArray(ns,ts)}}function _arrayLikeToArray(ns,ts){(ts==null||ts>ns.length)&&(ts=ns.length);for(var rs=0,as=new Array(ts);rs<ts;rs++)as[rs]=ns[rs];return as}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _excluded=["children"],Group=function ns(ts){var rs=ts.children,as=_objectWithoutProperties(ts,_excluded);return React.createElement("div",{"data-attr":_objectSpread2(_objectSpread2({},as),{},{type:"group"})},rs)},_excluded$6=["children"],Rect=function ns(ts){var rs=ts.children,as=_objectWithoutProperties(ts,_excluded$6);return React.createElement("div",{"data-attr":_objectSpread2(_objectSpread2({},as),{},{type:"rect"})},rs)},_excluded$8=["children"],Text=function ns(ts){var rs=ts.children,as=_objectWithoutProperties(ts,_excluded$8);return React.createElement("div",{"data-attr":_objectSpread2(_objectSpread2({},as),{},{type:"text"})},rs)},_excluded$9=["style","type"],getShapeFromReact=function ns(ts){if(typeof ts=="string")return ts;if(typeof ts.type=="string"){var rs=ts.props["data-attr"]||{},as=rs.style,os=as===void 0?{}:as,is=rs.type,us=_objectWithoutProperties(rs,_excluded$9),ls=ts.props.children;if(is==="text")return os.text=ls.join?ls.join(""):ls,{type:is,attrs:os,props:us,children:[]};var fs=[];return _typeof(ls)==="object"&&(ls!=null&&ls.length)?fs=ls.filter(function(vs){return!!vs}).reduce(function(vs,gs){return vs.concat(gs.concat?gs:[gs])},[]).map(function(vs){return ns(vs)}):ls&&(fs=[ns(ls)]),{type:is,attrs:os,props:us,children:fs}}else{var hs=ts.type;try{return ns(new hs(_objectSpread2({},ts.props)))}catch{return ns(hs(_objectSpread2({},ts.props)))}}},XYPath=["L","M","C","S","Q","T","V"],xyPath=XYPath.map(function(ns){return ns.toLocaleLowerCase()}),convertPathToPoints=function ns(ts){var rs=[];return ts.forEach(function(as){var os=_toArray(as),is=os[0],us=os.slice(1),ls=rs.slice(-1),fs=_slicedToArray(ls,1),hs=fs[0];if(hs||(hs=[0,0]),XYPath.includes(is)){var vs=us.slice(-2),gs=_slicedToArray(vs,2),ys=gs[0],xs=gs[1];rs.push([ys,xs])}else if(xyPath.includes(is)){var ms=us.slice(-2),Ss=_slicedToArray(ms,2),Ms=Ss[0],$s=Ss[1];rs.push([Ms+hs[0],$s+hs[1]])}else if(is==="H"){var bs=us.slice(-1),Cs=_slicedToArray(bs,1),As=Cs[0];rs.push([As,hs[0]])}else if(is==="h"){var Is=us.slice(-1),ks=_slicedToArray(Is,1),Ps=ks[0];rs.push([Ps+hs[0],hs[1]])}else if(is==="V"){var Ds=us.slice(-1),Fs=_slicedToArray(Ds,1),Rs=Fs[0];rs.push([hs[0],Rs])}else if(is==="v"){var js=us.slice(-1),zs=_slicedToArray(js,1),Us=zs[0];rs.push([hs[0],hs[1]+Us])}}),rs},getPointsSize=function ns(ts){var rs=0,as=0,os=0,is=0;return ts.forEach(function(us){var ls=_slicedToArray(us,2),fs=ls[0],hs=ls[1];fs>rs&&(rs=fs),hs>as&&(as=hs),fs<os&&(os=fs),hs<is&&(is=hs)}),[rs-os,as-is]},canvasRef={},getCanvasContext=function ns(){var ts;if(canvasRef.context)ts=canvasRef.context;else{var rs,as=(rs=document)===null||rs===void 0?void 0:rs.createElement("canvas");if(!as)return null;ts=as.getContext("2d"),ts&&(canvasRef.canvas=as,canvasRef.context=ts)}return ts},getTextSize=function ns(ts,rs){var as=ts.split(`
`),os=(rs.fontSize||12)*as.length*(rs.lineHeight||1),is=getCanvasContext();if(is){is.font="".concat(rs.fontWeight||"normal"," ").concat(rs.fontSize||12,"px ").concat(rs.fontFamily||"");for(var us=0,ls=0;ls<as.length;ls+=1)us=Math.max(us,is.measureText(as[ls]).width);return[us*(rs.fontSize||12)/10,os]}return[Math.max.apply(Math,as.map(function(fs){return fs.length*(rs.fontSize||12)})),os]},getSizeOfShape=function ns(ts,rs){switch(ts){case"rect":case"image":return{type:ts,width:Number(rs.width)||0,height:Number(rs.height)||0};case"circle":case"marker":return{type:ts,width:(rs.r||0)*2,height:(rs.r||0)*2};case"ellipse":return{type:ts,width:(rs.rx||0)*2,height:(rs.ry||0)*2};case"path":var as=getPointsSize(convertPathToPoints(rs.path||[]));return{type:ts,width:as[0],height:as[1]};case"polygon":var os=getPointsSize(rs.points||[]);return{type:ts,width:os[0],height:os[1]};case"text":var is=getTextSize(rs.text||"",rs);return{type:ts,width:is[0],height:is[1]};default:return{type:ts,width:0,height:0}}},LayoutAlignMap={auto:entryBrowser.ALIGN_AUTO,baseline:entryBrowser.ALIGN_BASELINE,center:entryBrowser.ALIGN_CENTER,"flex-end":entryBrowser.ALIGN_FLEX_END,"flex-start":entryBrowser.ALIGN_FLEX_START,"space-around":entryBrowser.ALIGN_SPACE_AROUND,"space-between":entryBrowser.ALIGN_SPACE_BETWEEN,stretch:entryBrowser.ALIGN_STRETCH},DisplayMap={none:entryBrowser.DISPLAY_NONE,flex:entryBrowser.DISPLAY_FLEX},FlexDirectionMap={column:entryBrowser.FLEX_DIRECTION_COLUMN,"column-reverse":entryBrowser.FLEX_DIRECTION_COLUMN_REVERSE,row:entryBrowser.FLEX_DIRECTION_ROW,"row-reverse":entryBrowser.FLEX_DIRECTION_ROW_REVERSE},FlexWrapMap={"no-wrap":entryBrowser.WRAP_NO_WRAP,wrap:entryBrowser.WRAP_WRAP,"wrap-reverse":entryBrowser.WRAP_WRAP_REVERSE},JustifyContentMap={center:entryBrowser.JUSTIFY_CENTER,"flex-end":entryBrowser.JUSTIFY_FLEX_END,"flex-start":entryBrowser.JUSTIFY_FLEX_START,"space-around":entryBrowser.JUSTIFY_SPACE_AROUND,"space-between":entryBrowser.JUSTIFY_SPACE_BETWEEN,"space-evenly":entryBrowser.JUSTIFY_SPACE_EVENLY},_excluded$a=["container"],getFourFromNumOrArr=function ns(ts){if(ts instanceof Array)switch(ts.length){case 1:var rs=ts[0];return[rs,rs,rs,rs];case 2:var as=_slicedToArray(ts,2),os=as[0],is=as[1];return[os,is,os,is];case 3:var us=_slicedToArray(ts,3),ls=us[0],fs=us[1],hs=us[2];return[ls,fs,hs,fs];case 4:return ts;default:return[0,0,0,0]}else return[ts,ts,ts,ts]},constructYogaNode=function ns(ts){var rs=entryBrowser.Node.create(),as=ts.attrs;if(as.position==="absolute")return rs.setWidth(0),rs.setHeight(0),rs;if(as.alignContent&&rs.setAlignContent(LayoutAlignMap[as.alignContent]),as.alignItems&&rs.setAlignItems(LayoutAlignMap[as.alignItems]),as.alignSelf&&rs.setAlignSelf(LayoutAlignMap[as.alignSelf]),as.display?rs.setDisplay(DisplayMap[as.display]):rs.setDisplay(DisplayMap.flex),as.flex&&rs.setFlex(as.flex),as.flexBasis&&rs.setFlexBasis(as.flexBasis),as.flexGrow&&rs.setFlexGrow(as.flexGrow),as.flexShrink&&rs.setFlexShrink(as.flexShrink),as.flexDirection&&rs.setFlexDirection(FlexDirectionMap[as.flexDirection]),as.flexWrap&&rs.setFlexWrap(FlexWrapMap[as.flexWrap]),as.justifyContent&&rs.setJustifyContent(JustifyContentMap[as.justifyContent]),as.maxHeight&&rs.setMaxHeight(as.maxHeight),as.minHeight&&rs.setMinHeight(as.minHeight),as.maxWidth&&rs.setMaxWidth(as.maxWidth),as.minWidth&&rs.setMinWidth(as.minWidth),as.height&&(as.height==="auto"?rs.setHeightAuto():rs.setHeight(as.height)),as.width&&(as.width==="auto"?rs.setWidthAuto():rs.setWidth(as.width)),as.margin){var os=getFourFromNumOrArr(as.margin);os[0]==="auto"?rs.setMarginAuto(Yoga$1.EDGE_TOP):rs.setMargin(Yoga$1.EDGE_TOP,Number(os[0])),os[1]==="auto"?rs.setMarginAuto(Yoga$1.EDGE_RIGHT):rs.setMargin(Yoga$1.EDGE_RIGHT,Number(os[1])),os[2]==="auto"?rs.setMarginAuto(Yoga$1.EDGE_BOTTOM):rs.setMargin(Yoga$1.EDGE_BOTTOM,Number(os[2])),os[3]==="auto"?rs.setMarginAuto(Yoga$1.EDGE_LEFT):rs.setMargin(Yoga$1.EDGE_LEFT,Number(os[3]))}if(as.padding){var is=getFourFromNumOrArr(as.padding);rs.setPadding(Yoga$1.EDGE_TOP,is[0]),rs.setPadding(Yoga$1.EDGE_RIGHT,is[1]),rs.setPadding(Yoga$1.EDGE_BOTTOM,is[2]),rs.setPadding(Yoga$1.EDGE_LEFT,is[3])}return rs},constructNodes=function ns(ts,rs){for(var as=[[ts]],os=[],is=null;as[0];){for(var us=as.pop()||[],ls=os.pop(),fs=[],hs=0;hs<(us==null?void 0:us.length);hs+=1){var vs=us[hs],gs=getSizeOfShape(vs.type,vs.attrs);vs.attrs.width||(vs.attrs.width=gs.width||0),vs.attrs.height||(vs.attrs.height=gs.height||0);var ys=_objectSpread2(_objectSpread2({},vs),{},{container:constructYogaNode(vs),children:[]});vs.children.length&&(os.push(ys),as.push(vs.children)),fs.push(ys)}if(!ls)is=fs[0],rs.insertChild(fs[0].container,0);else{ls.children=fs;for(var xs=0;xs<ls.children.length;xs+=1)ls.container.insertChild(ls.children[xs].container,xs)}}return is},caculateNodes=function ns(ts,rs){var as={width:Number(ts.attrs.width)||0,height:Number(ts.attrs.height)||0,x:0,y:0},os=_objectSpread2({},as),is=ts.container,us=_objectWithoutProperties(ts,_excluded$a);if(us.attrs.position==="absolute")as.x=us.attrs.x,as.y=us.attrs.y,os=as;else if(is){var ls=is.getComputedLayout();as.width=ls.width,as.height=ls.height,as.x=ls.left+rs.x,as.y=ls.top+rs.y,os=_objectSpread2({},as),["circle","ellipse"].includes(us.type)&&(as.x+=as.width/2,as.y+=as.height/2),us.type==="text"&&(as.y+=as.height)}for(var fs=[],hs=0;hs<us.children.length;hs+=1)fs.push(ns(us.children[hs],os));return _objectSpread2(_objectSpread2({},us),{},{attrs:_objectSpread2(_objectSpread2({},us.attrs),as),children:fs,boundaryBox:as})},getPositionUsingYoga=function ns(ts){var rs=entryBrowser.Node.create();rs.setWidthAuto(),rs.setHeightAuto();var as=constructNodes(ts,rs)||_objectSpread2(_objectSpread2({},ts),{},{container:rs});rs.calculateLayout();var os=caculateNodes(as,{width:0,height:0,x:0,y:0});return rs.freeRecursive(),os},getRatioByArray=function ns(ts,rs){var as=[];ts.forEach(function(vs){vs[0]instanceof Array?vs[0].forEach(function(gs){return as.push([gs,vs[1]])}):as.push([Number(vs[0]),vs[1]])}),as=as.sort(function(vs,gs){return vs[0]-gs[0]});for(var os=0;os<as.length;os++){var is=as[os],us=as[os+1];if(!us)return is[1];if(rs>is[0]&&rs<=us[0]){var ls=rs-is[0],fs=us[0]-is[0],hs=us[1]-is[1];return is[1]+hs*ls/fs}}},animations={spin:function ns(ts){var rs=Util.transform([1,0,0,0,1,0,0,0,1],[["r",Math.PI*2*ts]]);return{matrix:rs}},flash:function ns(ts){return{opacity:Math.abs(1-ts*2)}},pulse:function ns(ts){var rs=getRatioByArray([[[0,1],1],[.5,1.25]],ts),as=Util.transform([1,0,0,0,1,0,0,0,1],[["s",rs,rs]]);return{matrix:as}},rubber:function ns(ts){var rs=getRatioByArray([[0,1],[.3,1.25],[.4,.75],[.5,1.15],[.65,.95],[.75,1.05],[1,1]],ts),as=getRatioByArray([[0,1],[.3,.75],[.4,1.25],[.5,.95],[.65,1.05],[.75,.95],[1,1]],ts),os=Util.transform([1,0,0,0,1,0,0,0,1],[["s",rs,as]]);return{matrix:os}},tada:function ns(ts){var rs=getRatioByArray([[0,1],[[.1,.2],.9],[[.8,.9],1.1],[1,1]],ts),as=getRatioByArray([[0,0],[[.3,.5,.7,.9],1],[[.1,.2,.4,.6,.8],-1],[1,0]],ts),os=Util.transform([1,0,0,0,1,0,0,0,1],[["s",rs,rs],["r",(as||0)*Math.PI/60]]);return{matrix:os}},bounce:function ns(ts){var rs=getRatioByArray([[[0,1],0],[[.4,.43],-30],[.7,-15],[.8,10],[.9,-3]],ts),as=getRatioByArray([[[0,1],1],[[.4,.43],1.1],[.7,1.05],[.8,.95],[.9,1.02]],ts),os=Util.transform([1,0,0,0,1,0,0,0,1],[["t",0,rs],["s",1,as]]);return{matrix:os}}},animateShapeWithConfig=function ns(ts,rs,as){var os=(rs==null?void 0:rs.animate)&&animations[rs.animate];if(rs&&os){var is=_objectSpread2(_objectSpread2({duration:2e3},rs),{},{initMatrix:as});ts.animate(os,is)}else ts.stopAnimate()},registerNodeReact=function ns(ts){var rs=getShapeFromReact(ts),as=getPositionUsingYoga(rs);return as},renderTarget=function ns(ts,rs){var as=rs,os=rs,is=ts.attrs,us=is===void 0?{}:is,ls=ts.boundaryBox,fs=ts.type,hs=ts.children,vs=ts.props;if(ts.type!=="group"){var gs=rs.addShape(ts.type,_objectSpread2({attrs:us,origin:{boundaryBox:ls,type:fs,children:hs}},vs));vs.keyShape&&(os=gs),animateShapeWithConfig(gs,vs.animation)}else as=rs.addGroup(vs),os||(os=as);if(ts.children){var ys=ts.children.map(function(xs){return ns(xs,as)}).filter(function(xs){return xs});os=ys.find(function(xs){return!xs.isGroup()})||os}return os},getRealStructure=function ns(ts){var rs=ts.children;ts.children=[];for(var as=[],os=0;os<rs.length;os+=1){var is=ns(rs[os]);as=as.concat(is)}return ts.type!=="group"?[ts].concat(_toConsumableArray(as)):(ts.children=as,[ts])},diffTarget=function ns(ts,rs){for(var as=_toConsumableArray(ts.getChildren()),os=0;os<as.length;os+=1){var is=as[os],us=rs[os];us?is?is.cfg.type!==us.type?(ts.removeChild(is,!0),renderTarget(us,ts)):(us.props&&(is.cfg=_objectSpread2(_objectSpread2({},is.cfg),us.props)),us.attrs&&is.attr&&is.attr(us.attrs),us.type==="group"&&ns(is,us.children)):renderTarget(us,ts):ts.removeChild(is,!0)}};function createNodeFromReact(ns){var ts=function(as){return registerNodeReact(React.createElement(ns,{cfg:as}))};return{draw:function(as,os){var is=ts(as||{}),us=renderTarget(is,os);return us},update:function(as,os){var is=ts(as||{});if(os){var us=os.getContainer(),ls=getRealStructure(is);diffTarget(us,ls)}},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var ENodeType=(ns=>(ns.XmlFlow="xml-flow",ns.XmlTag="xml-tag",ns.XmlStop="xml-stop",ns))(ENodeType||{}),EEdgeType=(ns=>(ns.Hvh="hvh",ns))(EEdgeType||{}),EFlowItemType=(ns=>(ns.DeviceStatus="device-status",ns.Robot="robot",ns.Condition="condition",ns.Stop="stop",ns.Add="add",ns.Normal="normal",ns.High="high",ns.Medium="medium",ns))(EFlowItemType||{});const Container=ns=>{const ts={fill:"#fff",stroke:"#ddd",shadowColor:"#eee",shadowBlur:30,radius:[8],padding:[25,25],width:325,...ns.style};return jsxRuntimeExports.jsx(Group,{children:jsxRuntimeExports.jsxs(Rect,{style:ts,children:[ns.title?jsxRuntimeExports.jsx(Text,{style:{fill:"#000",fontSize:16,...ns.titleStyle},children:ns.title}):"",ns.children]})})},DeviceItem=({list:ns})=>ns.map((ts,rs)=>jsxRuntimeExports.jsxs(Rect,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",margin:[14,0,0,0]},children:[jsxRuntimeExports.jsx(Rect,{style:{fill:"#D7D7D7",radius:10,padding:[5,8],display:"flex",justifyContent:"center",alignItems:"center"},children:jsxRuntimeExports.jsx(Text,{style:{fill:"#fff",fontSize:12},children:ts.operaType})}),jsxRuntimeExports.jsxs(Text,{style:{fill:"#000",fontSize:12,margin:[0,8]},children:[ts.deviceType.label," - ",ts.deviceList.label]}),jsxRuntimeExports.jsx(Rect,{style:{fill:"#EDF6FF",radius:5,width:33,height:23,display:"flex",padding:[5,30],justifyContent:"center",alignItems:"center"},children:jsxRuntimeExports.jsx(Text,{style:{fill:"#3699FF",fontSize:12},children:ts.status.label})})]},rs)),Condition=({select:ns,list:ts})=>jsxRuntimeExports.jsxs(Rect,{style:{},children:[jsxRuntimeExports.jsx(Text,{style:{fill:"#000",margin:[20,0,0,0]},children:ns.label}),DeviceItem({list:ts})]}),FlowItem=({cfg:{data:ns,style:ts}})=>{const rs=()=>{if(ns){if(ns.type===EFlowItemType.DeviceStatus||ns.type===EFlowItemType.Robot)return DeviceItem({list:ns.list});if(ns.type===EFlowItemType.Condition)return Condition({select:ns.select,list:ns.list})}};return jsxRuntimeExports.jsx(Container,{title:ns==null?void 0:ns.title,titleStyle:ns==null?void 0:ns.titleStyle,style:ts,children:rs()})},threeData={id:"root",label:"root",type:ENodeType.XmlFlow,data:{title:"Ammonia Level",heightCoe:10,type:EFlowItemType.DeviceStatus,list:[{deviceType:{label:"Ammonia Sensor",value:"Ammonia Sensor"},status:{label:"Medium",value:2},deviceList:{label:"8B-901",value:"8B-901"},operaType:"AND"}]},children:[{id:"c1",label:"c1",type:ENodeType.XmlFlow,data:{title:"Condition",heightCoe:10,type:EFlowItemType.Condition,select:{label:"Ammonia Level",value:"Ammonia Level"},list:[{deviceType:{label:"Ammonia Sensor",value:"Ammonia Sensor"},status:{label:"Medium",value:2},deviceList:{label:"8B-90",value:"8B-90"},operaType:"AND"},{deviceType:{label:"Ammonia Sensor",value:"Ammonia Sensor"},status:{label:"Medium",value:2},deviceList:{label:"8B-901",value:"8B-901"},operaType:"OR"}]},children:[{id:"c1-1",type:ENodeType.XmlTag,data:{title:"Normal",heightCoe:10,type:EFlowItemType.Normal,titleStyle:{fontSize:18}},children:[{id:"c1-1-1",label:"c1-1-1",type:ENodeType.XmlFlow,data:{title:"Robot",heightCoe:10,type:EFlowItemType.Robot,list:[{deviceType:{label:"Ammonia Sensor",value:"Ammonia Sensor"},status:{label:"Medium",value:2},deviceList:{label:"8B-90",value:"8B-90"},operaType:"AND"},{deviceType:{label:"Ammonia Sensor",value:"Ammonia Sensor"},status:{label:"Medium",value:2},deviceList:{label:"8B-901",value:"8B-901"},operaType:"OR"}]}}]},{id:"c1-2",type:ENodeType.XmlTag,data:{title:"High",heightCoe:10,type:EFlowItemType.High},children:[{id:"c1-2-1",label:"c1-2-1",type:ENodeType.XmlFlow,data:{title:"Robot",heightCoe:10,type:EFlowItemType.Robot,list:[{deviceType:{label:"Ammonia Sensor",value:"Ammonia Sensor"},status:{label:"Medium",value:2},deviceList:{label:"8B-90",value:"8B-90"},operaType:"AND"},{deviceType:{label:"Ammonia Sensor",value:"Ammonia Sensor"},status:{label:"Medium",value:2},deviceList:{label:"8B-901",value:"8B-901"},operaType:"OR"}]},children:[{id:"c1-2-1-1",label:"c1-2-1-1",type:ENodeType.XmlStop,data:{title:"Stop Automation",type:EFlowItemType.Stop}}]}]},{id:"c1-3",type:ENodeType.XmlTag,data:{title:"Medium",heightCoe:10,type:EFlowItemType.Medium},children:[{id:"c1-3-1",label:"c1-3-1",type:ENodeType.XmlFlow,data:{title:"Robot",heightCoe:10,type:EFlowItemType.Robot,list:[{deviceType:{label:"Ammonia Sensor",value:"Ammonia Sensor"},status:{label:"Medium",value:2},deviceList:{label:"8B-901",value:"8B-901"},operaType:"OR"}]}}]}]}]},typeColor={[EFlowItemType.Normal]:["#5E6278","#E4E6EF"],[EFlowItemType.Medium]:["#5E6278","#E4E6EF"],[EFlowItemType.High]:["#F1416C","#FFF5F8"]},Normal$1=({cfg:{data:ns,style:ts}})=>{const rs=typeColor[ns==null?void 0:ns.type];return jsxRuntimeExports.jsx(Group,{children:jsxRuntimeExports.jsx(Rect,{style:{width:325,display:"flex",alignItems:"center",...ts},children:jsxRuntimeExports.jsx(Rect,{style:{padding:[10,18],radius:6,fill:"#fff",stroke:"#ddd",shadowColor:"#eee",shadowBlur:30},children:jsxRuntimeExports.jsx(Rect,{style:{fill:rs[1],padding:[6,12],radius:6},children:jsxRuntimeExports.jsx(Text,{style:{fill:rs[0],fontSize:18,fontWeight:"bold"},children:ns==null?void 0:ns.title})})})})})},Normal=({cfg:{data:ns,style:ts}})=>jsxRuntimeExports.jsx(Group,{children:jsxRuntimeExports.jsx(Rect,{style:{width:325,display:"flex",alignItems:"center",...ts},children:jsxRuntimeExports.jsx(Rect,{style:{fill:"#A1A5B7",display:"flex",justifyContent:"center",alignItems:"center",radius:35,width:241,height:72,shadowColor:"#eee",shadowBlur:30},children:jsxRuntimeExports.jsx(Text,{style:{fill:"#fff",fontSize:18,fontWeight:"bold"},children:ns==null?void 0:ns.title})})})}),Three=()=>{const ns=reactExports$1.useRef(null),ts=reactExports$1.useRef(!0),rs={type:"compactBox",getId(us){return us.id},getHeight(us){var fs;return 20*(((fs=us.data)==null?void 0:fs.heightCoe)??1)},getWidth(){return 16},getVGap(){return 40},getHGap(){return 200}},as=reactExports$1.useMemo(()=>threeData,[]),os=()=>({draw(us,ls){const fs=us.startPoint,hs=us.endPoint;return ls.addShape("path",{attrs:{stroke:"#333",path:[["M",fs.x,fs.y],["L",fs.x,(fs.y+hs.y)/2],["L",hs.x,(fs.y+hs.y)/2],["L",hs.x,hs.y]]},name:"path-shape"})},afterDraw(us,ls){if(!ls)return;const hs=ls.get("children")[0].getPoint(.5),vs=102;(us==null?void 0:us.targetNode)._cfg.currentShape!==ENodeType.XmlTag&&(ls.addShape("rect",{attrs:{width:vs,height:36,fill:"#fff",stroke:"#C0C0C0",lineDash:[2],radius:18,x:hs.x-vs/2,y:hs.y-5},name:"mid-point-edge-rect"}),ls.addShape("text",{attrs:{height:36,text:"Triggered",fill:"#A1A5B7",fontSize:12,x:hs.x-26,y:hs.y+20}}))}}),is=()=>{registerNode(ENodeType.XmlFlow,createNodeFromReact(FlowItem)),registerNode(ENodeType.XmlTag,createNodeFromReact(Normal$1)),registerNode(ENodeType.XmlStop,createNodeFromReact(Normal)),registerEdge(EEdgeType.Hvh,os())};return reactExports$1.useEffect(()=>{if(!ns.current||!ts.current)return;const us=new TreeGraph({container:ns.current,width:800,height:700,linkCenter:!0,modes:{default:["drag-node","drag-canvas","zoom-canvas"]},layout:rs,animate:!1,defaultNode:{type:"rect"},defaultEdge:{type:EEdgeType.Hvh}});is(),us.data(as),us.render(),us.fitView(),us.on("node:click",ls=>{var vs,gs;const fs=(gs=(vs=ls.item)==null?void 0:vs._cfg)==null?void 0:gs.model,hs={...fs};fs.data&&fs.data.type===EFlowItemType.Add&&(fs.label=fs.id,fs.data=void 0,fs.style=void 0,hs.id=hs.id+"-1",fs.children=[hs],us.changeData(as,!0),us.fitView())}),ts.current=!1},[]),jsxRuntimeExports.jsx("div",{style:{height:"100%",textAlign:"center",border:"1px solid red"},ref:ns})},App=()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Three,{})});client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React$1.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
